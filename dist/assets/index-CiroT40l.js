var p3=Object.defineProperty;var m3=(e,t,n)=>t in e?p3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xt=(e,t,n)=>m3(e,typeof t!="symbol"?t+"":t,n);import g3 from"chartjs-plugin-zoom";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function yE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P0={exports:{}},ad={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ER;function y3(){if(ER)return ad;ER=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var c in s)c!=="key"&&(r[c]=s[c])}else r=s;return s=r.ref,{$$typeof:e,type:i,key:a,ref:s!==void 0?s:null,props:r}}return ad.Fragment=t,ad.jsx=n,ad.jsxs=n,ad}var TR;function _3(){return TR||(TR=1,P0.exports=y3()),P0.exports}var S=_3(),O0={exports:{}},Yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xR;function v3(){if(xR)return Yt;xR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=m&&U[m]||U["@@iterator"],typeof U=="function"?U:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,T={};function x(U,J,ot){this.props=U,this.context=J,this.refs=T,this.updater=ot||v}x.prototype.isReactComponent={},x.prototype.setState=function(U,J){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,J,"setState")},x.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function C(){}C.prototype=x.prototype;function k(U,J,ot){this.props=U,this.context=J,this.refs=T,this.updater=ot||v}var M=k.prototype=new C;M.constructor=k,w(M,x.prototype),M.isPureReactComponent=!0;var z=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function O(U,J,ot,st,pt,St){return ot=St.ref,{$$typeof:e,type:U,key:J,ref:ot!==void 0?ot:null,props:St}}function D(U,J){return O(U.type,J,void 0,void 0,void 0,U.props)}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function L(U){var J={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ot){return J[ot]})}var F=/\/+/g;function H(U,J){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):J.toString(36)}function B(){}function _t(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(B,B):(U.status="pending",U.then(function(J){U.status==="pending"&&(U.status="fulfilled",U.value=J)},function(J){U.status==="pending"&&(U.status="rejected",U.reason=J)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function ft(U,J,ot,st,pt){var St=typeof U;(St==="undefined"||St==="boolean")&&(U=null);var gt=!1;if(U===null)gt=!0;else switch(St){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(U.$$typeof){case e:case t:gt=!0;break;case f:return gt=U._init,ft(gt(U._payload),J,ot,st,pt)}}if(gt)return pt=pt(U),gt=st===""?"."+H(U,0):st,z(pt)?(ot="",gt!=null&&(ot=gt.replace(F,"$&/")+"/"),ft(pt,J,ot,"",function(Vt){return Vt})):pt!=null&&(N(pt)&&(pt=D(pt,ot+(pt.key==null||U&&U.key===pt.key?"":(""+pt.key).replace(F,"$&/")+"/")+gt)),J.push(pt)),1;gt=0;var ue=st===""?".":st+":";if(z(U))for(var vt=0;vt<U.length;vt++)st=U[vt],St=ue+H(st,vt),gt+=ft(st,J,ot,St,pt);else if(vt=y(U),typeof vt=="function")for(U=vt.call(U),vt=0;!(st=U.next()).done;)st=st.value,St=ue+H(st,vt++),gt+=ft(st,J,ot,St,pt);else if(St==="object"){if(typeof U.then=="function")return ft(_t(U),J,ot,st,pt);throw J=String(U),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return gt}function K(U,J,ot){if(U==null)return U;var st=[],pt=0;return ft(U,st,"","",function(St){return J.call(ot,St,pt++)}),st}function tt(U){if(U._status===-1){var J=U._result;J=J(),J.then(function(ot){(U._status===0||U._status===-1)&&(U._status=1,U._result=ot)},function(ot){(U._status===0||U._status===-1)&&(U._status=2,U._result=ot)}),U._status===-1&&(U._status=0,U._result=J)}if(U._status===1)return U._result.default;throw U._result}var dt=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function yt(){}return Yt.Children={map:K,forEach:function(U,J,ot){K(U,function(){J.apply(this,arguments)},ot)},count:function(U){var J=0;return K(U,function(){J++}),J},toArray:function(U){return K(U,function(J){return J})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Yt.Component=x,Yt.Fragment=n,Yt.Profiler=s,Yt.PureComponent=k,Yt.StrictMode=i,Yt.Suspense=u,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return j.H.useMemoCache(U)}},Yt.cache=function(U){return function(){return U.apply(null,arguments)}},Yt.cloneElement=function(U,J,ot){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var st=w({},U.props),pt=U.key,St=void 0;if(J!=null)for(gt in J.ref!==void 0&&(St=void 0),J.key!==void 0&&(pt=""+J.key),J)!$.call(J,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&J.ref===void 0||(st[gt]=J[gt]);var gt=arguments.length-2;if(gt===1)st.children=ot;else if(1<gt){for(var ue=Array(gt),vt=0;vt<gt;vt++)ue[vt]=arguments[vt+2];st.children=ue}return O(U.type,pt,void 0,void 0,St,st)},Yt.createContext=function(U){return U={$$typeof:a,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:r,_context:U},U},Yt.createElement=function(U,J,ot){var st,pt={},St=null;if(J!=null)for(st in J.key!==void 0&&(St=""+J.key),J)$.call(J,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(pt[st]=J[st]);var gt=arguments.length-2;if(gt===1)pt.children=ot;else if(1<gt){for(var ue=Array(gt),vt=0;vt<gt;vt++)ue[vt]=arguments[vt+2];pt.children=ue}if(U&&U.defaultProps)for(st in gt=U.defaultProps,gt)pt[st]===void 0&&(pt[st]=gt[st]);return O(U,St,void 0,void 0,null,pt)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(U){return{$$typeof:c,render:U}},Yt.isValidElement=N,Yt.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:tt}},Yt.memo=function(U,J){return{$$typeof:d,type:U,compare:J===void 0?null:J}},Yt.startTransition=function(U){var J=j.T,ot={};j.T=ot;try{var st=U(),pt=j.S;pt!==null&&pt(ot,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(yt,dt)}catch(St){dt(St)}finally{j.T=J}},Yt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Yt.use=function(U){return j.H.use(U)},Yt.useActionState=function(U,J,ot){return j.H.useActionState(U,J,ot)},Yt.useCallback=function(U,J){return j.H.useCallback(U,J)},Yt.useContext=function(U){return j.H.useContext(U)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(U,J){return j.H.useDeferredValue(U,J)},Yt.useEffect=function(U,J,ot){var st=j.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(U,J)},Yt.useId=function(){return j.H.useId()},Yt.useImperativeHandle=function(U,J,ot){return j.H.useImperativeHandle(U,J,ot)},Yt.useInsertionEffect=function(U,J){return j.H.useInsertionEffect(U,J)},Yt.useLayoutEffect=function(U,J){return j.H.useLayoutEffect(U,J)},Yt.useMemo=function(U,J){return j.H.useMemo(U,J)},Yt.useOptimistic=function(U,J){return j.H.useOptimistic(U,J)},Yt.useReducer=function(U,J,ot){return j.H.useReducer(U,J,ot)},Yt.useRef=function(U){return j.H.useRef(U)},Yt.useState=function(U){return j.H.useState(U)},Yt.useSyncExternalStore=function(U,J,ot){return j.H.useSyncExternalStore(U,J,ot)},Yt.useTransition=function(){return j.H.useTransition()},Yt.version="19.1.0",Yt}var SR;function _E(){return SR||(SR=1,O0.exports=v3()),O0.exports}var R=_E();const de=yE(R);var L0={exports:{}},ld={},V0={exports:{}},j0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AR;function b3(){return AR||(AR=1,function(e){function t(K,tt){var dt=K.length;K.push(tt);t:for(;0<dt;){var yt=dt-1>>>1,U=K[yt];if(0<s(U,tt))K[yt]=tt,K[dt]=U,dt=yt;else break t}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var tt=K[0],dt=K.pop();if(dt!==tt){K[0]=dt;t:for(var yt=0,U=K.length,J=U>>>1;yt<J;){var ot=2*(yt+1)-1,st=K[ot],pt=ot+1,St=K[pt];if(0>s(st,dt))pt<U&&0>s(St,st)?(K[yt]=St,K[pt]=dt,yt=pt):(K[yt]=st,K[ot]=dt,yt=ot);else if(pt<U&&0>s(St,dt))K[yt]=St,K[pt]=dt,yt=pt;else break t}}return tt}function s(K,tt){var dt=K.sortIndex-tt.sortIndex;return dt!==0?dt:K.id-tt.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,c=a.now();e.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,m=null,y=3,v=!1,w=!1,T=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function z(K){for(var tt=n(d);tt!==null;){if(tt.callback===null)i(d);else if(tt.startTime<=K)i(d),tt.sortIndex=tt.expirationTime,t(u,tt);else break;tt=n(d)}}function j(K){if(T=!1,z(K),!w)if(n(u)!==null)w=!0,$||($=!0,H());else{var tt=n(d);tt!==null&&ft(j,tt.startTime-K)}}var $=!1,O=-1,D=5,N=-1;function L(){return x?!0:!(e.unstable_now()-N<D)}function F(){if(x=!1,$){var K=e.unstable_now();N=K;var tt=!0;try{t:{w=!1,T&&(T=!1,k(O),O=-1),v=!0;var dt=y;try{e:{for(z(K),m=n(u);m!==null&&!(m.expirationTime>K&&L());){var yt=m.callback;if(typeof yt=="function"){m.callback=null,y=m.priorityLevel;var U=yt(m.expirationTime<=K);if(K=e.unstable_now(),typeof U=="function"){m.callback=U,z(K),tt=!0;break e}m===n(u)&&i(u),z(K)}else i(u);m=n(u)}if(m!==null)tt=!0;else{var J=n(d);J!==null&&ft(j,J.startTime-K),tt=!1}}break t}finally{m=null,y=dt,v=!1}tt=void 0}}finally{tt?H():$=!1}}}var H;if(typeof M=="function")H=function(){M(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,_t=B.port2;B.port1.onmessage=F,H=function(){_t.postMessage(null)}}else H=function(){C(F,0)};function ft(K,tt){O=C(function(){K(e.unstable_now())},tt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(K){switch(y){case 1:case 2:case 3:var tt=3;break;default:tt=y}var dt=y;y=tt;try{return K()}finally{y=dt}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(K,tt){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var dt=y;y=K;try{return tt()}finally{y=dt}},e.unstable_scheduleCallback=function(K,tt,dt){var yt=e.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?yt+dt:yt):dt=yt,K){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=dt+U,K={id:f++,callback:tt,priorityLevel:K,startTime:dt,expirationTime:U,sortIndex:-1},dt>yt?(K.sortIndex=dt,t(d,K),n(u)===null&&K===n(d)&&(T?(k(O),O=-1):T=!0,ft(j,dt-yt))):(K.sortIndex=U,t(u,K),w||v||(w=!0,$||($=!0,H()))),K},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(K){var tt=y;return function(){var dt=y;y=tt;try{return K.apply(this,arguments)}finally{y=dt}}}}(j0)),j0}var CR;function w3(){return CR||(CR=1,V0.exports=b3()),V0.exports}var U0={exports:{}},hi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RR;function E3(){if(RR)return hi;RR=1;var e=_E();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(u,d,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:u,containerInfo:d,implementation:f}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return hi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hi.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return r(u,d,null,f)},hi.flushSync=function(u){var d=a.T,f=i.p;try{if(a.T=null,i.p=2,u)return u()}finally{a.T=d,i.p=f,i.d.f()}},hi.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(u,d))},hi.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},hi.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,m=c(f,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?i.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):f==="script"&&i.d.X(u,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},hi.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=c(d.as,d.crossOrigin);i.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(u)},hi.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,m=c(f,d.crossOrigin);i.d.L(u,f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},hi.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=c(d.as,d.crossOrigin);i.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(u)},hi.requestFormReset=function(u){i.d.r(u)},hi.unstable_batchedUpdates=function(u,d){return u(d)},hi.useFormState=function(u,d,f){return a.H.useFormState(u,d,f)},hi.useFormStatus=function(){return a.H.useHostTransitionStatus()},hi.version="19.1.0",hi}var IR;function a2(){if(IR)return U0.exports;IR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),U0.exports=E3(),U0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DR;function T3(){if(DR)return ld;DR=1;var e=w3(),t=_E(),n=a2();function i(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(r(o)!==o)throw Error(i(188))}function u(o){var l=o.alternate;if(!l){if(l=r(o),l===null)throw Error(i(188));return l!==o?null:o}for(var h=o,p=l;;){var _=h.return;if(_===null)break;var b=_.alternate;if(b===null){if(p=_.return,p!==null){h=p;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===h)return c(_),o;if(b===p)return c(_),l;b=b.sibling}throw Error(i(188))}if(h.return!==p.return)h=_,p=b;else{for(var I=!1,P=_.child;P;){if(P===h){I=!0,h=_,p=b;break}if(P===p){I=!0,p=_,h=b;break}P=P.sibling}if(!I){for(P=b.child;P;){if(P===h){I=!0,h=b,p=_;break}if(P===p){I=!0,p=b,h=_;break}P=P.sibling}if(!I)throw Error(i(189))}}if(h.alternate!==p)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:l}function d(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=d(o),l!==null)return l;o=o.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),M=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function H(o){return o===null||typeof o!="object"?null:(o=F&&o[F]||o["@@iterator"],typeof o=="function"?o:null)}var B=Symbol.for("react.client.reference");function _t(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===B?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case w:return"Fragment";case x:return"Profiler";case T:return"StrictMode";case j:return"Suspense";case $:return"SuspenseList";case N:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case M:return(o.displayName||"Context")+".Provider";case k:return(o._context.displayName||"Context")+".Consumer";case z:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return l=o.displayName||null,l!==null?l:_t(o.type)||"Memo";case D:l=o._payload,o=o._init;try{return _t(o(l))}catch{}}return null}var ft=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},yt=[],U=-1;function J(o){return{current:o}}function ot(o){0>U||(o.current=yt[U],yt[U]=null,U--)}function st(o,l){U++,yt[U]=o.current,o.current=l}var pt=J(null),St=J(null),gt=J(null),ue=J(null);function vt(o,l){switch(st(gt,l),st(St,o),st(pt,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?QC(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=QC(l),o=XC(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ot(pt),st(pt,o)}function Vt(){ot(pt),ot(St),ot(gt)}function Mt(o){o.memoizedState!==null&&st(ue,o);var l=pt.current,h=XC(l,o.type);l!==h&&(st(St,o),st(pt,h))}function zt(o){St.current===o&&(ot(pt),ot(St)),ue.current===o&&(ot(ue),nd._currentValue=dt)}var Ct=Object.prototype.hasOwnProperty,At=e.unstable_scheduleCallback,me=e.unstable_cancelCallback,qe=e.unstable_shouldYield,Bn=e.unstable_requestPaint,Se=e.unstable_now,ti=e.unstable_getCurrentPriorityLevel,Sn=e.unstable_ImmediatePriority,ln=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,Pi=e.unstable_LowPriority,Yi=e.unstable_IdlePriority,sr=e.log,jr=e.unstable_setDisableYieldValue,Ge=null,Jt=null;function hn(o){if(typeof sr=="function"&&jr(o),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Ge,o)}catch{}}var We=Math.clz32?Math.clz32:fs,js=Math.log,Oi=Math.LN2;function fs(o){return o>>>=0,o===0?32:31-(js(o)/Oi|0)|0}var Us=256,Q=4194304;function ht(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function kt(o,l,h){var p=o.pendingLanes;if(p===0)return 0;var _=0,b=o.suspendedLanes,I=o.pingedLanes;o=o.warmLanes;var P=p&134217727;return P!==0?(p=P&~b,p!==0?_=ht(p):(I&=P,I!==0?_=ht(I):h||(h=P&~o,h!==0&&(_=ht(h))))):(P=p&~b,P!==0?_=ht(P):I!==0?_=ht(I):h||(h=p&~o,h!==0&&(_=ht(h)))),_===0?0:l!==0&&l!==_&&(l&b)===0&&(b=_&-_,h=l&-l,b>=h||b===32&&(h&4194048)!==0)?l:_}function Ht(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function ge(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ae(){var o=Us;return Us<<=1,(Us&4194048)===0&&(Us=256),o}function Kt(){var o=Q;return Q<<=1,(Q&62914560)===0&&(Q=4194304),o}function Xt(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function qt(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ce(o,l,h,p,_,b){var I=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var P=o.entanglements,q=o.expirationTimes,Z=o.hiddenUpdates;for(h=I&~h;0<h;){var rt=31-We(h),ct=1<<rt;P[rt]=0,q[rt]=-1;var et=Z[rt];if(et!==null)for(Z[rt]=null,rt=0;rt<et.length;rt++){var nt=et[rt];nt!==null&&(nt.lane&=-536870913)}h&=~ct}p!==0&&Nt(o,p,0),b!==0&&_===0&&o.tag!==0&&(o.suspendedLanes|=b&~(I&~l))}function Nt(o,l,h){o.pendingLanes|=l,o.suspendedLanes&=~l;var p=31-We(l);o.entangledLanes|=l,o.entanglements[p]=o.entanglements[p]|1073741824|h&4194090}function yn(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var p=31-We(h),_=1<<p;_&l|o[p]&l&&(o[p]|=l),h&=~_}}function Zt(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ut(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function se(){var o=tt.p;return o!==0?o:(o=window.event,o===void 0?32:gR(o.type))}function De(o,l){var h=tt.p;try{return tt.p=o,l()}finally{tt.p=h}}var Rt=Math.random().toString(36).slice(2),ne="__reactFiber$"+Rt,he="__reactProps$"+Rt,Ke="__reactContainer$"+Rt,Qi="__reactEvents$"+Rt,ps="__reactListeners$"+Rt,Pn="__reactHandles$"+Rt,ms="__reactResources$"+Rt,Xi="__reactMarker$"+Rt;function Uo(o){delete o[ne],delete o[he],delete o[Qi],delete o[ps],delete o[Pn]}function Ur(o){var l=o[ne];if(l)return l;for(var h=o.parentNode;h;){if(l=h[Ke]||h[ne]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=eR(o);o!==null;){if(h=o[ne])return h;o=eR(o)}return l}o=h,h=o.parentNode}return null}function rr(o){if(o=o[ne]||o[Ke]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function or(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(i(33))}function Ai(o){var l=o[ms];return l||(l=o[ms]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function _n(o){o[Xi]=!0}var lh=new Set,pc={};function Fs(o,l){Fr(o,l),Fr(o+"Capture",l)}function Fr(o,l){for(pc[o]=l,o=0;o<l.length;o++)lh.add(l[o])}var Ep=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tp={},Za={};function xp(o){return Ct.call(Za,o)?!0:Ct.call(Tp,o)?!1:Ep.test(o)?Za[o]=!0:(Tp[o]=!0,!1)}function Fo(o,l,h){if(xp(l))if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+h)}}function ar(o,l,h){if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+h)}}function ei(o,l,h,p){if(p===null)o.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(l,h,""+p)}}var Ja,Sp;function Br(o){if(Ja===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);Ja=l&&l[1]||"",Sp=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ja+o+Sp}var mc=!1;function gc(o,l){if(!o||mc)return"";mc=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(nt){var et=nt}Reflect.construct(o,[],ct)}else{try{ct.call()}catch(nt){et=nt}o.call(ct.prototype)}}else{try{throw Error()}catch(nt){et=nt}(ct=o())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(nt){if(nt&&et&&typeof nt.stack=="string")return[nt.stack,et.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=p.DetermineComponentFrameRoot(),I=b[0],P=b[1];if(I&&P){var q=I.split(`
`),Z=P.split(`
`);for(_=p=0;p<q.length&&!q[p].includes("DetermineComponentFrameRoot");)p++;for(;_<Z.length&&!Z[_].includes("DetermineComponentFrameRoot");)_++;if(p===q.length||_===Z.length)for(p=q.length-1,_=Z.length-1;1<=p&&0<=_&&q[p]!==Z[_];)_--;for(;1<=p&&0<=_;p--,_--)if(q[p]!==Z[_]){if(p!==1||_!==1)do if(p--,_--,0>_||q[p]!==Z[_]){var rt=`
`+q[p].replace(" at new "," at ");return o.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",o.displayName)),rt}while(1<=p&&0<=_);break}}}finally{mc=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Br(h):""}function ch(o){switch(o.tag){case 26:case 27:case 5:return Br(o.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 15:return gc(o.type,!1);case 11:return gc(o.type.render,!1);case 1:return gc(o.type,!0);case 31:return Br("Activity");default:return""}}function yc(o){try{var l="";do l+=ch(o),o=o.return;while(o);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Ci(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function uh(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function j_(o){var l=uh(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,b=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return _.call(this)},set:function(I){p=""+I,b.call(this,I)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function _c(o){o._valueTracker||(o._valueTracker=j_(o))}function hh(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),p="";return o&&(p=uh(o)?o.checked?"true":"false":o.value),o=p,o!==h?(l.setValue(o),!0):!1}function tl(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var U_=/[\n"\\]/g;function An(o){return o.replace(U_,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Zi(o,l,h,p,_,b,I,P){o.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.type=I:o.removeAttribute("type"),l!=null?I==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Ci(l)):o.value!==""+Ci(l)&&(o.value=""+Ci(l)):I!=="submit"&&I!=="reset"||o.removeAttribute("value"),l!=null?Bo(o,I,Ci(l)):h!=null?Bo(o,I,Ci(h)):p!=null&&o.removeAttribute("value"),_==null&&b!=null&&(o.defaultChecked=!!b),_!=null&&(o.checked=_&&typeof _!="function"&&typeof _!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?o.name=""+Ci(P):o.removeAttribute("name")}function el(o,l,h,p,_,b,I,P){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(o.type=b),l!=null||h!=null){if(!(b!=="submit"&&b!=="reset"||l!=null))return;h=h!=null?""+Ci(h):"",l=l!=null?""+Ci(l):h,P||l===o.value||(o.value=l),o.defaultValue=l}p=p??_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=P?o.checked:!!p,o.defaultChecked=!!p,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(o.name=I)}function Bo(o,l,h){l==="number"&&tl(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function zr(o,l,h,p){if(o=o.options,l){l={};for(var _=0;_<h.length;_++)l["$"+h[_]]=!0;for(h=0;h<o.length;h++)_=l.hasOwnProperty("$"+o[h].value),o[h].selected!==_&&(o[h].selected=_),_&&p&&(o[h].defaultSelected=!0)}else{for(h=""+Ci(h),l=null,_=0;_<o.length;_++){if(o[_].value===h){o[_].selected=!0,p&&(o[_].defaultSelected=!0);return}l!==null||o[_].disabled||(l=o[_])}l!==null&&(l.selected=!0)}}function je(o,l,h){if(l!=null&&(l=""+Ci(l),l!==o.value&&(o.value=l),h==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=h!=null?""+Ci(h):""}function nl(o,l,h,p){if(l==null){if(p!=null){if(h!=null)throw Error(i(92));if(ft(p)){if(1<p.length)throw Error(i(93));p=p[0]}h=p}h==null&&(h=""),l=h}h=Ci(l),o.defaultValue=h,p=o.textContent,p===h&&p!==""&&p!==null&&(o.value=p)}function gs(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var il=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ap(o,l,h){var p=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":p?o.setProperty(l,h):typeof h!="number"||h===0||il.has(l)?l==="float"?o.cssFloat=h:o[l]=(""+h).trim():o[l]=h+"px"}function dh(o,l,h){if(l!=null&&typeof l!="object")throw Error(i(62));if(o=o.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var _ in l)p=l[_],l.hasOwnProperty(_)&&h[_]!==p&&Ap(o,_,p)}else for(var b in l)l.hasOwnProperty(b)&&Ap(o,b,l[b])}function fh(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var F_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),B_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vc(o){return B_.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Hr=null;function ys(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var qr=null,$r=null;function ph(o){var l=rr(o);if(l&&(o=l.stateNode)){var h=o[he]||null;t:switch(o=l.stateNode,l.type){case"input":if(Zi(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+An(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var p=h[l];if(p!==o&&p.form===o.form){var _=p[he]||null;if(!_)throw Error(i(90));Zi(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(l=0;l<h.length;l++)p=h[l],p.form===o.form&&hh(p)}break t;case"textarea":je(o,h.value,h.defaultValue);break t;case"select":l=h.value,l!=null&&zr(o,!!h.multiple,l,!1)}}}var lr=!1;function Cp(o,l,h){if(lr)return o(l,h);lr=!0;try{var p=o(l);return p}finally{if(lr=!1,(qr!==null||$r!==null)&&(bm(),qr&&(l=qr,o=$r,$r=qr=null,ph(l),o)))for(l=0;l<o.length;l++)ph(o[l])}}function sl(o,l){var h=o.stateNode;if(h===null)return null;var p=h[he]||null;if(p===null)return null;h=p[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break t;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,l,typeof h));return h}var Bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_s=!1;if(Bs)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){_s=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{_s=!1}var cr=null,zo=null,Gr=null;function mh(){if(Gr)return Gr;var o,l=zo,h=l.length,p,_="value"in cr?cr.value:cr.textContent,b=_.length;for(o=0;o<h&&l[o]===_[o];o++);var I=h-o;for(p=1;p<=I&&l[h-p]===_[b-p];p++);return Gr=_.slice(o,1<p?1-p:void 0)}function ur(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function hr(){return!0}function gh(){return!1}function zn(o){function l(h,p,_,b,I){this._reactName=h,this._targetInst=_,this.type=p,this.nativeEvent=b,this.target=I,this.currentTarget=null;for(var P in o)o.hasOwnProperty(P)&&(h=o[P],this[P]=h?h(b):b[P]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?hr:gh,this.isPropagationStopped=gh,this}return f(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),l}var Me={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bc=zn(Me),ol=f({},Me,{view:0,detail:0}),Rp=zn(ol),wc,Ec,dr,al=f({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ul,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==dr&&(dr&&o.type==="mousemove"?(wc=o.screenX-dr.screenX,Ec=o.screenY-dr.screenY):Ec=wc=0,dr=o),wc)},movementY:function(o){return"movementY"in o?o.movementY:Ec}}),vs=zn(al),Ip=f({},al,{dataTransfer:0}),z_=zn(Ip),ll=f({},ol,{relatedTarget:0}),Tc=zn(ll),yh=f({},Me,{animationName:0,elapsedTime:0,pseudoElement:0}),xc=zn(yh),Dp=f({},Me,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Sc=zn(Dp),H_=f({},Me,{data:0}),_h=zn(H_),cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Np={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vh(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Np[o])?!!l[o]:!1}function ul(){return vh}var kp=f({},ol,{key:function(o){if(o.key){var l=cl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=ur(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Mp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ul,charCode:function(o){return o.type==="keypress"?ur(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ur(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Ac=zn(kp),Pp=f({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bh=zn(Pp),Wr=f({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ul}),Op=zn(Wr),Lp=f({},Me,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vp=zn(Lp),jp=f({},al,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Cc=zn(jp),Ri=f({},Me,{newState:0,oldState:0}),Up=zn(Ri),Fp=[9,13,27,32],fr=Bs&&"CompositionEvent"in window,g=null;Bs&&"documentMode"in document&&(g=document.documentMode);var E=Bs&&"TextEvent"in window&&!g,A=Bs&&(!fr||g&&8<g&&11>=g),V=" ",Y=!1;function it(o,l){switch(o){case"keyup":return Fp.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mt(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ye=!1;function On(o,l){switch(o){case"compositionend":return mt(l);case"keypress":return l.which!==32?null:(Y=!0,V);case"textInput":return o=l.data,o===V&&Y?null:o;default:return null}}function _e(o,l){if(ye)return o==="compositionend"||!fr&&it(o,l)?(o=mh(),Gr=zo=cr=null,ye=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return A&&l.locale!=="ko"?null:l.data;default:return null}}var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Hn[o.type]:l==="textarea"}function Kr(o,l,h,p){qr?$r?$r.push(p):$r=[p]:qr=p,l=Am(l,"onChange"),0<l.length&&(h=new bc("onChange","change",null,h,p),o.push({event:h,listeners:l}))}var ni=null,pr=null;function wh(o){$C(o,0)}function Bp(o){var l=or(o);if(hh(l))return o}function dS(o,l){if(o==="change")return l}var fS=!1;if(Bs){var q_;if(Bs){var $_="oninput"in document;if(!$_){var pS=document.createElement("div");pS.setAttribute("oninput","return;"),$_=typeof pS.oninput=="function"}q_=$_}else q_=!1;fS=q_&&(!document.documentMode||9<document.documentMode)}function mS(){ni&&(ni.detachEvent("onpropertychange",gS),pr=ni=null)}function gS(o){if(o.propertyName==="value"&&Bp(pr)){var l=[];Kr(l,pr,o,ys(o)),Cp(wh,l)}}function q4(o,l,h){o==="focusin"?(mS(),ni=l,pr=h,ni.attachEvent("onpropertychange",gS)):o==="focusout"&&mS()}function $4(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Bp(pr)}function G4(o,l){if(o==="click")return Bp(l)}function W4(o,l){if(o==="input"||o==="change")return Bp(l)}function K4(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Ji=typeof Object.is=="function"?Object.is:K4;function Eh(o,l){if(Ji(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),p=Object.keys(l);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var _=h[p];if(!Ct.call(l,_)||!Ji(o[_],l[_]))return!1}return!0}function yS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function _S(o,l){var h=yS(o);o=0;for(var p;h;){if(h.nodeType===3){if(p=o+h.textContent.length,o<=l&&p>=l)return{node:h,offset:l-o};o=p}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=yS(h)}}function vS(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?vS(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function bS(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=tl(o.document);l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=tl(o.document)}return l}function G_(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var Y4=Bs&&"documentMode"in document&&11>=document.documentMode,Rc=null,W_=null,Th=null,K_=!1;function wS(o,l,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;K_||Rc==null||Rc!==tl(p)||(p=Rc,"selectionStart"in p&&G_(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Th&&Eh(Th,p)||(Th=p,p=Am(W_,"onSelect"),0<p.length&&(l=new bc("onSelect","select",null,l,h),o.push({event:l,listeners:p}),l.target=Rc)))}function hl(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var Ic={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionrun:hl("Transition","TransitionRun"),transitionstart:hl("Transition","TransitionStart"),transitioncancel:hl("Transition","TransitionCancel"),transitionend:hl("Transition","TransitionEnd")},Y_={},ES={};Bs&&(ES=document.createElement("div").style,"AnimationEvent"in window||(delete Ic.animationend.animation,delete Ic.animationiteration.animation,delete Ic.animationstart.animation),"TransitionEvent"in window||delete Ic.transitionend.transition);function dl(o){if(Y_[o])return Y_[o];if(!Ic[o])return o;var l=Ic[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in ES)return Y_[o]=l[h];return o}var TS=dl("animationend"),xS=dl("animationiteration"),SS=dl("animationstart"),Q4=dl("transitionrun"),X4=dl("transitionstart"),Z4=dl("transitioncancel"),AS=dl("transitionend"),CS=new Map,Q_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Q_.push("scrollEnd");function zs(o,l){CS.set(o,l),Fs(l,[o])}var RS=new WeakMap;function bs(o,l){if(typeof o=="object"&&o!==null){var h=RS.get(o);return h!==void 0?h:(l={value:o,source:l,stack:yc(l)},RS.set(o,l),l)}return{value:o,source:l,stack:yc(l)}}var ws=[],Dc=0,X_=0;function zp(){for(var o=Dc,l=X_=Dc=0;l<o;){var h=ws[l];ws[l++]=null;var p=ws[l];ws[l++]=null;var _=ws[l];ws[l++]=null;var b=ws[l];if(ws[l++]=null,p!==null&&_!==null){var I=p.pending;I===null?_.next=_:(_.next=I.next,I.next=_),p.pending=_}b!==0&&IS(h,_,b)}}function Hp(o,l,h,p){ws[Dc++]=o,ws[Dc++]=l,ws[Dc++]=h,ws[Dc++]=p,X_|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function Z_(o,l,h,p){return Hp(o,l,h,p),qp(o)}function Mc(o,l){return Hp(o,null,null,l),qp(o)}function IS(o,l,h){o.lanes|=h;var p=o.alternate;p!==null&&(p.lanes|=h);for(var _=!1,b=o.return;b!==null;)b.childLanes|=h,p=b.alternate,p!==null&&(p.childLanes|=h),b.tag===22&&(o=b.stateNode,o===null||o._visibility&1||(_=!0)),o=b,b=b.return;return o.tag===3?(b=o.stateNode,_&&l!==null&&(_=31-We(h),o=b.hiddenUpdates,p=o[_],p===null?o[_]=[l]:p.push(l),l.lane=h|536870912),b):null}function qp(o){if(50<Kh)throw Kh=0,s0=null,Error(i(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var Nc={};function J4(o,l,h,p){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(o,l,h,p){return new J4(o,l,h,p)}function J_(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Yr(o,l){var h=o.alternate;return h===null?(h=ts(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function DS(o,l){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,l=h.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function $p(o,l,h,p,_,b){var I=0;if(p=o,typeof o=="function")J_(o)&&(I=1);else if(typeof o=="string")I=e3(o,h,pt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case N:return o=ts(31,h,l,_),o.elementType=N,o.lanes=b,o;case w:return fl(h.children,_,b,l);case T:I=8,_|=24;break;case x:return o=ts(12,h,l,_|2),o.elementType=x,o.lanes=b,o;case j:return o=ts(13,h,l,_),o.elementType=j,o.lanes=b,o;case $:return o=ts(19,h,l,_),o.elementType=$,o.lanes=b,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:case M:I=10;break t;case k:I=9;break t;case z:I=11;break t;case O:I=14;break t;case D:I=16,p=null;break t}I=29,h=Error(i(130,o===null?"null":typeof o,"")),p=null}return l=ts(I,h,l,_),l.elementType=o,l.type=p,l.lanes=b,l}function fl(o,l,h,p){return o=ts(7,o,p,l),o.lanes=h,o}function tv(o,l,h){return o=ts(6,o,null,l),o.lanes=h,o}function ev(o,l,h){return l=ts(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var kc=[],Pc=0,Gp=null,Wp=0,Es=[],Ts=0,pl=null,Qr=1,Xr="";function ml(o,l){kc[Pc++]=Wp,kc[Pc++]=Gp,Gp=o,Wp=l}function MS(o,l,h){Es[Ts++]=Qr,Es[Ts++]=Xr,Es[Ts++]=pl,pl=o;var p=Qr;o=Xr;var _=32-We(p)-1;p&=~(1<<_),h+=1;var b=32-We(l)+_;if(30<b){var I=_-_%5;b=(p&(1<<I)-1).toString(32),p>>=I,_-=I,Qr=1<<32-We(l)+_|h<<_|p,Xr=b+o}else Qr=1<<b|h<<_|p,Xr=o}function nv(o){o.return!==null&&(ml(o,1),MS(o,1,0))}function iv(o){for(;o===Gp;)Gp=kc[--Pc],kc[Pc]=null,Wp=kc[--Pc],kc[Pc]=null;for(;o===pl;)pl=Es[--Ts],Es[Ts]=null,Xr=Es[--Ts],Es[Ts]=null,Qr=Es[--Ts],Es[Ts]=null}var Ii=null,dn=null,Re=!1,gl=null,mr=!1,sv=Error(i(519));function yl(o){var l=Error(i(418,""));throw Ah(bs(l,o)),sv}function NS(o){var l=o.stateNode,h=o.type,p=o.memoizedProps;switch(l[ne]=o,l[he]=p,h){case"dialog":oe("cancel",l),oe("close",l);break;case"iframe":case"object":case"embed":oe("load",l);break;case"video":case"audio":for(h=0;h<Qh.length;h++)oe(Qh[h],l);break;case"source":oe("error",l);break;case"img":case"image":case"link":oe("error",l),oe("load",l);break;case"details":oe("toggle",l);break;case"input":oe("invalid",l),el(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),_c(l);break;case"select":oe("invalid",l);break;case"textarea":oe("invalid",l),nl(l,p.value,p.defaultValue,p.children),_c(l)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||p.suppressHydrationWarning===!0||YC(l.textContent,h)?(p.popover!=null&&(oe("beforetoggle",l),oe("toggle",l)),p.onScroll!=null&&oe("scroll",l),p.onScrollEnd!=null&&oe("scrollend",l),p.onClick!=null&&(l.onclick=Cm),l=!0):l=!1,l||yl(o)}function kS(o){for(Ii=o.return;Ii;)switch(Ii.tag){case 5:case 13:mr=!1;return;case 27:case 3:mr=!0;return;default:Ii=Ii.return}}function xh(o){if(o!==Ii)return!1;if(!Re)return kS(o),Re=!0,!1;var l=o.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||b0(o.type,o.memoizedProps)),h=!h),h&&dn&&yl(o),kS(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));t:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(l===0){dn=qs(o.nextSibling);break t}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++;o=o.nextSibling}dn=null}}else l===27?(l=dn,sa(o.type)?(o=x0,x0=null,dn=o):dn=l):dn=Ii?qs(o.stateNode.nextSibling):null;return!0}function Sh(){dn=Ii=null,Re=!1}function PS(){var o=gl;return o!==null&&(ji===null?ji=o:ji.push.apply(ji,o),gl=null),o}function Ah(o){gl===null?gl=[o]:gl.push(o)}var rv=J(null),_l=null,Zr=null;function Ho(o,l,h){st(rv,l._currentValue),l._currentValue=h}function Jr(o){o._currentValue=rv.current,ot(rv)}function ov(o,l,h){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===h)break;o=o.return}}function av(o,l,h,p){var _=o.child;for(_!==null&&(_.return=o);_!==null;){var b=_.dependencies;if(b!==null){var I=_.child;b=b.firstContext;t:for(;b!==null;){var P=b;b=_;for(var q=0;q<l.length;q++)if(P.context===l[q]){b.lanes|=h,P=b.alternate,P!==null&&(P.lanes|=h),ov(b.return,h,o),p||(I=null);break t}b=P.next}}else if(_.tag===18){if(I=_.return,I===null)throw Error(i(341));I.lanes|=h,b=I.alternate,b!==null&&(b.lanes|=h),ov(I,h,o),I=null}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===o){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}}function Ch(o,l,h,p){o=null;for(var _=l,b=!1;_!==null;){if(!b){if((_.flags&524288)!==0)b=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var I=_.alternate;if(I===null)throw Error(i(387));if(I=I.memoizedProps,I!==null){var P=_.type;Ji(_.pendingProps.value,I.value)||(o!==null?o.push(P):o=[P])}}else if(_===ue.current){if(I=_.alternate,I===null)throw Error(i(387));I.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(o!==null?o.push(nd):o=[nd])}_=_.return}o!==null&&av(l,o,h,p),l.flags|=262144}function Kp(o){for(o=o.firstContext;o!==null;){if(!Ji(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function vl(o){_l=o,Zr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function ui(o){return OS(_l,o)}function Yp(o,l){return _l===null&&vl(o),OS(o,l)}function OS(o,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},Zr===null){if(o===null)throw Error(i(308));Zr=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Zr=Zr.next=l;return h}var tU=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(h,p){o.push(p)}};this.abort=function(){l.aborted=!0,o.forEach(function(h){return h()})}},eU=e.unstable_scheduleCallback,nU=e.unstable_NormalPriority,Vn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lv(){return{controller:new tU,data:new Map,refCount:0}}function Rh(o){o.refCount--,o.refCount===0&&eU(nU,function(){o.controller.abort()})}var Ih=null,cv=0,Oc=0,Lc=null;function iU(o,l){if(Ih===null){var h=Ih=[];cv=0,Oc=h0(),Lc={status:"pending",value:void 0,then:function(p){h.push(p)}}}return cv++,l.then(LS,LS),l}function LS(){if(--cv===0&&Ih!==null){Lc!==null&&(Lc.status="fulfilled");var o=Ih;Ih=null,Oc=0,Lc=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function sU(o,l){var h=[],p={status:"pending",value:null,reason:null,then:function(_){h.push(_)}};return o.then(function(){p.status="fulfilled",p.value=l;for(var _=0;_<h.length;_++)(0,h[_])(l)},function(_){for(p.status="rejected",p.reason=_,_=0;_<h.length;_++)(0,h[_])(void 0)}),p}var VS=K.S;K.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&iU(o,l),VS!==null&&VS(o,l)};var bl=J(null);function uv(){var o=bl.current;return o!==null?o:Ye.pooledCache}function Qp(o,l){l===null?st(bl,bl.current):st(bl,l.pool)}function jS(){var o=uv();return o===null?null:{parent:Vn._currentValue,pool:o}}var Dh=Error(i(460)),US=Error(i(474)),Xp=Error(i(542)),hv={then:function(){}};function FS(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Zp(){}function BS(o,l,h){switch(h=o[h],h===void 0?o.push(l):h!==l&&(l.then(Zp,Zp),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,HS(o),o;default:if(typeof l.status=="string")l.then(Zp,Zp);else{if(o=Ye,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=l,o.status="pending",o.then(function(p){if(l.status==="pending"){var _=l;_.status="fulfilled",_.value=p}},function(p){if(l.status==="pending"){var _=l;_.status="rejected",_.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,HS(o),o}throw Mh=l,Dh}}var Mh=null;function zS(){if(Mh===null)throw Error(i(459));var o=Mh;return Mh=null,o}function HS(o){if(o===Dh||o===Xp)throw Error(i(483))}var qo=!1;function dv(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fv(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function $o(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Go(o,l,h){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Oe&2)!==0){var _=p.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),p.pending=l,l=qp(o),IS(o,null,h),l}return Hp(o,p,l,h),qp(o)}function Nh(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var p=l.lanes;p&=o.pendingLanes,h|=p,l.lanes=h,yn(o,h)}}function pv(o,l){var h=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var _=null,b=null;if(h=h.firstBaseUpdate,h!==null){do{var I={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};b===null?_=b=I:b=b.next=I,h=h.next}while(h!==null);b===null?_=b=l:b=b.next=l}else _=b=l;h={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:p.shared,callbacks:p.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}var mv=!1;function kh(){if(mv){var o=Lc;if(o!==null)throw o}}function Ph(o,l,h,p){mv=!1;var _=o.updateQueue;qo=!1;var b=_.firstBaseUpdate,I=_.lastBaseUpdate,P=_.shared.pending;if(P!==null){_.shared.pending=null;var q=P,Z=q.next;q.next=null,I===null?b=Z:I.next=Z,I=q;var rt=o.alternate;rt!==null&&(rt=rt.updateQueue,P=rt.lastBaseUpdate,P!==I&&(P===null?rt.firstBaseUpdate=Z:P.next=Z,rt.lastBaseUpdate=q))}if(b!==null){var ct=_.baseState;I=0,rt=Z=q=null,P=b;do{var et=P.lane&-536870913,nt=et!==P.lane;if(nt?(ve&et)===et:(p&et)===et){et!==0&&et===Oc&&(mv=!0),rt!==null&&(rt=rt.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});t:{var Ft=o,Pt=P;et=l;var Be=h;switch(Pt.tag){case 1:if(Ft=Pt.payload,typeof Ft=="function"){ct=Ft.call(Be,ct,et);break t}ct=Ft;break t;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=Pt.payload,et=typeof Ft=="function"?Ft.call(Be,ct,et):Ft,et==null)break t;ct=f({},ct,et);break t;case 2:qo=!0}}et=P.callback,et!==null&&(o.flags|=64,nt&&(o.flags|=8192),nt=_.callbacks,nt===null?_.callbacks=[et]:nt.push(et))}else nt={lane:et,tag:P.tag,payload:P.payload,callback:P.callback,next:null},rt===null?(Z=rt=nt,q=ct):rt=rt.next=nt,I|=et;if(P=P.next,P===null){if(P=_.shared.pending,P===null)break;nt=P,P=nt.next,nt.next=null,_.lastBaseUpdate=nt,_.shared.pending=null}}while(!0);rt===null&&(q=ct),_.baseState=q,_.firstBaseUpdate=Z,_.lastBaseUpdate=rt,b===null&&(_.shared.lanes=0),ta|=I,o.lanes=I,o.memoizedState=ct}}function qS(o,l){if(typeof o!="function")throw Error(i(191,o));o.call(l)}function $S(o,l){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)qS(h[o],l)}var Vc=J(null),Jp=J(0);function GS(o,l){o=oo,st(Jp,o),st(Vc,l),oo=o|l.baseLanes}function gv(){st(Jp,oo),st(Vc,Vc.current)}function yv(){oo=Jp.current,ot(Vc),ot(Jp)}var Wo=0,te=null,Ue=null,Cn=null,tm=!1,jc=!1,wl=!1,em=0,Oh=0,Uc=null,rU=0;function vn(){throw Error(i(321))}function _v(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Ji(o[h],l[h]))return!1;return!0}function vv(o,l,h,p,_,b){return Wo=b,te=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,K.H=o===null||o.memoizedState===null?IA:DA,wl=!1,b=h(p,_),wl=!1,jc&&(b=KS(l,h,p,_)),WS(o),b}function WS(o){K.H=am;var l=Ue!==null&&Ue.next!==null;if(Wo=0,Cn=Ue=te=null,tm=!1,Oh=0,Uc=null,l)throw Error(i(300));o===null||qn||(o=o.dependencies,o!==null&&Kp(o)&&(qn=!0))}function KS(o,l,h,p){te=o;var _=0;do{if(jc&&(Uc=null),Oh=0,jc=!1,25<=_)throw Error(i(301));if(_+=1,Cn=Ue=null,o.updateQueue!=null){var b=o.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}K.H=dU,b=l(h,p)}while(jc);return b}function oU(){var o=K.H,l=o.useState()[0];return l=typeof l.then=="function"?Lh(l):l,o=o.useState()[0],(Ue!==null?Ue.memoizedState:null)!==o&&(te.flags|=1024),l}function bv(){var o=em!==0;return em=0,o}function wv(o,l,h){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~h}function Ev(o){if(tm){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}tm=!1}Wo=0,Cn=Ue=te=null,jc=!1,Oh=em=0,Uc=null}function Li(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?te.memoizedState=Cn=o:Cn=Cn.next=o,Cn}function Rn(){if(Ue===null){var o=te.alternate;o=o!==null?o.memoizedState:null}else o=Ue.next;var l=Cn===null?te.memoizedState:Cn.next;if(l!==null)Cn=l,Ue=o;else{if(o===null)throw te.alternate===null?Error(i(467)):Error(i(310));Ue=o,o={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Cn===null?te.memoizedState=Cn=o:Cn=Cn.next=o}return Cn}function Tv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lh(o){var l=Oh;return Oh+=1,Uc===null&&(Uc=[]),o=BS(Uc,o,l),l=te,(Cn===null?l.memoizedState:Cn.next)===null&&(l=l.alternate,K.H=l===null||l.memoizedState===null?IA:DA),o}function nm(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Lh(o);if(o.$$typeof===M)return ui(o)}throw Error(i(438,String(o)))}function xv(o){var l=null,h=te.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var p=te.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(_){return _.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=Tv(),te.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(o),p=0;p<o;p++)h[p]=L;return l.index++,h}function to(o,l){return typeof l=="function"?l(o):l}function im(o){var l=Rn();return Sv(l,Ue,o)}function Sv(o,l,h){var p=o.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=h;var _=o.baseQueue,b=p.pending;if(b!==null){if(_!==null){var I=_.next;_.next=b.next,b.next=I}l.baseQueue=_=b,p.pending=null}if(b=o.baseState,_===null)o.memoizedState=b;else{l=_.next;var P=I=null,q=null,Z=l,rt=!1;do{var ct=Z.lane&-536870913;if(ct!==Z.lane?(ve&ct)===ct:(Wo&ct)===ct){var et=Z.revertLane;if(et===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ct===Oc&&(rt=!0);else if((Wo&et)===et){Z=Z.next,et===Oc&&(rt=!0);continue}else ct={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(P=q=ct,I=b):q=q.next=ct,te.lanes|=et,ta|=et;ct=Z.action,wl&&h(b,ct),b=Z.hasEagerState?Z.eagerState:h(b,ct)}else et={lane:ct,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(P=q=et,I=b):q=q.next=et,te.lanes|=ct,ta|=ct;Z=Z.next}while(Z!==null&&Z!==l);if(q===null?I=b:q.next=P,!Ji(b,o.memoizedState)&&(qn=!0,rt&&(h=Lc,h!==null)))throw h;o.memoizedState=b,o.baseState=I,o.baseQueue=q,p.lastRenderedState=b}return _===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function Av(o){var l=Rn(),h=l.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var p=h.dispatch,_=h.pending,b=l.memoizedState;if(_!==null){h.pending=null;var I=_=_.next;do b=o(b,I.action),I=I.next;while(I!==_);Ji(b,l.memoizedState)||(qn=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),h.lastRenderedState=b}return[b,p]}function YS(o,l,h){var p=te,_=Rn(),b=Re;if(b){if(h===void 0)throw Error(i(407));h=h()}else h=l();var I=!Ji((Ue||_).memoizedState,h);I&&(_.memoizedState=h,qn=!0),_=_.queue;var P=ZS.bind(null,p,_,o);if(Vh(2048,8,P,[o]),_.getSnapshot!==l||I||Cn!==null&&Cn.memoizedState.tag&1){if(p.flags|=2048,Fc(9,sm(),XS.bind(null,p,_,h,l),null),Ye===null)throw Error(i(349));b||(Wo&124)!==0||QS(p,l,h)}return h}function QS(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=te.updateQueue,l===null?(l=Tv(),te.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function XS(o,l,h,p){l.value=h,l.getSnapshot=p,JS(l)&&tA(o)}function ZS(o,l,h){return h(function(){JS(l)&&tA(o)})}function JS(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Ji(o,h)}catch{return!0}}function tA(o){var l=Mc(o,2);l!==null&&rs(l,o,2)}function Cv(o){var l=Li();if(typeof o=="function"){var h=o;if(o=h(),wl){hn(!0);try{h()}finally{hn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:o},l}function eA(o,l,h,p){return o.baseState=h,Sv(o,Ue,typeof p=="function"?p:to)}function aU(o,l,h,p,_){if(om(o))throw Error(i(485));if(o=l.action,o!==null){var b={payload:_,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){b.listeners.push(I)}};K.T!==null?h(!0):b.isTransition=!1,p(b),h=l.pending,h===null?(b.next=l.pending=b,nA(l,b)):(b.next=h.next,l.pending=h.next=b)}}function nA(o,l){var h=l.action,p=l.payload,_=o.state;if(l.isTransition){var b=K.T,I={};K.T=I;try{var P=h(_,p),q=K.S;q!==null&&q(I,P),iA(o,l,P)}catch(Z){Rv(o,l,Z)}finally{K.T=b}}else try{b=h(_,p),iA(o,l,b)}catch(Z){Rv(o,l,Z)}}function iA(o,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){sA(o,l,p)},function(p){return Rv(o,l,p)}):sA(o,l,h)}function sA(o,l,h){l.status="fulfilled",l.value=h,rA(l),o.state=h,l=o.pending,l!==null&&(h=l.next,h===l?o.pending=null:(h=h.next,l.next=h,nA(o,h)))}function Rv(o,l,h){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=h,rA(l),l=l.next;while(l!==p)}o.action=null}function rA(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function oA(o,l){return l}function aA(o,l){if(Re){var h=Ye.formState;if(h!==null){t:{var p=te;if(Re){if(dn){e:{for(var _=dn,b=mr;_.nodeType!==8;){if(!b){_=null;break e}if(_=qs(_.nextSibling),_===null){_=null;break e}}b=_.data,_=b==="F!"||b==="F"?_:null}if(_){dn=qs(_.nextSibling),p=_.data==="F!";break t}}yl(p)}p=!1}p&&(l=h[0])}}return h=Li(),h.memoizedState=h.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oA,lastRenderedState:l},h.queue=p,h=AA.bind(null,te,p),p.dispatch=h,p=Cv(!1),b=kv.bind(null,te,!1,p.queue),p=Li(),_={state:l,dispatch:null,action:o,pending:null},p.queue=_,h=aU.bind(null,te,_,b,h),_.dispatch=h,p.memoizedState=o,[l,h,!1]}function lA(o){var l=Rn();return cA(l,Ue,o)}function cA(o,l,h){if(l=Sv(o,l,oA)[0],o=im(to)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=Lh(l)}catch(I){throw I===Dh?Xp:I}else p=l;l=Rn();var _=l.queue,b=_.dispatch;return h!==l.memoizedState&&(te.flags|=2048,Fc(9,sm(),lU.bind(null,_,h),null)),[p,b,o]}function lU(o,l){o.action=l}function uA(o){var l=Rn(),h=Ue;if(h!==null)return cA(l,h,o);Rn(),l=l.memoizedState,h=Rn();var p=h.queue.dispatch;return h.memoizedState=o,[l,p,!1]}function Fc(o,l,h,p){return o={tag:o,create:h,deps:p,inst:l,next:null},l=te.updateQueue,l===null&&(l=Tv(),te.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=o.next=o:(p=h.next,h.next=o,o.next=p,l.lastEffect=o),o}function sm(){return{destroy:void 0,resource:void 0}}function hA(){return Rn().memoizedState}function rm(o,l,h,p){var _=Li();p=p===void 0?null:p,te.flags|=o,_.memoizedState=Fc(1|l,sm(),h,p)}function Vh(o,l,h,p){var _=Rn();p=p===void 0?null:p;var b=_.memoizedState.inst;Ue!==null&&p!==null&&_v(p,Ue.memoizedState.deps)?_.memoizedState=Fc(l,b,h,p):(te.flags|=o,_.memoizedState=Fc(1|l,b,h,p))}function dA(o,l){rm(8390656,8,o,l)}function fA(o,l){Vh(2048,8,o,l)}function pA(o,l){return Vh(4,2,o,l)}function mA(o,l){return Vh(4,4,o,l)}function gA(o,l){if(typeof l=="function"){o=o();var h=l(o);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function yA(o,l,h){h=h!=null?h.concat([o]):null,Vh(4,4,gA.bind(null,l,o),h)}function Iv(){}function _A(o,l){var h=Rn();l=l===void 0?null:l;var p=h.memoizedState;return l!==null&&_v(l,p[1])?p[0]:(h.memoizedState=[o,l],o)}function vA(o,l){var h=Rn();l=l===void 0?null:l;var p=h.memoizedState;if(l!==null&&_v(l,p[1]))return p[0];if(p=o(),wl){hn(!0);try{o()}finally{hn(!1)}}return h.memoizedState=[p,l],p}function Dv(o,l,h){return h===void 0||(Wo&1073741824)!==0?o.memoizedState=l:(o.memoizedState=h,o=EC(),te.lanes|=o,ta|=o,h)}function bA(o,l,h,p){return Ji(h,l)?h:Vc.current!==null?(o=Dv(o,h,p),Ji(o,l)||(qn=!0),o):(Wo&42)===0?(qn=!0,o.memoizedState=h):(o=EC(),te.lanes|=o,ta|=o,l)}function wA(o,l,h,p,_){var b=tt.p;tt.p=b!==0&&8>b?b:8;var I=K.T,P={};K.T=P,kv(o,!1,l,h);try{var q=_(),Z=K.S;if(Z!==null&&Z(P,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var rt=sU(q,p);jh(o,l,rt,ss(o))}else jh(o,l,p,ss(o))}catch(ct){jh(o,l,{then:function(){},status:"rejected",reason:ct},ss())}finally{tt.p=b,K.T=I}}function cU(){}function Mv(o,l,h,p){if(o.tag!==5)throw Error(i(476));var _=EA(o).queue;wA(o,_,l,dt,h===null?cU:function(){return TA(o),h(p)})}function EA(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:dt},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:h},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function TA(o){var l=EA(o).next.queue;jh(o,l,{},ss())}function Nv(){return ui(nd)}function xA(){return Rn().memoizedState}function SA(){return Rn().memoizedState}function uU(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var h=ss();o=$o(h);var p=Go(l,o,h);p!==null&&(rs(p,l,h),Nh(p,l,h)),l={cache:lv()},o.payload=l;return}l=l.return}}function hU(o,l,h){var p=ss();h={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},om(o)?CA(l,h):(h=Z_(o,l,h,p),h!==null&&(rs(h,o,p),RA(h,l,p)))}function AA(o,l,h){var p=ss();jh(o,l,h,p)}function jh(o,l,h,p){var _={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(om(o))CA(l,_);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var I=l.lastRenderedState,P=b(I,h);if(_.hasEagerState=!0,_.eagerState=P,Ji(P,I))return Hp(o,l,_,0),Ye===null&&zp(),!1}catch{}finally{}if(h=Z_(o,l,_,p),h!==null)return rs(h,o,p),RA(h,l,p),!0}return!1}function kv(o,l,h,p){if(p={lane:2,revertLane:h0(),action:p,hasEagerState:!1,eagerState:null,next:null},om(o)){if(l)throw Error(i(479))}else l=Z_(o,h,p,2),l!==null&&rs(l,o,2)}function om(o){var l=o.alternate;return o===te||l!==null&&l===te}function CA(o,l){jc=tm=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function RA(o,l,h){if((h&4194048)!==0){var p=l.lanes;p&=o.pendingLanes,h|=p,l.lanes=h,yn(o,h)}}var am={readContext:ui,use:nm,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn},IA={readContext:ui,use:nm,useCallback:function(o,l){return Li().memoizedState=[o,l===void 0?null:l],o},useContext:ui,useEffect:dA,useImperativeHandle:function(o,l,h){h=h!=null?h.concat([o]):null,rm(4194308,4,gA.bind(null,l,o),h)},useLayoutEffect:function(o,l){return rm(4194308,4,o,l)},useInsertionEffect:function(o,l){rm(4,2,o,l)},useMemo:function(o,l){var h=Li();l=l===void 0?null:l;var p=o();if(wl){hn(!0);try{o()}finally{hn(!1)}}return h.memoizedState=[p,l],p},useReducer:function(o,l,h){var p=Li();if(h!==void 0){var _=h(l);if(wl){hn(!0);try{h(l)}finally{hn(!1)}}}else _=l;return p.memoizedState=p.baseState=_,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:_},p.queue=o,o=o.dispatch=hU.bind(null,te,o),[p.memoizedState,o]},useRef:function(o){var l=Li();return o={current:o},l.memoizedState=o},useState:function(o){o=Cv(o);var l=o.queue,h=AA.bind(null,te,l);return l.dispatch=h,[o.memoizedState,h]},useDebugValue:Iv,useDeferredValue:function(o,l){var h=Li();return Dv(h,o,l)},useTransition:function(){var o=Cv(!1);return o=wA.bind(null,te,o.queue,!0,!1),Li().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,h){var p=te,_=Li();if(Re){if(h===void 0)throw Error(i(407));h=h()}else{if(h=l(),Ye===null)throw Error(i(349));(ve&124)!==0||QS(p,l,h)}_.memoizedState=h;var b={value:h,getSnapshot:l};return _.queue=b,dA(ZS.bind(null,p,b,o),[o]),p.flags|=2048,Fc(9,sm(),XS.bind(null,p,b,h,l),null),h},useId:function(){var o=Li(),l=Ye.identifierPrefix;if(Re){var h=Xr,p=Qr;h=(p&~(1<<32-We(p)-1)).toString(32)+h,l=""+l+"R"+h,h=em++,0<h&&(l+="H"+h.toString(32)),l+=""}else h=rU++,l=""+l+"r"+h.toString(32)+"";return o.memoizedState=l},useHostTransitionStatus:Nv,useFormState:aA,useActionState:aA,useOptimistic:function(o){var l=Li();l.memoizedState=l.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=kv.bind(null,te,!0,h),h.dispatch=l,[o,l]},useMemoCache:xv,useCacheRefresh:function(){return Li().memoizedState=uU.bind(null,te)}},DA={readContext:ui,use:nm,useCallback:_A,useContext:ui,useEffect:fA,useImperativeHandle:yA,useInsertionEffect:pA,useLayoutEffect:mA,useMemo:vA,useReducer:im,useRef:hA,useState:function(){return im(to)},useDebugValue:Iv,useDeferredValue:function(o,l){var h=Rn();return bA(h,Ue.memoizedState,o,l)},useTransition:function(){var o=im(to)[0],l=Rn().memoizedState;return[typeof o=="boolean"?o:Lh(o),l]},useSyncExternalStore:YS,useId:xA,useHostTransitionStatus:Nv,useFormState:lA,useActionState:lA,useOptimistic:function(o,l){var h=Rn();return eA(h,Ue,o,l)},useMemoCache:xv,useCacheRefresh:SA},dU={readContext:ui,use:nm,useCallback:_A,useContext:ui,useEffect:fA,useImperativeHandle:yA,useInsertionEffect:pA,useLayoutEffect:mA,useMemo:vA,useReducer:Av,useRef:hA,useState:function(){return Av(to)},useDebugValue:Iv,useDeferredValue:function(o,l){var h=Rn();return Ue===null?Dv(h,o,l):bA(h,Ue.memoizedState,o,l)},useTransition:function(){var o=Av(to)[0],l=Rn().memoizedState;return[typeof o=="boolean"?o:Lh(o),l]},useSyncExternalStore:YS,useId:xA,useHostTransitionStatus:Nv,useFormState:uA,useActionState:uA,useOptimistic:function(o,l){var h=Rn();return Ue!==null?eA(h,Ue,o,l):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:xv,useCacheRefresh:SA},Bc=null,Uh=0;function lm(o){var l=Uh;return Uh+=1,Bc===null&&(Bc=[]),BS(Bc,o,l)}function Fh(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function cm(o,l){throw l.$$typeof===m?Error(i(525)):(o=Object.prototype.toString.call(l),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function MA(o){var l=o._init;return l(o._payload)}function NA(o){function l(W,G){if(o){var X=W.deletions;X===null?(W.deletions=[G],W.flags|=16):X.push(G)}}function h(W,G){if(!o)return null;for(;G!==null;)l(W,G),G=G.sibling;return null}function p(W){for(var G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function _(W,G){return W=Yr(W,G),W.index=0,W.sibling=null,W}function b(W,G,X){return W.index=X,o?(X=W.alternate,X!==null?(X=X.index,X<G?(W.flags|=67108866,G):X):(W.flags|=67108866,G)):(W.flags|=1048576,G)}function I(W){return o&&W.alternate===null&&(W.flags|=67108866),W}function P(W,G,X,at){return G===null||G.tag!==6?(G=tv(X,W.mode,at),G.return=W,G):(G=_(G,X),G.return=W,G)}function q(W,G,X,at){var Tt=X.type;return Tt===w?rt(W,G,X.props.children,at,X.key):G!==null&&(G.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===D&&MA(Tt)===G.type)?(G=_(G,X.props),Fh(G,X),G.return=W,G):(G=$p(X.type,X.key,X.props,null,W.mode,at),Fh(G,X),G.return=W,G)}function Z(W,G,X,at){return G===null||G.tag!==4||G.stateNode.containerInfo!==X.containerInfo||G.stateNode.implementation!==X.implementation?(G=ev(X,W.mode,at),G.return=W,G):(G=_(G,X.children||[]),G.return=W,G)}function rt(W,G,X,at,Tt){return G===null||G.tag!==7?(G=fl(X,W.mode,at,Tt),G.return=W,G):(G=_(G,X),G.return=W,G)}function ct(W,G,X){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=tv(""+G,W.mode,X),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return X=$p(G.type,G.key,G.props,null,W.mode,X),Fh(X,G),X.return=W,X;case v:return G=ev(G,W.mode,X),G.return=W,G;case D:var at=G._init;return G=at(G._payload),ct(W,G,X)}if(ft(G)||H(G))return G=fl(G,W.mode,X,null),G.return=W,G;if(typeof G.then=="function")return ct(W,lm(G),X);if(G.$$typeof===M)return ct(W,Yp(W,G),X);cm(W,G)}return null}function et(W,G,X,at){var Tt=G!==null?G.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Tt!==null?null:P(W,G,""+X,at);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case y:return X.key===Tt?q(W,G,X,at):null;case v:return X.key===Tt?Z(W,G,X,at):null;case D:return Tt=X._init,X=Tt(X._payload),et(W,G,X,at)}if(ft(X)||H(X))return Tt!==null?null:rt(W,G,X,at,null);if(typeof X.then=="function")return et(W,G,lm(X),at);if(X.$$typeof===M)return et(W,G,Yp(W,X),at);cm(W,X)}return null}function nt(W,G,X,at,Tt){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return W=W.get(X)||null,P(G,W,""+at,Tt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case y:return W=W.get(at.key===null?X:at.key)||null,q(G,W,at,Tt);case v:return W=W.get(at.key===null?X:at.key)||null,Z(G,W,at,Tt);case D:var ie=at._init;return at=ie(at._payload),nt(W,G,X,at,Tt)}if(ft(at)||H(at))return W=W.get(X)||null,rt(G,W,at,Tt,null);if(typeof at.then=="function")return nt(W,G,X,lm(at),Tt);if(at.$$typeof===M)return nt(W,G,X,Yp(G,at),Tt);cm(G,at)}return null}function Ft(W,G,X,at){for(var Tt=null,ie=null,It=G,Ot=G=0,Gn=null;It!==null&&Ot<X.length;Ot++){It.index>Ot?(Gn=It,It=null):Gn=It.sibling;var xe=et(W,It,X[Ot],at);if(xe===null){It===null&&(It=Gn);break}o&&It&&xe.alternate===null&&l(W,It),G=b(xe,G,Ot),ie===null?Tt=xe:ie.sibling=xe,ie=xe,It=Gn}if(Ot===X.length)return h(W,It),Re&&ml(W,Ot),Tt;if(It===null){for(;Ot<X.length;Ot++)It=ct(W,X[Ot],at),It!==null&&(G=b(It,G,Ot),ie===null?Tt=It:ie.sibling=It,ie=It);return Re&&ml(W,Ot),Tt}for(It=p(It);Ot<X.length;Ot++)Gn=nt(It,W,Ot,X[Ot],at),Gn!==null&&(o&&Gn.alternate!==null&&It.delete(Gn.key===null?Ot:Gn.key),G=b(Gn,G,Ot),ie===null?Tt=Gn:ie.sibling=Gn,ie=Gn);return o&&It.forEach(function(ca){return l(W,ca)}),Re&&ml(W,Ot),Tt}function Pt(W,G,X,at){if(X==null)throw Error(i(151));for(var Tt=null,ie=null,It=G,Ot=G=0,Gn=null,xe=X.next();It!==null&&!xe.done;Ot++,xe=X.next()){It.index>Ot?(Gn=It,It=null):Gn=It.sibling;var ca=et(W,It,xe.value,at);if(ca===null){It===null&&(It=Gn);break}o&&It&&ca.alternate===null&&l(W,It),G=b(ca,G,Ot),ie===null?Tt=ca:ie.sibling=ca,ie=ca,It=Gn}if(xe.done)return h(W,It),Re&&ml(W,Ot),Tt;if(It===null){for(;!xe.done;Ot++,xe=X.next())xe=ct(W,xe.value,at),xe!==null&&(G=b(xe,G,Ot),ie===null?Tt=xe:ie.sibling=xe,ie=xe);return Re&&ml(W,Ot),Tt}for(It=p(It);!xe.done;Ot++,xe=X.next())xe=nt(It,W,Ot,xe.value,at),xe!==null&&(o&&xe.alternate!==null&&It.delete(xe.key===null?Ot:xe.key),G=b(xe,G,Ot),ie===null?Tt=xe:ie.sibling=xe,ie=xe);return o&&It.forEach(function(f3){return l(W,f3)}),Re&&ml(W,Ot),Tt}function Be(W,G,X,at){if(typeof X=="object"&&X!==null&&X.type===w&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case y:t:{for(var Tt=X.key;G!==null;){if(G.key===Tt){if(Tt=X.type,Tt===w){if(G.tag===7){h(W,G.sibling),at=_(G,X.props.children),at.return=W,W=at;break t}}else if(G.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===D&&MA(Tt)===G.type){h(W,G.sibling),at=_(G,X.props),Fh(at,X),at.return=W,W=at;break t}h(W,G);break}else l(W,G);G=G.sibling}X.type===w?(at=fl(X.props.children,W.mode,at,X.key),at.return=W,W=at):(at=$p(X.type,X.key,X.props,null,W.mode,at),Fh(at,X),at.return=W,W=at)}return I(W);case v:t:{for(Tt=X.key;G!==null;){if(G.key===Tt)if(G.tag===4&&G.stateNode.containerInfo===X.containerInfo&&G.stateNode.implementation===X.implementation){h(W,G.sibling),at=_(G,X.children||[]),at.return=W,W=at;break t}else{h(W,G);break}else l(W,G);G=G.sibling}at=ev(X,W.mode,at),at.return=W,W=at}return I(W);case D:return Tt=X._init,X=Tt(X._payload),Be(W,G,X,at)}if(ft(X))return Ft(W,G,X,at);if(H(X)){if(Tt=H(X),typeof Tt!="function")throw Error(i(150));return X=Tt.call(X),Pt(W,G,X,at)}if(typeof X.then=="function")return Be(W,G,lm(X),at);if(X.$$typeof===M)return Be(W,G,Yp(W,X),at);cm(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,G!==null&&G.tag===6?(h(W,G.sibling),at=_(G,X),at.return=W,W=at):(h(W,G),at=tv(X,W.mode,at),at.return=W,W=at),I(W)):h(W,G)}return function(W,G,X,at){try{Uh=0;var Tt=Be(W,G,X,at);return Bc=null,Tt}catch(It){if(It===Dh||It===Xp)throw It;var ie=ts(29,It,null,W.mode);return ie.lanes=at,ie.return=W,ie}finally{}}}var zc=NA(!0),kA=NA(!1),xs=J(null),gr=null;function Ko(o){var l=o.alternate;st(jn,jn.current&1),st(xs,o),gr===null&&(l===null||Vc.current!==null||l.memoizedState!==null)&&(gr=o)}function PA(o){if(o.tag===22){if(st(jn,jn.current),st(xs,o),gr===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(gr=o)}}else Yo()}function Yo(){st(jn,jn.current),st(xs,xs.current)}function eo(o){ot(xs),gr===o&&(gr=null),ot(jn)}var jn=J(0);function um(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||T0(h)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Pv(o,l,h,p){l=o.memoizedState,h=h(p,l),h=h==null?l:f({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Ov={enqueueSetState:function(o,l,h){o=o._reactInternals;var p=ss(),_=$o(p);_.payload=l,h!=null&&(_.callback=h),l=Go(o,_,p),l!==null&&(rs(l,o,p),Nh(l,o,p))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var p=ss(),_=$o(p);_.tag=1,_.payload=l,h!=null&&(_.callback=h),l=Go(o,_,p),l!==null&&(rs(l,o,p),Nh(l,o,p))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=ss(),p=$o(h);p.tag=2,l!=null&&(p.callback=l),l=Go(o,p,h),l!==null&&(rs(l,o,h),Nh(l,o,h))}};function OA(o,l,h,p,_,b,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,b,I):l.prototype&&l.prototype.isPureReactComponent?!Eh(h,p)||!Eh(_,b):!0}function LA(o,l,h,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,p),l.state!==o&&Ov.enqueueReplaceState(l,l.state,null)}function El(o,l){var h=l;if("ref"in l){h={};for(var p in l)p!=="ref"&&(h[p]=l[p])}if(o=o.defaultProps){h===l&&(h=f({},h));for(var _ in o)h[_]===void 0&&(h[_]=o[_])}return h}var hm=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function VA(o){hm(o)}function jA(o){console.error(o)}function UA(o){hm(o)}function dm(o,l){try{var h=o.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function FA(o,l,h){try{var p=o.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Lv(o,l,h){return h=$o(h),h.tag=3,h.payload={element:null},h.callback=function(){dm(o,l)},h}function BA(o){return o=$o(o),o.tag=3,o}function zA(o,l,h,p){var _=h.type.getDerivedStateFromError;if(typeof _=="function"){var b=p.value;o.payload=function(){return _(b)},o.callback=function(){FA(l,h,p)}}var I=h.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(o.callback=function(){FA(l,h,p),typeof _!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var P=p.stack;this.componentDidCatch(p.value,{componentStack:P!==null?P:""})})}function fU(o,l,h,p,_){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=h.alternate,l!==null&&Ch(l,h,_,!0),h=xs.current,h!==null){switch(h.tag){case 13:return gr===null?o0():h.alternate===null&&fn===0&&(fn=3),h.flags&=-257,h.flags|=65536,h.lanes=_,p===hv?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([p]):l.add(p),l0(o,p,_)),!1;case 22:return h.flags|=65536,p===hv?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([p]):h.add(p)),l0(o,p,_)),!1}throw Error(i(435,h.tag))}return l0(o,p,_),o0(),!1}if(Re)return l=xs.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=_,p!==sv&&(o=Error(i(422),{cause:p}),Ah(bs(o,h)))):(p!==sv&&(l=Error(i(423),{cause:p}),Ah(bs(l,h))),o=o.current.alternate,o.flags|=65536,_&=-_,o.lanes|=_,p=bs(p,h),_=Lv(o.stateNode,p,_),pv(o,_),fn!==4&&(fn=2)),!1;var b=Error(i(520),{cause:p});if(b=bs(b,h),Wh===null?Wh=[b]:Wh.push(b),fn!==4&&(fn=2),l===null)return!0;p=bs(p,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,o=_&-_,h.lanes|=o,o=Lv(h.stateNode,p,o),pv(h,o),!1;case 1:if(l=h.type,b=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ea===null||!ea.has(b))))return h.flags|=65536,_&=-_,h.lanes|=_,_=BA(_),zA(_,o,h,p),pv(h,_),!1}h=h.return}while(h!==null);return!1}var HA=Error(i(461)),qn=!1;function ii(o,l,h,p){l.child=o===null?kA(l,null,h,p):zc(l,o.child,h,p)}function qA(o,l,h,p,_){h=h.render;var b=l.ref;if("ref"in p){var I={};for(var P in p)P!=="ref"&&(I[P]=p[P])}else I=p;return vl(l),p=vv(o,l,h,I,b,_),P=bv(),o!==null&&!qn?(wv(o,l,_),no(o,l,_)):(Re&&P&&nv(l),l.flags|=1,ii(o,l,p,_),l.child)}function $A(o,l,h,p,_){if(o===null){var b=h.type;return typeof b=="function"&&!J_(b)&&b.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=b,GA(o,l,b,p,_)):(o=$p(h.type,null,p,l,l.mode,_),o.ref=l.ref,o.return=l,l.child=o)}if(b=o.child,!qv(o,_)){var I=b.memoizedProps;if(h=h.compare,h=h!==null?h:Eh,h(I,p)&&o.ref===l.ref)return no(o,l,_)}return l.flags|=1,o=Yr(b,p),o.ref=l.ref,o.return=l,l.child=o}function GA(o,l,h,p,_){if(o!==null){var b=o.memoizedProps;if(Eh(b,p)&&o.ref===l.ref)if(qn=!1,l.pendingProps=p=b,qv(o,_))(o.flags&131072)!==0&&(qn=!0);else return l.lanes=o.lanes,no(o,l,_)}return Vv(o,l,h,p,_)}function WA(o,l,h){var p=l.pendingProps,_=p.children,b=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((l.flags&128)!==0){if(p=b!==null?b.baseLanes|h:h,o!==null){for(_=l.child=o.child,b=0;_!==null;)b=b|_.lanes|_.childLanes,_=_.sibling;l.childLanes=b&~p}else l.childLanes=0,l.child=null;return KA(o,l,p,h)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Qp(l,b!==null?b.cachePool:null),b!==null?GS(l,b):gv(),PA(l);else return l.lanes=l.childLanes=536870912,KA(o,l,b!==null?b.baseLanes|h:h,h)}else b!==null?(Qp(l,b.cachePool),GS(l,b),Yo(),l.memoizedState=null):(o!==null&&Qp(l,null),gv(),Yo());return ii(o,l,_,h),l.child}function KA(o,l,h,p){var _=uv();return _=_===null?null:{parent:Vn._currentValue,pool:_},l.memoizedState={baseLanes:h,cachePool:_},o!==null&&Qp(l,null),gv(),PA(l),o!==null&&Ch(o,l,p,!0),null}function fm(o,l){var h=l.ref;if(h===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(o===null||o.ref!==h)&&(l.flags|=4194816)}}function Vv(o,l,h,p,_){return vl(l),h=vv(o,l,h,p,void 0,_),p=bv(),o!==null&&!qn?(wv(o,l,_),no(o,l,_)):(Re&&p&&nv(l),l.flags|=1,ii(o,l,h,_),l.child)}function YA(o,l,h,p,_,b){return vl(l),l.updateQueue=null,h=KS(l,p,h,_),WS(o),p=bv(),o!==null&&!qn?(wv(o,l,b),no(o,l,b)):(Re&&p&&nv(l),l.flags|=1,ii(o,l,h,b),l.child)}function QA(o,l,h,p,_){if(vl(l),l.stateNode===null){var b=Nc,I=h.contextType;typeof I=="object"&&I!==null&&(b=ui(I)),b=new h(p,b),l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Ov,l.stateNode=b,b._reactInternals=l,b=l.stateNode,b.props=p,b.state=l.memoizedState,b.refs={},dv(l),I=h.contextType,b.context=typeof I=="object"&&I!==null?ui(I):Nc,b.state=l.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(Pv(l,h,I,p),b.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(I=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),I!==b.state&&Ov.enqueueReplaceState(b,b.state,null),Ph(l,p,b,_),kh(),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(o===null){b=l.stateNode;var P=l.memoizedProps,q=El(h,P);b.props=q;var Z=b.context,rt=h.contextType;I=Nc,typeof rt=="object"&&rt!==null&&(I=ui(rt));var ct=h.getDerivedStateFromProps;rt=typeof ct=="function"||typeof b.getSnapshotBeforeUpdate=="function",P=l.pendingProps!==P,rt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P||Z!==I)&&LA(l,b,p,I),qo=!1;var et=l.memoizedState;b.state=et,Ph(l,p,b,_),kh(),Z=l.memoizedState,P||et!==Z||qo?(typeof ct=="function"&&(Pv(l,h,ct,p),Z=l.memoizedState),(q=qo||OA(l,h,q,p,et,Z,I))?(rt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=Z),b.props=p,b.state=Z,b.context=I,p=q):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{b=l.stateNode,fv(o,l),I=l.memoizedProps,rt=El(h,I),b.props=rt,ct=l.pendingProps,et=b.context,Z=h.contextType,q=Nc,typeof Z=="object"&&Z!==null&&(q=ui(Z)),P=h.getDerivedStateFromProps,(Z=typeof P=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(I!==ct||et!==q)&&LA(l,b,p,q),qo=!1,et=l.memoizedState,b.state=et,Ph(l,p,b,_),kh();var nt=l.memoizedState;I!==ct||et!==nt||qo||o!==null&&o.dependencies!==null&&Kp(o.dependencies)?(typeof P=="function"&&(Pv(l,h,P,p),nt=l.memoizedState),(rt=qo||OA(l,h,rt,p,et,nt,q)||o!==null&&o.dependencies!==null&&Kp(o.dependencies))?(Z||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(p,nt,q),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(p,nt,q)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||I===o.memoizedProps&&et===o.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&et===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=nt),b.props=p,b.state=nt,b.context=q,p=rt):(typeof b.componentDidUpdate!="function"||I===o.memoizedProps&&et===o.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&et===o.memoizedState||(l.flags|=1024),p=!1)}return b=p,fm(o,l),p=(l.flags&128)!==0,b||p?(b=l.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:b.render(),l.flags|=1,o!==null&&p?(l.child=zc(l,o.child,null,_),l.child=zc(l,null,h,_)):ii(o,l,h,_),l.memoizedState=b.state,o=l.child):o=no(o,l,_),o}function XA(o,l,h,p){return Sh(),l.flags|=256,ii(o,l,h,p),l.child}var jv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uv(o){return{baseLanes:o,cachePool:jS()}}function Fv(o,l,h){return o=o!==null?o.childLanes&~h:0,l&&(o|=Ss),o}function ZA(o,l,h){var p=l.pendingProps,_=!1,b=(l.flags&128)!==0,I;if((I=b)||(I=o!==null&&o.memoizedState===null?!1:(jn.current&2)!==0),I&&(_=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,o===null){if(Re){if(_?Ko(l):Yo(),Re){var P=dn,q;if(q=P){t:{for(q=P,P=mr;q.nodeType!==8;){if(!P){P=null;break t}if(q=qs(q.nextSibling),q===null){P=null;break t}}P=q}P!==null?(l.memoizedState={dehydrated:P,treeContext:pl!==null?{id:Qr,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},q=ts(18,null,null,0),q.stateNode=P,q.return=l,l.child=q,Ii=l,dn=null,q=!0):q=!1}q||yl(l)}if(P=l.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return T0(P)?l.lanes=32:l.lanes=536870912,null;eo(l)}return P=p.children,p=p.fallback,_?(Yo(),_=l.mode,P=pm({mode:"hidden",children:P},_),p=fl(p,_,h,null),P.return=l,p.return=l,P.sibling=p,l.child=P,_=l.child,_.memoizedState=Uv(h),_.childLanes=Fv(o,I,h),l.memoizedState=jv,p):(Ko(l),Bv(l,P))}if(q=o.memoizedState,q!==null&&(P=q.dehydrated,P!==null)){if(b)l.flags&256?(Ko(l),l.flags&=-257,l=zv(o,l,h)):l.memoizedState!==null?(Yo(),l.child=o.child,l.flags|=128,l=null):(Yo(),_=p.fallback,P=l.mode,p=pm({mode:"visible",children:p.children},P),_=fl(_,P,h,null),_.flags|=2,p.return=l,_.return=l,p.sibling=_,l.child=p,zc(l,o.child,null,h),p=l.child,p.memoizedState=Uv(h),p.childLanes=Fv(o,I,h),l.memoizedState=jv,l=_);else if(Ko(l),T0(P)){if(I=P.nextSibling&&P.nextSibling.dataset,I)var Z=I.dgst;I=Z,p=Error(i(419)),p.stack="",p.digest=I,Ah({value:p,source:null,stack:null}),l=zv(o,l,h)}else if(qn||Ch(o,l,h,!1),I=(h&o.childLanes)!==0,qn||I){if(I=Ye,I!==null&&(p=h&-h,p=(p&42)!==0?1:Zt(p),p=(p&(I.suspendedLanes|h))!==0?0:p,p!==0&&p!==q.retryLane))throw q.retryLane=p,Mc(o,p),rs(I,o,p),HA;P.data==="$?"||o0(),l=zv(o,l,h)}else P.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=q.treeContext,dn=qs(P.nextSibling),Ii=l,Re=!0,gl=null,mr=!1,o!==null&&(Es[Ts++]=Qr,Es[Ts++]=Xr,Es[Ts++]=pl,Qr=o.id,Xr=o.overflow,pl=l),l=Bv(l,p.children),l.flags|=4096);return l}return _?(Yo(),_=p.fallback,P=l.mode,q=o.child,Z=q.sibling,p=Yr(q,{mode:"hidden",children:p.children}),p.subtreeFlags=q.subtreeFlags&65011712,Z!==null?_=Yr(Z,_):(_=fl(_,P,h,null),_.flags|=2),_.return=l,p.return=l,p.sibling=_,l.child=p,p=_,_=l.child,P=o.child.memoizedState,P===null?P=Uv(h):(q=P.cachePool,q!==null?(Z=Vn._currentValue,q=q.parent!==Z?{parent:Z,pool:Z}:q):q=jS(),P={baseLanes:P.baseLanes|h,cachePool:q}),_.memoizedState=P,_.childLanes=Fv(o,I,h),l.memoizedState=jv,p):(Ko(l),h=o.child,o=h.sibling,h=Yr(h,{mode:"visible",children:p.children}),h.return=l,h.sibling=null,o!==null&&(I=l.deletions,I===null?(l.deletions=[o],l.flags|=16):I.push(o)),l.child=h,l.memoizedState=null,h)}function Bv(o,l){return l=pm({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function pm(o,l){return o=ts(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function zv(o,l,h){return zc(l,o.child,null,h),o=Bv(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function JA(o,l,h){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),ov(o.return,l,h)}function Hv(o,l,h,p,_){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:_}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=h,b.tailMode=_)}function tC(o,l,h){var p=l.pendingProps,_=p.revealOrder,b=p.tail;if(ii(o,l,p.children,h),p=jn.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&JA(o,h,l);else if(o.tag===19)JA(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break t;for(;o.sibling===null;){if(o.return===null||o.return===l)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(st(jn,p),_){case"forwards":for(h=l.child,_=null;h!==null;)o=h.alternate,o!==null&&um(o)===null&&(_=h),h=h.sibling;h=_,h===null?(_=l.child,l.child=null):(_=h.sibling,h.sibling=null),Hv(l,!1,_,h,b);break;case"backwards":for(h=null,_=l.child,l.child=null;_!==null;){if(o=_.alternate,o!==null&&um(o)===null){l.child=_;break}o=_.sibling,_.sibling=h,h=_,_=o}Hv(l,!0,h,null,b);break;case"together":Hv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function no(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),ta|=l.lanes,(h&l.childLanes)===0)if(o!==null){if(Ch(o,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(i(153));if(l.child!==null){for(o=l.child,h=Yr(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=Yr(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function qv(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&Kp(o)))}function pU(o,l,h){switch(l.tag){case 3:vt(l,l.stateNode.containerInfo),Ho(l,Vn,o.memoizedState.cache),Sh();break;case 27:case 5:Mt(l);break;case 4:vt(l,l.stateNode.containerInfo);break;case 10:Ho(l,l.type,l.memoizedProps.value);break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Ko(l),l.flags|=128,null):(h&l.child.childLanes)!==0?ZA(o,l,h):(Ko(l),o=no(o,l,h),o!==null?o.sibling:null);Ko(l);break;case 19:var _=(o.flags&128)!==0;if(p=(h&l.childLanes)!==0,p||(Ch(o,l,h,!1),p=(h&l.childLanes)!==0),_){if(p)return tC(o,l,h);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),st(jn,jn.current),p)break;return null;case 22:case 23:return l.lanes=0,WA(o,l,h);case 24:Ho(l,Vn,o.memoizedState.cache)}return no(o,l,h)}function eC(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps)qn=!0;else{if(!qv(o,h)&&(l.flags&128)===0)return qn=!1,pU(o,l,h);qn=(o.flags&131072)!==0}else qn=!1,Re&&(l.flags&1048576)!==0&&MS(l,Wp,l.index);switch(l.lanes=0,l.tag){case 16:t:{o=l.pendingProps;var p=l.elementType,_=p._init;if(p=_(p._payload),l.type=p,typeof p=="function")J_(p)?(o=El(p,o),l.tag=1,l=QA(null,l,p,o,h)):(l.tag=0,l=Vv(null,l,p,o,h));else{if(p!=null){if(_=p.$$typeof,_===z){l.tag=11,l=qA(null,l,p,o,h);break t}else if(_===O){l.tag=14,l=$A(null,l,p,o,h);break t}}throw l=_t(p)||p,Error(i(306,l,""))}}return l;case 0:return Vv(o,l,l.type,l.pendingProps,h);case 1:return p=l.type,_=El(p,l.pendingProps),QA(o,l,p,_,h);case 3:t:{if(vt(l,l.stateNode.containerInfo),o===null)throw Error(i(387));p=l.pendingProps;var b=l.memoizedState;_=b.element,fv(o,l),Ph(l,p,null,h);var I=l.memoizedState;if(p=I.cache,Ho(l,Vn,p),p!==b.cache&&av(l,[Vn],h,!0),kh(),p=I.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=XA(o,l,p,h);break t}else if(p!==_){_=bs(Error(i(424)),l),Ah(_),l=XA(o,l,p,h);break t}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(dn=qs(o.firstChild),Ii=l,Re=!0,gl=null,mr=!0,h=kA(l,null,p,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Sh(),p===_){l=no(o,l,h);break t}ii(o,l,p,h)}l=l.child}return l;case 26:return fm(o,l),o===null?(h=rR(l.type,null,l.pendingProps,null))?l.memoizedState=h:Re||(h=l.type,o=l.pendingProps,p=Rm(gt.current).createElement(h),p[ne]=l,p[he]=o,ri(p,h,o),_n(p),l.stateNode=p):l.memoizedState=rR(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Mt(l),o===null&&Re&&(p=l.stateNode=nR(l.type,l.pendingProps,gt.current),Ii=l,mr=!0,_=dn,sa(l.type)?(x0=_,dn=qs(p.firstChild)):dn=_),ii(o,l,l.pendingProps.children,h),fm(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&Re&&((_=p=dn)&&(p=zU(p,l.type,l.pendingProps,mr),p!==null?(l.stateNode=p,Ii=l,dn=qs(p.firstChild),mr=!1,_=!0):_=!1),_||yl(l)),Mt(l),_=l.type,b=l.pendingProps,I=o!==null?o.memoizedProps:null,p=b.children,b0(_,b)?p=null:I!==null&&b0(_,I)&&(l.flags|=32),l.memoizedState!==null&&(_=vv(o,l,oU,null,null,h),nd._currentValue=_),fm(o,l),ii(o,l,p,h),l.child;case 6:return o===null&&Re&&((o=h=dn)&&(h=HU(h,l.pendingProps,mr),h!==null?(l.stateNode=h,Ii=l,dn=null,o=!0):o=!1),o||yl(l)),null;case 13:return ZA(o,l,h);case 4:return vt(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=zc(l,null,p,h):ii(o,l,p,h),l.child;case 11:return qA(o,l,l.type,l.pendingProps,h);case 7:return ii(o,l,l.pendingProps,h),l.child;case 8:return ii(o,l,l.pendingProps.children,h),l.child;case 12:return ii(o,l,l.pendingProps.children,h),l.child;case 10:return p=l.pendingProps,Ho(l,l.type,p.value),ii(o,l,p.children,h),l.child;case 9:return _=l.type._context,p=l.pendingProps.children,vl(l),_=ui(_),p=p(_),l.flags|=1,ii(o,l,p,h),l.child;case 14:return $A(o,l,l.type,l.pendingProps,h);case 15:return GA(o,l,l.type,l.pendingProps,h);case 19:return tC(o,l,h);case 31:return p=l.pendingProps,h=l.mode,p={mode:p.mode,children:p.children},o===null?(h=pm(p,h),h.ref=l.ref,l.child=h,h.return=l,l=h):(h=Yr(o.child,p),h.ref=l.ref,l.child=h,h.return=l,l=h),l;case 22:return WA(o,l,h);case 24:return vl(l),p=ui(Vn),o===null?(_=uv(),_===null&&(_=Ye,b=lv(),_.pooledCache=b,b.refCount++,b!==null&&(_.pooledCacheLanes|=h),_=b),l.memoizedState={parent:p,cache:_},dv(l),Ho(l,Vn,_)):((o.lanes&h)!==0&&(fv(o,l),Ph(l,null,null,h),kh()),_=o.memoizedState,b=l.memoizedState,_.parent!==p?(_={parent:p,cache:p},l.memoizedState=_,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=_),Ho(l,Vn,p)):(p=b.cache,Ho(l,Vn,p),p!==_.cache&&av(l,[Vn],h,!0))),ii(o,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function io(o){o.flags|=4}function nC(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!uR(l)){if(l=xs.current,l!==null&&((ve&4194048)===ve?gr!==null:(ve&62914560)!==ve&&(ve&536870912)===0||l!==gr))throw Mh=hv,US;o.flags|=8192}}function mm(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Kt():536870912,o.lanes|=l,Gc|=l)}function Bh(o,l){if(!Re)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function cn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,p=0;if(l)for(var _=o.child;_!==null;)h|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)h|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=p,o.childLanes=h,l}function mU(o,l,h){var p=l.pendingProps;switch(iv(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(l),null;case 1:return cn(l),null;case 3:return h=l.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Jr(Vn),Vt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(xh(l)?io(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,PS())),cn(l),null;case 26:return h=l.memoizedState,o===null?(io(l),h!==null?(cn(l),nC(l,h)):(cn(l),l.flags&=-16777217)):h?h!==o.memoizedState?(io(l),cn(l),nC(l,h)):(cn(l),l.flags&=-16777217):(o.memoizedProps!==p&&io(l),cn(l),l.flags&=-16777217),null;case 27:zt(l),h=gt.current;var _=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==p&&io(l);else{if(!p){if(l.stateNode===null)throw Error(i(166));return cn(l),null}o=pt.current,xh(l)?NS(l):(o=nR(_,p,h),l.stateNode=o,io(l))}return cn(l),null;case 5:if(zt(l),h=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==p&&io(l);else{if(!p){if(l.stateNode===null)throw Error(i(166));return cn(l),null}if(o=pt.current,xh(l))NS(l);else{switch(_=Rm(gt.current),o){case 1:o=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=_.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?_.createElement(h,{is:p.is}):_.createElement(h)}}o[ne]=l,o[he]=p;t:for(_=l.child;_!==null;){if(_.tag===5||_.tag===6)o.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===l)break t;for(;_.sibling===null;){if(_.return===null||_.return===l)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}l.stateNode=o;t:switch(ri(o,h,p),h){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&io(l)}}return cn(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==p&&io(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(i(166));if(o=gt.current,xh(l)){if(o=l.stateNode,h=l.memoizedProps,p=null,_=Ii,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}o[ne]=l,o=!!(o.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||YC(o.nodeValue,h)),o||yl(l)}else o=Rm(o).createTextNode(p),o[ne]=l,l.stateNode=o}return cn(l),null;case 13:if(p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_=xh(l),p!==null&&p.dehydrated!==null){if(o===null){if(!_)throw Error(i(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[ne]=l}else Sh(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;cn(l),_=!1}else _=PS(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=_),_=!0;if(!_)return l.flags&256?(eo(l),l):(eo(l),null)}if(eo(l),(l.flags&128)!==0)return l.lanes=h,l;if(h=p!==null,o=o!==null&&o.memoizedState!==null,h){p=l.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool);var b=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==_&&(p.flags|=2048)}return h!==o&&h&&(l.child.flags|=8192),mm(l,l.updateQueue),cn(l),null;case 4:return Vt(),o===null&&m0(l.stateNode.containerInfo),cn(l),null;case 10:return Jr(l.type),cn(l),null;case 19:if(ot(jn),_=l.memoizedState,_===null)return cn(l),null;if(p=(l.flags&128)!==0,b=_.rendering,b===null)if(p)Bh(_,!1);else{if(fn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(b=um(o),b!==null){for(l.flags|=128,Bh(_,!1),o=b.updateQueue,l.updateQueue=o,mm(l,o),l.subtreeFlags=0,o=h,h=l.child;h!==null;)DS(h,o),h=h.sibling;return st(jn,jn.current&1|2),l.child}o=o.sibling}_.tail!==null&&Se()>_m&&(l.flags|=128,p=!0,Bh(_,!1),l.lanes=4194304)}else{if(!p)if(o=um(b),o!==null){if(l.flags|=128,p=!0,o=o.updateQueue,l.updateQueue=o,mm(l,o),Bh(_,!0),_.tail===null&&_.tailMode==="hidden"&&!b.alternate&&!Re)return cn(l),null}else 2*Se()-_.renderingStartTime>_m&&h!==536870912&&(l.flags|=128,p=!0,Bh(_,!1),l.lanes=4194304);_.isBackwards?(b.sibling=l.child,l.child=b):(o=_.last,o!==null?o.sibling=b:l.child=b,_.last=b)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=Se(),l.sibling=null,o=jn.current,st(jn,p?o&1|2:o&1),l):(cn(l),null);case 22:case 23:return eo(l),yv(),p=l.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(h&536870912)!==0&&(l.flags&128)===0&&(cn(l),l.subtreeFlags&6&&(l.flags|=8192)):cn(l),h=l.updateQueue,h!==null&&mm(l,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048),o!==null&&ot(bl),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Jr(Vn),cn(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function gU(o,l){switch(iv(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Jr(Vn),Vt(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return zt(l),null;case 13:if(eo(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Sh()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ot(jn),null;case 4:return Vt(),null;case 10:return Jr(l.type),null;case 22:case 23:return eo(l),yv(),o!==null&&ot(bl),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Jr(Vn),null;case 25:return null;default:return null}}function iC(o,l){switch(iv(l),l.tag){case 3:Jr(Vn),Vt();break;case 26:case 27:case 5:zt(l);break;case 4:Vt();break;case 13:eo(l);break;case 19:ot(jn);break;case 10:Jr(l.type);break;case 22:case 23:eo(l),yv(),o!==null&&ot(bl);break;case 24:Jr(Vn)}}function zh(o,l){try{var h=l.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var _=p.next;h=_;do{if((h.tag&o)===o){p=void 0;var b=h.create,I=h.inst;p=b(),I.destroy=p}h=h.next}while(h!==_)}}catch(P){$e(l,l.return,P)}}function Qo(o,l,h){try{var p=l.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var b=_.next;p=b;do{if((p.tag&o)===o){var I=p.inst,P=I.destroy;if(P!==void 0){I.destroy=void 0,_=l;var q=h,Z=P;try{Z()}catch(rt){$e(_,q,rt)}}}p=p.next}while(p!==b)}}catch(rt){$e(l,l.return,rt)}}function sC(o){var l=o.updateQueue;if(l!==null){var h=o.stateNode;try{$S(l,h)}catch(p){$e(o,o.return,p)}}}function rC(o,l,h){h.props=El(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(p){$e(o,l,p)}}function Hh(o,l){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof h=="function"?o.refCleanup=h(p):h.current=p}}catch(_){$e(o,l,_)}}function yr(o,l){var h=o.ref,p=o.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(_){$e(o,l,_)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(_){$e(o,l,_)}else h.current=null}function oC(o){var l=o.type,h=o.memoizedProps,p=o.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break t;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(_){$e(o,o.return,_)}}function $v(o,l,h){try{var p=o.stateNode;VU(p,o.type,h,l),p[he]=l}catch(_){$e(o,o.return,_)}}function aC(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&sa(o.type)||o.tag===4}function Gv(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||aC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&sa(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Wv(o,l,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(o),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Cm));else if(p!==4&&(p===27&&sa(o.type)&&(h=o.stateNode,l=null),o=o.child,o!==null))for(Wv(o,l,h),o=o.sibling;o!==null;)Wv(o,l,h),o=o.sibling}function gm(o,l,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(p!==4&&(p===27&&sa(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(gm(o,l,h),o=o.sibling;o!==null;)gm(o,l,h),o=o.sibling}function lC(o){var l=o.stateNode,h=o.memoizedProps;try{for(var p=o.type,_=l.attributes;_.length;)l.removeAttributeNode(_[0]);ri(l,p,h),l[ne]=o,l[he]=h}catch(b){$e(o,o.return,b)}}var so=!1,bn=!1,Kv=!1,cC=typeof WeakSet=="function"?WeakSet:Set,$n=null;function yU(o,l){if(o=o.containerInfo,_0=Pm,o=bS(o),G_(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else t:{h=(h=o.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var _=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{h.nodeType,b.nodeType}catch{h=null;break t}var I=0,P=-1,q=-1,Z=0,rt=0,ct=o,et=null;e:for(;;){for(var nt;ct!==h||_!==0&&ct.nodeType!==3||(P=I+_),ct!==b||p!==0&&ct.nodeType!==3||(q=I+p),ct.nodeType===3&&(I+=ct.nodeValue.length),(nt=ct.firstChild)!==null;)et=ct,ct=nt;for(;;){if(ct===o)break e;if(et===h&&++Z===_&&(P=I),et===b&&++rt===p&&(q=I),(nt=ct.nextSibling)!==null)break;ct=et,et=ct.parentNode}ct=nt}h=P===-1||q===-1?null:{start:P,end:q}}else h=null}h=h||{start:0,end:0}}else h=null;for(v0={focusedElem:o,selectionRange:h},Pm=!1,$n=l;$n!==null;)if(l=$n,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,$n=o;else for(;$n!==null;){switch(l=$n,b=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&b!==null){o=void 0,h=l,_=b.memoizedProps,b=b.memoizedState,p=h.stateNode;try{var Ft=El(h.type,_,h.elementType===h.type);o=p.getSnapshotBeforeUpdate(Ft,b),p.__reactInternalSnapshotBeforeUpdate=o}catch(Pt){$e(h,h.return,Pt)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,h=o.nodeType,h===9)E0(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":E0(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=l.sibling,o!==null){o.return=l.return,$n=o;break}$n=l.return}}function uC(o,l,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:Xo(o,h),p&4&&zh(5,h);break;case 1:if(Xo(o,h),p&4)if(o=h.stateNode,l===null)try{o.componentDidMount()}catch(I){$e(h,h.return,I)}else{var _=El(h.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(_,l,o.__reactInternalSnapshotBeforeUpdate)}catch(I){$e(h,h.return,I)}}p&64&&sC(h),p&512&&Hh(h,h.return);break;case 3:if(Xo(o,h),p&64&&(o=h.updateQueue,o!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{$S(o,l)}catch(I){$e(h,h.return,I)}}break;case 27:l===null&&p&4&&lC(h);case 26:case 5:Xo(o,h),l===null&&p&4&&oC(h),p&512&&Hh(h,h.return);break;case 12:Xo(o,h);break;case 13:Xo(o,h),p&4&&fC(o,h),p&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=AU.bind(null,h),qU(o,h))));break;case 22:if(p=h.memoizedState!==null||so,!p){l=l!==null&&l.memoizedState!==null||bn,_=so;var b=bn;so=p,(bn=l)&&!b?Zo(o,h,(h.subtreeFlags&8772)!==0):Xo(o,h),so=_,bn=b}break;case 30:break;default:Xo(o,h)}}function hC(o){var l=o.alternate;l!==null&&(o.alternate=null,hC(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Uo(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var on=null,Vi=!1;function ro(o,l,h){for(h=h.child;h!==null;)dC(o,l,h),h=h.sibling}function dC(o,l,h){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Ge,h)}catch{}switch(h.tag){case 26:bn||yr(h,l),ro(o,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:bn||yr(h,l);var p=on,_=Vi;sa(h.type)&&(on=h.stateNode,Vi=!1),ro(o,l,h),Zh(h.stateNode),on=p,Vi=_;break;case 5:bn||yr(h,l);case 6:if(p=on,_=Vi,on=null,ro(o,l,h),on=p,Vi=_,on!==null)if(Vi)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(h.stateNode)}catch(b){$e(h,l,b)}else try{on.removeChild(h.stateNode)}catch(b){$e(h,l,b)}break;case 18:on!==null&&(Vi?(o=on,tR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),od(o)):tR(on,h.stateNode));break;case 4:p=on,_=Vi,on=h.stateNode.containerInfo,Vi=!0,ro(o,l,h),on=p,Vi=_;break;case 0:case 11:case 14:case 15:bn||Qo(2,h,l),bn||Qo(4,h,l),ro(o,l,h);break;case 1:bn||(yr(h,l),p=h.stateNode,typeof p.componentWillUnmount=="function"&&rC(h,l,p)),ro(o,l,h);break;case 21:ro(o,l,h);break;case 22:bn=(p=bn)||h.memoizedState!==null,ro(o,l,h),bn=p;break;default:ro(o,l,h)}}function fC(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{od(o)}catch(h){$e(l,l.return,h)}}function _U(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new cC),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new cC),l;default:throw Error(i(435,o.tag))}}function Yv(o,l){var h=_U(o);l.forEach(function(p){var _=CU.bind(null,o,p);h.has(p)||(h.add(p),p.then(_,_))})}function es(o,l){var h=l.deletions;if(h!==null)for(var p=0;p<h.length;p++){var _=h[p],b=o,I=l,P=I;t:for(;P!==null;){switch(P.tag){case 27:if(sa(P.type)){on=P.stateNode,Vi=!1;break t}break;case 5:on=P.stateNode,Vi=!1;break t;case 3:case 4:on=P.stateNode.containerInfo,Vi=!0;break t}P=P.return}if(on===null)throw Error(i(160));dC(b,I,_),on=null,Vi=!1,b=_.alternate,b!==null&&(b.return=null),_.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)pC(l,o),l=l.sibling}var Hs=null;function pC(o,l){var h=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:es(l,o),ns(o),p&4&&(Qo(3,o,o.return),zh(3,o),Qo(5,o,o.return));break;case 1:es(l,o),ns(o),p&512&&(bn||h===null||yr(h,h.return)),p&64&&so&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var _=Hs;if(es(l,o),ns(o),p&512&&(bn||h===null||yr(h,h.return)),p&4){var b=h!==null?h.memoizedState:null;if(p=o.memoizedState,h===null)if(p===null)if(o.stateNode===null){t:{p=o.type,h=o.memoizedProps,_=_.ownerDocument||_;e:switch(p){case"title":b=_.getElementsByTagName("title")[0],(!b||b[Xi]||b[ne]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=_.createElement(p),_.head.insertBefore(b,_.querySelector("head > title"))),ri(b,p,h),b[ne]=o,_n(b),p=b;break t;case"link":var I=lR("link","href",_).get(p+(h.href||""));if(I){for(var P=0;P<I.length;P++)if(b=I[P],b.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&b.getAttribute("rel")===(h.rel==null?null:h.rel)&&b.getAttribute("title")===(h.title==null?null:h.title)&&b.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){I.splice(P,1);break e}}b=_.createElement(p),ri(b,p,h),_.head.appendChild(b);break;case"meta":if(I=lR("meta","content",_).get(p+(h.content||""))){for(P=0;P<I.length;P++)if(b=I[P],b.getAttribute("content")===(h.content==null?null:""+h.content)&&b.getAttribute("name")===(h.name==null?null:h.name)&&b.getAttribute("property")===(h.property==null?null:h.property)&&b.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&b.getAttribute("charset")===(h.charSet==null?null:h.charSet)){I.splice(P,1);break e}}b=_.createElement(p),ri(b,p,h),_.head.appendChild(b);break;default:throw Error(i(468,p))}b[ne]=o,_n(b),p=b}o.stateNode=p}else cR(_,o.type,o.stateNode);else o.stateNode=aR(_,p,o.memoizedProps);else b!==p?(b===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):b.count--,p===null?cR(_,o.type,o.stateNode):aR(_,p,o.memoizedProps)):p===null&&o.stateNode!==null&&$v(o,o.memoizedProps,h.memoizedProps)}break;case 27:es(l,o),ns(o),p&512&&(bn||h===null||yr(h,h.return)),h!==null&&p&4&&$v(o,o.memoizedProps,h.memoizedProps);break;case 5:if(es(l,o),ns(o),p&512&&(bn||h===null||yr(h,h.return)),o.flags&32){_=o.stateNode;try{gs(_,"")}catch(nt){$e(o,o.return,nt)}}p&4&&o.stateNode!=null&&(_=o.memoizedProps,$v(o,_,h!==null?h.memoizedProps:_)),p&1024&&(Kv=!0);break;case 6:if(es(l,o),ns(o),p&4){if(o.stateNode===null)throw Error(i(162));p=o.memoizedProps,h=o.stateNode;try{h.nodeValue=p}catch(nt){$e(o,o.return,nt)}}break;case 3:if(Mm=null,_=Hs,Hs=Im(l.containerInfo),es(l,o),Hs=_,ns(o),p&4&&h!==null&&h.memoizedState.isDehydrated)try{od(l.containerInfo)}catch(nt){$e(o,o.return,nt)}Kv&&(Kv=!1,mC(o));break;case 4:p=Hs,Hs=Im(o.stateNode.containerInfo),es(l,o),ns(o),Hs=p;break;case 12:es(l,o),ns(o);break;case 13:es(l,o),ns(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(e0=Se()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Yv(o,p)));break;case 22:_=o.memoizedState!==null;var q=h!==null&&h.memoizedState!==null,Z=so,rt=bn;if(so=Z||_,bn=rt||q,es(l,o),bn=rt,so=Z,ns(o),p&8192)t:for(l=o.stateNode,l._visibility=_?l._visibility&-2:l._visibility|1,_&&(h===null||q||so||bn||Tl(o)),h=null,l=o;;){if(l.tag===5||l.tag===26){if(h===null){q=h=l;try{if(b=q.stateNode,_)I=b.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{P=q.stateNode;var ct=q.memoizedProps.style,et=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;P.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(nt){$e(q,q.return,nt)}}}else if(l.tag===6){if(h===null){q=l;try{q.stateNode.nodeValue=_?"":q.memoizedProps}catch(nt){$e(q,q.return,nt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break t;for(;l.sibling===null;){if(l.return===null||l.return===o)break t;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=o.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,Yv(o,h))));break;case 19:es(l,o),ns(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Yv(o,p)));break;case 30:break;case 21:break;default:es(l,o),ns(o)}}function ns(o){var l=o.flags;if(l&2){try{for(var h,p=o.return;p!==null;){if(aC(p)){h=p;break}p=p.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var _=h.stateNode,b=Gv(o);gm(o,b,_);break;case 5:var I=h.stateNode;h.flags&32&&(gs(I,""),h.flags&=-33);var P=Gv(o);gm(o,P,I);break;case 3:case 4:var q=h.stateNode.containerInfo,Z=Gv(o);Wv(o,Z,q);break;default:throw Error(i(161))}}catch(rt){$e(o,o.return,rt)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function mC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;mC(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Xo(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)uC(o,l.alternate,l),l=l.sibling}function Tl(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Qo(4,l,l.return),Tl(l);break;case 1:yr(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&rC(l,l.return,h),Tl(l);break;case 27:Zh(l.stateNode);case 26:case 5:yr(l,l.return),Tl(l);break;case 22:l.memoizedState===null&&Tl(l);break;case 30:Tl(l);break;default:Tl(l)}o=o.sibling}}function Zo(o,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,_=o,b=l,I=b.flags;switch(b.tag){case 0:case 11:case 15:Zo(_,b,h),zh(4,b);break;case 1:if(Zo(_,b,h),p=b,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Z){$e(p,p.return,Z)}if(p=b,_=p.updateQueue,_!==null){var P=p.stateNode;try{var q=_.shared.hiddenCallbacks;if(q!==null)for(_.shared.hiddenCallbacks=null,_=0;_<q.length;_++)qS(q[_],P)}catch(Z){$e(p,p.return,Z)}}h&&I&64&&sC(b),Hh(b,b.return);break;case 27:lC(b);case 26:case 5:Zo(_,b,h),h&&p===null&&I&4&&oC(b),Hh(b,b.return);break;case 12:Zo(_,b,h);break;case 13:Zo(_,b,h),h&&I&4&&fC(_,b);break;case 22:b.memoizedState===null&&Zo(_,b,h),Hh(b,b.return);break;case 30:break;default:Zo(_,b,h)}l=l.sibling}}function Qv(o,l){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Rh(h))}function Xv(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Rh(o))}function _r(o,l,h,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)gC(o,l,h,p),l=l.sibling}function gC(o,l,h,p){var _=l.flags;switch(l.tag){case 0:case 11:case 15:_r(o,l,h,p),_&2048&&zh(9,l);break;case 1:_r(o,l,h,p);break;case 3:_r(o,l,h,p),_&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Rh(o)));break;case 12:if(_&2048){_r(o,l,h,p),o=l.stateNode;try{var b=l.memoizedProps,I=b.id,P=b.onPostCommit;typeof P=="function"&&P(I,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(q){$e(l,l.return,q)}}else _r(o,l,h,p);break;case 13:_r(o,l,h,p);break;case 23:break;case 22:b=l.stateNode,I=l.alternate,l.memoizedState!==null?b._visibility&2?_r(o,l,h,p):qh(o,l):b._visibility&2?_r(o,l,h,p):(b._visibility|=2,Hc(o,l,h,p,(l.subtreeFlags&10256)!==0)),_&2048&&Qv(I,l);break;case 24:_r(o,l,h,p),_&2048&&Xv(l.alternate,l);break;default:_r(o,l,h,p)}}function Hc(o,l,h,p,_){for(_=_&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var b=o,I=l,P=h,q=p,Z=I.flags;switch(I.tag){case 0:case 11:case 15:Hc(b,I,P,q,_),zh(8,I);break;case 23:break;case 22:var rt=I.stateNode;I.memoizedState!==null?rt._visibility&2?Hc(b,I,P,q,_):qh(b,I):(rt._visibility|=2,Hc(b,I,P,q,_)),_&&Z&2048&&Qv(I.alternate,I);break;case 24:Hc(b,I,P,q,_),_&&Z&2048&&Xv(I.alternate,I);break;default:Hc(b,I,P,q,_)}l=l.sibling}}function qh(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=o,p=l,_=p.flags;switch(p.tag){case 22:qh(h,p),_&2048&&Qv(p.alternate,p);break;case 24:qh(h,p),_&2048&&Xv(p.alternate,p);break;default:qh(h,p)}l=l.sibling}}var $h=8192;function qc(o){if(o.subtreeFlags&$h)for(o=o.child;o!==null;)yC(o),o=o.sibling}function yC(o){switch(o.tag){case 26:qc(o),o.flags&$h&&o.memoizedState!==null&&i3(Hs,o.memoizedState,o.memoizedProps);break;case 5:qc(o);break;case 3:case 4:var l=Hs;Hs=Im(o.stateNode.containerInfo),qc(o),Hs=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=$h,$h=16777216,qc(o),$h=l):qc(o));break;default:qc(o)}}function _C(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Gh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];$n=p,bC(p,o)}_C(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)vC(o),o=o.sibling}function vC(o){switch(o.tag){case 0:case 11:case 15:Gh(o),o.flags&2048&&Qo(9,o,o.return);break;case 3:Gh(o);break;case 12:Gh(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,ym(o)):Gh(o);break;default:Gh(o)}}function ym(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];$n=p,bC(p,o)}_C(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Qo(8,l,l.return),ym(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,ym(l));break;default:ym(l)}o=o.sibling}}function bC(o,l){for(;$n!==null;){var h=$n;switch(h.tag){case 0:case 11:case 15:Qo(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Rh(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,$n=p;else t:for(h=o;$n!==null;){p=$n;var _=p.sibling,b=p.return;if(hC(p),p===h){$n=null;break t}if(_!==null){_.return=b,$n=_;break t}$n=b}}}var vU={getCacheForType:function(o){var l=ui(Vn),h=l.data.get(o);return h===void 0&&(h=o(),l.data.set(o,h)),h}},bU=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Ye=null,re=null,ve=0,Le=0,is=null,Jo=!1,$c=!1,Zv=!1,oo=0,fn=0,ta=0,xl=0,Jv=0,Ss=0,Gc=0,Wh=null,ji=null,t0=!1,e0=0,_m=1/0,vm=null,ea=null,si=0,na=null,Wc=null,Kc=0,n0=0,i0=null,wC=null,Kh=0,s0=null;function ss(){if((Oe&2)!==0&&ve!==0)return ve&-ve;if(K.T!==null){var o=Oc;return o!==0?o:h0()}return se()}function EC(){Ss===0&&(Ss=(ve&536870912)===0||Re?Ae():536870912);var o=xs.current;return o!==null&&(o.flags|=32),Ss}function rs(o,l,h){(o===Ye&&(Le===2||Le===9)||o.cancelPendingCommit!==null)&&(Yc(o,0),ia(o,ve,Ss,!1)),qt(o,h),((Oe&2)===0||o!==Ye)&&(o===Ye&&((Oe&2)===0&&(xl|=h),fn===4&&ia(o,ve,Ss,!1)),vr(o))}function TC(o,l,h){if((Oe&6)!==0)throw Error(i(327));var p=!h&&(l&124)===0&&(l&o.expiredLanes)===0||Ht(o,l),_=p?TU(o,l):a0(o,l,!0),b=p;do{if(_===0){$c&&!p&&ia(o,l,0,!1);break}else{if(h=o.current.alternate,b&&!wU(h)){_=a0(o,l,!1),b=!1;continue}if(_===2){if(b=l,o.errorRecoveryDisabledLanes&b)var I=0;else I=o.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;t:{var P=o;_=Wh;var q=P.current.memoizedState.isDehydrated;if(q&&(Yc(P,I).flags|=256),I=a0(P,I,!1),I!==2){if(Zv&&!q){P.errorRecoveryDisabledLanes|=b,xl|=b,_=4;break t}b=ji,ji=_,b!==null&&(ji===null?ji=b:ji.push.apply(ji,b))}_=I}if(b=!1,_!==2)continue}}if(_===1){Yc(o,0),ia(o,l,0,!0);break}t:{switch(p=o,b=_,b){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:ia(p,l,Ss,!Jo);break t;case 2:ji=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(_=e0+300-Se(),10<_)){if(ia(p,l,Ss,!Jo),kt(p,0,!0)!==0)break t;p.timeoutHandle=ZC(xC.bind(null,p,h,ji,vm,t0,l,Ss,xl,Gc,Jo,b,2,-0,0),_);break t}xC(p,h,ji,vm,t0,l,Ss,xl,Gc,Jo,b,0,-0,0)}}break}while(!0);vr(o)}function xC(o,l,h,p,_,b,I,P,q,Z,rt,ct,et,nt){if(o.timeoutHandle=-1,ct=l.subtreeFlags,(ct&8192||(ct&16785408)===16785408)&&(ed={stylesheets:null,count:0,unsuspend:n3},yC(l),ct=s3(),ct!==null)){o.cancelPendingCommit=ct(MC.bind(null,o,l,b,h,p,_,I,P,q,rt,1,et,nt)),ia(o,b,I,!Z);return}MC(o,l,b,h,p,_,I,P,q)}function wU(o){for(var l=o;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var _=h[p],b=_.getSnapshot;_=_.value;try{if(!Ji(b(),_))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ia(o,l,h,p){l&=~Jv,l&=~xl,o.suspendedLanes|=l,o.pingedLanes&=~l,p&&(o.warmLanes|=l),p=o.expirationTimes;for(var _=l;0<_;){var b=31-We(_),I=1<<b;p[b]=-1,_&=~I}h!==0&&Nt(o,h,l)}function bm(){return(Oe&6)===0?(Yh(0),!1):!0}function r0(){if(re!==null){if(Le===0)var o=re.return;else o=re,Zr=_l=null,Ev(o),Bc=null,Uh=0,o=re;for(;o!==null;)iC(o.alternate,o),o=o.return;re=null}}function Yc(o,l){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,UU(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),r0(),Ye=o,re=h=Yr(o.current,null),ve=l,Le=0,is=null,Jo=!1,$c=Ht(o,l),Zv=!1,Gc=Ss=Jv=xl=ta=fn=0,ji=Wh=null,t0=!1,(l&8)!==0&&(l|=l&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=l;0<p;){var _=31-We(p),b=1<<_;l|=o[_],p&=~b}return oo=l,zp(),h}function SC(o,l){te=null,K.H=am,l===Dh||l===Xp?(l=zS(),Le=3):l===US?(l=zS(),Le=4):Le=l===HA?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,is=l,re===null&&(fn=1,dm(o,bs(l,o.current)))}function AC(){var o=K.H;return K.H=am,o===null?am:o}function CC(){var o=K.A;return K.A=vU,o}function o0(){fn=4,Jo||(ve&4194048)!==ve&&xs.current!==null||($c=!0),(ta&134217727)===0&&(xl&134217727)===0||Ye===null||ia(Ye,ve,Ss,!1)}function a0(o,l,h){var p=Oe;Oe|=2;var _=AC(),b=CC();(Ye!==o||ve!==l)&&(vm=null,Yc(o,l)),l=!1;var I=fn;t:do try{if(Le!==0&&re!==null){var P=re,q=is;switch(Le){case 8:r0(),I=6;break t;case 3:case 2:case 9:case 6:xs.current===null&&(l=!0);var Z=Le;if(Le=0,is=null,Qc(o,P,q,Z),h&&$c){I=0;break t}break;default:Z=Le,Le=0,is=null,Qc(o,P,q,Z)}}EU(),I=fn;break}catch(rt){SC(o,rt)}while(!0);return l&&o.shellSuspendCounter++,Zr=_l=null,Oe=p,K.H=_,K.A=b,re===null&&(Ye=null,ve=0,zp()),I}function EU(){for(;re!==null;)RC(re)}function TU(o,l){var h=Oe;Oe|=2;var p=AC(),_=CC();Ye!==o||ve!==l?(vm=null,_m=Se()+500,Yc(o,l)):$c=Ht(o,l);t:do try{if(Le!==0&&re!==null){l=re;var b=is;e:switch(Le){case 1:Le=0,is=null,Qc(o,l,b,1);break;case 2:case 9:if(FS(b)){Le=0,is=null,IC(l);break}l=function(){Le!==2&&Le!==9||Ye!==o||(Le=7),vr(o)},b.then(l,l);break t;case 3:Le=7;break t;case 4:Le=5;break t;case 7:FS(b)?(Le=0,is=null,IC(l)):(Le=0,is=null,Qc(o,l,b,7));break;case 5:var I=null;switch(re.tag){case 26:I=re.memoizedState;case 5:case 27:var P=re;if(!I||uR(I)){Le=0,is=null;var q=P.sibling;if(q!==null)re=q;else{var Z=P.return;Z!==null?(re=Z,wm(Z)):re=null}break e}}Le=0,is=null,Qc(o,l,b,5);break;case 6:Le=0,is=null,Qc(o,l,b,6);break;case 8:r0(),fn=6;break t;default:throw Error(i(462))}}xU();break}catch(rt){SC(o,rt)}while(!0);return Zr=_l=null,K.H=p,K.A=_,Oe=h,re!==null?0:(Ye=null,ve=0,zp(),fn)}function xU(){for(;re!==null&&!qe();)RC(re)}function RC(o){var l=eC(o.alternate,o,oo);o.memoizedProps=o.pendingProps,l===null?wm(o):re=l}function IC(o){var l=o,h=l.alternate;switch(l.tag){case 15:case 0:l=YA(h,l,l.pendingProps,l.type,void 0,ve);break;case 11:l=YA(h,l,l.pendingProps,l.type.render,l.ref,ve);break;case 5:Ev(l);default:iC(h,l),l=re=DS(l,oo),l=eC(h,l,oo)}o.memoizedProps=o.pendingProps,l===null?wm(o):re=l}function Qc(o,l,h,p){Zr=_l=null,Ev(l),Bc=null,Uh=0;var _=l.return;try{if(fU(o,_,l,h,ve)){fn=1,dm(o,bs(h,o.current)),re=null;return}}catch(b){if(_!==null)throw re=_,b;fn=1,dm(o,bs(h,o.current)),re=null;return}l.flags&32768?(Re||p===1?o=!0:$c||(ve&536870912)!==0?o=!1:(Jo=o=!0,(p===2||p===9||p===3||p===6)&&(p=xs.current,p!==null&&p.tag===13&&(p.flags|=16384))),DC(l,o)):wm(l)}function wm(o){var l=o;do{if((l.flags&32768)!==0){DC(l,Jo);return}o=l.return;var h=mU(l.alternate,l,oo);if(h!==null){re=h;return}if(l=l.sibling,l!==null){re=l;return}re=l=o}while(l!==null);fn===0&&(fn=5)}function DC(o,l){do{var h=gU(o.alternate,o);if(h!==null){h.flags&=32767,re=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(o=o.sibling,o!==null)){re=o;return}re=o=h}while(o!==null);fn=6,re=null}function MC(o,l,h,p,_,b,I,P,q){o.cancelPendingCommit=null;do Em();while(si!==0);if((Oe&6)!==0)throw Error(i(327));if(l!==null){if(l===o.current)throw Error(i(177));if(b=l.lanes|l.childLanes,b|=X_,Ce(o,h,b,I,P,q),o===Ye&&(re=Ye=null,ve=0),Wc=l,na=o,Kc=h,n0=b,i0=_,wC=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,RU(kn,function(){return LC(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=K.T,K.T=null,_=tt.p,tt.p=2,I=Oe,Oe|=4;try{yU(o,l,h)}finally{Oe=I,tt.p=_,K.T=p}}si=1,NC(),kC(),PC()}}function NC(){if(si===1){si=0;var o=na,l=Wc,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=K.T,K.T=null;var p=tt.p;tt.p=2;var _=Oe;Oe|=4;try{pC(l,o);var b=v0,I=bS(o.containerInfo),P=b.focusedElem,q=b.selectionRange;if(I!==P&&P&&P.ownerDocument&&vS(P.ownerDocument.documentElement,P)){if(q!==null&&G_(P)){var Z=q.start,rt=q.end;if(rt===void 0&&(rt=Z),"selectionStart"in P)P.selectionStart=Z,P.selectionEnd=Math.min(rt,P.value.length);else{var ct=P.ownerDocument||document,et=ct&&ct.defaultView||window;if(et.getSelection){var nt=et.getSelection(),Ft=P.textContent.length,Pt=Math.min(q.start,Ft),Be=q.end===void 0?Pt:Math.min(q.end,Ft);!nt.extend&&Pt>Be&&(I=Be,Be=Pt,Pt=I);var W=_S(P,Pt),G=_S(P,Be);if(W&&G&&(nt.rangeCount!==1||nt.anchorNode!==W.node||nt.anchorOffset!==W.offset||nt.focusNode!==G.node||nt.focusOffset!==G.offset)){var X=ct.createRange();X.setStart(W.node,W.offset),nt.removeAllRanges(),Pt>Be?(nt.addRange(X),nt.extend(G.node,G.offset)):(X.setEnd(G.node,G.offset),nt.addRange(X))}}}}for(ct=[],nt=P;nt=nt.parentNode;)nt.nodeType===1&&ct.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ct.length;P++){var at=ct[P];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}Pm=!!_0,v0=_0=null}finally{Oe=_,tt.p=p,K.T=h}}o.current=l,si=2}}function kC(){if(si===2){si=0;var o=na,l=Wc,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=K.T,K.T=null;var p=tt.p;tt.p=2;var _=Oe;Oe|=4;try{uC(o,l.alternate,l)}finally{Oe=_,tt.p=p,K.T=h}}si=3}}function PC(){if(si===4||si===3){si=0,Bn();var o=na,l=Wc,h=Kc,p=wC;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?si=5:(si=0,Wc=na=null,OC(o,o.pendingLanes));var _=o.pendingLanes;if(_===0&&(ea=null),Ut(h),l=l.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Ge,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=K.T,_=tt.p,tt.p=2,K.T=null;try{for(var b=o.onRecoverableError,I=0;I<p.length;I++){var P=p[I];b(P.value,{componentStack:P.stack})}}finally{K.T=l,tt.p=_}}(Kc&3)!==0&&Em(),vr(o),_=o.pendingLanes,(h&4194090)!==0&&(_&42)!==0?o===s0?Kh++:(Kh=0,s0=o):Kh=0,Yh(0)}}function OC(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Rh(l)))}function Em(o){return NC(),kC(),PC(),LC()}function LC(){if(si!==5)return!1;var o=na,l=n0;n0=0;var h=Ut(Kc),p=K.T,_=tt.p;try{tt.p=32>h?32:h,K.T=null,h=i0,i0=null;var b=na,I=Kc;if(si=0,Wc=na=null,Kc=0,(Oe&6)!==0)throw Error(i(331));var P=Oe;if(Oe|=4,vC(b.current),gC(b,b.current,I,h),Oe=P,Yh(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Ge,b)}catch{}return!0}finally{tt.p=_,K.T=p,OC(o,l)}}function VC(o,l,h){l=bs(h,l),l=Lv(o.stateNode,l,2),o=Go(o,l,2),o!==null&&(qt(o,2),vr(o))}function $e(o,l,h){if(o.tag===3)VC(o,o,h);else for(;l!==null;){if(l.tag===3){VC(l,o,h);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ea===null||!ea.has(p))){o=bs(h,o),h=BA(2),p=Go(l,h,2),p!==null&&(zA(h,p,l,o),qt(p,2),vr(p));break}}l=l.return}}function l0(o,l,h){var p=o.pingCache;if(p===null){p=o.pingCache=new bU;var _=new Set;p.set(l,_)}else _=p.get(l),_===void 0&&(_=new Set,p.set(l,_));_.has(h)||(Zv=!0,_.add(h),o=SU.bind(null,o,l,h),l.then(o,o))}function SU(o,l,h){var p=o.pingCache;p!==null&&p.delete(l),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Ye===o&&(ve&h)===h&&(fn===4||fn===3&&(ve&62914560)===ve&&300>Se()-e0?(Oe&2)===0&&Yc(o,0):Jv|=h,Gc===ve&&(Gc=0)),vr(o)}function jC(o,l){l===0&&(l=Kt()),o=Mc(o,l),o!==null&&(qt(o,l),vr(o))}function AU(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),jC(o,h)}function CU(o,l){var h=0;switch(o.tag){case 13:var p=o.stateNode,_=o.memoizedState;_!==null&&(h=_.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(l),jC(o,h)}function RU(o,l){return At(o,l)}var Tm=null,Xc=null,c0=!1,xm=!1,u0=!1,Sl=0;function vr(o){o!==Xc&&o.next===null&&(Xc===null?Tm=Xc=o:Xc=Xc.next=o),xm=!0,c0||(c0=!0,DU())}function Yh(o,l){if(!u0&&xm){u0=!0;do for(var h=!1,p=Tm;p!==null;){if(o!==0){var _=p.pendingLanes;if(_===0)var b=0;else{var I=p.suspendedLanes,P=p.pingedLanes;b=(1<<31-We(42|o)+1)-1,b&=_&~(I&~P),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(h=!0,zC(p,b))}else b=ve,b=kt(p,p===Ye?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(b&3)===0||Ht(p,b)||(h=!0,zC(p,b));p=p.next}while(h);u0=!1}}function IU(){UC()}function UC(){xm=c0=!1;var o=0;Sl!==0&&(jU()&&(o=Sl),Sl=0);for(var l=Se(),h=null,p=Tm;p!==null;){var _=p.next,b=FC(p,l);b===0?(p.next=null,h===null?Tm=_:h.next=_,_===null&&(Xc=h)):(h=p,(o!==0||(b&3)!==0)&&(xm=!0)),p=_}Yh(o)}function FC(o,l){for(var h=o.suspendedLanes,p=o.pingedLanes,_=o.expirationTimes,b=o.pendingLanes&-62914561;0<b;){var I=31-We(b),P=1<<I,q=_[I];q===-1?((P&h)===0||(P&p)!==0)&&(_[I]=ge(P,l)):q<=l&&(o.expiredLanes|=P),b&=~P}if(l=Ye,h=ve,h=kt(o,o===l?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,h===0||o===l&&(Le===2||Le===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&me(p),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Ht(o,h)){if(l=h&-h,l===o.callbackPriority)return l;switch(p!==null&&me(p),Ut(h)){case 2:case 8:h=ln;break;case 32:h=kn;break;case 268435456:h=Yi;break;default:h=kn}return p=BC.bind(null,o),h=At(h,p),o.callbackPriority=l,o.callbackNode=h,l}return p!==null&&p!==null&&me(p),o.callbackPriority=2,o.callbackNode=null,2}function BC(o,l){if(si!==0&&si!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Em()&&o.callbackNode!==h)return null;var p=ve;return p=kt(o,o===Ye?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(TC(o,p,l),FC(o,Se()),o.callbackNode!=null&&o.callbackNode===h?BC.bind(null,o):null)}function zC(o,l){if(Em())return null;TC(o,l,!0)}function DU(){FU(function(){(Oe&6)!==0?At(Sn,IU):UC()})}function h0(){return Sl===0&&(Sl=Ae()),Sl}function HC(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:vc(""+o)}function qC(o,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,o.id&&h.setAttribute("form",o.id),l.parentNode.insertBefore(h,l),o=new FormData(o),h.parentNode.removeChild(h),o}function MU(o,l,h,p,_){if(l==="submit"&&h&&h.stateNode===_){var b=HC((_[he]||null).action),I=p.submitter;I&&(l=(l=I[he]||null)?HC(l.formAction):I.getAttribute("formAction"),l!==null&&(b=l,I=null));var P=new bc("action","action",null,p,_);o.push({event:P,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Sl!==0){var q=I?qC(_,I):new FormData(_);Mv(h,{pending:!0,data:q,method:_.method,action:b},null,q)}}else typeof b=="function"&&(P.preventDefault(),q=I?qC(_,I):new FormData(_),Mv(h,{pending:!0,data:q,method:_.method,action:b},b,q))},currentTarget:_}]})}}for(var d0=0;d0<Q_.length;d0++){var f0=Q_[d0],NU=f0.toLowerCase(),kU=f0[0].toUpperCase()+f0.slice(1);zs(NU,"on"+kU)}zs(TS,"onAnimationEnd"),zs(xS,"onAnimationIteration"),zs(SS,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(Q4,"onTransitionRun"),zs(X4,"onTransitionStart"),zs(Z4,"onTransitionCancel"),zs(AS,"onTransitionEnd"),Fr("onMouseEnter",["mouseout","mouseover"]),Fr("onMouseLeave",["mouseout","mouseover"]),Fr("onPointerEnter",["pointerout","pointerover"]),Fr("onPointerLeave",["pointerout","pointerover"]),Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qh));function $C(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var p=o[h],_=p.event;p=p.listeners;t:{var b=void 0;if(l)for(var I=p.length-1;0<=I;I--){var P=p[I],q=P.instance,Z=P.currentTarget;if(P=P.listener,q!==b&&_.isPropagationStopped())break t;b=P,_.currentTarget=Z;try{b(_)}catch(rt){hm(rt)}_.currentTarget=null,b=q}else for(I=0;I<p.length;I++){if(P=p[I],q=P.instance,Z=P.currentTarget,P=P.listener,q!==b&&_.isPropagationStopped())break t;b=P,_.currentTarget=Z;try{b(_)}catch(rt){hm(rt)}_.currentTarget=null,b=q}}}}function oe(o,l){var h=l[Qi];h===void 0&&(h=l[Qi]=new Set);var p=o+"__bubble";h.has(p)||(GC(l,o,2,!1),h.add(p))}function p0(o,l,h){var p=0;l&&(p|=4),GC(h,o,p,l)}var Sm="_reactListening"+Math.random().toString(36).slice(2);function m0(o){if(!o[Sm]){o[Sm]=!0,lh.forEach(function(h){h!=="selectionchange"&&(PU.has(h)||p0(h,!1,o),p0(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Sm]||(l[Sm]=!0,p0("selectionchange",!1,l))}}function GC(o,l,h,p){switch(gR(l)){case 2:var _=a3;break;case 8:_=l3;break;default:_=I0}h=_.bind(null,l,h,o),_=void 0,!_s||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),p?_!==void 0?o.addEventListener(l,h,{capture:!0,passive:_}):o.addEventListener(l,h,!0):_!==void 0?o.addEventListener(l,h,{passive:_}):o.addEventListener(l,h,!1)}function g0(o,l,h,p,_){var b=p;if((l&1)===0&&(l&2)===0&&p!==null)t:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var P=p.stateNode.containerInfo;if(P===_)break;if(I===4)for(I=p.return;I!==null;){var q=I.tag;if((q===3||q===4)&&I.stateNode.containerInfo===_)return;I=I.return}for(;P!==null;){if(I=Ur(P),I===null)return;if(q=I.tag,q===5||q===6||q===26||q===27){p=b=I;continue t}P=P.parentNode}}p=p.return}Cp(function(){var Z=b,rt=ys(h),ct=[];t:{var et=CS.get(o);if(et!==void 0){var nt=bc,Ft=o;switch(o){case"keypress":if(ur(h)===0)break t;case"keydown":case"keyup":nt=Ac;break;case"focusin":Ft="focus",nt=Tc;break;case"focusout":Ft="blur",nt=Tc;break;case"beforeblur":case"afterblur":nt=Tc;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=z_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Op;break;case TS:case xS:case SS:nt=xc;break;case AS:nt=Vp;break;case"scroll":case"scrollend":nt=Rp;break;case"wheel":nt=Cc;break;case"copy":case"cut":case"paste":nt=Sc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=bh;break;case"toggle":case"beforetoggle":nt=Up}var Pt=(l&4)!==0,Be=!Pt&&(o==="scroll"||o==="scrollend"),W=Pt?et!==null?et+"Capture":null:et;Pt=[];for(var G=Z,X;G!==null;){var at=G;if(X=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||X===null||W===null||(at=sl(G,W),at!=null&&Pt.push(Xh(G,at,X))),Be)break;G=G.return}0<Pt.length&&(et=new nt(et,Ft,null,h,rt),ct.push({event:et,listeners:Pt}))}}if((l&7)===0){t:{if(et=o==="mouseover"||o==="pointerover",nt=o==="mouseout"||o==="pointerout",et&&h!==Hr&&(Ft=h.relatedTarget||h.fromElement)&&(Ur(Ft)||Ft[Ke]))break t;if((nt||et)&&(et=rt.window===rt?rt:(et=rt.ownerDocument)?et.defaultView||et.parentWindow:window,nt?(Ft=h.relatedTarget||h.toElement,nt=Z,Ft=Ft?Ur(Ft):null,Ft!==null&&(Be=r(Ft),Pt=Ft.tag,Ft!==Be||Pt!==5&&Pt!==27&&Pt!==6)&&(Ft=null)):(nt=null,Ft=Z),nt!==Ft)){if(Pt=vs,at="onMouseLeave",W="onMouseEnter",G="mouse",(o==="pointerout"||o==="pointerover")&&(Pt=bh,at="onPointerLeave",W="onPointerEnter",G="pointer"),Be=nt==null?et:or(nt),X=Ft==null?et:or(Ft),et=new Pt(at,G+"leave",nt,h,rt),et.target=Be,et.relatedTarget=X,at=null,Ur(rt)===Z&&(Pt=new Pt(W,G+"enter",Ft,h,rt),Pt.target=X,Pt.relatedTarget=Be,at=Pt),Be=at,nt&&Ft)e:{for(Pt=nt,W=Ft,G=0,X=Pt;X;X=Zc(X))G++;for(X=0,at=W;at;at=Zc(at))X++;for(;0<G-X;)Pt=Zc(Pt),G--;for(;0<X-G;)W=Zc(W),X--;for(;G--;){if(Pt===W||W!==null&&Pt===W.alternate)break e;Pt=Zc(Pt),W=Zc(W)}Pt=null}else Pt=null;nt!==null&&WC(ct,et,nt,Pt,!1),Ft!==null&&Be!==null&&WC(ct,Be,Ft,Pt,!0)}}t:{if(et=Z?or(Z):window,nt=et.nodeName&&et.nodeName.toLowerCase(),nt==="select"||nt==="input"&&et.type==="file")var Tt=dS;else if(Ln(et))if(fS)Tt=W4;else{Tt=$4;var ie=q4}else nt=et.nodeName,!nt||nt.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?Z&&fh(Z.elementType)&&(Tt=dS):Tt=G4;if(Tt&&(Tt=Tt(o,Z))){Kr(ct,Tt,h,rt);break t}ie&&ie(o,et,Z),o==="focusout"&&Z&&et.type==="number"&&Z.memoizedProps.value!=null&&Bo(et,"number",et.value)}switch(ie=Z?or(Z):window,o){case"focusin":(Ln(ie)||ie.contentEditable==="true")&&(Rc=ie,W_=Z,Th=null);break;case"focusout":Th=W_=Rc=null;break;case"mousedown":K_=!0;break;case"contextmenu":case"mouseup":case"dragend":K_=!1,wS(ct,h,rt);break;case"selectionchange":if(Y4)break;case"keydown":case"keyup":wS(ct,h,rt)}var It;if(fr)t:{switch(o){case"compositionstart":var Ot="onCompositionStart";break t;case"compositionend":Ot="onCompositionEnd";break t;case"compositionupdate":Ot="onCompositionUpdate";break t}Ot=void 0}else ye?it(o,h)&&(Ot="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Ot="onCompositionStart");Ot&&(A&&h.locale!=="ko"&&(ye||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&ye&&(It=mh()):(cr=rt,zo="value"in cr?cr.value:cr.textContent,ye=!0)),ie=Am(Z,Ot),0<ie.length&&(Ot=new _h(Ot,o,null,h,rt),ct.push({event:Ot,listeners:ie}),It?Ot.data=It:(It=mt(h),It!==null&&(Ot.data=It)))),(It=E?On(o,h):_e(o,h))&&(Ot=Am(Z,"onBeforeInput"),0<Ot.length&&(ie=new _h("onBeforeInput","beforeinput",null,h,rt),ct.push({event:ie,listeners:Ot}),ie.data=It)),MU(ct,o,Z,h,rt)}$C(ct,l)})}function Xh(o,l,h){return{instance:o,listener:l,currentTarget:h}}function Am(o,l){for(var h=l+"Capture",p=[];o!==null;){var _=o,b=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||b===null||(_=sl(o,h),_!=null&&p.unshift(Xh(o,_,b)),_=sl(o,l),_!=null&&p.push(Xh(o,_,b))),o.tag===3)return p;o=o.return}return[]}function Zc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function WC(o,l,h,p,_){for(var b=l._reactName,I=[];h!==null&&h!==p;){var P=h,q=P.alternate,Z=P.stateNode;if(P=P.tag,q!==null&&q===p)break;P!==5&&P!==26&&P!==27||Z===null||(q=Z,_?(Z=sl(h,b),Z!=null&&I.unshift(Xh(h,Z,q))):_||(Z=sl(h,b),Z!=null&&I.push(Xh(h,Z,q)))),h=h.return}I.length!==0&&o.push({event:l,listeners:I})}var OU=/\r\n?/g,LU=/\u0000|\uFFFD/g;function KC(o){return(typeof o=="string"?o:""+o).replace(OU,`
`).replace(LU,"")}function YC(o,l){return l=KC(l),KC(o)===l}function Cm(){}function Fe(o,l,h,p,_,b){switch(h){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||gs(o,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&gs(o,""+p);break;case"className":ar(o,"class",p);break;case"tabIndex":ar(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(o,h,p);break;case"style":dh(o,p,b);break;case"data":if(l!=="object"){ar(o,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||h!=="href")){o.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=vc(""+p),o.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(h==="formAction"?(l!=="input"&&Fe(o,l,"name",_.name,_,null),Fe(o,l,"formEncType",_.formEncType,_,null),Fe(o,l,"formMethod",_.formMethod,_,null),Fe(o,l,"formTarget",_.formTarget,_,null)):(Fe(o,l,"encType",_.encType,_,null),Fe(o,l,"method",_.method,_,null),Fe(o,l,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=vc(""+p),o.setAttribute(h,p);break;case"onClick":p!=null&&(o.onclick=Cm);break;case"onScroll":p!=null&&oe("scroll",o);break;case"onScrollEnd":p!=null&&oe("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(h=p.__html,h!=null){if(_.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}h=vc(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""+p):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":p===!0?o.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,p):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(h,p):o.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(h):o.setAttribute(h,p);break;case"popover":oe("beforetoggle",o),oe("toggle",o),Fo(o,"popover",p);break;case"xlinkActuate":ei(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ei(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ei(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ei(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ei(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ei(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ei(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ei(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ei(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Fo(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=F_.get(h)||h,Fo(o,h,p))}}function y0(o,l,h,p,_,b){switch(h){case"style":dh(o,p,b);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(h=p.__html,h!=null){if(_.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"children":typeof p=="string"?gs(o,p):(typeof p=="number"||typeof p=="bigint")&&gs(o,""+p);break;case"onScroll":p!=null&&oe("scroll",o);break;case"onScrollEnd":p!=null&&oe("scrollend",o);break;case"onClick":p!=null&&(o.onclick=Cm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pc.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(_=h.endsWith("Capture"),l=h.slice(2,_?h.length-7:void 0),b=o[he]||null,b=b!=null?b[h]:null,typeof b=="function"&&o.removeEventListener(l,b,_),typeof p=="function")){typeof b!="function"&&b!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(l,p,_);break t}h in o?o[h]=p:p===!0?o.setAttribute(h,""):Fo(o,h,p)}}}function ri(o,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oe("error",o),oe("load",o);var p=!1,_=!1,b;for(b in h)if(h.hasOwnProperty(b)){var I=h[b];if(I!=null)switch(b){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Fe(o,l,b,I,h,null)}}_&&Fe(o,l,"srcSet",h.srcSet,h,null),p&&Fe(o,l,"src",h.src,h,null);return;case"input":oe("invalid",o);var P=b=I=_=null,q=null,Z=null;for(p in h)if(h.hasOwnProperty(p)){var rt=h[p];if(rt!=null)switch(p){case"name":_=rt;break;case"type":I=rt;break;case"checked":q=rt;break;case"defaultChecked":Z=rt;break;case"value":b=rt;break;case"defaultValue":P=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(i(137,l));break;default:Fe(o,l,p,rt,h,null)}}el(o,b,P,q,Z,I,_,!1),_c(o);return;case"select":oe("invalid",o),p=I=b=null;for(_ in h)if(h.hasOwnProperty(_)&&(P=h[_],P!=null))switch(_){case"value":b=P;break;case"defaultValue":I=P;break;case"multiple":p=P;default:Fe(o,l,_,P,h,null)}l=b,h=I,o.multiple=!!p,l!=null?zr(o,!!p,l,!1):h!=null&&zr(o,!!p,h,!0);return;case"textarea":oe("invalid",o),b=_=p=null;for(I in h)if(h.hasOwnProperty(I)&&(P=h[I],P!=null))switch(I){case"value":p=P;break;case"defaultValue":_=P;break;case"children":b=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:Fe(o,l,I,P,h,null)}nl(o,p,_,b),_c(o);return;case"option":for(q in h)if(h.hasOwnProperty(q)&&(p=h[q],p!=null))switch(q){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Fe(o,l,q,p,h,null)}return;case"dialog":oe("beforetoggle",o),oe("toggle",o),oe("cancel",o),oe("close",o);break;case"iframe":case"object":oe("load",o);break;case"video":case"audio":for(p=0;p<Qh.length;p++)oe(Qh[p],o);break;case"image":oe("error",o),oe("load",o);break;case"details":oe("toggle",o);break;case"embed":case"source":case"link":oe("error",o),oe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in h)if(h.hasOwnProperty(Z)&&(p=h[Z],p!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Fe(o,l,Z,p,h,null)}return;default:if(fh(l)){for(rt in h)h.hasOwnProperty(rt)&&(p=h[rt],p!==void 0&&y0(o,l,rt,p,h,void 0));return}}for(P in h)h.hasOwnProperty(P)&&(p=h[P],p!=null&&Fe(o,l,P,p,h,null))}function VU(o,l,h,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,b=null,I=null,P=null,q=null,Z=null,rt=null;for(nt in h){var ct=h[nt];if(h.hasOwnProperty(nt)&&ct!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":q=ct;default:p.hasOwnProperty(nt)||Fe(o,l,nt,null,p,ct)}}for(var et in p){var nt=p[et];if(ct=h[et],p.hasOwnProperty(et)&&(nt!=null||ct!=null))switch(et){case"type":b=nt;break;case"name":_=nt;break;case"checked":Z=nt;break;case"defaultChecked":rt=nt;break;case"value":I=nt;break;case"defaultValue":P=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(i(137,l));break;default:nt!==ct&&Fe(o,l,et,nt,p,ct)}}Zi(o,I,P,q,Z,rt,b,_);return;case"select":nt=I=P=et=null;for(b in h)if(q=h[b],h.hasOwnProperty(b)&&q!=null)switch(b){case"value":break;case"multiple":nt=q;default:p.hasOwnProperty(b)||Fe(o,l,b,null,p,q)}for(_ in p)if(b=p[_],q=h[_],p.hasOwnProperty(_)&&(b!=null||q!=null))switch(_){case"value":et=b;break;case"defaultValue":P=b;break;case"multiple":I=b;default:b!==q&&Fe(o,l,_,b,p,q)}l=P,h=I,p=nt,et!=null?zr(o,!!h,et,!1):!!p!=!!h&&(l!=null?zr(o,!!h,l,!0):zr(o,!!h,h?[]:"",!1));return;case"textarea":nt=et=null;for(P in h)if(_=h[P],h.hasOwnProperty(P)&&_!=null&&!p.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Fe(o,l,P,null,p,_)}for(I in p)if(_=p[I],b=h[I],p.hasOwnProperty(I)&&(_!=null||b!=null))switch(I){case"value":et=_;break;case"defaultValue":nt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==b&&Fe(o,l,I,_,p,b)}je(o,et,nt);return;case"option":for(var Ft in h)if(et=h[Ft],h.hasOwnProperty(Ft)&&et!=null&&!p.hasOwnProperty(Ft))switch(Ft){case"selected":o.selected=!1;break;default:Fe(o,l,Ft,null,p,et)}for(q in p)if(et=p[q],nt=h[q],p.hasOwnProperty(q)&&et!==nt&&(et!=null||nt!=null))switch(q){case"selected":o.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:Fe(o,l,q,et,p,nt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pt in h)et=h[Pt],h.hasOwnProperty(Pt)&&et!=null&&!p.hasOwnProperty(Pt)&&Fe(o,l,Pt,null,p,et);for(Z in p)if(et=p[Z],nt=h[Z],p.hasOwnProperty(Z)&&et!==nt&&(et!=null||nt!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(i(137,l));break;default:Fe(o,l,Z,et,p,nt)}return;default:if(fh(l)){for(var Be in h)et=h[Be],h.hasOwnProperty(Be)&&et!==void 0&&!p.hasOwnProperty(Be)&&y0(o,l,Be,void 0,p,et);for(rt in p)et=p[rt],nt=h[rt],!p.hasOwnProperty(rt)||et===nt||et===void 0&&nt===void 0||y0(o,l,rt,et,p,nt);return}}for(var W in h)et=h[W],h.hasOwnProperty(W)&&et!=null&&!p.hasOwnProperty(W)&&Fe(o,l,W,null,p,et);for(ct in p)et=p[ct],nt=h[ct],!p.hasOwnProperty(ct)||et===nt||et==null&&nt==null||Fe(o,l,ct,et,p,nt)}var _0=null,v0=null;function Rm(o){return o.nodeType===9?o:o.ownerDocument}function QC(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XC(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function b0(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var w0=null;function jU(){var o=window.event;return o&&o.type==="popstate"?o===w0?!1:(w0=o,!0):(w0=null,!1)}var ZC=typeof setTimeout=="function"?setTimeout:void 0,UU=typeof clearTimeout=="function"?clearTimeout:void 0,JC=typeof Promise=="function"?Promise:void 0,FU=typeof queueMicrotask=="function"?queueMicrotask:typeof JC<"u"?function(o){return JC.resolve(null).then(o).catch(BU)}:ZC;function BU(o){setTimeout(function(){throw o})}function sa(o){return o==="head"}function tR(o,l){var h=l,p=0,_=0;do{var b=h.nextSibling;if(o.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"){if(0<p&&8>p){h=p;var I=o.ownerDocument;if(h&1&&Zh(I.documentElement),h&2&&Zh(I.body),h&4)for(h=I.head,Zh(h),I=h.firstChild;I;){var P=I.nextSibling,q=I.nodeName;I[Xi]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&I.rel.toLowerCase()==="stylesheet"||h.removeChild(I),I=P}}if(_===0){o.removeChild(b),od(l);return}_--}else h==="$"||h==="$?"||h==="$!"?_++:p=h.charCodeAt(0)-48;else p=0;h=b}while(h);od(l)}function E0(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":E0(h),Uo(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function zU(o,l,h,p){for(;o.nodeType===1;){var _=h;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[Xi])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(b=o.getAttribute("rel"),b==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(b!==_.rel||o.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||o.getAttribute("title")!==(_.title==null?null:_.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(b=o.getAttribute("src"),(b!==(_.src==null?null:_.src)||o.getAttribute("type")!==(_.type==null?null:_.type)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&b&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var b=_.name==null?null:""+_.name;if(_.type==="hidden"&&o.getAttribute("name")===b)return o}else return o;if(o=qs(o.nextSibling),o===null)break}return null}function HU(o,l,h){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=qs(o.nextSibling),o===null))return null;return o}function T0(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function qU(o,l){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")l();else{var p=function(){l(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function qs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var x0=null;function eR(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}function nR(o,l,h){switch(l=Rm(h),o){case"html":if(o=l.documentElement,!o)throw Error(i(452));return o;case"head":if(o=l.head,!o)throw Error(i(453));return o;case"body":if(o=l.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Zh(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Uo(o)}var As=new Map,iR=new Set;function Im(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ao=tt.d;tt.d={f:$U,r:GU,D:WU,C:KU,L:YU,m:QU,X:ZU,S:XU,M:JU};function $U(){var o=ao.f(),l=bm();return o||l}function GU(o){var l=rr(o);l!==null&&l.tag===5&&l.type==="form"?TA(l):ao.r(o)}var Jc=typeof document>"u"?null:document;function sR(o,l,h){var p=Jc;if(p&&typeof l=="string"&&l){var _=An(l);_='link[rel="'+o+'"][href="'+_+'"]',typeof h=="string"&&(_+='[crossorigin="'+h+'"]'),iR.has(_)||(iR.add(_),o={rel:o,crossOrigin:h,href:l},p.querySelector(_)===null&&(l=p.createElement("link"),ri(l,"link",o),_n(l),p.head.appendChild(l)))}}function WU(o){ao.D(o),sR("dns-prefetch",o,null)}function KU(o,l){ao.C(o,l),sR("preconnect",o,l)}function YU(o,l,h){ao.L(o,l,h);var p=Jc;if(p&&o&&l){var _='link[rel="preload"][as="'+An(l)+'"]';l==="image"&&h&&h.imageSrcSet?(_+='[imagesrcset="'+An(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(_+='[imagesizes="'+An(h.imageSizes)+'"]')):_+='[href="'+An(o)+'"]';var b=_;switch(l){case"style":b=tu(o);break;case"script":b=eu(o)}As.has(b)||(o=f({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:o,as:l},h),As.set(b,o),p.querySelector(_)!==null||l==="style"&&p.querySelector(Jh(b))||l==="script"&&p.querySelector(td(b))||(l=p.createElement("link"),ri(l,"link",o),_n(l),p.head.appendChild(l)))}}function QU(o,l){ao.m(o,l);var h=Jc;if(h&&o){var p=l&&typeof l.as=="string"?l.as:"script",_='link[rel="modulepreload"][as="'+An(p)+'"][href="'+An(o)+'"]',b=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=eu(o)}if(!As.has(b)&&(o=f({rel:"modulepreload",href:o},l),As.set(b,o),h.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(td(b)))return}p=h.createElement("link"),ri(p,"link",o),_n(p),h.head.appendChild(p)}}}function XU(o,l,h){ao.S(o,l,h);var p=Jc;if(p&&o){var _=Ai(p).hoistableStyles,b=tu(o);l=l||"default";var I=_.get(b);if(!I){var P={loading:0,preload:null};if(I=p.querySelector(Jh(b)))P.loading=5;else{o=f({rel:"stylesheet",href:o,"data-precedence":l},h),(h=As.get(b))&&S0(o,h);var q=I=p.createElement("link");_n(q),ri(q,"link",o),q._p=new Promise(function(Z,rt){q.onload=Z,q.onerror=rt}),q.addEventListener("load",function(){P.loading|=1}),q.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Dm(I,l,p)}I={type:"stylesheet",instance:I,count:1,state:P},_.set(b,I)}}}function ZU(o,l){ao.X(o,l);var h=Jc;if(h&&o){var p=Ai(h).hoistableScripts,_=eu(o),b=p.get(_);b||(b=h.querySelector(td(_)),b||(o=f({src:o,async:!0},l),(l=As.get(_))&&A0(o,l),b=h.createElement("script"),_n(b),ri(b,"link",o),h.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(_,b))}}function JU(o,l){ao.M(o,l);var h=Jc;if(h&&o){var p=Ai(h).hoistableScripts,_=eu(o),b=p.get(_);b||(b=h.querySelector(td(_)),b||(o=f({src:o,async:!0,type:"module"},l),(l=As.get(_))&&A0(o,l),b=h.createElement("script"),_n(b),ri(b,"link",o),h.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(_,b))}}function rR(o,l,h,p){var _=(_=gt.current)?Im(_):null;if(!_)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=tu(h.href),h=Ai(_).hoistableStyles,p=h.get(l),p||(p={type:"style",instance:null,count:0,state:null},h.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=tu(h.href);var b=Ai(_).hoistableStyles,I=b.get(o);if(I||(_=_.ownerDocument||_,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(o,I),(b=_.querySelector(Jh(o)))&&!b._p&&(I.instance=b,I.state.loading=5),As.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},As.set(o,h),b||t3(_,o,h,I.state))),l&&p===null)throw Error(i(528,""));return I}if(l&&p!==null)throw Error(i(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=eu(h),h=Ai(_).hoistableScripts,p=h.get(l),p||(p={type:"script",instance:null,count:0,state:null},h.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function tu(o){return'href="'+An(o)+'"'}function Jh(o){return'link[rel="stylesheet"]['+o+"]"}function oR(o){return f({},o,{"data-precedence":o.precedence,precedence:null})}function t3(o,l,h,p){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=o.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),ri(l,"link",h),_n(l),o.head.appendChild(l))}function eu(o){return'[src="'+An(o)+'"]'}function td(o){return"script[async]"+o}function aR(o,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var p=o.querySelector('style[data-href~="'+An(h.href)+'"]');if(p)return l.instance=p,_n(p),p;var _=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),_n(p),ri(p,"style",_),Dm(p,h.precedence,o),l.instance=p;case"stylesheet":_=tu(h.href);var b=o.querySelector(Jh(_));if(b)return l.state.loading|=4,l.instance=b,_n(b),b;p=oR(h),(_=As.get(_))&&S0(p,_),b=(o.ownerDocument||o).createElement("link"),_n(b);var I=b;return I._p=new Promise(function(P,q){I.onload=P,I.onerror=q}),ri(b,"link",p),l.state.loading|=4,Dm(b,h.precedence,o),l.instance=b;case"script":return b=eu(h.src),(_=o.querySelector(td(b)))?(l.instance=_,_n(_),_):(p=h,(_=As.get(b))&&(p=f({},h),A0(p,_)),o=o.ownerDocument||o,_=o.createElement("script"),_n(_),ri(_,"link",p),o.head.appendChild(_),l.instance=_);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,Dm(p,h.precedence,o));return l.instance}function Dm(o,l,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,b=_,I=0;I<p.length;I++){var P=p[I];if(P.dataset.precedence===l)b=P;else if(b!==_)break}b?b.parentNode.insertBefore(o,b.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(o,l.firstChild))}function S0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function A0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Mm=null;function lR(o,l,h){if(Mm===null){var p=new Map,_=Mm=new Map;_.set(h,p)}else _=Mm,p=_.get(h),p||(p=new Map,_.set(h,p));if(p.has(o))return p;for(p.set(o,null),h=h.getElementsByTagName(o),_=0;_<h.length;_++){var b=h[_];if(!(b[Xi]||b[ne]||o==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var I=b.getAttribute(l)||"";I=o+I;var P=p.get(I);P?P.push(b):p.set(I,[b])}}return p}function cR(o,l,h){o=o.ownerDocument||o,o.head.insertBefore(h,l==="title"?o.querySelector("head > title"):null)}function e3(o,l,h){if(h===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function uR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var ed=null;function n3(){}function i3(o,l,h){if(ed===null)throw Error(i(475));var p=ed;if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var _=tu(h.href),b=o.querySelector(Jh(_));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=Nm.bind(p),o.then(p,p)),l.state.loading|=4,l.instance=b,_n(b);return}b=o.ownerDocument||o,h=oR(h),(_=As.get(_))&&S0(h,_),b=b.createElement("link"),_n(b);var I=b;I._p=new Promise(function(P,q){I.onload=P,I.onerror=q}),ri(b,"link",h),l.instance=b}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(p.count++,l=Nm.bind(p),o.addEventListener("load",l),o.addEventListener("error",l))}}function s3(){if(ed===null)throw Error(i(475));var o=ed;return o.stylesheets&&o.count===0&&C0(o,o.stylesheets),0<o.count?function(l){var h=setTimeout(function(){if(o.stylesheets&&C0(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(h)}}:null}function Nm(){if(this.count--,this.count===0){if(this.stylesheets)C0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var km=null;function C0(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,km=new Map,l.forEach(r3,o),km=null,Nm.call(o))}function r3(o,l){if(!(l.state.loading&4)){var h=km.get(o);if(h)var p=h.get(null);else{h=new Map,km.set(o,h);for(var _=o.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<_.length;b++){var I=_[b];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(h.set(I.dataset.precedence,I),p=I)}p&&h.set(null,p)}_=l.instance,I=_.getAttribute("data-precedence"),b=h.get(I)||p,b===p&&h.set(null,_),h.set(I,_),this.count++,p=Nm.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),b?b.parentNode.insertBefore(_,b.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(_,o.firstChild)),l.state.loading|=4}}var nd={$$typeof:M,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function o3(o,l,h,p,_,b,I,P){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=b,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function hR(o,l,h,p,_,b,I,P,q,Z,rt,ct){return o=new o3(o,l,h,I,P,q,Z,ct),l=1,b===!0&&(l|=24),b=ts(3,null,null,l),o.current=b,b.stateNode=o,l=lv(),l.refCount++,o.pooledCache=l,l.refCount++,b.memoizedState={element:p,isDehydrated:h,cache:l},dv(b),o}function dR(o){return o?(o=Nc,o):Nc}function fR(o,l,h,p,_,b){_=dR(_),p.context===null?p.context=_:p.pendingContext=_,p=$o(l),p.payload={element:h},b=b===void 0?null:b,b!==null&&(p.callback=b),h=Go(o,p,l),h!==null&&(rs(h,o,l),Nh(h,o,l))}function pR(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function R0(o,l){pR(o,l),(o=o.alternate)&&pR(o,l)}function mR(o){if(o.tag===13){var l=Mc(o,67108864);l!==null&&rs(l,o,67108864),R0(o,67108864)}}var Pm=!0;function a3(o,l,h,p){var _=K.T;K.T=null;var b=tt.p;try{tt.p=2,I0(o,l,h,p)}finally{tt.p=b,K.T=_}}function l3(o,l,h,p){var _=K.T;K.T=null;var b=tt.p;try{tt.p=8,I0(o,l,h,p)}finally{tt.p=b,K.T=_}}function I0(o,l,h,p){if(Pm){var _=D0(p);if(_===null)g0(o,l,p,Om,h),yR(o,p);else if(u3(_,o,l,h,p))p.stopPropagation();else if(yR(o,p),l&4&&-1<c3.indexOf(o)){for(;_!==null;){var b=rr(_);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var I=ht(b.pendingLanes);if(I!==0){var P=b;for(P.pendingLanes|=2,P.entangledLanes|=2;I;){var q=1<<31-We(I);P.entanglements[1]|=q,I&=~q}vr(b),(Oe&6)===0&&(_m=Se()+500,Yh(0))}}break;case 13:P=Mc(b,2),P!==null&&rs(P,b,2),bm(),R0(b,2)}if(b=D0(p),b===null&&g0(o,l,p,Om,h),b===_)break;_=b}_!==null&&p.stopPropagation()}else g0(o,l,p,null,h)}}function D0(o){return o=ys(o),M0(o)}var Om=null;function M0(o){if(Om=null,o=Ur(o),o!==null){var l=r(o);if(l===null)o=null;else{var h=l.tag;if(h===13){if(o=a(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Om=o,null}function gR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ti()){case Sn:return 2;case ln:return 8;case kn:case Pi:return 32;case Yi:return 268435456;default:return 32}default:return 32}}var N0=!1,ra=null,oa=null,aa=null,id=new Map,sd=new Map,la=[],c3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yR(o,l){switch(o){case"focusin":case"focusout":ra=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":aa=null;break;case"pointerover":case"pointerout":id.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":sd.delete(l.pointerId)}}function rd(o,l,h,p,_,b){return o===null||o.nativeEvent!==b?(o={blockedOn:l,domEventName:h,eventSystemFlags:p,nativeEvent:b,targetContainers:[_]},l!==null&&(l=rr(l),l!==null&&mR(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),o)}function u3(o,l,h,p,_){switch(l){case"focusin":return ra=rd(ra,o,l,h,p,_),!0;case"dragenter":return oa=rd(oa,o,l,h,p,_),!0;case"mouseover":return aa=rd(aa,o,l,h,p,_),!0;case"pointerover":var b=_.pointerId;return id.set(b,rd(id.get(b)||null,o,l,h,p,_)),!0;case"gotpointercapture":return b=_.pointerId,sd.set(b,rd(sd.get(b)||null,o,l,h,p,_)),!0}return!1}function _R(o){var l=Ur(o.target);if(l!==null){var h=r(l);if(h!==null){if(l=h.tag,l===13){if(l=a(h),l!==null){o.blockedOn=l,De(o.priority,function(){if(h.tag===13){var p=ss();p=Zt(p);var _=Mc(h,p);_!==null&&rs(_,h,p),R0(h,p)}});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Lm(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=D0(o.nativeEvent);if(h===null){h=o.nativeEvent;var p=new h.constructor(h.type,h);Hr=p,h.target.dispatchEvent(p),Hr=null}else return l=rr(h),l!==null&&mR(l),o.blockedOn=h,!1;l.shift()}return!0}function vR(o,l,h){Lm(o)&&h.delete(l)}function h3(){N0=!1,ra!==null&&Lm(ra)&&(ra=null),oa!==null&&Lm(oa)&&(oa=null),aa!==null&&Lm(aa)&&(aa=null),id.forEach(vR),sd.forEach(vR)}function Vm(o,l){o.blockedOn===l&&(o.blockedOn=null,N0||(N0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,h3)))}var jm=null;function bR(o){jm!==o&&(jm=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){jm===o&&(jm=null);for(var l=0;l<o.length;l+=3){var h=o[l],p=o[l+1],_=o[l+2];if(typeof p!="function"){if(M0(p||h)===null)continue;break}var b=rr(h);b!==null&&(o.splice(l,3),l-=3,Mv(b,{pending:!0,data:_,method:h.method,action:p},p,_))}}))}function od(o){function l(q){return Vm(q,o)}ra!==null&&Vm(ra,o),oa!==null&&Vm(oa,o),aa!==null&&Vm(aa,o),id.forEach(l),sd.forEach(l);for(var h=0;h<la.length;h++){var p=la[h];p.blockedOn===o&&(p.blockedOn=null)}for(;0<la.length&&(h=la[0],h.blockedOn===null);)_R(h),h.blockedOn===null&&la.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var _=h[p],b=h[p+1],I=_[he]||null;if(typeof b=="function")I||bR(h);else if(I){var P=null;if(b&&b.hasAttribute("formAction")){if(_=b,I=b[he]||null)P=I.formAction;else if(M0(_)!==null)continue}else P=I.action;typeof P=="function"?h[p+1]=P:(h.splice(p,3),p-=3),bR(h)}}}function k0(o){this._internalRoot=o}Um.prototype.render=k0.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(i(409));var h=l.current,p=ss();fR(h,p,o,l,null,null)},Um.prototype.unmount=k0.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;fR(o.current,2,null,o,null,null),bm(),l[Ke]=null}};function Um(o){this._internalRoot=o}Um.prototype.unstable_scheduleHydration=function(o){if(o){var l=se();o={blockedOn:null,target:o,priority:l};for(var h=0;h<la.length&&l!==0&&l<la[h].priority;h++);la.splice(h,0,o),h===0&&_R(o)}};var wR=t.version;if(wR!=="19.1.0")throw Error(i(527,wR,"19.1.0"));tt.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=u(l),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var d3={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fm.isDisabled&&Fm.supportsFiber)try{Ge=Fm.inject(d3),Jt=Fm}catch{}}return ld.createRoot=function(o,l){if(!s(o))throw Error(i(299));var h=!1,p="",_=VA,b=jA,I=UA,P=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(P=l.unstable_transitionCallbacks)),l=hR(o,1,!1,null,null,h,p,_,b,I,P,null),o[Ke]=l.current,m0(o),new k0(l)},ld.hydrateRoot=function(o,l,h){if(!s(o))throw Error(i(299));var p=!1,_="",b=VA,I=jA,P=UA,q=null,Z=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onUncaughtError!==void 0&&(b=h.onUncaughtError),h.onCaughtError!==void 0&&(I=h.onCaughtError),h.onRecoverableError!==void 0&&(P=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(q=h.unstable_transitionCallbacks),h.formState!==void 0&&(Z=h.formState)),l=hR(o,1,!0,l,h??null,p,_,b,I,P,q,Z),l.context=dR(null),h=l.current,p=ss(),p=Zt(p),_=$o(p),_.callback=null,Go(h,_,p),h=p,l.current.lanes=h,qt(l,h),vr(l),o[Ke]=l.current,m0(o),new Um(l)},ld.version="19.1.0",ld}var MR;function x3(){if(MR)return L0.exports;MR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),L0.exports=T3(),L0.exports}var S3=x3();const A3=yE(S3);var cd={},NR;function C3(){if(NR)return cd;NR=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.parse=a,cd.serialize=d;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,r=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function a(y,v){const w=new r,T=y.length;if(T<2)return w;const x=(v==null?void 0:v.decode)||f;let C=0;do{const k=y.indexOf("=",C);if(k===-1)break;const M=y.indexOf(";",C),z=M===-1?T:M;if(k>z){C=y.lastIndexOf(";",k-1)+1;continue}const j=c(y,C,k),$=u(y,k,j),O=y.slice(j,$);if(w[O]===void 0){let D=c(y,k+1,z),N=u(y,z,D);const L=x(y.slice(D,N));w[O]=L}C=z+1}while(C<T);return w}function c(y,v,w){do{const T=y.charCodeAt(v);if(T!==32&&T!==9)return v}while(++v<w);return w}function u(y,v,w){for(;v>w;){const T=y.charCodeAt(--v);if(T!==32&&T!==9)return v+1}return w}function d(y,v,w){const T=(w==null?void 0:w.encode)||encodeURIComponent;if(!e.test(y))throw new TypeError(`argument name is invalid: ${y}`);const x=T(v);if(!t.test(x))throw new TypeError(`argument val is invalid: ${v}`);let C=y+"="+x;if(!w)return C;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);C+="; Max-Age="+w.maxAge}if(w.domain){if(!n.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);C+="; Domain="+w.domain}if(w.path){if(!i.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);C+="; Path="+w.path}if(w.expires){if(!m(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);C+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(C+="; HttpOnly"),w.secure&&(C+="; Secure"),w.partitioned&&(C+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return C}function f(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return s.call(y)==="[object Date]"}return cd}C3();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var kR="popstate";function R3(e={}){function t(i,s){let{pathname:r,search:a,hash:c}=i.location;return Hb("",{pathname:r,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:of(s)}return D3(t,n,null,e)}function an(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function I3(){return Math.random().toString(36).substring(2,10)}function PR(e,t){return{usr:e.state,key:e.key,idx:t}}function Hb(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Hu(t):t,state:n,key:t&&t.key||i||I3()}}function of({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Hu(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function D3(e,t,n,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,c="POP",u=null,d=f();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function f(){return(a.state||{idx:null}).idx}function m(){c="POP";let x=f(),C=x==null?null:x-d;d=x,u&&u({action:c,location:T.location,delta:C})}function y(x,C){c="PUSH";let k=Hb(T.location,x,C);d=f()+1;let M=PR(k,d),z=T.createHref(k);try{a.pushState(M,"",z)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(z)}r&&u&&u({action:c,location:T.location,delta:1})}function v(x,C){c="REPLACE";let k=Hb(T.location,x,C);d=f();let M=PR(k,d),z=T.createHref(k);a.replaceState(M,"",z),r&&u&&u({action:c,location:T.location,delta:0})}function w(x){let C=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof x=="string"?x:of(x);return k=k.replace(/ $/,"%20"),an(C,`No window.location.(origin|href) available to create URL for href: ${k}`),new URL(k,C)}let T={get action(){return c},get location(){return e(s,a)},listen(x){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(kR,m),u=x,()=>{s.removeEventListener(kR,m),u=null}},createHref(x){return t(s,x)},createURL:w,encodeLocation(x){let C=w(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:v,go(x){return a.go(x)}};return T}function l2(e,t,n="/"){return M3(e,t,n,!1)}function M3(e,t,n,i){let s=typeof t=="string"?Hu(t):t,r=Ao(s.pathname||"/",n);if(r==null)return null;let a=c2(e);N3(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=H3(r);c=B3(a[u],d,i)}return c}function c2(e,t=[],n=[],i=""){let s=(r,a,c)=>{let u={relativePath:c===void 0?r.path||"":c,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};u.relativePath.startsWith("/")&&(an(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let d=wo([i,u.relativePath]),f=n.concat(u);r.children&&r.children.length>0&&(an(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),c2(r.children,t,f,d)),!(r.path==null&&!r.index)&&t.push({path:d,score:U3(d,r.index),routesMeta:f})};return e.forEach((r,a)=>{var c;if(r.path===""||!((c=r.path)!=null&&c.includes("?")))s(r,a);else for(let u of u2(r.path))s(r,a,u)}),t}function u2(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let a=u2(i.join("/")),c=[];return c.push(...a.map(u=>u===""?r:[r,u].join("/"))),s&&c.push(...a),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function N3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:F3(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var k3=/^:[\w-]+$/,P3=3,O3=2,L3=1,V3=10,j3=-2,OR=e=>e==="*";function U3(e,t){let n=e.split("/"),i=n.length;return n.some(OR)&&(i+=j3),t&&(i+=O3),n.filter(s=>!OR(s)).reduce((s,r)=>s+(k3.test(r)?P3:r===""?L3:V3),i)}function F3(e,t){return e.length===t.length&&e.slice(0,-1).every((i,s)=>i===t[s])?e[e.length-1]-t[t.length-1]:0}function B3(e,t,n=!1){let{routesMeta:i}=e,s={},r="/",a=[];for(let c=0;c<i.length;++c){let u=i[c],d=c===i.length-1,f=r==="/"?t:t.slice(r.length)||"/",m=$g({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),y=u.route;if(!m&&d&&n&&!i[i.length-1].route.index&&(m=$g({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:wo([r,m.pathname]),pathnameBase:W3(wo([r,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(r=wo([r,m.pathnameBase]))}return a}function $g(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=z3(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:i.reduce((d,{paramName:f,isOptional:m},y)=>{if(f==="*"){let w=c[y]||"";a=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const v=c[y];return m&&!v?d[f]=void 0:d[f]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:a,pattern:e}}function z3(e,t=!1,n=!0){Zs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(i.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function H3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ao(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function q3(e,t="/"){let{pathname:n,search:i="",hash:s=""}=typeof e=="string"?Hu(e):e;return{pathname:n?n.startsWith("/")?n:$3(n,t):t,search:K3(i),hash:Y3(s)}}function $3(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function F0(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function G3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function vE(e){let t=G3(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function bE(e,t,n,i=!1){let s;typeof e=="string"?s=Hu(e):(s={...e},an(!s.pathname||!s.pathname.includes("?"),F0("?","pathname","search",s)),an(!s.pathname||!s.pathname.includes("#"),F0("#","pathname","hash",s)),an(!s.search||!s.search.includes("#"),F0("#","search","hash",s)));let r=e===""||s.pathname==="",a=r?"/":s.pathname,c;if(a==null)c=n;else{let m=t.length-1;if(!i&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;s.pathname=y.join("/")}c=m>=0?t[m]:"/"}let u=q3(s,c),d=a&&a!=="/"&&a.endsWith("/"),f=(r||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var wo=e=>e.join("/").replace(/\/\/+/g,"/"),W3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Y3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Q3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var h2=["POST","PUT","PATCH","DELETE"];new Set(h2);var X3=["GET",...h2];new Set(X3);var qu=R.createContext(null);qu.displayName="DataRouter";var Ky=R.createContext(null);Ky.displayName="DataRouterState";var d2=R.createContext({isTransitioning:!1});d2.displayName="ViewTransition";var Z3=R.createContext(new Map);Z3.displayName="Fetchers";var J3=R.createContext(null);J3.displayName="Await";var ir=R.createContext(null);ir.displayName="Navigation";var Ff=R.createContext(null);Ff.displayName="Location";var Ls=R.createContext({outlet:null,matches:[],isDataRoute:!1});Ls.displayName="Route";var wE=R.createContext(null);wE.displayName="RouteError";function tF(e,{relative:t}={}){an($u(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=R.useContext(ir),{hash:s,pathname:r,search:a}=Bf(e,{relative:t}),c=r;return n!=="/"&&(c=r==="/"?n:wo([n,r])),i.createHref({pathname:c,search:a,hash:s})}function $u(){return R.useContext(Ff)!=null}function Ha(){return an($u(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Ff).location}var f2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p2(e){R.useContext(ir).static||R.useLayoutEffect(e)}function rc(){let{isDataRoute:e}=R.useContext(Ls);return e?gF():eF()}function eF(){an($u(),"useNavigate() may be used only in the context of a <Router> component.");let e=R.useContext(qu),{basename:t,navigator:n}=R.useContext(ir),{matches:i}=R.useContext(Ls),{pathname:s}=Ha(),r=JSON.stringify(vE(i)),a=R.useRef(!1);return p2(()=>{a.current=!0}),R.useCallback((u,d={})=>{if(Zs(a.current,f2),!a.current)return;if(typeof u=="number"){n.go(u);return}let f=bE(u,JSON.parse(r),s,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:wo([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,r,s,e])}var nF=R.createContext(null);function iF(e){let t=R.useContext(Ls).outlet;return t&&R.createElement(nF.Provider,{value:e},t)}function sF(){let{matches:e}=R.useContext(Ls),t=e[e.length-1];return t?t.params:{}}function Bf(e,{relative:t}={}){let{matches:n}=R.useContext(Ls),{pathname:i}=Ha(),s=JSON.stringify(vE(n));return R.useMemo(()=>bE(e,JSON.parse(s),i,t==="path"),[e,s,i,t])}function rF(e,t){return m2(e,t)}function m2(e,t,n,i){var k;an($u(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:r}=R.useContext(ir),{matches:a}=R.useContext(Ls),c=a[a.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let M=m&&m.path||"";g2(d,!m||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let y=Ha(),v;if(t){let M=typeof t=="string"?Hu(t):t;an(f==="/"||((k=M.pathname)==null?void 0:k.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${M.pathname}" was given in the \`location\` prop.`),v=M}else v=y;let w=v.pathname||"/",T=w;if(f!=="/"){let M=f.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(M.length).join("/")}let x=!r&&n&&n.matches&&n.matches.length>0?n.matches:l2(e,{pathname:T});Zs(m||x!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Zs(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=uF(x&&x.map(M=>Object.assign({},M,{params:Object.assign({},u,M.params),pathname:wo([f,s.encodeLocation?s.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?f:wo([f,s.encodeLocation?s.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),a,n,i);return t&&C?R.createElement(Ff.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},C):C}function oF(){let e=mF(),t=Q3(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:r},"ErrorBoundary")," or"," ",R.createElement("code",{style:r},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:s},n):null,a)}var aF=R.createElement(oF,null),lF=class extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(Ls.Provider,{value:this.props.routeContext},R.createElement(wE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cF({routeContext:e,match:t,children:n}){let i=R.useContext(qu);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(Ls.Provider,{value:e},n)}function uF(e,t=[],n=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,r=n==null?void 0:n.errors;if(r!=null){let u=s.findIndex(d=>d.route.id&&(r==null?void 0:r[d.route.id])!==void 0);an(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,c=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:m}=n,y=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){a=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,d,f)=>{let m,y=!1,v=null,w=null;n&&(m=r&&d.route.id?r[d.route.id]:void 0,v=d.route.errorElement||aF,a&&(c<0&&f===0?(g2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):c===f&&(y=!0,w=d.route.hydrateFallbackElement||null)));let T=t.concat(s.slice(0,f+1)),x=()=>{let C;return m?C=v:y?C=w:d.route.Component?C=R.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,R.createElement(cF,{match:d,routeContext:{outlet:u,matches:T,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?R.createElement(lF,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:x(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):x()},null)}function EE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hF(e){let t=R.useContext(qu);return an(t,EE(e)),t}function dF(e){let t=R.useContext(Ky);return an(t,EE(e)),t}function fF(e){let t=R.useContext(Ls);return an(t,EE(e)),t}function TE(e){let t=fF(e),n=t.matches[t.matches.length-1];return an(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function pF(){return TE("useRouteId")}function mF(){var i;let e=R.useContext(wE),t=dF("useRouteError"),n=TE("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function gF(){let{router:e}=hF("useNavigate"),t=TE("useNavigate"),n=R.useRef(!1);return p2(()=>{n.current=!0}),R.useCallback(async(s,r={})=>{Zs(n.current,f2),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...r}))},[e,t])}var LR={};function g2(e,t,n){!t&&!LR[e]&&(LR[e]=!0,Zs(!1,n))}R.memo(yF);function yF({routes:e,future:t,state:n}){return m2(e,void 0,n,t)}function vg({to:e,replace:t,state:n,relative:i}){an($u(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=R.useContext(ir);Zs(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=R.useContext(Ls),{pathname:a}=Ha(),c=rc(),u=bE(e,vE(r),a,i==="path"),d=JSON.stringify(u);return R.useEffect(()=>{c(JSON.parse(d),{replace:t,state:n,relative:i})},[c,d,i,t,n]),null}function _F(e){return iF(e.context)}function $s(e){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vF({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:s,static:r=!1}){an(!$u(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:a,navigator:s,static:r,future:{}}),[a,s,r]);typeof n=="string"&&(n=Hu(n));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:y="default"}=n,v=R.useMemo(()=>{let w=Ao(u,a);return w==null?null:{location:{pathname:w,search:d,hash:f,state:m,key:y},navigationType:i}},[a,u,d,f,m,y,i]);return Zs(v!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:R.createElement(ir.Provider,{value:c},R.createElement(Ff.Provider,{children:t,value:v}))}function bF({children:e,location:t}){return rF(qb(e),t)}function qb(e,t=[]){let n=[];return R.Children.forEach(e,(i,s)=>{if(!R.isValidElement(i))return;let r=[...t,s];if(i.type===R.Fragment){n.push.apply(n,qb(i.props.children,r));return}an(i.type===$s,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=qb(i.props.children,r)),n.push(a)}),n}var bg="get",wg="application/x-www-form-urlencoded";function Yy(e){return e!=null&&typeof e.tagName=="string"}function wF(e){return Yy(e)&&e.tagName.toLowerCase()==="button"}function EF(e){return Yy(e)&&e.tagName.toLowerCase()==="form"}function TF(e){return Yy(e)&&e.tagName.toLowerCase()==="input"}function xF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function SF(e,t){return e.button===0&&(!t||t==="_self")&&!xF(e)}var Bm=null;function AF(){if(Bm===null)try{new FormData(document.createElement("form"),0),Bm=!1}catch{Bm=!0}return Bm}var CF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function B0(e){return e!=null&&!CF.has(e)?(Zs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wg}"`),null):e}function RF(e,t){let n,i,s,r,a;if(EF(e)){let c=e.getAttribute("action");i=c?Ao(c,t):null,n=e.getAttribute("method")||bg,s=B0(e.getAttribute("enctype"))||wg,r=new FormData(e)}else if(wF(e)||TF(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||c.getAttribute("action");if(i=u?Ao(u,t):null,n=e.getAttribute("formmethod")||c.getAttribute("method")||bg,s=B0(e.getAttribute("formenctype"))||B0(c.getAttribute("enctype"))||wg,r=new FormData(c,e),!AF()){let{name:d,type:f,value:m}=e;if(f==="image"){let y=d?`${d}.`:"";r.append(`${y}x`,"0"),r.append(`${y}y`,"0")}else d&&r.append(d,m)}}else{if(Yy(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=bg,i=null,s=wg,a=e}return r&&s==="text/plain"&&(a=r,r=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:r,body:a}}function xE(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function IF(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DF(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function MF(e,t,n){let i=await Promise.all(e.map(async s=>{let r=t.routes[s.route.id];if(r){let a=await IF(r,n);return a.links?a.links():[]}return[]}));return OF(i.flat(1).filter(DF).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function VR(e,t,n,i,s,r){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return r==="assets"?t.filter((u,d)=>a(u,d)||c(u,d)):r==="data"?t.filter((u,d)=>{var m;let f=i.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let y=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function NF(e,t,{includeHydrateFallback:n}={}){return kF(e.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function kF(e){return[...new Set(e)]}function PF(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function OF(e,t){let n=new Set;return new Set(t),e.reduce((i,s)=>{let r=JSON.stringify(PF(s));return n.has(r)||(n.add(r),i.push({key:r,link:s})),i},[])}function LF(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Ao(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function y2(){let e=R.useContext(qu);return xE(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function VF(){let e=R.useContext(Ky);return xE(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var SE=R.createContext(void 0);SE.displayName="FrameworkContext";function _2(){let e=R.useContext(SE);return xE(e,"You must render this element inside a <HydratedRouter> element"),e}function jF(e,t){let n=R.useContext(SE),[i,s]=R.useState(!1),[r,a]=R.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:m}=t,y=R.useRef(null);R.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let T=C=>{C.forEach(k=>{a(k.isIntersecting)})},x=new IntersectionObserver(T,{threshold:.5});return y.current&&x.observe(y.current),()=>{x.disconnect()}}},[e]),R.useEffect(()=>{if(i){let T=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(T)}}},[i]);let v=()=>{s(!0)},w=()=>{s(!1),a(!1)};return n?e!=="intent"?[r,y,{}]:[r,y,{onFocus:ud(c,v),onBlur:ud(u,w),onMouseEnter:ud(d,v),onMouseLeave:ud(f,w),onTouchStart:ud(m,v)}]:[!1,y,{}]}function ud(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function UF({page:e,...t}){let{router:n}=y2(),i=R.useMemo(()=>l2(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?R.createElement(BF,{page:e,matches:i,...t}):null}function FF(e){let{manifest:t,routeModules:n}=_2(),[i,s]=R.useState([]);return R.useEffect(()=>{let r=!1;return MF(e,t,n).then(a=>{r||s(a)}),()=>{r=!0}},[e,t,n]),i}function BF({page:e,matches:t,...n}){let i=Ha(),{manifest:s,routeModules:r}=_2(),{basename:a}=y2(),{loaderData:c,matches:u}=VF(),d=R.useMemo(()=>VR(e,t,u,s,i,"data"),[e,t,u,s,i]),f=R.useMemo(()=>VR(e,t,u,s,i,"assets"),[e,t,u,s,i]),m=R.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let w=new Set,T=!1;if(t.forEach(C=>{var M;let k=s.routes[C.route.id];!k||!k.hasLoader||(!d.some(z=>z.route.id===C.route.id)&&C.route.id in c&&((M=r[C.route.id])!=null&&M.shouldRevalidate)||k.hasClientLoader?T=!0:w.add(C.route.id))}),w.size===0)return[];let x=LF(e,a);return T&&w.size>0&&x.searchParams.set("_routes",t.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[x.pathname+x.search]},[a,c,i,s,d,t,e,r]),y=R.useMemo(()=>NF(f,s),[f,s]),v=FF(f);return R.createElement(R.Fragment,null,m.map(w=>R.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),y.map(w=>R.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),v.map(({key:w,link:T})=>R.createElement("link",{key:w,...T})))}function zF(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var v2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{v2&&(window.__reactRouterVersion="7.5.0")}catch{}function HF({basename:e,children:t,window:n}){let i=R.useRef();i.current==null&&(i.current=R3({window:n,v5Compat:!0}));let s=i.current,[r,a]=R.useState({action:s.action,location:s.location}),c=R.useCallback(u=>{R.startTransition(()=>a(u))},[a]);return R.useLayoutEffect(()=>s.listen(c),[s,c]),R.createElement(vF,{basename:e,children:t,location:r.location,navigationType:r.action,navigator:s})}var b2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AE=R.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:s,reloadDocument:r,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m,...y},v){let{basename:w}=R.useContext(ir),T=typeof d=="string"&&b2.test(d),x,C=!1;if(typeof d=="string"&&T&&(x=d,v2))try{let N=new URL(window.location.href),L=d.startsWith("//")?new URL(N.protocol+d):new URL(d),F=Ao(L.pathname,w);L.origin===N.origin&&F!=null?d=F+L.search+L.hash:C=!0}catch{Zs(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=tF(d,{relative:s}),[M,z,j]=jF(i,y),$=GF(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function O(N){t&&t(N),N.defaultPrevented||$(N)}let D=R.createElement("a",{...y,...j,href:x||k,onClick:C||r?t:O,ref:zF(v,z),target:u,"data-discover":!T&&n==="render"?"true":void 0});return M&&!T?R.createElement(R.Fragment,null,D,R.createElement(UF,{page:k})):D});AE.displayName="Link";var w2=R.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:s=!1,style:r,to:a,viewTransition:c,children:u,...d},f){let m=Bf(a,{relative:d.relative}),y=Ha(),v=R.useContext(Ky),{navigator:w,basename:T}=R.useContext(ir),x=v!=null&&XF(m)&&c===!0,C=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,k=y.pathname,M=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(k=k.toLowerCase(),M=M?M.toLowerCase():null,C=C.toLowerCase()),M&&T&&(M=Ao(M,T)||M);const z=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let j=k===C||!s&&k.startsWith(C)&&k.charAt(z)==="/",$=M!=null&&(M===C||!s&&M.startsWith(C)&&M.charAt(C.length)==="/"),O={isActive:j,isPending:$,isTransitioning:x},D=j?t:void 0,N;typeof i=="function"?N=i(O):N=[i,j?"active":null,$?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let L=typeof r=="function"?r(O):r;return R.createElement(AE,{...d,"aria-current":D,className:N,ref:f,style:L,to:a,viewTransition:c},typeof u=="function"?u(O):u)});w2.displayName="NavLink";var qF=R.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:s,state:r,method:a=bg,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:m,...y},v)=>{let w=YF(),T=QF(c,{relative:d}),x=a.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&b2.test(c),k=M=>{if(u&&u(M),M.defaultPrevented)return;M.preventDefault();let z=M.nativeEvent.submitter,j=(z==null?void 0:z.getAttribute("formmethod"))||a;w(z||M.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:s,state:r,relative:d,preventScrollReset:f,viewTransition:m})};return R.createElement("form",{ref:v,method:x,action:T,onSubmit:i?u:k,...y,"data-discover":!C&&e==="render"?"true":void 0})});qF.displayName="Form";function $F(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E2(e){let t=R.useContext(qu);return an(t,$F(e)),t}function GF(e,{target:t,replace:n,state:i,preventScrollReset:s,relative:r,viewTransition:a}={}){let c=rc(),u=Ha(),d=Bf(e,{relative:r});return R.useCallback(f=>{if(SF(f,t)){f.preventDefault();let m=n!==void 0?n:of(u)===of(d);c(e,{replace:m,state:i,preventScrollReset:s,relative:r,viewTransition:a})}},[u,c,d,n,i,t,e,s,r,a])}var WF=0,KF=()=>`__${String(++WF)}__`;function YF(){let{router:e}=E2("useSubmit"),{basename:t}=R.useContext(ir),n=pF();return R.useCallback(async(i,s={})=>{let{action:r,method:a,encType:c,formData:u,body:d}=RF(i,t);if(s.navigate===!1){let f=s.fetcherKey||KF();await e.fetch(f,n,s.action||r,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||a,formEncType:s.encType||c,flushSync:s.flushSync})}else await e.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||a,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function QF(e,{relative:t}={}){let{basename:n}=R.useContext(ir),i=R.useContext(Ls);an(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...Bf(e||".",{relative:t})},a=Ha();if(e==null){r.search=a.search;let c=new URLSearchParams(r.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();r.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(r.pathname=r.pathname==="/"?n:wo([n,r.pathname])),of(r)}function XF(e,t={}){let n=R.useContext(d2);an(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=E2("useViewTransitionState"),s=Bf(e,{relative:t.relative});if(!n.isTransitioning)return!1;let r=Ao(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Ao(n.nextLocation.pathname,i)||n.nextLocation.pathname;return $g(s.pathname,a)!=null||$g(s.pathname,r)!=null}new TextEncoder;var wd=a2();const ZF=()=>{};var jR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt=function(e,t){if(!e)throw Gu(t)},Gu=function(e){return new Error("Firebase Database ("+T2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},JF=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],c=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},CE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,c=a?e[s+1]:0,u=s+2<e.length,d=u?e[s+2]:0,f=r>>2,m=(r&3)<<4|c>>4;let y=(c&15)<<2|d>>6,v=d&63;u||(v=64,a||(y=64)),i.push(n[f],n[m],n[y],n[v])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(x2(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):JF(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],c=s<e.length?n[e.charAt(s)]:0;++s;const d=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||c==null||d==null||m==null)throw new tB;const y=r<<2|c>>4;if(i.push(y),d!==64){const v=c<<4&240|d>>2;if(i.push(v),m!==64){const w=d<<6&192|m;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class tB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S2=function(e){const t=x2(e);return CE.encodeByteArray(t,!0)},Gg=function(e){return S2(e).replace(/\./g,"")},Wg=function(e){try{return CE.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(e){return A2(void 0,e)}function A2(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!nB(n)||(e[n]=A2(e[n],t[n]));return e}function nB(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=()=>iB().__FIREBASE_DEFAULTS__,rB=()=>{if(typeof process>"u"||typeof jR>"u")return;const e=jR.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},oB=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Wg(e[1]);return t&&JSON.parse(t)},Qy=()=>{try{return ZF()||sB()||rB()||oB()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},C2=e=>{var t,n;return(n=(t=Qy())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},RE=e=>{const t=C2(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},R2=()=>{var e;return(e=Qy())===null||e===void 0?void 0:e.config},I2=e=>{var t;return(t=Qy())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Gg(JSON.stringify(n)),Gg(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ME(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Si())}function aB(){var e;const t=(e=Qy())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NE(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function D2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cB(){const e=Si();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function uB(){return T2.NODE_ADMIN===!0}function hB(){return!aB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kE(){try{return typeof indexedDB=="object"}catch{return!1}}function PE(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}function M2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB="FirebaseError";class Vs extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=dB,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oc.prototype.create)}}class oc{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?fB(r,i):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Vs(s,c,i)}}function fB(e,t){return e.replace(pB,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const pB=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(e){return JSON.parse(e)}function ai(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=function(e){let t={},n={},i={},s="";try{const r=e.split(".");t=af(Wg(r[0])||""),n=af(Wg(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:i,signature:s}},mB=function(e){const t=N2(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},gB=function(e){const t=N2(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Iu(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function $b(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Kg(e,t,n){const i={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=t.call(n,e[s],s,e));return i}function Co(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(UR(r)&&UR(a)){if(!Co(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function UR(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Ed(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(r)}}),t}function Td(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const i=this.W_;if(typeof t=="string")for(let m=0;m<16;m++)i[m]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let m=0;m<16;m++)i[m]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let m=16;m<80;m++){const y=i[m-3]^i[m-8]^i[m-14]^i[m-16];i[m]=(y<<1|y>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],a=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,f;for(let m=0;m<80;m++){m<40?m<20?(d=c^r&(a^c),f=1518500249):(d=r^a^c,f=1859775393):m<60?(d=r&a|c&(r|a),f=2400959708):(d=r^a^c,f=3395469782);const y=(s<<5|s>>>27)+d+u+f+i[m]&4294967295;u=c,c=a,a=(r<<30|r>>>2)&4294967295,r=s,s=y}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let a=this.inbuf_;for(;s<n;){if(a===0)for(;s<=i;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<n;)if(r[a]=t.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(r),a=0;break}}else for(;s<n;)if(r[a]=t[s],++a,++s,a===this.blockSize){this.compress_(r),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)t[i]=this.chain_[s]>>r&255,++i;return t}}function _B(e,t){const n=new vB(e,t);return n.subscribe.bind(n)}class vB{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");bB(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=z0),s.error===void 0&&(s.error=z0),s.complete===void 0&&(s.complete=z0);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bB(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function z0(){}function wB(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,bt(i<e.length,"Surrogate pair missing trail surrogate.");const a=e.charCodeAt(i)-56320;s=65536+(r<<10)+a}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Xy=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=1e3,xB=2,SB=4*60*60*1e3,AB=.5;function FR(e,t=TB,n=xB){const i=t*Math.pow(n,e),s=Math.round(AB*i*(Math.random()-.5)*2);return Math.min(SB,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(e){return e&&e._delegate?e._delegate:e}class ds{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new IE;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(IB(t))try{this.getOrInitializeService({instanceIdentifier:Dl})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Dl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Dl){return this.instances.has(t)}getOptions(t=Dl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);i===c&&a.resolve(s)}return s}onInit(t,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(t),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&t(a,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:RB(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Dl){return this.component?this.component.multipleInstances?t:Dl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RB(e){return e===Dl?void 0:e}function IB(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new CB(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(le||(le={}));const MB={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},NB=le.INFO,kB={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},PB=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=kB[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class zf{constructor(t){this.name=t,this._logLevel=NB,this._logHandler=PB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in le))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?MB[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...t),this._logHandler(this,le.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...t),this._logHandler(this,le.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,le.INFO,...t),this._logHandler(this,le.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,le.WARN,...t),this._logHandler(this,le.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...t),this._logHandler(this,le.ERROR,...t)}}const OB=(e,t)=>t.some(n=>e instanceof n);let BR,zR;function LB(){return BR||(BR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VB(){return zR||(zR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k2=new WeakMap,Gb=new WeakMap,P2=new WeakMap,H0=new WeakMap,OE=new WeakMap;function jB(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(Sa(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&k2.set(n,e)}).catch(()=>{}),OE.set(t,e),t}function UB(e){if(Gb.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});Gb.set(e,t)}let Wb={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Gb.get(e);if(t==="objectStoreNames")return e.objectStoreNames||P2.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sa(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function FB(e){Wb=e(Wb)}function BB(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(q0(this),t,...n);return P2.set(i,t.sort?t.sort():[t]),Sa(i)}:VB().includes(e)?function(...t){return e.apply(q0(this),t),Sa(k2.get(this))}:function(...t){return Sa(e.apply(q0(this),t))}}function zB(e){return typeof e=="function"?BB(e):(e instanceof IDBTransaction&&UB(e),OB(e,LB())?new Proxy(e,Wb):e)}function Sa(e){if(e instanceof IDBRequest)return jB(e);if(H0.has(e))return H0.get(e);const t=zB(e);return t!==e&&(H0.set(e,t),OE.set(t,e)),t}const q0=e=>OE.get(e);function O2(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),c=Sa(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Sa(a.result),u.oldVersion,u.newVersion,Sa(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const HB=["get","getKey","getAll","getAllKeys","count"],qB=["put","add","delete","clear"],$0=new Map;function HR(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if($0.get(t))return $0.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=qB.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||HB.includes(n)))return;const r=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return $0.set(t,r),r}FB(e=>({...e,get:(t,n,i)=>HR(t,n)||e.get(t,n,i),has:(t,n)=>!!HR(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GB(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function GB(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Kb="@firebase/app",qR="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new zf("@firebase/app"),WB="@firebase/app-compat",KB="@firebase/analytics-compat",YB="@firebase/analytics",QB="@firebase/app-check-compat",XB="@firebase/app-check",ZB="@firebase/auth",JB="@firebase/auth-compat",t6="@firebase/database",e6="@firebase/data-connect",n6="@firebase/database-compat",i6="@firebase/functions",s6="@firebase/functions-compat",r6="@firebase/installations",o6="@firebase/installations-compat",a6="@firebase/messaging",l6="@firebase/messaging-compat",c6="@firebase/performance",u6="@firebase/performance-compat",h6="@firebase/remote-config",d6="@firebase/remote-config-compat",f6="@firebase/storage",p6="@firebase/storage-compat",m6="@firebase/firestore",g6="@firebase/vertexai",y6="@firebase/firestore-compat",_6="firebase",v6="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="[DEFAULT]",b6={[Kb]:"fire-core",[WB]:"fire-core-compat",[YB]:"fire-analytics",[KB]:"fire-analytics-compat",[XB]:"fire-app-check",[QB]:"fire-app-check-compat",[ZB]:"fire-auth",[JB]:"fire-auth-compat",[t6]:"fire-rtdb",[e6]:"fire-data-connect",[n6]:"fire-rtdb-compat",[i6]:"fire-fn",[s6]:"fire-fn-compat",[r6]:"fire-iid",[o6]:"fire-iid-compat",[a6]:"fire-fcm",[l6]:"fire-fcm-compat",[c6]:"fire-perf",[u6]:"fire-perf-compat",[h6]:"fire-rc",[d6]:"fire-rc-compat",[f6]:"fire-gcs",[p6]:"fire-gcs-compat",[m6]:"fire-fst",[y6]:"fire-fst-compat",[g6]:"fire-vertex","fire-js":"fire-js",[_6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=new Map,w6=new Map,Qb=new Map;function $R(e,t){try{e.container.addComponent(t)}catch(n){Ro.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ks(e){const t=e.name;if(Qb.has(t))return Ro.debug(`There were multiple attempts to register component ${t}.`),!1;Qb.set(t,e);for(const n of Yg.values())$R(n,e);for(const n of w6.values())$R(n,e);return!0}function Lo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Bi(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Aa=new oc("app","Firebase",E6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=v6;function L2(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Yb,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw Aa.create("bad-app-name",{appName:String(s)});if(n||(n=R2()),!n)throw Aa.create("no-options");const r=Yg.get(s);if(r){if(Co(n,r.options)&&Co(i,r.config))return r;throw Aa.create("duplicate-app",{appName:s})}const a=new DB(s);for(const u of Qb.values())a.addComponent(u);const c=new T6(n,i,a);return Yg.set(s,c),c}function Hf(e=Yb){const t=Yg.get(e);if(!t&&e===Yb&&R2())return L2();if(!t)throw Aa.create("no-app",{appName:e});return t}function Ti(e,t,n){var i;let s=(i=b6[e])!==null&&i!==void 0?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const c=[`Unable to register library "${s}" with version "${t}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&c.push("and"),a&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ro.warn(c.join(" "));return}ks(new ds(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="firebase-heartbeat-database",S6=1,lf="firebase-heartbeat-store";let G0=null;function V2(){return G0||(G0=O2(x6,S6,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(lf)}catch(n){console.warn(n)}}}}).catch(e=>{throw Aa.create("idb-open",{originalErrorMessage:e.message})})),G0}async function A6(e){try{const n=(await V2()).transaction(lf),i=await n.objectStore(lf).get(j2(e));return await n.done,i}catch(t){if(t instanceof Vs)Ro.warn(t.message);else{const n=Aa.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ro.warn(n.message)}}}async function GR(e,t){try{const i=(await V2()).transaction(lf,"readwrite");await i.objectStore(lf).put(t,j2(e)),await i.done}catch(n){if(n instanceof Vs)Ro.warn(n.message);else{const i=Aa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ro.warn(i.message)}}}function j2(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=1024,R6=30;class I6{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M6(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=WR();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>R6){const a=N6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ro.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=WR(),{heartbeatsToSend:i,unsentEntries:s}=D6(this._heartbeatsCache.heartbeats),r=Gg(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Ro.warn(n),""}}}function WR(){return new Date().toISOString().substring(0,10)}function D6(e,t=C6){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),KR(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),KR(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class M6{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kE()?PE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await A6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return GR(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return GR(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function KR(e){return Gg(JSON.stringify({version:2,heartbeats:e})).length}function N6(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(e){ks(new ds("platform-logger",t=>new $B(t),"PRIVATE")),ks(new ds("heartbeat",t=>new I6(t),"PRIVATE")),Ti(Kb,qR,e),Ti(Kb,qR,"esm2017"),Ti("fire-js","")}k6("");function LE(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function U2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P6=U2,F2=new oc("auth","Firebase",U2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg=new zf("@firebase/auth");function O6(e,...t){Qg.logLevel<=le.WARN&&Qg.warn(`Auth (${qa}): ${e}`,...t)}function Eg(e,...t){Qg.logLevel<=le.ERROR&&Qg.error(`Auth (${qa}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(e,...t){throw VE(e,...t)}function Sr(e,...t){return VE(e,...t)}function B2(e,t,n){const i=Object.assign(Object.assign({},P6()),{[t]:n});return new oc("auth","Firebase",i).create(t,{appName:e.name})}function Eo(e){return B2(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VE(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return F2.create(e,...t)}function jt(e,t,...n){if(!e)throw VE(t,...n)}function go(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Eg(t),new Error(t)}function Io(e,t){e||go(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function L6(){return YR()==="http:"||YR()==="https:"}function YR(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L6()||NE()||"connection"in navigator)?navigator.onLine:!0}function j6(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t,n){this.shortDelay=t,this.longDelay=n,Io(n>t,"Short delay should be less than long delay!"),this.isMobile=ME()||D2()}get(){return V6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(e,t){Io(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B6=new qf(3e4,6e4);function Vo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function jo(e,t,n,i,s={}){return H2(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const c=Wu(Object.assign({key:e.config.apiKey},a)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const d=Object.assign({method:t,headers:u},r);return lB()||(d.referrerPolicy="no-referrer"),z2.fetch()(await q2(e,e.config.apiHost,n,c),d)})}async function H2(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},U6),t);try{const s=new H6(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw zm(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const c=r.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zm(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw zm(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw zm(e,"user-disabled",a);const f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw B2(e,f,d);Js(e,f)}}catch(s){if(s instanceof Vs)throw s;Js(e,"network-request-failed",{message:String(s)})}}async function $f(e,t,n,i,s={}){const r=await jo(e,t,n,i,s);return"mfaPendingCredential"in r&&Js(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function q2(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?jE(e.config,s):`${e.config.apiScheme}://${s}`;return F6.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function z6(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Sr(this.auth,"network-request-failed")),B6.get())})}}function zm(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Sr(e,t,i);return s.customData._tokenResponse=n,s}function QR(e){return e!==void 0&&e.enterprise!==void 0}class q6{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return z6(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $6(e,t){return jo(e,"GET","/v2/recaptchaConfig",Vo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(e,t){return jo(e,"POST","/v1/accounts:delete",t)}async function Xg(e,t){return jo(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function W6(e,t=!1){const n=Ze(e),i=await n.getIdToken(t),s=UE(i);jt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Vd(W0(s.auth_time)),issuedAtTime:Vd(W0(s.iat)),expirationTime:Vd(W0(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function W0(e){return Number(e)*1e3}function UE(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Eg("JWT malformed, contained fewer than 3 sections"),null;try{const s=Wg(n);return s?JSON.parse(s):(Eg("Failed to decode base64 JWT payload"),null)}catch(s){return Eg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function XR(e){const t=UE(e);return jt(t,"internal-error"),jt(typeof t.exp<"u","internal-error"),jt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cf(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Vs&&K6(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function K6({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vd(this.lastLoginAt),this.creationTime=Vd(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zg(e){var t;const n=e.auth,i=await e.getIdToken(),s=await cf(e,Xg(n,{idToken:i}));jt(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const a=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?$2(r.providerUserInfo):[],c=X6(e.providerData,a),u=e.isAnonymous,d=!(e.email&&r.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new Zb(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(e,m)}async function Q6(e){const t=Ze(e);await Zg(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function X6(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function $2(e){return e.map(t=>{var{providerId:n}=t,i=LE(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(e,t){const n=await H2(e,{},async()=>{const i=Wu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await q2(e,s,"/v1/token",`key=${r}`),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",z2.fetch()(a,{method:"POST",headers:c,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J6(e,t){return jo(e,"POST","/v2/accounts:revokeToken",Vo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){jt(t.idToken,"internal-error"),jt(typeof t.idToken<"u","internal-error"),jt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):XR(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){jt(t.length!==0,"internal-error");const n=XR(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(jt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await Z6(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new bu;return i&&(jt(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(jt(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(jt(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new bu,this.toJSON())}_performRefresh(){return go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(e,t){jt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ks{constructor(t){var{uid:n,auth:i,stsTokenManager:s}=t,r=LE(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Zb(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await cf(this,this.stsTokenManager.getToken(this.auth,t));return jt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return W6(this,t)}reload(){return Q6(this)}_assign(t){this!==t&&(jt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Ks(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Zg(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bi(this.auth.app))return Promise.reject(Eo(this.auth));const t=await this.getIdToken();return await cf(this,G6(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,s,r,a,c,u,d,f;const m=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,v=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,w=(a=n.photoURL)!==null&&a!==void 0?a:void 0,T=(c=n.tenantId)!==null&&c!==void 0?c:void 0,x=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,C=(d=n.createdAt)!==null&&d!==void 0?d:void 0,k=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:M,emailVerified:z,isAnonymous:j,providerData:$,stsTokenManager:O}=n;jt(M&&O,t,"internal-error");const D=bu.fromJSON(this.name,O);jt(typeof M=="string",t,"internal-error"),ua(m,t.name),ua(y,t.name),jt(typeof z=="boolean",t,"internal-error"),jt(typeof j=="boolean",t,"internal-error"),ua(v,t.name),ua(w,t.name),ua(T,t.name),ua(x,t.name),ua(C,t.name),ua(k,t.name);const N=new Ks({uid:M,auth:t,email:y,emailVerified:z,displayName:m,isAnonymous:j,photoURL:w,phoneNumber:v,tenantId:T,stsTokenManager:D,createdAt:C,lastLoginAt:k});return $&&Array.isArray($)&&(N.providerData=$.map(L=>Object.assign({},L))),x&&(N._redirectEventId=x),N}static async _fromIdTokenResponse(t,n,i=!1){const s=new bu;s.updateFromServerResponse(n);const r=new Ks({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Zg(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];jt(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?$2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),c=new bu;c.updateFromIdToken(i);const u=new Ks({uid:s.localId,auth:t,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Zb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new Map;function yo(e){Io(e instanceof Function,"Expected a class definition");let t=ZR.get(e);return t?(Io(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ZR.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}G2.type="NONE";const JR=G2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(e,t,n){return`firebase:${e}:${t}:${n}`}class wu{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Tg(this.userKey,s.apiKey,r),this.fullPersistenceKey=Tg("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Xg(this.auth,{idToken:t}).catch(()=>{});return n?Ks._fromGetAccountInfoResponse(this.auth,n,t):null}return Ks._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new wu(yo(JR),t,i);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let r=s[0]||yo(JR);const a=Tg(i,t.config.apiKey,t.name);let c=null;for(const d of n)try{const f=await d._get(a);if(f){let m;if(typeof f=="string"){const y=await Xg(t,{idToken:f}).catch(()=>{});if(!y)break;m=await Ks._fromGetAccountInfoResponse(t,y,f)}else m=Ks._fromJSON(t,f);d!==r&&(c=m),r=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new wu(r,t,i):(r=u[0],c&&await r._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==r)try{await d._remove(a)}catch{}})),new wu(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Q2(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(W2(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Z2(t))return"Blackberry";if(J2(t))return"Webos";if(K2(t))return"Safari";if((t.includes("chrome/")||Y2(t))&&!t.includes("edge/"))return"Chrome";if(X2(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function W2(e=Si()){return/firefox\//i.test(e)}function K2(e=Si()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Y2(e=Si()){return/crios\//i.test(e)}function Q2(e=Si()){return/iemobile/i.test(e)}function X2(e=Si()){return/android/i.test(e)}function Z2(e=Si()){return/blackberry/i.test(e)}function J2(e=Si()){return/webos/i.test(e)}function FE(e=Si()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function t5(e=Si()){var t;return FE(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function e5(){return cB()&&document.documentMode===10}function tk(e=Si()){return FE(e)||X2(e)||J2(e)||Z2(e)||/windows phone/i.test(e)||Q2(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(e,t=[]){let n;switch(e){case"Browser":n=t1(Si());break;case"Worker":n=`${t1(Si())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${qa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,c)=>{try{const u=t(r);a(u)}catch(u){c(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(e,t={}){return jo(e,"GET","/v2/passwordPolicy",Vo(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=6;class r5{constructor(t){var n,i,s,r;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:s5,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,i,s,r,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsUppercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e1(this),this.idTokenSubscription=new e1(this),this.beforeStateQueue=new n5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=yo(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await wu.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Xg(this,{idToken:t}),i=await Ks._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Bi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Zg(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=j6()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Bi(this.app))return Promise.reject(Eo(this));const n=t?Ze(t):null;return n&&jt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&jt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Bi(this.app)?Promise.reject(Eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Bi(this.app)?Promise.reject(Eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yo(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await i5(this),n=new r5(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new oc("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await J6(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&yo(t)||this._popupRedirectResolver;jt(n,this,"argument-error"),this.redirectPersistenceManager=await wu.create(this,[yo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(jt(c,this,"internal-error"),c.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ek(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var t;if(Bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&O6(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $a(e){return Ze(e)}class e1{constructor(t){this.auth=t,this.observer=null,this.addObserver=_B(n=>this.observer=n)}get next(){return jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a5(e){Zy=e}function nk(e){return Zy.loadJS(e)}function l5(){return Zy.recaptchaEnterpriseScript}function c5(){return Zy.gapiScript}function u5(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class h5{constructor(){this.enterprise=new d5}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class d5{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const f5="recaptcha-enterprise",ik="NO_RECAPTCHA";class p5{constructor(t){this.type=f5,this.auth=$a(t)}async verify(t="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,c)=>{$6(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new q6(u);return r.tenantId==null?r._agentRecaptchaConfig=d:r._tenantRecaptchaConfigs[r.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(r,a,c){const u=window.grecaptcha;QR(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:t}).then(d=>{a(d)}).catch(()=>{a(ik)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new h5().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(c=>{if(!n&&QR(window.grecaptcha))s(c,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=l5();u.length!==0&&(u+=c),nk(u).then(()=>{s(c,r,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function n1(e,t,n,i=!1,s=!1){const r=new p5(e);let a;if(s)a=ik;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const c=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Jg(e,t,n,i,s){var r;if(!((r=e._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await n1(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await n1(e,t,n,n==="getOobCode");return i(e,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(e,t){const n=Lo(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Co(r,t??{}))return s;Js(s,"already-initialized")}return n.initialize({options:t})}function g5(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(yo);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function y5(e,t,n){const i=$a(e);jt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=sk(t),{host:a,port:c}=_5(t),u=c===null?"":`:${c}`,d={url:`${r}//${a}${u}/`},f=Object.freeze({host:a,port:c,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){jt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),jt(Co(d,i.config.emulator)&&Co(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,v5()}function sk(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function _5(e){const t=sk(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:i1(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:i1(a)}}}function i1(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function v5(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return go("not implemented")}_getIdTokenResponse(t){return go("not implemented")}_linkToIdToken(t,n){return go("not implemented")}_getReauthenticationResolver(t){return go("not implemented")}}async function b5(e,t){return jo(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(e,t){return $f(e,"POST","/v1/accounts:signInWithPassword",Vo(e,t))}async function E5(e,t){return jo(e,"POST","/v1/accounts:sendOobCode",Vo(e,t))}async function T5(e,t){return E5(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x5(e,t){return $f(e,"POST","/v1/accounts:signInWithEmailLink",Vo(e,t))}async function S5(e,t){return $f(e,"POST","/v1/accounts:signInWithEmailLink",Vo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends BE{constructor(t,n,i,s=null){super("password",i),this._email=t,this._password=n,this._tenantId=s}static _fromEmailAndPassword(t,n){return new uf(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new uf(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(t,n,"signInWithPassword",w5);case"emailLink":return x5(t,{email:this._email,oobCode:this._password});default:Js(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(t,i,"signUpPassword",b5);case"emailLink":return S5(t,{idToken:n,email:this._email,oobCode:this._password});default:Js(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(e,t){return $f(e,"POST","/v1/accounts:signInWithIdp",Vo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="http://localhost";class Wl extends BE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Wl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Js("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=n,r=LE(n,["providerId","signInMethod"]);if(!i||!s)return null;const a=new Wl(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return Eu(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Eu(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Eu(t,n)}buildRequest(){const t={requestUri:A5,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Wu(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R5(e){const t=Ed(Td(e)).link,n=t?Ed(Td(t)).deep_link_id:null,i=Ed(Td(e)).deep_link_id;return(i?Ed(Td(i)).link:null)||i||n||t||e}class zE{constructor(t){var n,i,s,r,a,c;const u=Ed(Td(t)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(i=u.oobCode)!==null&&i!==void 0?i:null,m=C5((s=u.mode)!==null&&s!==void 0?s:null);jt(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(r=u.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const n=R5(t);try{return new zE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.providerId=Ku.PROVIDER_ID}static credential(t,n){return uf._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=zE.parseLink(n);return jt(i,"argument-error"),uf._fromEmailAndCode(t,i.code,i.tenantId)}}Ku.PROVIDER_ID="password";Ku.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ku.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends rk{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Gf{constructor(){super("facebook.com")}static credential(t){return Wl._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ma.credentialFromTaggedObject(t)}static credentialFromError(t){return ma.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ma.credential(t.oauthAccessToken)}catch{return null}}}ma.FACEBOOK_SIGN_IN_METHOD="facebook.com";ma.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends Gf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Wl._fromParams({providerId:ga.PROVIDER_ID,signInMethod:ga.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return ga.credentialFromTaggedObject(t)}static credentialFromError(t){return ga.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return ga.credential(n,i)}catch{return null}}}ga.GOOGLE_SIGN_IN_METHOD="google.com";ga.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Gf{constructor(){super("github.com")}static credential(t){return Wl._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ya.credentialFromTaggedObject(t)}static credentialFromError(t){return ya.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ya.credential(t.oauthAccessToken)}catch{return null}}}ya.GITHUB_SIGN_IN_METHOD="github.com";ya.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Gf{constructor(){super("twitter.com")}static credential(t,n){return Wl._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return _a.credentialFromTaggedObject(t)}static credentialFromError(t){return _a.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return _a.credential(n,i)}catch{return null}}}_a.TWITTER_SIGN_IN_METHOD="twitter.com";_a.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(e,t){return $f(e,"POST","/v1/accounts:signUp",Vo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await Ks._fromIdTokenResponse(t,i,s),a=s1(i);return new Kl({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=s1(i);return new Kl({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function s1(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends Vs{constructor(t,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,ty.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new ty(t,n,i,s)}}function ok(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?ty._fromErrorAndOperation(e,r,t,i):r})}async function D5(e,t,n=!1){const i=await cf(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Kl._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M5(e,t,n=!1){const{auth:i}=e;if(Bi(i.app))return Promise.reject(Eo(i));const s="reauthenticate";try{const r=await cf(e,ok(i,s,t,e),n);jt(r.idToken,i,"internal-error");const a=UE(r.idToken);jt(a,i,"internal-error");const{sub:c}=a;return jt(e.uid===c,i,"user-mismatch"),Kl._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Js(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(e,t,n=!1){if(Bi(e.app))return Promise.reject(Eo(e));const i="signIn",s=await ok(e,i,t),r=await Kl._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function N5(e,t){return ak($a(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(e){const t=$a(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function k5(e,t,n){const i=$a(e);await Jg(i,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",T5)}async function ck(e,t,n){if(Bi(e.app))return Promise.reject(Eo(e));const i=$a(e),a=await Jg(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",I5).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&lk(e),u}),c=await Kl._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}function uk(e,t,n){return Bi(e.app)?Promise.reject(Eo(e)):N5(Ze(e),Ku.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&lk(e),i})}function P5(e,t,n,i){return Ze(e).onIdTokenChanged(t,n,i)}function O5(e,t,n){return Ze(e).beforeAuthStateChanged(t,n)}function HE(e,t,n,i){return Ze(e).onAuthStateChanged(t,n,i)}function ey(e){return Ze(e).signOut()}const ny="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ny,"1"),this.storage.removeItem(ny),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=1e3,V5=10;class dk extends hk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);e5()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,V5):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},L5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}dk.type="LOCAL";const j5=dk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk extends hk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}fk.type="SESSION";const pk=fk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new Jy(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,r)),u=await U5(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((c,u)=>{const d=qE("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(f),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),c(y.data.response);break;default:clearTimeout(f),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function B5(e){Ar().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function z5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function H5(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function q5(){return mk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="firebaseLocalStorageDb",$5=1,iy="firebaseLocalStorage",yk="fbase_key";class Wf{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function t_(e,t){return e.transaction([iy],t?"readwrite":"readonly").objectStore(iy)}function G5(){const e=indexedDB.deleteDatabase(gk);return new Wf(e).toPromise()}function Jb(){const e=indexedDB.open(gk,$5);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(iy,{keyPath:yk})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(iy)?t(i):(i.close(),await G5(),t(await Jb()))})})}async function r1(e,t,n){const i=t_(e,!0).put({[yk]:t,value:n});return new Wf(i).toPromise()}async function W5(e,t){const n=t_(e,!1).get(t),i=await new Wf(n).toPromise();return i===void 0?null:i.value}function o1(e,t){const n=t_(e,!0).delete(t);return new Wf(n).toPromise()}const K5=800,Y5=3;class _k{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jb(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>Y5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jy._getInstance(q5()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await z5(),!this.activeServiceWorker)return;this.sender=new F5(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||H5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Jb();return await r1(t,ny,"1"),await o1(t,ny),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>r1(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>W5(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>o1(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=t_(s,!1).getAll();return new Wf(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_k.type="LOCAL";const Q5=_k;new qf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(e,t){return t?yo(t):(jt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends BE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Eu(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Eu(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Eu(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Z5(e){return ak(e.auth,new $E(e),e.bypassAuthState)}function J5(e){const{auth:t,user:n}=e;return jt(n,t,"internal-error"),M5(n,new $E(e),e.bypassAuthState)}async function tz(e){const{auth:t,user:n}=e;return jt(n,t,"internal-error"),D5(n,new $E(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:c}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Z5;case"linkViaPopup":case"linkViaRedirect":return tz;case"reauthViaPopup":case"reauthViaRedirect":return J5;default:Js(this.auth,"internal-error")}}resolve(t){Io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez=new qf(2e3,1e4);class uu extends vk{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,uu.currentPopupAction&&uu.currentPopupAction.cancel(),uu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return jt(t,this.auth,"internal-error"),t}async onExecution(){Io(this.filter.length===1,"Popup operations only handle one event");const t=qE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uu.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ez.get())};t()}}uu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="pendingRedirect",xg=new Map;class iz extends vk{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=xg.get(this.auth._key());if(!t){try{const i=await sz(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}xg.set(this.auth._key(),t)}return this.bypassAuthState||xg.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sz(e,t){const n=az(t),i=oz(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function rz(e,t){xg.set(e._key(),t)}function oz(e){return yo(e._redirectPersistence)}function az(e){return Tg(nz,e.config.apiKey,e.name)}async function lz(e,t,n=!1){if(Bi(e.app))return Promise.reject(Eo(e));const i=$a(e),s=X5(i,t),a=await new iz(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz=10*60*1e3;class uz{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!hz(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!bk(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Sr(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=cz&&this.cachedEventUids.clear(),this.cachedEventUids.has(a1(t))}saveEventToCache(t){this.cachedEventUids.add(a1(t)),this.lastProcessedEventTime=Date.now()}}function a1(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function bk({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function hz(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bk(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dz(e,t={}){return jo(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pz=/^https?/;async function mz(e){if(e.config.emulator)return;const{authorizedDomains:t}=await dz(e);for(const n of t)try{if(gz(n))return}catch{}Js(e,"unauthorized-domain")}function gz(e){const t=Xb(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!pz.test(n))return!1;if(fz.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz=new qf(3e4,6e4);function l1(){const e=Ar().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function _z(e){return new Promise((t,n)=>{var i,s,r;function a(){l1(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{l1(),n(Sr(e,"network-request-failed"))},timeout:yz.get()})}if(!((s=(i=Ar().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((r=Ar().gapi)===null||r===void 0)&&r.load)a();else{const c=u5("iframefcb");return Ar()[c]=()=>{gapi.load?a():n(Sr(e,"network-request-failed"))},nk(`${c5()}?onload=${c}`).catch(u=>n(u))}}).catch(t=>{throw Sg=null,t})}let Sg=null;function vz(e){return Sg=Sg||_z(e),Sg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz=new qf(5e3,15e3),wz="__/auth/iframe",Ez="emulator/auth/iframe",Tz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sz(e){const t=e.config;jt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?jE(t,Ez):`https://${e.config.authDomain}/${wz}`,i={apiKey:t.apiKey,appName:e.name,v:qa},s=xz.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Wu(i).slice(1)}`}async function Az(e){const t=await vz(e),n=Ar().gapi;return jt(n,e,"internal-error"),t.open({where:document.body,url:Sz(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tz,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Sr(e,"network-request-failed"),c=Ar().setTimeout(()=>{r(a)},bz.get());function u(){Ar().clearTimeout(c),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rz=500,Iz=600,Dz="_blank",Mz="http://localhost";class c1{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nz(e,t,n,i=Rz,s=Iz){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Cz),{width:i.toString(),height:s.toString(),top:r,left:a}),d=Si().toLowerCase();n&&(c=Y2(d)?Dz:n),W2(d)&&(t=t||Mz,u.scrollbars="yes");const f=Object.entries(u).reduce((y,[v,w])=>`${y}${v}=${w},`,"");if(t5(d)&&c!=="_self")return kz(t||"",c),new c1(null);const m=window.open(t||"",c,f);jt(m,e,"popup-blocked");try{m.focus()}catch{}return new c1(m)}function kz(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz="__/auth/handler",Oz="emulator/auth/handler",Lz=encodeURIComponent("fac");async function u1(e,t,n,i,s,r){jt(e.config.authDomain,e,"auth-domain-config-required"),jt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:qa,eventId:s};if(t instanceof rk){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",$b(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(t instanceof Gf){const f=t.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}e.tenantId&&(a.tid=e.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await e._getAppCheckToken(),d=u?`#${Lz}=${encodeURIComponent(u)}`:"";return`${Vz(e)}?${Wu(c).slice(1)}${d}`}function Vz({config:e}){return e.emulator?jE(e,Oz):`https://${e.authDomain}/${Pz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="webStorageSupport";class jz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pk,this._completeRedirectFn=lz,this._overrideRedirectResult=rz}async _openPopup(t,n,i,s){var r;Io((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await u1(t,n,i,Xb(),s);return Nz(t,a,qE())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await u1(t,n,i,Xb(),s);return B5(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Io(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await Az(t),i=new uz(t);return n.register("authEvent",s=>(jt(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(K0,{type:K0},s=>{var r;const a=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[K0];a!==void 0&&n(!!a),Js(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mz(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return tk()||K2()||FE()}}const Uz=jz;var h1="@firebase/auth",d1="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zz(e){ks(new ds("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;jt(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:c,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ek(e)},d=new o5(i,s,r,u);return g5(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),ks(new ds("auth-internal",t=>{const n=$a(t.getProvider("auth").getImmediate());return(i=>new Fz(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti(h1,d1,Bz(e)),Ti(h1,d1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz=5*60,qz=I2("authIdTokenMaxAge")||Hz;let f1=null;const $z=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>qz)return;const s=n==null?void 0:n.token;f1!==s&&(f1=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wk(e=Hf()){const t=Lo(e,"auth");if(t.isInitialized())return t.getImmediate();const n=m5(e,{popupRedirectResolver:Uz,persistence:[Q5,j5,pk]}),i=I2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=$z(r.toString());O5(n,a,()=>a(n.currentUser)),P5(n,c=>a(c))}}const s=C2("auth");return s&&y5(n,`http://${s}`),n}function Gz(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}a5({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=Sr("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",Gz().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zz("Browser");var p1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ca,Ek;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,D){function N(){}N.prototype=D.prototype,O.D=D.prototype,O.prototype=new N,O.prototype.constructor=O,O.C=function(L,F,H){for(var B=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)B[_t-2]=arguments[_t];return D.prototype[F].apply(L,B)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,D,N){N||(N=0);var L=Array(16);if(typeof D=="string")for(var F=0;16>F;++F)L[F]=D.charCodeAt(N++)|D.charCodeAt(N++)<<8|D.charCodeAt(N++)<<16|D.charCodeAt(N++)<<24;else for(F=0;16>F;++F)L[F]=D[N++]|D[N++]<<8|D[N++]<<16|D[N++]<<24;D=O.g[0],N=O.g[1],F=O.g[2];var H=O.g[3],B=D+(H^N&(F^H))+L[0]+3614090360&4294967295;D=N+(B<<7&4294967295|B>>>25),B=H+(F^D&(N^F))+L[1]+3905402710&4294967295,H=D+(B<<12&4294967295|B>>>20),B=F+(N^H&(D^N))+L[2]+606105819&4294967295,F=H+(B<<17&4294967295|B>>>15),B=N+(D^F&(H^D))+L[3]+3250441966&4294967295,N=F+(B<<22&4294967295|B>>>10),B=D+(H^N&(F^H))+L[4]+4118548399&4294967295,D=N+(B<<7&4294967295|B>>>25),B=H+(F^D&(N^F))+L[5]+1200080426&4294967295,H=D+(B<<12&4294967295|B>>>20),B=F+(N^H&(D^N))+L[6]+2821735955&4294967295,F=H+(B<<17&4294967295|B>>>15),B=N+(D^F&(H^D))+L[7]+4249261313&4294967295,N=F+(B<<22&4294967295|B>>>10),B=D+(H^N&(F^H))+L[8]+1770035416&4294967295,D=N+(B<<7&4294967295|B>>>25),B=H+(F^D&(N^F))+L[9]+2336552879&4294967295,H=D+(B<<12&4294967295|B>>>20),B=F+(N^H&(D^N))+L[10]+4294925233&4294967295,F=H+(B<<17&4294967295|B>>>15),B=N+(D^F&(H^D))+L[11]+2304563134&4294967295,N=F+(B<<22&4294967295|B>>>10),B=D+(H^N&(F^H))+L[12]+1804603682&4294967295,D=N+(B<<7&4294967295|B>>>25),B=H+(F^D&(N^F))+L[13]+4254626195&4294967295,H=D+(B<<12&4294967295|B>>>20),B=F+(N^H&(D^N))+L[14]+2792965006&4294967295,F=H+(B<<17&4294967295|B>>>15),B=N+(D^F&(H^D))+L[15]+1236535329&4294967295,N=F+(B<<22&4294967295|B>>>10),B=D+(F^H&(N^F))+L[1]+4129170786&4294967295,D=N+(B<<5&4294967295|B>>>27),B=H+(N^F&(D^N))+L[6]+3225465664&4294967295,H=D+(B<<9&4294967295|B>>>23),B=F+(D^N&(H^D))+L[11]+643717713&4294967295,F=H+(B<<14&4294967295|B>>>18),B=N+(H^D&(F^H))+L[0]+3921069994&4294967295,N=F+(B<<20&4294967295|B>>>12),B=D+(F^H&(N^F))+L[5]+3593408605&4294967295,D=N+(B<<5&4294967295|B>>>27),B=H+(N^F&(D^N))+L[10]+38016083&4294967295,H=D+(B<<9&4294967295|B>>>23),B=F+(D^N&(H^D))+L[15]+3634488961&4294967295,F=H+(B<<14&4294967295|B>>>18),B=N+(H^D&(F^H))+L[4]+3889429448&4294967295,N=F+(B<<20&4294967295|B>>>12),B=D+(F^H&(N^F))+L[9]+568446438&4294967295,D=N+(B<<5&4294967295|B>>>27),B=H+(N^F&(D^N))+L[14]+3275163606&4294967295,H=D+(B<<9&4294967295|B>>>23),B=F+(D^N&(H^D))+L[3]+4107603335&4294967295,F=H+(B<<14&4294967295|B>>>18),B=N+(H^D&(F^H))+L[8]+1163531501&4294967295,N=F+(B<<20&4294967295|B>>>12),B=D+(F^H&(N^F))+L[13]+2850285829&4294967295,D=N+(B<<5&4294967295|B>>>27),B=H+(N^F&(D^N))+L[2]+4243563512&4294967295,H=D+(B<<9&4294967295|B>>>23),B=F+(D^N&(H^D))+L[7]+1735328473&4294967295,F=H+(B<<14&4294967295|B>>>18),B=N+(H^D&(F^H))+L[12]+2368359562&4294967295,N=F+(B<<20&4294967295|B>>>12),B=D+(N^F^H)+L[5]+4294588738&4294967295,D=N+(B<<4&4294967295|B>>>28),B=H+(D^N^F)+L[8]+2272392833&4294967295,H=D+(B<<11&4294967295|B>>>21),B=F+(H^D^N)+L[11]+1839030562&4294967295,F=H+(B<<16&4294967295|B>>>16),B=N+(F^H^D)+L[14]+4259657740&4294967295,N=F+(B<<23&4294967295|B>>>9),B=D+(N^F^H)+L[1]+2763975236&4294967295,D=N+(B<<4&4294967295|B>>>28),B=H+(D^N^F)+L[4]+1272893353&4294967295,H=D+(B<<11&4294967295|B>>>21),B=F+(H^D^N)+L[7]+4139469664&4294967295,F=H+(B<<16&4294967295|B>>>16),B=N+(F^H^D)+L[10]+3200236656&4294967295,N=F+(B<<23&4294967295|B>>>9),B=D+(N^F^H)+L[13]+681279174&4294967295,D=N+(B<<4&4294967295|B>>>28),B=H+(D^N^F)+L[0]+3936430074&4294967295,H=D+(B<<11&4294967295|B>>>21),B=F+(H^D^N)+L[3]+3572445317&4294967295,F=H+(B<<16&4294967295|B>>>16),B=N+(F^H^D)+L[6]+76029189&4294967295,N=F+(B<<23&4294967295|B>>>9),B=D+(N^F^H)+L[9]+3654602809&4294967295,D=N+(B<<4&4294967295|B>>>28),B=H+(D^N^F)+L[12]+3873151461&4294967295,H=D+(B<<11&4294967295|B>>>21),B=F+(H^D^N)+L[15]+530742520&4294967295,F=H+(B<<16&4294967295|B>>>16),B=N+(F^H^D)+L[2]+3299628645&4294967295,N=F+(B<<23&4294967295|B>>>9),B=D+(F^(N|~H))+L[0]+4096336452&4294967295,D=N+(B<<6&4294967295|B>>>26),B=H+(N^(D|~F))+L[7]+1126891415&4294967295,H=D+(B<<10&4294967295|B>>>22),B=F+(D^(H|~N))+L[14]+2878612391&4294967295,F=H+(B<<15&4294967295|B>>>17),B=N+(H^(F|~D))+L[5]+4237533241&4294967295,N=F+(B<<21&4294967295|B>>>11),B=D+(F^(N|~H))+L[12]+1700485571&4294967295,D=N+(B<<6&4294967295|B>>>26),B=H+(N^(D|~F))+L[3]+2399980690&4294967295,H=D+(B<<10&4294967295|B>>>22),B=F+(D^(H|~N))+L[10]+4293915773&4294967295,F=H+(B<<15&4294967295|B>>>17),B=N+(H^(F|~D))+L[1]+2240044497&4294967295,N=F+(B<<21&4294967295|B>>>11),B=D+(F^(N|~H))+L[8]+1873313359&4294967295,D=N+(B<<6&4294967295|B>>>26),B=H+(N^(D|~F))+L[15]+4264355552&4294967295,H=D+(B<<10&4294967295|B>>>22),B=F+(D^(H|~N))+L[6]+2734768916&4294967295,F=H+(B<<15&4294967295|B>>>17),B=N+(H^(F|~D))+L[13]+1309151649&4294967295,N=F+(B<<21&4294967295|B>>>11),B=D+(F^(N|~H))+L[4]+4149444226&4294967295,D=N+(B<<6&4294967295|B>>>26),B=H+(N^(D|~F))+L[11]+3174756917&4294967295,H=D+(B<<10&4294967295|B>>>22),B=F+(D^(H|~N))+L[2]+718787259&4294967295,F=H+(B<<15&4294967295|B>>>17),B=N+(H^(F|~D))+L[9]+3951481745&4294967295,O.g[0]=O.g[0]+D&4294967295,O.g[1]=O.g[1]+(F+(B<<21&4294967295|B>>>11))&4294967295,O.g[2]=O.g[2]+F&4294967295,O.g[3]=O.g[3]+H&4294967295}i.prototype.u=function(O,D){D===void 0&&(D=O.length);for(var N=D-this.blockSize,L=this.B,F=this.h,H=0;H<D;){if(F==0)for(;H<=N;)s(this,O,H),H+=this.blockSize;if(typeof O=="string"){for(;H<D;)if(L[F++]=O.charCodeAt(H++),F==this.blockSize){s(this,L),F=0;break}}else for(;H<D;)if(L[F++]=O[H++],F==this.blockSize){s(this,L),F=0;break}}this.h=F,this.o+=D},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var D=1;D<O.length-8;++D)O[D]=0;var N=8*this.o;for(D=O.length-8;D<O.length;++D)O[D]=N&255,N/=256;for(this.u(O),O=Array(16),D=N=0;4>D;++D)for(var L=0;32>L;L+=8)O[N++]=this.g[D]>>>L&255;return O};function r(O,D){var N=c;return Object.prototype.hasOwnProperty.call(N,O)?N[O]:N[O]=D(O)}function a(O,D){this.h=D;for(var N=[],L=!0,F=O.length-1;0<=F;F--){var H=O[F]|0;L&&H==D||(N[F]=H,L=!1)}this.g=N}var c={};function u(O){return-128<=O&&128>O?r(O,function(D){return new a([D|0],0>D?-1:0)}):new a([O|0],0>O?-1:0)}function d(O){if(isNaN(O)||!isFinite(O))return m;if(0>O)return x(d(-O));for(var D=[],N=1,L=0;O>=N;L++)D[L]=O/N|0,N*=4294967296;return new a(D,0)}function f(O,D){if(O.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(O.charAt(0)=="-")return x(f(O.substring(1),D));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=d(Math.pow(D,8)),L=m,F=0;F<O.length;F+=8){var H=Math.min(8,O.length-F),B=parseInt(O.substring(F,F+H),D);8>H?(H=d(Math.pow(D,H)),L=L.j(H).add(d(B))):(L=L.j(N),L=L.add(d(B)))}return L}var m=u(0),y=u(1),v=u(16777216);e=a.prototype,e.m=function(){if(T(this))return-x(this).m();for(var O=0,D=1,N=0;N<this.g.length;N++){var L=this.i(N);O+=(0<=L?L:4294967296+L)*D,D*=4294967296}return O},e.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(w(this))return"0";if(T(this))return"-"+x(this).toString(O);for(var D=d(Math.pow(O,6)),N=this,L="";;){var F=z(N,D).g;N=C(N,F.j(D));var H=((0<N.g.length?N.g[0]:N.h)>>>0).toString(O);if(N=F,w(N))return H+L;for(;6>H.length;)H="0"+H;L=H+L}},e.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function w(O){if(O.h!=0)return!1;for(var D=0;D<O.g.length;D++)if(O.g[D]!=0)return!1;return!0}function T(O){return O.h==-1}e.l=function(O){return O=C(this,O),T(O)?-1:w(O)?0:1};function x(O){for(var D=O.g.length,N=[],L=0;L<D;L++)N[L]=~O.g[L];return new a(N,~O.h).add(y)}e.abs=function(){return T(this)?x(this):this},e.add=function(O){for(var D=Math.max(this.g.length,O.g.length),N=[],L=0,F=0;F<=D;F++){var H=L+(this.i(F)&65535)+(O.i(F)&65535),B=(H>>>16)+(this.i(F)>>>16)+(O.i(F)>>>16);L=B>>>16,H&=65535,B&=65535,N[F]=B<<16|H}return new a(N,N[N.length-1]&-2147483648?-1:0)};function C(O,D){return O.add(x(D))}e.j=function(O){if(w(this)||w(O))return m;if(T(this))return T(O)?x(this).j(x(O)):x(x(this).j(O));if(T(O))return x(this.j(x(O)));if(0>this.l(v)&&0>O.l(v))return d(this.m()*O.m());for(var D=this.g.length+O.g.length,N=[],L=0;L<2*D;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(var F=0;F<O.g.length;F++){var H=this.i(L)>>>16,B=this.i(L)&65535,_t=O.i(F)>>>16,ft=O.i(F)&65535;N[2*L+2*F]+=B*ft,k(N,2*L+2*F),N[2*L+2*F+1]+=H*ft,k(N,2*L+2*F+1),N[2*L+2*F+1]+=B*_t,k(N,2*L+2*F+1),N[2*L+2*F+2]+=H*_t,k(N,2*L+2*F+2)}for(L=0;L<D;L++)N[L]=N[2*L+1]<<16|N[2*L];for(L=D;L<2*D;L++)N[L]=0;return new a(N,0)};function k(O,D){for(;(O[D]&65535)!=O[D];)O[D+1]+=O[D]>>>16,O[D]&=65535,D++}function M(O,D){this.g=O,this.h=D}function z(O,D){if(w(D))throw Error("division by zero");if(w(O))return new M(m,m);if(T(O))return D=z(x(O),D),new M(x(D.g),x(D.h));if(T(D))return D=z(O,x(D)),new M(x(D.g),D.h);if(30<O.g.length){if(T(O)||T(D))throw Error("slowDivide_ only works with positive integers.");for(var N=y,L=D;0>=L.l(O);)N=j(N),L=j(L);var F=$(N,1),H=$(L,1);for(L=$(L,2),N=$(N,2);!w(L);){var B=H.add(L);0>=B.l(O)&&(F=F.add(N),H=B),L=$(L,1),N=$(N,1)}return D=C(O,F.j(D)),new M(F,D)}for(F=m;0<=O.l(D);){for(N=Math.max(1,Math.floor(O.m()/D.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),H=d(N),B=H.j(D);T(B)||0<B.l(O);)N-=L,H=d(N),B=H.j(D);w(H)&&(H=y),F=F.add(H),O=C(O,B)}return new M(F,O)}e.A=function(O){return z(this,O).h},e.and=function(O){for(var D=Math.max(this.g.length,O.g.length),N=[],L=0;L<D;L++)N[L]=this.i(L)&O.i(L);return new a(N,this.h&O.h)},e.or=function(O){for(var D=Math.max(this.g.length,O.g.length),N=[],L=0;L<D;L++)N[L]=this.i(L)|O.i(L);return new a(N,this.h|O.h)},e.xor=function(O){for(var D=Math.max(this.g.length,O.g.length),N=[],L=0;L<D;L++)N[L]=this.i(L)^O.i(L);return new a(N,this.h^O.h)};function j(O){for(var D=O.g.length+1,N=[],L=0;L<D;L++)N[L]=O.i(L)<<1|O.i(L-1)>>>31;return new a(N,O.h)}function $(O,D){var N=D>>5;D%=32;for(var L=O.g.length-N,F=[],H=0;H<L;H++)F[H]=0<D?O.i(H+N)>>>D|O.i(H+N+1)<<32-D:O.i(H+N);return new a(F,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Ek=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Ca=a}).apply(typeof p1<"u"?p1:typeof self<"u"?self:typeof window<"u"?window:{});var Hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tk,xd,xk,Ag,tw,Sk,Ak,Ck;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,E,A){return g==Array.prototype||g==Object.prototype||(g[E]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hm=="object"&&Hm];for(var E=0;E<g.length;++E){var A=g[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function s(g,E){if(E)t:{var A=i;g=g.split(".");for(var V=0;V<g.length-1;V++){var Y=g[V];if(!(Y in A))break t;A=A[Y]}g=g[g.length-1],V=A[g],E=E(V),E!=V&&E!=null&&t(A,g,{configurable:!0,writable:!0,value:E})}}function r(g,E){g instanceof String&&(g+="");var A=0,V=!1,Y={next:function(){if(!V&&A<g.length){var it=A++;return{value:E(it,g[it]),done:!1}}return V=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(g){return g||function(){return r(this,function(E,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(g){var E=typeof g;return E=E!="object"?E:g?Array.isArray(g)?"array":E:"null",E=="array"||E=="object"&&typeof g.length=="number"}function d(g){var E=typeof g;return E=="object"&&g!=null||E=="function"}function f(g,E,A){return g.call.apply(g.bind,arguments)}function m(g,E,A){if(!g)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,V),g.apply(E,Y)}}return function(){return g.apply(E,arguments)}}function y(g,E,A){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,y.apply(null,arguments)}function v(g,E){var A=Array.prototype.slice.call(arguments,1);return function(){var V=A.slice();return V.push.apply(V,arguments),g.apply(this,V)}}function w(g,E){function A(){}A.prototype=E.prototype,g.aa=E.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(V,Y,it){for(var mt=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)mt[ye-2]=arguments[ye];return E.prototype[Y].apply(V,mt)}}function T(g){const E=g.length;if(0<E){const A=Array(E);for(let V=0;V<E;V++)A[V]=g[V];return A}return[]}function x(g,E){for(let A=1;A<arguments.length;A++){const V=arguments[A];if(u(V)){const Y=g.length||0,it=V.length||0;g.length=Y+it;for(let mt=0;mt<it;mt++)g[Y+mt]=V[mt]}else g.push(V)}}class C{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function k(g){return/^[\s\xa0]*$/.test(g)}function M(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function z(g){return z[" "](g),g}z[" "]=function(){};var j=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function $(g,E,A){for(const V in g)E.call(A,g[V],V,g)}function O(g,E){for(const A in g)E.call(void 0,g[A],A,g)}function D(g){const E={};for(const A in g)E[A]=g[A];return E}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(g,E){let A,V;for(let Y=1;Y<arguments.length;Y++){V=arguments[Y];for(A in V)g[A]=V[A];for(let it=0;it<N.length;it++)A=N[it],Object.prototype.hasOwnProperty.call(V,A)&&(g[A]=V[A])}}function F(g){var E=1;g=g.split(":");const A=[];for(;0<E&&g.length;)A.push(g.shift()),E--;return g.length&&A.push(g.join(":")),A}function H(g){c.setTimeout(()=>{throw g},0)}function B(){var g=yt;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}class _t{constructor(){this.h=this.g=null}add(E,A){const V=ft.get();V.set(E,A),this.h?this.h.next=V:this.g=V,this.h=V}}var ft=new C(()=>new K,g=>g.reset());class K{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,dt=!1,yt=new _t,U=()=>{const g=c.Promise.resolve(void 0);tt=()=>{g.then(J)}};var J=()=>{for(var g;g=B();){try{g.h.call(g.g)}catch(A){H(A)}var E=ft;E.j(g),100>E.h&&(E.h++,g.next=E.g,E.g=g)}dt=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};c.addEventListener("test",A,E),c.removeEventListener("test",A,E)}catch{}return g}();function St(g,E){if(st.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,V=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget){if(j){t:{try{z(E.nodeName);var Y=!0;break t}catch{}Y=!1}Y||(E=null)}}else A=="mouseover"?E=g.fromElement:A=="mouseout"&&(E=g.toElement);this.relatedTarget=E,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:gt[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&St.aa.h.call(this)}}w(St,st);var gt={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),vt=0;function Vt(g,E,A,V,Y){this.listener=g,this.proxy=null,this.src=E,this.type=A,this.capture=!!V,this.ha=Y,this.key=++vt,this.da=this.fa=!1}function Mt(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function zt(g){this.src=g,this.g={},this.h=0}zt.prototype.add=function(g,E,A,V,Y){var it=g.toString();g=this.g[it],g||(g=this.g[it]=[],this.h++);var mt=At(g,E,V,Y);return-1<mt?(E=g[mt],A||(E.fa=!1)):(E=new Vt(E,this.src,it,!!V,Y),E.fa=A,g.push(E)),E};function Ct(g,E){var A=E.type;if(A in g.g){var V=g.g[A],Y=Array.prototype.indexOf.call(V,E,void 0),it;(it=0<=Y)&&Array.prototype.splice.call(V,Y,1),it&&(Mt(E),g.g[A].length==0&&(delete g.g[A],g.h--))}}function At(g,E,A,V){for(var Y=0;Y<g.length;++Y){var it=g[Y];if(!it.da&&it.listener==E&&it.capture==!!A&&it.ha==V)return Y}return-1}var me="closure_lm_"+(1e6*Math.random()|0),qe={};function Bn(g,E,A,V,Y){if(Array.isArray(E)){for(var it=0;it<E.length;it++)Bn(g,E[it],A,V,Y);return null}return A=jr(A),g&&g[ue]?g.K(E,A,d(V)?!!V.capture:!1,Y):Se(g,E,A,!1,V,Y)}function Se(g,E,A,V,Y,it){if(!E)throw Error("Invalid event type");var mt=d(Y)?!!Y.capture:!!Y,ye=Yi(g);if(ye||(g[me]=ye=new zt(g)),A=ye.add(E,A,V,mt,it),A.proxy)return A;if(V=ti(),A.proxy=V,V.src=g,V.listener=A,g.addEventListener)pt||(Y=mt),Y===void 0&&(Y=!1),g.addEventListener(E.toString(),V,Y);else if(g.attachEvent)g.attachEvent(kn(E.toString()),V);else if(g.addListener&&g.removeListener)g.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return A}function ti(){function g(A){return E.call(g.src,g.listener,A)}const E=Pi;return g}function Sn(g,E,A,V,Y){if(Array.isArray(E))for(var it=0;it<E.length;it++)Sn(g,E[it],A,V,Y);else V=d(V)?!!V.capture:!!V,A=jr(A),g&&g[ue]?(g=g.i,E=String(E).toString(),E in g.g&&(it=g.g[E],A=At(it,A,V,Y),-1<A&&(Mt(it[A]),Array.prototype.splice.call(it,A,1),it.length==0&&(delete g.g[E],g.h--)))):g&&(g=Yi(g))&&(E=g.g[E.toString()],g=-1,E&&(g=At(E,A,V,Y)),(A=-1<g?E[g]:null)&&ln(A))}function ln(g){if(typeof g!="number"&&g&&!g.da){var E=g.src;if(E&&E[ue])Ct(E.i,g);else{var A=g.type,V=g.proxy;E.removeEventListener?E.removeEventListener(A,V,g.capture):E.detachEvent?E.detachEvent(kn(A),V):E.addListener&&E.removeListener&&E.removeListener(V),(A=Yi(E))?(Ct(A,g),A.h==0&&(A.src=null,E[me]=null)):Mt(g)}}}function kn(g){return g in qe?qe[g]:qe[g]="on"+g}function Pi(g,E){if(g.da)g=!0;else{E=new St(E,this);var A=g.listener,V=g.ha||g.src;g.fa&&ln(g),g=A.call(V,E)}return g}function Yi(g){return g=g[me],g instanceof zt?g:null}var sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function jr(g){return typeof g=="function"?g:(g[sr]||(g[sr]=function(E){return g.handleEvent(E)}),g[sr])}function Ge(){ot.call(this),this.i=new zt(this),this.M=this,this.F=null}w(Ge,ot),Ge.prototype[ue]=!0,Ge.prototype.removeEventListener=function(g,E,A,V){Sn(this,g,E,A,V)};function Jt(g,E){var A,V=g.F;if(V)for(A=[];V;V=V.F)A.push(V);if(g=g.M,V=E.type||E,typeof E=="string")E=new st(E,g);else if(E instanceof st)E.target=E.target||g;else{var Y=E;E=new st(V,g),L(E,Y)}if(Y=!0,A)for(var it=A.length-1;0<=it;it--){var mt=E.g=A[it];Y=hn(mt,V,!0,E)&&Y}if(mt=E.g=g,Y=hn(mt,V,!0,E)&&Y,Y=hn(mt,V,!1,E)&&Y,A)for(it=0;it<A.length;it++)mt=E.g=A[it],Y=hn(mt,V,!1,E)&&Y}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var g=this.i,E;for(E in g.g){for(var A=g.g[E],V=0;V<A.length;V++)Mt(A[V]);delete g.g[E],g.h--}}this.F=null},Ge.prototype.K=function(g,E,A,V){return this.i.add(String(g),E,!1,A,V)},Ge.prototype.L=function(g,E,A,V){return this.i.add(String(g),E,!0,A,V)};function hn(g,E,A,V){if(E=g.i.g[String(E)],!E)return!0;E=E.concat();for(var Y=!0,it=0;it<E.length;++it){var mt=E[it];if(mt&&!mt.da&&mt.capture==A){var ye=mt.listener,On=mt.ha||mt.src;mt.fa&&Ct(g.i,mt),Y=ye.call(On,V)!==!1&&Y}}return Y&&!V.defaultPrevented}function We(g,E,A){if(typeof g=="function")A&&(g=y(g,A));else if(g&&typeof g.handleEvent=="function")g=y(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:c.setTimeout(g,E||0)}function js(g){g.g=We(()=>{g.g=null,g.i&&(g.i=!1,js(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}class Oi extends ot{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:js(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(g){ot.call(this),this.h=g,this.g={}}w(fs,ot);var Us=[];function Q(g){$(g.g,function(E,A){this.g.hasOwnProperty(A)&&ln(E)},g),g.g={}}fs.prototype.N=function(){fs.aa.N.call(this),Q(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=c.JSON.stringify,kt=c.JSON.parse,Ht=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function ge(){}ge.prototype.h=null;function Ae(g){return g.h||(g.h=g.i())}function Kt(){}var Xt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qt(){st.call(this,"d")}w(qt,st);function Ce(){st.call(this,"c")}w(Ce,st);var Nt={},yn=null;function Zt(){return yn=yn||new Ge}Nt.La="serverreachability";function Ut(g){st.call(this,Nt.La,g)}w(Ut,st);function se(g){const E=Zt();Jt(E,new Ut(E))}Nt.STAT_EVENT="statevent";function De(g,E){st.call(this,Nt.STAT_EVENT,g),this.stat=E}w(De,st);function Rt(g){const E=Zt();Jt(E,new De(E,g))}Nt.Ma="timingevent";function ne(g,E){st.call(this,Nt.Ma,g),this.size=E}w(ne,st);function he(g,E){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},E)}function Ke(){this.g=!0}Ke.prototype.xa=function(){this.g=!1};function Qi(g,E,A,V,Y,it){g.info(function(){if(g.g)if(it)for(var mt="",ye=it.split("&"),On=0;On<ye.length;On++){var _e=ye[On].split("=");if(1<_e.length){var Hn=_e[0];_e=_e[1];var Ln=Hn.split("_");mt=2<=Ln.length&&Ln[1]=="type"?mt+(Hn+"="+_e+"&"):mt+(Hn+"=redacted&")}}else mt=null;else mt=it;return"XMLHTTP REQ ("+V+") [attempt "+Y+"]: "+E+`
`+A+`
`+mt})}function ps(g,E,A,V,Y,it,mt){g.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+Y+"]: "+E+`
`+A+`
`+it+" "+mt})}function Pn(g,E,A,V){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+Xi(g,A)+(V?" "+V:"")})}function ms(g,E){g.info(function(){return"TIMEOUT: "+E})}Ke.prototype.info=function(){};function Xi(g,E){if(!g.g)return E;if(!E)return null;try{var A=JSON.parse(E);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var V=A[g];if(!(2>V.length)){var Y=V[1];if(Array.isArray(Y)&&!(1>Y.length)){var it=Y[0];if(it!="noop"&&it!="stop"&&it!="close")for(var mt=1;mt<Y.length;mt++)Y[mt]=""}}}}return ht(A)}catch{return E}}var Uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ur={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rr;function or(){}w(or,ge),or.prototype.g=function(){return new XMLHttpRequest},or.prototype.i=function(){return{}},rr=new or;function Ai(g,E,A,V){this.j=g,this.i=E,this.l=A,this.R=V||1,this.U=new fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _n}function _n(){this.i=null,this.g="",this.h=!1}var lh={},pc={};function Fs(g,E,A){g.L=1,g.v=nl(Zi(E)),g.m=A,g.P=!0,Fr(g,null)}function Fr(g,E){g.F=Date.now(),Za(g),g.A=Zi(g.v);var A=g.A,V=g.R;Array.isArray(V)||(V=[String(V)]),ph(A.i,"t",V),g.C=0,A=g.j.J,g.h=new _n,g.g=Vp(g.j,A?E:null,!g.m),0<g.O&&(g.M=new Oi(y(g.Y,g,g.g),g.O)),E=g.U,A=g.g,V=g.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Us[0]=Y.toString()),Y=Us);for(var it=0;it<Y.length;it++){var mt=Bn(A,Y[it],V||E.handleEvent,!1,E.h||E);if(!mt)break;E.g[mt.key]=mt}E=g.H?D(g.H):{},g.m?(g.u||(g.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,E)):(g.u="GET",g.g.ea(g.A,g.u,null,E)),se(),Qi(g.i,g.u,g.A,g.l,g.R,g.m)}Ai.prototype.ca=function(g){g=g.target;const E=this.M;E&&vs(g)==3?E.j():this.Y(g)},Ai.prototype.Y=function(g){try{if(g==this.g)t:{const Ln=vs(this.g);var E=this.g.Ba();const Kr=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||Ip(this.g)))){this.J||Ln!=4||E==7||(E==8||0>=Kr?se(3):se(2)),Fo(this);var A=this.g.Z();this.X=A;e:if(Ep(this)){var V=Ip(this.g);g="";var Y=V.length,it=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),ar(this);var mt="";break e}this.h.i=new c.TextDecoder}for(E=0;E<Y;E++)this.h.h=!0,g+=this.h.i.decode(V[E],{stream:!(it&&E==Y-1)});V.length=0,this.h.g+=g,this.C=0,mt=this.h.g}else mt=this.g.oa();if(this.o=A==200,ps(this.i,this.u,this.A,this.l,this.R,Ln,A),this.o){if(this.T&&!this.K){e:{if(this.g){var ye,On=this.g;if((ye=On.g?On.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(ye)){var _e=ye;break e}}_e=null}if(A=_e)Pn(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ja(this,A);else{this.o=!1,this.s=3,Rt(12),ei(this),ar(this);break t}}if(this.P){A=!0;let ni;for(;!this.J&&this.C<mt.length;)if(ni=Tp(this,mt),ni==pc){Ln==4&&(this.s=4,Rt(14),A=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(ni==lh){this.s=4,Rt(15),Pn(this.i,this.l,mt,"[Invalid Chunk]"),A=!1;break}else Pn(this.i,this.l,ni,null),Ja(this,ni);if(Ep(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||mt.length!=0||this.h.h||(this.s=1,Rt(16),A=!1),this.o=this.o&&A,!A)Pn(this.i,this.l,mt,"[Invalid Chunked Response]"),ei(this),ar(this);else if(0<mt.length&&!this.W){this.W=!0;var Hn=this.j;Hn.g==this&&Hn.ba&&!Hn.M&&(Hn.j.info("Great, no buffering proxy detected. Bytes received: "+mt.length),ul(Hn),Hn.M=!0,Rt(11))}}else Pn(this.i,this.l,mt,null),Ja(this,mt);Ln==4&&ei(this),this.o&&!this.J&&(Ln==4?Pp(this.j,this):(this.o=!1,Za(this)))}else z_(this.g),A==400&&0<mt.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),ei(this),ar(this)}}}catch{}finally{}};function Ep(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Tp(g,E){var A=g.C,V=E.indexOf(`
`,A);return V==-1?pc:(A=Number(E.substring(A,V)),isNaN(A)?lh:(V+=1,V+A>E.length?pc:(E=E.slice(V,V+A),g.C=V+A,E)))}Ai.prototype.cancel=function(){this.J=!0,ei(this)};function Za(g){g.S=Date.now()+g.I,xp(g,g.I)}function xp(g,E){if(g.B!=null)throw Error("WatchDog timer not null");g.B=he(y(g.ba,g),E)}function Fo(g){g.B&&(c.clearTimeout(g.B),g.B=null)}Ai.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ms(this.i,this.A),this.L!=2&&(se(),Rt(17)),ei(this),this.s=2,ar(this)):xp(this,this.S-g)};function ar(g){g.j.G==0||g.J||Pp(g.j,g)}function ei(g){Fo(g);var E=g.M;E&&typeof E.ma=="function"&&E.ma(),g.M=null,Q(g.U),g.g&&(E=g.g,g.g=null,E.abort(),E.ma())}function Ja(g,E){try{var A=g.j;if(A.G!=0&&(A.g==g||ch(A.h,g))){if(!g.K&&ch(A.h,g)&&A.G==3){try{var V=A.Da.g.parse(E)}catch{V=null}if(Array.isArray(V)&&V.length==3){var Y=V;if(Y[0]==0){t:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)Ac(A),xc(A);else break t;vh(A),Rt(18)}}else A.za=Y[1],0<A.za-A.T&&37500>Y[2]&&A.F&&A.v==0&&!A.C&&(A.C=he(y(A.Za,A),6e3));if(1>=gc(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Wr(A,11)}else if((g.K||A.g==g)&&Ac(A),!k(E))for(Y=A.Da.g.parse(E),E=0;E<Y.length;E++){let _e=Y[E];if(A.T=_e[0],_e=_e[1],A.G==2)if(_e[0]=="c"){A.K=_e[1],A.ia=_e[2];const Hn=_e[3];Hn!=null&&(A.la=Hn,A.j.info("VER="+A.la));const Ln=_e[4];Ln!=null&&(A.Aa=Ln,A.j.info("SVER="+A.Aa));const Kr=_e[5];Kr!=null&&typeof Kr=="number"&&0<Kr&&(V=1.5*Kr,A.L=V,A.j.info("backChannelRequestTimeoutMs_="+V)),V=A;const ni=g.g;if(ni){const pr=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pr){var it=V.h;it.g||pr.indexOf("spdy")==-1&&pr.indexOf("quic")==-1&&pr.indexOf("h2")==-1||(it.j=it.l,it.g=new Set,it.h&&(yc(it,it.h),it.h=null))}if(V.D){const wh=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;wh&&(V.ya=wh,je(V.I,V.D,wh))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),V=A;var mt=g;if(V.qa=Lp(V,V.J?V.ia:null,V.W),mt.K){Ci(V.h,mt);var ye=mt,On=V.L;On&&(ye.I=On),ye.B&&(Fo(ye),Za(ye)),V.g=mt}else Np(V);0<A.i.length&&Sc(A)}else _e[0]!="stop"&&_e[0]!="close"||Wr(A,7);else A.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Wr(A,7):yh(A):_e[0]!="noop"&&A.l&&A.l.ta(_e),A.v=0)}}se(4)}catch{}}var Sp=class{constructor(g,E){this.g=g,this.map=E}};function Br(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mc(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function gc(g){return g.h?1:g.g?g.g.size:0}function ch(g,E){return g.h?g.h==E:g.g?g.g.has(E):!1}function yc(g,E){g.g?g.g.add(E):g.h=E}function Ci(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}Br.prototype.cancel=function(){if(this.i=uh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function uh(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let E=g.i;for(const A of g.g.values())E=E.concat(A.D);return E}return T(g.i)}function j_(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var E=[],A=g.length,V=0;V<A;V++)E.push(g[V]);return E}E=[],A=0;for(V in g)E[A++]=g[V];return E}function _c(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var E=[];g=g.length;for(var A=0;A<g;A++)E.push(A);return E}E=[],A=0;for(const V in g)E[A++]=V;return E}}}function hh(g,E){if(g.forEach&&typeof g.forEach=="function")g.forEach(E,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,E,void 0);else for(var A=_c(g),V=j_(g),Y=V.length,it=0;it<Y;it++)E.call(void 0,V[it],A&&A[it],g)}var tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function U_(g,E){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var V=g[A].indexOf("="),Y=null;if(0<=V){var it=g[A].substring(0,V);Y=g[A].substring(V+1)}else it=g[A];E(it,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function An(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof An){this.h=g.h,el(this,g.j),this.o=g.o,this.g=g.g,Bo(this,g.s),this.l=g.l;var E=g.i,A=new Hr;A.i=E.i,E.g&&(A.g=new Map(E.g),A.h=E.h),zr(this,A),this.m=g.m}else g&&(E=String(g).match(tl))?(this.h=!1,el(this,E[1]||"",!0),this.o=gs(E[2]||""),this.g=gs(E[3]||"",!0),Bo(this,E[4]),this.l=gs(E[5]||"",!0),zr(this,E[6]||"",!0),this.m=gs(E[7]||"")):(this.h=!1,this.i=new Hr(null,this.h))}An.prototype.toString=function(){var g=[],E=this.j;E&&g.push(il(E,dh,!0),":");var A=this.g;return(A||E=="file")&&(g.push("//"),(E=this.o)&&g.push(il(E,dh,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(il(A,A.charAt(0)=="/"?F_:fh,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",il(A,vc)),g.join("")};function Zi(g){return new An(g)}function el(g,E,A){g.j=A?gs(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function Bo(g,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);g.s=E}else g.s=null}function zr(g,E,A){E instanceof Hr?(g.i=E,Cp(g.i,g.h)):(A||(E=il(E,B_)),g.i=new Hr(E,g.h))}function je(g,E,A){g.i.set(E,A)}function nl(g){return je(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function gs(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function il(g,E,A){return typeof g=="string"?(g=encodeURI(g).replace(E,Ap),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Ap(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var dh=/[#\/\?@]/g,fh=/[#\?:]/g,F_=/[#\?]/g,B_=/[#\?@]/g,vc=/#/g;function Hr(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function ys(g){g.g||(g.g=new Map,g.h=0,g.i&&U_(g.i,function(E,A){g.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}e=Hr.prototype,e.add=function(g,E){ys(this),this.i=null,g=lr(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(E),this.h+=1,this};function qr(g,E){ys(g),E=lr(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function $r(g,E){return ys(g),E=lr(g,E),g.g.has(E)}e.forEach=function(g,E){ys(this),this.g.forEach(function(A,V){A.forEach(function(Y){g.call(E,Y,V,this)},this)},this)},e.na=function(){ys(this);const g=Array.from(this.g.values()),E=Array.from(this.g.keys()),A=[];for(let V=0;V<E.length;V++){const Y=g[V];for(let it=0;it<Y.length;it++)A.push(E[V])}return A},e.V=function(g){ys(this);let E=[];if(typeof g=="string")$r(this,g)&&(E=E.concat(this.g.get(lr(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)E=E.concat(g[A])}return E},e.set=function(g,E){return ys(this),this.i=null,g=lr(this,g),$r(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},e.get=function(g,E){return g?(g=this.V(g),0<g.length?String(g[0]):E):E};function ph(g,E,A){qr(g,E),0<A.length&&(g.i=null,g.g.set(lr(g,E),T(A)),g.h+=A.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(var A=0;A<E.length;A++){var V=E[A];const it=encodeURIComponent(String(V)),mt=this.V(V);for(V=0;V<mt.length;V++){var Y=it;mt[V]!==""&&(Y+="="+encodeURIComponent(String(mt[V]))),g.push(Y)}}return this.i=g.join("&")};function lr(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function Cp(g,E){E&&!g.j&&(ys(g),g.i=null,g.g.forEach(function(A,V){var Y=V.toLowerCase();V!=Y&&(qr(this,V),ph(this,Y,A))},g)),g.j=E}function sl(g,E){const A=new Ke;if(c.Image){const V=new Image;V.onload=v(_s,A,"TestLoadImage: loaded",!0,E,V),V.onerror=v(_s,A,"TestLoadImage: error",!1,E,V),V.onabort=v(_s,A,"TestLoadImage: abort",!1,E,V),V.ontimeout=v(_s,A,"TestLoadImage: timeout",!1,E,V),c.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=g}else E(!1)}function Bs(g,E){const A=new Ke,V=new AbortController,Y=setTimeout(()=>{V.abort(),_s(A,"TestPingServer: timeout",!1,E)},1e4);fetch(g,{signal:V.signal}).then(it=>{clearTimeout(Y),it.ok?_s(A,"TestPingServer: ok",!0,E):_s(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),_s(A,"TestPingServer: error",!1,E)})}function _s(g,E,A,V,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),V(A)}catch{}}function rl(){this.g=new Ht}function cr(g,E,A){const V=A||"";try{hh(g,function(Y,it){let mt=Y;d(Y)&&(mt=ht(Y)),E.push(V+it+"="+encodeURIComponent(mt))})}catch(Y){throw E.push(V+"type="+encodeURIComponent("_badmap")),Y}}function zo(g){this.l=g.Ub||null,this.j=g.eb||!1}w(zo,ge),zo.prototype.g=function(){return new Gr(this.l,this.j)},zo.prototype.i=function(g){return function(){return g}}({});function Gr(g,E){Ge.call(this),this.D=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Gr,Ge),e=Gr.prototype,e.open=function(g,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=E,this.readyState=1,hr(this)},e.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(E.body=g),(this.D||c).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ur(this)),this.readyState=0},e.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,hr(this)),this.g&&(this.readyState=3,hr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mh(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function mh(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}e.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?ur(this):hr(this),this.readyState==3&&mh(this)}},e.Ra=function(g){this.g&&(this.response=this.responseText=g,ur(this))},e.Qa=function(g){this.g&&(this.response=g,ur(this))},e.ga=function(){this.g&&ur(this)};function ur(g){g.readyState=4,g.l=null,g.j=null,g.v=null,hr(g)}e.setRequestHeader=function(g,E){this.u.append(g,E)},e.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=E.next();return g.join(`\r
`)};function hr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function gh(g){let E="";return $(g,function(A,V){E+=V,E+=":",E+=A,E+=`\r
`}),E}function zn(g,E,A){t:{for(V in A){var V=!1;break t}V=!0}V||(A=gh(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):je(g,E,A))}function Me(g){Ge.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Me,Ge);var bc=/^https?$/i,ol=["POST","PUT"];e=Me.prototype,e.Ha=function(g){this.J=g},e.ea=function(g,E,A,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rr.g(),this.v=this.o?Ae(this.o):Ae(rr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(it){Rp(this,it);return}if(g=A||"",A=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var Y in V)A.set(Y,V[Y]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const it of V.keys())A.set(it,V.get(it));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(A.keys()).find(it=>it.toLowerCase()=="content-type"),Y=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ol,E,void 0))||V||Y||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[it,mt]of A)this.g.setRequestHeader(it,mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{al(this),this.u=!0,this.g.send(g),this.u=!1}catch(it){Rp(this,it)}};function Rp(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.m=5,wc(g),dr(g)}function wc(g){g.A||(g.A=!0,Jt(g,"complete"),Jt(g,"error"))}e.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Jt(this,"complete"),Jt(this,"abort"),dr(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dr(this,!0)),Me.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ec(this):this.bb())},e.bb=function(){Ec(this)};function Ec(g){if(g.h&&typeof a<"u"&&(!g.v[1]||vs(g)!=4||g.Z()!=2)){if(g.u&&vs(g)==4)We(g.Ea,0,g);else if(Jt(g,"readystatechange"),vs(g)==4){g.h=!1;try{const mt=g.Z();t:switch(mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break t;default:E=!1}var A;if(!(A=E)){var V;if(V=mt===0){var Y=String(g.D).match(tl)[1]||null;!Y&&c.self&&c.self.location&&(Y=c.self.location.protocol.slice(0,-1)),V=!bc.test(Y?Y.toLowerCase():"")}A=V}if(A)Jt(g,"complete"),Jt(g,"success");else{g.m=6;try{var it=2<vs(g)?g.g.statusText:""}catch{it=""}g.l=it+" ["+g.Z()+"]",wc(g)}}finally{dr(g)}}}}function dr(g,E){if(g.g){al(g);const A=g.g,V=g.v[0]?()=>{}:null;g.g=null,g.v=null,E||Jt(g,"ready");try{A.onreadystatechange=V}catch{}}}function al(g){g.I&&(c.clearTimeout(g.I),g.I=null)}e.isActive=function(){return!!this.g};function vs(g){return g.g?g.g.readyState:0}e.Z=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(g){if(this.g){var E=this.g.responseText;return g&&E.indexOf(g)==0&&(E=E.substring(g.length)),kt(E)}};function Ip(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function z_(g){const E={};g=(g.g&&2<=vs(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<g.length;V++){if(k(g[V]))continue;var A=F(g[V]);const Y=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const it=E[Y]||[];E[Y]=it,it.push(A)}O(E,function(V){return V.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ll(g,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||E}function Tc(g){this.Aa=0,this.i=[],this.j=new Ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ll("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ll("baseRetryDelayMs",5e3,g),this.cb=ll("retryDelaySeedMs",1e4,g),this.Wa=ll("forwardChannelMaxRetries",2,g),this.wa=ll("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Br(g&&g.concurrentRequestLimit),this.Da=new rl,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Tc.prototype,e.la=8,e.G=1,e.connect=function(g,E,A,V){Rt(0),this.W=g,this.H=E||{},A&&V!==void 0&&(this.H.OSID=A,this.H.OAID=V),this.F=this.X,this.I=Lp(this,null,this.W),Sc(this)};function yh(g){if(Dp(g),g.G==3){var E=g.U++,A=Zi(g.I);if(je(A,"SID",g.K),je(A,"RID",E),je(A,"TYPE","terminate"),cl(g,A),E=new Ai(g,g.j,E),E.L=2,E.v=nl(Zi(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(E.v.toString(),"")}catch{}!A&&c.Image&&(new Image().src=E.v,A=!0),A||(E.g=Vp(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Za(E)}Op(g)}function xc(g){g.g&&(ul(g),g.g.cancel(),g.g=null)}function Dp(g){xc(g),g.u&&(c.clearTimeout(g.u),g.u=null),Ac(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function Sc(g){if(!mc(g.h)&&!g.s){g.s=!0;var E=g.Ga;tt||U(),dt||(tt(),dt=!0),yt.add(E,g),g.B=0}}function H_(g,E){return gc(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=E.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=he(y(g.Ga,g,E),bh(g,g.B)),g.B++,!0)}e.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const Y=new Ai(this,this.j,g);let it=this.o;if(this.S&&(it?(it=D(it),L(it,this.S)):it=this.S),this.m!==null||this.O||(Y.H=it,it=null),this.P)t:{for(var E=0,A=0;A<this.i.length;A++){e:{var V=this.i[A];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break e}V=void 0}if(V===void 0)break;if(E+=V,4096<E){E=A;break t}if(E===4096||A===this.i.length-1){E=A+1;break t}}E=1e3}else E=1e3;E=Mp(this,Y,E),A=Zi(this.I),je(A,"RID",g),je(A,"CVER",22),this.D&&je(A,"X-HTTP-Session-Id",this.D),cl(this,A),it&&(this.O?E="headers="+encodeURIComponent(String(gh(it)))+"&"+E:this.m&&zn(A,this.m,it)),yc(this.h,Y),this.Ua&&je(A,"TYPE","init"),this.P?(je(A,"$req",E),je(A,"SID","null"),Y.T=!0,Fs(Y,A,null)):Fs(Y,A,E),this.G=2}}else this.G==3&&(g?_h(this,g):this.i.length==0||mc(this.h)||_h(this))};function _h(g,E){var A;E?A=E.l:A=g.U++;const V=Zi(g.I);je(V,"SID",g.K),je(V,"RID",A),je(V,"AID",g.T),cl(g,V),g.m&&g.o&&zn(V,g.m,g.o),A=new Ai(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),E&&(g.i=E.D.concat(g.i)),E=Mp(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),yc(g.h,A),Fs(A,V,E)}function cl(g,E){g.H&&$(g.H,function(A,V){je(E,V,A)}),g.l&&hh({},function(A,V){je(E,V,A)})}function Mp(g,E,A){A=Math.min(g.i.length,A);var V=g.l?y(g.l.Na,g.l,g):null;t:{var Y=g.i;let it=-1;for(;;){const mt=["count="+A];it==-1?0<A?(it=Y[0].g,mt.push("ofs="+it)):it=0:mt.push("ofs="+it);let ye=!0;for(let On=0;On<A;On++){let _e=Y[On].g;const Hn=Y[On].map;if(_e-=it,0>_e)it=Math.max(0,Y[On].g-100),ye=!1;else try{cr(Hn,mt,"req"+_e+"_")}catch{V&&V(Hn)}}if(ye){V=mt.join("&");break t}}}return g=g.i.splice(0,A),E.D=g,V}function Np(g){if(!g.g&&!g.u){g.Y=1;var E=g.Fa;tt||U(),dt||(tt(),dt=!0),yt.add(E,g),g.v=0}}function vh(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=he(y(g.Fa,g),bh(g,g.v)),g.v++,!0)}e.Fa=function(){if(this.u=null,kp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=he(y(this.ab,this),g)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),xc(this),kp(this))};function ul(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function kp(g){g.g=new Ai(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var E=Zi(g.qa);je(E,"RID","rpc"),je(E,"SID",g.K),je(E,"AID",g.T),je(E,"CI",g.F?"0":"1"),!g.F&&g.ja&&je(E,"TO",g.ja),je(E,"TYPE","xmlhttp"),cl(g,E),g.m&&g.o&&zn(E,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=nl(Zi(E)),A.m=null,A.P=!0,Fr(A,g)}e.Za=function(){this.C!=null&&(this.C=null,xc(this),vh(this),Rt(19))};function Ac(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Pp(g,E){var A=null;if(g.g==E){Ac(g),ul(g),g.g=null;var V=2}else if(ch(g.h,E))A=E.D,Ci(g.h,E),V=1;else return;if(g.G!=0){if(E.o)if(V==1){A=E.m?E.m.length:0,E=Date.now()-E.F;var Y=g.B;V=Zt(),Jt(V,new ne(V,A)),Sc(g)}else Np(g);else if(Y=E.s,Y==3||Y==0&&0<E.X||!(V==1&&H_(g,E)||V==2&&vh(g)))switch(A&&0<A.length&&(E=g.h,E.i=E.i.concat(A)),Y){case 1:Wr(g,5);break;case 4:Wr(g,10);break;case 3:Wr(g,6);break;default:Wr(g,2)}}}function bh(g,E){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*E}function Wr(g,E){if(g.j.info("Error code "+E),E==2){var A=y(g.fb,g),V=g.Xa;const Y=!V;V=new An(V||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||el(V,"https"),nl(V),Y?sl(V.toString(),A):Bs(V.toString(),A)}else Rt(2);g.G=0,g.l&&g.l.sa(E),Op(g),Dp(g)}e.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Op(g){if(g.G=0,g.ka=[],g.l){const E=uh(g.h);(E.length!=0||g.i.length!=0)&&(x(g.ka,E),x(g.ka,g.i),g.h.i.length=0,T(g.i),g.i.length=0),g.l.ra()}}function Lp(g,E,A){var V=A instanceof An?Zi(A):new An(A);if(V.g!="")E&&(V.g=E+"."+V.g),Bo(V,V.s);else{var Y=c.location;V=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;var it=new An(null);V&&el(it,V),E&&(it.g=E),Y&&Bo(it,Y),A&&(it.l=A),V=it}return A=g.D,E=g.ya,A&&E&&je(V,A,E),je(V,"VER",g.la),cl(g,V),V}function Vp(g,E,A){if(E&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=g.Ca&&!g.pa?new Me(new zo({eb:A})):new Me(g.pa),E.Ha(g.J),E}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function jp(){}e=jp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Cc(){}Cc.prototype.g=function(g,E){return new Ri(g,E)};function Ri(g,E){Ge.call(this),this.g=new Tc(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(g?g["X-WebChannel-Client-Profile"]=E.va:g={"X-WebChannel-Client-Profile":E.va}),this.g.S=g,(g=E&&E.Sb)&&!k(g)&&(this.g.m=g),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!k(E)&&(this.g.D=E,g=this.h,g!==null&&E in g&&(g=this.h,E in g&&delete g[E])),this.j=new fr(this)}w(Ri,Ge),Ri.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ri.prototype.close=function(){yh(this.g)},Ri.prototype.o=function(g){var E=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=ht(g),g=A);E.i.push(new Sp(E.Ya++,g)),E.G==3&&Sc(E)},Ri.prototype.N=function(){this.g.l=null,delete this.j,yh(this.g),delete this.g,Ri.aa.N.call(this)};function Up(g){qt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){t:{for(const A in E){g=A;break t}g=void 0}(this.i=g)&&(g=this.i,E=E!==null&&g in E?E[g]:void 0),this.data=E}else this.data=g}w(Up,qt);function Fp(){Ce.call(this),this.status=1}w(Fp,Ce);function fr(g){this.g=g}w(fr,jp),fr.prototype.ua=function(){Jt(this.g,"a")},fr.prototype.ta=function(g){Jt(this.g,new Up(g))},fr.prototype.sa=function(g){Jt(this.g,new Fp)},fr.prototype.ra=function(){Jt(this.g,"b")},Cc.prototype.createWebChannel=Cc.prototype.g,Ri.prototype.send=Ri.prototype.o,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,Ck=function(){return new Cc},Ak=function(){return Zt()},Sk=Nt,tw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Uo.NO_ERROR=0,Uo.TIMEOUT=8,Uo.HTTP_ERROR=6,Ag=Uo,Ur.COMPLETE="complete",xk=Ur,Kt.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,xd=Kt,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,Tk=Me}).apply(typeof Hm<"u"?Hm:typeof self<"u"?self:typeof window<"u"?window:{});const m1="@firebase/firestore",g1="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mi=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};mi.UNAUTHENTICATED=new mi(null),mi.GOOGLE_CREDENTIALS=new mi("google-credentials-uid"),mi.FIRST_PARTY=new mi("first-party-uid"),mi.MOCK_USER=new mi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new zf("@firebase/firestore");function ou(){return Yl.logLevel}function Et(e,...t){if(Yl.logLevel<=le.DEBUG){const n=t.map(GE);Yl.debug(`Firestore (${Yu}): ${e}`,...n)}}function Do(e,...t){if(Yl.logLevel<=le.ERROR){const n=t.map(GE);Yl.error(`Firestore (${Yu}): ${e}`,...n)}}function Du(e,...t){if(Yl.logLevel<=le.WARN){const n=t.map(GE);Yl.warn(`Firestore (${Yu}): ${e}`,...n)}}function GE(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(e="Unexpected state"){const t=`FIRESTORE (${Yu}) INTERNAL ASSERTION FAILED: `+e;throw Do(t),new Error(t)}function Pe(e,t){e||Bt()}function Wt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wt extends Vs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Wz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(mi.UNAUTHENTICATED))}shutdown(){}}class Kz{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Yz{constructor(t){this.t=t,this.currentUser=mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Pe(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new To;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new To,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new To)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Pe(typeof i.accessToken=="string"),new Rk(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Pe(t===null||typeof t=="string"),new mi(t)}}class Qz{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=mi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Xz{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new Qz(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(mi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zz{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Bi(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Pe(this.o===void 0);const i=r=>{r.error!=null&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.R;return this.R=r.token,Et("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new y1(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new y1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Jz(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function ee(e,t){return e<t?-1:e>t?1:0}function ew(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=e.codePointAt(n),s=t.codePointAt(n);if(i!==s){if(i<128&&s<128)return ee(i,s);{const r=Ik(),a=t9(r.encode(_1(e,n)),r.encode(_1(t,n)));return a!==0?a:ee(i,s)}}n+=i>65535?2:1}return ee(e.length,t.length)}function _1(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function t9(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ee(e[n],t[n]);return ee(e.length,t.length)}function Mu(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=-62135596800,b1=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(t){return Qe.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*b1);return new Qe(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new wt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new wt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<v1)throw new wt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new wt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b1}_compareTo(t){return this.seconds===t.seconds?ee(this.nanoseconds,t.nanoseconds):ee(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-v1;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{static fromTimestamp(t){return new Gt(t)}static min(){return new Gt(new Qe(0,0))}static max(){return new Gt(new Qe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="__name__";class Tr{constructor(t,n,i){n===void 0?n=0:n>t.length&&Bt(),i===void 0?i=t.length-n:i>t.length-n&&Bt(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Tr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Tr?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=Tr.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return ee(t.length,n.length)}static compareSegments(t,n){const i=Tr.isNumericId(t),s=Tr.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Tr.extractNumericId(t).compare(Tr.extractNumericId(n)):ew(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ca.fromString(t.substring(4,t.length-2))}}class sn extends Tr{construct(t,n,i){return new sn(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new wt(lt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new sn(n)}static emptyPath(){return new sn([])}}const e9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class li extends Tr{construct(t,n,i){return new li(t,n,i)}static isValidIdentifier(t){return e9.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),li.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===w1}static keyField(){return new li([w1])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new wt(lt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const c=t[s];if(c==="\\"){if(s+1===t.length)throw new wt(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new wt(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(i+=c,s++):(r(),s++)}if(r(),a)throw new wt(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new li(n)}static emptyPath(){return new li([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.path=t}static fromPath(t){return new Dt(sn.fromString(t))}static fromName(t){return new Dt(sn.fromString(t).popFirst(5))}static empty(){return new Dt(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&sn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return sn.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Dt(new sn(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=-1;function n9(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=Gt.fromTimestamp(i===1e9?new Qe(n+1,0):new Qe(n,i));return new Na(s,Dt.empty(),t)}function i9(e){return new Na(e.readTime,e.key,hf)}class Na{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Na(Gt.min(),Dt.empty(),hf)}static max(){return new Na(Gt.max(),Dt.empty(),hf)}}function s9(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Dt.comparator(e.documentKey,t.documentKey),n!==0?n:ee(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class o9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qu(e){if(e.code!==lt.FAILED_PRECONDITION||e.message!==r9)throw e;Et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ut((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ut?n:ut.resolve(n)}catch(n){return ut.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ut.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ut.reject(n)}static resolve(t){return new ut((n,i)=>{n(t)})}static reject(t){return new ut((n,i)=>{i(t)})}static waitFor(t){return new ut((n,i)=>{let s=0,r=0,a=!1;t.forEach(c=>{++s,c.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=ut.resolve(!1);for(const i of t)n=n.next(s=>s?ut.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new ut((i,s)=>{const r=t.length,a=new Array(r);let c=0;for(let u=0;u<r;u++){const d=u;n(t[d]).next(f=>{a[d]=f,++c,c===r&&i(a)},f=>s(f))}})}static doWhile(t,n){return new ut((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function a9(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xu(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}e_.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=-1;function n_(e){return e==null}function sy(e){return e===0&&1/e==-1/0}function l9(e){return typeof e=="number"&&Number.isInteger(e)&&!sy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="";function c9(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=E1(t)),t=u9(e.get(n),t);return E1(t)}function u9(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case Mk:n+="";break;default:n+=r}}return n}function E1(e){return e+Mk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ga(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Nk(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nn=class nw{constructor(t,n){this.comparator=t,this.root=n||Ra.EMPTY}insert(t,n){return new nw(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ra.BLACK,null,null))}remove(t){return new nw(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ra.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qm(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qm(this.root,t,this.comparator,!1)}getReverseIterator(){return new qm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qm(this.root,t,this.comparator,!0)}},qm=class{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ra=class uo{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??uo.RED,this.left=s??uo.EMPTY,this.right=r??uo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new uo(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return uo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return uo.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,uo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,uo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();const t=this.left.check();if(t!==this.right.check())throw Bt();return t+(this.isRed()?0:1)}};Ra.EMPTY=null,Ra.RED=!0,Ra.BLACK=!1;Ra.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(t,n,i,s,r){return this}insert(t,n,i){return new Ra(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t){this.comparator=t,this.data=new Nn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new x1(this.data.getIterator())}getIteratorFrom(t){return new x1(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Fn)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Fn(this.comparator);return n.data=t,n}}class x1{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.fields=t,t.sort(li.comparator)}static empty(){return new cs([])}unionWith(t){let n=new Fn(li.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new cs(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Mu(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new kk("Invalid base64 string: "+r):r}}(t);return new ci(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new ci(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ee(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ci.EMPTY_BYTE_STRING=new ci("");const h9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(e){if(Pe(!!e),typeof e=="string"){let t=0;const n=h9.exec(e);if(Pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Tn(e.seconds),nanos:Tn(e.nanos)}}function Tn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Pa(e){return typeof e=="string"?ci.fromBase64String(e):ci.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="server_timestamp",Ok="__type__",Lk="__previous_value__",Vk="__local_write_time__";function KE(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ok])===null||n===void 0?void 0:n.stringValue)===Pk}function i_(e){const t=e.mapValue.fields[Lk];return KE(t)?i_(t):t}function df(e){const t=ka(e.mapValue.fields[Vk].timestampValue);return new Qe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(t,n,i,s,r,a,c,u,d){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}const ry="(default)";class ff{constructor(t,n){this.projectId=t,this.database=n||ry}static empty(){return new ff("","")}get isDefaultDatabase(){return this.database===ry}isEqual(t){return t instanceof ff&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="__type__",f9="__max__",$m={mapValue:{}},Uk="__vector__",oy="value";function Oa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?KE(e)?4:m9(e)?9007199254740991:p9(e)?10:11:Bt()}function Pr(e,t){if(e===t)return!0;const n=Oa(e);if(n!==Oa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return df(e).isEqual(df(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=ka(s.timestampValue),c=ka(r.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return Pa(s.bytesValue).isEqual(Pa(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Tn(s.geoPointValue.latitude)===Tn(r.geoPointValue.latitude)&&Tn(s.geoPointValue.longitude)===Tn(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Tn(s.integerValue)===Tn(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Tn(s.doubleValue),c=Tn(r.doubleValue);return a===c?sy(a)===sy(c):isNaN(a)&&isNaN(c)}return!1}(e,t);case 9:return Mu(e.arrayValue.values||[],t.arrayValue.values||[],Pr);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},c=r.mapValue.fields||{};if(T1(a)!==T1(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Pr(a[u],c[u])))return!1;return!0}(e,t);default:return Bt()}}function pf(e,t){return(e.values||[]).find(n=>Pr(n,t))!==void 0}function Nu(e,t){if(e===t)return 0;const n=Oa(e),i=Oa(t);if(n!==i)return ee(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(e.booleanValue,t.booleanValue);case 2:return function(r,a){const c=Tn(r.integerValue||r.doubleValue),u=Tn(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(e,t);case 3:return S1(e.timestampValue,t.timestampValue);case 4:return S1(df(e),df(t));case 5:return ew(e.stringValue,t.stringValue);case 6:return function(r,a){const c=Pa(r),u=Pa(a);return c.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const c=r.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ee(c[d],u[d]);if(f!==0)return f}return ee(c.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const c=ee(Tn(r.latitude),Tn(a.latitude));return c!==0?c:ee(Tn(r.longitude),Tn(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return A1(e.arrayValue,t.arrayValue);case 10:return function(r,a){var c,u,d,f;const m=r.fields||{},y=a.fields||{},v=(c=m[oy])===null||c===void 0?void 0:c.arrayValue,w=(u=y[oy])===null||u===void 0?void 0:u.arrayValue,T=ee(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0);return T!==0?T:A1(v,w)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===$m.mapValue&&a===$m.mapValue)return 0;if(r===$m.mapValue)return 1;if(a===$m.mapValue)return-1;const c=r.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const y=ew(u[m],f[m]);if(y!==0)return y;const v=Nu(c[u[m]],d[f[m]]);if(v!==0)return v}return ee(u.length,f.length)}(e.mapValue,t.mapValue);default:throw Bt()}}function S1(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ee(e,t);const n=ka(e),i=ka(t),s=ee(n.seconds,i.seconds);return s!==0?s:ee(n.nanos,i.nanos)}function A1(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Nu(n[s],i[s]);if(r)return r}return ee(n.length,i.length)}function ku(e){return iw(e)}function iw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=ka(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Pa(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Dt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=iw(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${iw(n.fields[a])}`;return s+"}"}(e.mapValue):Bt()}function Cg(e){switch(Oa(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=i_(e);return t?16+Cg(t):16;case 5:return 2*e.stringValue.length;case 6:return Pa(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Cg(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return Ga(i.fields,(r,a)=>{s+=r.length+Cg(a)}),s}(e.mapValue);default:throw Bt()}}function C1(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function sw(e){return!!e&&"integerValue"in e}function YE(e){return!!e&&"arrayValue"in e}function R1(e){return!!e&&"nullValue"in e}function I1(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Rg(e){return!!e&&"mapValue"in e}function p9(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[jk])===null||n===void 0?void 0:n.stringValue)===Uk}function jd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ga(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=jd(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=jd(e.arrayValue.values[n]);return t}return Object.assign({},e)}function m9(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===f9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t){this.value=t}static empty(){return new zi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Rg(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=jd(n)}setAll(t){let n=li.emptyPath(),i={},s=[];t.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=c.popLast()}a?i[c.lastSegment()]=jd(a):s.push(c.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());Rg(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Pr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];Rg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){Ga(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new zi(jd(this.value))}}function Fk(e){const t=[];return Ga(e.fields,(n,i)=>{const s=new li([n]);if(Rg(i)){const r=Fk(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new cs(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t,n,i,s,r,a,c){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=c}static newInvalidDocument(t){return new yi(t,0,Gt.min(),Gt.min(),Gt.min(),zi.empty(),0)}static newFoundDocument(t,n,i,s){return new yi(t,1,n,Gt.min(),i,s,0)}static newNoDocument(t,n){return new yi(t,2,n,Gt.min(),Gt.min(),zi.empty(),0)}static newUnknownDocument(t,n){return new yi(t,3,n,Gt.min(),Gt.min(),zi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof yi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new yi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,n){this.position=t,this.inclusive=n}}function D1(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=Dt.comparator(Dt.fromName(a.referenceValue),n.key):i=Nu(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function M1(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Pr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(t,n="asc"){this.field=t,this.dir=n}}function g9(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{}class Dn extends Bk{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new _9(t,n,i):n==="array-contains"?new w9(t,i):n==="in"?new E9(t,i):n==="not-in"?new T9(t,i):n==="array-contains-any"?new x9(t,i):new Dn(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new v9(t,i):new b9(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Nu(n,this.value)):n!==null&&Oa(this.value)===Oa(n)&&this.matchesComparison(Nu(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tr extends Bk{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new tr(t,n)}matches(t){return zk(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function zk(e){return e.op==="and"}function Hk(e){return y9(e)&&zk(e)}function y9(e){for(const t of e.filters)if(t instanceof tr)return!1;return!0}function rw(e){if(e instanceof Dn)return e.field.canonicalString()+e.op.toString()+ku(e.value);if(Hk(e))return e.filters.map(t=>rw(t)).join(",");{const t=e.filters.map(n=>rw(n)).join(",");return`${e.op}(${t})`}}function qk(e,t){return e instanceof Dn?function(i,s){return s instanceof Dn&&i.op===s.op&&i.field.isEqual(s.field)&&Pr(i.value,s.value)}(e,t):e instanceof tr?function(i,s){return s instanceof tr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,c)=>r&&qk(a,s.filters[c]),!0):!1}(e,t):void Bt()}function $k(e){return e instanceof Dn?function(n){return`${n.field.canonicalString()} ${n.op} ${ku(n.value)}`}(e):e instanceof tr?function(n){return n.op.toString()+" {"+n.getFilters().map($k).join(" ,")+"}"}(e):"Filter"}class _9 extends Dn{constructor(t,n,i){super(t,n,i),this.key=Dt.fromName(i.referenceValue)}matches(t){const n=Dt.comparator(t.key,this.key);return this.matchesComparison(n)}}class v9 extends Dn{constructor(t,n){super(t,"in",n),this.keys=Gk("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class b9 extends Dn{constructor(t,n){super(t,"not-in",n),this.keys=Gk("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Gk(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Dt.fromName(i.referenceValue))}class w9 extends Dn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return YE(n)&&pf(n.arrayValue,this.value)}}class E9 extends Dn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&pf(this.value.arrayValue,n)}}class T9 extends Dn{constructor(t,n){super(t,"not-in",n)}matches(t){if(pf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!pf(this.value.arrayValue,n)}}class x9 extends Dn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!YE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>pf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(t,n=null,i=[],s=[],r=null,a=null,c=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=c,this.le=null}}function N1(e,t=null,n=[],i=[],s=null,r=null,a=null){return new S9(e,t,n,i,s,r,a)}function QE(e){const t=Wt(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>rw(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),n_(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ku(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ku(i)).join(",")),t.le=n}return t.le}function XE(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!g9(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!qk(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!M1(e.startAt,t.startAt)&&M1(e.endAt,t.endAt)}function ow(e){return Dt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(t,n=null,i=[],s=[],r=null,a="F",c=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=c,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function A9(e,t,n,i,s,r,a,c){return new Zu(e,t,n,i,s,r,a,c)}function s_(e){return new Zu(e)}function k1(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Wk(e){return e.collectionGroup!==null}function Ud(e){const t=Wt(e);if(t.he===null){t.he=[];const n=new Set;for(const r of t.explicitOrderBy)t.he.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Fn(li.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.he.push(new mf(r,i))}),n.has(li.keyField().canonicalString())||t.he.push(new mf(li.keyField(),i))}return t.he}function Cr(e){const t=Wt(e);return t.Pe||(t.Pe=C9(t,Ud(e))),t.Pe}function C9(e,t){if(e.limitType==="F")return N1(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new mf(s.field,r)});const n=e.endAt?new ay(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ay(e.startAt.position,e.startAt.inclusive):null;return N1(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function aw(e,t){const n=e.filters.concat([t]);return new Zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function lw(e,t,n){return new Zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function r_(e,t){return XE(Cr(e),Cr(t))&&e.limitType===t.limitType}function Kk(e){return`${QE(Cr(e))}|lt:${e.limitType}`}function au(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>$k(s)).join(", ")}]`),n_(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ku(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ku(s)).join(",")),`Target(${i})`}(Cr(e))}; limitType=${e.limitType})`}function o_(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Dt.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of Ud(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,c,u){const d=D1(a,c,u);return a.inclusive?d<=0:d<0}(i.startAt,Ud(i),s)||i.endAt&&!function(a,c,u){const d=D1(a,c,u);return a.inclusive?d>=0:d>0}(i.endAt,Ud(i),s))}(e,t)}function R9(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yk(e){return(t,n)=>{let i=!1;for(const s of Ud(e)){const r=I9(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function I9(e,t,n){const i=e.field.isKeyField()?Dt.comparator(t.key,n.key):function(r,a,c){const u=a.data.field(r),d=c.data.field(r);return u!==null&&d!==null?Nu(u,d):Bt()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ga(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return Nk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=new Nn(Dt.comparator);function Mo(){return D9}const Qk=new Nn(Dt.comparator);function Sd(...e){let t=Qk;for(const n of e)t=t.insert(n.key,n);return t}function Xk(e){let t=Qk;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Vl(){return Fd()}function Zk(){return Fd()}function Fd(){return new ac(e=>e.toString(),(e,t)=>e.isEqual(t))}const M9=new Nn(Dt.comparator),N9=new Fn(Dt.comparator);function fe(...e){let t=N9;for(const n of e)t=t.add(n);return t}const k9=new Fn(ee);function P9(){return k9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sy(t)?"-0":t}}function Jk(e){return{integerValue:""+e}}function O9(e,t){return l9(t)?Jk(t):ZE(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this._=void 0}}function L9(e,t,n){return e instanceof gf?function(s,r){const a={fields:{[Ok]:{stringValue:Pk},[Vk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&KE(r)&&(r=i_(r)),r&&(a.fields[Lk]=r),{mapValue:a}}(n,t):e instanceof yf?eP(e,t):e instanceof _f?nP(e,t):function(s,r){const a=tP(s,r),c=P1(a)+P1(s.Ie);return sw(a)&&sw(s.Ie)?Jk(c):ZE(s.serializer,c)}(e,t)}function V9(e,t,n){return e instanceof yf?eP(e,t):e instanceof _f?nP(e,t):n}function tP(e,t){return e instanceof ly?function(i){return sw(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class gf extends a_{}class yf extends a_{constructor(t){super(),this.elements=t}}function eP(e,t){const n=iP(t);for(const i of e.elements)n.some(s=>Pr(s,i))||n.push(i);return{arrayValue:{values:n}}}class _f extends a_{constructor(t){super(),this.elements=t}}function nP(e,t){let n=iP(t);for(const i of e.elements)n=n.filter(s=>!Pr(s,i));return{arrayValue:{values:n}}}class ly extends a_{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function P1(e){return Tn(e.integerValue||e.doubleValue)}function iP(e){return YE(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(t,n){this.field=t,this.transform=n}}function U9(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof yf&&s instanceof yf||i instanceof _f&&s instanceof _f?Mu(i.elements,s.elements,Pr):i instanceof ly&&s instanceof ly?Pr(i.Ie,s.Ie):i instanceof gf&&s instanceof gf}(e.transform,t.transform)}class F9{constructor(t,n){this.version=t,this.transformResults=n}}class Ni{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ni}static exists(t){return new Ni(void 0,t)}static updateTime(t){return new Ni(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ig(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class l_{}function sP(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new c_(e.key,Ni.none()):new Kf(e.key,e.data,Ni.none());{const n=e.data,i=zi.empty();let s=new Fn(li.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new Wa(e.key,i,new cs(s.toArray()),Ni.none())}}function B9(e,t,n){e instanceof Kf?function(s,r,a){const c=s.value.clone(),u=L1(s.fieldTransforms,r,a.transformResults);c.setAll(u),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):e instanceof Wa?function(s,r,a){if(!Ig(s.precondition,r))return void r.convertToUnknownDocument(a.version);const c=L1(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(rP(s)),u.setAll(c),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function Bd(e,t,n,i){return e instanceof Kf?function(r,a,c,u){if(!Ig(r.precondition,a))return c;const d=r.value.clone(),f=V1(r.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(e,t,n,i):e instanceof Wa?function(r,a,c,u){if(!Ig(r.precondition,a))return c;const d=V1(r.fieldTransforms,u,a),f=a.data;return f.setAll(rP(r)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(e,t,n,i):function(r,a,c){return Ig(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(e,t,n)}function z9(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=tP(i.transform,s||null);r!=null&&(n===null&&(n=zi.empty()),n.set(i.field,r))}return n||null}function O1(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Mu(i,s,(r,a)=>U9(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Kf extends l_{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wa extends l_{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function rP(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function L1(e,t,n){const i=new Map;Pe(e.length===n.length);for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,c=t.data.field(r.field);i.set(r.field,V9(a,c,n[s]))}return i}function V1(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,L9(r,a,t))}return i}class c_ extends l_{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H9 extends l_{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&B9(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Bd(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Bd(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=Zk();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let c=this.applyToLocalView(a,r.mutatedFields);c=n.has(s.key)?null:c;const u=sP(a,c);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Gt.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),fe())}isEqual(t){return this.batchId===t.batchId&&Mu(this.mutations,t.mutations,(n,i)=>O1(n,i))&&Mu(this.baseMutations,t.baseMutations,(n,i)=>O1(n,i))}}class JE{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){Pe(t.mutations.length===i.length);let s=function(){return M9}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new JE(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In,be;function W9(e){switch(e){case lt.OK:return Bt();case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return Bt()}}function oP(e){if(e===void 0)return Do("GRPC error has no .code"),lt.UNKNOWN;switch(e){case In.OK:return lt.OK;case In.CANCELLED:return lt.CANCELLED;case In.UNKNOWN:return lt.UNKNOWN;case In.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case In.INTERNAL:return lt.INTERNAL;case In.UNAVAILABLE:return lt.UNAVAILABLE;case In.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case In.NOT_FOUND:return lt.NOT_FOUND;case In.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case In.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case In.ABORTED:return lt.ABORTED;case In.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case In.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case In.DATA_LOSS:return lt.DATA_LOSS;default:return Bt()}}(be=In||(In={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=new Ca([4294967295,4294967295],0);function j1(e){const t=Ik().encode(e),n=new Ek;return n.update(t),new Uint8Array(n.digest())}function U1(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Ca([n,i],0),new Ca([s,r],0)]}class tT{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ad(`Invalid padding: ${n}`);if(i<0)throw new Ad(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ad(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ad(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=Ca.fromNumber(this.Ee)}Ae(t,n,i){let s=t.add(n.multiply(Ca.fromNumber(i)));return s.compare(K9)===1&&(s=new Ca([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=j1(t),[i,s]=U1(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(i,s,r);if(!this.Re(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new tT(r,s,n);return i.forEach(c=>a.insert(c)),a}insert(t){if(this.Ee===0)return;const n=j1(t),[i,s]=U1(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(i,s,r);this.Ve(a)}}Ve(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Ad extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,Yf.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new u_(Gt.min(),s,new Nn(ee),Mo(),fe())}}class Yf{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Yf(i,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(t,n,i,s){this.me=t,this.removedTargetIds=n,this.key=i,this.fe=s}}class aP{constructor(t,n){this.targetId=t,this.ge=n}}class lP{constructor(t,n,i=ci.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class F1{constructor(){this.pe=0,this.ye=B1(),this.we=ci.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=fe(),n=fe(),i=fe();return this.ye.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Bt()}}),new Yf(this.we,this.Se,t,n,i)}Me(){this.be=!1,this.ye=B1()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Pe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Y9{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Mo(),this.$e=Gm(),this.Ue=Gm(),this.Ke=new Nn(ee)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const i=this.He(n);switch(t.state){case 0:this.Je(n)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(t.resumeToken));break;default:Bt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((i,s)=>{this.Je(s)&&n(s)})}Ze(t){const n=t.targetId,i=t.ge.count,s=this.Xe(n);if(s){const r=s.target;if(ow(r))if(i===0){const a=new Dt(r.path);this.ze(n,a,yi.newNoDocument(a,Gt.min()))}else Pe(i===1);else{const a=this.et(n);if(a!==i){const c=this.tt(t),u=c?this.nt(c,t,a):1;if(u!==0){this.Ye(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,d)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,c;try{a=Pa(i).toUint8Array()}catch(u){if(u instanceof kk)return Du("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new tT(a,s,r)}catch(u){return Du(u instanceof Ad?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ee===0?null:c}nt(t,n,i){return n.ge.count===i-this.st(t,n.targetId)?0:2}st(t,n){const i=this.ke.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.ke.it(),c=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(c)||(this.ze(n,r,null),s++)}),s}ot(t){const n=new Map;this.qe.forEach((r,a)=>{const c=this.Xe(a);if(c){if(r.current&&ow(c.target)){const u=new Dt(c.target.path);this._t(u).has(a)||this.ut(a,u)||this.ze(a,u,yi.newNoDocument(u,t))}r.ve&&(n.set(a,r.Fe()),r.Me())}});let i=fe();this.Ue.forEach((r,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Xe(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(r))}),this.Qe.forEach((r,a)=>a.setReadTime(t));const s=new u_(t,n,this.Ke,this.Qe,i);return this.Qe=Mo(),this.$e=Gm(),this.Ue=Gm(),this.Ke=new Nn(ee),s}Ge(t,n){if(!this.Je(t))return;const i=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(t))}ze(t,n,i){if(!this.Je(t))return;const s=this.He(t);this.ut(t,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(t)),this.Ue=this.Ue.insert(n,this.ct(n).add(t)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new F1,this.qe.set(t,n)),n}ct(t){let n=this.Ue.get(t);return n||(n=new Fn(ee),this.Ue=this.Ue.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Fn(ee),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||Et("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new F1),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function Gm(){return new Nn(Dt.comparator)}function B1(){return new Nn(Dt.comparator)}const Q9={asc:"ASCENDING",desc:"DESCENDING"},X9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z9={and:"AND",or:"OR"};class J9{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function cw(e,t){return e.useProto3Json||n_(t)?t:{value:t}}function cy(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function cP(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tH(e,t){return cy(e,t.toTimestamp())}function Rr(e){return Pe(!!e),Gt.fromTimestamp(function(n){const i=ka(n);return new Qe(i.seconds,i.nanos)}(e))}function eT(e,t){return uw(e,t).canonicalString()}function uw(e,t){const n=function(s){return new sn(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function uP(e){const t=sn.fromString(e);return Pe(mP(t)),t}function hw(e,t){return eT(e.databaseId,t.path)}function Y0(e,t){const n=uP(t);if(n.get(1)!==e.databaseId.projectId)throw new wt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Dt(dP(n))}function hP(e,t){return eT(e.databaseId,t)}function eH(e){const t=uP(e);return t.length===4?sn.emptyPath():dP(t)}function dw(e){return new sn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dP(e){return Pe(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function z1(e,t,n){return{name:hw(e,t),fields:n.value.mapValue.fields}}function nH(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Bt()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(d,f){return d.useProto3Json?(Pe(f===void 0||typeof f=="string"),ci.fromBase64String(f||"")):(Pe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ci.fromUint8Array(f||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(d){const f=d.code===void 0?lt.UNKNOWN:oP(d.code);return new wt(f,d.message||"")}(a);n=new lP(i,s,r,c||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Y0(e,i.document.name),r=Rr(i.document.updateTime),a=i.document.createTime?Rr(i.document.createTime):Gt.min(),c=new zi({mapValue:{fields:i.document.fields}}),u=yi.newFoundDocument(s,r,a,c),d=i.targetIds||[],f=i.removedTargetIds||[];n=new Dg(d,f,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Y0(e,i.document),r=i.readTime?Rr(i.readTime):Gt.min(),a=yi.newNoDocument(s,r),c=i.removedTargetIds||[];n=new Dg([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Y0(e,i.document),r=i.removedTargetIds||[];n=new Dg([],r,s,null)}else{if(!("filter"in t))return Bt();{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new G9(s,r),c=i.targetId;n=new aP(c,a)}}return n}function iH(e,t){let n;if(t instanceof Kf)n={update:z1(e,t.key,t.value)};else if(t instanceof c_)n={delete:hw(e,t.key)};else if(t instanceof Wa)n={update:z1(e,t.key,t.data),updateMask:dH(t.fieldMask)};else{if(!(t instanceof H9))return Bt();n={verify:hw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const c=a.transform;if(c instanceof gf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof yf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _f)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ly)return{fieldPath:a.field.canonicalString(),increment:c.Ie};throw Bt()}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:tH(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Bt()}(e,t.precondition)),n}function sH(e,t){return e&&e.length>0?(Pe(t!==void 0),e.map(n=>function(s,r){let a=s.updateTime?Rr(s.updateTime):Rr(r);return a.isEqual(Gt.min())&&(a=Rr(r)),new F9(a,s.transformResults||[])}(n,t))):[]}function rH(e,t){return{documents:[hP(e,t.path)]}}function oH(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=hP(e,s);const r=function(d){if(d.length!==0)return pP(tr.create(d,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(d){if(d.length!==0)return d.map(f=>function(y){return{field:lu(y.field),direction:cH(y.dir)}}(f))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const c=cw(e,t.limit);return c!==null&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{ht:n,parent:s}}function aH(e){let t=eH(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Pe(i===1);const f=n.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let r=[];n.where&&(r=function(m){const y=fP(m);return y instanceof tr&&Hk(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(y=>function(w){return new mf(cu(w.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(m){let y;return y=typeof m=="object"?m.value:m,n_(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,v=m.values||[];return new ay(v,y)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const y=!m.before,v=m.values||[];return new ay(v,y)}(n.endAt)),A9(t,s,a,r,c,"F",u,d)}function lH(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function fP(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=cu(n.unaryFilter.field);return Dn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=cu(n.unaryFilter.field);return Dn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cu(n.unaryFilter.field);return Dn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=cu(n.unaryFilter.field);return Dn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}(e):e.fieldFilter!==void 0?function(n){return Dn.create(cu(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return tr.create(n.compositeFilter.filters.map(i=>fP(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Bt()}}(n.compositeFilter.op))}(e):Bt()}function cH(e){return Q9[e]}function uH(e){return X9[e]}function hH(e){return Z9[e]}function lu(e){return{fieldPath:e.canonicalString()}}function cu(e){return li.fromServerFormat(e.fieldPath)}function pP(e){return e instanceof Dn?function(n){if(n.op==="=="){if(I1(n.value))return{unaryFilter:{field:lu(n.field),op:"IS_NAN"}};if(R1(n.value))return{unaryFilter:{field:lu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(I1(n.value))return{unaryFilter:{field:lu(n.field),op:"IS_NOT_NAN"}};if(R1(n.value))return{unaryFilter:{field:lu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lu(n.field),op:uH(n.op),value:n.value}}}(e):e instanceof tr?function(n){const i=n.getFilters().map(s=>pP(s));return i.length===1?i[0]:{compositeFilter:{op:hH(n.op),filters:i}}}(e):Bt()}function dH(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function mP(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(t,n,i,s,r=Gt.min(),a=Gt.min(),c=ci.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(t){return new ba(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(t){this.Tt=t}}function pH(e){const t=aH({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?lw(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(){this.Tn=new gH}addToCollectionParentIndex(t,n){return this.Tn.add(n),ut.resolve()}getCollectionParents(t,n){return ut.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return ut.resolve()}deleteFieldIndex(t,n){return ut.resolve()}deleteAllFieldIndexes(t){return ut.resolve()}createTargetIndexes(t,n){return ut.resolve()}getDocumentsMatchingTarget(t,n){return ut.resolve(null)}getIndexType(t,n){return ut.resolve(0)}getFieldIndexes(t,n){return ut.resolve([])}getNextCollectionGroupToUpdate(t){return ut.resolve(null)}getMinOffset(t,n){return ut.resolve(Na.min())}getMinOffsetFromCollectionGroup(t,n){return ut.resolve(Na.min())}updateCollectionGroup(t,n,i){return ut.resolve()}updateIndexEntries(t,n){return ut.resolve()}}class gH{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Fn(sn.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Fn(sn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gP=41943040;class Fi{static withCacheSize(t){return new Fi(t,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(gP,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Pu(0)}static Kn(){return new Pu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="LruGarbageCollector",yH=1048576;function $1([e,t],[n,i]){const s=ee(e,n);return s===0?ee(t,i):s}class _H{constructor(t){this.Hn=t,this.buffer=new Fn($1),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();$1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vH{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Et(q1,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xu(n)?Et(q1,"Ignoring IndexedDB error during garbage collection: ",n):await Qu(n)}await this.er(3e5)})}}class bH{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return ut.resolve(e_.ae);const i=new _H(n);return this.tr.forEachTarget(t,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(t,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.tr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),ut.resolve(H1)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H1):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let i,s,r,a,c,u,d;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s))).next(m=>(i=m,c=Date.now(),this.removeTargets(t,i,n))).next(m=>(r=m,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(m=>(d=Date.now(),ou()<=le.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${r} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),ut.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:m})))}}function wH(e,t){return new bH(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(){this.changes=new ac(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,yi.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ut.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&Bd(i.mutation,s,cs.empty(),Qe.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,fe()).next(()=>i))}getLocalViewOfDocuments(t,n,i=fe()){const s=Vl();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=Sd();return r.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=Vl();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,fe()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,c)=>{n.set(a,c)})})}computeViews(t,n,i,s){let r=Mo();const a=Fd(),c=function(){return Fd()}();return n.forEach((u,d)=>{const f=i.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Wa)?r=r.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Bd(f.mutation,d,f.mutation.getFieldMask(),Qe.now())):a.set(d.key,cs.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new TH(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(t,n){const i=Fd();let s=new Nn((a,c)=>a-c),r=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=i.get(u)||cs.empty();f=c.applyToLocalView(d,f),i.set(u,f);const m=(s.get(c.batchId)||fe()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=Zk();f.forEach(y=>{if(!r.has(y)){const v=sP(n.get(y),i.get(y));v!==null&&m.set(y,v),r=r.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(t,d,m))}return ut.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return Dt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Wk(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):ut.resolve(Vl());let c=hf,u=r;return a.next(d=>ut.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),r.get(f)?ut.resolve():this.remoteDocumentCache.getEntry(t,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(t,d,r)).next(()=>this.computeViews(t,u,d,fe())).next(f=>({batchId:c,changes:Xk(f)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Dt(n)).next(i=>{let s=Sd();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=Sd();return this.indexManager.getCollectionParents(t,r).next(c=>ut.forEach(c,u=>{const d=function(m,y){return new Zu(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,d,i,s).next(f=>{f.forEach((m,y)=>{a=a.insert(m,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,yi.newInvalidDocument(f)))});let c=Sd();return a.forEach((u,d)=>{const f=r.get(u);f!==void 0&&Bd(f.mutation,d,cs.empty(),Qe.now()),o_(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return ut.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rr(s.createTime)}}(n)),ut.resolve()}getNamedQuery(t,n){return ut.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:pH(s.bundledQuery),readTime:Rr(s.readTime)}}(n)),ut.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(){this.overlays=new Nn(Dt.comparator),this.Rr=new Map}getOverlay(t,n){return ut.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Vl();return ut.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.Et(t,n,r)}),ut.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Rr.delete(i)),ut.resolve()}getOverlaysForCollection(t,n,i){const s=Vl(),r=n.length+1,a=new Dt(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return ut.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Nn((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let f=r.get(d.largestBatchId);f===null&&(f=Vl(),r=r.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Vl(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return ut.resolve(c)}Et(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new $9(n,i));let r=this.Rr.get(n);r===void 0&&(r=fe(),this.Rr.set(n,r)),this.Rr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{constructor(){this.sessionToken=ci.EMPTY_BYTE_STRING}getSessionToken(t){return ut.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ut.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.Vr=new Fn(Kn.mr),this.gr=new Fn(Kn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const i=new Kn(t,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.wr(new Kn(t,n))}Sr(t,n){t.forEach(i=>this.removeReference(i,n))}br(t){const n=new Dt(new sn([])),i=new Kn(n,t),s=new Kn(n,t+1),r=[];return this.gr.forEachInRange([i,s],a=>{this.wr(a),r.push(a.key)}),r}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new Dt(new sn([])),i=new Kn(n,t),s=new Kn(n,t+1);let r=fe();return this.gr.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new Kn(t,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Kn{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return Dt.comparator(t.key,n.key)||ee(t.Cr,n.Cr)}static pr(t,n){return ee(t.Cr,n.Cr)||Dt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Fn(Kn.mr)}checkEmpty(t){return ut.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new q9(r,n,i,s);this.mutationQueue.push(a);for(const c of s)this.Mr=this.Mr.add(new Kn(c.key,r)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return ut.resolve(a)}lookupMutationBatch(t,n){return ut.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.Nr(i),r=s<0?0:s;return ut.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ut.resolve(this.mutationQueue.length===0?WE:this.Fr-1)}getAllMutationBatches(t){return ut.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Kn(n,0),s=new Kn(n,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([i,s],a=>{const c=this.Or(a.Cr);r.push(c)}),ut.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Fn(ee);return n.forEach(s=>{const r=new Kn(s,0),a=new Kn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([r,a],c=>{i=i.add(c.Cr)})}),ut.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;Dt.isDocumentKey(r)||(r=r.child(""));const a=new Kn(new Dt(r),0);let c=new Fn(ee);return this.Mr.forEachWhile(u=>{const d=u.key.path;return!!i.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Cr)),!0)},a),ut.resolve(this.Br(c))}Br(t){const n=[];return t.forEach(i=>{const s=this.Or(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){Pe(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ut.forEach(n.mutations,s=>{const r=new Kn(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,n){const i=new Kn(n,0),s=this.Mr.firstAfterOrEqual(i);return ut.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,ut.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(t){this.kr=t,this.docs=function(){return new Nn(Dt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ut.resolve(i?i.document.mutableCopy():yi.newInvalidDocument(n))}getEntries(t,n){let i=Mo();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():yi.newInvalidDocument(s))}),ut.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=Mo();const a=n.path,c=new Dt(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||s9(i9(f),i)<=0||(s.has(f.key)||o_(n,f))&&(r=r.insert(f.key,f.mutableCopy()))}return ut.resolve(r)}getAllFromCollectionGroup(t,n,i,s){Bt()}qr(t,n){return ut.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new DH(this)}getSize(t){return ut.resolve(this.size)}}class DH extends EH{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(t,s)):this.Ir.removeEntry(i)}),ut.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(t){this.persistence=t,this.Qr=new ac(n=>QE(n),XE),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new nT,this.targetCount=0,this.Kr=Pu.Un()}forEachTarget(t,n){return this.Qr.forEach((i,s)=>n(s)),ut.resolve()}getLastRemoteSnapshotVersion(t){return ut.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ut.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),ut.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),ut.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Kr=new Pu(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,ut.resolve()}updateTargetData(t,n){return this.zn(n),ut.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,ut.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.Qr.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Qr.delete(a),r.push(this.removeMatchingKeysForTargetId(t,c.targetId)),s++)}),ut.waitFor(r).next(()=>s)}getTargetCount(t){return ut.resolve(this.targetCount)}getTargetData(t,n){const i=this.Qr.get(n)||null;return ut.resolve(i)}addMatchingKeys(t,n,i){return this.Ur.yr(n,i),ut.resolve()}removeMatchingKeys(t,n,i){this.Ur.Sr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),ut.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Ur.br(n),ut.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Ur.vr(n);return ut.resolve(i)}containsKey(t,n){return ut.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new e_(0),this.zr=!1,this.zr=!0,this.jr=new CH,this.referenceDelegate=t(this),this.Hr=new MH(this),this.indexManager=new mH,this.remoteDocumentCache=function(s){return new IH(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new fH(n),this.Yr=new SH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new AH,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Wr[t.toKey()];return i||(i=new RH(n,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,i){Et("MemoryPersistence","Starting transaction:",t);const s=new NH(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(r=>this.referenceDelegate.Xr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}ei(t,n){return ut.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,n)))}}class NH extends o9{constructor(t){super(),this.currentSequenceNumber=t}}class iT{constructor(t){this.persistence=t,this.ti=new nT,this.ni=null}static ri(t){return new iT(t)}get ii(){if(this.ni)return this.ni;throw Bt()}addReference(t,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),ut.resolve()}removeReference(t,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),ut.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),ut.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.ii.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ut.forEach(this.ii,i=>{const s=Dt.fromPath(i);return this.si(t,s).next(r=>{r||n.removeEntry(s,Gt.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return ut.or([()=>ut.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class uy{constructor(t,n){this.persistence=t,this.oi=new ac(i=>c9(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=wH(this,n)}static ri(t,n){return new uy(t,n)}Zr(){}Xr(t){return ut.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}sr(t){let n=0;return this.rr(t,i=>{n++}).next(()=>n)}rr(t,n){return ut.forEach(this.oi,(i,s)=>this.ar(t,i,s).next(r=>r?ut.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.qr(t,a=>this.ar(t,a,n).next(c=>{c||(i++,r.removeEntry(a,Gt.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),ut.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ut.resolve()}removeReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ut.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),ut.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Cg(t.data.value)),n}ar(t,n,i){return ut.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.oi.get(n);return ut.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Hi=i,this.Ji=s}static Yi(t,n){let i=fe(),s=fe();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new sT(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return hB()?8:a9(Si())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.rs(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ss(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new kH;return this._s(t,n,a).next(c=>{if(r.result=c,this.Xi)return this.us(t,n,a,c.size)})}).next(()=>r.result)}us(t,n,i,s){return i.documentReadCount<this.es?(ou()<=le.DEBUG&&Et("QueryEngine","SDK will not create cache indexes for query:",au(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ut.resolve()):(ou()<=le.DEBUG&&Et("QueryEngine","Query:",au(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(ou()<=le.DEBUG&&Et("QueryEngine","The SDK decides to create cache indexes for query:",au(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Cr(n))):ut.resolve())}rs(t,n){if(k1(n))return ut.resolve(null);let i=Cr(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=lw(n,null,"F"),i=Cr(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=fe(...r);return this.ns.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,i).next(u=>{const d=this.cs(n,c);return this.ls(n,d,a,u.readTime)?this.rs(t,lw(n,null,"F")):this.hs(t,d,n,u)}))})))}ss(t,n,i,s){return k1(n)||s.isEqual(Gt.min())?ut.resolve(null):this.ns.getDocuments(t,i).next(r=>{const a=this.cs(n,r);return this.ls(n,a,i,s)?ut.resolve(null):(ou()<=le.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),au(n)),this.hs(t,a,n,n9(s,hf)).next(c=>c))})}cs(t,n){let i=new Fn(Yk(t));return n.forEach((s,r)=>{o_(t,r)&&(i=i.add(r))}),i}ls(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}_s(t,n,i){return ou()<=le.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",au(n)),this.ns.getDocumentsMatchingQuery(t,n,Na.min(),i)}hs(t,n,i,s){return this.ns.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="LocalStore",OH=3e8;class LH{constructor(t,n,i,s){this.persistence=t,this.Ps=n,this.serializer=s,this.Ts=new Nn(ee),this.Is=new ac(r=>QE(r),XE),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xH(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function VH(e,t,n,i){return new LH(e,t,n,i)}async function _P(e,t){const n=Wt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.As(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],c=[];let u=fe();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of r){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(i,u).next(d=>({Rs:d,removedBatchIds:a,addedBatchIds:c}))})})}function jH(e,t){const n=Wt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.ds.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,y=m.keys();let v=ut.resolve();return y.forEach(w=>{v=v.next(()=>f.getEntry(u,w)).next(T=>{const x=d.docVersions.get(w);Pe(x!==null),T.version.compareTo(x)<0&&(m.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),f.addEntry(T)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=fe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function vP(e){const t=Wt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function UH(e,t){const n=Wt(e),i=t.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const c=[];t.targetChanges.forEach((f,m)=>{const y=s.get(m);if(!y)return;c.push(n.Hr.removeMatchingKeys(r,f.removedDocuments,m).next(()=>n.Hr.addMatchingKeys(r,f.addedDocuments,m)));let v=y.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(m)!==null?v=v.withResumeToken(ci.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,i)),s=s.insert(m,v),function(T,x,C){return T.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=OH?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(y,v,f)&&c.push(n.Hr.updateTargetData(r,v))});let u=Mo(),d=fe();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(r,f))}),c.push(FH(r,a,t.documentUpdates).next(f=>{u=f.Vs,d=f.fs})),!i.isEqual(Gt.min())){const f=n.Hr.getLastRemoteSnapshotVersion(r).next(m=>n.Hr.setTargetsMetadata(r,r.currentSequenceNumber,i));c.push(f)}return ut.waitFor(c).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,d)).next(()=>u)}).then(r=>(n.Ts=s,r))}function FH(e,t,n){let i=fe(),s=fe();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=Mo();return n.forEach((c,u)=>{const d=r.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Gt.min())?(t.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(u),a=a.insert(c,u)):Et(rT,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Vs:a,fs:s}})}function BH(e,t){const n=Wt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=WE),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function zH(e,t){const n=Wt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Hr.getTargetData(i,t).next(r=>r?(s=r,ut.resolve(s)):n.Hr.allocateTargetId(i).next(a=>(s=new ba(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(t,i.targetId)),i})}async function fw(e,t,n){const i=Wt(e),s=i.Ts.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Xu(a))throw a;Et(rT,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ts=i.Ts.remove(t),i.Is.delete(s.target)}function G1(e,t,n){const i=Wt(e);let s=Gt.min(),r=fe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const m=Wt(u),y=m.Is.get(f);return y!==void 0?ut.resolve(m.Ts.get(y)):m.Hr.getTargetData(d,f)}(i,a,Cr(t)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(a,c.targetId).next(u=>{r=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(a,t,n?s:Gt.min(),n?r:fe())).next(c=>(HH(i,R9(t),c),{documents:c,gs:r})))}function HH(e,t,n){let i=e.Es.get(t)||Gt.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Es.set(t,i)}class W1{constructor(){this.activeTargetIds=P9()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qH{constructor(){this.ho=new W1,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,i){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new W1,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="ConnectivityMonitor";class Y1{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Et(K1,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Et(K1,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm=null;function pw(){return Wm===null?Wm=function(){return 268435456+Math.round(2147483648*Math.random())}():Wm++,"0x"+Wm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="RestConnection",GH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WH{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===ry?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(t,n,i,s,r){const a=pw(),c=this.bo(t,n.toUriEncodedString());Et(Q0,`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,r),this.vo(t,c,u,i).then(d=>(Et(Q0,`Received RPC '${t}' ${a}: `,d),d),d=>{throw Du(Q0,`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Co(t,n,i,s,r,a){return this.So(t,n,i,s,r)}Do(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}bo(t,n){const i=GH[t];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="WebChannelConnection";class YH extends WH{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,i,s){const r=pw();return new Promise((a,c)=>{const u=new Tk;u.setWithCredentials(!0),u.listenOnce(xk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ag.NO_ERROR:const f=u.getResponseJson();Et(di,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(f)),a(f);break;case Ag.TIMEOUT:Et(di,`RPC '${t}' ${r} timed out`),c(new wt(lt.DEADLINE_EXCEEDED,"Request time out"));break;case Ag.HTTP_ERROR:const m=u.getStatus();if(Et(di,`RPC '${t}' ${r} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const w=function(x){const C=x.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(C)>=0?C:lt.UNKNOWN}(v.status);c(new wt(w,v.message))}else c(new wt(lt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new wt(lt.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{Et(di,`RPC '${t}' ${r} completed.`)}});const d=JSON.stringify(s);Et(di,`RPC '${t}' ${r} sending request:`,s),u.send(n,"POST",d,i,15)})}Wo(t,n,i){const s=pw(),r=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Ck(),c=Ak(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const f=r.join("");Et(di,`Creating RPC '${t}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);let y=!1,v=!1;const w=new KH({Fo:x=>{v?Et(di,`Not sending because RPC '${t}' stream ${s} is closed:`,x):(y||(Et(di,`Opening RPC '${t}' stream ${s} transport.`),m.open(),y=!0),Et(di,`RPC '${t}' stream ${s} sending:`,x),m.send(x))},Mo:()=>m.close()}),T=(x,C,k)=>{x.listen(C,M=>{try{k(M)}catch(z){setTimeout(()=>{throw z},0)}})};return T(m,xd.EventType.OPEN,()=>{v||(Et(di,`RPC '${t}' stream ${s} transport opened.`),w.Qo())}),T(m,xd.EventType.CLOSE,()=>{v||(v=!0,Et(di,`RPC '${t}' stream ${s} transport closed`),w.Uo())}),T(m,xd.EventType.ERROR,x=>{v||(v=!0,Du(di,`RPC '${t}' stream ${s} transport errored:`,x),w.Uo(new wt(lt.UNAVAILABLE,"The operation could not be completed")))}),T(m,xd.EventType.MESSAGE,x=>{var C;if(!v){const k=x.data[0];Pe(!!k);const M=k,z=(M==null?void 0:M.error)||((C=M[0])===null||C===void 0?void 0:C.error);if(z){Et(di,`RPC '${t}' stream ${s} received error:`,z);const j=z.status;let $=function(N){const L=In[N];if(L!==void 0)return oP(L)}(j),O=z.message;$===void 0&&($=lt.INTERNAL,O="Unknown error status: "+j+" with message "+z.message),v=!0,w.Uo(new wt($,O)),m.close()}else Et(di,`RPC '${t}' stream ${s} received:`,k),w.Ko(k)}}),T(c,Sk.STAT_EVENT,x=>{x.stat===tw.PROXY?Et(di,`RPC '${t}' stream ${s} detected buffering proxy`):x.stat===tw.NOPROXY&&Et(di,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.$o()},0),w}}function X0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(e){return new J9(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Ti=t,this.timerId=n,this.Go=i,this.zo=s,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-i);s>0&&Et("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="PersistentStream";class wP{constructor(t,n,i,s,r,a,c,u){this.Ti=t,this.n_=i,this.r_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new bP(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===lt.RESOURCE_EXHAUSTED?(Do(n.toString()),Do("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===n&&this.V_(i,s)},i=>{t(()=>{const s=new wt(lt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(t,n){const i=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Et(Q1,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(Et(Q1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QH extends wP{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=nH(this.serializer,t),i=function(r){if(!("targetChange"in r))return Gt.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?Gt.min():a.readTime?Rr(a.readTime):Gt.min()}(t);return this.listener.p_(n,i)}y_(t){const n={};n.database=dw(this.serializer),n.addTarget=function(r,a){let c;const u=a.target;if(c=ow(u)?{documents:rH(r,u)}:{query:oH(r,u).ht},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=cP(r,a.resumeToken);const d=cw(r,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(Gt.min())>0){c.readTime=cy(r,a.snapshotVersion.toTimestamp());const d=cw(r,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,t);const i=lH(this.serializer,t);i&&(n.labels=i),this.I_(n)}w_(t){const n={};n.database=dw(this.serializer),n.removeTarget=t,this.I_(n)}}class XH extends wP{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,n){return this.connection.Wo("Write",t,n)}g_(t){return Pe(!!t.streamToken),this.lastStreamToken=t.streamToken,Pe(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Pe(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const n=sH(t.writeResults,t.commitTime),i=Rr(t.commitTime);return this.listener.v_(i,n)}C_(){const t={};t.database=dw(this.serializer),this.I_(t)}b_(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>iH(this.serializer,i))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{}class JH extends ZH{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new wt(lt.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.So(t,uw(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new wt(lt.UNKNOWN,r.toString())})}Co(t,n,i,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Co(t,uw(n,i),s,a,c,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new wt(lt.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class tq{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Do(n),this.N_=!1):Et("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql="RemoteStore";class eq{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To(a=>{i.enqueueAndForget(async()=>{lc(this)&&(Et(Ql,"Restarting streams for network reachability change."),await async function(u){const d=Wt(u);d.W_.add(4),await Qf(d),d.j_.set("Unknown"),d.W_.delete(4),await d_(d)}(this))})}),this.j_=new tq(i,s)}}async function d_(e){if(lc(e))for(const t of e.G_)await t(!0)}async function Qf(e){for(const t of e.G_)await t(!1)}function EP(e,t){const n=Wt(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),cT(n)?lT(n):Ju(n).c_()&&aT(n,t))}function oT(e,t){const n=Wt(e),i=Ju(n);n.K_.delete(t),i.c_()&&TP(n,t),n.K_.size===0&&(i.c_()?i.P_():lc(n)&&n.j_.set("Unknown"))}function aT(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Gt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ju(e).y_(t)}function TP(e,t){e.H_.Ne(t),Ju(e).w_(t)}function lT(e){e.H_=new Y9({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Ju(e).start(),e.j_.B_()}function cT(e){return lc(e)&&!Ju(e).u_()&&e.K_.size>0}function lc(e){return Wt(e).W_.size===0}function xP(e){e.H_=void 0}async function nq(e){e.j_.set("Online")}async function iq(e){e.K_.forEach((t,n)=>{aT(e,t)})}async function sq(e,t){xP(e),cT(e)?(e.j_.q_(t),lT(e)):e.j_.set("Unknown")}async function rq(e,t,n){if(e.j_.set("Online"),t instanceof lP&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const c of r.targetIds)s.K_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.K_.delete(c),s.H_.removeTarget(c))}(e,t)}catch(i){Et(Ql,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await hy(e,i)}else if(t instanceof Dg?e.H_.We(t):t instanceof aP?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Gt.min()))try{const i=await vP(e.localStore);n.compareTo(i)>=0&&await function(r,a){const c=r.H_.ot(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=r.K_.get(d);f&&r.K_.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=r.K_.get(u);if(!f)return;r.K_.set(u,f.withResumeToken(ci.EMPTY_BYTE_STRING,f.snapshotVersion)),TP(r,u);const m=new ba(f.target,u,d,f.sequenceNumber);aT(r,m)}),r.remoteSyncer.applyRemoteEvent(c)}(e,n)}catch(i){Et(Ql,"Failed to raise snapshot:",i),await hy(e,i)}}async function hy(e,t,n){if(!Xu(t))throw t;e.W_.add(1),await Qf(e),e.j_.set("Offline"),n||(n=()=>vP(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Et(Ql,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await d_(e)})}function SP(e,t){return t().catch(n=>hy(e,n,t))}async function f_(e){const t=Wt(e),n=La(t);let i=t.U_.length>0?t.U_[t.U_.length-1].batchId:WE;for(;oq(t);)try{const s=await BH(t.localStore,i);if(s===null){t.U_.length===0&&n.P_();break}i=s.batchId,aq(t,s)}catch(s){await hy(t,s)}AP(t)&&CP(t)}function oq(e){return lc(e)&&e.U_.length<10}function aq(e,t){e.U_.push(t);const n=La(e);n.c_()&&n.S_&&n.b_(t.mutations)}function AP(e){return lc(e)&&!La(e).u_()&&e.U_.length>0}function CP(e){La(e).start()}async function lq(e){La(e).C_()}async function cq(e){const t=La(e);for(const n of e.U_)t.b_(n.mutations)}async function uq(e,t,n){const i=e.U_.shift(),s=JE.from(i,t,n);await SP(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await f_(e)}async function hq(e,t){t&&La(e).S_&&await async function(i,s){if(function(a){return W9(a)&&a!==lt.ABORTED}(s.code)){const r=i.U_.shift();La(i).h_(),await SP(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await f_(i)}}(e,t),AP(e)&&CP(e)}async function X1(e,t){const n=Wt(e);n.asyncQueue.verifyOperationInProgress(),Et(Ql,"RemoteStore received new credentials");const i=lc(n);n.W_.add(3),await Qf(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await d_(n)}async function dq(e,t){const n=Wt(e);t?(n.W_.delete(2),await d_(n)):t||(n.W_.add(2),await Qf(n),n.j_.set("Unknown"))}function Ju(e){return e.J_||(e.J_=function(n,i,s){const r=Wt(n);return r.M_(),new QH(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{xo:nq.bind(null,e),No:iq.bind(null,e),Lo:sq.bind(null,e),p_:rq.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),cT(e)?lT(e):e.j_.set("Unknown")):(await e.J_.stop(),xP(e))})),e.J_}function La(e){return e.Y_||(e.Y_=function(n,i,s){const r=Wt(n);return r.M_(),new XH(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:lq.bind(null,e),Lo:hq.bind(null,e),D_:cq.bind(null,e),v_:uq.bind(null,e)}),e.G_.push(async t=>{t?(e.Y_.h_(),await f_(e)):(await e.Y_.stop(),e.U_.length>0&&(Et(Ql,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))})),e.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new To,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,c=new uT(t,n,a,s,r);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new wt(lt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hT(e,t){if(Do("AsyncQueue",`${t}: ${e}`),Xu(e))return new wt(lt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{static emptySet(t){return new Tu(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Dt.comparator(n.key,i.key):(n,i)=>Dt.comparator(n.key,i.key),this.keyedMap=Sd(),this.sortedSet=new Nn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Tu)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Tu;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.Z_=new Nn(Dt.comparator)}track(t){const n=t.doc.key,i=this.Z_.get(n);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(n):t.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Bt():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,i)=>{t.push(i)}),t}}class Ou{constructor(t,n,i,s,r,a,c,u,d){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ou(t,n,Tu.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&r_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class pq{constructor(){this.queries=J1(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const s=Wt(n),r=s.queries;s.queries=J1(),r.forEach((a,c)=>{for(const u of c.ta)u.onError(i)})})(this,new wt(lt.ABORTED,"Firestore shutting down"))}}function J1(){return new ac(e=>Kk(e),r_)}async function dT(e,t){const n=Wt(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.na()&&t.ra()&&(i=2):(r=new fq,i=t.ra()?0:1);try{switch(i){case 0:r.ea=await n.onListen(s,!0);break;case 1:r.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=hT(a,`Initialization of query '${au(t.query)}' failed`);return void t.onError(c)}n.queries.set(s,r),r.ta.push(t),t.sa(n.onlineState),r.ea&&t.oa(r.ea)&&pT(n)}async function fT(e,t){const n=Wt(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.ta.indexOf(t);a>=0&&(r.ta.splice(a,1),r.ta.length===0?s=t.ra()?0:1:!r.na()&&t.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function mq(e,t){const n=Wt(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const c of a.ta)c.oa(s)&&(i=!0);a.ea=s}}i&&pT(n)}function gq(e,t,n){const i=Wt(e),s=i.queries.get(t);if(s)for(const r of s.ta)r.onError(n);i.queries.delete(t)}function pT(e){e.ia.forEach(t=>{t.next()})}var mw,tI;(tI=mw||(mw={}))._a="default",tI.Cache="cache";class mT{constructor(t,n,i){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Ou(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=Ou.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==mw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(t){this.key=t}}class IP{constructor(t){this.key=t}}class yq{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=fe(),this.mutatedKeys=fe(),this.ya=Yk(t),this.wa=new Tu(this.ya)}get Sa(){return this.fa}ba(t,n){const i=n?n.Da:new Z1,s=n?n.wa:this.wa;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((f,m)=>{const y=s.get(f),v=o_(this.query,m)?m:null,w=!!y&&this.mutatedKeys.has(y.key),T=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let x=!1;y&&v?y.data.isEqual(v.data)?w!==T&&(i.track({type:3,doc:v}),x=!0):this.va(y,v)||(i.track({type:2,doc:v}),x=!0,(u&&this.ya(v,u)>0||d&&this.ya(v,d)<0)&&(c=!0)):!y&&v?(i.track({type:0,doc:v}),x=!0):y&&!v&&(i.track({type:1,doc:y}),x=!0,(u||d)&&(c=!0)),x&&(v?(a=a.add(v),r=T?r.add(f):r.delete(f)):(a=a.delete(f),r=r.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),r=r.delete(f.key),i.track({type:1,doc:f})}return{wa:a,Da:i,ls:c,mutatedKeys:r}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const a=t.Da.X_();a.sort((f,m)=>function(v,w){const T=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return T(v)-T(w)}(f.type,m.type)||this.ya(f.doc,m.doc)),this.Ca(i),s=s!=null&&s;const c=n&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,d=u!==this.ga;return this.ga=u,a.length!==0||d?{snapshot:new Ou(this.query,t.wa,r,a,t.mutatedKeys,u===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Z1,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=fe(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return t.forEach(i=>{this.pa.has(i)||n.push(new IP(i))}),this.pa.forEach(i=>{t.has(i)||n.push(new RP(i))}),n}Oa(t){this.fa=t.gs,this.pa=fe();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return Ou.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const gT="SyncEngine";class _q{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class vq{constructor(t){this.key=t,this.Ba=!1}}class bq{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new ac(c=>Kk(c),r_),this.qa=new Map,this.Qa=new Set,this.$a=new Nn(Dt.comparator),this.Ua=new Map,this.Ka=new nT,this.Wa={},this.Ga=new Map,this.za=Pu.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function wq(e,t,n=!0){const i=OP(e);let s;const r=i.ka.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Na()):s=await DP(i,t,n,!0),s}async function Eq(e,t){const n=OP(e);await DP(n,t,!0,!1)}async function DP(e,t,n,i){const s=await zH(e.localStore,Cr(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let c;return i&&(c=await Tq(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&EP(e.remoteStore,s),c}async function Tq(e,t,n,i,s){e.Ha=(m,y,v)=>async function(T,x,C,k){let M=x.view.ba(C);M.ls&&(M=await G1(T.localStore,x.query,!1).then(({documents:O})=>x.view.ba(O,M)));const z=k&&k.targetChanges.get(x.targetId),j=k&&k.targetMismatches.get(x.targetId)!=null,$=x.view.applyChanges(M,T.isPrimaryClient,z,j);return nI(T,x.targetId,$.Ma),$.snapshot}(e,m,y,v);const r=await G1(e.localStore,t,!0),a=new yq(t,r.gs),c=a.ba(r.documents),u=Yf.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),d=a.applyChanges(c,e.isPrimaryClient,u);nI(e,n,d.Ma);const f=new _q(t,n,a);return e.ka.set(t,f),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),d.snapshot}async function xq(e,t,n){const i=Wt(e),s=i.ka.get(t),r=i.qa.get(s.targetId);if(r.length>1)return i.qa.set(s.targetId,r.filter(a=>!r_(a,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await fw(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&oT(i.remoteStore,s.targetId),gw(i,s.targetId)}).catch(Qu)):(gw(i,s.targetId),await fw(i.localStore,s.targetId,!0))}async function Sq(e,t){const n=Wt(e),i=n.ka.get(t),s=n.qa.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),oT(n.remoteStore,i.targetId))}async function Aq(e,t,n){const i=kq(e);try{const s=await function(a,c){const u=Wt(a),d=Qe.now(),f=c.reduce((v,w)=>v.add(w.key),fe());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Mo(),T=fe();return u.ds.getEntries(v,f).next(x=>{w=x,w.forEach((C,k)=>{k.isValidDocument()||(T=T.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,w)).next(x=>{m=x;const C=[];for(const k of c){const M=z9(k,m.get(k.key).overlayedDocument);M!=null&&C.push(new Wa(k.key,M,Fk(M.value.mapValue),Ni.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,C,c)}).next(x=>{y=x;const C=x.applyToLocalDocumentSet(m,T);return u.documentOverlayCache.saveOverlays(v,x.batchId,C)})}).then(()=>({batchId:y.batchId,changes:Xk(m)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Wa[a.currentUser.toKey()];d||(d=new Nn(ee)),d=d.insert(c,u),a.Wa[a.currentUser.toKey()]=d}(i,s.batchId,n),await Xf(i,s.changes),await f_(i.remoteStore)}catch(s){const r=hT(s,"Failed to persist write");n.reject(r)}}async function MP(e,t){const n=Wt(e);try{const i=await UH(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Ua.get(r);a&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?Pe(a.Ba):s.removedDocuments.size>0&&(Pe(a.Ba),a.Ba=!1))}),await Xf(n,i,t)}catch(i){await Qu(i)}}function eI(e,t,n){const i=Wt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.ka.forEach((r,a)=>{const c=a.view.sa(t);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=Wt(a);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const y of m.ta)y.sa(c)&&(d=!0)}),d&&pT(u)}(i.eventManager,t),s.length&&i.La.p_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Cq(e,t,n){const i=Wt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Ua.get(t),r=s&&s.key;if(r){let a=new Nn(Dt.comparator);a=a.insert(r,yi.newNoDocument(r,Gt.min()));const c=fe().add(r),u=new u_(Gt.min(),new Map,new Nn(ee),a,c);await MP(i,u),i.$a=i.$a.remove(r),i.Ua.delete(t),yT(i)}else await fw(i.localStore,t,!1).then(()=>gw(i,t,n)).catch(Qu)}async function Rq(e,t){const n=Wt(e),i=t.batch.batchId;try{const s=await jH(n.localStore,t);kP(n,i,null),NP(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Xf(n,s)}catch(s){await Qu(s)}}async function Iq(e,t,n){const i=Wt(e);try{const s=await function(a,c){const u=Wt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Pe(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(i.localStore,t);kP(i,t,n),NP(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Xf(i,s)}catch(s){await Qu(s)}}function NP(e,t){(e.Ga.get(t)||[]).forEach(n=>{n.resolve()}),e.Ga.delete(t)}function kP(e,t,n){const i=Wt(e);let s=i.Wa[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Wa[i.currentUser.toKey()]=s}}function gw(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.qa.get(t))e.ka.delete(i),n&&e.La.Ja(i,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach(i=>{e.Ka.containsKey(i)||PP(e,i)})}function PP(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(oT(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),yT(e))}function nI(e,t,n){for(const i of n)i instanceof RP?(e.Ka.addReference(i.key,t),Dq(e,i)):i instanceof IP?(Et(gT,"Document no longer in limbo: "+i.key),e.Ka.removeReference(i.key,t),e.Ka.containsKey(i.key)||PP(e,i.key)):Bt()}function Dq(e,t){const n=t.key,i=n.path.canonicalString();e.$a.get(n)||e.Qa.has(i)||(Et(gT,"New document in limbo: "+n),e.Qa.add(i),yT(e))}function yT(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Dt(sn.fromString(t)),i=e.za.next();e.Ua.set(i,new vq(n)),e.$a=e.$a.insert(n,i),EP(e.remoteStore,new ba(Cr(s_(n.path)),i,"TargetPurposeLimboResolution",e_.ae))}}async function Xf(e,t,n){const i=Wt(e),s=[],r=[],a=[];i.ka.isEmpty()||(i.ka.forEach((c,u)=>{a.push(i.Ha(u,t,n).then(d=>{var f;if((d||n)&&i.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=sT.Yi(u.targetId,d);r.push(m)}}))}),await Promise.all(a),i.La.p_(s),await async function(u,d){const f=Wt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>ut.forEach(d,y=>ut.forEach(y.Hi,v=>f.persistence.referenceDelegate.addReference(m,y.targetId,v)).next(()=>ut.forEach(y.Ji,v=>f.persistence.referenceDelegate.removeReference(m,y.targetId,v)))))}catch(m){if(!Xu(m))throw m;Et(rT,"Failed to update sequence numbers: "+m)}for(const m of d){const y=m.targetId;if(!m.fromCache){const v=f.Ts.get(y),w=v.snapshotVersion,T=v.withLastLimboFreeSnapshotVersion(w);f.Ts=f.Ts.insert(y,T)}}}(i.localStore,r))}async function Mq(e,t){const n=Wt(e);if(!n.currentUser.isEqual(t)){Et(gT,"User change. New user:",t.toKey());const i=await _P(n.localStore,t);n.currentUser=t,function(r,a){r.Ga.forEach(c=>{c.forEach(u=>{u.reject(new wt(lt.CANCELLED,a))})}),r.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Xf(n,i.Rs)}}function Nq(e,t){const n=Wt(e),i=n.Ua.get(t);if(i&&i.Ba)return fe().add(i.key);{let s=fe();const r=n.qa.get(t);if(!r)return s;for(const a of r){const c=n.ka.get(a);s=s.unionWith(c.view.Sa)}return s}}function OP(e){const t=Wt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=MP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nq.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cq.bind(null,t),t.La.p_=mq.bind(null,t.eventManager),t.La.Ja=gq.bind(null,t.eventManager),t}function kq(e){const t=Wt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rq.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Iq.bind(null,t),t}class dy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=h_(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return VH(this.persistence,new PH,t.initialUser,this.serializer)}Xa(t){return new yP(iT.ri,this.serializer)}Za(t){return new qH}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dy.provider={build:()=>new dy};class Pq extends dy{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Pe(this.persistence.referenceDelegate instanceof uy);const i=this.persistence.referenceDelegate.garbageCollector;return new vH(i,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new yP(i=>uy.ri(i,n),this.serializer)}}class yw{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>eI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mq.bind(null,this.syncEngine),await dq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new pq}()}createDatastore(t){const n=h_(t.databaseInfo.databaseId),i=function(r){return new YH(r)}(t.databaseInfo);return function(r,a,c,u){return new JH(r,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,c){return new eq(i,s,r,a,c)}(this.localStore,this.datastore,t.asyncQueue,n=>eI(this.syncEngine,n,0),function(){return Y1.D()?new Y1:new $H}())}createSyncEngine(t,n){return function(s,r,a,c,u,d,f){const m=new bq(s,r,a,c,u,d);return f&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=Wt(s);Et(Ql,"RemoteStore shutting down."),r.W_.add(5),await Qf(r),r.z_.shutdown(),r.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}yw.provider={build:()=>new yw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Do("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="FirestoreClient";class Oq{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=mi.UNAUTHENTICATED,this.clientId=Dk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{Et(Va,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Et(Va,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new To;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=hT(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Z0(e,t){e.asyncQueue.verifyOperationInProgress(),Et(Va,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await _P(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function iI(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Lq(e);Et(Va,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>X1(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>X1(t.remoteStore,s)),e._onlineComponents=t}async function Lq(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Et(Va,"Using user provided OfflineComponentProvider");try{await Z0(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===lt.FAILED_PRECONDITION||s.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Du("Error using user provided cache. Falling back to memory cache: "+n),await Z0(e,new dy)}}else Et(Va,"Using default OfflineComponentProvider"),await Z0(e,new Pq(void 0));return e._offlineComponents}async function LP(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Et(Va,"Using user provided OnlineComponentProvider"),await iI(e,e._uninitializedComponentsProvider._online)):(Et(Va,"Using default OnlineComponentProvider"),await iI(e,new yw))),e._onlineComponents}function Vq(e){return LP(e).then(t=>t.syncEngine)}async function fy(e){const t=await LP(e),n=t.eventManager;return n.onListen=wq.bind(null,t.syncEngine),n.onUnlisten=xq.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Eq.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Sq.bind(null,t.syncEngine),n}function jq(e,t,n={}){const i=new To;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,c,u,d){const f=new _T({next:y=>{f.su(),a.enqueueAndForget(()=>fT(r,m));const v=y.docs.has(c);!v&&y.fromCache?d.reject(new wt(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&u&&u.source==="server"?d.reject(new wt(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new mT(s_(c.path),f,{includeMetadataChanges:!0,Ta:!0});return dT(r,m)}(await fy(e),e.asyncQueue,t,n,i)),i.promise}function Uq(e,t,n={}){const i=new To;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,c,u,d){const f=new _T({next:y=>{f.su(),a.enqueueAndForget(()=>fT(r,m)),y.fromCache&&u.source==="server"?d.reject(new wt(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new mT(c,f,{includeMetadataChanges:!0,Ta:!0});return dT(r,m)}(await fy(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(e,t,n){if(!n)throw new wt(lt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Fq(e,t,n,i){if(t===!0&&i===!0)throw new wt(lt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function rI(e){if(!Dt.isDocumentKey(e))throw new wt(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function oI(e){if(Dt.isDocumentKey(e))throw new wt(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function p_(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Bt()}function ki(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wt(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=p_(e);throw new wt(lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="firestore.googleapis.com",aI=!0;class lI{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new wt(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UP,this.ssl=aI}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:aI;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=gP;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<yH)throw new wt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Fq("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VP((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new wt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new wt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new wt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class m_{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new wt(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new wt(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lI(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Wz;switch(i.type){case"firstParty":return new Xz(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new wt(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=sI.get(n);i&&(Et("ComponentProvider","Removing Datastore"),sI.delete(n),i.terminate())}(this),Promise.resolve()}}function Bq(e,t,n,i={}){var s;const r=(e=ki(e,m_))._getSettings(),a=Object.assign(Object.assign({},r),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;r.host!==UP&&r.host!==c&&Du("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},r),{host:c,ssl:!1,emulatorOptions:i});if(!Co(u,a)&&(e._setSettings(u),i.mockUserToken)){let d,f;if(typeof i.mockUserToken=="string")d=i.mockUserToken,f=mi.MOCK_USER;else{d=DE(i.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new wt(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new mi(m)}e._authCredentials=new Kz(new Rk(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ka(this.firestore,t,this._query)}}class xi{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new xi(this.firestore,t,this._key)}}class Ia extends Ka{constructor(t,n,i){super(t,n,s_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new xi(this.firestore,null,new Dt(t))}withConverter(t){return new Ia(this.firestore,t,this._path)}}function En(e,t,...n){if(e=Ze(e),jP("collection","path",t),e instanceof m_){const i=sn.fromString(t,...n);return oI(i),new Ia(e,null,i)}{if(!(e instanceof xi||e instanceof Ia))throw new wt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(sn.fromString(t,...n));return oI(i),new Ia(e.firestore,null,i)}}function Qt(e,t,...n){if(e=Ze(e),arguments.length===1&&(t=Dk.newId()),jP("doc","path",t),e instanceof m_){const i=sn.fromString(t,...n);return rI(i),new xi(e,null,new Dt(i))}{if(!(e instanceof xi||e instanceof Ia))throw new wt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(sn.fromString(t,...n));return rI(i),new xi(e.firestore,e instanceof Ia?e.converter:null,new Dt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="AsyncQueue";class uI{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new bP(this,"async_queue_retry"),this.Su=()=>{const i=X0();i&&Et(cI,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const n=X0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=X0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new To;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Xu(t))throw t;Et(cI,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw Do("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(t,n,i){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const s=uT.createAndSchedule(this,t,n,i,r=>this.Fu(r));return this.fu.push(s),s}Du(){this.gu&&Bt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}function hI(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class Or extends m_{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new uI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new uI(t),this._firestoreClient=void 0,await t}}}function g_(e,t){const n=typeof e=="object"?e:Hf(),i=typeof e=="string"?e:ry,s=Lo(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=RE("firestore");r&&Bq(s,...r)}return s}function Zf(e){if(e._terminated)throw new wt(lt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||zq(e),e._firestoreClient}function zq(e){var t,n,i;const s=e._freezeSettings(),r=function(c,u,d,f){return new d9(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,VP(f.experimentalLongPollingOptions),f.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Oq(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Lu(ci.fromBase64String(t))}catch(n){throw new wt(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Lu(ci.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new wt(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new li(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new wt(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new wt(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ee(this._lat,t._lat)||ee(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq=/^__.*__$/;class qq{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Wa(t,this.data,this.fieldMask,n,this.fieldTransforms):new Kf(t,this.data,n,this.fieldTransforms)}}class FP{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Wa(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function BP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}class wT{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new wT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ku({path:i,Qu:!1});return s.$u(t),s}Uu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return py(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(BP(this.Lu)&&Hq.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class $q{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||h_(t)}ju(t,n,i,s=!1){return new wT({Lu:t,methodName:n,zu:i,path:li.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tp(e){const t=e._freezeSettings(),n=h_(e._databaseId);return new $q(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ET(e,t,n,i,s,r={}){const a=e.ju(r.merge||r.mergeFields?2:0,t,n,s);xT("Data must be an object, but it was:",a,i);const c=qP(i,a);let u,d;if(r.merge)u=new cs(a.fieldMask),d=a.fieldTransforms;else if(r.mergeFields){const f=[];for(const m of r.mergeFields){const y=_w(t,m,n);if(!a.contains(y))throw new wt(lt.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);GP(f,y)||f.push(y)}u=new cs(f),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new qq(new zi(c),u,d)}class __ extends y_{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof __}}class TT extends y_{_toFieldTransform(t){return new j9(t.path,new gf)}isEqual(t){return t instanceof TT}}function zP(e,t,n,i){const s=e.ju(1,t,n);xT("Data must be an object, but it was:",s,i);const r=[],a=zi.empty();Ga(i,(u,d)=>{const f=ST(t,u,n);d=Ze(d);const m=s.Uu(f);if(d instanceof __)r.push(f);else{const y=ep(d,m);y!=null&&(r.push(f),a.set(f,y))}});const c=new cs(r);return new FP(a,c,s.fieldTransforms)}function HP(e,t,n,i,s,r){const a=e.ju(1,t,n),c=[_w(t,i,n)],u=[s];if(r.length%2!=0)throw new wt(lt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<r.length;y+=2)c.push(_w(t,r[y])),u.push(r[y+1]);const d=[],f=zi.empty();for(let y=c.length-1;y>=0;--y)if(!GP(d,c[y])){const v=c[y];let w=u[y];w=Ze(w);const T=a.Uu(v);if(w instanceof __)d.push(v);else{const x=ep(w,T);x!=null&&(d.push(v),f.set(v,x))}}const m=new cs(d);return new FP(f,m,a.fieldTransforms)}function Gq(e,t,n,i=!1){return ep(n,e.ju(i?4:3,t))}function ep(e,t){if($P(e=Ze(e)))return xT("Unsupported field value:",t,e),qP(e,t);if(e instanceof y_)return function(i,s){if(!BP(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const c of i){let u=ep(c,s.Ku(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=Ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return O9(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Qe.fromDate(i);return{timestampValue:cy(s.serializer,r)}}if(i instanceof Qe){const r=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cy(s.serializer,r)}}if(i instanceof vT)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lu)return{bytesValue:cP(s.serializer,i._byteString)};if(i instanceof xi){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:eT(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof bT)return function(a,c){return{mapValue:{fields:{[jk]:{stringValue:Uk},[oy]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Wu("VectorValues must only contain numeric values.");return ZE(c.serializer,d)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${p_(i)}`)}(e,t)}function qP(e,t){const n={};return Nk(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ga(e,(i,s)=>{const r=ep(s,t.qu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function $P(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Qe||e instanceof vT||e instanceof Lu||e instanceof xi||e instanceof y_||e instanceof bT)}function xT(e,t,n){if(!$P(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=p_(n);throw i==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+i)}}function _w(e,t,n){if((t=Ze(t))instanceof Jf)return t._internalPath;if(typeof t=="string")return ST(e,t);throw py("Field path arguments must be of type string or ",e,!1,void 0,n)}const Wq=new RegExp("[~\\*/\\[\\]]");function ST(e,t,n){if(t.search(Wq)>=0)throw py(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Jf(...t.split("."))._internalPath}catch{throw py(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function py(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let c=`Function ${t}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new wt(lt.INVALID_ARGUMENT,c+e+u)}function GP(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new xi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Kq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(v_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Kq extends WP{data(){return super.data()}}function v_(e,t){return typeof t=="string"?ST(e,t):t instanceof Jf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new wt(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AT{}class YP extends AT{}function mo(e,t,...n){let i=[];t instanceof AT&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof CT).length,c=r.filter(u=>u instanceof b_).length;if(a>1||a>0&&c>0)throw new wt(lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class b_ extends YP{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new b_(t,n,i)}_apply(t){const n=this._parse(t);return QP(t._query,n),new Ka(t.firestore,t.converter,aw(t._query,n))}_parse(t){const n=tp(t.firestore);return function(r,a,c,u,d,f,m){let y;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new wt(lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){fI(m,f);const w=[];for(const T of m)w.push(dI(u,r,T));y={arrayValue:{values:w}}}else y=dI(u,r,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||fI(m,f),y=Gq(c,a,m,f==="in"||f==="not-in");return Dn.create(d,f,y)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Ll(e,t,n){const i=t,s=v_("where",e);return b_._create(s,i,n)}class CT extends AT{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new CT(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:tr.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const c=r.getFlattenedFilters();for(const u of c)QP(a,u),a=aw(a,u)}(t._query,n),new Ka(t.firestore,t.converter,aw(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class RT extends YP{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new RT(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new wt(lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new wt(lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mf(r,a)}(t._query,this._field,this._direction);return new Ka(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new Zu(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function Cd(e,t="asc"){const n=t,i=v_("orderBy",e);return RT._create(i,n)}function dI(e,t,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new wt(lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wk(t)&&n.indexOf("/")!==-1)throw new wt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(sn.fromString(n));if(!Dt.isDocumentKey(i))throw new wt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return C1(e,new Dt(i))}if(n instanceof xi)return C1(e,n._key);throw new wt(lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${p_(n)}.`)}function fI(e,t){if(!Array.isArray(e)||e.length===0)throw new wt(lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function QP(e,t){const n=function(s,r){for(const a of s)for(const c of a.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new wt(lt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new wt(lt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Yq{convertValue(t,n="none"){switch(Oa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Tn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Pa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Bt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ga(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var n,i,s;const r=(s=(i=(n=t.fields)===null||n===void 0?void 0:n[oy].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>Tn(a.doubleValue));return new bT(r)}convertGeoPoint(t){return new vT(Tn(t.latitude),Tn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=i_(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(df(t));default:return null}}convertTimestamp(t){const n=ka(t);return new Qe(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=sn.fromString(t);Pe(mP(i));const s=new ff(i.get(1),i.get(3)),r=new Dt(i.popFirst(5));return s.isEqual(n)||Do(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class XP extends WP{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Mg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(v_("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Mg extends XP{data(t={}){return super.data(t)}}class ZP{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Rd(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Mg(this._firestore,this._userDataWriter,i.key,i,new Rd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new wt(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Mg(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Rd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>r||c.type!==3).map(c=>{const u=new Mg(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Rd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:Qq(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Qq(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(e){e=ki(e,xi);const t=ki(e.firestore,Or);return jq(Zf(t),e._key).then(n=>tO(t,e,n))}class DT extends Yq{constructor(t){super(),this.firestore=t}convertBytes(t){return new Lu(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new xi(this.firestore,null,n)}}function vf(e){e=ki(e,Ka);const t=ki(e.firestore,Or),n=Zf(t),i=new DT(t);return KP(e._query),Uq(n,e._query).then(s=>new ZP(t,i,e,s))}function Je(e,t,n){e=ki(e,xi);const i=ki(e.firestore,Or),s=IT(e.converter,t,n);return ip(i,[ET(tp(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Ni.none())])}function JP(e,t,n,...i){e=ki(e,xi);const s=ki(e.firestore,Or),r=tp(s);let a;return a=typeof(t=Ze(t))=="string"||t instanceof Jf?HP(r,"updateDoc",e._key,t,n,i):zP(r,"updateDoc",e._key,t),ip(s,[a.toMutation(e._key,Ni.exists(!0))])}function _o(e){return ip(ki(e.firestore,Or),[new c_(e._key,Ni.none())])}function Ng(e,t){const n=ki(e.firestore,Or),i=Qt(e),s=IT(e.converter,t);return ip(n,[ET(tp(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,Ni.exists(!1))]).then(()=>i)}function Id(e,...t){var n,i,s;e=Ze(e);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||hI(t[a])||(r=t[a],a++);const c={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(hI(t[a])){const m=t[a];t[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),t[a+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),t[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(e instanceof xi)d=ki(e.firestore,Or),f=s_(e._key.path),u={next:m=>{t[a]&&t[a](tO(d,e,m))},error:t[a+1],complete:t[a+2]};else{const m=ki(e,Ka);d=ki(m.firestore,Or),f=m._query;const y=new DT(d);u={next:v=>{t[a]&&t[a](new ZP(d,y,m,v))},error:t[a+1],complete:t[a+2]},KP(e._query)}return function(y,v,w,T){const x=new _T(T),C=new mT(v,x,w);return y.asyncQueue.enqueueAndForget(async()=>dT(await fy(y),C)),()=>{x.su(),y.asyncQueue.enqueueAndForget(async()=>fT(await fy(y),C))}}(Zf(d),f,c,u)}function ip(e,t){return function(i,s){const r=new To;return i.asyncQueue.enqueueAndForget(async()=>Aq(await Vq(i),s,r)),r.promise}(Zf(e),t)}function tO(e,t,n){const i=n.docs.get(t._key),s=new DT(e);return new XP(e,s,t._key,i,new Rd(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tp(t)}set(t,n,i){this._verifyNotCommitted();const s=J0(t,this._firestore),r=IT(s.converter,n,i),a=ET(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Ni.none())),this}update(t,n,i,...s){this._verifyNotCommitted();const r=J0(t,this._firestore);let a;return a=typeof(n=Ze(n))=="string"||n instanceof Jf?HP(this._dataReader,"WriteBatch.update",r._key,n,i,s):zP(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(a.toMutation(r._key,Ni.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=J0(t,this._firestore);return this._mutations=this._mutations.concat(new c_(n._key,Ni.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new wt(lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function J0(e,t){if((e=Ze(e)).firestore!==t)throw new wt(lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function as(){return new TT("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(e){return Zf(e=ki(e,Or)),new Xq(e,t=>ip(e,t))}(function(t,n=!0){(function(s){Yu=s})(qa),ks(new ds("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),c=new Or(new Yz(i.getProvider("auth-internal")),new Zz(a,i.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new wt(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ff(d.options.projectId,f)}(a,s),a);return r=Object.assign({useFetchStreams:n},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),Ti(m1,g1,t),Ti(m1,g1,"esm2017")})();var Jq="firebase",t8="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti(Jq,t8,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="firebasestorage.googleapis.com",e8="storageBucket",n8=2*60*1e3,i8=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Vs{constructor(t,n,i=0){super(tb(t),`Firebase Storage: ${n} (${tb(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vr.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return tb(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Lr;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Lr||(Lr={}));function tb(e){return"storage/"+e}function s8(){const e="An unknown error occurred, please check the error payload for server response.";return new Vr(Lr.UNKNOWN,e)}function r8(){return new Vr(Lr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function o8(){return new Vr(Lr.CANCELED,"User canceled the upload/download.")}function a8(e){return new Vr(Lr.INVALID_URL,"Invalid URL '"+e+"'.")}function l8(e){return new Vr(Lr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function pI(e){return new Vr(Lr.INVALID_ARGUMENT,e)}function nO(){return new Vr(Lr.APP_DELETED,"The Firebase app was deleted.")}function c8(e){return new Vr(Lr.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Ys.makeFromUrl(t,n)}catch{return new Ys(t,"")}if(i.path==="")return i;throw l8(t)}static makeFromUrl(t,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function d(z){z.path_=decodeURIComponent(z.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${f}/b/${s}/o${y}`,"i"),w={bucket:1,path:3},T=n===eO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",C=new RegExp(`^https?://${T}/${s}/${x}`,"i"),M=[{regex:c,indices:u,postModify:r},{regex:v,indices:w,postModify:d},{regex:C,indices:{bucket:1,path:2},postModify:d}];for(let z=0;z<M.length;z++){const j=M[z],$=j.regex.exec(t);if($){const O=$[j.indices.bucket];let D=$[j.indices.path];D||(D=""),i=new Ys(O,D),j.postModify(i);break}}if(i==null)throw a8(t);return i}}class u8{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(e,t,n){let i=1,s=null,r=null,a=!1,c=0;function u(){return c===2}let d=!1;function f(...x){d||(d=!0,t.apply(null,x))}function m(x){s=setTimeout(()=>{s=null,e(v,u())},x)}function y(){r&&clearTimeout(r)}function v(x,...C){if(d){y();return}if(x){y(),f.call(null,x,...C);return}if(u()||a){y(),f.call(null,x,...C);return}i<64&&(i*=2);let M;c===1?(c=2,M=0):M=(i+Math.random())*1e3,m(M)}let w=!1;function T(x){w||(w=!0,y(),!d&&(s!==null?(x||(c=2),clearTimeout(s),m(0)):x||(c=1)))}return m(0),r=setTimeout(()=>{a=!0,T(!0)},n),T}function d8(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(e){return e!==void 0}function mI(e,t,n,i){if(i<t)throw pI(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw pI(`Invalid value for '${e}'. Expected ${n} or less.`)}function p8(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const s=t(i)+"="+t(e[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var my;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(my||(my={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(e,t){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(t,n,i,s,r,a,c,u,d,f,m,y=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const t=(i,s)=>{if(s){i(!1,new Km(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&r.addUploadProgressListener(a),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(a),this.pendingConnection_=null;const c=r.getErrorCode()===my.NO_ERROR,u=r.getStatus();if(!c||m8(u,this.additionalRetryCodes_)&&this.retry){const f=r.getErrorCode()===my.ABORT;i(!1,new Km(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;i(!0,new Km(d,r))})},n=(i,s)=>{const r=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());f8(u)?r(u):r()}catch(u){a(u)}else if(c!==null){const u=s8();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?nO():o8();a(u)}else{const u=r8();a(u)}};this.canceled_?n(!1,new Km(!1,null,!0)):this.backoffId_=h8(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&d8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Km{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function y8(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function _8(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function v8(e,t){t&&(e["X-Firebase-GMPID"]=t)}function b8(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function w8(e,t,n,i,s,r,a=!0){const c=p8(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return v8(d,t),y8(d,n),_8(d,r),b8(d,i),new g8(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E8(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function T8(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t,n){this._service=t,n instanceof Ys?this._location=n:this._location=Ys.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new gy(t,n)}get root(){const t=new Ys(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return T8(this._location.path)}get storage(){return this._service}get parent(){const t=E8(this._location.path);if(t===null)return null;const n=new Ys(this._location.bucket,t);return new gy(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw c8(t)}}function gI(e,t){const n=t==null?void 0:t[e8];return n==null?null:Ys.makeFromBucketSpec(n,e)}function x8(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=i;s&&(e._overrideAuthToken=typeof s=="string"?s:DE(s,e.app.options.projectId))}class S8{constructor(t,n,i,s,r){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=eO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=n8,this._maxUploadRetryTime=i8,this._requests=new Set,s!=null?this._bucket=Ys.makeFromBucketSpec(s,this._host):this._bucket=gI(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ys.makeFromBucketSpec(this._url,t):this._bucket=gI(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){mI("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){mI("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new gy(this,t)}_makeRequest(t,n,i,s,r=!0){if(this._deleted)return new u8(nO());{const a=w8(t,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,s).getPromise()}}const yI="@firebase/storage",_I="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="storage";function A8(e=Hf(),t){e=Ze(e);const i=Lo(e,iO).getImmediate({identifier:t}),s=RE("storage");return s&&C8(i,...s),i}function C8(e,t,n,i={}){x8(e,t,n,i)}function R8(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new S8(n,i,s,t,qa)}function I8(){ks(new ds(iO,R8,"PUBLIC").setMultipleInstances(!0)),Ti(yI,_I,""),Ti(yI,_I,"esm2017")}I8();var vI={};const bI="@firebase/database",wI="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sO="";function D8(e){sO=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ai(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:af(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Oo(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new M8(t)}}catch{}return new N8},jl=rO("localStorage"),k8=rO("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=new zf("@firebase/database"),P8=function(){let e=1;return function(){return e++}}(),oO=function(e){const t=EB(e),n=new yB;n.update(t);const i=n.digest();return CE.encodeByteArray(i)},sp=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=sp.apply(null,i):typeof i=="object"?t+=ai(i):t+=i,t+=" "}return t};let zd=null,EI=!0;const O8=function(e,t){bt(!0,"Can't turn on custom loggers persistently."),xu.logLevel=le.VERBOSE,zd=xu.log.bind(xu)},_i=function(...e){if(EI===!0&&(EI=!1,zd===null&&k8.get("logging_enabled")===!0&&O8()),zd){const t=sp.apply(null,e);zd(t)}},rp=function(e){return function(...t){_i(e,...t)}},vw=function(...e){const t="FIREBASE INTERNAL ERROR: "+sp(...e);xu.error(t)},No=function(...e){const t=`FIREBASE FATAL ERROR: ${sp(...e)}`;throw xu.error(t),new Error(t)},us=function(...e){const t="FIREBASE WARNING: "+sp(...e);xu.warn(t)},L8=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},aO=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},V8=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Vu="[MIN_NAME]",Xl="[MAX_NAME]",th=function(e,t){if(e===t)return 0;if(e===Vu||t===Xl)return-1;if(t===Vu||e===Xl)return 1;{const n=TI(e),i=TI(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},j8=function(e,t){return e===t?0:e<t?-1:1},hd=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ai(t))},MT=function(e){if(typeof e!="object"||e===null)return ai(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=ai(t[i]),n+=":",n+=MT(e[t[i]]);return n+="}",n},lO=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function Ps(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const cO=function(e){bt(!aO(e),"Invalid JSON number");const t=11,n=52,i=(1<<t-1)-1;let s,r,a,c,u;e===0?(r=0,a=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),i),r=c+i,a=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(r=0,a=Math.round(e/Math.pow(2,1-i-n))));const d=[];for(u=n;u;u-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(u=t;u;u-=1)d.push(r%2?1:0),r=Math.floor(r/2);d.push(s?1:0),d.reverse();const f=d.join("");let m="";for(u=0;u<64;u+=8){let y=parseInt(f.substr(u,8),2).toString(16);y.length===1&&(y="0"+y),m=m+y}return m.toLowerCase()},U8=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},F8=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},B8=new RegExp("^-?(0*)\\d{1,10}$"),z8=-2147483648,H8=2147483647,TI=function(e){if(B8.test(e)){const t=Number(e);if(t>=z8&&t<=H8)return t}return null},op=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw us("Exception was thrown by user callback.",n),t},Math.floor(0))}},q8=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hd=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,Bi(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){us(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(_i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',us(t)}}class kg{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}kg.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="5",uO="v",hO="s",dO="r",fO="f",pO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mO="ls",gO="p",bw="ac",yO="websocket",_O="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(t,n,i,s,r=!1,a="",c=!1,u=!1,d=null){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jl.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&jl.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function W8(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function bO(e,t,n){bt(typeof t=="string","typeof type must == string"),bt(typeof n=="object","typeof params must == object");let i;if(t===yO)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===_O)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);W8(e)&&(n.ns=e.namespace);const s=[];return Ps(n,(r,a)=>{s.push(r+"="+a)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(){this.counters_={}}incrementCounter(t,n=1){Oo(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return eB(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb={},nb={};function kT(e){const t=e.toString();return eb[t]||(eb[t]=new K8),eb[t]}function Y8(e,t){const n=e.toString();return nb[n]||(nb[n]=t()),nb[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&op(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="start",X8="close",Z8="pLPCommand",J8="pRTLPCB",wO="id",EO="pw",TO="ser",t7="cb",e7="seg",n7="ts",i7="d",s7="dframe",xO=1870,SO=30,r7=xO-SO,o7=25e3,a7=3e4;class hu{constructor(t,n,i,s,r,a,c){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rp(t),this.stats_=kT(n),this.urlFn=u=>(this.appCheckToken&&(u[bw]=this.appCheckToken),bO(n,_O,u))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Q8(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(a7)),V8(()=>{if(this.isClosed_)return;this.scriptTagHolder=new PT((...r)=>{const[a,c,u,d,f]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===xI)this.id=c,this.password=u;else if(a===X8)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...r)=>{const[a,c]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);const i={};i[xI]="t",i[TO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[t7]=this.scriptTagHolder.uniqueCallbackIdentifier),i[uO]=NT,this.transportSessionId&&(i[hO]=this.transportSessionId),this.lastSessionId&&(i[mO]=this.lastSessionId),this.applicationId&&(i[gO]=this.applicationId),this.appCheckToken&&(i[bw]=this.appCheckToken),typeof location<"u"&&location.hostname&&pO.test(location.hostname)&&(i[dO]=fO);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hu.forceAllow_=!0}static forceDisallow(){hu.forceDisallow_=!0}static isAvailable(){return hu.forceAllow_?!0:!hu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!U8()&&!F8()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=ai(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=S2(n),s=lO(i,r7);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[s7]="t",i[wO]=t,i[EO]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=ai(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class PT{constructor(t,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=P8(),window[Z8+this.uniqueCallbackIdentifier]=t,window[J8+this.uniqueCallbackIdentifier]=n,this.myIFrame=PT.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){_i("frame writing exception"),c.stack&&_i(c.stack),_i(c)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||_i("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[wO]=this.myID,t[EO]=this.myPW,t[TO]=this.currentSerial;let n=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SO+i.length<=xO;){const a=this.pendingSegs.shift();i=i+"&"+e7+s+"="+a.seg+"&"+n7+s+"="+a.ts+"&"+i7+s+"="+a.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(o7)),r=()=>{clearTimeout(s),i()};this.addTag(t,r)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{_i("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=16384,c7=45e3;let yy=null;typeof MozWebSocket<"u"?yy=MozWebSocket:typeof WebSocket<"u"&&(yy=WebSocket);class Ws{constructor(t,n,i,s,r,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rp(this.connId),this.stats_=kT(n),this.connURL=Ws.connectionURL_(n,a,c,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,i,s,r){const a={};return a[uO]=NT,typeof location<"u"&&location.hostname&&pO.test(location.hostname)&&(a[dO]=fO),n&&(a[hO]=n),i&&(a[mO]=i),s&&(a[bw]=s),r&&(a[gO]=r),bO(t,yO,a)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jl.set("previous_websocket_failure",!0);try{let i;uB(),this.mySock=new yy(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ws.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&yy!==null&&!Ws.forceDisallow_}static previouslyFailed(){return jl.isInMemoryStorage||jl.get("previous_websocket_failure")===!0}markConnectionHealthy(){jl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=af(n);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(bt(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const n=ai(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=lO(n,l7);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(c7))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ws.responsesRequiredToBeHealthy=2;Ws.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{static get ALL_TRANSPORTS(){return[hu,Ws]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=Ws&&Ws.isAvailable();let i=n&&!Ws.previouslyFailed();if(t.webSocketOnly&&(n||us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ws];else{const s=this.transports_=[];for(const r of bf.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);bf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}bf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=6e4,h7=5e3,d7=10*1024,f7=100*1024,ib="t",SI="d",p7="s",AI="r",m7="e",CI="o",RI="a",II="n",DI="p",g7="h";class y7{constructor(t,n,i,s,r,a,c,u,d,f){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rp("c:"+this.id+":"),this.transportManager_=new bf(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Hd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>f7?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>d7?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ib in t){const n=t[ib];n===RI?this.upgradeIfSecondaryHealthy_():n===AI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===CI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=hd("t",t),i=hd("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:DI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:RI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:II,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=hd("t",t),i=hd("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=hd(ib,t);if(SI in t){const i=t[SI];if(n===g7){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===II){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===p7?this.onConnectionShutdown_(i):n===AI?this.onReset_(i):n===m7?vw("Server Error: "+i):n===CI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vw("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),NT!==i&&us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Hd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(u7))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(h7))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:DI,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{put(t,n,i,s){}merge(t,n,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(t){this.allowedEvents_=t,this.listeners_={},bt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});const s=this.getInitialEvent(t);s&&n.apply(i,s)}off(t,n,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(t){bt(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y extends CO{static getInstance(){return new _y}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ME()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return bt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=32,NI=768;class rn{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function He(){return new rn("")}function we(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ja(e){return e.pieces_.length-e.pieceNum_}function nn(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new rn(e.pieces_,t)}function RO(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function _7(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function IO(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function DO(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new rn(t,0)}function Zn(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof rn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new rn(n,0)}function pe(e){return e.pieceNum_>=e.pieces_.length}function Ms(e,t){const n=we(e),i=we(t);if(n===null)return t;if(n===i)return Ms(nn(e),nn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function MO(e,t){if(ja(e)!==ja(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Qs(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(ja(e)>ja(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class v7{constructor(t,n){this.errorPrefix_=n,this.parts_=IO(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Xy(this.parts_[i]);NO(this)}}function b7(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Xy(t),NO(e)}function w7(e){const t=e.parts_.pop();e.byteLength_-=Xy(t),e.parts_.length>0&&(e.byteLength_-=1)}function NO(e){if(e.byteLength_>NI)throw new Error(e.errorPrefix_+"has a key path longer than "+NI+" bytes ("+e.byteLength_+").");if(e.parts_.length>MI)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MI+") or object contains a cycle "+Ml(e))}function Ml(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT extends CO{static getInstance(){return new OT}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return bt(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=1e3,E7=60*5*1e3,kI=30*1e3,T7=1.3,x7=3e4,S7="server_kill",PI=3;class xo extends AO{constructor(t,n,i,s,r,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=xo.nextPersistentConnectionId_++,this.log_=rp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dd,this.maxReconnectDelay_=E7,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");OT.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&_y.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,i){const s=++this.requestNumber_,r={r:s,a:t,b:n};this.log_(ai(r)),bt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const n=new IE,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const c=a.d;a.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(t,n,i,s){this.initConnection_();const r=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+r),this.listens.has(a)||this.listens.set(a,new Map),bt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),bt(!this.listens.get(a).has(r),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:t,tag:i};this.listens.get(a).set(r,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(t){const n=t.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},a="q";t.tag&&(r.q=n._queryObject,r.t=t.tag),r.h=t.hashFn(),this.sendRequest(a,r,c=>{const u=c.d,d=c.s;xo.warnOnListenWarnings_(u,n),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Oo(t,"w")){const i=Iu(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||gB(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=kI)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=mB(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,a=s.d||"error";this.authToken_===t&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,i=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(t,n){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),bt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,n)}sendUnlisten_(t,n,i,s){this.log_("Unlisten on "+t+" for "+n);const r={p:t},a="n";s&&(r.q=i,r.t=s),this.sendRequest(a,r)}onDisconnectPut(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:i})}onDisconnectMerge(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:i})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,n,i,s){this.putInternal("p",t,n,i,s)}merge(t,n,i,s){this.putInternal("m",t,n,i,s)}putInternal(t,n,i,s,r){this.initConnection_();const a={p:n,d:i};r!==void 0&&(a.h=r),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ai(t));const n=t.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):vw("Unrecognized action received from server: "+ai(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){bt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=dd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>x7&&(this.reconnectDelay_=dd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*T7)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+xo.nextConnectionId_++,r=this.lastSessionId;let a=!1,c=null;const u=function(){c?c.close():(a=!0,i())},d=function(m){bt(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:u,sendRequest:d};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,y]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?_i("getToken() completed but was canceled"):(_i("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,c=new y7(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,i,v=>{us(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(S7)},r))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&us(m),u())}}}interrupt(t){_i("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){_i("Resuming connection for reason: "+t),delete this.interruptReasons_[t],$b(this.interruptReasons_)&&(this.reconnectDelay_=dd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let i;n?i=n.map(r=>MT(r)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,n){const i=new rn(t).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,n){_i("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=PI&&(this.reconnectDelay_=kI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){_i("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=PI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+sO.replace(/\./g,"-")]=1,ME()?t["framework.cordova"]=1:D2()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=_y.getInstance().currentlyOnline();return $b(this.interruptReasons_)&&t}}xo.nextPersistentConnectionId_=0;xo.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Ee(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const i=new Ee(Vu,t),s=new Ee(Vu,n);return this.compare(i,s)!==0}minPost(){return Ee.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym;class kO extends w_{static get __EMPTY_NODE(){return Ym}static set __EMPTY_NODE(t){Ym=t}compare(t,n){return th(t.name,n.name)}isDefinedOn(t){throw Gu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Ee.MIN}maxPost(){return new Ee(Xl,Ym)}makePost(t,n){return bt(typeof t=="string","KeyIndex indexValue must always be a string."),new Ee(t,Ym)}toString(){return".key"}}const Su=new kO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let a=1;for(;!t.isEmpty();)if(t=t,a=n?i(t.key,n):1,s&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Yn{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??Yn.RED,this.left=s??qi.EMPTY_NODE,this.right=r??qi.EMPTY_NODE}copy(t,n,i,s,r){return new Yn(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return qi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let i,s;if(i=this,n(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(t,i.key)===0){if(i.right.isEmpty())return qi.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Yn.RED=!0;Yn.BLACK=!1;class A7{copy(t,n,i,s,r){return this}insert(t,n,i){return new Yn(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class qi{constructor(t,n=qi.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new qi(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Yn.BLACK,null,null))}remove(t){return new qi(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Yn.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Qm(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Qm(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Qm(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Qm(this.root_,null,this.comparator_,!0,t)}}qi.EMPTY_NODE=new A7;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(e,t){return th(e.name,t.name)}function LT(e,t){return th(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ww;function R7(e){ww=e}const PO=function(e){return typeof e=="number"?"number:"+cO(e):"string:"+e},OO=function(e){if(e.isLeafNode()){const t=e.val();bt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Oo(t,".sv"),"Priority must be a string or number.")}else bt(e===ww||e.isEmpty(),"priority of unexpected type.");bt(e===ww||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OI;class Wn{static set __childrenNodeConstructor(t){OI=t}static get __childrenNodeConstructor(){return OI}constructor(t,n=Wn.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,bt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),OO(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Wn(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Wn.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return pe(t)?this:we(t)===".priority"?this.priorityNode_:Wn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Wn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const i=we(t);return i===null?n:n.isEmpty()&&i!==".priority"?this:(bt(i!==".priority"||ja(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Wn.__childrenNodeConstructor.EMPTY_NODE.updateChild(nn(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+PO(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=cO(this.value_):t+=this.value_,this.lazyHash_=oO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Wn.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Wn.__childrenNodeConstructor?-1:(bt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,i=typeof this.value_,s=Wn.VALUE_TYPE_ORDER.indexOf(n),r=Wn.VALUE_TYPE_ORDER.indexOf(i);return bt(s>=0,"Unknown leaf type: "+n),bt(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Wn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LO,VO;function I7(e){LO=e}function D7(e){VO=e}class M7 extends w_{compare(t,n){const i=t.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?th(t.name,n.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Ee.MIN}maxPost(){return new Ee(Xl,new Wn("[PRIORITY-POST]",VO))}makePost(t,n){const i=LO(t);return new Ee(n,new Wn("[PRIORITY-POST]",i))}toString(){return".priority"}}const bi=new M7;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7=Math.log(2);class k7{constructor(t){const n=r=>parseInt(Math.log(r)/N7,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const vy=function(e,t,n,i){e.sort(t);const s=function(u,d){const f=d-u;let m,y;if(f===0)return null;if(f===1)return m=e[u],y=n?n(m):m,new Yn(y,m.node,Yn.BLACK,null,null);{const v=parseInt(f/2,10)+u,w=s(u,v),T=s(v+1,d);return m=e[v],y=n?n(m):m,new Yn(y,m.node,Yn.BLACK,w,T)}},r=function(u){let d=null,f=null,m=e.length;const y=function(w,T){const x=m-w,C=m;m-=w;const k=s(x+1,C),M=e[x],z=n?n(M):M;v(new Yn(z,M.node,T,null,k))},v=function(w){d?(d.left=w,d=w):(f=w,d=w)};for(let w=0;w<u.count;++w){const T=u.nextBitIsOne(),x=Math.pow(2,u.count-(w+1));T?y(x,Yn.BLACK):(y(x,Yn.BLACK),y(x,Yn.RED))}return f},a=new k7(e.length),c=r(a);return new qi(i||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sb;const nu={};class vo{static get Default(){return bt(nu&&bi,"ChildrenNode.ts has not been loaded"),sb=sb||new vo({".priority":nu},{".priority":bi}),sb}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=Iu(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof qi?n:null}hasIndex(t){return Oo(this.indexSet_,t.toString())}addIndex(t,n){bt(t!==Su,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(Ee.Wrap);let a=r.getNext();for(;a;)s=s||t.isDefinedOn(a.node),i.push(a),a=r.getNext();let c;s?c=vy(i,t.getCompare()):c=nu;const u=t.toString(),d=Object.assign({},this.indexSet_);d[u]=t;const f=Object.assign({},this.indexes_);return f[u]=c,new vo(f,d)}addToIndexes(t,n){const i=Kg(this.indexes_,(s,r)=>{const a=Iu(this.indexSet_,r);if(bt(a,"Missing index implementation for "+r),s===nu)if(a.isDefinedOn(t.node)){const c=[],u=n.getIterator(Ee.Wrap);let d=u.getNext();for(;d;)d.name!==t.name&&c.push(d),d=u.getNext();return c.push(t),vy(c,a.getCompare())}else return nu;else{const c=n.get(t.name);let u=s;return c&&(u=u.remove(new Ee(t.name,c))),u.insert(t,t.node)}});return new vo(i,this.indexSet_)}removeFromIndexes(t,n){const i=Kg(this.indexes_,s=>{if(s===nu)return s;{const r=n.get(t.name);return r?s.remove(new Ee(t.name,r)):s}});return new vo(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd;class Ne{static get EMPTY_NODE(){return fd||(fd=new Ne(new qi(LT),null,vo.Default))}constructor(t,n,i){this.children_=t,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&OO(this.priorityNode_),this.children_.isEmpty()&&bt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fd}updatePriority(t){return this.children_.isEmpty()?this:new Ne(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?fd:n}}getChild(t){const n=we(t);return n===null?this:this.getImmediateChild(n).getChild(nn(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(bt(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const i=new Ee(t,n);let s,r;n.isEmpty()?(s=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,n),r=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?fd:this.priorityNode_;return new Ne(s,a,r)}}updateChild(t,n){const i=we(t);if(i===null)return n;{bt(we(t)!==".priority"||ja(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(nn(t),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(bi,(a,c)=>{n[a]=c.val(t),i++,r&&Ne.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):r=!1}),!t&&r&&s<2*i){const a=[];for(const c in n)a[c]=n[c];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+PO(this.getPriority().val())+":"),this.forEachChild(bi,(n,i)=>{const s=i.hash();s!==""&&(t+=":"+n+":"+s)}),this.lazyHash_=t===""?"":oO(t)}return this.lazyHash_}getPredecessorChildName(t,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new Ee(t,n));return r?r.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Ee(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Ee(n,this.children_.get(n)):null}forEachChild(t,n){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Ee.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Ee.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)>0;)s.getNext(),r=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ap?-1:0}withIndex(t){if(t===Su||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new Ne(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Su||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(bi),s=n.getIterator(bi);let r=i.getNext(),a=s.getNext();for(;r&&a;){if(r.name!==a.name||!r.node.equals(a.node))return!1;r=i.getNext(),a=s.getNext()}return r===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Su?null:this.indexMap_.get(t.toString())}}Ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class P7 extends Ne{constructor(){super(new qi(LT),Ne.EMPTY_NODE,vo.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Ne.EMPTY_NODE}isEmpty(){return!1}}const ap=new P7;Object.defineProperties(Ee,{MIN:{value:new Ee(Vu,Ne.EMPTY_NODE)},MAX:{value:new Ee(Xl,ap)}});kO.__EMPTY_NODE=Ne.EMPTY_NODE;Wn.__childrenNodeConstructor=Ne;R7(ap);D7(ap);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=!0;function vi(e,t=null){if(e===null)return Ne.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),bt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Wn(n,vi(t))}if(!(e instanceof Array)&&O7){const n=[];let i=!1;if(Ps(e,(a,c)=>{if(a.substring(0,1)!=="."){const u=vi(c);u.isEmpty()||(i=i||!u.getPriority().isEmpty(),n.push(new Ee(a,u)))}}),n.length===0)return Ne.EMPTY_NODE;const r=vy(n,C7,a=>a.name,LT);if(i){const a=vy(n,bi.getCompare());return new Ne(r,vi(t),new vo({".priority":a},{".priority":bi}))}else return new Ne(r,vi(t),vo.Default)}else{let n=Ne.EMPTY_NODE;return Ps(e,(i,s)=>{if(Oo(e,i)&&i.substring(0,1)!=="."){const r=vi(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(vi(t))}}I7(vi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7 extends w_{constructor(t){super(),this.indexPath_=t,bt(!pe(t)&&we(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const i=this.extractChild(t.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?th(t.name,n.name):r}makePost(t,n){const i=vi(t),s=Ne.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ee(n,s)}maxPost(){const t=Ne.EMPTY_NODE.updateChild(this.indexPath_,ap);return new Ee(Xl,t)}toString(){return IO(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7 extends w_{compare(t,n){const i=t.node.compareTo(n.node);return i===0?th(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Ee.MIN}maxPost(){return Ee.MAX}makePost(t,n){const i=vi(t);return new Ee(n,i)}toString(){return".value"}}const j7=new V7;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7(e){return{type:"value",snapshotNode:e}}function F7(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function B7(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function LI(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function z7(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=bi}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return bt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return bt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vu}hasEnd(){return this.endSet_}getIndexEndValue(){return bt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return bt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return bt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===bi}copy(){const t=new VT;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function VI(e){const t={};if(e.isDefault())return t;let n;if(e.index_===bi?n="$priority":e.index_===j7?n="$value":e.index_===Su?n="$key":(bt(e.index_ instanceof L7,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ai(n),e.startSet_){const i=e.startAfterSet_?"startAfter":"startAt";t[i]=ai(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+ai(e.indexStartName_))}if(e.endSet_){const i=e.endBeforeSet_?"endBefore":"endAt";t[i]=ai(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+ai(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function jI(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==bi&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by extends AO{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(bt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=rp("p:rest:"),this.listens_={}}listen(t,n,i,s){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const a=by.getListenId_(t,i),c={};this.listens_[a]=c;const u=VI(t._queryParams);this.restRequest_(r+".json",u,(d,f)=>{let m=f;if(d===404&&(m=null,d=null),d===null&&this.onDataUpdate_(r,m,!1,i),Iu(this.listens_,a)===c){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",s(y,null)}})}unlisten(t,n){const i=by.getListenId_(t,n);delete this.listens_[i]}get(t){const n=VI(t._queryParams),i=t._path.toString(),s=new IE;return this.restRequest_(i+".json",n,(r,a)=>{let c=a;r===404&&(c=null,r=null),r===null?(this.onDataUpdate_(i,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Wu(n);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&c.readyState===4){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=af(c.responseText)}catch{us("Failed to parse JSON response for "+a+": "+c.responseText)}i(null,u)}else c.status!==401&&c.status!==404&&us("Got unsuccessful REST response for "+a+" Status: "+c.status),i(c.status);i=null}},c.open("GET",a,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.rootNode_=Ne.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(){return{value:null,children:new Map}}function jO(e,t,n){if(pe(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const i=we(t);e.children.has(i)||e.children.set(i,wy());const s=e.children.get(i);t=nn(t),jO(s,t,n)}}function Ew(e,t,n){e.value!==null?n(t,e.value):q7(e,(i,s)=>{const r=new rn(t.toString()+"/"+i);Ew(s,r,n)})}function q7(e,t){e.children.forEach((n,i)=>{t(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Ps(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=10*1e3,G7=30*1e3,W7=5*60*1e3;class K7{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $7(t);const i=UI+(G7-UI)*Math.random();Hd(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),n={};let i=!1;Ps(t,(s,r)=>{r>0&&Oo(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),Hd(this.reportStats_.bind(this),Math.floor(Math.random()*2*W7))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xr||(xr={}));function UO(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function FO(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function BO(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=xr.ACK_USER_WRITE,this.source=UO()}operationForChild(t){if(pe(this.path)){if(this.affectedTree.value!=null)return bt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new rn(t));return new Ey(He(),n,this.revert)}}else return bt(we(this.path)===t,"operationForChild called for unrelated child."),new Ey(nn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=xr.OVERWRITE}operationForChild(t){return pe(this.path)?new Zl(this.source,He(),this.snap.getImmediateChild(t)):new Zl(this.source,nn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=xr.MERGE}operationForChild(t){if(pe(this.path)){const n=this.children.subtree(new rn(t));return n.isEmpty()?null:n.value?new Zl(this.source,He(),n.value):new wf(this.source,He(),n)}else return bt(we(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new wf(this.source,nn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(pe(t))return this.isFullyInitialized()&&!this.filtered_;const n=we(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function Y7(e,t,n,i){const s=[],r=[];return t.forEach(a=>{a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&r.push(z7(a.childName,a.snapshotNode))}),pd(e,s,"child_removed",t,i,n),pd(e,s,"child_added",t,i,n),pd(e,s,"child_moved",r,i,n),pd(e,s,"child_changed",t,i,n),pd(e,s,"value",t,i,n),s}function pd(e,t,n,i,s,r){const a=i.filter(c=>c.type===n);a.sort((c,u)=>X7(e,c,u)),a.forEach(c=>{const u=Q7(e,c,r);s.forEach(d=>{d.respondsTo(c.type)&&t.push(d.createEvent(u,e.query_))})})}function Q7(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function X7(e,t,n){if(t.childName==null||n.childName==null)throw Gu("Should only compare child_ events.");const i=new Ee(t.childName,t.snapshotNode),s=new Ee(n.childName,n.snapshotNode);return e.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(e,t){return{eventCache:e,serverCache:t}}function qd(e,t,n,i){return zO(new jT(t,n,i),e.serverCache)}function HO(e,t,n,i){return zO(e.eventCache,new jT(t,n,i))}function Tw(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Jl(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rb;const Z7=()=>(rb||(rb=new qi(j8)),rb);class tn{static fromObject(t){let n=new tn(null);return Ps(t,(i,s)=>{n=n.set(new rn(i),s)}),n}constructor(t,n=Z7()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:He(),value:this.value};if(pe(t))return null;{const i=we(t),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(nn(t),n);return r!=null?{path:Zn(new rn(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(pe(t))return this;{const n=we(t),i=this.children.get(n);return i!==null?i.subtree(nn(t)):new tn(null)}}set(t,n){if(pe(t))return new tn(n,this.children);{const i=we(t),r=(this.children.get(i)||new tn(null)).set(nn(t),n),a=this.children.insert(i,r);return new tn(this.value,a)}}remove(t){if(pe(t))return this.children.isEmpty()?new tn(null):new tn(null,this.children);{const n=we(t),i=this.children.get(n);if(i){const s=i.remove(nn(t));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new tn(null):new tn(this.value,r)}else return this}}get(t){if(pe(t))return this.value;{const n=we(t),i=this.children.get(n);return i?i.get(nn(t)):null}}setTree(t,n){if(pe(t))return n;{const i=we(t),r=(this.children.get(i)||new tn(null)).setTree(nn(t),n);let a;return r.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,r),new tn(this.value,a)}}fold(t){return this.fold_(He(),t)}fold_(t,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(Zn(t,s),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,He(),n)}findOnPath_(t,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(pe(t))return null;{const r=we(t),a=this.children.get(r);return a?a.findOnPath_(nn(t),Zn(n,r),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,He(),n)}foreachOnPath_(t,n,i){if(pe(t))return this;{this.value&&i(n,this.value);const s=we(t),r=this.children.get(s);return r?r.foreachOnPath_(nn(t),Zn(n,s),i):new tn(null)}}foreach(t){this.foreach_(He(),t)}foreach_(t,n){this.children.inorderTraversal((i,s)=>{s.foreach_(Zn(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(t){this.writeTree_=t}static empty(){return new Xs(new tn(null))}}function $d(e,t,n){if(pe(t))return new Xs(new tn(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let r=i.value;const a=Ms(s,t);return r=r.updateChild(a,n),new Xs(e.writeTree_.set(s,r))}else{const s=new tn(n),r=e.writeTree_.setTree(t,s);return new Xs(r)}}}function FI(e,t,n){let i=e;return Ps(n,(s,r)=>{i=$d(i,Zn(t,s),r)}),i}function BI(e,t){if(pe(t))return Xs.empty();{const n=e.writeTree_.setTree(t,new tn(null));return new Xs(n)}}function xw(e,t){return cc(e,t)!=null}function cc(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Ms(n.path,t)):null}function zI(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(bi,(i,s)=>{t.push(new Ee(i,s))}):e.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new Ee(i,s.value))}),t}function Da(e,t){if(pe(t))return e;{const n=cc(e,t);return n!=null?new Xs(new tn(n)):new Xs(e.writeTree_.subtree(t))}}function Sw(e){return e.writeTree_.isEmpty()}function ju(e,t){return qO(He(),e.writeTree_,t)}function qO(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((s,r)=>{s===".priority"?(bt(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=qO(Zn(e,s),r,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(Zn(e,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(e,t){return QO(t,e)}function J7(e,t,n,i,s){bt(i>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=$d(e.visibleWrites,t,n)),e.lastWriteId=i}function t$(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}function e$(e,t){const n=e.allWrites.findIndex(c=>c.writeId===t);bt(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,r=!1,a=e.allWrites.length-1;for(;s&&a>=0;){const c=e.allWrites[a];c.visible&&(a>=n&&n$(c,i.path)?s=!1:Qs(i.path,c.path)&&(r=!0)),a--}if(s){if(r)return i$(e),!0;if(i.snap)e.visibleWrites=BI(e.visibleWrites,i.path);else{const c=i.children;Ps(c,u=>{e.visibleWrites=BI(e.visibleWrites,Zn(i.path,u))})}return!0}else return!1}function n$(e,t){if(e.snap)return Qs(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Qs(Zn(e.path,n),t))return!0;return!1}function i$(e){e.visibleWrites=GO(e.allWrites,s$,He()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function s$(e){return e.visible}function GO(e,t,n){let i=Xs.empty();for(let s=0;s<e.length;++s){const r=e[s];if(t(r)){const a=r.path;let c;if(r.snap)Qs(n,a)?(c=Ms(n,a),i=$d(i,c,r.snap)):Qs(a,n)&&(c=Ms(a,n),i=$d(i,He(),r.snap.getChild(c)));else if(r.children){if(Qs(n,a))c=Ms(n,a),i=FI(i,c,r.children);else if(Qs(a,n))if(c=Ms(a,n),pe(c))i=FI(i,He(),r.children);else{const u=Iu(r.children,we(c));if(u){const d=u.getChild(nn(c));i=$d(i,He(),d)}}}else throw Gu("WriteRecord should have .snap or .children")}}return i}function WO(e,t,n,i,s){if(!i&&!s){const r=cc(e.visibleWrites,t);if(r!=null)return r;{const a=Da(e.visibleWrites,t);if(Sw(a))return n;if(n==null&&!xw(a,He()))return null;{const c=n||Ne.EMPTY_NODE;return ju(a,c)}}}else{const r=Da(e.visibleWrites,t);if(!s&&Sw(r))return n;if(!s&&n==null&&!xw(r,He()))return null;{const a=function(d){return(d.visible||s)&&(!i||!~i.indexOf(d.writeId))&&(Qs(d.path,t)||Qs(t,d.path))},c=GO(e.allWrites,a,t),u=n||Ne.EMPTY_NODE;return ju(c,u)}}}function r$(e,t,n){let i=Ne.EMPTY_NODE;const s=cc(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(bi,(r,a)=>{i=i.updateImmediateChild(r,a)}),i;if(n){const r=Da(e.visibleWrites,t);return n.forEachChild(bi,(a,c)=>{const u=ju(Da(r,new rn(a)),c);i=i.updateImmediateChild(a,u)}),zI(r).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{const r=Da(e.visibleWrites,t);return zI(r).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function o$(e,t,n,i,s){bt(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=Zn(t,n);if(xw(e.visibleWrites,r))return null;{const a=Da(e.visibleWrites,r);return Sw(a)?s.getChild(n):ju(a,s.getChild(n))}}function a$(e,t,n,i){const s=Zn(t,n),r=cc(e.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const a=Da(e.visibleWrites,s);return ju(a,i.getNode().getImmediateChild(n))}else return null}function l$(e,t){return cc(e.visibleWrites,t)}function c$(e,t,n,i,s,r,a){let c;const u=Da(e.visibleWrites,t),d=cc(u,He());if(d!=null)c=d;else if(n!=null)c=ju(u,n);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){const f=[],m=a.getCompare(),y=r?c.getReverseIteratorFrom(i,a):c.getIteratorFrom(i,a);let v=y.getNext();for(;v&&f.length<s;)m(v,i)!==0&&f.push(v),v=y.getNext();return f}else return[]}function u$(){return{visibleWrites:Xs.empty(),allWrites:[],lastWriteId:-1}}function Aw(e,t,n,i){return WO(e.writeTree,e.treePath,t,n,i)}function KO(e,t){return r$(e.writeTree,e.treePath,t)}function HI(e,t,n,i){return o$(e.writeTree,e.treePath,t,n,i)}function Ty(e,t){return l$(e.writeTree,Zn(e.treePath,t))}function h$(e,t,n,i,s,r){return c$(e.writeTree,e.treePath,t,n,i,s,r)}function UT(e,t,n){return a$(e.writeTree,e.treePath,t,n)}function YO(e,t){return QO(Zn(e.treePath,t),e.writeTree)}function QO(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,i=t.childName;bt(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),bt(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,LI(i,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,B7(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,F7(i,t.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,LI(i,t.snapshotNode,s.oldSnap));else throw Gu("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}}const XO=new f$;class FT{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new jT(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return UT(this.writes_,t,i)}}getChildAfterChild(t,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Jl(this.viewCache_),r=h$(this.writes_,s,n,1,i,t);return r.length===0?null:r[0]}}function p$(e,t){bt(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),bt(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function m$(e,t,n,i,s){const r=new d$;let a,c;if(n.type===xr.OVERWRITE){const d=n;d.source.fromUser?a=Cw(e,t,d.path,d.snap,i,s,r):(bt(d.source.fromServer,"Unknown source."),c=d.source.tagged||t.serverCache.isFiltered()&&!pe(d.path),a=xy(e,t,d.path,d.snap,i,s,c,r))}else if(n.type===xr.MERGE){const d=n;d.source.fromUser?a=y$(e,t,d.path,d.children,i,s,r):(bt(d.source.fromServer,"Unknown source."),c=d.source.tagged||t.serverCache.isFiltered(),a=Rw(e,t,d.path,d.children,i,s,c,r))}else if(n.type===xr.ACK_USER_WRITE){const d=n;d.revert?a=b$(e,t,d.path,i,s,r):a=_$(e,t,d.path,d.affectedTree,i,s,r)}else if(n.type===xr.LISTEN_COMPLETE)a=v$(e,t,n.path,i,r);else throw Gu("Unknown operation type: "+n.type);const u=r.getChanges();return g$(t,a,u),{viewCache:a,changes:u}}function g$(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=Tw(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(U7(Tw(t)))}}function ZO(e,t,n,i,s,r){const a=t.eventCache;if(Ty(i,n)!=null)return t;{let c,u;if(pe(n))if(bt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const d=Jl(t),f=d instanceof Ne?d:Ne.EMPTY_NODE,m=KO(i,f);c=e.filter.updateFullNode(t.eventCache.getNode(),m,r)}else{const d=Aw(i,Jl(t));c=e.filter.updateFullNode(t.eventCache.getNode(),d,r)}else{const d=we(n);if(d===".priority"){bt(ja(n)===1,"Can't have a priority with additional path components");const f=a.getNode();u=t.serverCache.getNode();const m=HI(i,n,f,u);m!=null?c=e.filter.updatePriority(f,m):c=a.getNode()}else{const f=nn(n);let m;if(a.isCompleteForChild(d)){u=t.serverCache.getNode();const y=HI(i,n,a.getNode(),u);y!=null?m=a.getNode().getImmediateChild(d).updateChild(f,y):m=a.getNode().getImmediateChild(d)}else m=UT(i,d,t.serverCache);m!=null?c=e.filter.updateChild(a.getNode(),d,m,f,s,r):c=a.getNode()}}return qd(t,c,a.isFullyInitialized()||pe(n),e.filter.filtersNodes())}}function xy(e,t,n,i,s,r,a,c){const u=t.serverCache;let d;const f=a?e.filter:e.filter.getIndexedFilter();if(pe(n))d=f.updateFullNode(u.getNode(),i,null);else if(f.filtersNodes()&&!u.isFiltered()){const v=u.getNode().updateChild(n,i);d=f.updateFullNode(u.getNode(),v,null)}else{const v=we(n);if(!u.isCompleteForPath(n)&&ja(n)>1)return t;const w=nn(n),x=u.getNode().getImmediateChild(v).updateChild(w,i);v===".priority"?d=f.updatePriority(u.getNode(),x):d=f.updateChild(u.getNode(),v,x,w,XO,null)}const m=HO(t,d,u.isFullyInitialized()||pe(n),f.filtersNodes()),y=new FT(s,m,r);return ZO(e,m,n,s,y,c)}function Cw(e,t,n,i,s,r,a){const c=t.eventCache;let u,d;const f=new FT(s,t,r);if(pe(n))d=e.filter.updateFullNode(t.eventCache.getNode(),i,a),u=qd(t,d,!0,e.filter.filtersNodes());else{const m=we(n);if(m===".priority")d=e.filter.updatePriority(t.eventCache.getNode(),i),u=qd(t,d,c.isFullyInitialized(),c.isFiltered());else{const y=nn(n),v=c.getNode().getImmediateChild(m);let w;if(pe(y))w=i;else{const T=f.getCompleteChild(m);T!=null?RO(y)===".priority"&&T.getChild(DO(y)).isEmpty()?w=T:w=T.updateChild(y,i):w=Ne.EMPTY_NODE}if(v.equals(w))u=t;else{const T=e.filter.updateChild(c.getNode(),m,w,y,f,a);u=qd(t,T,c.isFullyInitialized(),e.filter.filtersNodes())}}}return u}function qI(e,t){return e.eventCache.isCompleteForChild(t)}function y$(e,t,n,i,s,r,a){let c=t;return i.foreach((u,d)=>{const f=Zn(n,u);qI(t,we(f))&&(c=Cw(e,c,f,d,s,r,a))}),i.foreach((u,d)=>{const f=Zn(n,u);qI(t,we(f))||(c=Cw(e,c,f,d,s,r,a))}),c}function $I(e,t,n){return n.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function Rw(e,t,n,i,s,r,a,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let u=t,d;pe(n)?d=i:d=new tn(null).setTree(n,i);const f=t.serverCache.getNode();return d.children.inorderTraversal((m,y)=>{if(f.hasChild(m)){const v=t.serverCache.getNode().getImmediateChild(m),w=$I(e,v,y);u=xy(e,u,new rn(m),w,s,r,a,c)}}),d.children.inorderTraversal((m,y)=>{const v=!t.serverCache.isCompleteForChild(m)&&y.value===null;if(!f.hasChild(m)&&!v){const w=t.serverCache.getNode().getImmediateChild(m),T=$I(e,w,y);u=xy(e,u,new rn(m),T,s,r,a,c)}}),u}function _$(e,t,n,i,s,r,a){if(Ty(s,n)!=null)return t;const c=t.serverCache.isFiltered(),u=t.serverCache;if(i.value!=null){if(pe(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return xy(e,t,n,u.getNode().getChild(n),s,r,c,a);if(pe(n)){let d=new tn(null);return u.getNode().forEachChild(Su,(f,m)=>{d=d.set(new rn(f),m)}),Rw(e,t,n,d,s,r,c,a)}else return t}else{let d=new tn(null);return i.foreach((f,m)=>{const y=Zn(n,f);u.isCompleteForPath(y)&&(d=d.set(f,u.getNode().getChild(y)))}),Rw(e,t,n,d,s,r,c,a)}}function v$(e,t,n,i,s){const r=t.serverCache,a=HO(t,r.getNode(),r.isFullyInitialized()||pe(n),r.isFiltered());return ZO(e,a,n,i,XO,s)}function b$(e,t,n,i,s,r){let a;if(Ty(i,n)!=null)return t;{const c=new FT(i,t,s),u=t.eventCache.getNode();let d;if(pe(n)||we(n)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=Aw(i,Jl(t));else{const m=t.serverCache.getNode();bt(m instanceof Ne,"serverChildren would be complete if leaf node"),f=KO(i,m)}f=f,d=e.filter.updateFullNode(u,f,r)}else{const f=we(n);let m=UT(i,f,t.serverCache);m==null&&t.serverCache.isCompleteForChild(f)&&(m=u.getImmediateChild(f)),m!=null?d=e.filter.updateChild(u,f,m,nn(n),c,r):t.eventCache.getNode().hasChild(f)?d=e.filter.updateChild(u,f,Ne.EMPTY_NODE,nn(n),c,r):d=u,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Aw(i,Jl(t)),a.isLeafNode()&&(d=e.filter.updateFullNode(d,a,r)))}return a=t.serverCache.isFullyInitialized()||Ty(i,He())!=null,qd(t,d,a,e.filter.filtersNodes())}}function w$(e,t){const n=Jl(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!pe(t)&&!n.getImmediateChild(we(t)).isEmpty())?n.getChild(t):null}function GI(e,t,n,i){t.type===xr.MERGE&&t.source.queryId!==null&&(bt(Jl(e.viewCache_),"We should always have a full cache before handling merges"),bt(Tw(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,r=m$(e.processor_,s,t,n,i);return p$(e.processor_,r.viewCache),bt(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,E$(e,r.changes,r.viewCache.eventCache.getNode())}function E$(e,t,n,i){const s=e.eventRegistrations_;return Y7(e.eventGenerator_,t,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WI;function T$(e){bt(!WI,"__referenceConstructor has already been defined"),WI=e}function BT(e,t,n,i){const s=t.source.queryId;if(s!==null){const r=e.views.get(s);return bt(r!=null,"SyncTree gave us an op for an invalid query."),GI(r,t,n,i)}else{let r=[];for(const a of e.views.values())r=r.concat(GI(a,t,n,i));return r}}function zT(e,t){let n=null;for(const i of e.views.values())n=n||w$(i,t);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KI;function x$(e){bt(!KI,"__referenceConstructor has already been defined"),KI=e}class YI{constructor(t){this.listenProvider_=t,this.syncPointTree_=new tn(null),this.pendingWriteTree_=u$(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function S$(e,t,n,i,s){return J7(e.pendingWriteTree_,t,n,i,s),s?T_(e,new Zl(UO(),t,n)):[]}function du(e,t,n=!1){const i=t$(e.pendingWriteTree_,t);if(e$(e.pendingWriteTree_,t)){let r=new tn(null);return i.snap!=null?r=r.set(He(),!0):Ps(i.children,a=>{r=r.set(new rn(a),!0)}),T_(e,new Ey(i.path,r,n))}else return[]}function E_(e,t,n){return T_(e,new Zl(FO(),t,n))}function A$(e,t,n){const i=tn.fromObject(n);return T_(e,new wf(FO(),t,i))}function C$(e,t,n,i){const s=nL(e,i);if(s!=null){const r=iL(s),a=r.path,c=r.queryId,u=Ms(a,t),d=new Zl(BO(c),u,n);return sL(e,a,d)}else return[]}function R$(e,t,n,i){const s=nL(e,i);if(s){const r=iL(s),a=r.path,c=r.queryId,u=Ms(a,t),d=tn.fromObject(n),f=new wf(BO(c),u,d);return sL(e,a,f)}else return[]}function JO(e,t,n){const s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(a,c)=>{const u=Ms(a,t),d=zT(c,u);if(d)return d});return WO(s,t,r,n,!0)}function T_(e,t){return tL(t,e.syncPointTree_,null,$O(e.pendingWriteTree_,He()))}function tL(e,t,n,i){if(pe(e.path))return eL(e,t,n,i);{const s=t.get(He());n==null&&s!=null&&(n=zT(s,He()));let r=[];const a=we(e.path),c=e.operationForChild(a),u=t.children.get(a);if(u&&c){const d=n?n.getImmediateChild(a):null,f=YO(i,a);r=r.concat(tL(c,u,d,f))}return s&&(r=r.concat(BT(s,e,i,n))),r}}function eL(e,t,n,i){const s=t.get(He());n==null&&s!=null&&(n=zT(s,He()));let r=[];return t.children.inorderTraversal((a,c)=>{const u=n?n.getImmediateChild(a):null,d=YO(i,a),f=e.operationForChild(a);f&&(r=r.concat(eL(f,c,u,d)))}),s&&(r=r.concat(BT(s,e,i,n))),r}function nL(e,t){return e.tagToQueryMap.get(t)}function iL(e){const t=e.indexOf("$");return bt(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new rn(e.substr(0,t))}}function sL(e,t,n){const i=e.syncPointTree_.get(t);bt(i,"Missing sync point for query tag that we're tracking");const s=$O(e.pendingWriteTree_,t);return BT(i,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new HT(n)}node(){return this.node_}}class qT{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Zn(this.path_,t);return new qT(this.syncTree_,n)}node(){return JO(this.syncTree_,this.path_)}}const I$=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},QI=function(e,t,n){if(!e||typeof e!="object")return e;if(bt(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return D$(e[".sv"],t,n);if(typeof e[".sv"]=="object")return M$(e[".sv"],t);bt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},D$=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:bt(!1,"Unexpected server value: "+e)}},M$=function(e,t,n){e.hasOwnProperty("increment")||bt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;typeof i!="number"&&bt(!1,"Unexpected increment value: "+i);const s=t.node();if(bt(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const a=s.getValue();return typeof a!="number"?i:a+i},N$=function(e,t,n,i){return $T(t,new qT(n,e),i)},k$=function(e,t,n){return $T(e,new HT(t),n)};function $T(e,t,n){const i=e.getPriority().val(),s=QI(i,t.getImmediateChild(".priority"),n);let r;if(e.isLeafNode()){const a=e,c=QI(a.getValue(),t,n);return c!==a.getValue()||s!==a.getPriority().val()?new Wn(c,vi(s)):e}else{const a=e;return r=a,s!==a.getPriority().val()&&(r=r.updatePriority(new Wn(s))),a.forEachChild(bi,(c,u)=>{const d=$T(u,t.getImmediateChild(c),n);d!==u&&(r=r.updateImmediateChild(c,d))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}}function WT(e,t){let n=t instanceof rn?t:new rn(t),i=e,s=we(n);for(;s!==null;){const r=Iu(i.node.children,s)||{children:{},childCount:0};i=new GT(s,i,r),n=nn(n),s=we(n)}return i}function eh(e){return e.node.value}function rL(e,t){e.node.value=t,Iw(e)}function oL(e){return e.node.childCount>0}function P$(e){return eh(e)===void 0&&!oL(e)}function x_(e,t){Ps(e.node.children,(n,i)=>{t(new GT(n,e,i))})}function aL(e,t,n,i){n&&t(e),x_(e,s=>{aL(s,t,!0)})}function O$(e,t,n){let i=e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function lp(e){return new rn(e.parent===null?e.name:lp(e.parent)+"/"+e.name)}function Iw(e){e.parent!==null&&L$(e.parent,e.name,e)}function L$(e,t,n){const i=P$(n),s=Oo(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,Iw(e)):!i&&!s&&(e.node.children[t]=n.node,e.node.childCount++,Iw(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=/[\[\].#$\/\u0000-\u001F\u007F]/,j$=/[\[\].#$\u0000-\u001F\u007F]/,ob=10*1024*1024,lL=function(e){return typeof e=="string"&&e.length!==0&&!V$.test(e)},U$=function(e){return typeof e=="string"&&e.length!==0&&!j$.test(e)},F$=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),U$(e)},cL=function(e,t,n){const i=n instanceof rn?new v7(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Ml(i));if(typeof t=="function")throw new Error(e+"contains a function "+Ml(i)+" with contents = "+t.toString());if(aO(t))throw new Error(e+"contains "+t.toString()+" "+Ml(i));if(typeof t=="string"&&t.length>ob/3&&Xy(t)>ob)throw new Error(e+"contains a string greater than "+ob+" utf8 bytes "+Ml(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,r=!1;if(Ps(t,(a,c)=>{if(a===".value")s=!0;else if(a!==".priority"&&a!==".sv"&&(r=!0,!lL(a)))throw new Error(e+" contains an invalid key ("+a+") "+Ml(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);b7(i,a),cL(e,c,i),w7(i)}),s&&r)throw new Error(e+' contains ".value" child '+Ml(i)+" in addition to actual children.")}},B$=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!lL(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!F$(n))throw new Error(wB(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function H$(e,t){let n=null;for(let i=0;i<t.length;i++){const s=t[i],r=s.getPath();n!==null&&!MO(r,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function uc(e,t,n){H$(e,n),q$(e,i=>Qs(i,t)||Qs(t,i))}function q$(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const s=e.eventLists_[i];if(s){const r=s.path;t(r)?($$(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function $$(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const i=n.getEventRunner();zd&&_i("event: "+n.toString()),op(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$="repo_interrupt",W$=25;class K${constructor(t,n,i,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new z$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wy(),this.transactionQueueTree_=new GT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Y$(e,t,n){if(e.stats_=kT(e.repoInfo_),e.forceRestClient_||q8())e.server_=new by(e.repoInfo_,(i,s,r,a)=>{XI(e,i,s,r,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>ZI(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ai(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new xo(e.repoInfo_,t,(i,s,r,a)=>{XI(e,i,s,r,a)},i=>{ZI(e,i)},i=>{X$(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=Y8(e.repoInfo_,()=>new K7(e.stats_,e.server_)),e.infoData_=new H7,e.infoSyncTree_=new YI({startListening:(i,s,r,a)=>{let c=[];const u=e.infoData_.getNode(i._path);return u.isEmpty()||(c=E_(e.infoSyncTree_,i._path,u),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),KT(e,"connected",!1),e.serverSyncTree_=new YI({startListening:(i,s,r,a)=>(e.server_.listen(i,r,s,(c,u)=>{const d=a(c,u);uc(e.eventQueue_,i._path,d)}),[]),stopListening:(i,s)=>{e.server_.unlisten(i,s)}})}function Q$(e){const n=e.infoData_.getNode(new rn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function uL(e){return I$({timestamp:Q$(e)})}function XI(e,t,n,i,s){e.dataUpdateCount++;const r=new rn(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(s)if(i){const u=Kg(n,d=>vi(d));a=R$(e.serverSyncTree_,r,u,s)}else{const u=vi(n);a=C$(e.serverSyncTree_,r,u,s)}else if(i){const u=Kg(n,d=>vi(d));a=A$(e.serverSyncTree_,r,u)}else{const u=vi(n);a=E_(e.serverSyncTree_,r,u)}let c=r;a.length>0&&(c=QT(e,r)),uc(e.eventQueue_,c,a)}function ZI(e,t){KT(e,"connected",t),t===!1&&J$(e)}function X$(e,t){Ps(t,(n,i)=>{KT(e,n,i)})}function KT(e,t,n){const i=new rn("/.info/"+t),s=vi(n);e.infoData_.updateSnapshot(i,s);const r=E_(e.infoSyncTree_,i,s);uc(e.eventQueue_,i,r)}function Z$(e){return e.nextWriteId_++}function J$(e){hL(e,"onDisconnectEvents");const t=uL(e),n=wy();Ew(e.onDisconnect_,He(),(s,r)=>{const a=N$(s,r,e.serverSyncTree_,t);jO(n,s,a)});let i=[];Ew(n,He(),(s,r)=>{i=i.concat(E_(e.serverSyncTree_,s,r));const a=iG(e,s);QT(e,a)}),e.onDisconnect_=wy(),uc(e.eventQueue_,He(),i)}function tG(e){e.persistentConnection_&&e.persistentConnection_.interrupt(G$)}function hL(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),_i(n,...t)}function dL(e,t,n){return JO(e.serverSyncTree_,t,n)||Ne.EMPTY_NODE}function YT(e,t=e.transactionQueueTree_){if(t||S_(e,t),eh(t)){const n=pL(e,t);bt(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&eG(e,lp(t),n)}else oL(t)&&x_(t,n=>{YT(e,n)})}function eG(e,t,n){const i=n.map(d=>d.currentWriteId),s=dL(e,t,i);let r=s;const a=s.hash();for(let d=0;d<n.length;d++){const f=n[d];bt(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const m=Ms(t,f.path);r=r.updateChild(m,f.currentOutputSnapshotRaw)}const c=r.val(!0),u=t;e.server_.put(u.toString(),c,d=>{hL(e,"transaction put response",{path:u.toString(),status:d});let f=[];if(d==="ok"){const m=[];for(let y=0;y<n.length;y++)n[y].status=2,f=f.concat(du(e.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&m.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();S_(e,WT(e.transactionQueueTree_,t)),YT(e,e.transactionQueueTree_),uc(e.eventQueue_,t,f);for(let y=0;y<m.length;y++)op(m[y])}else{if(d==="datastale")for(let m=0;m<n.length;m++)n[m].status===3?n[m].status=4:n[m].status=0;else{us("transaction at "+u.toString()+" failed: "+d);for(let m=0;m<n.length;m++)n[m].status=4,n[m].abortReason=d}QT(e,t)}},a)}function QT(e,t){const n=fL(e,t),i=lp(n),s=pL(e,n);return nG(e,s,i),i}function nG(e,t,n){if(t.length===0)return;const i=[];let s=[];const a=t.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<t.length;c++){const u=t[c],d=Ms(n,u.path);let f=!1,m;if(bt(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,m=u.abortReason,s=s.concat(du(e.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=W$)f=!0,m="maxretry",s=s.concat(du(e.serverSyncTree_,u.currentWriteId,!0));else{const y=dL(e,u.path,a);u.currentInputSnapshot=y;const v=t[c].update(y.val());if(v!==void 0){cL("transaction failed: Data returned ",v,u.path);let w=vi(v);typeof v=="object"&&v!=null&&Oo(v,".priority")||(w=w.updatePriority(y.getPriority()));const x=u.currentWriteId,C=uL(e),k=k$(w,y,C);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=k,u.currentWriteId=Z$(e),a.splice(a.indexOf(x),1),s=s.concat(S$(e.serverSyncTree_,u.path,k,u.currentWriteId,u.applyLocally)),s=s.concat(du(e.serverSyncTree_,x,!0))}else f=!0,m="nodata",s=s.concat(du(e.serverSyncTree_,u.currentWriteId,!0))}uc(e.eventQueue_,n,s),s=[],f&&(t[c].status=2,function(y){setTimeout(y,Math.floor(0))}(t[c].unwatcher),t[c].onComplete&&(m==="nodata"?i.push(()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot)):i.push(()=>t[c].onComplete(new Error(m),!1,null))))}S_(e,e.transactionQueueTree_);for(let c=0;c<i.length;c++)op(i[c]);YT(e,e.transactionQueueTree_)}function fL(e,t){let n,i=e.transactionQueueTree_;for(n=we(t);n!==null&&eh(i)===void 0;)i=WT(i,n),t=nn(t),n=we(t);return i}function pL(e,t){const n=[];return mL(e,t,n),n.sort((i,s)=>i.order-s.order),n}function mL(e,t,n){const i=eh(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);x_(t,s=>{mL(e,s,n)})}function S_(e,t){const n=eh(t);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,rL(t,n.length>0?n:void 0)}x_(t,i=>{S_(e,i)})}function iG(e,t){const n=lp(fL(e,t)),i=WT(e.transactionQueueTree_,t);return O$(i,s=>{ab(e,s)}),ab(e,i),aL(i,s=>{ab(e,s)}),n}function ab(e,t){const n=eh(t);if(n){const i=[];let s=[],r=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(bt(r===a-1,"All SENT items should be at beginning of queue."),r=a,n[a].status=3,n[a].abortReason="set"):(bt(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),s=s.concat(du(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&i.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));r===-1?rL(t,void 0):n.length=r+1,uc(e.eventQueue_,lp(t),s);for(let a=0;a<i.length;a++)op(i[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sG(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function rG(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):us(`Invalid query segment '${n}' in query '${e}'`)}return t}const JI=function(e,t){const n=oG(e),i=n.namespace;n.domain==="firebase.com"&&No(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&No("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||L8();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new vO(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new rn(n.pathString)}},oG=function(e){let t="",n="",i="",s="",r="",a=!0,c="https",u=443;if(typeof e=="string"){let d=e.indexOf("//");d>=0&&(c=e.substring(0,d-1),e=e.substring(d+2));let f=e.indexOf("/");f===-1&&(f=e.length);let m=e.indexOf("?");m===-1&&(m=e.length),t=e.substring(0,Math.min(f,m)),f<m&&(s=sG(e.substring(f,m)));const y=rG(e.substring(Math.min(e.length,m)));d=t.indexOf(":"),d>=0?(a=c==="https"||c==="wss",u=parseInt(t.substring(d+1),10)):d=t.length;const v=t.slice(0,d);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const w=t.indexOf(".");i=t.substring(0,w).toLowerCase(),n=t.substring(w+1),r=i}"ns"in y&&(r=y.ns)}return{host:t,port:u,domain:n,subdomain:i,secure:a,scheme:c,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t,n,i,s){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return pe(this._path)?null:RO(this._path)}get ref(){return new nh(this._repo,this._path)}get _queryIdentifier(){const t=jI(this._queryParams),n=MT(t);return n==="{}"?"default":n}get _queryObject(){return jI(this._queryParams)}isEqual(t){if(t=Ze(t),!(t instanceof XT))return!1;const n=this._repo===t._repo,i=MO(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+_7(this._path)}}class nh extends XT{constructor(t,n){super(t,n,new VT,!1)}get parent(){const t=DO(this._path);return t===null?null:new nh(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}T$(nh);x$(nh);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG="FIREBASE_DATABASE_EMULATOR_HOST",Dw={};let lG=!1;function cG(e,t,n,i){e.repoInfo_=new vO(t,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(e.authTokenProvider_=i)}function uG(e,t,n,i,s){let r=i||e.options.databaseURL;r===void 0&&(e.options.projectId||No("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_i("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a=JI(r,s),c=a.repoInfo,u;typeof process<"u"&&vI&&(u=vI[aG]),u?(r=`http://${u}?ns=${c.namespace}`,a=JI(r,s),c=a.repoInfo):a.repoInfo.secure;const d=new G8(e.name,e.options,t);B$("Invalid Firebase Database URL",a),pe(a.path)||No("Database URL must point to the root of a Firebase Database (not including a child path).");const f=dG(c,e,d,new $8(e,n));return new fG(f,e)}function hG(e,t){const n=Dw[t];(!n||n[e.key]!==e)&&No(`Database ${t}(${e.repoInfo_}) has already been deleted.`),tG(e),delete n[e.key]}function dG(e,t,n,i){let s=Dw[t.name];s||(s={},Dw[t.name]=s);let r=s[e.toURLString()];return r&&No("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new K$(e,lG,n,i),s[e.toURLString()]=r,r}class fG{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Y$(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nh(this._repo,He())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hG(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&No("Cannot call "+t+" on a deleted database.")}}function pG(e=Hf(),t){const n=Lo(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const i=RE("database");i&&mG(n,...i)}return n}function mG(e,t,n,i={}){e=Ze(e),e._checkNotDeleted("useEmulator");const s=`${t}:${n}`,r=e._repoInternal;if(e._instanceStarted){if(s===e._repoInternal.repoInfo_.host&&Co(i,r.repoInfo_.emulatorOptions))return;No("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&No('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new kg(kg.OWNER);else if(i.mockUserToken){const c=typeof i.mockUserToken=="string"?i.mockUserToken:DE(i.mockUserToken,e.app.options.projectId);a=new kg(c)}cG(r,s,i,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(e){D8(qa),ks(new ds("database",(t,{instanceIdentifier:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return uG(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),Ti(bI,wI,e),Ti(bI,wI,"esm2017")}xo.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};xo.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};gG();const gL="@firebase/installations",ZT="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=1e4,_L=`w:${ZT}`,vL="FIS_v2",yG="https://firebaseinstallations.googleapis.com/v1",_G=60*60*1e3,vG="installations",bG="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wG={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},tc=new oc(vG,bG,wG);function bL(e){return e instanceof Vs&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL({projectId:e}){return`${yG}/projects/${e}/installations`}function EL(e){return{token:e.token,requestStatus:2,expiresIn:TG(e.expiresIn),creationTime:Date.now()}}async function TL(e,t){const i=(await t.json()).error;return tc.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function xL({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function EG(e,{refreshToken:t}){const n=xL(e);return n.append("Authorization",xG(t)),n}async function SL(e){const t=await e();return t.status>=500&&t.status<600?e():t}function TG(e){return Number(e.replace("s","000"))}function xG(e){return`${vL} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SG({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=wL(e),s=xL(e),r=t.getImmediate({optional:!0});if(r){const d=await r.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:vL,appId:e.appId,sdkVersion:_L},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await SL(()=>fetch(i,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:EL(d.authToken)}}else throw await TL("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AG(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CG=/^[cdef][\w-]{21}$/,Mw="";function RG(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=IG(e);return CG.test(n)?n:Mw}catch{return Mw}}function IG(e){return AG(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=new Map;function RL(e,t){const n=A_(e);IL(n,t),DG(n,t)}function IL(e,t){const n=CL.get(e);if(n)for(const i of n)i(t)}function DG(e,t){const n=MG();n&&n.postMessage({key:e,fid:t}),NG()}let Ul=null;function MG(){return!Ul&&"BroadcastChannel"in self&&(Ul=new BroadcastChannel("[Firebase] FID Change"),Ul.onmessage=e=>{IL(e.data.key,e.data.fid)}),Ul}function NG(){CL.size===0&&Ul&&(Ul.close(),Ul=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG="firebase-installations-database",PG=1,ec="firebase-installations-store";let lb=null;function JT(){return lb||(lb=O2(kG,PG,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(ec)}}})),lb}async function Sy(e,t){const n=A_(e),s=(await JT()).transaction(ec,"readwrite"),r=s.objectStore(ec),a=await r.get(n);return await r.put(t,n),await s.done,(!a||a.fid!==t.fid)&&RL(e,t.fid),t}async function DL(e){const t=A_(e),i=(await JT()).transaction(ec,"readwrite");await i.objectStore(ec).delete(t),await i.done}async function C_(e,t){const n=A_(e),s=(await JT()).transaction(ec,"readwrite"),r=s.objectStore(ec),a=await r.get(n),c=t(a);return c===void 0?await r.delete(n):await r.put(c,n),await s.done,c&&(!a||a.fid!==c.fid)&&RL(e,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(e){let t;const n=await C_(e.appConfig,i=>{const s=OG(i),r=LG(e,s);return t=r.registrationPromise,r.installationEntry});return n.fid===Mw?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function OG(e){const t=e||{fid:RG(),registrationStatus:0};return ML(t)}function LG(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(tc.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=VG(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:jG(e)}:{installationEntry:t}}async function VG(e,t){try{const n=await SG(e,t);return Sy(e.appConfig,n)}catch(n){throw bL(n)&&n.customData.serverCode===409?await DL(e.appConfig):await Sy(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function jG(e){let t=await tD(e.appConfig);for(;t.registrationStatus===1;)await AL(100),t=await tD(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await tx(e);return i||n}return t}function tD(e){return C_(e,t=>{if(!t)throw tc.create("installation-not-found");return ML(t)})}function ML(e){return UG(e)?{fid:e.fid,registrationStatus:0}:e}function UG(e){return e.registrationStatus===1&&e.registrationTime+yL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FG({appConfig:e,heartbeatServiceProvider:t},n){const i=BG(e,n),s=EG(e,n),r=t.getImmediate({optional:!0});if(r){const d=await r.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:_L,appId:e.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await SL(()=>fetch(i,c));if(u.ok){const d=await u.json();return EL(d)}else throw await TL("Generate Auth Token",u)}function BG(e,{fid:t}){return`${wL(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(e,t=!1){let n;const i=await C_(e.appConfig,r=>{if(!NL(r))throw tc.create("not-registered");const a=r.authToken;if(!t&&qG(a))return r;if(a.requestStatus===1)return n=zG(e,t),r;{if(!navigator.onLine)throw tc.create("app-offline");const c=GG(r);return n=HG(e,c),c}});return n?await n:i.authToken}async function zG(e,t){let n=await eD(e.appConfig);for(;n.authToken.requestStatus===1;)await AL(100),n=await eD(e.appConfig);const i=n.authToken;return i.requestStatus===0?ex(e,t):i}function eD(e){return C_(e,t=>{if(!NL(t))throw tc.create("not-registered");const n=t.authToken;return WG(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function HG(e,t){try{const n=await FG(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await Sy(e.appConfig,i),n}catch(n){if(bL(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await DL(e.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Sy(e.appConfig,i)}throw n}}function NL(e){return e!==void 0&&e.registrationStatus===2}function qG(e){return e.requestStatus===2&&!$G(e)}function $G(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+_G}function GG(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function WG(e){return e.requestStatus===1&&e.requestTime+yL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KG(e){const t=e,{installationEntry:n,registrationPromise:i}=await tx(t);return i?i.catch(console.error):ex(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YG(e,t=!1){const n=e;return await QG(n),(await ex(n,t)).token}async function QG(e){const{registrationPromise:t}=await tx(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XG(e){if(!e||!e.options)throw cb("App Configuration");if(!e.name)throw cb("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw cb(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function cb(e){return tc.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="installations",ZG="installations-internal",JG=e=>{const t=e.getProvider("app").getImmediate(),n=XG(t),i=Lo(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},tW=e=>{const t=e.getProvider("app").getImmediate(),n=Lo(t,kL).getImmediate();return{getId:()=>KG(n),getToken:s=>YG(n,s)}};function eW(){ks(new ds(kL,JG,"PUBLIC")),ks(new ds(ZG,tW,"PRIVATE"))}eW();Ti(gL,ZT);Ti(gL,ZT,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="analytics",nW="firebase_id",iW="origin",sW=60*1e3,rW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",nx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=new zf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},hs=new oc("analytics","Analytics",oW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(e){if(!e.startsWith(nx)){const t=hs.create("invalid-gtag-resource",{gtagURL:e});return Gi.warn(t.message),""}return e}function PL(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function lW(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function cW(e,t){const n=lW("firebase-js-sdk-policy",{createScriptURL:aW}),i=document.createElement("script"),s=`${nx}?l=${e}&id=${t}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function uW(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function hW(e,t,n,i,s,r){const a=i[s];try{if(a)await t[a];else{const u=(await PL(n)).find(d=>d.measurementId===s);u&&await t[u.appId]}}catch(c){Gi.error(c)}e("config",s,r)}async function dW(e,t,n,i,s){try{let r=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await PL(n);for(const u of a){const d=c.find(m=>m.measurementId===u),f=d&&t[d.appId];if(f)r.push(f);else{r=[];break}}}r.length===0&&(r=Object.values(t)),await Promise.all(r),e("event",i,s||{})}catch(r){Gi.error(r)}}function fW(e,t,n,i){async function s(r,...a){try{if(r==="event"){const[c,u]=a;await dW(e,t,n,c,u)}else if(r==="config"){const[c,u]=a;await hW(e,t,n,i,c,u)}else if(r==="consent"){const[c,u]=a;e("consent",c,u)}else if(r==="get"){const[c,u,d]=a;e("get",c,u,d)}else if(r==="set"){const[c]=a;e("set",c)}else e(r,...a)}catch(c){Gi.error(c)}}return s}function pW(e,t,n,i,s){let r=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=fW(r,e,t,n),{gtagCore:r,wrappedGtag:window[s]}}function mW(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(nx)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW=30,yW=1e3;class _W{constructor(t={},n=yW){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const OL=new _W;function vW(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function bW(e){var t;const{appId:n,apiKey:i}=e,s={method:"GET",headers:vW(i)},r=rW.replace("{app-id}",n),a=await fetch(r,s);if(a.status!==200&&a.status!==304){let c="";try{const u=await a.json();!((t=u.error)===null||t===void 0)&&t.message&&(c=u.error.message)}catch{}throw hs.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function wW(e,t=OL,n){const{appId:i,apiKey:s,measurementId:r}=e.options;if(!i)throw hs.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw hs.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new xW;return setTimeout(async()=>{c.abort()},sW),LL({appId:i,apiKey:s,measurementId:r},a,c,t)}async function LL(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=OL){var r;const{appId:a,measurementId:c}=e;try{await EW(i,t)}catch(u){if(c)return Gi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw u}try{const u=await bW(e);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!TW(d)){if(s.deleteThrottleMetadata(a),c)return Gi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:c};throw u}const f=Number((r=d==null?void 0:d.customData)===null||r===void 0?void 0:r.httpStatus)===503?FR(n,s.intervalMillis,gW):FR(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,m),Gi.debug(`Calling attemptFetch again in ${f} millis`),LL(e,m,i,s)}}function EW(e,t){return new Promise((n,i)=>{const s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(r),i(hs.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function TW(e){if(!(e instanceof Vs)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class xW{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function SW(e,t,n,i,s){if(s&&s.global){e("event",n,i);return}else{const r=await t,a=Object.assign(Object.assign({},i),{send_to:r});e("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AW(){if(kE())try{await PE()}catch(e){return Gi.warn(hs.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return Gi.warn(hs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function CW(e,t,n,i,s,r,a){var c;const u=wW(e);u.then(v=>{n[v.measurementId]=v.appId,e.options.measurementId&&v.measurementId!==e.options.measurementId&&Gi.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Gi.error(v)),t.push(u);const d=AW().then(v=>{if(v)return i.getId()}),[f,m]=await Promise.all([u,d]);mW(r)||cW(r,f.measurementId),s("js",new Date);const y=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return y[iW]="firebase",y.update=!0,m!=null&&(y[nW]=m),s("config",f.measurementId,y),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(t){this.app=t}_delete(){return delete Gd[this.app.options.appId],Promise.resolve()}}let Gd={},nD=[];const iD={};let ub="dataLayer",IW="gtag",sD,VL,rD=!1;function DW(){const e=[];if(NE()&&e.push("This is a browser extension environment."),M2()||e.push("Cookies are not available."),e.length>0){const t=e.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=hs.create("invalid-analytics-context",{errorInfo:t});Gi.warn(n.message)}}function MW(e,t,n){DW();const i=e.options.appId;if(!i)throw hs.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Gi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw hs.create("no-api-key");if(Gd[i]!=null)throw hs.create("already-exists",{id:i});if(!rD){uW(ub);const{wrappedGtag:r,gtagCore:a}=pW(Gd,nD,iD,ub,IW);VL=r,sD=a,rD=!0}return Gd[i]=CW(e,nD,iD,t,sD,ub,n),new RW(e)}function NW(e=Hf()){e=Ze(e);const t=Lo(e,Ay);return t.isInitialized()?t.getImmediate():kW(e)}function kW(e,t={}){const n=Lo(e,Ay);if(n.isInitialized()){const s=n.getImmediate();if(Co(t,n.getOptions()))return s;throw hs.create("already-initialized")}return n.initialize({options:t})}async function PW(){if(NE()||!M2()||!kE())return!1;try{return await PE()}catch{return!1}}function OW(e,t,n,i){e=Ze(e),SW(VL,Gd[e.app.options.appId],t,n,i).catch(s=>Gi.error(s))}const oD="@firebase/analytics",aD="0.10.12";function LW(){ks(new ds(Ay,(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return MW(i,s,n)},"PUBLIC")),ks(new ds("analytics-internal",e,"PRIVATE")),Ti(oD,aD),Ti(oD,aD,"esm2017");function e(t){try{const n=t.getProvider(Ay).getImmediate();return{logEvent:(i,s,r)=>OW(n,i,s,r)}}catch(n){throw hs.create("interop-component-reg-failed",{reason:n})}}}LW();console.log(" FIREBASE API KEY:","AIzaSyAjF3oLNRGFwh_BUYA4qF55zl0qw4dprwI");const VW={apiKey:"AIzaSyAjF3oLNRGFwh_BUYA4qF55zl0qw4dprwI",authDomain:"agduwaqueue.firebaseapp.com",databaseURL:"https://agduwaqueue-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"agduwaqueue",storageBucket:"agduwaqueue.appspot.com",messagingSenderId:"242220098930",appId:"1:242220098930:web:4b5332473f339ca1be69eb",measurementId:"G-2CQ56KNPDZ"},cp=L2(VW),ze=g_(cp),ls=wk(cp);A8(cp);pG(cp);PW().then(e=>{e&&NW(cp)});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UW=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),lD=e=>{const t=UW(e);return t.charAt(0).toUpperCase()+t.slice(1)},jL=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:a,...c},u)=>R.createElement("svg",{ref:u,...FW,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:jL("lucide",s),...c},[...a.map(([d,f])=>R.createElement(d,f)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=(e,t)=>{const n=R.forwardRef(({className:i,...s},r)=>R.createElement(BW,{ref:r,iconNode:t,className:jL(`lucide-${jW(lD(e))}`,`lucide-${e}`,i),...s}));return n.displayName=lD(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],HW=Wi("activity",zW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],$W=Wi("chart-column",qW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],WW=Wi("chart-no-axes-column",GW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],YW=Wi("circle-alert",KW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],XW=Wi("file-text",QW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],JW=Wi("funnel",ZW);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],eK=Wi("history",tK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],iK=Wi("house",nK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],rK=Wi("list-ordered",sK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],aK=Wi("list",oK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],cK=Wi("log-out",lK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hK=Wi("user",uK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],fK=Wi("users",dK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mK=Wi("x",pK),ix=R.createContext({});function sx(e){const t=R.useRef(null);return t.current===null&&(t.current=e()),t.current}const rx=typeof window<"u",UL=rx?R.useLayoutEffect:R.useEffect,R_=R.createContext(null),ox=R.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class gK extends R.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=i instanceof HTMLElement&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function yK({children:e,isPresent:t,anchorX:n}){const i=R.useId(),s=R.useRef(null),r=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=R.useContext(ox);return R.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:f,right:m}=r.current;if(t||!s.current||!c||!u)return;const y=n==="left"?`left: ${f}`:`right: ${m}`;s.current.dataset.motionPopId=i;const v=document.createElement("style");return a&&(v.nonce=a),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${d}px !important;
          }
        `),()=>{document.head.removeChild(v)}},[t]),S.jsx(gK,{isPresent:t,childRef:s,sizeRef:r,children:R.cloneElement(e,{ref:s})})}const _K=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:a,anchorX:c})=>{const u=sx(vK),d=R.useId(),f=R.useCallback(y=>{u.set(y,!0);for(const v of u.values())if(!v)return;i&&i()},[u,i]),m=R.useMemo(()=>({id:d,initial:t,isPresent:n,custom:s,onExitComplete:f,register:y=>(u.set(y,!1),()=>u.delete(y))}),r?[Math.random(),f]:[n,f]);return R.useMemo(()=>{u.forEach((y,v)=>u.set(v,!1))},[n]),R.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(e=S.jsx(yK,{isPresent:n,anchorX:c,children:e})),S.jsx(R_.Provider,{value:m,children:e})};function vK(){return new Map}function FL(e=!0){const t=R.useContext(R_);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=t,r=R.useId();R.useEffect(()=>{if(e)return s(r)},[e]);const a=R.useCallback(()=>e&&i&&i(r),[r,i,e]);return!n&&i?[!1,a]:[!0]}const Xm=e=>e.key||"";function cD(e){const t=[];return R.Children.forEach(e,n=>{R.isValidElement(n)&&t.push(n)}),t}const Nw=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:a=!1,anchorX:c="left"})=>{const[u,d]=FL(a),f=R.useMemo(()=>cD(e),[e]),m=a&&!u?[]:f.map(Xm),y=R.useRef(!0),v=R.useRef(f),w=sx(()=>new Map),[T,x]=R.useState(f),[C,k]=R.useState(f);UL(()=>{y.current=!1,v.current=f;for(let j=0;j<C.length;j++){const $=Xm(C[j]);m.includes($)?w.delete($):w.get($)!==!0&&w.set($,!1)}},[C,m.length,m.join("-")]);const M=[];if(f!==T){let j=[...f];for(let $=0;$<C.length;$++){const O=C[$],D=Xm(O);m.includes(D)||(j.splice($,0,O),M.push(O))}return r==="wait"&&M.length&&(j=M),k(cD(j)),x(f),null}const{forceRender:z}=R.useContext(ix);return S.jsx(S.Fragment,{children:C.map(j=>{const $=Xm(j),O=a&&!u?!1:f===C||m.includes($),D=()=>{if(w.has($))w.set($,!0);else return;let N=!0;w.forEach(L=>{L||(N=!1)}),N&&(z==null||z(),k(v.current),a&&(d==null||d()),i&&i())};return S.jsx(_K,{isPresent:O,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:r,onExitComplete:O?void 0:D,anchorX:c,children:j},$)})})};function ax(e,t){e.indexOf(t)===-1&&e.push(t)}function lx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let BL=()=>{};const bK={useManualTiming:!1};function cx(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ns=e=>e,Ef=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class ux{constructor(){this.subscriptions=[]}add(t){return ax(this.subscriptions,t),()=>lx(this.subscriptions,t)}notify(t,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,i);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ir=e=>e*1e3,Dr=e=>e/1e3;function zL(e,t){return t?e*(1e3/t):0}const wK=cx(()=>window.ScrollTimeline!==void 0);class EK{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=n}attachTimeline(t,n){const i=this.animations.map(s=>{if(wK()&&s.attachTimeline)return s.attachTimeline(t);if(typeof n=="function")return n(s)});return()=>{i.forEach((s,r)=>{s&&s(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class TK extends EK{then(t,n){return this.finished.finally(t).then(()=>{})}}const uD={value:null},hx=e=>Array.isArray(e)&&typeof e[0]=="number",xK={};function SK(e,t){const n=cx(e);return()=>xK[t]??n()}const Tf=SK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),HL=(e,t,n=10)=>{let i="";const s=Math.max(Math.round(t/n),2);for(let r=0;r<s;r++)i+=e(r/(s-1))+", ";return`linear(${i.substring(0,i.length-2)})`},Dd=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,kw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dd([0,.65,.55,1]),circOut:Dd([.55,0,1,.45]),backIn:Dd([.31,.01,.66,-.59]),backOut:Dd([.33,1.53,.69,.99])};function qL(e,t){if(e)return typeof e=="function"&&Tf()?HL(e,t):hx(e)?Dd(e):Array.isArray(e)?e.map(n=>qL(n,t)||kw.easeOut):kw[e]}function AK(e,t,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:c="easeInOut",times:u}={},d=void 0){const f={[t]:n};u&&(f.offset=u);const m=qL(c,s);return Array.isArray(m)&&(f.easing=m),e.animate(f,{delay:i,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal",pseudoElement:d})}function dx(e){return typeof e=="function"&&"applyToOptions"in e}function fx(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Cy=2e4;function px(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Cy;)t+=n,i=e.next(t);return t>=Cy?1/0:t}function CK(e,t=100,n){const i=n({...e,keyframes:[0,t]}),s=Math.min(px(i),Cy);return{type:"keyframes",ease:r=>i.next(s*r).value/t,duration:Dr(s)}}function $L(e){return!!(typeof e=="function"&&Tf()||!e||typeof e=="string"&&(e in kw||Tf())||hx(e)||Array.isArray(e)&&e.every($L))}function hD(e,t){e.timeline=t,e.onfinish=null}const Zm=["read","resolveKeyframes","update","preRender","render","postRender"];function RK(e,t){let n=new Set,i=new Set,s=!1,r=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},u=0;function d(m){a.has(m)&&(f.schedule(m),e()),u++,m(c)}const f={schedule:(m,y=!1,v=!1)=>{const T=v&&s?n:i;return y&&a.add(m),T.has(m)||T.add(m),m},cancel:m=>{i.delete(m),a.delete(m)},process:m=>{if(c=m,s){r=!0;return}s=!0,[n,i]=[i,n],n.forEach(d),t&&uD.value&&uD.value.frameloop[t].push(u),u=0,n.clear(),s=!1,r&&(r=!1,f.process(m))}};return f}const IK=40;function GL(e,t){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=Zm.reduce((C,k)=>(C[k]=RK(r,t?k:void 0),C),{}),{read:c,resolveKeyframes:u,update:d,preRender:f,render:m,postRender:y}=a,v=()=>{const C=performance.now();n=!1,s.delta=i?1e3/60:Math.max(Math.min(C-s.timestamp,IK),1),s.timestamp=C,s.isProcessing=!0,c.process(s),u.process(s),d.process(s),f.process(s),m.process(s),y.process(s),s.isProcessing=!1,n&&t&&(i=!1,e(v))},w=()=>{n=!0,i=!0,s.isProcessing||e(v)};return{schedule:Zm.reduce((C,k)=>{const M=a[k];return C[k]=(z,j=!1,$=!1)=>(n||w(),M.schedule(z,j,$)),C},{}),cancel:C=>{for(let k=0;k<Zm.length;k++)a[Zm[k]].cancel(C)},state:s,steps:a}}const{schedule:Xe,cancel:Ua,state:oi,steps:hb}=GL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ns,!0),{schedule:mx}=GL(queueMicrotask,!1);let Pg;function DK(){Pg=void 0}const Mr={now:()=>(Pg===void 0&&Mr.set(oi.isProcessing||bK.useManualTiming?oi.timestamp:performance.now()),Pg),set:e=>{Pg=e,queueMicrotask(DK)}},Gs={x:!1,y:!1};function WL(){return Gs.x||Gs.y}function MK(e){return e==="x"||e==="y"?Gs[e]?null:(Gs[e]=!0,()=>{Gs[e]=!1}):Gs.x||Gs.y?null:(Gs.x=Gs.y=!0,()=>{Gs.x=Gs.y=!1})}function NK(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function KL(e,t){const n=NK(e),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[n,s,()=>i.abort()]}function dD(e){return!(e.pointerType==="touch"||WL())}function kK(e,t,n={}){const[i,s,r]=KL(e,n),a=c=>{if(!dD(c))return;const{target:u}=c,d=t(u,c);if(typeof d!="function"||!u)return;const f=m=>{dD(m)&&(d(m),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,s)};return i.forEach(c=>{c.addEventListener("pointerenter",a,s)}),r}const YL=(e,t)=>t?e===t?!0:YL(e,t.parentElement):!1,gx=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,PK=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OK(e){return PK.has(e.tagName)||e.tabIndex!==-1}const Md=new WeakSet;function fD(e){return t=>{t.key==="Enter"&&e(t)}}function db(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const LK=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=fD(()=>{if(Md.has(n))return;db(n,"down");const s=fD(()=>{db(n,"up")}),r=()=>db(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",r,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function pD(e){return gx(e)&&!WL()}function VK(e,t,n={}){const[i,s,r]=KL(e,n),a=c=>{const u=c.currentTarget;if(!pD(c)||Md.has(u))return;Md.add(u);const d=t(u,c),f=(v,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),!(!pD(v)||!Md.has(u))&&(Md.delete(u),typeof d=="function"&&d(v,{success:w}))},m=v=>{f(v,u===window||u===document||n.useGlobalTarget||YL(u,v.target))},y=v=>{f(v,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",y,s)};return i.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",a,s),c instanceof HTMLElement&&(c.addEventListener("focus",d=>LK(d,s)),!OK(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}const mD=30,jK=e=>!isNaN(parseFloat(e));class UK{constructor(t,n={}){this.version="12.6.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{const r=Mr.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Mr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=jK(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ux);const i=this.events[t].add(n);return t==="change"?()=>{i(),Xe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Mr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>mD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mD);return zL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xf(e,t){return new UK(e,t)}const QL=R.createContext({strict:!1}),gD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Uu={};for(const e in gD)Uu[e]={isEnabled:t=>gD[e].some(n=>!!t[n])};function FK(e){for(const t in e)Uu[t]={...Uu[t],...e[t]}}const BK=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ry(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||BK.has(e)}let XL=e=>!Ry(e);function zK(e){e&&(XL=t=>t.startsWith("on")?!Ry(t):e(t))}try{zK(require("@emotion/is-prop-valid").default)}catch{}function HK(e,t,n){const i={};for(const s in e)s==="values"&&typeof e.values=="object"||(XL(s)||n===!0&&Ry(s)||!t&&!Ry(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}function qK(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...i)=>e(...i);return new Proxy(n,{get:(i,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const I_=R.createContext({});function D_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Sf(e){return typeof e=="string"||Array.isArray(e)}const yx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_x=["initial",...yx];function M_(e){return D_(e.animate)||_x.some(t=>Sf(e[t]))}function ZL(e){return!!(M_(e)||e.variants)}function $K(e,t){if(M_(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Sf(n)?n:void 0,animate:Sf(i)?i:void 0}}return e.inherit!==!1?t:{}}function GK(e){const{initial:t,animate:n}=$K(e,R.useContext(I_));return R.useMemo(()=>({initial:t,animate:n}),[yD(t),yD(n)])}function yD(e){return Array.isArray(e)?e.join(" "):e}const WK=Symbol.for("motionComponentSymbol");function fu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function KK(e,t,n){return R.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):fu(n)&&(n.current=i))},[t])}const vx=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),YK="framerAppearId",JL="data-"+vx(YK),tV=R.createContext({});function QK(e,t,n,i,s){var T,x;const{visualElement:r}=R.useContext(I_),a=R.useContext(QL),c=R.useContext(R_),u=R.useContext(ox).reducedMotion,d=R.useRef(null);i=i||a.renderer,!d.current&&i&&(d.current=i(e,{visualState:t,parent:r,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,m=R.useContext(tV);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&XK(d.current,n,s,m);const y=R.useRef(!1);R.useInsertionEffect(()=>{f&&y.current&&f.update(n,c)});const v=n[JL],w=R.useRef(!!v&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,v))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,v)));return UL(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),mx.render(f.render),w.current&&f.animationState&&f.animationState.animateChanges())}),R.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,v)}),w.current=!1))}),f}function XK(e,t,n,i){const{layoutId:s,layout:r,drag:a,dragConstraints:c,layoutScroll:u,layoutRoot:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:eV(e.parent)),e.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||c&&fu(c),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,layoutScroll:u,layoutRoot:d})}function eV(e){if(e)return e.options.allowProjection!==!1?e.projection:eV(e.parent)}function ZK({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:s}){e&&FK(e);function r(c,u){let d;const f={...R.useContext(ox),...c,layoutId:JK(c)},{isStatic:m}=f,y=GK(c),v=i(c,m);if(!m&&rx){tY();const w=eY(f);d=w.MeasureLayout,y.visualElement=QK(s,v,f,t,w.ProjectionNode)}return S.jsxs(I_.Provider,{value:y,children:[d&&y.visualElement?S.jsx(d,{visualElement:y.visualElement,...f}):null,n(s,c,KK(v,y.visualElement,u),v,m,y.visualElement)]})}r.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=R.forwardRef(r);return a[WK]=s,a}function JK({layoutId:e}){const t=R.useContext(ix).id;return t&&e!==void 0?t+"-"+e:e}function tY(e,t){R.useContext(QL).strict}function eY(e){const{drag:t,layout:n}=Uu;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const nV=e=>t=>typeof t=="string"&&t.startsWith(e),bx=nV("--"),nY=nV("var(--"),wx=e=>nY(e)?iY.test(e.split("/*")[0].trim()):!1,iY=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Af={};function sY(e){for(const t in e)Af[t]=e[t],bx(t)&&(Af[t].isCSSVariable=!0)}const ih=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hc=new Set(ih);function iV(e,{layout:t,layoutId:n}){return hc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Af[e]||e==="opacity")}const wi=e=>!!(e&&e.getVelocity),sV=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ko=(e,t,n)=>n>t?t:n<e?e:n,sh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Cf={...sh,transform:e=>ko(0,1,e)},Jm={...sh,default:1},up=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),da=up("deg"),Nr=up("%"),Lt=up("px"),rY=up("vh"),oY=up("vw"),_D={...Nr,parse:e=>Nr.parse(e)/100,transform:e=>Nr.transform(e*100)},aY={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,backgroundPositionX:Lt,backgroundPositionY:Lt},lY={rotate:da,rotateX:da,rotateY:da,rotateZ:da,scale:Jm,scaleX:Jm,scaleY:Jm,scaleZ:Jm,skew:da,skewX:da,skewY:da,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:Cf,originX:_D,originY:_D,originZ:Lt},vD={...sh,transform:Math.round},Ex={...aY,...lY,zIndex:vD,size:Lt,fillOpacity:Cf,strokeOpacity:Cf,numOctaves:vD},cY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uY=ih.length;function hY(e,t,n){let i="",s=!0;for(let r=0;r<uY;r++){const a=ih[r],c=e[a];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(a.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const d=sV(c,Ex[a]);if(!u){s=!1;const f=cY[a]||a;i+=`${f}(${d}) `}n&&(t[a]=d)}}return i=i.trim(),n?i=n(t,s?"":i):s&&(i="none"),i}function Tx(e,t,n){const{style:i,vars:s,transformOrigin:r}=e;let a=!1,c=!1;for(const u in t){const d=t[u];if(hc.has(u)){a=!0;continue}else if(bx(u)){s[u]=d;continue}else{const f=sV(d,Ex[u]);u.startsWith("origin")?(c=!0,r[u]=f):i[u]=f}}if(t.transform||(a||n?i.transform=hY(t,e.transform,n):i.transform&&(i.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:f=0}=r;i.transformOrigin=`${u} ${d} ${f}`}}const xx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rV(e,t,n){for(const i in t)!wi(t[i])&&!iV(i,n)&&(e[i]=t[i])}function dY({transformTemplate:e},t){return R.useMemo(()=>{const n=xx();return Tx(n,t,e),Object.assign({},n.vars,n.style)},[t])}function fY(e,t){const n=e.style||{},i={};return rV(i,n,e),Object.assign(i,dY(e,t)),i}function pY(e,t){const n={},i=fY(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const mY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Sx(e){return typeof e!="string"||e.includes("-")?!1:!!(mY.indexOf(e)>-1||/[A-Z]/u.test(e))}const gY={offset:"stroke-dashoffset",array:"stroke-dasharray"},yY={offset:"strokeDashoffset",array:"strokeDasharray"};function _Y(e,t,n=1,i=0,s=!0){e.pathLength=1;const r=s?gY:yY;e[r.offset]=Lt.transform(-i);const a=Lt.transform(t),c=Lt.transform(n);e[r.array]=`${a} ${c}`}function bD(e,t,n){return typeof e=="string"?e:Lt.transform(t+n*e)}function vY(e,t,n){const i=bD(t,e.x,e.width),s=bD(n,e.y,e.height);return`${i} ${s}`}function Ax(e,{attrX:t,attrY:n,attrScale:i,originX:s,originY:r,pathLength:a,pathSpacing:c=1,pathOffset:u=0,...d},f,m){if(Tx(e,d,m),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:y,style:v,dimensions:w}=e;y.transform&&(w&&(v.transform=y.transform),delete y.transform),w&&(s!==void 0||r!==void 0||v.transform)&&(v.transformOrigin=vY(w,s!==void 0?s:.5,r!==void 0?r:.5)),t!==void 0&&(y.x=t),n!==void 0&&(y.y=n),i!==void 0&&(y.scale=i),a!==void 0&&_Y(y,a,c,u,!1)}const oV=()=>({...xx(),attrs:{}}),Cx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function bY(e,t,n,i){const s=R.useMemo(()=>{const r=oV();return Ax(r,t,Cx(i),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};rV(r,e.style,e),s.style={...r,...s.style}}return s}function wY(e=!1){return(n,i,s,{latestValues:r},a)=>{const u=(Sx(n)?bY:pY)(i,r,a,n),d=HK(i,typeof n=="string",e),f=n!==R.Fragment?{...d,...u,ref:s}:{},{children:m}=i,y=R.useMemo(()=>wi(m)?m.get():m,[m]);return R.createElement(n,{...f,children:y})}}function wD(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function Rx(e,t,n,i){if(typeof t=="function"){const[s,r]=wD(i);t=t(n!==void 0?n:e.custom,s,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,r]=wD(i);t=t(n!==void 0?n:e.custom,s,r)}return t}const Pw=e=>Array.isArray(e),EY=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),TY=e=>Pw(e)?e[e.length-1]||0:e;function Og(e){const t=wi(e)?e.get():e;return EY(t)?t.toValue():t}function xY({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},i,s,r){const a={latestValues:SY(i,s,r,e),renderState:t()};return n&&(a.onMount=c=>n({props:i,current:c,...a}),a.onUpdate=c=>n(c)),a}const aV=e=>(t,n)=>{const i=R.useContext(I_),s=R.useContext(R_),r=()=>xY(e,t,i,s);return n?r():sx(r)};function SY(e,t,n,i){const s={},r=i(e,{});for(const y in r)s[y]=Og(r[y]);let{initial:a,animate:c}=e;const u=M_(e),d=ZL(e);t&&d&&!u&&e.inherit!==!1&&(a===void 0&&(a=t.initial),c===void 0&&(c=t.animate));let f=n?n.initial===!1:!1;f=f||a===!1;const m=f?c:a;if(m&&typeof m!="boolean"&&!D_(m)){const y=Array.isArray(m)?m:[m];for(let v=0;v<y.length;v++){const w=Rx(e,y[v]);if(w){const{transitionEnd:T,transition:x,...C}=w;for(const k in C){let M=C[k];if(Array.isArray(M)){const z=f?M.length-1:0;M=M[z]}M!==null&&(s[k]=M)}for(const k in T)s[k]=T[k]}}}return s}function Ix(e,t,n){var r;const{style:i}=e,s={};for(const a in i)(wi(i[a])||t.style&&wi(t.style[a])||iV(a,e)||((r=n==null?void 0:n.getValue(a))==null?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const AY={useVisualState:aV({scrapeMotionValuesFromProps:Ix,createRenderState:xx})};function lV(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function cV(e,{style:t,vars:n},i,s){Object.assign(e.style,t,s&&s.getProjectionStyles(i));for(const r in n)e.style.setProperty(r,n[r])}const uV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hV(e,t,n,i){cV(e,t,void 0,i);for(const s in t.attrs)e.setAttribute(uV.has(s)?s:vx(s),t.attrs[s])}function dV(e,t,n){const i=Ix(e,t,n);for(const s in e)if(wi(e[s])||wi(t[s])){const r=ih.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=e[s]}return i}const ED=["x","y","width","height","cx","cy","r"],CY={useVisualState:aV({scrapeMotionValuesFromProps:dV,createRenderState:oV,onUpdate:({props:e,prevProps:t,current:n,renderState:i,latestValues:s})=>{if(!n)return;let r=!!e.drag;if(!r){for(const c in s)if(hc.has(c)){r=!0;break}}if(!r)return;let a=!t;if(t)for(let c=0;c<ED.length;c++){const u=ED[c];e[u]!==t[u]&&(a=!0)}a&&Xe.read(()=>{lV(n,i),Xe.render(()=>{Ax(i,s,Cx(n.tagName),e.transformTemplate),hV(n,i)})})}})};function RY(e,t){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...Sx(i)?CY:AY,preloadedFeatures:e,useRender:wY(s),createVisualElement:t,Component:i};return ZK(a)}}function Rf(e,t,n){const i=e.getProps();return Rx(i,t,n!==void 0?n:i.custom,e)}const fV=new Set(["width","height","top","left","right","bottom",...ih]);function IY(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,xf(n))}function DY(e,t){const n=Rf(e,t);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const a in r){const c=TY(r[a]);IY(e,a,c)}}function MY(e){return!!(wi(e)&&e.add)}function Ow(e,t){const n=e.getValue("willChange");if(MY(n))return n.add(t)}function pV(e){return e.props[JL]}const mV=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,NY=1e-7,kY=12;function PY(e,t,n,i,s){let r,a,c=0;do a=t+(n-t)/2,r=mV(a,i,s)-e,r>0?n=a:t=a;while(Math.abs(r)>NY&&++c<kY);return a}function hp(e,t,n,i){if(e===t&&n===i)return Ns;const s=r=>PY(r,0,1,e,n);return r=>r===0||r===1?r:mV(s(r),t,i)}const gV=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,yV=e=>t=>1-e(1-t),_V=hp(.33,1.53,.69,.99),Dx=yV(_V),vV=gV(Dx),bV=e=>(e*=2)<1?.5*Dx(e):.5*(2-Math.pow(2,-10*(e-1))),Mx=e=>1-Math.sin(Math.acos(e)),wV=yV(Mx),EV=gV(Mx),TV=e=>/^0[^.\s]+$/u.test(e);function OY(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||TV(e):!0}const Wd=e=>Math.round(e*1e5)/1e5,Nx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function LY(e){return e==null}const VY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kx=(e,t)=>n=>!!(typeof n=="string"&&VY.test(n)&&n.startsWith(e)||t&&!LY(n)&&Object.prototype.hasOwnProperty.call(n,t)),xV=(e,t,n)=>i=>{if(typeof i!="string")return i;const[s,r,a,c]=i.match(Nx);return{[e]:parseFloat(s),[t]:parseFloat(r),[n]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},jY=e=>ko(0,255,e),fb={...sh,transform:e=>Math.round(jY(e))},Fl={test:kx("rgb","red"),parse:xV("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+fb.transform(e)+", "+fb.transform(t)+", "+fb.transform(n)+", "+Wd(Cf.transform(i))+")"};function UY(e){let t="",n="",i="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Lw={test:kx("#"),parse:UY,transform:Fl.transform},pu={test:kx("hsl","hue"),parse:xV("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Nr.transform(Wd(t))+", "+Nr.transform(Wd(n))+", "+Wd(Cf.transform(i))+")"},pi={test:e=>Fl.test(e)||Lw.test(e)||pu.test(e),parse:e=>Fl.test(e)?Fl.parse(e):pu.test(e)?pu.parse(e):Lw.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Fl.transform(e):pu.transform(e)},FY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function BY(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Nx))==null?void 0:t.length)||0)+(((n=e.match(FY))==null?void 0:n.length)||0)>0}const SV="number",AV="color",zY="var",HY="var(",TD="${}",qY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function If(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const c=t.replace(qY,u=>(pi.test(u)?(i.color.push(r),s.push(AV),n.push(pi.parse(u))):u.startsWith(HY)?(i.var.push(r),s.push(zY),n.push(u)):(i.number.push(r),s.push(SV),n.push(parseFloat(u))),++r,TD)).split(TD);return{values:n,split:c,indexes:i,types:s}}function CV(e){return If(e).values}function RV(e){const{split:t,types:n}=If(e),i=t.length;return s=>{let r="";for(let a=0;a<i;a++)if(r+=t[a],s[a]!==void 0){const c=n[a];c===SV?r+=Wd(s[a]):c===AV?r+=pi.transform(s[a]):r+=s[a]}return r}}const $Y=e=>typeof e=="number"?0:e;function GY(e){const t=CV(e);return RV(e)(t.map($Y))}const Fa={test:BY,parse:CV,createTransformer:RV,getAnimatableNone:GY},WY=new Set(["brightness","contrast","saturate","opacity"]);function KY(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Nx)||[];if(!i)return e;const s=n.replace(i,"");let r=WY.has(t)?1:0;return i!==n&&(r*=100),t+"("+r+s+")"}const YY=/\b([a-z-]*)\(.*?\)/gu,Vw={...Fa,getAnimatableNone:e=>{const t=e.match(YY);return t?t.map(KY).join(" "):e}},QY={...Ex,color:pi,backgroundColor:pi,outlineColor:pi,fill:pi,stroke:pi,borderColor:pi,borderTopColor:pi,borderRightColor:pi,borderBottomColor:pi,borderLeftColor:pi,filter:Vw,WebkitFilter:Vw},IV=e=>QY[e];function DV(e,t){let n=IV(e);return n!==Vw&&(n=Fa),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const XY=new Set(["auto","none","0"]);function ZY(e,t,n){let i=0,s;for(;i<e.length&&!s;){const r=e[i];typeof r=="string"&&!XY.has(r)&&If(r).values.length&&(s=e[i]),i++}if(s&&n)for(const r of t)e[r]=DV(n,s)}const Bl=e=>e*180/Math.PI,jw=e=>{const t=Bl(Math.atan2(e[1],e[0]));return Uw(t)},JY={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:jw,rotateZ:jw,skewX:e=>Bl(Math.atan(e[1])),skewY:e=>Bl(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Uw=e=>(e=e%360,e<0&&(e+=360),e),xD=jw,SD=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),AD=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),tQ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:SD,scaleY:AD,scale:e=>(SD(e)+AD(e))/2,rotateX:e=>Uw(Bl(Math.atan2(e[6],e[5]))),rotateY:e=>Uw(Bl(Math.atan2(-e[2],e[0]))),rotateZ:xD,rotate:xD,skewX:e=>Bl(Math.atan(e[4])),skewY:e=>Bl(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function CD(e){return e.includes("scale")?1:0}function Fw(e,t){if(!e||e==="none")return CD(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=tQ,s=n;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=JY,s=c}if(!s)return CD(t);const r=i[t],a=s[1].split(",").map(nQ);return typeof r=="function"?r(a):a[r]}const eQ=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Fw(n,t)};function nQ(e){return parseFloat(e.trim())}const RD=e=>e===sh||e===Lt,iQ=new Set(["x","y","z"]),sQ=ih.filter(e=>!iQ.has(e));function rQ(e){const t=[];return sQ.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const Fu={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Fw(t,"x"),y:(e,{transform:t})=>Fw(t,"y")};Fu.translateX=Fu.x;Fu.translateY=Fu.y;const ql=new Set;let Bw=!1,zw=!1;function MV(){if(zw){const e=Array.from(ql).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const s=rQ(i);s.length&&(n.set(i,s),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([r,a])=>{var c;(c=i.getValue(r))==null||c.set(a)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}zw=!1,Bw=!1,ql.forEach(e=>e.complete()),ql.clear()}function NV(){ql.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(zw=!0)})}function oQ(){NV(),MV()}class Px{constructor(t,n,i,s,r,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ql.add(this),Bw||(Bw=!0,Xe.read(NV),Xe.resolveKeyframes(MV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:s}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const a=s==null?void 0:s.get(),c=t[t.length-1];if(a!==void 0)t[0]=a;else if(i&&n){const u=i.readValue(n,c);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=c),s&&a===void 0&&s.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ql.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ql.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const kV=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),aQ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lQ(e){const t=aQ.exec(e);if(!t)return[,];const[,n,i,s]=t;return[`--${n??i}`,s]}function PV(e,t,n=1){const[i,s]=lQ(e);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const a=r.trim();return kV(a)?parseFloat(a):a}return wx(s)?PV(s,t,n+1):s}const OV=e=>t=>t.test(e),cQ={test:e=>e==="auto",parse:e=>e},LV=[sh,Lt,Nr,da,oY,rY,cQ],ID=e=>LV.find(OV(e));class VV extends Px{constructor(t,n,i,s,r){super(t,n,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),wx(d))){const f=PV(d,n.current);f!==void 0&&(t[u]=f),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!fV.has(i)||t.length!==2)return;const[s,r]=t,a=ID(s),c=ID(r);if(a!==c)if(RD(a)&&RD(c))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let s=0;s<t.length;s++)OY(t[s])&&i.push(s);i.length&&ZY(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fu[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var c;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,a=i[r];i[r]=Fu[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([u,d])=>{t.getValue(u).set(d)}),this.resolveNoneKeyframes()}}const DD=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Fa.test(e)||e==="0")&&!e.startsWith("url("));function uQ(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function hQ(e,t,n,i){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],a=DD(s,t),c=DD(r,t);return!a||!c?!1:uQ(e)||(n==="spring"||dx(n))&&i}const dQ=e=>e!==null;function N_(e,{repeat:t,repeatType:n="loop"},i){const s=e.filter(dQ),r=t&&n!=="loop"&&t%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const fQ=40;class jV{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Mr.now(),this.options={autoplay:t,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:a,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>fQ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&oQ(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Mr.now(),this.hasAttemptedResolve=!0;const{name:i,type:s,velocity:r,delay:a,onComplete:c,onUpdate:u,isGenerator:d}=this.options;if(!d&&!hQ(t,i,s,r))if(a)this.options.duration=0;else{u&&u(N_(t,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const f=this.initPlayback(t,n);f!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const un=(e,t,n)=>e+(t-e)*n;function pb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function pQ({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let s=0,r=0,a=0;if(!t)s=r=a=n;else{const c=n<.5?n*(1+t):n+t-n*t,u=2*n-c;s=pb(u,c,e+1/3),r=pb(u,c,e),a=pb(u,c,e-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:i}}function Iy(e,t){return n=>n>0?t:e}const mb=(e,t,n)=>{const i=e*e,s=n*(t*t-i)+i;return s<0?0:Math.sqrt(s)},mQ=[Lw,Fl,pu],gQ=e=>mQ.find(t=>t.test(e));function MD(e){const t=gQ(e);if(!t)return!1;let n=t.parse(e);return t===pu&&(n=pQ(n)),n}const ND=(e,t)=>{const n=MD(e),i=MD(t);if(!n||!i)return Iy(e,t);const s={...n};return r=>(s.red=mb(n.red,i.red,r),s.green=mb(n.green,i.green,r),s.blue=mb(n.blue,i.blue,r),s.alpha=un(n.alpha,i.alpha,r),Fl.transform(s))},yQ=(e,t)=>n=>t(e(n)),dp=(...e)=>e.reduce(yQ),Hw=new Set(["none","hidden"]);function _Q(e,t){return Hw.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function vQ(e,t){return n=>un(e,t,n)}function Ox(e){return typeof e=="number"?vQ:typeof e=="string"?wx(e)?Iy:pi.test(e)?ND:EQ:Array.isArray(e)?UV:typeof e=="object"?pi.test(e)?ND:bQ:Iy}function UV(e,t){const n=[...e],i=n.length,s=e.map((r,a)=>Ox(r)(r,t[a]));return r=>{for(let a=0;a<i;a++)n[a]=s[a](r);return n}}function bQ(e,t){const n={...e,...t},i={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(i[s]=Ox(e[s])(e[s],t[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function wQ(e,t){const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],a=e.indexes[r][i[r]],c=e.values[a]??0;n[s]=c,i[r]++}return n}const EQ=(e,t)=>{const n=Fa.createTransformer(t),i=If(e),s=If(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Hw.has(e)&&!s.values.length||Hw.has(t)&&!i.values.length?_Q(e,t):dp(UV(wQ(i,s),s.values),n):Iy(e,t)};function FV(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?un(e,t,n):Ox(e)(e,t)}const TQ=5;function BV(e,t,n){const i=Math.max(t-TQ,0);return zL(n-e(i),t-i)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},kD=.001;function xQ({duration:e=mn.duration,bounce:t=mn.bounce,velocity:n=mn.velocity,mass:i=mn.mass}){let s,r,a=1-t;a=ko(mn.minDamping,mn.maxDamping,a),e=ko(mn.minDuration,mn.maxDuration,Dr(e)),a<1?(s=d=>{const f=d*a,m=f*e,y=f-n,v=qw(d,a),w=Math.exp(-m);return kD-y/v*w},r=d=>{const m=d*a*e,y=m*n+n,v=Math.pow(a,2)*Math.pow(d,2)*e,w=Math.exp(-m),T=qw(Math.pow(d,2),a);return(-s(d)+kD>0?-1:1)*((y-v)*w)/T}):(s=d=>{const f=Math.exp(-d*e),m=(d-n)*e+1;return-.001+f*m},r=d=>{const f=Math.exp(-d*e),m=(n-d)*(e*e);return f*m});const c=5/e,u=AQ(s,r,c);if(e=Ir(e),isNaN(u))return{stiffness:mn.stiffness,damping:mn.damping,duration:e};{const d=Math.pow(u,2)*i;return{stiffness:d,damping:a*2*Math.sqrt(i*d),duration:e}}}const SQ=12;function AQ(e,t,n){let i=n;for(let s=1;s<SQ;s++)i=i-e(i)/t(i);return i}function qw(e,t){return e*Math.sqrt(1-t*t)}const CQ=["duration","bounce"],RQ=["stiffness","damping","mass"];function PD(e,t){return t.some(n=>e[n]!==void 0)}function IQ(e){let t={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...e};if(!PD(e,RQ)&&PD(e,CQ))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,r=2*ko(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:mn.mass,stiffness:s,damping:r}}else{const n=xQ(e);t={...t,...n,mass:mn.mass},t.isResolvedFromDuration=!0}return t}function Dy(e=mn.visualDuration,t=mn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],c={done:!1,value:r},{stiffness:u,damping:d,mass:f,duration:m,velocity:y,isResolvedFromDuration:v}=IQ({...n,velocity:-Dr(n.velocity||0)}),w=y||0,T=d/(2*Math.sqrt(u*f)),x=a-r,C=Dr(Math.sqrt(u/f)),k=Math.abs(x)<5;i||(i=k?mn.restSpeed.granular:mn.restSpeed.default),s||(s=k?mn.restDelta.granular:mn.restDelta.default);let M;if(T<1){const j=qw(C,T);M=$=>{const O=Math.exp(-T*C*$);return a-O*((w+T*C*x)/j*Math.sin(j*$)+x*Math.cos(j*$))}}else if(T===1)M=j=>a-Math.exp(-C*j)*(x+(w+C*x)*j);else{const j=C*Math.sqrt(T*T-1);M=$=>{const O=Math.exp(-T*C*$),D=Math.min(j*$,300);return a-O*((w+T*C*x)*Math.sinh(D)+j*x*Math.cosh(D))/j}}const z={calculatedDuration:v&&m||null,next:j=>{const $=M(j);if(v)c.done=j>=m;else{let O=0;T<1&&(O=j===0?Ir(w):BV(M,j,$));const D=Math.abs(O)<=i,N=Math.abs(a-$)<=s;c.done=D&&N}return c.value=c.done?a:$,c},toString:()=>{const j=Math.min(px(z),Cy),$=HL(O=>z.next(j*O).value,j,30);return j+"ms "+$},toTransition:()=>{}};return z}Dy.applyToOptions=e=>{const t=CK(e,100,Dy);return e.ease=Tf()?t.ease:"easeOut",e.duration=Ir(t.duration),e.type="keyframes",e};function OD({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:c,max:u,restDelta:d=.5,restSpeed:f}){const m=e[0],y={done:!1,value:m},v=D=>c!==void 0&&D<c||u!==void 0&&D>u,w=D=>c===void 0?u:u===void 0||Math.abs(c-D)<Math.abs(u-D)?c:u;let T=n*t;const x=m+T,C=a===void 0?x:a(x);C!==x&&(T=C-m);const k=D=>-T*Math.exp(-D/i),M=D=>C+k(D),z=D=>{const N=k(D),L=M(D);y.done=Math.abs(N)<=d,y.value=y.done?C:L};let j,$;const O=D=>{v(y.value)&&(j=D,$=Dy({keyframes:[y.value,w(y.value)],velocity:BV(M,D,y.value),damping:s,stiffness:r,restDelta:d,restSpeed:f}))};return O(0),{calculatedDuration:null,next:D=>{let N=!1;return!$&&j===void 0&&(N=!0,z(D),O(D)),j!==void 0&&D>=j?$.next(D-j):(!N&&z(D),y)}}}const DQ=hp(.42,0,1,1),MQ=hp(0,0,.58,1),zV=hp(.42,0,.58,1),NQ=e=>Array.isArray(e)&&typeof e[0]!="number",kQ={linear:Ns,easeIn:DQ,easeInOut:zV,easeOut:MQ,circIn:Mx,circInOut:EV,circOut:wV,backIn:Dx,backInOut:vV,backOut:_V,anticipate:bV},LD=e=>{if(hx(e)){BL(e.length===4);const[t,n,i,s]=e;return hp(t,n,i,s)}else if(typeof e=="string")return kQ[e];return e};function PQ(e,t,n){const i=[],s=n||FV,r=e.length-1;for(let a=0;a<r;a++){let c=s(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||Ns:t;c=dp(u,c)}i.push(c)}return i}function OQ(e,t,{clamp:n=!0,ease:i,mixer:s}={}){const r=e.length;if(BL(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=PQ(t,i,s),u=c.length,d=f=>{if(a&&f<e[0])return t[0];let m=0;if(u>1)for(;m<e.length-2&&!(f<e[m+1]);m++);const y=Ef(e[m],e[m+1],f);return c[m](y)};return n?f=>d(ko(e[0],e[r-1],f)):d}function LQ(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const s=Ef(0,t,i);e.push(un(n,1,s))}}function VQ(e){const t=[0];return LQ(t,e.length-1),t}function jQ(e,t){return e.map(n=>n*t)}function UQ(e,t){return e.map(()=>t||zV).splice(0,e.length-1)}function My({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const s=NQ(i)?i.map(LD):LD(i),r={done:!1,value:t[0]},a=jQ(n&&n.length===t.length?n:VQ(t),e),c=OQ(a,t,{ease:Array.isArray(s)?s:UQ(t,s)});return{calculatedDuration:e,next:u=>(r.value=c(u),r.done=u>=e,r)}}const FQ=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Xe.update(t,!0),stop:()=>Ua(t),now:()=>oi.isProcessing?oi.timestamp:Mr.now()}},BQ={decay:OD,inertia:OD,tween:My,keyframes:My,spring:Dy},zQ=e=>e/100;class Lx extends jV{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:i,element:s,keyframes:r}=this.options,a=(s==null?void 0:s.KeyframeResolver)||Px,c=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new a(r,c,n,i,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=this.options,c=dx(n)?n:BQ[n]||My;let u,d;c!==My&&typeof t[0]!="number"&&(u=dp(zQ,FV(t[0],t[1])),t=[0,100]);const f=c({...this.options,keyframes:t});r==="mirror"&&(d=c({...this.options,keyframes:[...t].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=px(f));const{calculatedDuration:m}=f,y=m+s,v=y*(i+1)-s;return{generator:f,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:m,resolvedDuration:y,totalDuration:v}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:i}=this;if(!i){const{keyframes:D}=this.options;return{done:!0,value:D[D.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:a,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:d,totalDuration:f,resolvedDuration:m}=i;if(this.startTime===null)return r.next(0);const{delay:y,repeat:v,repeatType:w,repeatDelay:T,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-f/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const C=this.currentTime-y*(this.speed>=0?1:-1),k=this.speed>=0?C<0:C>f;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let M=this.currentTime,z=r;if(v){const D=Math.min(this.currentTime,f)/m;let N=Math.floor(D),L=D%1;!L&&D>=1&&(L=1),L===1&&N--,N=Math.min(N,v+1),!!(N%2)&&(w==="reverse"?(L=1-L,T&&(L-=T/m)):w==="mirror"&&(z=a)),M=ko(0,1,L)*m}const j=k?{done:!1,value:u[0]}:z.next(M);c&&(j.value=c(j.value));let{done:$}=j;!k&&d!==null&&($=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return O&&s!==void 0&&(j.value=N_(u,this.options,s)),x&&x(j.value),O&&this.finish(),j}get duration(){const{resolved:t}=this;return t?Dr(t.calculatedDuration):0}get time(){return Dr(this.currentTime)}set time(t){t=Ir(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Dr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=FQ,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}get finished(){return this.currentFinishedPromise}}const HQ=new Set(["opacity","clipPath","filter","transform"]),qQ=cx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ny=10,$Q=2e4;function GQ(e){return dx(e.type)||e.type==="spring"||!$L(e.ease)}function WQ(e,t){const n=new Lx({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:e[0]};const s=[];let r=0;for(;!i.done&&r<$Q;)i=n.sample(r),s.push(i.value),r+=Ny;return{times:void 0,keyframes:s,duration:r-Ny,ease:"linear"}}const HV={anticipate:bV,backInOut:vV,circInOut:EV};function KQ(e){return e in HV}class VD extends jV{constructor(t){super(t);const{name:n,motionValue:i,element:s,keyframes:r}=this.options;this.resolver=new VV(r,(a,c)=>this.onKeyframesResolved(a,c),n,i,s),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:i=300,times:s,ease:r,type:a,motionValue:c,name:u,startTime:d}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof r=="string"&&Tf()&&KQ(r)&&(r=HV[r]),GQ(this.options)){const{onComplete:m,onUpdate:y,motionValue:v,element:w,...T}=this.options,x=WQ(t,T);t=x.keyframes,t.length===1&&(t[1]=t[0]),i=x.duration,s=x.times,r=x.ease,a="keyframes"}const f=AK(c.owner.current,u,t,{...this.options,duration:i,times:s,ease:r});return f.startTime=d??this.calcStartTime(),this.pendingTimeline?(hD(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:m}=this.options;c.set(N_(t,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:s,type:a,ease:r,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Dr(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Dr(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Ir(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Ns;const{animation:i}=n;hD(i,t)}return Ns}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:i,duration:s,type:r,ease:a,times:c}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:f,onComplete:m,element:y,...v}=this.options,w=new Lx({...v,keyframes:i,duration:s,type:r,ease:a,times:c,isGenerator:!0}),T=Ir(this.time);d.setWithVelocity(w.sample(T-Ny).value,w.sample(T).value,Ny)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:i,repeatDelay:s,repeatType:r,damping:a,type:c}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=n.owner.getProps();return qQ()&&i&&HQ.has(i)&&(i!=="transform"||!d)&&!u&&!s&&r!=="mirror"&&a!==0&&c!=="inertia"}}const YQ={type:"spring",stiffness:500,damping:25,restSpeed:10},QQ=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),XQ={type:"keyframes",duration:.8},ZQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JQ=(e,{keyframes:t})=>t.length>2?XQ:hc.has(e)?e.startsWith("scale")?QQ(t[1]):YQ:ZQ;function tX({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:c,from:u,elapsed:d,...f}){return!!Object.keys(f).length}const Vx=(e,t,n,i={},s,r)=>a=>{const c=fx(i,e)||{},u=c.delay||i.delay||0;let{elapsed:d=0}=i;d=d-Ir(u);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-d,onUpdate:y=>{t.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:r?void 0:s};tX(c)||(f={...f,...JQ(e,f)}),f.duration&&(f.duration=Ir(f.duration)),f.repeatDelay&&(f.repeatDelay=Ir(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(m=!0)),f.allowFlatten=!c.type&&!c.ease,m&&!r&&t.get()!==void 0){const y=N_(f.keyframes,c);if(y!==void 0)return Xe.update(()=>{f.onUpdate(y),f.onComplete()}),new TK([])}return!r&&VD.supports(f)?new VD(f):new Lx(f)};function eX({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function qV(e,t,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:a,...c}=t;i&&(r=i);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const f in c){const m=e.getValue(f,e.latestValues[f]??null),y=c[f];if(y===void 0||d&&eX(d,f))continue;const v={delay:n,...fx(r||{},f)};let w=!1;if(window.MotionHandoffAnimation){const x=pV(e);if(x){const C=window.MotionHandoffAnimation(x,f,Xe);C!==null&&(v.startTime=C,w=!0)}}Ow(e,f),m.start(Vx(f,m,y,e.shouldReduceMotion&&fV.has(f)?{type:!1}:v,e,w));const T=m.animation;T&&u.push(T)}return a&&Promise.all(u).then(()=>{Xe.update(()=>{a&&DY(e,a)})}),u}function $w(e,t,n={}){var u;const i=Rf(e,t,n.type==="exit"?(u=e.presenceContext)==null?void 0:u.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(qV(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:y}=s;return nX(e,t,f+d,m,y,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,f]=c==="beforeChildren"?[r,a]:[a,r];return d().then(()=>f())}else return Promise.all([r(),a(n.delay)])}function nX(e,t,n=0,i=0,s=1,r){const a=[],c=(e.variantChildren.size-1)*i,u=s===1?(d=0)=>d*i:(d=0)=>c-d*i;return Array.from(e.variantChildren).sort(iX).forEach((d,f)=>{d.notify("AnimationStart",t),a.push($w(d,t,{...r,delay:n+u(f)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(a)}function iX(e,t){return e.sortNodePosition(t)}function sX(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>$w(e,r,n));i=Promise.all(s)}else if(typeof t=="string")i=$w(e,t,n);else{const s=typeof t=="function"?Rf(e,t,n.custom):t;i=Promise.all(qV(e,s,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function $V(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const rX=_x.length;function GV(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?GV(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<rX;n++){const i=_x[n],s=e.props[i];(Sf(s)||s===!1)&&(t[i]=s)}return t}const oX=[...yx].reverse(),aX=yx.length;function lX(e){return t=>Promise.all(t.map(({animation:n,options:i})=>sX(e,n,i)))}function cX(e){let t=lX(e),n=jD(),i=!0;const s=u=>(d,f)=>{var y;const m=Rf(e,f,u==="exit"?(y=e.presenceContext)==null?void 0:y.custom:void 0);if(m){const{transition:v,transitionEnd:w,...T}=m;d={...d,...T,...w}}return d};function r(u){t=u(e)}function a(u){const{props:d}=e,f=GV(e.parent)||{},m=[],y=new Set;let v={},w=1/0;for(let x=0;x<aX;x++){const C=oX[x],k=n[C],M=d[C]!==void 0?d[C]:f[C],z=Sf(M),j=C===u?k.isActive:null;j===!1&&(w=x);let $=M===f[C]&&M!==d[C]&&z;if($&&i&&e.manuallyAnimateOnMount&&($=!1),k.protectedKeys={...v},!k.isActive&&j===null||!M&&!k.prevProp||D_(M)||typeof M=="boolean")continue;const O=uX(k.prevProp,M);let D=O||C===u&&k.isActive&&!$&&z||x>w&&z,N=!1;const L=Array.isArray(M)?M:[M];let F=L.reduce(s(C),{});j===!1&&(F={});const{prevResolvedValues:H={}}=k,B={...H,...F},_t=tt=>{D=!0,y.has(tt)&&(N=!0,y.delete(tt)),k.needsAnimating[tt]=!0;const dt=e.getValue(tt);dt&&(dt.liveStyle=!1)};for(const tt in B){const dt=F[tt],yt=H[tt];if(v.hasOwnProperty(tt))continue;let U=!1;Pw(dt)&&Pw(yt)?U=!$V(dt,yt):U=dt!==yt,U?dt!=null?_t(tt):y.add(tt):dt!==void 0&&y.has(tt)?_t(tt):k.protectedKeys[tt]=!0}k.prevProp=M,k.prevResolvedValues=F,k.isActive&&(v={...v,...F}),i&&e.blockInitialAnimation&&(D=!1),D&&(!($&&O)||N)&&m.push(...L.map(tt=>({animation:tt,options:{type:C}})))}if(y.size){const x={};if(typeof d.initial!="boolean"){const C=Rf(e,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(x.transition=C.transition)}y.forEach(C=>{const k=e.getBaseTarget(C),M=e.getValue(C);M&&(M.liveStyle=!0),x[C]=k??null}),m.push({animation:x})}let T=!!m.length;return i&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(T=!1),i=!1,T?t(m):Promise.resolve()}function c(u,d){var m;if(n[u].isActive===d)return Promise.resolve();(m=e.variantChildren)==null||m.forEach(y=>{var v;return(v=y.animationState)==null?void 0:v.setActive(u,d)}),n[u].isActive=d;const f=a(u);for(const y in n)n[y].protectedKeys={};return f}return{animateChanges:a,setActive:c,setAnimateFunction:r,getState:()=>n,reset:()=>{n=jD(),i=!0}}}function uX(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!$V(t,e):!1}function Al(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jD(){return{animate:Al(!0),whileInView:Al(),whileHover:Al(),whileTap:Al(),whileDrag:Al(),whileFocus:Al(),exit:Al()}}class Ya{constructor(t){this.isMounted=!1,this.node=t}update(){}}class hX extends Ya{constructor(t){super(t),t.animationState||(t.animationState=cX(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();D_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let dX=0;class fX extends Ya{constructor(){super(...arguments),this.id=dX++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const pX={animation:{Feature:hX},exit:{Feature:fX}};function Df(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function fp(e){return{point:{x:e.pageX,y:e.pageY}}}const mX=e=>t=>gx(t)&&e(t,fp(t));function Kd(e,t,n,i){return Df(e,t,mX(n),i)}function WV({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function gX({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function yX(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const KV=1e-4,_X=1-KV,vX=1+KV,YV=.01,bX=0-YV,wX=0+YV;function Mi(e){return e.max-e.min}function EX(e,t,n){return Math.abs(e-t)<=n}function UD(e,t,n,i=.5){e.origin=i,e.originPoint=un(t.min,t.max,e.origin),e.scale=Mi(n)/Mi(t),e.translate=un(n.min,n.max,e.origin)-e.originPoint,(e.scale>=_X&&e.scale<=vX||isNaN(e.scale))&&(e.scale=1),(e.translate>=bX&&e.translate<=wX||isNaN(e.translate))&&(e.translate=0)}function Yd(e,t,n,i){UD(e.x,t.x,n.x,i?i.originX:void 0),UD(e.y,t.y,n.y,i?i.originY:void 0)}function FD(e,t,n){e.min=n.min+t.min,e.max=e.min+Mi(t)}function TX(e,t,n){FD(e.x,t.x,n.x),FD(e.y,t.y,n.y)}function BD(e,t,n){e.min=t.min-n.min,e.max=e.min+Mi(t)}function Qd(e,t,n){BD(e.x,t.x,n.x),BD(e.y,t.y,n.y)}const zD=()=>({translate:0,scale:1,origin:0,originPoint:0}),mu=()=>({x:zD(),y:zD()}),HD=()=>({min:0,max:0}),wn=()=>({x:HD(),y:HD()});function Is(e){return[e("x"),e("y")]}function gb(e){return e===void 0||e===1}function Gw({scale:e,scaleX:t,scaleY:n}){return!gb(e)||!gb(t)||!gb(n)}function Nl(e){return Gw(e)||QV(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function QV(e){return qD(e.x)||qD(e.y)}function qD(e){return e&&e!=="0%"}function ky(e,t,n){const i=e-n,s=t*i;return n+s}function $D(e,t,n,i,s){return s!==void 0&&(e=ky(e,s,i)),ky(e,n,i)+t}function Ww(e,t=0,n=1,i,s){e.min=$D(e.min,t,n,i,s),e.max=$D(e.max,t,n,i,s)}function XV(e,{x:t,y:n}){Ww(e.x,t.translate,t.scale,t.originPoint),Ww(e.y,n.translate,n.scale,n.originPoint)}const GD=.999999999999,WD=1.0000000000001;function xX(e,t,n,i=!1){const s=n.length;if(!s)return;t.x=t.y=1;let r,a;for(let c=0;c<s;c++){r=n[c],a=r.projectionDelta;const{visualElement:u}=r.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&yu(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,XV(e,a)),i&&Nl(r.latestValues)&&yu(e,r.latestValues))}t.x<WD&&t.x>GD&&(t.x=1),t.y<WD&&t.y>GD&&(t.y=1)}function gu(e,t){e.min=e.min+t,e.max=e.max+t}function KD(e,t,n,i,s=.5){const r=un(e.min,e.max,s);Ww(e,t,n,r,i)}function yu(e,t){KD(e.x,t.x,t.scaleX,t.scale,t.originX),KD(e.y,t.y,t.scaleY,t.scale,t.originY)}function ZV(e,t){return WV(yX(e.getBoundingClientRect(),t))}function SX(e,t,n){const i=ZV(e,n),{scroll:s}=t;return s&&(gu(i.x,s.offset.x),gu(i.y,s.offset.y)),i}const JV=({current:e})=>e?e.ownerDocument.defaultView:null,YD=(e,t)=>Math.abs(e-t);function AX(e,t){const n=YD(e.x,t.x),i=YD(e.y,t.y);return Math.sqrt(n**2+i**2)}class tj{constructor(t,n,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=_b(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=AX(m.offset,{x:0,y:0})>=3;if(!y&&!v)return;const{point:w}=m,{timestamp:T}=oi;this.history.push({...w,timestamp:T});const{onStart:x,onMove:C}=this.handlers;y||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=yb(y,this.transformPagePoint),Xe.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:v,onSessionEnd:w,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=_b(m.type==="pointercancel"?this.lastMoveEventInfo:yb(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,x),w&&w(m,x)},!gx(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.contextWindow=s||window;const a=fp(t),c=yb(a,this.transformPagePoint),{point:u}=c,{timestamp:d}=oi;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=n;f&&f(t,_b(c,this.history)),this.removeListeners=dp(Kd(this.contextWindow,"pointermove",this.handlePointerMove),Kd(this.contextWindow,"pointerup",this.handlePointerUp),Kd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ua(this.updatePoint)}}function yb(e,t){return t?{point:t(e.point)}:e}function QD(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _b({point:e},t){return{point:e,delta:QD(e,ej(t)),offset:QD(e,CX(t)),velocity:RX(t,.1)}}function CX(e){return e[0]}function ej(e){return e[e.length-1]}function RX(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const s=ej(e);for(;n>=0&&(i=e[n],!(s.timestamp-i.timestamp>Ir(t)));)n--;if(!i)return{x:0,y:0};const r=Dr(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function IX(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?un(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?un(n,e,i.max):Math.min(e,n)),e}function XD(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function DX(e,{top:t,left:n,bottom:i,right:s}){return{x:XD(e.x,n,s),y:XD(e.y,t,i)}}function ZD(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function MX(e,t){return{x:ZD(e.x,t.x),y:ZD(e.y,t.y)}}function NX(e,t){let n=.5;const i=Mi(e),s=Mi(t);return s>i?n=Ef(t.min,t.max-i,e.min):i>s&&(n=Ef(e.min,e.max-s,t.min)),ko(0,1,n)}function kX(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Kw=.35;function PX(e=Kw){return e===!1?e=0:e===!0&&(e=Kw),{x:JD(e,"left","right"),y:JD(e,"top","bottom")}}function JD(e,t,n){return{min:tM(e,t),max:tM(e,n)}}function tM(e,t){return typeof e=="number"?e:e[t]||0}const OX=new WeakMap;class LX{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(fp(f).point)},r=(f,m)=>{const{drag:y,dragPropagation:v,onDragStart:w}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=MK(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Is(x=>{let C=this.getAxisMotionValue(x).get()||0;if(Nr.test(C)){const{projection:k}=this.visualElement;if(k&&k.layout){const M=k.layout.layoutBox[x];M&&(C=Mi(M)*(parseFloat(C)/100))}}this.originPoint[x]=C}),w&&Xe.postRender(()=>w(f,m)),Ow(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},a=(f,m)=>{const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:w,onDrag:T}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:x}=m;if(v&&this.currentDirection===null){this.currentDirection=VX(x),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,x),this.updateAxis("y",m.point,x),this.visualElement.render(),T&&T(f,m)},c=(f,m)=>this.stop(f,m),u=()=>Is(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new tj(t,{onSessionStart:s,onStart:r,onMove:a,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:JV(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&Xe.postRender(()=>r(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:s}=this.getProps();if(!i||!tg(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let a=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(a=IX(a,this.constraints[t],this.elastic[t])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&fu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=DX(i.layoutBox,t):this.constraints=!1,this.elastic=PX(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Is(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=kX(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!fu(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=SX(i,s.root,this.visualElement.getTransformPagePoint());let a=MX(s.layout.layoutBox,r);if(n){const c=n(gX(a));this.hasMutatedConstraints=!!c,c&&(a=WV(c))}return a}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=Is(f=>{if(!tg(f,n,this.currentDirection))return;let m=u&&u[f]||{};a&&(m={min:0,max:0});const y=s?200:1e6,v=s?40:1e7,w={type:"inertia",velocity:i?t[f]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(f,w)});return Promise.all(d).then(c)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return Ow(this.visualElement,t),i.start(Vx(t,i,0,n,this.visualElement,!1))}stopAnimation(){Is(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Is(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Is(n=>{const{drag:i}=this.getProps();if(!tg(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:c}=s.layout.layoutBox[n];r.set(t[n]-un(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!fu(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Is(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const u=c.get();s[a]=NX({min:u,max:u},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Is(a=>{if(!tg(a,t,null))return;const c=this.getAxisMotionValue(a),{min:u,max:d}=this.constraints[a];c.set(un(u,d,s[a]))})}addListeners(){if(!this.visualElement.current)return;OX.set(this.visualElement,this);const t=this.visualElement.current,n=Kd(t,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();fu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Xe.read(i);const a=Df(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Is(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())});return()=>{a(),n(),r(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=Kw,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:c}}}function tg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function VX(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class jX extends Ya{constructor(t){super(t),this.removeGroupControls=Ns,this.removeListeners=Ns,this.controls=new LX(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ns}unmount(){this.removeGroupControls(),this.removeListeners()}}const eM=e=>(t,n)=>{e&&Xe.postRender(()=>e(t,n))};class UX extends Ya{constructor(){super(...arguments),this.removePointerDownListener=Ns}onPointerDown(t){this.session=new tj(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JV(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:eM(t),onStart:eM(n),onMove:i,onEnd:(r,a)=>{delete this.session,s&&Xe.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=Kd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Lg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const md={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Lt.test(e))e=parseFloat(e);else return e;const n=nM(e,t.target.x),i=nM(e,t.target.y);return`${n}% ${i}%`}},FX={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,s=Fa.parse(e);if(s.length>5)return i;const r=Fa.createTransformer(e),a=typeof s[0]!="number"?1:0,c=n.x.scale*t.x,u=n.y.scale*t.y;s[0+a]/=c,s[1+a]/=u;const d=un(c,u,.5);return typeof s[2+a]=="number"&&(s[2+a]/=d),typeof s[3+a]=="number"&&(s[3+a]/=d),r(s)}};class BX extends R.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;sY(zX),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Lg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,a=i.projection;return a&&(a.isPresent=r,s||t.layoutDependency!==n||n===void 0||t.isPresent!==r?a.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?a.promote():a.relegate()||Xe.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),mx.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function nj(e){const[t,n]=FL(),i=R.useContext(ix);return S.jsx(BX,{...e,layoutGroup:i,switchLayoutGroup:R.useContext(tV),isPresent:t,safeToRemove:n})}const zX={borderRadius:{...md,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:md,borderTopRightRadius:md,borderBottomLeftRadius:md,borderBottomRightRadius:md,boxShadow:FX};function HX(e,t,n){const i=wi(e)?e:xf(e);return i.start(Vx("",i,t,n)),i.animation}function qX(e){return e instanceof SVGElement&&e.tagName!=="svg"}const $X=(e,t)=>e.depth-t.depth;class GX{constructor(){this.children=[],this.isDirty=!1}add(t){ax(this.children,t),this.isDirty=!0}remove(t){lx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($X),this.isDirty=!1,this.children.forEach(t)}}function WX(e,t){const n=Mr.now(),i=({timestamp:s})=>{const r=s-n;r>=t&&(Ua(i),e(r-t))};return Xe.read(i,!0),()=>Ua(i)}const ij=["TopLeft","TopRight","BottomLeft","BottomRight"],KX=ij.length,iM=e=>typeof e=="string"?parseFloat(e):e,sM=e=>typeof e=="number"||Lt.test(e);function YX(e,t,n,i,s,r){s?(e.opacity=un(0,n.opacity!==void 0?n.opacity:1,QX(i)),e.opacityExit=un(t.opacity!==void 0?t.opacity:1,0,XX(i))):r&&(e.opacity=un(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<KX;a++){const c=`border${ij[a]}Radius`;let u=rM(t,c),d=rM(n,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||sM(u)===sM(d)?(e[c]=Math.max(un(iM(u),iM(d),i),0),(Nr.test(d)||Nr.test(u))&&(e[c]+="%")):e[c]=d}(t.rotate||n.rotate)&&(e.rotate=un(t.rotate||0,n.rotate||0,i))}function rM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const QX=sj(0,.5,wV),XX=sj(.5,.95,Ns);function sj(e,t,n){return i=>i<e?0:i>t?1:n(Ef(e,t,i))}function oM(e,t){e.min=t.min,e.max=t.max}function Cs(e,t){oM(e.x,t.x),oM(e.y,t.y)}function aM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function lM(e,t,n,i,s){return e-=t,e=ky(e,1/n,i),s!==void 0&&(e=ky(e,1/s,i)),e}function ZX(e,t=0,n=1,i=.5,s,r=e,a=e){if(Nr.test(t)&&(t=parseFloat(t),t=un(a.min,a.max,t/100)-a.min),typeof t!="number")return;let c=un(r.min,r.max,i);e===r&&(c-=t),e.min=lM(e.min,t,n,c,s),e.max=lM(e.max,t,n,c,s)}function cM(e,t,[n,i,s],r,a){ZX(e,t[n],t[i],t[s],t.scale,r,a)}const JX=["x","scaleX","originX"],tZ=["y","scaleY","originY"];function uM(e,t,n,i){cM(e.x,t,JX,n?n.x:void 0,i?i.x:void 0),cM(e.y,t,tZ,n?n.y:void 0,i?i.y:void 0)}function hM(e){return e.translate===0&&e.scale===1}function rj(e){return hM(e.x)&&hM(e.y)}function dM(e,t){return e.min===t.min&&e.max===t.max}function eZ(e,t){return dM(e.x,t.x)&&dM(e.y,t.y)}function fM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function oj(e,t){return fM(e.x,t.x)&&fM(e.y,t.y)}function pM(e){return Mi(e.x)/Mi(e.y)}function mM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class nZ{constructor(){this.members=[]}add(t){ax(this.members,t),t.scheduleRender()}remove(t){if(lx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iZ(e,t,n){let i="";const s=e.x.translate/t.x,r=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:m,rotateY:y,skewX:v,skewY:w}=n;d&&(i=`perspective(${d}px) ${i}`),f&&(i+=`rotate(${f}deg) `),m&&(i+=`rotateX(${m}deg) `),y&&(i+=`rotateY(${y}deg) `),v&&(i+=`skewX(${v}deg) `),w&&(i+=`skewY(${w}deg) `)}const c=e.x.scale*t.x,u=e.y.scale*t.y;return(c!==1||u!==1)&&(i+=`scale(${c}, ${u})`),i||"none"}const vb=["","X","Y","Z"],sZ={visibility:"hidden"},gM=1e3;let rZ=0;function bb(e,t,n,i){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function aj(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=pV(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Xe,!(s||r))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&aj(i)}function lj({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},c=t==null?void 0:t()){this.id=rZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(lZ),this.nodes.forEach(fZ),this.nodes.forEach(pZ),this.nodes.forEach(cZ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new GX)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ux),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=qX(a),this.instance=a;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||u)&&(this.isLayoutDirty=!0),e){let m;const y=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=WX(y,250),Lg.hasAnimatedSinceResize&&(Lg.hasAnimatedSinceResize=!1,this.nodes.forEach(_M))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||f.getDefaultTransition()||vZ,{onLayoutAnimationStart:x,onLayoutAnimationComplete:C}=f.getProps(),k=!this.targetLayout||!oj(this.targetLayout,w),M=!y&&v;if(this.options.layoutRoot||this.resumeFrom||M||y&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,M);const z={...fx(T,"layout"),onPlay:x,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else y||_M(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ua(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mZ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yM);return}this.isUpdating||this.nodes.forEach(hZ),this.isUpdating=!1,this.nodes.forEach(dZ),this.nodes.forEach(oZ),this.nodes.forEach(aZ),this.clearAllSnapshots();const c=Mr.now();oi.delta=ko(0,1e3/60,c-oi.timestamp),oi.timestamp=c,oi.isProcessing=!0,hb.update.process(oi),hb.preRender.process(oi),hb.render.process(oi),oi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uZ),this.sharedNodes.forEach(gZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mi(this.snapshot.measuredBox.x)&&!Mi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!rj(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;a&&(c||Nl(this.latestValues)||f)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),bZ(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:a}=this.options;if(!a)return wn();const c=a.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(wZ))){const{scroll:f}=this.root;f&&(gu(c.x,f.offset.x),gu(c.y,f.offset.y))}return c}removeElementScroll(a){var u;const c=wn();if(Cs(c,a),(u=this.scroll)!=null&&u.wasRoot)return c;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:y}=f;f!==this.root&&m&&y.layoutScroll&&(m.wasRoot&&Cs(c,a),gu(c.x,m.offset.x),gu(c.y,m.offset.y))}return c}applyTransform(a,c=!1){const u=wn();Cs(u,a);for(let d=0;d<this.path.length;d++){const f=this.path[d];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&yu(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Nl(f.latestValues)&&yu(u,f.latestValues)}return Nl(this.latestValues)&&yu(u,this.latestValues),u}removeTransform(a){const c=wn();Cs(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Nl(d.latestValues))continue;Gw(d.latestValues)&&d.updateSnapshot();const f=wn(),m=d.measurePageBox();Cs(f,m),uM(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return Nl(this.latestValues)&&uM(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==oi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var y;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=oi.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Qd(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cs(this.target,this.layout.layoutBox),XV(this.target,this.targetDelta)):Cs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Qd(this.relativeTargetOrigin,this.target,v.target),Cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Gw(this.parent.latestValues)||QV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===oi.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Cs(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;xX(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=wn());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(aM(this.prevProjectionDelta.x,this.projectionDelta.x),aM(this.prevProjectionDelta.y,this.projectionDelta.y)),Yd(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!mM(this.projectionDelta.x,this.prevProjectionDelta.x)||!mM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mu(),this.projectionDelta=mu(),this.projectionDeltaWithTransform=mu()}setAnimationOrigin(a,c=!1){const u=this.snapshot,d=u?u.latestValues:{},f={...this.latestValues},m=mu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=wn(),v=u?u.source:void 0,w=this.layout?this.layout.source:void 0,T=v!==w,x=this.getStack(),C=!x||x.members.length<=1,k=!!(T&&!C&&this.options.crossfade===!0&&!this.path.some(_Z));this.animationProgress=0;let M;this.mixTargetDelta=z=>{const j=z/1e3;vM(m.x,a.x,j),vM(m.y,a.y,j),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qd(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yZ(this.relativeTarget,this.relativeTargetOrigin,y,j),M&&eZ(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=wn()),Cs(M,this.relativeTarget)),T&&(this.animationValues=f,YX(f,d,this.latestValues,j,k,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ua(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xe.update(()=>{Lg.hasAnimatedSinceResize=!0,this.currentAnimation=HX(0,gM,{...a,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:f}=a;if(!(!c||!u||!d)){if(this!==a&&this.layout&&d&&cj(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||wn();const m=Mi(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+m;const y=Mi(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+y}Cs(c,u),yu(c,f),Yd(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new nZ),this.sharedNodes.get(a).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var c;const{layoutId:a}=this.options;return a?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:a}=this.options;return a?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&bb("z",a,d,this.animationValues);for(let f=0;f<vb.length;f++)bb(`rotate${vb[f]}`,a,d,this.animationValues),bb(`skew${vb[f]}`,a,d,this.animationValues);a.render();for(const f in d)a.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return sZ;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Og(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Og(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Nl(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=iZ(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Af){if(f[v]===void 0)continue;const{correct:w,applyTo:T,isCSSVariable:x}=Af[v],C=c.transform==="none"?f[v]:w(f[v],d);if(T){const k=T.length;for(let M=0;M<k;M++)c[T[M]]=C}else x?this.options.visualElement.renderState.vars[v]=C:c[v]=C}return this.options.layoutId&&(c.pointerEvents=d===this?Og(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(yM),this.root.sharedNodes.clear()}}}function oZ(e){e.updateLayout()}function aZ(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=e.layout,{animationType:r}=e.options,a=t.source!==e.layout.source;r==="size"?Is(m=>{const y=a?t.measuredBox[m]:t.layoutBox[m],v=Mi(y);y.min=i[m].min,y.max=y.min+v}):cj(r,t.layoutBox,i)&&Is(m=>{const y=a?t.measuredBox[m]:t.layoutBox[m],v=Mi(i[m]);y.max=y.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+v)});const c=mu();Yd(c,i,t.layoutBox);const u=mu();a?Yd(u,e.applyTransform(s,!0),t.measuredBox):Yd(u,i,t.layoutBox);const d=!rj(c);let f=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:y,layout:v}=m;if(y&&v){const w=wn();Qd(w,t.layoutBox,y.layoutBox);const T=wn();Qd(T,i,v.layoutBox),oj(w,T)||(f=!0),m.options.layoutRoot&&(e.relativeTarget=T,e.relativeTargetOrigin=w,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function lZ(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cZ(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function uZ(e){e.clearSnapshot()}function yM(e){e.clearMeasurements()}function hZ(e){e.isLayoutDirty=!1}function dZ(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function _M(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function fZ(e){e.resolveTargetDelta()}function pZ(e){e.calcProjection()}function mZ(e){e.resetSkewAndRotation()}function gZ(e){e.removeLeadSnapshot()}function vM(e,t,n){e.translate=un(t.translate,0,n),e.scale=un(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bM(e,t,n,i){e.min=un(t.min,n.min,i),e.max=un(t.max,n.max,i)}function yZ(e,t,n,i){bM(e.x,t.x,n.x,i),bM(e.y,t.y,n.y,i)}function _Z(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const vZ={duration:.45,ease:[.4,0,.1,1]},wM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),EM=wM("applewebkit/")&&!wM("chrome/")?Math.round:Ns;function TM(e){e.min=EM(e.min),e.max=EM(e.max)}function bZ(e){TM(e.x),TM(e.y)}function cj(e,t,n){return e==="position"||e==="preserve-aspect"&&!EX(pM(t),pM(n),.2)}function wZ(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const EZ=lj({attachResizeListener:(e,t)=>Df(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wb={current:void 0},uj=lj({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!wb.current){const e=new EZ({});e.mount(window),e.setOptions({layoutScroll:!0}),wb.current=e}return wb.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),TZ={pan:{Feature:UX},drag:{Feature:jX,ProjectionNode:uj,MeasureLayout:nj}};function xM(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,r=i[s];r&&Xe.postRender(()=>r(t,fp(t)))}class xZ extends Ya{mount(){const{current:t}=this.node;t&&(this.unmount=kK(t,(n,i)=>(xM(this.node,i,"Start"),s=>xM(this.node,s,"End"))))}unmount(){}}class SZ extends Ya{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dp(Df(this.node.current,"focus",()=>this.onFocus()),Df(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function SM(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),r=i[s];r&&Xe.postRender(()=>r(t,fp(t)))}class AZ extends Ya{mount(){const{current:t}=this.node;t&&(this.unmount=VK(t,(n,i)=>(SM(this.node,i,"Start"),(s,{success:r})=>SM(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Yw=new WeakMap,Eb=new WeakMap,CZ=e=>{const t=Yw.get(e.target);t&&t(e)},RZ=e=>{e.forEach(CZ)};function IZ({root:e,...t}){const n=e||document;Eb.has(n)||Eb.set(n,{});const i=Eb.get(n),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(RZ,{root:e,...t})),i[s]}function DZ(e,t,n){const i=IZ(t);return Yw.set(e,n),i.observe(e),()=>{Yw.delete(e),i.unobserve(e)}}const MZ={some:0,all:1};class NZ extends Ya{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=t,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:MZ[s]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),y=d?f:m;y&&y(u)};return DZ(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(kZ(t,n))&&this.startObserver()}unmount(){}}function kZ({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const PZ={inView:{Feature:NZ},tap:{Feature:AZ},focus:{Feature:SZ},hover:{Feature:xZ}},OZ={layout:{ProjectionNode:uj,MeasureLayout:nj}},Qw={current:null},hj={current:!1};function LZ(){if(hj.current=!0,!!rx)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Qw.current=e.matches;e.addListener(t),t()}else Qw.current=!1}const VZ=[...LV,pi,Fa],jZ=e=>VZ.find(OV(e)),UZ=new WeakMap;function FZ(e,t,n){for(const i in t){const s=t[i],r=n[i];if(wi(s))e.addValue(i,s);else if(wi(r))e.addValue(i,xf(s,{owner:e}));else if(r!==s)if(e.hasValue(i)){const a=e.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(i);e.addValue(i,xf(a!==void 0?a:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const AM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class BZ{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Px,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Mr.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Xe.render(this.render,!1,!0))};const{latestValues:u,renderState:d,onUpdate:f}=a;this.onUpdate=f,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=M_(n),this.isVariantNode=ZL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in y){const w=y[v];u[v]!==void 0&&wi(w)&&w.set(u[v],!1)}}mount(t){this.current=t,UZ.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),hj.current||LZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ua(this.notifyUpdate),Ua(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=hc.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&Xe.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),r(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Uu){const n=Uu[t];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<AM.length;i++){const s=AM[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=t[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=FZ(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=xf(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(kV(i)||TV(i))?i=parseFloat(i):!jZ(i)&&Fa.test(n)&&(i=DV(t,n)),this.setBaseTarget(t,wi(i)?i.get():i)),wi(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=Rx(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);a&&(i=a[t])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!wi(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ux),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class dj extends BZ{constructor(){super(...arguments),this.KeyframeResolver=VV}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;wi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function zZ(e){return window.getComputedStyle(e)}class HZ extends dj{constructor(){super(...arguments),this.type="html",this.renderInstance=cV}readValueFromInstance(t,n){if(hc.has(n))return eQ(t,n);{const i=zZ(t),s=(bx(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return ZV(t,n)}build(t,n,i){Tx(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return Ix(t,n,i)}}class qZ extends dj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wn,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&lV(this.current,this.renderState)}}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(hc.has(n)){const i=IV(n);return i&&i.default||0}return n=uV.has(n)?n:vx(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return dV(t,n,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&Xe.postRender(this.updateDimensions)}build(t,n,i){Ax(t,n,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,i,s){hV(t,n,i,s)}mount(t){this.isSVGTag=Cx(t.tagName),super.mount(t)}}const $Z=(e,t)=>Sx(e)?new qZ(t):new HZ(t,{allowProjection:e!==R.Fragment}),GZ=RY({...pX,...PZ,...TZ,...OZ},$Z),kl=qK(GZ),Mf={Debeng:100,"Cadian (Linos Res.- Coop)":130,"Cadian (Kimhaf- Molitos)":150,Tuangan:170,Awa:250,"Pi-ket":300,"Topdac ES":400,Bangawan:480,Besil:500,Polis:600,Tolmod:800,Wagi:900,Shekdan:1e3,"Batu ILI PS":1500,Pual:350,Nalseb:600,Poblacion:600,Sowe:700,Maguey:1200,Pasdong:1700,Catingel:120,Pareg:140,"Kinaong (Baldinos Res)":150,Bileng:170,Cato:250,Balat:350,Segib:400,"Caliking Proper":300,Conet:350,Kesbong:350,Pokit:600,"KM 28":100,"Usap to Saddle":120,Wingian:140,"Siko Curve":150,"Atiws Res.":170,"Saw Mill":200,"KM.24":200,Galilea:220,"KM.22 (Bilis Junction)":250,Bilis:600,"KM.21 (Cagui-ing Elem.)":250,"Labey Junction to coruz junction":300,Acop:600,Tomay:700,"Camp Dangwa":800,"KM.5":1e3,Baguio:1500,"KM.31":100,"KM.32 (Food way-paasin)":130,Tolding:200,Menac:250,"KM.34":150,Japasan:160,"KM.35 (Amcay to Moltio)":170,"KM.36":200,"KM.37":220,"KM.38":250,"Bet-Ang":250,Apunan:300,"Aduyanan ES":300,"Sapuan Junction to Abiangan Brgy Hall":300,Gueweng:350,Lebten:400,Labban:400,Bokao:600,Bonglo:600,Sayangan:700,Abatan:3800,Antabeng:250,Patapat:300,Japa:320,Palutan:250,"Menios Res.":320,"Guzman, Rudy Res.":350,"Japa ES":350,Coop:350,"Talite Junction":500,Ketneg:800,"Tag-Ulo":1e3};function fj(e,t,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties={},i.geometry=e,i}function WZ(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!CM(e[0])||!CM(e[1]))throw new Error("coordinates must contain numbers");return fj({type:"Point",coordinates:e},t,n)}function KZ(e,t,n={}){for(const s of e){if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(s[s.length-1].length!==s[0].length)throw new Error("First and last Position are not equivalent.");for(let r=0;r<s[s.length-1].length;r++)if(s[s.length-1][r]!==s[0][r])throw new Error("First and last Position are not equivalent.")}return fj({type:"Polygon",coordinates:e},t,n)}function CM(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}const So=11102230246251565e-32,fi=134217729,YZ=(3+8*So)*So;function Tb(e,t,n,i,s){let r,a,c,u,d=t[0],f=i[0],m=0,y=0;f>d==f>-d?(r=d,d=t[++m]):(r=f,f=i[++y]);let v=0;if(m<e&&y<n)for(f>d==f>-d?(a=d+r,c=r-(a-d),d=t[++m]):(a=f+r,c=r-(a-f),f=i[++y]),r=a,c!==0&&(s[v++]=c);m<e&&y<n;)f>d==f>-d?(a=r+d,u=a-r,c=r-(a-u)+(d-u),d=t[++m]):(a=r+f,u=a-r,c=r-(a-u)+(f-u),f=i[++y]),r=a,c!==0&&(s[v++]=c);for(;m<e;)a=r+d,u=a-r,c=r-(a-u)+(d-u),d=t[++m],r=a,c!==0&&(s[v++]=c);for(;y<n;)a=r+f,u=a-r,c=r-(a-u)+(f-u),f=i[++y],r=a,c!==0&&(s[v++]=c);return(r!==0||v===0)&&(s[v++]=r),v}function QZ(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function pp(e){return new Float64Array(e)}const XZ=(3+16*So)*So,ZZ=(2+12*So)*So,JZ=(9+64*So)*So*So,iu=pp(4),RM=pp(8),IM=pp(12),DM=pp(16),Di=pp(4);function tJ(e,t,n,i,s,r,a){let c,u,d,f,m,y,v,w,T,x,C,k,M,z,j,$,O,D;const N=e-s,L=n-s,F=t-r,H=i-r;z=N*H,y=fi*N,v=y-(y-N),w=N-v,y=fi*H,T=y-(y-H),x=H-T,j=w*x-(z-v*T-w*T-v*x),$=F*L,y=fi*F,v=y-(y-F),w=F-v,y=fi*L,T=y-(y-L),x=L-T,O=w*x-($-v*T-w*T-v*x),C=j-O,m=j-C,iu[0]=j-(C+m)+(m-O),k=z+C,m=k-z,M=z-(k-m)+(C-m),C=M-$,m=M-C,iu[1]=M-(C+m)+(m-$),D=k+C,m=D-k,iu[2]=k-(D-m)+(C-m),iu[3]=D;let B=QZ(4,iu),_t=ZZ*a;if(B>=_t||-B>=_t||(m=e-N,c=e-(N+m)+(m-s),m=n-L,d=n-(L+m)+(m-s),m=t-F,u=t-(F+m)+(m-r),m=i-H,f=i-(H+m)+(m-r),c===0&&u===0&&d===0&&f===0)||(_t=JZ*a+YZ*Math.abs(B),B+=N*f+H*c-(F*d+L*u),B>=_t||-B>=_t))return B;z=c*H,y=fi*c,v=y-(y-c),w=c-v,y=fi*H,T=y-(y-H),x=H-T,j=w*x-(z-v*T-w*T-v*x),$=u*L,y=fi*u,v=y-(y-u),w=u-v,y=fi*L,T=y-(y-L),x=L-T,O=w*x-($-v*T-w*T-v*x),C=j-O,m=j-C,Di[0]=j-(C+m)+(m-O),k=z+C,m=k-z,M=z-(k-m)+(C-m),C=M-$,m=M-C,Di[1]=M-(C+m)+(m-$),D=k+C,m=D-k,Di[2]=k-(D-m)+(C-m),Di[3]=D;const ft=Tb(4,iu,4,Di,RM);z=N*f,y=fi*N,v=y-(y-N),w=N-v,y=fi*f,T=y-(y-f),x=f-T,j=w*x-(z-v*T-w*T-v*x),$=F*d,y=fi*F,v=y-(y-F),w=F-v,y=fi*d,T=y-(y-d),x=d-T,O=w*x-($-v*T-w*T-v*x),C=j-O,m=j-C,Di[0]=j-(C+m)+(m-O),k=z+C,m=k-z,M=z-(k-m)+(C-m),C=M-$,m=M-C,Di[1]=M-(C+m)+(m-$),D=k+C,m=D-k,Di[2]=k-(D-m)+(C-m),Di[3]=D;const K=Tb(ft,RM,4,Di,IM);z=c*f,y=fi*c,v=y-(y-c),w=c-v,y=fi*f,T=y-(y-f),x=f-T,j=w*x-(z-v*T-w*T-v*x),$=u*d,y=fi*u,v=y-(y-u),w=u-v,y=fi*d,T=y-(y-d),x=d-T,O=w*x-($-v*T-w*T-v*x),C=j-O,m=j-C,Di[0]=j-(C+m)+(m-O),k=z+C,m=k-z,M=z-(k-m)+(C-m),C=M-$,m=M-C,Di[1]=M-(C+m)+(m-$),D=k+C,m=D-k,Di[2]=k-(D-m)+(C-m),Di[3]=D;const tt=Tb(K,IM,4,Di,DM);return DM[tt-1]}function eJ(e,t,n,i,s,r){const a=(t-r)*(n-s),c=(e-s)*(i-r),u=a-c,d=Math.abs(a+c);return Math.abs(u)>=XZ*d?u:-tJ(e,t,n,i,s,r,d)}function nJ(e,t){var n,i,s=0,r,a,c,u,d,f,m,y=e[0],v=e[1],w=t.length;for(n=0;n<w;n++){i=0;var T=t[n],x=T.length-1;if(f=T[0],f[0]!==T[x][0]&&f[1]!==T[x][1])throw new Error("First and last coordinates in a ring must be the same");for(a=f[0]-y,c=f[1]-v,i;i<x;i++){if(m=T[i+1],u=m[0]-y,d=m[1]-v,c===0&&d===0){if(u<=0&&a>=0||a<=0&&u>=0)return 0}else if(d>=0&&c<=0||d<=0&&c>=0){if(r=eJ(a,u,c,d,0,0),r===0)return 0;(r>0&&d>0&&c<=0||r<0&&d<=0&&c>0)&&s++}f=m,c=d,a=u}}return s%2!==0}function iJ(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function sJ(e){return e.type==="Feature"?e.geometry:e}function rJ(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const i=iJ(e),s=sJ(t),r=s.type,a=t.bbox;let c=s.coordinates;if(a&&oJ(i,a)===!1)return!1;r==="Polygon"&&(c=[c]);let u=!1;for(var d=0;d<c.length;++d){const f=nJ(i,c[d]);if(f===0)return!n.ignoreBoundary;f&&(u=!0)}return u}function oJ(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}var aJ=rJ;const lJ=KZ([[[120.8042,16.6955],[120.8042,16.6965],[120.8052,16.6965],[120.8052,16.6955],[120.8042,16.6955]]]);function cJ(e){return aJ(WZ(e),lJ)}function uJ(){const[e,t]=R.useState(null),[n,i]=R.useState(!1),[s,r]=R.useState(null);return R.useEffect(()=>{if(!navigator.geolocation){r("Geolocation not supported.");return}const a=navigator.geolocation.watchPosition(c=>{const{latitude:u,longitude:d}=c.coords;t({latitude:u,longitude:d}),i(cJ([d,u])),r(null)},()=>{r("Location access denied.")},{enableHighAccuracy:!0,maximumAge:1e4,timeout:5e3});return()=>navigator.geolocation.clearWatch(a)},[]),{coords:e,insideParadahan:n,error:s}}const hJ=5,pj=R.createContext(void 0),dJ=()=>{const e=R.useContext(pj);if(!e)throw new Error("useRide must be used within a RideProvider");return e},fJ=({children:e})=>{const[t,n]=R.useState(null),[i,s]=R.useState(!1),[r,a]=R.useState(!1),[c,u]=R.useState(()=>typeof window<"u"?localStorage.getItem("hasJoinedQueue")==="true":!1),[d,f]=R.useState([]),[m,y]=R.useState(null),[v,w]=R.useState(null),[T,x]=R.useState(!1),[C,k]=R.useState(null),[M,z]=R.useState(null),[j,$]=R.useState("--:--"),[O,D]=R.useState("Offline"),[N,L]=R.useState(null),[F,H]=R.useState(!1),[B,_t]=R.useState(null),[ft,K]=R.useState(0),[tt,dt]=R.useState(null),[yt,U]=R.useState(""),{coords:J,insideParadahan:ot,error:st}=uJ();R.useEffect(()=>{const vt=localStorage.getItem("driver");vt&&n(JSON.parse(vt))},[]),R.useEffect(()=>{localStorage.setItem("hasJoinedQueue",c?"true":"false")},[c]),R.useEffect(()=>{const vt=localStorage.getItem("unsyncedRide");if(vt&&ot){const Vt=JSON.parse(vt);Ng(En(ze,"ride_logs"),Vt).then(()=>localStorage.removeItem("unsyncedRide")).catch(Mt=>console.error("Sync failed:",Mt))}},[ot]),R.useEffect(()=>{ot&&!r?s(!0):!ot&&!T&&s(!1)},[ot,r,T]),R.useEffect(()=>{D(i?T?"In Ride":"Waiting":"Offline")},[i,T]),R.useEffect(()=>{(async()=>{if(t&&i&&ot&&!c&&!r){const Vt=Qt(ze,"queues",t.id),Mt=Qt(ze,"drivers",t.id);try{const zt=Qe.now();if(await Je(Vt,{driverId:t.id,plateNumber:t.plate,joinedAt:zt}),await Je(Mt,{status:"waiting"},{merge:!0}),w(zt),u(!0),tt){const Ct=Math.round((zt.toMillis()-tt.startedAt.getTime())/6e4),At={...tt,travelTimeMinutes:Ct};try{await Ng(En(ze,"ride_logs"),At),dt(null)}catch(me){console.error("Failed to log ride:",me),localStorage.setItem("unsyncedRide",JSON.stringify(At)),dt(null)}}}catch(zt){console.error("Failed to join queue:",zt),U(" Failed to join queue. Retrying..."),setTimeout(()=>U(""),3e3)}}})()},[ot,J,t,c,r,i,tt]),R.useEffect(()=>{(async()=>{if(t&&c&&!ot&&J){const Vt=Qt(ze,"drivers",t.id);try{if(await _o(Qt(ze,"queues",t.id)),await Je(Vt,{status:"in ride",leftAt:Qe.now()},{merge:!0}),u(!1),y(null),f([]),w(null),U(" You left the paradahan. Ride starting..."),setTimeout(()=>U(""),4e3),H(!0),z({lat:J.latitude,lng:J.longitude}),B){const zt=Math.round((new Date().getTime()-B.getTime())/6e4);K(zt>0?zt:0)}}catch(Mt){console.error("Failed to remove from queue:",Mt),U(" Failed to update queue on exit. Please check connection."),setTimeout(()=>U(""),4e3)}}})()},[ot,t,c,J,B]),R.useEffect(()=>{(async()=>{if(T&&ot&&J&&C&&F){const Vt=new Date,Mt={lat:J.latitude,lng:J.longitude},zt=N?Mf[N]:0,Ct=ft,At={driverId:t==null?void 0:t.id,plateNumber:t==null?void 0:t.plate,startedAt:C,endedAt:Vt,travelTimeMinutes:Math.round((Vt.getTime()-C.getTime())/6e4),pickupLocation:M,dropoffLocation:Mt,dropoffName:N,waitTimeMinutes:Ct,estimatedEarnings:zt,timestamp:Qe.now(),queuePosition:m??null};dt(At),_t(Vt),x(!1),k(null),z(null),L(null),H(!1),w(null),K(0),U(` Ride completed at ${N}  ${zt}`),setTimeout(()=>U(""),5e3)}})()},[ot,J,C,N,F,m,t,ft,M]),R.useEffect(()=>{const vt=mo(En(ze,"queues"),Cd("joinedAt")),Vt=Id(vt,Mt=>{const zt=Mt.docs.map(At=>At.data());f(zt);const Ct=zt.findIndex(At=>At.driverId===(t==null?void 0:t.id));if(T||!c)y(null),w(null);else if(Ct>=0){y(Ct+1);const At=zt[Ct];At.joinedAt?w(At.joinedAt):w(null)}else y(null),w(null)});return()=>Vt()},[t,T,c]),R.useEffect(()=>{let vt=null,Vt=m?m*hJ*60:0;const Mt=()=>{if(Vt>0){const zt=Math.floor(Vt/60),Ct=Vt%60;$(`${String(zt).padStart(2,"0")}:${String(Ct).padStart(2,"0")}`),Vt-=1}else $("00:00"),vt&&clearInterval(vt)};return m&&!T?(Mt(),vt=setInterval(Mt,1e3)):$("--:--"),()=>{vt&&clearInterval(vt)}},[m,T]);const ue={driver:t,isOnline:i,manualOffline:r,hasJoined:c,queue:d,position:m,driverJoinedAt:v,rideStarted:T,rideStartTime:C,pickupLocation:M,countdown:j,rideStatus:O,selectedDestination:N,hasExitedParadahan:F,lastReturnTime:B,currentWaitTimeMinutes:ft,pendingRideLog:tt,coords:J,insideParadahan:ot,gpsError:st,toastMsg:yt,setSelectedDestination:L,handleGoOffline:async()=>{if(!t)return;const vt=Qt(ze,"drivers",t.id);try{await _o(Qt(ze,"queues",t.id)),await Je(vt,{status:"offline"},{merge:!0}),u(!1),y(null),f([]),w(null),a(!0),s(!1),U(" You are now offline."),setTimeout(()=>U(""),3e3)}catch(Vt){console.error("Failed to go offline:",Vt),U(" Failed to go offline. Please try again."),setTimeout(()=>U(""),3e3)}},handleGoOnlineAgain:async()=>{if(!(!t||!J))if(a(!1),s(!0),!ot)U(" To join the queue, you must be inside the paradahan."),setTimeout(()=>U(""),4e3);else{const vt=Qt(ze,"queues",t.id);try{const Vt=Qe.now();if(await Je(vt,{driverId:t.id,plateNumber:t.plate,joinedAt:Vt}),w(Vt),u(!0),tt){const Mt=Math.round((Vt.toMillis()-tt.startedAt.getTime())/6e4),zt={...tt,travelTimeMinutes:Mt};try{await Ng(En(ze,"ride_logs"),zt),dt(null)}catch(Ct){console.error("Failed to log ride:",Ct),localStorage.setItem("unsyncedRide",JSON.stringify(zt)),dt(null)}}}catch(Vt){console.error("Failed to join queue:",Vt),U(" Failed to join queue. Please try again."),setTimeout(()=>U(""),3e3)}}},handleStartRide:async()=>{if(!N){U(" Please select a destination first."),setTimeout(()=>U(""),3e3);return}if(!J){U(" Location not available. Please try again."),setTimeout(()=>U(""),3e3);return}try{t&&await _o(Qt(ze,"queues",t.id));const vt=new Date;if(u(!1),x(!0),k(vt),v){const Vt=Math.round((vt.getTime()-v.toMillis())/6e4);K(Vt>0?Vt:0)}else K(0);if(t){const Vt=Qt(ze,"drivers",t.id);await Je(Vt,{selectedDestination:N},{merge:!0})}U(" Ride started! Please exit paradahan to begin trip."),setTimeout(()=>U(""),3e3)}catch(vt){console.error("Failed to start ride:",vt),U(" Failed to start ride. Please try again."),setTimeout(()=>U(""),3e3)}},setToastMsg:U};return S.jsx(pj.Provider,{value:ue,children:e})},pJ=()=>{rc();const{driver:e,isOnline:t,hasJoined:n,queue:i,position:s,rideStarted:r,countdown:a,rideStatus:c,selectedDestination:u,setSelectedDestination:d,handleGoOffline:f,handleGoOnlineAgain:m,handleStartRide:y,setToastMsg:v,coords:w,insideParadahan:T,gpsError:x,toastMsg:C}=dJ();return S.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 text-gray-900",children:S.jsx("div",{className:"max-w-7xl mx-auto",children:S.jsxs("div",{className:"flex flex-col items-center justify-start min-h-screen relative",children:[S.jsxs("div",{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-lg animate-fade-in",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("h2",{className:"text-xl font-bold animate-slide-down",children:["Welcome, ",(e==null?void 0:e.name)??"Driver"]}),t?S.jsx("button",{onClick:f,className:"px-4 py-2 text-sm rounded-full font-semibold bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg transition-all duration-300 transform hover:scale-105",children:"Go Offline"}):S.jsx("button",{onClick:m,className:"px-4 py-2 text-sm rounded-full font-semibold bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg transition-all duration-300 transform hover:scale-105",children:"Go Online"})]}),S.jsx("hr",{className:"border-gray-300 mb-6"}),S.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6",children:[S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg animate-slide-up",children:[S.jsx("p",{className:"text-sm font-bold mb-2",children:" Ride Status:"}),S.jsx("p",{className:`text-lg font-semibold ${c==="In Ride"?"text-blue-600":c==="Waiting"?"text-green-600":"text-red-600"}`,children:c})]}),S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg animate-slide-up",style:{animationDelay:"0.1s"},children:[S.jsxs("p",{className:"text-sm font-bold mb-2",children:[" ",S.jsx("span",{className:"font-semibold",children:"Location Status:"})]}),S.jsx("p",{className:`text-lg font-semibold ${T?"text-green-600":"text-red-600"}`,children:x?` ${x}`:T?"Inside Paradahan":"Outside Paradahan"})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-6 animate-fade-in-left",children:[S.jsx("p",{className:"text-lg font-semibold mb-3",children:"Vehicle Information"}),S.jsxs("div",{className:"space-y-2",children:[S.jsxs("p",{className:"flex justify-between",children:[S.jsx("span",{className:"font-medium",children:"Plate Number:"}),S.jsx("span",{className:"text-gray-700",children:e==null?void 0:e.plate})]}),S.jsxs("p",{className:"flex justify-between",children:[S.jsx("span",{className:"font-medium",children:"Vehicle:"}),S.jsx("span",{className:"text-gray-700",children:e==null?void 0:e.vehicle})]})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-6 animate-fade-in-right",children:[S.jsx("p",{className:"text-lg font-semibold mb-3",children:" Destination:"}),S.jsxs("select",{className:"w-full p-3 rounded-lg bg-gray-50 text-gray-900 border border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 transition-all",value:u||"",onChange:k=>d(k.target.value),children:[S.jsx("option",{value:"",children:"Select Destination"}),Object.keys(Mf).map(k=>S.jsx("option",{value:k,children:k},k))]})]}),n&&!r&&S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-6 animate-fade-in-up",children:[S.jsx("p",{className:"text-lg font-semibold mb-4",children:" Queue Status"}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("p",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"font-medium",children:"Your position:"}),S.jsx("span",{className:"text-xl font-bold text-yellow-600",children:s??"N/A"})]}),S.jsxs("p",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"font-medium",children:" Estimated Wait:"}),S.jsx("span",{className:"text-xl font-bold text-blue-600",children:a})]}),s===1&&S.jsx("div",{className:"text-green-600 font-bold text-center p-3 bg-green-50 rounded-lg animate-pulse",children:" Its your turn! Get ready for a ride."}),S.jsxs("div",{className:"mt-4",children:[S.jsx("p",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Current Queue:"}),S.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:S.jsx(Nw,{children:i.map((k,M)=>S.jsxs(kl.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`text-sm px-3 py-2 rounded-lg shadow-sm ${k.driverId===(e==null?void 0:e.id)?"bg-yellow-100 text-gray-900 border border-yellow-300":"bg-gray-100 text-gray-900"}`,children:[M+1,". ",k.plateNumber]},k.driverId))})})]})]})]}),s===1&&!r&&S.jsx("button",{onClick:y,disabled:!u,className:"w-full py-3 px-6 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl font-semibold shadow-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:"Start Ride"})]}),C&&S.jsxs("div",{className:"absolute top-4 right-4 bg-blue-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-2 animate-fade-in text-sm z-50",children:[C,S.jsx("button",{onClick:()=>v(""),className:"hover:bg-blue-700 rounded-full p-1 transition-colors",children:S.jsx(mK,{size:16})})]})]})})})};let mJ={data:""},gJ=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||mJ,yJ=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,_J=/\/\*[^]*?\*\/|  +/g,MM=/\n+/g,va=(e,t)=>{let n="",i="",s="";for(let r in e){let a=e[r];r[0]=="@"?r[1]=="i"?n=r+" "+a+";":i+=r[1]=="f"?va(a,r):r+"{"+va(a,r[1]=="k"?"":t)+"}":typeof a=="object"?i+=va(a,t?t.replace(/([^,])+/g,c=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):r):a!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=va.p?va.p(r,a):r+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+i},lo={},mj=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+mj(e[n]);return t}return e},vJ=(e,t,n,i,s)=>{let r=mj(e),a=lo[r]||(lo[r]=(u=>{let d=0,f=11;for(;d<u.length;)f=101*f+u.charCodeAt(d++)>>>0;return"go"+f})(r));if(!lo[a]){let u=r!==e?e:(d=>{let f,m,y=[{}];for(;f=yJ.exec(d.replace(_J,""));)f[4]?y.shift():f[3]?(m=f[3].replace(MM," ").trim(),y.unshift(y[0][m]=y[0][m]||{})):y[0][f[1]]=f[2].replace(MM," ").trim();return y[0]})(e);lo[a]=va(s?{["@keyframes "+a]:u}:u,n?"":"."+a)}let c=n&&lo.g?lo.g:null;return n&&(lo.g=lo[a]),((u,d,f,m)=>{m?d.data=d.data.replace(m,u):d.data.indexOf(u)===-1&&(d.data=f?u+d.data:d.data+u)})(lo[a],t,i,c),a},bJ=(e,t,n)=>e.reduce((i,s,r)=>{let a=t[r];if(a&&a.call){let c=a(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;a=u?"."+u:c&&typeof c=="object"?c.props?"":va(c,""):c===!1?"":c}return i+s+(a??"")},"");function k_(e){let t=this||{},n=e.call?e(t.p):e;return vJ(n.unshift?n.raw?bJ(n,[].slice.call(arguments,1),t.p):n.reduce((i,s)=>Object.assign(i,s&&s.call?s(t.p):s),{}):n,gJ(t.target),t.g,t.o,t.k)}let gj,Xw,Zw;k_.bind({g:1});let Po=k_.bind({k:1});function wJ(e,t,n,i){va.p=t,gj=e,Xw=n,Zw=i}function Qa(e,t){let n=this||{};return function(){let i=arguments;function s(r,a){let c=Object.assign({},r),u=c.className||s.className;n.p=Object.assign({theme:Xw&&Xw()},c),n.o=/ *go\d+/.test(u),c.className=k_.apply(n,i)+(u?" "+u:"");let d=e;return e[0]&&(d=c.as||e,delete c.as),Zw&&d[0]&&Zw(c),gj(d,c)}return s}}var EJ=e=>typeof e=="function",Py=(e,t)=>EJ(e)?e(t):e,TJ=(()=>{let e=0;return()=>(++e).toString()})(),yj=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),xJ=20,_j=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,xJ)};case 1:return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case 2:let{toast:n}=t;return _j(e,{type:e.toasts.find(r=>r.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(r=>r.id===i||i===void 0?{...r,dismissed:!0,visible:!1}:r)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+s}))}}},Vg=[],zl={toasts:[],pausedAt:void 0},dc=e=>{zl=_j(zl,e),Vg.forEach(t=>{t(zl)})},SJ={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},AJ=(e={})=>{let[t,n]=R.useState(zl),i=R.useRef(zl);R.useEffect(()=>(i.current!==zl&&n(zl),Vg.push(n),()=>{let r=Vg.indexOf(n);r>-1&&Vg.splice(r,1)}),[]);let s=t.toasts.map(r=>{var a,c,u;return{...e,...e[r.type],...r,removeDelay:r.removeDelay||((a=e[r.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:r.duration||((c=e[r.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||SJ[r.type],style:{...e.style,...(u=e[r.type])==null?void 0:u.style,...r.style}}});return{...t,toasts:s}},CJ=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||TJ()}),mp=e=>(t,n)=>{let i=CJ(t,e,n);return dc({type:2,toast:i}),i.id},Xn=(e,t)=>mp("blank")(e,t);Xn.error=mp("error");Xn.success=mp("success");Xn.loading=mp("loading");Xn.custom=mp("custom");Xn.dismiss=e=>{dc({type:3,toastId:e})};Xn.remove=e=>dc({type:4,toastId:e});Xn.promise=(e,t,n)=>{let i=Xn.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let r=t.success?Py(t.success,s):void 0;return r?Xn.success(r,{id:i,...n,...n==null?void 0:n.success}):Xn.dismiss(i),s}).catch(s=>{let r=t.error?Py(t.error,s):void 0;r?Xn.error(r,{id:i,...n,...n==null?void 0:n.error}):Xn.dismiss(i)}),e};var RJ=(e,t)=>{dc({type:1,toast:{id:e,height:t}})},IJ=()=>{dc({type:5,time:Date.now()})},Xd=new Map,DJ=1e3,MJ=(e,t=DJ)=>{if(Xd.has(e))return;let n=setTimeout(()=>{Xd.delete(e),dc({type:4,toastId:e})},t);Xd.set(e,n)},NJ=e=>{let{toasts:t,pausedAt:n}=AJ(e);R.useEffect(()=>{if(n)return;let r=Date.now(),a=t.map(c=>{if(c.duration===1/0)return;let u=(c.duration||0)+c.pauseDuration-(r-c.createdAt);if(u<0){c.visible&&Xn.dismiss(c.id);return}return setTimeout(()=>Xn.dismiss(c.id),u)});return()=>{a.forEach(c=>c&&clearTimeout(c))}},[t,n]);let i=R.useCallback(()=>{n&&dc({type:6,time:Date.now()})},[n]),s=R.useCallback((r,a)=>{let{reverseOrder:c=!1,gutter:u=8,defaultPosition:d}=a||{},f=t.filter(v=>(v.position||d)===(r.position||d)&&v.height),m=f.findIndex(v=>v.id===r.id),y=f.filter((v,w)=>w<m&&v.visible).length;return f.filter(v=>v.visible).slice(...c?[y+1]:[0,y]).reduce((v,w)=>v+(w.height||0)+u,0)},[t]);return R.useEffect(()=>{t.forEach(r=>{if(r.dismissed)MJ(r.id,r.removeDelay);else{let a=Xd.get(r.id);a&&(clearTimeout(a),Xd.delete(r.id))}})},[t]),{toasts:t,handlers:{updateHeight:RJ,startPause:IJ,endPause:i,calculateOffset:s}}},kJ=Po`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PJ=Po`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OJ=Po`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,LJ=Qa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kJ} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PJ} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${OJ} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,VJ=Po`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,jJ=Qa("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${VJ} 1s linear infinite;
`,UJ=Po`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,FJ=Po`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,BJ=Qa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${UJ} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${FJ} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,zJ=Qa("div")`
  position: absolute;
`,HJ=Qa("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,qJ=Po`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$J=Qa("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${qJ} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,GJ=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?R.createElement($J,null,t):t:n==="blank"?null:R.createElement(HJ,null,R.createElement(jJ,{...i}),n!=="loading"&&R.createElement(zJ,null,n==="error"?R.createElement(LJ,{...i}):R.createElement(BJ,{...i})))},WJ=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,KJ=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,YJ="0%{opacity:0;} 100%{opacity:1;}",QJ="0%{opacity:1;} 100%{opacity:0;}",XJ=Qa("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ZJ=Qa("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,JJ=(e,t)=>{let n=e.includes("top")?1:-1,[i,s]=yj()?[YJ,QJ]:[WJ(n),KJ(n)];return{animation:t?`${Po(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Po(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ttt=R.memo(({toast:e,position:t,style:n,children:i})=>{let s=e.height?JJ(e.position||t||"top-center",e.visible):{opacity:0},r=R.createElement(GJ,{toast:e}),a=R.createElement(ZJ,{...e.ariaProps},Py(e.message,e));return R.createElement(XJ,{className:e.className,style:{...s,...n,...e.style}},typeof i=="function"?i({icon:r,message:a}):R.createElement(R.Fragment,null,r,a))});wJ(R.createElement);var ett=({id:e,className:t,style:n,onHeightUpdate:i,children:s})=>{let r=R.useCallback(a=>{if(a){let c=()=>{let u=a.getBoundingClientRect().height;i(e,u)};c(),new MutationObserver(c).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return R.createElement("div",{ref:r,className:t,style:n},s)},ntt=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:yj()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...s}},itt=k_`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,eg=16,jx=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:s,containerStyle:r,containerClassName:a})=>{let{toasts:c,handlers:u}=NJ(n);return R.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:eg,left:eg,right:eg,bottom:eg,pointerEvents:"none",...r},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let f=d.position||t,m=u.calculateOffset(d,{reverseOrder:e,gutter:i,defaultPosition:t}),y=ntt(f,m);return R.createElement(ett,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?itt:"",style:y},d.type==="custom"?Py(d.message,d):s?s(d):R.createElement(ttt,{toast:d,position:f}))}))},$t=Xn;const NM=["agduwaadmin@gmail.com"],stt=()=>{const[e,t]=R.useState(""),[n,i]=R.useState(""),[s,r]=R.useState(""),[a,c]=R.useState(""),[u,d]=R.useState(""),[f,m]=R.useState(""),[y,v]=R.useState(""),[w,T]=R.useState(""),[x,C]=R.useState(!1),[k,M]=R.useState(!1),[z,j]=R.useState(!1),$=rc(),O=L=>L.length<6?(r("Password must contain at least 6 characters"),!1):(r(""),!0),D=L=>/^\d{11}$/.test(L)?(T(""),!0):(T("Phone number must contain 11 digits"),!1),N=async()=>{if(!e||!n||x&&(!a||!u||!f||!y)){$t.error("Please fill all fields.");return}if(O(n)&&!(x&&!D(y))){M(!0);try{let L;if(x){L=await ck(ls,e,n);const F=L.user.uid,H=NM.some(_t=>_t.toLowerCase()===e.toLowerCase()),B={id:F,name:a,plate:u,vehicle:f,email:e,phone:y,status:"offline",age:"",contact:y,image:null,paymentMethod:"GCash",paymentNumber:"",createdAt:as(),verified:H};await Je(Qt(ze,"drivers",F),B),console.log(" Driver document created:",{uid:F,name:a,email:e,verified:B.verified,createdAt:B.createdAt}),H?(localStorage.setItem("driver",JSON.stringify(B)),$t.success("Registered successfully as Admin!"),setTimeout(()=>$("/admin"),1e3)):($t.success("Your account has been created! Please wait for admin approval."),$t.success("You can only log in when the admin approves your account."),t(""),i(""),c(""),d(""),m(""),v(""),C(!1))}else{L=await uk(ls,e,n);const F=L.user.uid;if(NM.some(tt=>tt.toLowerCase()===e.toLowerCase())){const tt={id:F,name:"Admin",plate:"",vehicle:"",email:e,phone:"",status:"offline",age:"",contact:y||"",image:null,paymentMethod:"GCash",paymentNumber:"",createdAt:as(),verified:!0};localStorage.setItem("driver",JSON.stringify(tt)),$t.success("Welcome, Admin!"),setTimeout(()=>$("/admin"),1e3),M(!1);return}const B=Qt(ze,"drivers",F),_t=await np(B);if(!_t.exists()){$t.error("No profile found for this account."),await ey(ls),M(!1);return}const K={..._t.data(),id:F};if(!K.verified){$t.error("Your account is not verified by admin yet. Please wait for approval."),await ey(ls),M(!1);return}localStorage.setItem("driver",JSON.stringify(K)),$t.success("Welcome back!"),setTimeout(()=>$("/home"),1e3)}}catch(L){switch(console.error(L.code),L.code){case"auth/user-not-found":$t.error("Account not found.");break;case"auth/wrong-password":$t.error("Incorrect password.");break;case"auth/email-already-in-use":$t.error("Email already in use.");break;case"auth/invalid-email":$t.error("Invalid email.");break;default:$t.error("Authentication failed.")}}finally{M(!1)}}};return S.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-gray-900 p-4",children:[S.jsx(jx,{position:"top-center"}),S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md border border-gray-200",children:[S.jsx("h1",{className:"text-2xl font-bold mb-2 text-center text-gray-900",children:x?"Sign Up":"Login"}),S.jsx("input",{type:"email",placeholder:"Email",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:e,onChange:L=>t(L.target.value),autoComplete:"email"}),S.jsxs("div",{className:"relative mb-3",children:[S.jsx("input",{type:z?"text":"password",placeholder:"Password",className:"w-full p-2 bg-gray-200 rounded border border-gray-300 pr-10 text-gray-900",value:n,onChange:L=>{i(L.target.value),O(L.target.value)},autoComplete:x?"new-password":"current-password"}),S.jsx("button",{onClick:()=>j(!z),className:"absolute right-2 top-2 text-sm text-gray-600 hover:text-gray-900",type:"button","aria-label":z?"Hide password":"Show password",children:z?"Hide":"Show"})]}),s&&S.jsx("p",{className:"text-red-500 text-sm mb-3",children:s}),x&&S.jsxs(S.Fragment,{children:[S.jsx("input",{type:"text",placeholder:"Full Name",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:a,onChange:L=>c(L.target.value),autoComplete:"name"}),S.jsx("input",{type:"text",placeholder:"Plate Number",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:u,onChange:L=>d(L.target.value)}),S.jsx("input",{type:"text",placeholder:"Vehicle",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:f,onChange:L=>m(L.target.value)}),S.jsxs("div",{className:"mb-3",children:[S.jsx("input",{type:"text",placeholder:"Phone Number (e.g., 09123456789)",className:"flex-1 p-2 bg-gray-200 rounded border border-gray-300 text-gray-900",value:y,onChange:L=>{v(L.target.value),D(L.target.value)},autoComplete:"tel"}),w&&S.jsx("p",{className:"text-red-500 text-sm mt-1",children:w})]})]}),S.jsx("button",{onClick:N,disabled:k,className:`w-full py-2 px-4 mt-2 rounded font-semibold ${k?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} text-white`,type:"button",children:k?"Processing...":x?"Create Account":"Login"}),S.jsxs("p",{className:"text-sm text-center text-gray-600 mt-4",children:[x?"Already have an account?":"Don't have an account?"," ",S.jsx("button",{onClick:()=>C(!x),className:"text-blue-600 hover:underline",type:"button",children:x?"Login here":"Register"})]})]})]})},rtt=({log:e})=>S.jsxs("div",{className:"bg-white p-4 rounded-lg mb-4 shadow-md",children:[S.jsx("p",{className:"text-lg font-semibold mb-1",children:e.dropoffName}),S.jsxs("p",{className:"text-gray-400 text-sm mb-2",children:["Ended at: ",e.endedAt.toLocaleString()]}),S.jsxs("p",{className:"mb-1",children:["Distance: ",e.travelTimeMinutes>0?(e.travelTimeMinutes*(25/60)).toFixed(2):0," km  Duration: ",e.travelTimeMinutes," mins"]}),S.jsxs("p",{className:"font-semibold mt-2",children:["Earnings: ",e.estimatedEarnings]})]}),ott=({isOpen:e,onClose:t,onApply:n,onClear:i,startDate:s,setStartDate:r,endDate:a,setEndDate:c,dropoffLocation:u,setDropoffLocation:d,minFare:f,setMinFare:m})=>e?S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:S.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-xl w-full max-w-md shadow-lg border border-gray-300",children:[S.jsx("h2",{className:"text-xl font-bold mb-4",children:"Filter Rides"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{const y=new Date,v=new Date(y.getFullYear(),y.getMonth(),y.getDate());r(v),c(y)},children:"Today"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{const y=new Date,v=new Date(y);v.setDate(y.getDate()-7),r(v),c(y)},children:"Last 7 Days"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{const y=new Date,v=new Date(y.getFullYear(),y.getMonth(),1);r(v),c(y)},children:"This Month"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{r(null),c(null)},children:"All Time"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Start Date"}),S.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:s?s.toISOString().split("T")[0]:"",onChange:y=>r(y.target.value?new Date(y.target.value):null)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"End Date"}),S.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:a?a.toISOString().split("T")[0]:"",onChange:y=>c(y.target.value?new Date(y.target.value):null)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Dropoff Location"}),S.jsx("input",{type:"text",placeholder:"e.g., La Trinidad",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:u,onChange:y=>d(y.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Minimum Fare ()"}),S.jsx("input",{type:"number",placeholder:"e.g., 50",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:f??"",onChange:y=>m(y.target.value?parseFloat(y.target.value):null)})]})]}),S.jsxs("div",{className:"flex justify-between mt-6",children:[S.jsx("button",{onClick:i,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Clear"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:t,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Cancel"}),S.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Apply"})]})]})]})}):null;function att({children:e,className:t,...n}){return S.jsx("button",{className:`bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition ${t}`,...n,children:e})}const vj=R.createContext(null),ltt=({children:e})=>{const[t,n]=R.useState(null),[i,s]=R.useState(!0);R.useEffect(()=>{const u=HE(ls,d=>{n(d),s(!1)});return()=>u()},[]);const r=async(u,d)=>{await uk(ls,u,d)},a=async(u,d,f)=>{const y=(await ck(ls,u,d)).user.uid,v=["agduwaadmin@gmail.com"].some(T=>T.toLowerCase()===u.toLowerCase()),w=Qt(ze,"drivers",y);await Je(w,{id:y,name:(f==null?void 0:f.name)||u.split("@")[0]||"New Driver",plate:(f==null?void 0:f.plate)||"",vehicle:(f==null?void 0:f.vehicle)||"",email:u,phone:(f==null?void 0:f.phone)||"",status:"offline",age:"",contact:(f==null?void 0:f.phone)||"",image:null,paymentMethod:"GCash",paymentNumber:"",createdAt:as(),verified:v})},c=async()=>{const u=ls.currentUser;if(u){const d=Qt(ze,"queues",u.uid);try{await _o(d)}catch{}const f=Qt(ze,"drivers",u.uid);await Je(f,{status:"offline"},{merge:!0})}await ey(ls),n(null)};return S.jsx(vj.Provider,{value:{user:t,loading:i,login:r,signUp:a,logout:c},children:e})},gp=()=>{const e=R.useContext(vj);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};function ctt(){const[e,t]=R.useState([]),[n,i]=R.useState([]),[s,r]=R.useState(!1),[a,c]=R.useState(null),[u,d]=R.useState(null),[f,m]=R.useState(""),[y,v]=R.useState(""),[w,T]=R.useState(null),{user:x}=gp(),C=async()=>{try{if(!x)return;const z=En(ze,"ride_logs"),j=mo(z,Ll("driverId","==",x.uid)),$=await vf(j);console.log("Fetched snapshot:",$);const O=$.docs.map(D=>{const N=D.data();return{id:D.id,driverId:N.driverId,dropoffLocation:N.dropoffLocation,dropoffName:N.dropoffName,endedAt:N.endedAt.toDate(),estimatedEarnings:N.estimatedEarnings,pickupLocation:N.pickupLocation,plateNumber:N.plateNumber,startedAt:N.startedAt.toDate(),travelTimeMinutes:N.travelTimeMinutes,waitTimeMinutes:N.waitTimeMinutes}});console.log("Parsed ride logs:",O),O.sort((D,N)=>N.endedAt.getTime()-D.endedAt.getTime()),t(O),i(O)}catch(z){console.error("Failed to fetch ride logs:",z)}};R.useEffect(()=>{C()},[x]);const k=async()=>{let z=[...e];if(a&&(z=z.filter(j=>j.endedAt>=a)),u&&(z=z.filter(j=>j.endedAt<=u)),f){const j=f.toLowerCase();z=z.filter($=>`${$.pickupLocation.lat}, ${$.pickupLocation.lng}`.toLowerCase().includes(j))}if(y){const j=y.toLowerCase();z=z.filter($=>$.dropoffName.toLowerCase().includes(j))}w!==null?(z=z.filter(j=>j.estimatedEarnings>=w),z.sort((j,$)=>Math.abs(j.estimatedEarnings-w)-Math.abs($.estimatedEarnings-w))):z.sort((j,$)=>$.endedAt.getTime()-j.endedAt.getTime()),i(z),r(!1)},M=()=>{c(null),d(null),m(""),v(""),T(null);const z=[...e].sort((j,$)=>$.endedAt.getTime()-j.endedAt.getTime());i(z),r(!1)};return S.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 text-gray-900",children:S.jsx("div",{className:"max-w-7xl mx-auto",children:S.jsxs("div",{className:"max-w-2xl mx-auto min-h-screen",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold animate-fade-in",children:"Ride History"}),S.jsxs(att,{onClick:()=>r(!0),className:"gap-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg transition-all duration-300 transform hover:scale-105",children:[S.jsx(JW,{className:"w-4 h-4"})," Filter"]})]}),n.length===0?S.jsx("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center animate-fade-in-up",children:S.jsx("p",{className:"text-gray-500 text-lg",children:"No rides found."})}):S.jsx("div",{className:"space-y-4 animate-fade-in-up",style:{animationDelay:"0.2s"},children:n.map((z,j)=>S.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${j*.1}s`},children:S.jsx(rtt,{log:z})},z.id))}),S.jsx(ott,{isOpen:s,onClose:()=>r(!1),onApply:k,onClear:M,startDate:a,setStartDate:c,endDate:u,setEndDate:d,dropoffLocation:y,setDropoffLocation:v,minFare:w,setMinFare:T})]})})})}var utt=Object.defineProperty,Oy=Object.getOwnPropertySymbols,bj=Object.prototype.hasOwnProperty,wj=Object.prototype.propertyIsEnumerable,kM=(e,t,n)=>t in e?utt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jw=(e,t)=>{for(var n in t||(t={}))bj.call(t,n)&&kM(e,n,t[n]);if(Oy)for(var n of Oy(t))wj.call(t,n)&&kM(e,n,t[n]);return e},tE=(e,t)=>{var n={};for(var i in e)bj.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&Oy)for(var i of Oy(e))t.indexOf(i)<0&&wj.call(e,i)&&(n[i]=e[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var nc;(e=>{const t=class ae{constructor(u,d,f,m){if(this.version=u,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],u<ae.MIN_VERSION||u>ae.MAX_VERSION)throw new RangeError("Version value out of range");if(m<-1||m>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let y=[];for(let w=0;w<this.size;w++)y.push(!1);for(let w=0;w<this.size;w++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(f);if(this.drawCodewords(v),m==-1){let w=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const x=this.getPenaltyScore();x<w&&(m=T,w=x),this.applyMask(T)}}s(0<=m&&m<=7),this.mask=m,this.applyMask(m),this.drawFormatBits(m),this.isFunction=[]}static encodeText(u,d){const f=e.QrSegment.makeSegments(u);return ae.encodeSegments(f,d)}static encodeBinary(u,d){const f=e.QrSegment.makeBytes(u);return ae.encodeSegments([f],d)}static encodeSegments(u,d,f=1,m=40,y=-1,v=!0){if(!(ae.MIN_VERSION<=f&&f<=m&&m<=ae.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let w,T;for(w=f;;w++){const M=ae.getNumDataCodewords(w,d)*8,z=a.getTotalBits(u,w);if(z<=M){T=z;break}if(w>=m)throw new RangeError("Data too long")}for(const M of[ae.Ecc.MEDIUM,ae.Ecc.QUARTILE,ae.Ecc.HIGH])v&&T<=ae.getNumDataCodewords(w,M)*8&&(d=M);let x=[];for(const M of u){n(M.mode.modeBits,4,x),n(M.numChars,M.mode.numCharCountBits(w),x);for(const z of M.getData())x.push(z)}s(x.length==T);const C=ae.getNumDataCodewords(w,d)*8;s(x.length<=C),n(0,Math.min(4,C-x.length),x),n(0,(8-x.length%8)%8,x),s(x.length%8==0);for(let M=236;x.length<C;M^=253)n(M,8,x);let k=[];for(;k.length*8<x.length;)k.push(0);return x.forEach((M,z)=>k[z>>>3]|=M<<7-(z&7)),new ae(w,d,k,y)}getModule(u,d){return 0<=u&&u<this.size&&0<=d&&d<this.size&&this.modules[d][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),d=u.length;for(let f=0;f<d;f++)for(let m=0;m<d;m++)f==0&&m==0||f==0&&m==d-1||f==d-1&&m==0||this.drawAlignmentPattern(u[f],u[m]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const d=this.errorCorrectionLevel.formatBits<<3|u;let f=d;for(let y=0;y<10;y++)f=f<<1^(f>>>9)*1335;const m=(d<<10|f)^21522;s(m>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,i(m,y));this.setFunctionModule(8,7,i(m,6)),this.setFunctionModule(8,8,i(m,7)),this.setFunctionModule(7,8,i(m,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,i(m,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,i(m,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,i(m,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let f=0;f<12;f++)u=u<<1^(u>>>11)*7973;const d=this.version<<12|u;s(d>>>18==0);for(let f=0;f<18;f++){const m=i(d,f),y=this.size-11+f%3,v=Math.floor(f/3);this.setFunctionModule(y,v,m),this.setFunctionModule(v,y,m)}}drawFinderPattern(u,d){for(let f=-4;f<=4;f++)for(let m=-4;m<=4;m++){const y=Math.max(Math.abs(m),Math.abs(f)),v=u+m,w=d+f;0<=v&&v<this.size&&0<=w&&w<this.size&&this.setFunctionModule(v,w,y!=2&&y!=4)}}drawAlignmentPattern(u,d){for(let f=-2;f<=2;f++)for(let m=-2;m<=2;m++)this.setFunctionModule(u+m,d+f,Math.max(Math.abs(m),Math.abs(f))!=1)}setFunctionModule(u,d,f){this.modules[d][u]=f,this.isFunction[d][u]=!0}addEccAndInterleave(u){const d=this.version,f=this.errorCorrectionLevel;if(u.length!=ae.getNumDataCodewords(d,f))throw new RangeError("Invalid argument");const m=ae.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][d],y=ae.ECC_CODEWORDS_PER_BLOCK[f.ordinal][d],v=Math.floor(ae.getNumRawDataModules(d)/8),w=m-v%m,T=Math.floor(v/m);let x=[];const C=ae.reedSolomonComputeDivisor(y);for(let M=0,z=0;M<m;M++){let j=u.slice(z,z+T-y+(M<w?0:1));z+=j.length;const $=ae.reedSolomonComputeRemainder(j,C);M<w&&j.push(0),x.push(j.concat($))}let k=[];for(let M=0;M<x[0].length;M++)x.forEach((z,j)=>{(M!=T-y||j>=w)&&k.push(z[M])});return s(k.length==v),k}drawCodewords(u){if(u.length!=Math.floor(ae.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let m=0;m<this.size;m++)for(let y=0;y<2;y++){const v=f-y,T=(f+1&2)==0?this.size-1-m:m;!this.isFunction[T][v]&&d<u.length*8&&(this.modules[T][v]=i(u[d>>>3],7-(d&7)),d++)}}s(d==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let f=0;f<this.size;f++){let m;switch(u){case 0:m=(f+d)%2==0;break;case 1:m=d%2==0;break;case 2:m=f%3==0;break;case 3:m=(f+d)%3==0;break;case 4:m=(Math.floor(f/3)+Math.floor(d/2))%2==0;break;case 5:m=f*d%2+f*d%3==0;break;case 6:m=(f*d%2+f*d%3)%2==0;break;case 7:m=((f+d)%2+f*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][f]&&m&&(this.modules[d][f]=!this.modules[d][f])}}getPenaltyScore(){let u=0;for(let y=0;y<this.size;y++){let v=!1,w=0,T=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[y][x]==v?(w++,w==5?u+=ae.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,T),v||(u+=this.finderPenaltyCountPatterns(T)*ae.PENALTY_N3),v=this.modules[y][x],w=1);u+=this.finderPenaltyTerminateAndCount(v,w,T)*ae.PENALTY_N3}for(let y=0;y<this.size;y++){let v=!1,w=0,T=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[x][y]==v?(w++,w==5?u+=ae.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,T),v||(u+=this.finderPenaltyCountPatterns(T)*ae.PENALTY_N3),v=this.modules[x][y],w=1);u+=this.finderPenaltyTerminateAndCount(v,w,T)*ae.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let v=0;v<this.size-1;v++){const w=this.modules[y][v];w==this.modules[y][v+1]&&w==this.modules[y+1][v]&&w==this.modules[y+1][v+1]&&(u+=ae.PENALTY_N2)}let d=0;for(const y of this.modules)d=y.reduce((v,w)=>v+(w?1:0),d);const f=this.size*this.size,m=Math.ceil(Math.abs(d*20-f*10)/f)-1;return s(0<=m&&m<=9),u+=m*ae.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let f=[6];for(let m=this.size-7;f.length<u;m-=d)f.splice(1,0,m);return f}}static getNumRawDataModules(u){if(u<ae.MIN_VERSION||u>ae.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*u+128)*u+64;if(u>=2){const f=Math.floor(u/7)+2;d-=(25*f-10)*f-55,u>=7&&(d-=36)}return s(208<=d&&d<=29648),d}static getNumDataCodewords(u,d){return Math.floor(ae.getNumRawDataModules(u)/8)-ae.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u]*ae.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let d=[];for(let m=0;m<u-1;m++)d.push(0);d.push(1);let f=1;for(let m=0;m<u;m++){for(let y=0;y<d.length;y++)d[y]=ae.reedSolomonMultiply(d[y],f),y+1<d.length&&(d[y]^=d[y+1]);f=ae.reedSolomonMultiply(f,2)}return d}static reedSolomonComputeRemainder(u,d){let f=d.map(m=>0);for(const m of u){const y=m^f.shift();f.push(0),d.forEach((v,w)=>f[w]^=ae.reedSolomonMultiply(v,y))}return f}static reedSolomonMultiply(u,d){if(u>>>8||d>>>8)throw new RangeError("Byte out of range");let f=0;for(let m=7;m>=0;m--)f=f<<1^(f>>>7)*285,f^=(d>>>m&1)*u;return s(f>>>8==0),f}finderPenaltyCountPatterns(u){const d=u[1];s(d<=this.size*3);const f=d>0&&u[2]==d&&u[3]==d*3&&u[4]==d&&u[5]==d;return(f&&u[0]>=d*4&&u[6]>=d?1:0)+(f&&u[6]>=d*4&&u[0]>=d?1:0)}finderPenaltyTerminateAndCount(u,d,f){return u&&(this.finderPenaltyAddHistory(d,f),d=0),d+=this.size,this.finderPenaltyAddHistory(d,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(u,d){d[0]==0&&(u+=this.size),d.pop(),d.unshift(u)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(c,u,d){if(u<0||u>31||c>>>u)throw new RangeError("Value out of range");for(let f=u-1;f>=0;f--)d.push(c>>>f&1)}function i(c,u){return(c>>>u&1)!=0}function s(c){if(!c)throw new Error("Assertion error")}const r=class pn{constructor(u,d,f){if(this.mode=u,this.numChars=d,this.bitData=f,d<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(u){let d=[];for(const f of u)n(f,8,d);return new pn(pn.Mode.BYTE,u.length,d)}static makeNumeric(u){if(!pn.isNumeric(u))throw new RangeError("String contains non-numeric characters");let d=[];for(let f=0;f<u.length;){const m=Math.min(u.length-f,3);n(parseInt(u.substring(f,f+m),10),m*3+1,d),f+=m}return new pn(pn.Mode.NUMERIC,u.length,d)}static makeAlphanumeric(u){if(!pn.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],f;for(f=0;f+2<=u.length;f+=2){let m=pn.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f))*45;m+=pn.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f+1)),n(m,11,d)}return f<u.length&&n(pn.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f)),6,d),new pn(pn.Mode.ALPHANUMERIC,u.length,d)}static makeSegments(u){return u==""?[]:pn.isNumeric(u)?[pn.makeNumeric(u)]:pn.isAlphanumeric(u)?[pn.makeAlphanumeric(u)]:[pn.makeBytes(pn.toUtf8ByteArray(u))]}static makeEci(u){let d=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)n(u,8,d);else if(u<16384)n(2,2,d),n(u,14,d);else if(u<1e6)n(6,3,d),n(u,21,d);else throw new RangeError("ECI assignment value out of range");return new pn(pn.Mode.ECI,0,d)}static isNumeric(u){return pn.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return pn.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,d){let f=0;for(const m of u){const y=m.mode.numCharCountBits(d);if(m.numChars>=1<<y)return 1/0;f+=4+y+m.bitData.length}return f}static toUtf8ByteArray(u){u=encodeURI(u);let d=[];for(let f=0;f<u.length;f++)u.charAt(f)!="%"?d.push(u.charCodeAt(f)):(d.push(parseInt(u.substring(f+1,f+3),16)),f+=2);return d}};r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=r;e.QrSegment=r})(nc||(nc={}));(e=>{(t=>{const n=class{constructor(s,r){this.ordinal=s,this.formatBits=r}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(nc||(nc={}));(e=>{(t=>{const n=class{constructor(s,r){this.modeBits=s,this.numBitsCharCount=r}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(nc||(nc={}));var _u=nc;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var htt={L:_u.QrCode.Ecc.LOW,M:_u.QrCode.Ecc.MEDIUM,Q:_u.QrCode.Ecc.QUARTILE,H:_u.QrCode.Ecc.HIGH},Ej=128,Tj="L",xj="#FFFFFF",Sj="#000000",Aj=!1,Cj=1,dtt=4,ftt=0,ptt=.1;function Rj(e,t=0){const n=[];return e.forEach(function(i,s){let r=null;i.forEach(function(a,c){if(!a&&r!==null){n.push(`M${r+t} ${s+t}h${c-r}v1H${r+t}z`),r=null;return}if(c===i.length-1){if(!a)return;r===null?n.push(`M${c+t},${s+t} h1v1H${c+t}z`):n.push(`M${r+t},${s+t} h${c+1-r}v1H${r+t}z`);return}a&&r===null&&(r=c)})}),n.join("")}function Ij(e,t){return e.slice().map((n,i)=>i<t.y||i>=t.y+t.h?n:n.map((s,r)=>r<t.x||r>=t.x+t.w?s:!1))}function mtt(e,t,n,i){if(i==null)return null;const s=e.length+n*2,r=Math.floor(t*ptt),a=s/t,c=(i.width||r)*a,u=(i.height||r)*a,d=i.x==null?e.length/2-c/2:i.x*a,f=i.y==null?e.length/2-u/2:i.y*a,m=i.opacity==null?1:i.opacity;let y=null;if(i.excavate){let w=Math.floor(d),T=Math.floor(f),x=Math.ceil(c+d-w),C=Math.ceil(u+f-T);y={x:w,y:T,w:x,h:C}}const v=i.crossOrigin;return{x:d,y:f,h:u,w:c,excavation:y,opacity:m,crossOrigin:v}}function gtt(e,t){return t!=null?Math.max(Math.floor(t),0):e?dtt:ftt}function Dj({value:e,level:t,minVersion:n,includeMargin:i,marginSize:s,imageSettings:r,size:a,boostLevel:c}){let u=de.useMemo(()=>{const w=(Array.isArray(e)?e:[e]).reduce((T,x)=>(T.push(..._u.QrSegment.makeSegments(x)),T),[]);return _u.QrCode.encodeSegments(w,htt[t],n,void 0,void 0,c)},[e,t,n,c]);const{cells:d,margin:f,numCells:m,calculatedImageSettings:y}=de.useMemo(()=>{let v=u.getModules();const w=gtt(i,s),T=v.length+w*2,x=mtt(v,a,w,r);return{cells:v,margin:w,numCells:T,calculatedImageSettings:x}},[u,a,r,i,s]);return{qrcode:u,margin:f,cells:d,numCells:m,calculatedImageSettings:y}}var ytt=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),_tt=de.forwardRef(function(t,n){const i=t,{value:s,size:r=Ej,level:a=Tj,bgColor:c=xj,fgColor:u=Sj,includeMargin:d=Aj,minVersion:f=Cj,boostLevel:m,marginSize:y,imageSettings:v}=i,T=tE(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:x}=T,C=tE(T,["style"]),k=v==null?void 0:v.src,M=de.useRef(null),z=de.useRef(null),j=de.useCallback(_t=>{M.current=_t,typeof n=="function"?n(_t):n&&(n.current=_t)},[n]),[$,O]=de.useState(!1),{margin:D,cells:N,numCells:L,calculatedImageSettings:F}=Dj({value:s,level:a,minVersion:f,boostLevel:m,includeMargin:d,marginSize:y,imageSettings:v,size:r});de.useEffect(()=>{if(M.current!=null){const _t=M.current,ft=_t.getContext("2d");if(!ft)return;let K=N;const tt=z.current,dt=F!=null&&tt!==null&&tt.complete&&tt.naturalHeight!==0&&tt.naturalWidth!==0;dt&&F.excavation!=null&&(K=Ij(N,F.excavation));const yt=window.devicePixelRatio||1;_t.height=_t.width=r*yt;const U=r/L*yt;ft.scale(U,U),ft.fillStyle=c,ft.fillRect(0,0,L,L),ft.fillStyle=u,ytt?ft.fill(new Path2D(Rj(K,D))):N.forEach(function(J,ot){J.forEach(function(st,pt){st&&ft.fillRect(pt+D,ot+D,1,1)})}),F&&(ft.globalAlpha=F.opacity),dt&&ft.drawImage(tt,F.x+D,F.y+D,F.w,F.h)}}),de.useEffect(()=>{O(!1)},[k]);const H=Jw({height:r,width:r},x);let B=null;return k!=null&&(B=de.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{O(!0)},ref:z,crossOrigin:F==null?void 0:F.crossOrigin})),de.createElement(de.Fragment,null,de.createElement("canvas",Jw({style:H,height:r,width:r,ref:j,role:"img"},C)),B)});_tt.displayName="QRCodeCanvas";var Ux=de.forwardRef(function(t,n){const i=t,{value:s,size:r=Ej,level:a=Tj,bgColor:c=xj,fgColor:u=Sj,includeMargin:d=Aj,minVersion:f=Cj,boostLevel:m,title:y,marginSize:v,imageSettings:w}=i,T=tE(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:x,cells:C,numCells:k,calculatedImageSettings:M}=Dj({value:s,level:a,minVersion:f,boostLevel:m,includeMargin:d,marginSize:v,imageSettings:w,size:r});let z=C,j=null;w!=null&&M!=null&&(M.excavation!=null&&(z=Ij(C,M.excavation)),j=de.createElement("image",{href:w.src,height:M.h,width:M.w,x:M.x+x,y:M.y+x,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const $=Rj(z,x);return de.createElement("svg",Jw({height:r,width:r,viewBox:`0 0 ${k} ${k}`,ref:n,role:"img"},T),!!y&&de.createElement("title",null,y),de.createElement("path",{fill:c,d:`M0,0 h${k}v${k}H0z`,shapeRendering:"crispEdges"}),de.createElement("path",{fill:u,d:$,shapeRendering:"crispEdges"}),j)});Ux.displayName="QRCodeSVG";const vtt=()=>{const e=rc(),{user:t,logout:n}=gp(),[i,s]=R.useState(()=>{const H=localStorage.getItem("driver");return H?JSON.parse(H):null}),[r,a]=R.useState(!1),[c,u]=R.useState(""),[d,f]=R.useState(""),[m,y]=R.useState(""),[v,w]=R.useState(null),[T,x]=R.useState(!1),[C,k]=R.useState("GCash"),[M,z]=R.useState(""),[j,$]=R.useState(!1);R.useEffect(()=>{if(!t){e("/login");return}(async()=>{const B=Qt(ze,"drivers",t.uid),_t=await np(B);if(_t.exists()){const ft=_t.data();s(ft),u(ft.status||"Offline"),f(ft.age||""),y(ft.contact||""),w(ft.image||null),k(ft.paymentMethod||"GCash"),z(ft.paymentNumber||"");const K=Qt(ze,"publicProfiles",t.uid);await Je(K,ft)}})()},[t,e]);const O=async()=>{$(!0),setTimeout(async()=>{if(!t)return;const H=Qt(ze,"queues",t.uid);try{await _o(H)}catch{}const B=Qt(ze,"drivers",t.uid);await Je(B,{status:"offline"},{merge:!0}),await(n==null?void 0:n()),localStorage.removeItem("driver"),$t.success("Logout successful!"),e("/login")},500)},D=async()=>{if(!t)return;const H={...i,status:c,age:d,contact:m,image:v,paymentMethod:C,paymentNumber:M},B=Qt(ze,"drivers",t.uid);await JP(B,H);const _t=Qt(ze,"publicProfiles",t.uid);await Je(_t,H),s(H),a(!1),$t.success("Profile updated!")},N=H=>{var _t;const B=(_t=H.target.files)==null?void 0:_t[0];if(B){const ft=new FileReader;ft.onloadend=()=>{w(ft.result)},ft.readAsDataURL(B)}},L=()=>{u(H=>H==="Online"?"Offline":"Online")};if(!i)return null;const F=`${window.location.origin}/driver/${t==null?void 0:t.uid}`;return S.jsx("div",{className:"flex justify-center p-4 bg-gray-100 min-h-screen text-gray-900",children:S.jsx(Nw,{children:!j&&S.jsxs(kl.div,{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:40},transition:{duration:.4},children:[S.jsxs("div",{className:"flex flex-col items-center mb-4 relative",children:[S.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 mb-2 cursor-pointer border-2 border-gray-900 hover:scale-105 transition-transform",onClick:()=>v&&x(!0),children:v?S.jsx("img",{src:v,alt:"Driver",className:"w-full h-full object-cover"}):S.jsx("div",{className:"text-gray-400 text-sm flex items-center justify-center h-full",children:"No Image"})}),r&&S.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"text-xs text-gray-400 mb-2"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsxs("div",{children:[S.jsx("strong",{children:"Name:"})," ",i.name]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Plate:"})," ",i.plate]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Vehicle:"})," ",i.vehicle]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Status:"})," ",r?S.jsxs("div",{className:"flex items-center",children:[S.jsx("span",{className:`inline-block w-10 h-6 rounded-full ${c==="Online"?"bg-green-500":"bg-red-500"} cursor-pointer`,onClick:L,children:S.jsx("span",{className:`block w-4 h-4 bg-white rounded-full transition-transform ${c==="Online"?"translate-x-4":""}`})}),S.jsx("span",{className:"ml-2 text-sm",children:c})]}):c]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Age:"})," ",r?S.jsx("input",{value:d,onChange:H=>f(H.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full"}):d]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Contact:"})," ",r?S.jsx("input",{value:m,onChange:H=>y(H.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full"}):m]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Payment Method:"})," ",r?S.jsxs("select",{value:C,onChange:H=>k(H.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full",children:[S.jsx("option",{value:"GCash",children:"GCash"}),S.jsx("option",{value:"PayMaya",children:"PayMaya"})]}):C]}),S.jsxs("div",{children:[S.jsxs("strong",{children:[C," Number:"]})," ",r?S.jsx("input",{value:M,onChange:H=>z(H.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full"}):M||"N/A"]})]}),S.jsxs("div",{className:"text-center mt-6",children:[S.jsx("h2",{className:"font-bold text-sm mb-2",children:"Your Driver QR Code"}),S.jsx("div",{className:"bg-white p-4 rounded-lg w-fit mx-auto",children:S.jsx(Ux,{value:F,size:150})}),S.jsx("p",{className:"text-xs mt-2 text-gray-400 break-all",children:F})]}),S.jsxs("div",{className:"flex justify-between mt-6",children:[r?S.jsx(kl.button,{onClick:D,whileTap:{scale:.95},className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-sm w-full mr-2",children:"Save"}):S.jsx(kl.button,{onClick:()=>a(!0),whileTap:{scale:.95},className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm w-full mr-2",children:"Edit Profile"}),S.jsx(kl.button,{onClick:O,whileTap:{scale:.9},className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm w-full ml-2",children:"Logout"})]}),S.jsx(Nw,{children:T&&S.jsx(kl.div,{className:"fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>x(!1),children:S.jsx(kl.img,{src:v||"",alt:"Zoomed Profile",className:"max-w-[90%] max-h-[90%] rounded-lg shadow-lg",initial:{scale:.8},animate:{scale:1},exit:{scale:.8},transition:{duration:.3}})})})]},"profileCard")})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function yp(e){return e+.5|0}const wa=(e,t,n)=>Math.max(Math.min(e,n),t);function Nd(e){return wa(yp(e*2.55),0,255)}function Ma(e){return wa(yp(e*255),0,255)}function po(e){return wa(yp(e/2.55)/100,0,1)}function PM(e){return wa(yp(e*100),0,100)}const Rs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},eE=[..."0123456789ABCDEF"],btt=e=>eE[e&15],wtt=e=>eE[(e&240)>>4]+eE[e&15],ng=e=>(e&240)>>4===(e&15),Ett=e=>ng(e.r)&&ng(e.g)&&ng(e.b)&&ng(e.a);function Ttt(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Rs[e[1]]*17,g:255&Rs[e[2]]*17,b:255&Rs[e[3]]*17,a:t===5?Rs[e[4]]*17:255}:(t===7||t===9)&&(n={r:Rs[e[1]]<<4|Rs[e[2]],g:Rs[e[3]]<<4|Rs[e[4]],b:Rs[e[5]]<<4|Rs[e[6]],a:t===9?Rs[e[7]]<<4|Rs[e[8]]:255})),n}const xtt=(e,t)=>e<255?t(e):"";function Stt(e){var t=Ett(e)?btt:wtt;return e?"#"+t(e.r)+t(e.g)+t(e.b)+xtt(e.a,t):void 0}const Att=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Mj(e,t,n){const i=t*Math.min(n,1-n),s=(r,a=(r+e/30)%12)=>n-i*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function Ctt(e,t,n){const i=(s,r=(s+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Rtt(e,t,n){const i=Mj(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function Itt(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}function Fx(e){const n=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(n,i,s),a=Math.min(n,i,s),c=(r+a)/2;let u,d,f;return r!==a&&(f=r-a,d=c>.5?f/(2-r-a):f/(r+a),u=Itt(n,i,s,f,r),u=u*60+.5),[u|0,d||0,c]}function Bx(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Ma)}function zx(e,t,n){return Bx(Mj,e,t,n)}function Dtt(e,t,n){return Bx(Rtt,e,t,n)}function Mtt(e,t,n){return Bx(Ctt,e,t,n)}function Nj(e){return(e%360+360)%360}function Ntt(e){const t=Att.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Nd(+t[5]):Ma(+t[5]));const s=Nj(+t[2]),r=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?i=Dtt(s,r,a):t[1]==="hsv"?i=Mtt(s,r,a):i=zx(s,r,a),{r:i[0],g:i[1],b:i[2],a:n}}function ktt(e,t){var n=Fx(e);n[0]=Nj(n[0]+t),n=zx(n),e.r=n[0],e.g=n[1],e.b=n[2]}function Ptt(e){if(!e)return;const t=Fx(e),n=t[0],i=PM(t[1]),s=PM(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${po(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const OM={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},LM={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ott(){const e={},t=Object.keys(LM),n=Object.keys(OM);let i,s,r,a,c;for(i=0;i<t.length;i++){for(a=c=t[i],s=0;s<n.length;s++)r=n[s],c=c.replace(r,OM[r]);r=parseInt(LM[a],16),e[c]=[r>>16&255,r>>8&255,r&255]}return e}let ig;function Ltt(e){ig||(ig=Ott(),ig.transparent=[0,0,0,0]);const t=ig[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Vtt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function jtt(e){const t=Vtt.exec(e);let n=255,i,s,r;if(t){if(t[7]!==i){const a=+t[7];n=t[8]?Nd(a):wa(a*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Nd(i):wa(i,0,255)),s=255&(t[4]?Nd(s):wa(s,0,255)),r=255&(t[6]?Nd(r):wa(r,0,255)),{r:i,g:s,b:r,a:n}}}function Utt(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${po(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const xb=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,su=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Ftt(e,t,n){const i=su(po(e.r)),s=su(po(e.g)),r=su(po(e.b));return{r:Ma(xb(i+n*(su(po(t.r))-i))),g:Ma(xb(s+n*(su(po(t.g))-s))),b:Ma(xb(r+n*(su(po(t.b))-r))),a:e.a+n*(t.a-e.a)}}function sg(e,t,n){if(e){let i=Fx(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=zx(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function kj(e,t){return e&&Object.assign(t||{},e)}function VM(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ma(e[3]))):(t=kj(e,{r:0,g:0,b:0,a:1}),t.a=Ma(t.a)),t}function Btt(e){return e.charAt(0)==="r"?jtt(e):Ntt(e)}class Nf{constructor(t){if(t instanceof Nf)return t;const n=typeof t;let i;n==="object"?i=VM(t):n==="string"&&(i=Ttt(t)||Ltt(t)||Btt(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=kj(this._rgb);return t&&(t.a=po(t.a)),t}set rgb(t){this._rgb=VM(t)}rgbString(){return this._valid?Utt(this._rgb):void 0}hexString(){return this._valid?Stt(this._rgb):void 0}hslString(){return this._valid?Ptt(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,s=t.rgb;let r;const a=n===r?.5:n,c=2*a-1,u=i.a-s.a,d=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;r=1-d,i.r=255&d*i.r+r*s.r+.5,i.g=255&d*i.g+r*s.g+.5,i.b=255&d*i.b+r*s.b+.5,i.a=a*i.a+(1-a)*s.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=Ftt(this._rgb,t._rgb,n)),this}clone(){return new Nf(this.rgb)}alpha(t){return this._rgb.a=Ma(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=yp(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return sg(this._rgb,2,t),this}darken(t){return sg(this._rgb,2,-t),this}saturate(t){return sg(this._rgb,1,t),this}desaturate(t){return sg(this._rgb,1,-t),this}rotate(t){return ktt(this._rgb,t),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function co(){}const ztt=(()=>{let e=0;return()=>e++})();function ke(e){return e==null}function Jn(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Te(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Os(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function br(e,t){return Os(e)?e:t}function ce(e,t){return typeof e>"u"?t:e}const Htt=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Pj=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function en(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Ve(e,t,n,i){let s,r,a;if(Jn(e))for(r=e.length,s=0;s<r;s++)t.call(n,e[s],s);else if(Te(e))for(a=Object.keys(e),r=a.length,s=0;s<r;s++)t.call(n,e[a[s]],a[s])}function Ly(e,t){let n,i,s,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],r=t[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Vy(e){if(Jn(e))return e.map(Vy);if(Te(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=Vy(e[n[s]]);return t}return e}function Oj(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function qtt(e,t,n,i){if(!Oj(e))return;const s=t[e],r=n[e];Te(s)&&Te(r)?kf(s,r,i):t[e]=Vy(r)}function kf(e,t,n){const i=Jn(t)?t:[t],s=i.length;if(!Te(e))return e;n=n||{};const r=n.merger||qtt;let a;for(let c=0;c<s;++c){if(a=i[c],!Te(a))continue;const u=Object.keys(a);for(let d=0,f=u.length;d<f;++d)r(u[d],e,a,n)}return e}function Zd(e,t){return kf(e,t,{merger:$tt})}function $tt(e,t,n){if(!Oj(e))return;const i=t[e],s=n[e];Te(i)&&Te(s)?Zd(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Vy(s))}const jM={"":e=>e,x:e=>e.x,y:e=>e.y};function Gtt(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Wtt(e){const t=Gtt(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function ic(e,t){return(jM[t]||(jM[t]=Wtt(t)))(e)}function Hx(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Pf=e=>typeof e<"u",Ba=e=>typeof e=="function",UM=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Ktt(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Mn=Math.PI,gn=2*Mn,Ytt=gn+Mn,jy=Number.POSITIVE_INFINITY,Qtt=Mn/180,Un=Mn/2,Cl=Mn/4,FM=Mn*2/3,Lj=Math.log10,kr=Math.sign;function Jd(e,t,n){return Math.abs(e-t)<n}function BM(e){const t=Math.round(e);e=Jd(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Lj(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Xtt(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((s,r)=>s-r).pop(),t}function Ztt(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Of(e){return!Ztt(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Jtt(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function tet(e,t,n){let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function bo(e){return e*(Mn/180)}function eet(e){return e*(180/Mn)}function zM(e){if(!Os(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Vj(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Mn&&(r+=gn),{angle:r,distance:s}}function nE(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function net(e,t){return(e-t+Ytt)%gn-Mn}function fa(e){return(e%gn+gn)%gn}function Lf(e,t,n,i){const s=fa(e),r=fa(t),a=fa(n),c=fa(r-s),u=fa(a-s),d=fa(s-r),f=fa(s-a);return s===r||s===a||i&&r===a||c>u&&d<f}function Ei(e,t,n){return Math.max(t,Math.min(n,e))}function iet(e){return Ei(e,-32768,32767)}function Ea(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function qx(e,t,n){n=n||(a=>e[a]<t);let i=e.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Hl=(e,t,n,i)=>qx(e,n,i?s=>{const r=e[s][t];return r<n||r===n&&e[s+1][t]===n}:s=>e[s][t]<n),set=(e,t,n)=>qx(e,n,i=>e[i][t]>=n);function ret(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)i++;for(;s>i&&e[s-1]>n;)s--;return i>0||s<e.length?e.slice(i,s):e}const jj=["push","pop","shift","splice","unshift"];function oet(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),jj.forEach(n=>{const i="_onData"+Hx(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const a=s.apply(this,r);return e._chartjs.listeners.forEach(c=>{typeof c[i]=="function"&&c[i](...r)}),a}})})}function HM(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(jj.forEach(r=>{delete e[r]}),delete e._chartjs)}function Uj(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Fj=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Bj(e,t){let n=[],i=!1;return function(...s){n=s,i||(i=!0,Fj.call(window,()=>{i=!1,e.apply(t,n)}))}}function aet(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const zj=e=>e==="start"?"left":e==="end"?"right":"center",os=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,cet=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function uet(e,t,n){const i=t.length;let s=0,r=i;if(e._sorted){const{iScale:a,vScale:c,_parsed:u}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,f=a.axis,{min:m,max:y,minDefined:v,maxDefined:w}=a.getUserBounds();if(v){if(s=Math.min(Hl(u,f,m).lo,n?i:Hl(t,f,a.getPixelForValue(m)).lo),d){const T=u.slice(0,s+1).reverse().findIndex(x=>!ke(x[c.axis]));s-=Math.max(0,T)}s=Ei(s,0,i-1)}if(w){let T=Math.max(Hl(u,a.axis,y,!0).hi+1,n?0:Hl(t,f,a.getPixelForValue(y),!0).hi+1);if(d){const x=u.slice(T-1).findIndex(C=>!ke(C[c.axis]));T+=Math.max(0,x)}r=Ei(T,s,i)-s}else r=i-s}return{start:s,count:r}}function het(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const rg=e=>e===0||e===1,qM=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*gn/n)),$M=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*gn/n)+1,tf={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Un)+1,easeOutSine:e=>Math.sin(e*Un),easeInOutSine:e=>-.5*(Math.cos(Mn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>rg(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>rg(e)?e:qM(e,.075,.3),easeOutElastic:e=>rg(e)?e:$M(e,.075,.3),easeInOutElastic(e){return rg(e)?e:e<.5?.5*qM(e*2,.1125,.45):.5+.5*$M(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-tf.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?tf.easeInBounce(e*2)*.5:tf.easeOutBounce(e*2-1)*.5+.5};function $x(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function GM(e){return $x(e)?e:new Nf(e)}function Sb(e){return $x(e)?e:new Nf(e).saturate(.5).darken(.1).hexString()}const det=["x","y","borderWidth","radius","tension"],fet=["color","borderColor","backgroundColor"];function pet(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:fet},numbers:{type:"number",properties:det}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function met(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const WM=new Map;function get(e,t){t=t||{};const n=e+JSON.stringify(t);let i=WM.get(n);return i||(i=new Intl.NumberFormat(e,t),WM.set(n,i)),i}function Gx(e,t,n){return get(t,n).format(e)}const yet={values(e){return Jn(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let s,r=e;if(n.length>1){const d=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),r=_et(e,n)}const a=Lj(Math.abs(r)),c=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:s,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),Gx(e,i,u)}};function _et(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var Hj={formatters:yet};function vet(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Hj.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const sc=Object.create(null),iE=Object.create(null);function ef(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];e=e[r]||(e[r]=Object.create(null))}return e}function Ab(e,t,n){return typeof t=="string"?kf(ef(e,t),n):kf(ef(e,""),t)}class bet{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Sb(s.backgroundColor),this.hoverBorderColor=(i,s)=>Sb(s.borderColor),this.hoverColor=(i,s)=>Sb(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Ab(this,t,n)}get(t){return ef(this,t)}describe(t,n){return Ab(iE,t,n)}override(t,n){return Ab(sc,t,n)}route(t,n,i,s){const r=ef(this,t),a=ef(this,i),c="_"+n;Object.defineProperties(r,{[c]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[c],d=a[s];return Te(u)?Object.assign({},d,u):ce(u,d)},set(u){this[c]=u}}})}apply(t){t.forEach(n=>n(this))}}var xn=new bet({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pet,met,vet]);function wet(e){return!e||ke(e.size)||ke(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function KM(e,t,n,i,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,n.push(s)),r>i&&(i=r),i}function Rl(e,t,n){const i=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function YM(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function sE(e,t,n,i){qj(e,t,n,i,null)}function qj(e,t,n,i,s){let r,a,c,u,d,f,m,y;const v=t.pointStyle,w=t.rotation,T=t.radius;let x=(w||0)*Qtt;if(v&&typeof v=="object"&&(r=v.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(x),e.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),e.restore();return}if(!(isNaN(T)||T<=0)){switch(e.beginPath(),v){default:s?e.ellipse(n,i,s/2,T,0,0,gn):e.arc(n,i,T,0,gn),e.closePath();break;case"triangle":f=s?s/2:T,e.moveTo(n+Math.sin(x)*f,i-Math.cos(x)*T),x+=FM,e.lineTo(n+Math.sin(x)*f,i-Math.cos(x)*T),x+=FM,e.lineTo(n+Math.sin(x)*f,i-Math.cos(x)*T),e.closePath();break;case"rectRounded":d=T*.516,u=T-d,a=Math.cos(x+Cl)*u,m=Math.cos(x+Cl)*(s?s/2-d:u),c=Math.sin(x+Cl)*u,y=Math.sin(x+Cl)*(s?s/2-d:u),e.arc(n-m,i-c,d,x-Mn,x-Un),e.arc(n+y,i-a,d,x-Un,x),e.arc(n+m,i+c,d,x,x+Un),e.arc(n-y,i+a,d,x+Un,x+Mn),e.closePath();break;case"rect":if(!w){u=Math.SQRT1_2*T,f=s?s/2:u,e.rect(n-f,i-u,2*f,2*u);break}x+=Cl;case"rectRot":m=Math.cos(x)*(s?s/2:T),a=Math.cos(x)*T,c=Math.sin(x)*T,y=Math.sin(x)*(s?s/2:T),e.moveTo(n-m,i-c),e.lineTo(n+y,i-a),e.lineTo(n+m,i+c),e.lineTo(n-y,i+a),e.closePath();break;case"crossRot":x+=Cl;case"cross":m=Math.cos(x)*(s?s/2:T),a=Math.cos(x)*T,c=Math.sin(x)*T,y=Math.sin(x)*(s?s/2:T),e.moveTo(n-m,i-c),e.lineTo(n+m,i+c),e.moveTo(n+y,i-a),e.lineTo(n-y,i+a);break;case"star":m=Math.cos(x)*(s?s/2:T),a=Math.cos(x)*T,c=Math.sin(x)*T,y=Math.sin(x)*(s?s/2:T),e.moveTo(n-m,i-c),e.lineTo(n+m,i+c),e.moveTo(n+y,i-a),e.lineTo(n-y,i+a),x+=Cl,m=Math.cos(x)*(s?s/2:T),a=Math.cos(x)*T,c=Math.sin(x)*T,y=Math.sin(x)*(s?s/2:T),e.moveTo(n-m,i-c),e.lineTo(n+m,i+c),e.moveTo(n+y,i-a),e.lineTo(n-y,i+a);break;case"line":a=s?s/2:Math.cos(x)*T,c=Math.sin(x)*T,e.moveTo(n-a,i-c),e.lineTo(n+a,i+c);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(x)*(s?s/2:T),i+Math.sin(x)*T);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Vf(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Wx(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Kx(e){e.restore()}function Eet(e,t,n,i,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else s==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Tet(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function xet(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ke(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Aet(e,t,n,i,s){if(s.strikethrough||s.underline){const r=e.measureText(i),a=t-r.actualBoundingBoxLeft,c=t+r.actualBoundingBoxRight,u=n-r.actualBoundingBoxAscent,d=n+r.actualBoundingBoxDescent,f=s.strikethrough?(u+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,f),e.lineTo(c,f),e.stroke()}}function Cet(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Uy(e,t,n,i,s,r={}){const a=Jn(t)?t:[t],c=r.strokeWidth>0&&r.strokeColor!=="";let u,d;for(e.save(),e.font=s.string,xet(e,r),u=0;u<a.length;++u)d=a[u],r.backdrop&&Cet(e,r.backdrop),c&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),ke(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(d,n,i,r.maxWidth)),e.fillText(d,n,i,r.maxWidth),Aet(e,n,i,d,r),i+=Number(s.lineHeight);e.restore()}function Fy(e,t){const{x:n,y:i,w:s,h:r,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*Mn,Mn,!0),e.lineTo(n,i+r-a.bottomLeft),e.arc(n+a.bottomLeft,i+r-a.bottomLeft,a.bottomLeft,Mn,Un,!0),e.lineTo(n+s-a.bottomRight,i+r),e.arc(n+s-a.bottomRight,i+r-a.bottomRight,a.bottomRight,Un,0,!0),e.lineTo(n+s,i+a.topRight),e.arc(n+s-a.topRight,i+a.topRight,a.topRight,0,-Un,!0),e.lineTo(n+a.topLeft,i)}const Ret=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Iet=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Det(e,t){const n=(""+e).match(Ret);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Met=e=>+e||0;function Yx(e,t){const n={},i=Te(t),s=i?Object.keys(t):t,r=Te(e)?i?a=>ce(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of s)n[a]=Met(r(a));return n}function $j(e){return Yx(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Au(e){return Yx(e,["topLeft","topRight","bottomLeft","bottomRight"])}function er(e){const t=$j(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function $i(e,t){e=e||{},t=t||xn.font;let n=ce(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=ce(e.style,t.style);i&&!(""+i).match(Iet)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ce(e.family,t.family),lineHeight:Det(ce(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:ce(e.weight,t.weight),string:""};return s.string=wet(s),s}function og(e,t,n,i){let s,r,a;for(s=0,r=e.length;s<r;++s)if(a=e[s],a!==void 0&&a!==void 0)return a}function Net(e,t,n){const{min:i,max:s}=e,r=Pj(t,(s-i)/2),a=(c,u)=>n&&c===0?0:c+u;return{min:a(i,-Math.abs(r)),max:a(s,r)}}function fc(e,t){return Object.assign(Object.create(e),t)}function Qx(e,t=[""],n,i,s=()=>e[0]){const r=n||e;typeof i>"u"&&(i=Yj("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:i,_getTarget:s,override:c=>Qx([c,...e],t,r,i)};return new Proxy(a,{deleteProperty(c,u){return delete c[u],delete c._keys,delete e[0][u],!0},get(c,u){return Wj(c,u,()=>Fet(u,t,e,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(c,u){return XM(c).includes(u)},ownKeys(c){return XM(c)},set(c,u,d){const f=c._storage||(c._storage=s());return c[u]=f[u]=d,delete c._keys,!0}})}function Bu(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Gj(e,i),setContext:r=>Bu(e,r,n,i),override:r=>Bu(e.override(r),t,n,i)};return new Proxy(s,{deleteProperty(r,a){return delete r[a],delete e[a],!0},get(r,a,c){return Wj(r,a,()=>Pet(r,a,c))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(r,a,c){return e[a]=c,delete r[a],!0}})}function Gj(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Ba(n)?n:()=>n,isIndexable:Ba(i)?i:()=>i}}const ket=(e,t)=>e?e+Hx(t):t,Xx=(e,t)=>Te(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Wj(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function Pet(e,t,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:a}=e;let c=i[t];return Ba(c)&&a.isScriptable(t)&&(c=Oet(t,c,e,n)),Jn(c)&&c.length&&(c=Let(t,c,e,a.isIndexable)),Xx(t,c)&&(c=Bu(c,s,r&&r[t],a)),c}function Oet(e,t,n,i){const{_proxy:s,_context:r,_subProxy:a,_stack:c}=n;if(c.has(e))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+e);c.add(e);let u=t(r,a||i);return c.delete(e),Xx(e,u)&&(u=Zx(s._scopes,s,e,u)),u}function Let(e,t,n,i){const{_proxy:s,_context:r,_subProxy:a,_descriptors:c}=n;if(typeof r.index<"u"&&i(e))return t[r.index%t.length];if(Te(t[0])){const u=t,d=s._scopes.filter(f=>f!==u);t=[];for(const f of u){const m=Zx(d,s,e,f);t.push(Bu(m,r,a&&a[e],c))}}return t}function Kj(e,t,n){return Ba(e)?e(t,n):e}const Vet=(e,t)=>e===!0?t:typeof e=="string"?ic(t,e):void 0;function jet(e,t,n,i,s){for(const r of t){const a=Vet(n,r);if(a){e.add(a);const c=Kj(a._fallback,n,s);if(typeof c<"u"&&c!==n&&c!==i)return c}else if(a===!1&&typeof i<"u"&&n!==i)return null}return!1}function Zx(e,t,n,i){const s=t._rootScopes,r=Kj(t._fallback,n,i),a=[...e,...s],c=new Set;c.add(i);let u=QM(c,a,n,r||n,i);return u===null||typeof r<"u"&&r!==n&&(u=QM(c,a,r,u,i),u===null)?!1:Qx(Array.from(c),[""],s,r,()=>Uet(t,n,i))}function QM(e,t,n,i,s){for(;n;)n=jet(e,t,n,i,s);return n}function Uet(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];return Jn(s)&&Te(n)?n:s||{}}function Fet(e,t,n,i){let s;for(const r of t)if(s=Yj(ket(r,e),n),typeof s<"u")return Xx(e,s)?Zx(n,i,e,s):s}function Yj(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function XM(e){let t=e._keys;return t||(t=e._keys=Bet(e._scopes)),t}function Bet(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const zet=Number.EPSILON||1e-14,zu=(e,t)=>t<e.length&&!e[t].skip&&e[t],Qj=e=>e==="x"?"y":"x";function Het(e,t,n,i){const s=e.skip?t:e,r=t,a=n.skip?t:n,c=nE(r,s),u=nE(a,r);let d=c/(c+u),f=u/(c+u);d=isNaN(d)?0:d,f=isNaN(f)?0:f;const m=i*d,y=i*f;return{previous:{x:r.x-m*(a.x-s.x),y:r.y-m*(a.y-s.y)},next:{x:r.x+y*(a.x-s.x),y:r.y+y*(a.y-s.y)}}}function qet(e,t,n){const i=e.length;let s,r,a,c,u,d=zu(e,0);for(let f=0;f<i-1;++f)if(u=d,d=zu(e,f+1),!(!u||!d)){if(Jd(t[f],0,zet)){n[f]=n[f+1]=0;continue}s=n[f]/t[f],r=n[f+1]/t[f],c=Math.pow(s,2)+Math.pow(r,2),!(c<=9)&&(a=3/Math.sqrt(c),n[f]=s*a*t[f],n[f+1]=r*a*t[f])}}function $et(e,t,n="x"){const i=Qj(n),s=e.length;let r,a,c,u=zu(e,0);for(let d=0;d<s;++d){if(a=c,c=u,u=zu(e,d+1),!c)continue;const f=c[n],m=c[i];a&&(r=(f-a[n])/3,c[`cp1${n}`]=f-r,c[`cp1${i}`]=m-r*t[d]),u&&(r=(u[n]-f)/3,c[`cp2${n}`]=f+r,c[`cp2${i}`]=m+r*t[d])}}function Get(e,t="x"){const n=Qj(t),i=e.length,s=Array(i).fill(0),r=Array(i);let a,c,u,d=zu(e,0);for(a=0;a<i;++a)if(c=u,u=d,d=zu(e,a+1),!!u){if(d){const f=d[t]-u[t];s[a]=f!==0?(d[n]-u[n])/f:0}r[a]=c?d?kr(s[a-1])!==kr(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}qet(e,s,r),$et(e,r,t)}function ag(e,t,n){return Math.max(Math.min(e,n),t)}function Wet(e,t){let n,i,s,r,a,c=Vf(e[0],t);for(n=0,i=e.length;n<i;++n)a=r,r=c,c=n<i-1&&Vf(e[n+1],t),r&&(s=e[n],a&&(s.cp1x=ag(s.cp1x,t.left,t.right),s.cp1y=ag(s.cp1y,t.top,t.bottom)),c&&(s.cp2x=ag(s.cp2x,t.left,t.right),s.cp2y=ag(s.cp2y,t.top,t.bottom)))}function Ket(e,t,n,i,s){let r,a,c,u;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")Get(e,s);else{let d=i?e[e.length-1]:e[0];for(r=0,a=e.length;r<a;++r)c=e[r],u=Het(d,c,e[Math.min(r+1,a-(i?0:1))%a],t.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,d=c}t.capBezierPoints&&Wet(e,n)}function Jx(){return typeof window<"u"&&typeof document<"u"}function tS(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function By(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const P_=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Yet(e,t){return P_(e).getPropertyValue(t)}const Qet=["top","right","bottom","left"];function $l(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=Qet[s];i[r]=parseFloat(e[t+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Xet=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Zet(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:r}=i;let a=!1,c,u;if(Xet(s,r,e.target))c=s,u=r;else{const d=t.getBoundingClientRect();c=i.clientX-d.left,u=i.clientY-d.top,a=!0}return{x:c,y:u,box:a}}function Pl(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=P_(n),r=s.boxSizing==="border-box",a=$l(s,"padding"),c=$l(s,"border","width"),{x:u,y:d,box:f}=Zet(e,n),m=a.left+(f&&c.left),y=a.top+(f&&c.top);let{width:v,height:w}=t;return r&&(v-=a.width+c.width,w-=a.height+c.height),{x:Math.round((u-m)/v*n.width/i),y:Math.round((d-y)/w*n.height/i)}}function Jet(e,t,n){let i,s;if(t===void 0||n===void 0){const r=e&&tS(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const a=r.getBoundingClientRect(),c=P_(r),u=$l(c,"border","width"),d=$l(c,"padding");t=a.width-d.width-u.width,n=a.height-d.height-u.height,i=By(c.maxWidth,r,"clientWidth"),s=By(c.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:i||jy,maxHeight:s||jy}}const lg=e=>Math.round(e*10)/10;function tnt(e,t,n,i){const s=P_(e),r=$l(s,"margin"),a=By(s.maxWidth,e,"clientWidth")||jy,c=By(s.maxHeight,e,"clientHeight")||jy,u=Jet(e,t,n);let{width:d,height:f}=u;if(s.boxSizing==="content-box"){const y=$l(s,"border","width"),v=$l(s,"padding");d-=v.width+y.width,f-=v.height+y.height}return d=Math.max(0,d-r.width),f=Math.max(0,i?d/i:f-r.height),d=lg(Math.min(d,a,u.maxWidth)),f=lg(Math.min(f,c,u.maxHeight)),d&&!f&&(f=lg(d/2)),(t!==void 0||n!==void 0)&&i&&u.height&&f>u.height&&(f=u.height,d=lg(Math.floor(f*i))),{width:d,height:f}}function ZM(e,t,n){const i=t||1,s=Math.floor(e.height*i),r=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||a.height!==s||a.width!==r?(e.currentDevicePixelRatio=i,a.height=s,a.width=r,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const ent=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Jx()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function JM(e,t){const n=Yet(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ol(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function nnt(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function int(e,t,n,i){const s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},a=Ol(e,s,n),c=Ol(s,r,n),u=Ol(r,t,n),d=Ol(a,c,n),f=Ol(c,u,n);return Ol(d,f,n)}const snt=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},rnt=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Cu(e,t,n){return e?snt(t,n):rnt()}function Xj(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Zj(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Jj(e){return e==="angle"?{between:Lf,compare:net,normalize:fa}:{between:Ea,compare:(t,n)=>t-n,normalize:t=>t}}function tN({start:e,end:t,count:n,loop:i,style:s}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:s}}function ont(e,t,n){const{property:i,start:s,end:r}=n,{between:a,normalize:c}=Jj(i),u=t.length;let{start:d,end:f,loop:m}=e,y,v;if(m){for(d+=u,f+=u,y=0,v=u;y<v&&a(c(t[d%u][i]),s,r);++y)d--,f--;d%=u,f%=u}return f<d&&(f+=u),{start:d,end:f,loop:m,style:e.style}}function ant(e,t,n){if(!n)return[e];const{property:i,start:s,end:r}=n,a=t.length,{compare:c,between:u,normalize:d}=Jj(i),{start:f,end:m,loop:y,style:v}=ont(e,t,n),w=[];let T=!1,x=null,C,k,M;const z=()=>u(s,M,C)&&c(s,M)!==0,j=()=>c(r,C)===0||u(r,M,C),$=()=>T||z(),O=()=>!T||j();for(let D=f,N=f;D<=m;++D)k=t[D%a],!k.skip&&(C=d(k[i]),C!==M&&(T=u(C,s,r),x===null&&$()&&(x=c(C,s)===0?D:N),x!==null&&O()&&(w.push(tN({start:x,end:D,loop:y,count:a,style:v})),x=null),N=D,M=C));return x!==null&&w.push(tN({start:x,end:m,loop:y,count:a,style:v})),w}function lnt(e,t){const n=[],i=e.segments;for(let s=0;s<i.length;s++){const r=ant(i[s],e.points,t);r.length&&n.push(...r)}return n}function cnt(e,t,n,i){let s=0,r=t-1;if(n&&!i)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}function unt(e,t,n,i){const s=e.length,r=[];let a=t,c=e[t],u;for(u=t+1;u<=n;++u){const d=e[u%s];d.skip||d.stop?c.skip||(i=!1,r.push({start:t%s,end:(u-1)%s,loop:i}),t=a=d.stop?u:null):(a=u,c.skip&&(t=u)),c=d}return a!==null&&r.push({start:t%s,end:a%s,loop:i}),r}function hnt(e,t){const n=e.points,i=e.options.spanGaps,s=n.length;if(!s)return[];const r=!!e._loop,{start:a,end:c}=cnt(n,s,r,i);if(i===!0)return eN(e,[{start:a,end:c,loop:r}],n,t);const u=c<a?c+s:c,d=!!e._fullLoop&&a===0&&c===s-1;return eN(e,unt(n,a,u,d),n,t)}function eN(e,t,n,i){return!i||!i.setContext||!n?t:dnt(e,t,n,i)}function dnt(e,t,n,i){const s=e._chart.getContext(),r=nN(e.options),{_datasetIndex:a,options:{spanGaps:c}}=e,u=n.length,d=[];let f=r,m=t[0].start,y=m;function v(w,T,x,C){const k=c?-1:1;if(w!==T){for(w+=u;n[w%u].skip;)w-=k;for(;n[T%u].skip;)T+=k;w%u!==T%u&&(d.push({start:w%u,end:T%u,loop:x,style:C}),f=C,m=T%u)}}for(const w of t){m=c?m:w.start;let T=n[m%u],x;for(y=m+1;y<=w.end;y++){const C=n[y%u];x=nN(i.setContext(fc(s,{type:"segment",p0:T,p1:C,p0DataIndex:(y-1)%u,p1DataIndex:y%u,datasetIndex:a}))),fnt(x,f)&&v(m,y-1,w.loop,f),T=C,f=x}m<y-1&&v(m,y-1,w.loop,f)}return d}function nN(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function fnt(e,t){if(!t)return!1;const n=[],i=function(s,r){return $x(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class pnt{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,s){const r=n.listeners[s],a=n.duration;r.forEach(c=>c({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(i-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Fj.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let a=r.length-1,c=!1,u;for(;a>=0;--a)u=r[a],u._active?(u._total>i.duration&&(i.duration=u._total),u.tick(t),c=!0):(r[a]=r[r.length-1],r.pop());c&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ho=new pnt;const iN="transparent",mnt={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=GM(e||iN),s=i.valid&&GM(t||iN);return s&&s.valid?s.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class gnt{constructor(t,n,i,s){const r=n[i];s=og([t.to,s,r,t.from]);const a=og([t.from,r,s]);this._active=!0,this._fn=t.fn||mnt[t.type||typeof a],this._easing=tf[t.easing]||tf.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,a=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=og([t.to,n,s,t.from]),this._from=og([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,s=this._prop,r=this._from,a=this._loop,c=this._to;let u;if(this._active=r!==c&&(a||n<i),!this._active){this._target[s]=c,this._notify(!0);return}if(n<0){this._target[s]=r;return}u=n/i%2,u=a&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[s]=this._fn(r,c,u)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class t4{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Te(t))return;const n=Object.keys(xn.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!Te(r))return;const a={};for(const c of n)a[c]=r[c];(Jn(r.properties)&&r.properties||[s]).forEach(c=>{(c===s||!i.has(c))&&i.set(c,a)})})}_animateOptions(t,n){const i=n.options,s=_nt(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&ynt(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,n){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),a=Object.keys(n),c=Date.now();let u;for(u=a.length-1;u>=0;--u){const d=a[u];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(t,n));continue}const f=n[d];let m=r[d];const y=i.get(d);if(m)if(y&&m.active()){m.update(y,f,c);continue}else m.cancel();if(!y||!y.duration){t[d]=f;continue}r[d]=m=new gnt(y,t,d,f),s.push(m)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return ho.add(this._chart,i),!0}}function ynt(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=e[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function _nt(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function sN(e,t){const n=e&&e.options||{},i=n.reverse,s=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function vnt(e,t,n){if(n===!1)return!1;const i=sN(e,n),s=sN(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function bnt(e){let t,n,i,s;return Te(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:e===!1}}function e4(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function rN(e,t,n,i={}){const s=e.keys,r=i.mode==="single";let a,c,u,d;if(t===null)return;let f=!1;for(a=0,c=s.length;a<c;++a){if(u=+s[a],u===n){if(f=!0,i.all)continue;break}d=e.values[u],Os(d)&&(r||t===0||kr(t)===kr(d))&&(t+=d)}return!f&&!i.all?0:t}function wnt(e,t){const{iScale:n,vScale:i}=t,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",a=Object.keys(e),c=new Array(a.length);let u,d,f;for(u=0,d=a.length;u<d;++u)f=a[u],c[u]={[s]:f,[r]:e[f]};return c}function Cb(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function Ent(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Tnt(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function xnt(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function oN(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=e[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function aN(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:r,vScale:a,index:c}=i,u=r.axis,d=a.axis,f=Ent(r,a,i),m=t.length;let y;for(let v=0;v<m;++v){const w=t[v],{[u]:T,[d]:x}=w,C=w._stacks||(w._stacks={});y=C[d]=xnt(s,f,T),y[c]=x,y._top=oN(y,a,!0,i.type),y._bottom=oN(y,a,!1,i.type);const k=y._visualValues||(y._visualValues={});k[c]=x}}function Rb(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function Snt(e,t){return fc(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Ant(e,t,n){return fc(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function gd(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const Ib=e=>e==="reset"||e==="none",lN=(e,t)=>t?e:Object.assign({},e),Cnt=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:e4(n,!0),values:null};class Gl{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Cb(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&gd(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(m,y,v,w)=>m==="x"?y:m==="r"?w:v,r=n.xAxisID=ce(i.xAxisID,Rb(t,"x")),a=n.yAxisID=ce(i.yAxisID,Rb(t,"y")),c=n.rAxisID=ce(i.rAxisID,Rb(t,"r")),u=n.indexAxis,d=n.iAxisID=s(u,r,a,c),f=n.vAxisID=s(u,a,r,c);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&HM(this._data,this),t._stacked&&gd(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Te(n)){const s=this._cachedMeta;this._data=wnt(n,s)}else if(i!==n){if(i){HM(i,this);const s=this._cachedMeta;gd(s),s._parsed=[]}n&&Object.isExtensible(n)&&oet(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=Cb(n.vScale,n),n.stack!==i.stack&&(s=!0,gd(n),n.stack=i.stack),this._resyncElements(t),(s||r!==n._stacked)&&(aN(this,n._parsed),n._stacked=Cb(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:a}=i,c=r.axis;let u=t===0&&n===s.length?!0:i._sorted,d=t>0&&i._parsed[t-1],f,m,y;if(this._parsing===!1)i._parsed=s,i._sorted=!0,y=s;else{Jn(s[t])?y=this.parseArrayData(i,s,t,n):Te(s[t])?y=this.parseObjectData(i,s,t,n):y=this.parsePrimitiveData(i,s,t,n);const v=()=>m[c]===null||d&&m[c]<d[c];for(f=0;f<n;++f)i._parsed[f+t]=m=y[f],u&&(v()&&(u=!1),d=m);i._sorted=u}a&&aN(this,y)}parsePrimitiveData(t,n,i,s){const{iScale:r,vScale:a}=t,c=r.axis,u=a.axis,d=r.getLabels(),f=r===a,m=new Array(s);let y,v,w;for(y=0,v=s;y<v;++y)w=y+i,m[y]={[c]:f||r.parse(d[w],w),[u]:a.parse(n[w],w)};return m}parseArrayData(t,n,i,s){const{xScale:r,yScale:a}=t,c=new Array(s);let u,d,f,m;for(u=0,d=s;u<d;++u)f=u+i,m=n[f],c[u]={x:r.parse(m[0],f),y:a.parse(m[1],f)};return c}parseObjectData(t,n,i,s){const{xScale:r,yScale:a}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,d=new Array(s);let f,m,y,v;for(f=0,m=s;f<m;++f)y=f+i,v=n[y],d[f]={x:r.parse(ic(v,c),y),y:a.parse(ic(v,u),y)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const s=this.chart,r=this._cachedMeta,a=n[t.axis],c={keys:e4(s,!0),values:n._stacks[t.axis]._visualValues};return rN(c,a,r.index,{mode:i})}updateRangeFromParsed(t,n,i,s){const r=i[n.axis];let a=r===null?NaN:r;const c=s&&i._stacks[n.axis];s&&c&&(s.values=c,a=rN(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,a=s.length,c=this._getOtherScale(t),u=Cnt(n,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:m}=Tnt(c);let y,v;function w(){v=s[y];const T=v[c.axis];return!Os(v[t.axis])||f>T||m<T}for(y=0;y<a&&!(!w()&&(this.updateRangeFromParsed(d,t,v,u),r));++y);if(r){for(y=a-1;y>=0;--y)if(!w()){this.updateRangeFromParsed(d,t,v,u);break}}return d}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let s,r,a;for(s=0,r=n.length;s<r;++s)a=n[s][t.axis],Os(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=bnt(ce(this.options.clip,vnt(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,a=[],c=this._drawStart||0,u=this._drawCount||s.length-c,d=this.options.drawActiveElementsOnTop;let f;for(i.dataset&&i.dataset.draw(t,r,c,u),f=c;f<c+u;++f){const m=s[f];m.hidden||(m.active&&d?a.push(m):m.draw(t,r))}for(f=0;f<a.length;++f)a[f].draw(t,r)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];r=a.$context||(a.$context=Ant(this.getContext(),t,a)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Snt(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const s=n==="active",r=this._cachedDataOpts,a=t+"-"+n,c=r[a],u=this.enableOptionSharing&&Pf(i);if(c)return lN(c,u);const d=this.chart.config,f=d.datasetElementScopeKeys(this._type,t),m=s?[`${t}Hover`,"hover",t,""]:[t,""],y=d.getOptionScopes(this.getDataset(),f),v=Object.keys(xn.elements[t]),w=()=>this.getContext(i,s,n),T=d.resolveNamedOptions(y,v,w,m);return T.$shared&&(T.$shared=u,r[a]=Object.freeze(lN(T,u))),T}_resolveAnimations(t,n,i){const s=this.chart,r=this._cachedDataOpts,a=`animation-${n}`,c=r[a];if(c)return c;let u;if(s.options.animation!==!1){const f=this.chart.config,m=f.datasetAnimationScopeKeys(this._type,n),y=f.getOptionScopes(this.getDataset(),m);u=f.createResolver(y,this.getContext(t,i,n))}const d=new t4(s,u&&u.animations);return u&&u._cacheable&&(r[a]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Ib(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),s=this._sharedOptions,r=this.getSharedOptions(i),a=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:a}}updateElement(t,n,i,s){Ib(s)?Object.assign(t,i):this._resolveAnimations(n,s).update(t,i)}updateSharedOptions(t,n,i){t&&!Ib(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,s){t.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[c,u,d]of this._syncList)this[c](u,d);this._syncList=[];const s=i.length,r=n.length,a=Math.min(r,s);a&&this.parse(0,a),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,n,i=!0){const s=this._cachedMeta,r=s.data,a=t+n;let c;const u=d=>{for(d.length+=n,c=d.length-1;c>=a;c--)d[c]=d[c-n]};for(u(r),c=t;c<a;++c)r[c]=new this.dataElementType;this._parsing&&u(s._parsed),this.parse(t,n),i&&this.updateElements(r,t,n,"reset")}updateElements(t,n,i,s){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,n);i._stacked&&gd(i,s)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,s]=t;this[n](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}xt(Gl,"defaults",{}),xt(Gl,"datasetElementType",null),xt(Gl,"dataElementType",null);function Rnt(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=Uj(i.sort((s,r)=>s-r))}return e._cache.$bar}function Int(e){const t=e.iScale,n=Rnt(t,e.type);let i=t._length,s,r,a,c;const u=()=>{a===32767||a===-32768||(Pf(c)&&(i=Math.min(i,Math.abs(a-c)||i)),c=a)};for(s=0,r=n.length;s<r;++s)a=t.getPixelForValue(n[s]),u();for(c=void 0,s=0,r=t.ticks.length;s<r;++s)a=t.getPixelForTick(s),u();return i}function Dnt(e,t,n,i){const s=n.barThickness;let r,a;return ke(s)?(r=t.min*n.categoryPercentage,a=n.barPercentage):(r=s*i,a=1),{chunk:r/i,ratio:a,start:t.pixels[e]-r/2}}function Mnt(e,t,n,i){const s=t.pixels,r=s[e];let a=e>0?s[e-1]:null,c=e<s.length-1?s[e+1]:null;const u=n.categoryPercentage;a===null&&(a=r-(c===null?t.end-t.start:c-r)),c===null&&(c=r+r-a);const d=r-(r-Math.min(a,c))/2*u;return{chunk:Math.abs(c-a)/2*u/i,ratio:n.barPercentage,start:d}}function Nnt(e,t,n,i){const s=n.parse(e[0],i),r=n.parse(e[1],i),a=Math.min(s,r),c=Math.max(s,r);let u=a,d=c;Math.abs(a)>Math.abs(c)&&(u=c,d=a),t[n.axis]=d,t._custom={barStart:u,barEnd:d,start:s,end:r,min:a,max:c}}function n4(e,t,n,i){return Jn(e)?Nnt(e,t,n,i):t[n.axis]=n.parse(e,i),t}function cN(e,t,n,i){const s=e.iScale,r=e.vScale,a=s.getLabels(),c=s===r,u=[];let d,f,m,y;for(d=n,f=n+i;d<f;++d)y=t[d],m={},m[s.axis]=c||s.parse(a[d],d),u.push(n4(y,m,r,d));return u}function Db(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function knt(e,t,n){return e!==0?kr(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Pnt(e){let t,n,i,s,r;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:t,top:s,bottom:r}}function Ont(e,t,n,i){let s=t.borderSkipped;const r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:c,reverse:u,top:d,bottom:f}=Pnt(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?s=d:(n._bottom||0)===i?s=f:(r[uN(f,a,c,u)]=!0,s=d)),r[uN(s,a,c,u)]=!0,e.borderSkipped=r}function uN(e,t,n,i){return i?(e=Lnt(e,t,n),e=hN(e,n,t)):e=hN(e,t,n),e}function Lnt(e,t,n){return e===t?n:e===n?t:e}function hN(e,t,n){return e==="start"?t:e==="end"?n:e}function Vnt(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class jg extends Gl{parsePrimitiveData(t,n,i,s){return cN(t,n,i,s)}parseArrayData(t,n,i,s){return cN(t,n,i,s)}parseObjectData(t,n,i,s){const{iScale:r,vScale:a}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,d=r.axis==="x"?c:u,f=a.axis==="x"?c:u,m=[];let y,v,w,T;for(y=i,v=i+s;y<v;++y)T=n[y],w={},w[r.axis]=r.parse(ic(T,d),y),m.push(n4(ic(T,f),w,a,y));return m}updateRangeFromParsed(t,n,i,s){super.updateRangeFromParsed(t,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(t),a=r._custom,c=Db(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,s){const r=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,u=c.getBasePixel(),d=c.isHorizontal(),f=this._getRuler(),{sharedOptions:m,includeOptions:y}=this._getSharedOptions(n,s);for(let v=n;v<n+i;v++){const w=this.getParsed(v),T=r||ke(w[c.axis])?{base:u,head:u}:this._calculateBarValuePixels(v),x=this._calculateBarIndexPixels(v,f),C=(w._stacks||{})[c.axis],k={horizontal:d,base:T.base,enableBorderRadius:!C||Db(w._custom)||a===C._top||a===C._bottom,x:d?T.head:x.center,y:d?x.center:T.head,height:d?x.size:Math.abs(T.size),width:d?Math.abs(T.size):x.size};y&&(k.options=m||this.resolveDataElementOptions(v,t[v].active?"active":s));const M=k.options||t[v].options;Ont(k,M,C,a),Vnt(k,M,f.ratio),this.updateElement(t[v],v,k,s)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),r=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(n),u=c&&c[i.axis],d=f=>{const m=f._parsed.find(v=>v[i.axis]===u),y=m&&m[f.vScale.axis];if(ke(y)||isNaN(y))return!0};for(const f of s)if(!(n!==void 0&&d(f))&&((r===!1||a.indexOf(f.stack)===-1||r===void 0&&f.stack===void 0)&&a.push(f.stack),f.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,i){const s=this._getStacks(t,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,a;for(r=0,a=n.data.length;r<a;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const c=t.barThickness;return{min:c||Int(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:r,minBarLength:a}}=this,c=r||0,u=this.getParsed(t),d=u._custom,f=Db(d);let m=u[n.axis],y=0,v=i?this.applyStack(n,u,i):m,w,T;v!==m&&(y=v-m,v=m),f&&(m=d.barStart,v=d.barEnd-d.barStart,m!==0&&kr(m)!==kr(d.barEnd)&&(y=0),y+=m);const x=!ke(r)&&!f?r:y;let C=n.getPixelForValue(x);if(this.chart.getDataVisibility(t)?w=n.getPixelForValue(y+v):w=C,T=w-C,Math.abs(T)<a){T=knt(T,n,c)*a,m===c&&(C-=T/2);const k=n.getPixelForDecimal(0),M=n.getPixelForDecimal(1),z=Math.min(k,M),j=Math.max(k,M);C=Math.max(Math.min(C,j),z),w=C+T,i&&!f&&(u._stacks[n.axis]._visualValues[s]=n.getValueForPixel(w)-n.getValueForPixel(C))}if(C===n.getPixelForValue(c)){const k=kr(T)*n.getLineWidthForValue(c)/2;C+=k,T-=k}return{size:T,base:C,head:w,center:w+T/2}}_calculateBarIndexPixels(t,n){const i=n.scale,s=this.options,r=s.skipNull,a=ce(s.maxBarThickness,1/0);let c,u;if(n.grouped){const d=r?this._getStackCount(t):n.stackCount,f=s.barThickness==="flex"?Mnt(t,n,s,d):Dnt(t,n,s,d),m=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);c=f.start+f.chunk*m+f.chunk/2,u=Math.min(a,f.chunk*f.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),u=Math.min(a,n.min*n.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}xt(jg,"id","bar"),xt(jg,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),xt(jg,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function jnt(e,t,n){let i=1,s=1,r=0,a=0;if(t<gn){const c=e,u=c+t,d=Math.cos(c),f=Math.sin(c),m=Math.cos(u),y=Math.sin(u),v=(M,z,j)=>Lf(M,c,u,!0)?1:Math.max(z,z*n,j,j*n),w=(M,z,j)=>Lf(M,c,u,!0)?-1:Math.min(z,z*n,j,j*n),T=v(0,d,m),x=v(Un,f,y),C=w(Mn,d,m),k=w(Mn+Un,f,y);i=(T-C)/2,s=(x-k)/2,r=-(T+C)/2,a=-(x+k)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:a}}class kd extends Gl{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=u=>+i[u];if(Te(i[t])){const{key:u="value"}=this._parsing;r=d=>+ic(i[d],u)}let a,c;for(a=t,c=t+n;a<c;++a)s._parsed[a]=r(a)}}_getRotation(){return bo(this.options.rotation-90)}_getCircumference(){return bo(this.options.circumference)}_getRotationExtents(){let t=gn,n=-gn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),a=s._getCircumference();t=Math.min(t,r),n=Math.max(n,r+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,r=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),u=Math.min(Htt(this.options.cutout,c),1),d=this._getRingWeight(this.index),{circumference:f,rotation:m}=this._getRotationExtents(),{ratioX:y,ratioY:v,offsetX:w,offsetY:T}=jnt(m,f,u),x=(i.width-a)/y,C=(i.height-a)/v,k=Math.max(Math.min(x,C)/2,0),M=Pj(this.options.radius,k),z=Math.max(M*u,0),j=(M-z)/this._getVisibleDatasetWeightTotal();this.offsetX=w*M,this.offsetY=T*M,s.total=this.calculateTotal(),this.outerRadius=M-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*d,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/gn)}updateElements(t,n,i,s){const r=s==="reset",a=this.chart,c=a.chartArea,d=a.options.animation,f=(c.left+c.right)/2,m=(c.top+c.bottom)/2,y=r&&d.animateScale,v=y?0:this.innerRadius,w=y?0:this.outerRadius,{sharedOptions:T,includeOptions:x}=this._getSharedOptions(n,s);let C=this._getRotation(),k;for(k=0;k<n;++k)C+=this._circumference(k,r);for(k=n;k<n+i;++k){const M=this._circumference(k,r),z=t[k],j={x:f+this.offsetX,y:m+this.offsetY,startAngle:C,endAngle:C+M,circumference:M,outerRadius:w,innerRadius:v};x&&(j.options=T||this.resolveDataElementOptions(k,z.active?"active":s)),C+=M,this.updateElement(z,k,j,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,s;for(s=0;s<n.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?gn*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Gx(n._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const i=this.chart;let s,r,a,c,u;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),t=a.data,c=a.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)u=c.resolveDataElementOptions(s),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,s=t.length;i<s;++i){const r=this.resolveDataElementOptions(i);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(ce(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}xt(kd,"id","doughnut"),xt(kd,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),xt(kd,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),xt(kd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return n.labels.map((r,a)=>{const u=t.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:s,lineWidth:u.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class Ug extends Gl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,a=this.chart._animationsDisabled;let{start:c,count:u}=uet(n,s,a);this._drawStart=c,this._drawCount=u,het(n)&&(c=0,u=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:d},t),this.updateElements(s,c,u,t)}updateElements(t,n,i,s){const r=s==="reset",{iScale:a,vScale:c,_stacked:u,_dataset:d}=this._cachedMeta,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(n,s),y=a.axis,v=c.axis,{spanGaps:w,segment:T}=this.options,x=Of(w)?w:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||r||s==="none",k=n+i,M=t.length;let z=n>0&&this.getParsed(n-1);for(let j=0;j<M;++j){const $=t[j],O=C?$:{};if(j<n||j>=k){O.skip=!0;continue}const D=this.getParsed(j),N=ke(D[v]),L=O[y]=a.getPixelForValue(D[y],j),F=O[v]=r||N?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,D,u):D[v],j);O.skip=isNaN(L)||isNaN(F)||N,O.stop=j>0&&Math.abs(D[y]-z[y])>x,T&&(O.parsed=D,O.raw=d.data[j]),m&&(O.options=f||this.resolveDataElementOptions(j,$.active?"active":s)),C||this.updateElement($,j,O,s),z=D}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}xt(Ug,"id","line"),xt(Ug,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),xt(Ug,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class rE extends kd{}xt(rE,"id","pie"),xt(rE,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Il(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class eS{constructor(t){xt(this,"options");this.options=t||{}}static override(t){Object.assign(eS.prototype,t)}init(){}formats(){return Il()}parse(){return Il()}format(){return Il()}add(){return Il()}diff(){return Il()}startOf(){return Il()}endOf(){return Il()}}var Unt={_date:eS};function Fnt(e,t,n,i){const{controller:s,data:r,_sorted:a}=e,c=s._cachedMeta.iScale,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&a&&r.length){const d=c._reversePixels?set:Hl;if(i){if(s._sharedOptions){const f=r[0],m=typeof f.getRange=="function"&&f.getRange(t);if(m){const y=d(r,t,n-m),v=d(r,t,n+m);return{lo:y.lo,hi:v.hi}}}}else{const f=d(r,t,n);if(u){const{vScale:m}=s._cachedMeta,{_parsed:y}=e,v=y.slice(0,f.lo+1).reverse().findIndex(T=>!ke(T[m.axis]));f.lo-=Math.max(0,v);const w=y.slice(f.hi).findIndex(T=>!ke(T[m.axis]));f.hi+=Math.max(0,w)}return f}}return{lo:0,hi:r.length-1}}function O_(e,t,n,i,s){const r=e.getSortedVisibleDatasetMetas(),a=n[t];for(let c=0,u=r.length;c<u;++c){const{index:d,data:f}=r[c],{lo:m,hi:y}=Fnt(r[c],t,a,s);for(let v=m;v<=y;++v){const w=f[v];w.skip||i(w,d,v)}}}function Bnt(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,a=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function Mb(e,t,n,i,s){const r=[];return!s&&!e.isPointInArea(t)||O_(e,n,t,function(c,u,d){!s&&!Vf(c,e.chartArea,0)||c.inRange(t.x,t.y,i)&&r.push({element:c,datasetIndex:u,index:d})},!0),r}function znt(e,t,n,i){let s=[];function r(a,c,u){const{startAngle:d,endAngle:f}=a.getProps(["startAngle","endAngle"],i),{angle:m}=Vj(a,{x:t.x,y:t.y});Lf(m,d,f)&&s.push({element:a,datasetIndex:c,index:u})}return O_(e,n,t,r),s}function Hnt(e,t,n,i,s,r){let a=[];const c=Bnt(n);let u=Number.POSITIVE_INFINITY;function d(f,m,y){const v=f.inRange(t.x,t.y,s);if(i&&!v)return;const w=f.getCenterPoint(s);if(!(!!r||e.isPointInArea(w))&&!v)return;const x=c(t,w);x<u?(a=[{element:f,datasetIndex:m,index:y}],u=x):x===u&&a.push({element:f,datasetIndex:m,index:y})}return O_(e,n,t,d),a}function Nb(e,t,n,i,s,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!i?znt(e,t,n,s):Hnt(e,t,n,i,s,r)}function dN(e,t,n,i,s){const r=[],a=n==="x"?"inXRange":"inYRange";let c=!1;return O_(e,n,t,(u,d,f)=>{u[a]&&u[a](t[n],s)&&(r.push({element:u,datasetIndex:d,index:f}),c=c||u.inRange(t.x,t.y,s))}),i&&!c?[]:r}var qnt={modes:{index(e,t,n,i){const s=Pl(t,e),r=n.axis||"x",a=n.includeInvisible||!1,c=n.intersect?Mb(e,s,r,i,a):Nb(e,s,r,!1,i,a),u=[];return c.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const f=c[0].index,m=d.data[f];m&&!m.skip&&u.push({element:m,datasetIndex:d.index,index:f})}),u):[]},dataset(e,t,n,i){const s=Pl(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;let c=n.intersect?Mb(e,s,r,i,a):Nb(e,s,r,!1,i,a);if(c.length>0){const u=c[0].datasetIndex,d=e.getDatasetMeta(u).data;c=[];for(let f=0;f<d.length;++f)c.push({element:d[f],datasetIndex:u,index:f})}return c},point(e,t,n,i){const s=Pl(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;return Mb(e,s,r,i,a)},nearest(e,t,n,i){const s=Pl(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;return Nb(e,s,r,n.intersect,i,a)},x(e,t,n,i){const s=Pl(t,e);return dN(e,s,"x",n.intersect,i)},y(e,t,n,i){const s=Pl(t,e);return dN(e,s,"y",n.intersect,i)}}};const i4=["left","top","right","bottom"];function yd(e,t){return e.filter(n=>n.pos===t)}function fN(e,t){return e.filter(n=>i4.indexOf(n.pos)===-1&&n.box.axis===t)}function _d(e,t){return e.sort((n,i)=>{const s=t?i:n,r=t?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function $nt(e){const t=[];let n,i,s,r,a,c;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],{position:r,options:{stack:a,stackWeight:c=1}}=s,t.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&r+a,stackWeight:c});return t}function Gnt(e){const t={};for(const n of e){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!i4.includes(s))continue;const a=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return t}function Wnt(e,t){const n=Gnt(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,a,c;for(r=0,a=e.length;r<a;++r){c=e[r];const{fullSize:u}=c.box,d=n[c.stack],f=d&&c.stackWeight/d.weight;c.horizontal?(c.width=f?f*i:u&&t.availableWidth,c.height=s):(c.width=i,c.height=f?f*s:u&&t.availableHeight)}return n}function Knt(e){const t=$nt(e),n=_d(t.filter(d=>d.box.fullSize),!0),i=_d(yd(t,"left"),!0),s=_d(yd(t,"right")),r=_d(yd(t,"top"),!0),a=_d(yd(t,"bottom")),c=fN(t,"x"),u=fN(t,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(u).concat(a).concat(c),chartArea:yd(t,"chartArea"),vertical:i.concat(s).concat(u),horizontal:r.concat(a).concat(c)}}function pN(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function s4(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Ynt(e,t,n,i){const{pos:s,box:r}=n,a=e.maxPadding;if(!Te(s)){n.size&&(e[s]-=n.size);const m=i[n.stack]||{size:0,count:1};m.size=Math.max(m.size,n.horizontal?r.height:r.width),n.size=m.size/m.count,e[s]+=n.size}r.getPadding&&s4(a,r.getPadding());const c=Math.max(0,t.outerWidth-pN(a,e,"left","right")),u=Math.max(0,t.outerHeight-pN(a,e,"top","bottom")),d=c!==e.w,f=u!==e.h;return e.w=c,e.h=u,n.horizontal?{same:d,other:f}:{same:f,other:d}}function Qnt(e){const t=e.maxPadding;function n(i){const s=Math.max(t[i]-e[i],0);return e[i]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Xnt(e,t){const n=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{r[a]=Math.max(t[a],n[a])}),r}return i(e?["left","right"]:["top","bottom"])}function Pd(e,t,n,i){const s=[];let r,a,c,u,d,f;for(r=0,a=e.length,d=0;r<a;++r){c=e[r],u=c.box,u.update(c.width||t.w,c.height||t.h,Xnt(c.horizontal,t));const{same:m,other:y}=Ynt(t,n,c,i);d|=m&&s.length,f=f||y,u.fullSize||s.push(c)}return d&&Pd(s,t,n,i)||f}function cg(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function mN(e,t,n,i){const s=n.padding;let{x:r,y:a}=t;for(const c of e){const u=c.box,d=i[c.stack]||{placed:0,weight:1},f=c.stackWeight/d.weight||1;if(c.horizontal){const m=t.w*f,y=d.size||u.height;Pf(d.start)&&(a=d.start),u.fullSize?cg(u,s.left,a,n.outerWidth-s.right-s.left,y):cg(u,t.left+d.placed,a,m,y),d.start=a,d.placed+=m,a=u.bottom}else{const m=t.h*f,y=d.size||u.width;Pf(d.start)&&(r=d.start),u.fullSize?cg(u,r,s.top,y,n.outerHeight-s.bottom-s.top):cg(u,r,t.top+d.placed,y,m),d.start=r,d.placed+=m,r=u.right}}t.x=r,t.y=a}var Ta={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=er(e.options.layout.padding),r=Math.max(t-s.width,0),a=Math.max(n-s.height,0),c=Knt(e.boxes),u=c.vertical,d=c.horizontal;Ve(e.boxes,T=>{typeof T.beforeLayout=="function"&&T.beforeLayout()});const f=u.reduce((T,x)=>x.box.options&&x.box.options.display===!1?T:T+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/f,hBoxMaxHeight:a/2}),y=Object.assign({},s);s4(y,er(i));const v=Object.assign({maxPadding:y,w:r,h:a,x:s.left,y:s.top},s),w=Wnt(u.concat(d),m);Pd(c.fullSize,v,m,w),Pd(u,v,m,w),Pd(d,v,m,w)&&Pd(u,v,m,w),Qnt(v),mN(c.leftAndTop,v,m,w),v.x+=v.w,v.y+=v.h,mN(c.rightAndBottom,v,m,w),e.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Ve(c.chartArea,T=>{const x=T.box;Object.assign(x,e.chartArea),x.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class r4{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,s){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(t){return!0}updateConfig(t){}}class Znt extends r4{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Fg="$chartjs",Jnt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gN=e=>e===null||e==="";function tit(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[Fg]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",gN(s)){const r=JM(e,"width");r!==void 0&&(e.width=r)}if(gN(i))if(e.style.height==="")e.height=e.width/(t||2);else{const r=JM(e,"height");r!==void 0&&(e.height=r)}return e}const o4=ent?{passive:!0}:!1;function eit(e,t,n){e&&e.addEventListener(t,n,o4)}function nit(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,o4)}function iit(e,t){const n=Jnt[e.type]||e.type,{x:i,y:s}=Pl(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:s!==void 0?s:null}}function zy(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function sit(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let a=!1;for(const c of r)a=a||zy(c.addedNodes,i),a=a&&!zy(c.removedNodes,i);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function rit(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let a=!1;for(const c of r)a=a||zy(c.removedNodes,i),a=a&&!zy(c.addedNodes,i);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const jf=new Map;let yN=0;function a4(){const e=window.devicePixelRatio;e!==yN&&(yN=e,jf.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function oit(e,t){jf.size||window.addEventListener("resize",a4),jf.set(e,t)}function ait(e){jf.delete(e),jf.size||window.removeEventListener("resize",a4)}function lit(e,t,n){const i=e.canvas,s=i&&tS(i);if(!s)return;const r=Bj((c,u)=>{const d=s.clientWidth;n(c,u),d<s.clientWidth&&n()},window),a=new ResizeObserver(c=>{const u=c[0],d=u.contentRect.width,f=u.contentRect.height;d===0&&f===0||r(d,f)});return a.observe(s),oit(e,r),a}function kb(e,t,n){n&&n.disconnect(),t==="resize"&&ait(e)}function cit(e,t,n){const i=e.canvas,s=Bj(r=>{e.ctx!==null&&n(iit(r,e))},e);return eit(i,t,s),s}class uit extends r4{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(tit(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[Fg])return!1;const i=n[Fg].initial;["height","width"].forEach(r=>{const a=i[r];ke(a)?n.removeAttribute(r):n.setAttribute(r,a)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Fg],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),a={attach:sit,detach:rit,resize:lit}[n]||cit;s[n]=a(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),s=i[n];if(!s)return;({attach:kb,detach:kb,resize:kb}[n]||nit)(t,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,s){return tnt(t,n,i,s)}isAttached(t){const n=t&&tS(t);return!!(n&&n.isConnected)}}function hit(e){return!Jx()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Znt:uit}var _g;let Xa=(_g=class{constructor(){xt(this,"x");xt(this,"y");xt(this,"active",!1);xt(this,"options");xt(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return Of(this.x)&&Of(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},xt(_g,"defaults",{}),xt(_g,"defaultRoutes"),_g);function dit(e,t){const n=e.options.ticks,i=fit(e),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?mit(t):[],a=r.length,c=r[0],u=r[a-1],d=[];if(a>s)return git(t,d,r,a/s),d;const f=pit(r,t,s);if(a>0){let m,y;const v=a>1?Math.round((u-c)/(a-1)):null;for(ug(t,d,f,ke(v)?0:c-v,c),m=0,y=a-1;m<y;m++)ug(t,d,f,r[m],r[m+1]);return ug(t,d,f,u,ke(v)?t.length:u+v),d}return ug(t,d,f),d}function fit(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}function pit(e,t,n){const i=yit(e),s=t.length/n;if(!i)return Math.max(s,1);const r=Xtt(i);for(let a=0,c=r.length-1;a<c;a++){const u=r[a];if(u>s)return u}return Math.max(s,1)}function mit(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function git(e,t,n,i){let s=0,r=n[0],a;for(i=Math.ceil(i),a=0;a<e.length;a++)a===r&&(t.push(e[a]),s++,r=n[s*i])}function ug(e,t,n,i,s){const r=ce(i,0),a=Math.min(ce(s,e.length),e.length);let c=0,u,d,f;for(n=Math.ceil(n),s&&(u=s-i,n=u/Math.floor(u/n)),f=r;f<0;)c++,f=Math.round(r+c*n);for(d=Math.max(r,0);d<a;d++)d===f&&(t.push(e[d]),c++,f=Math.round(r+c*n))}function yit(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const _it=e=>e==="left"?"right":e==="right"?"left":e,_N=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,vN=(e,t)=>Math.min(t||e,e);function bN(e,t){const n=[],i=e.length/t,s=e.length;let r=0;for(;r<s;r+=i)n.push(e[Math.floor(r)]);return n}function vit(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),r=e._startPixel,a=e._endPixel,c=1e-6;let u=e.getPixelForTick(s),d;if(!(n&&(i===1?d=Math.max(u-r,a-u):t===0?d=(e.getPixelForTick(1)-u)/2:d=(u-e.getPixelForTick(s-1))/2,u+=s<t?d:-d,u<r-c||u>a+c)))return u}function bit(e,t){Ve(e,n=>{const i=n.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function vd(e){return e.drawTicks?e.tickLength:0}function wN(e,t){if(!e.display)return 0;const n=$i(e.font,t),i=er(e.padding);return(Jn(e.text)?e.text.length:1)*n.lineHeight+i.height}function wit(e,t){return fc(e,{scale:t,type:"scale"})}function Eit(e,t,n){return fc(e,{tick:n,index:t,type:"tick"})}function Tit(e,t,n){let i=zj(e);return(n&&t!=="right"||!n&&t==="right")&&(i=_it(i)),i}function xit(e,t,n,i){const{top:s,left:r,bottom:a,right:c,chart:u}=e,{chartArea:d,scales:f}=u;let m=0,y,v,w;const T=a-s,x=c-r;if(e.isHorizontal()){if(v=os(i,r,c),Te(n)){const C=Object.keys(n)[0],k=n[C];w=f[C].getPixelForValue(k)+T-t}else n==="center"?w=(d.bottom+d.top)/2+T-t:w=_N(e,n,t);y=c-r}else{if(Te(n)){const C=Object.keys(n)[0],k=n[C];v=f[C].getPixelForValue(k)-x+t}else n==="center"?v=(d.left+d.right)/2-x+t:v=_N(e,n,t);w=os(i,a,s),m=n==="left"?-Un:Un}return{titleX:v,titleY:w,maxWidth:y,rotation:m}}class rh extends Xa{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return t=br(t,Number.POSITIVE_INFINITY),n=br(n,Number.NEGATIVE_INFINITY),i=br(i,Number.POSITIVE_INFINITY),s=br(s,Number.NEGATIVE_INFINITY),{min:br(t,i),max:br(n,s),minDefined:Os(t),maxDefined:Os(n)}}getMinMax(t){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),a;if(s&&r)return{min:n,max:i};const c=this.getMatchingVisibleMetas();for(let u=0,d=c.length;u<d;++u)a=c[u].controller.getMinMax(this,t),s||(n=Math.min(n,a.min)),r||(i=Math.max(i,a.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:br(n,br(i,n)),max:br(i,br(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){en(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:s,grace:r,ticks:a}=this.options,c=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Net(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?bN(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=dit(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){en(this.options.afterUpdate,[this])}beforeSetDimensions(){en(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){en(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),en(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){en(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=en(n.callback,[r.value,i,t],this)}afterTickToLabelConversion(){en(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){en(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=vN(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let a=s,c,u,d;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const f=this._getLabelSizes(),m=f.widest.width,y=f.highest.height,v=Ei(this.chart.width-m,0,this.maxWidth);c=t.offset?this.maxWidth/i:v/(i-1),m+6>c&&(c=v/(i-(t.offset?.5:1)),u=this.maxHeight-vd(t.grid)-n.padding-wN(t.title,this.chart.options.font),d=Math.sqrt(m*m+y*y),a=eet(Math.min(Math.asin(Ei((f.highest.height+6)/c,-1,1)),Math.asin(Ei(u/d,-1,1))-Math.asin(Ei(y/d,-1,1)))),a=Math.max(s,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){en(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){en(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,a=this._isVisible(),c=this.isHorizontal();if(a){const u=wN(s,n.options.font);if(c?(t.width=this.maxWidth,t.height=vd(r)+u):(t.height=this.maxHeight,t.width=vd(r)+u),i.display&&this.ticks.length){const{first:d,last:f,widest:m,highest:y}=this._getLabelSizes(),v=i.padding*2,w=bo(this.labelRotation),T=Math.cos(w),x=Math.sin(w);if(c){const C=i.mirror?0:x*m.width+T*y.height;t.height=Math.min(this.maxHeight,t.height+C+v)}else{const C=i.mirror?0:T*m.width+x*y.height;t.width=Math.min(this.maxWidth,t.width+C+v)}this._calculatePadding(d,f,x,T)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,s){const{ticks:{align:r,padding:a},position:c}=this.options,u=this.labelRotation!==0,d=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,v=0;u?d?(y=s*t.width,v=i*n.height):(y=i*t.height,v=s*n.width):r==="start"?v=n.width:r==="end"?y=t.width:r!=="inner"&&(y=t.width/2,v=n.width/2),this.paddingLeft=Math.max((y-f+a)*this.width/(this.width-f),0),this.paddingRight=Math.max((v-m+a)*this.width/(this.width-m),0)}else{let f=n.height/2,m=t.height/2;r==="start"?(f=0,m=t.height):r==="end"&&(f=n.height,m=0),this.paddingTop=f+a,this.paddingBottom=m+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){en(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)ke(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=bN(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:s,_longestTextCache:r}=this,a=[],c=[],u=Math.floor(n/vN(n,i));let d=0,f=0,m,y,v,w,T,x,C,k,M,z,j;for(m=0;m<n;m+=u){if(w=t[m].label,T=this._resolveTickFontOptions(m),s.font=x=T.string,C=r[x]=r[x]||{data:{},gc:[]},k=T.lineHeight,M=z=0,!ke(w)&&!Jn(w))M=KM(s,C.data,C.gc,M,w),z=k;else if(Jn(w))for(y=0,v=w.length;y<v;++y)j=w[y],!ke(j)&&!Jn(j)&&(M=KM(s,C.data,C.gc,M,j),z+=k);a.push(M),c.push(z),d=Math.max(M,d),f=Math.max(z,f)}bit(r,n);const $=a.indexOf(d),O=c.indexOf(f),D=N=>({width:a[N]||0,height:c[N]||0});return{first:D(0),last:D(n-1),widest:D($),highest:D(O),widths:a,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return iet(this._alignToPixels?Rl(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=Eit(this.getContext(),t,i))}return this.$context||(this.$context=wit(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=bo(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),a=t.autoSkipPadding||0,c=r?r.widest.width+a:0,u=r?r.highest.height+a:0;return this.isHorizontal()?u*i>c*s?c/i:u/s:u*s<c*i?u/i:c/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:a,border:c}=s,u=r.offset,d=this.isHorizontal(),m=this.ticks.length+(u?1:0),y=vd(r),v=[],w=c.setContext(this.getContext()),T=w.display?w.width:0,x=T/2,C=function(K){return Rl(i,K,T)};let k,M,z,j,$,O,D,N,L,F,H,B;if(a==="top")k=C(this.bottom),O=this.bottom-y,N=k-x,F=C(t.top)+x,B=t.bottom;else if(a==="bottom")k=C(this.top),F=t.top,B=C(t.bottom)-x,O=k+x,N=this.top+y;else if(a==="left")k=C(this.right),$=this.right-y,D=k-x,L=C(t.left)+x,H=t.right;else if(a==="right")k=C(this.left),L=t.left,H=C(t.right)-x,$=k+x,D=this.left+y;else if(n==="x"){if(a==="center")k=C((t.top+t.bottom)/2+.5);else if(Te(a)){const K=Object.keys(a)[0],tt=a[K];k=C(this.chart.scales[K].getPixelForValue(tt))}F=t.top,B=t.bottom,O=k+x,N=O+y}else if(n==="y"){if(a==="center")k=C((t.left+t.right)/2);else if(Te(a)){const K=Object.keys(a)[0],tt=a[K];k=C(this.chart.scales[K].getPixelForValue(tt))}$=k-x,D=$-y,L=t.left,H=t.right}const _t=ce(s.ticks.maxTicksLimit,m),ft=Math.max(1,Math.ceil(m/_t));for(M=0;M<m;M+=ft){const K=this.getContext(M),tt=r.setContext(K),dt=c.setContext(K),yt=tt.lineWidth,U=tt.color,J=dt.dash||[],ot=dt.dashOffset,st=tt.tickWidth,pt=tt.tickColor,St=tt.tickBorderDash||[],gt=tt.tickBorderDashOffset;z=vit(this,M,u),z!==void 0&&(j=Rl(i,z,yt),d?$=D=L=H=j:O=N=F=B=j,v.push({tx1:$,ty1:O,tx2:D,ty2:N,x1:L,y1:F,x2:H,y2:B,width:yt,color:U,borderDash:J,borderDashOffset:ot,tickWidth:st,tickColor:pt,tickBorderDash:St,tickBorderDashOffset:gt}))}return this._ticksLength=m,this._borderValue=k,v}_computeLabelItems(t){const n=this.axis,i=this.options,{position:s,ticks:r}=i,a=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:d,padding:f,mirror:m}=r,y=vd(i.grid),v=y+f,w=m?-f:v,T=-bo(this.labelRotation),x=[];let C,k,M,z,j,$,O,D,N,L,F,H,B="middle";if(s==="top")$=this.bottom-w,O=this._getXAxisLabelAlignment();else if(s==="bottom")$=this.top+w,O=this._getXAxisLabelAlignment();else if(s==="left"){const ft=this._getYAxisLabelAlignment(y);O=ft.textAlign,j=ft.x}else if(s==="right"){const ft=this._getYAxisLabelAlignment(y);O=ft.textAlign,j=ft.x}else if(n==="x"){if(s==="center")$=(t.top+t.bottom)/2+v;else if(Te(s)){const ft=Object.keys(s)[0],K=s[ft];$=this.chart.scales[ft].getPixelForValue(K)+v}O=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")j=(t.left+t.right)/2-v;else if(Te(s)){const ft=Object.keys(s)[0],K=s[ft];j=this.chart.scales[ft].getPixelForValue(K)}O=this._getYAxisLabelAlignment(y).textAlign}n==="y"&&(u==="start"?B="top":u==="end"&&(B="bottom"));const _t=this._getLabelSizes();for(C=0,k=c.length;C<k;++C){M=c[C],z=M.label;const ft=r.setContext(this.getContext(C));D=this.getPixelForTick(C)+r.labelOffset,N=this._resolveTickFontOptions(C),L=N.lineHeight,F=Jn(z)?z.length:1;const K=F/2,tt=ft.color,dt=ft.textStrokeColor,yt=ft.textStrokeWidth;let U=O;a?(j=D,O==="inner"&&(C===k-1?U=this.options.reverse?"left":"right":C===0?U=this.options.reverse?"right":"left":U="center"),s==="top"?d==="near"||T!==0?H=-F*L+L/2:d==="center"?H=-_t.highest.height/2-K*L+L:H=-_t.highest.height+L/2:d==="near"||T!==0?H=L/2:d==="center"?H=_t.highest.height/2-K*L:H=_t.highest.height-F*L,m&&(H*=-1),T!==0&&!ft.showLabelBackdrop&&(j+=L/2*Math.sin(T))):($=D,H=(1-F)*L/2);let J;if(ft.showLabelBackdrop){const ot=er(ft.backdropPadding),st=_t.heights[C],pt=_t.widths[C];let St=H-ot.top,gt=0-ot.left;switch(B){case"middle":St-=st/2;break;case"bottom":St-=st;break}switch(O){case"center":gt-=pt/2;break;case"right":gt-=pt;break;case"inner":C===k-1?gt-=pt:C>0&&(gt-=pt/2);break}J={left:gt,top:St,width:pt+ot.width,height:st+ot.height,color:ft.backdropColor}}x.push({label:z,font:N,textOffset:H,options:{rotation:T,color:tt,strokeColor:dt,strokeWidth:yt,textAlign:U,textBaseline:B,translation:[j,$],backdrop:J}})}return x}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-bo(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,a=this._getLabelSizes(),c=t+r,u=a.widest.width;let d,f;return n==="left"?s?(f=this.right+r,i==="near"?d="left":i==="center"?(d="center",f+=u/2):(d="right",f+=u)):(f=this.right-c,i==="near"?d="right":i==="center"?(d="center",f-=u/2):(d="left",f=this.left)):n==="right"?s?(f=this.left+r,i==="near"?d="right":i==="center"?(d="center",f-=u/2):(d="left",f-=u)):(f=this.left+c,i==="near"?d="left":i==="center"?(d="center",f+=u/2):(d="right",f=this.right)):d="right",{textAlign:d,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:s,width:r,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,s,r,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,a;const c=(u,d,f)=>{!f.width||!f.color||(i.save(),i.lineWidth=f.width,i.strokeStyle=f.color,i.setLineDash(f.borderDash||[]),i.lineDashOffset=f.borderDashOffset,i.beginPath(),i.moveTo(u.x,u.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(n.display)for(r=0,a=s.length;r<a;++r){const u=s[r];n.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),a=i.display?r.width:0;if(!a)return;const c=s.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let d,f,m,y;this.isHorizontal()?(d=Rl(t,this.left,a)-a/2,f=Rl(t,this.right,c)+c/2,m=y=u):(m=Rl(t,this.top,a)-a/2,y=Rl(t,this.bottom,c)+c/2,d=f=u),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(d,m),n.lineTo(f,y),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Wx(i,s);const r=this.getLabelItems(t);for(const a of r){const c=a.options,u=a.font,d=a.label,f=a.textOffset;Uy(i,d,0,f,u,c)}s&&Kx(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=$i(i.font),a=er(i.padding),c=i.align;let u=r.lineHeight/2;n==="bottom"||n==="center"||Te(n)?(u+=a.bottom,Jn(i.text)&&(u+=r.lineHeight*(i.text.length-1))):u+=a.top;const{titleX:d,titleY:f,maxWidth:m,rotation:y}=xit(this,u,n,c);Uy(t,i.text,0,0,r,{color:i.color,maxWidth:m,rotation:y,textAlign:Tit(c,n,s),textBaseline:"middle",translation:[d,f]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=ce(t.grid&&t.grid.z,-1),s=ce(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==rh.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,a;for(r=0,a=n.length;r<a;++r){const c=n[r];c[i]===this.id&&(!t||c.type===t)&&s.push(c)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return $i(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class hg{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;Cit(n)&&(i=this.register(n));const s=this.items,r=t.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,Sit(t,a,i),this.override&&xn.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,s=this.scope;i in n&&delete n[i],s&&i in xn[s]&&(delete xn[s][i],this.override&&delete sc[i])}}function Sit(e,t,n){const i=kf(Object.create(null),[n?xn.get(n):{},xn.get(t),e.defaults]);xn.set(t,i),e.defaultRoutes&&Ait(t,e.defaultRoutes),e.descriptors&&xn.describe(t,e.descriptors)}function Ait(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),r=[e].concat(i).join("."),a=t[n].split("."),c=a.pop(),u=a.join(".");xn.route(r,s,u,c)})}function Cit(e){return"id"in e&&"defaults"in e}class Rit{constructor(){this.controllers=new hg(Gl,"datasets",!0),this.elements=new hg(Xa,"elements"),this.plugins=new hg(Object,"plugins"),this.scales=new hg(rh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):Ve(s,a=>{const c=i||this._getRegistryForType(a);this._exec(t,c,a)})})}_exec(t,n,i){const s=Hx(t);en(i["before"+s],[],i),n[t](i),en(i["after"+s],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var Er=new Rit;class Iit{constructor(){this._init=[]}notify(t,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),a=this._notify(r,t,n,i);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,i,s){s=s||{};for(const r of t){const a=r.plugin,c=a[i],u=[n,s,r.options];if(en(c,u,a)===!1&&s.cancelable)return!1}return!0}invalidate(){ke(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,s=ce(i.options&&i.options.plugins,{}),r=Dit(i);return s===!1&&!n?[]:Nit(t,r,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,s=(r,a)=>r.filter(c=>!a.some(u=>c.plugin.id===u.plugin.id));this._notify(s(n,i),t,"stop"),this._notify(s(i,n),t,"start")}}function Dit(e){const t={},n=[],i=Object.keys(Er.plugins.items);for(let r=0;r<i.length;r++)n.push(Er.getPlugin(i[r]));const s=e.plugins||[];for(let r=0;r<s.length;r++){const a=s[r];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function Mit(e,t){return!t&&e===!1?null:e===!0?{}:e}function Nit(e,{plugins:t,localIds:n},i,s){const r=[],a=e.getContext();for(const c of t){const u=c.id,d=Mit(i[u],s);d!==null&&r.push({plugin:c,options:kit(e.config,{plugin:c,local:n[u]},d,a)})}return r}function kit(e,{plugin:t,local:n},i,s){const r=e.pluginScopeKeys(t),a=e.getOptionScopes(i,r);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function oE(e,t){const n=xn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Pit(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Oit(e,t){return e===t?"_index_":"_value_"}function EN(e){if(e==="x"||e==="y"||e==="r")return e}function Lit(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function aE(e,...t){if(EN(e))return e;for(const n of t){const i=n.axis||Lit(n.position)||e.length>1&&EN(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function TN(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Vit(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return TN(e,"x",n[0])||TN(e,"y",n[0])}return{}}function jit(e,t){const n=sc[e.type]||{scales:{}},i=t.scales||{},s=oE(e.type,t),r=Object.create(null);return Object.keys(i).forEach(a=>{const c=i[a];if(!Te(c))return console.error(`Invalid scale configuration for scale: ${a}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=aE(a,c,Vit(a,e),xn.scales[c.type]),d=Oit(u,s),f=n.scales||{};r[a]=Zd(Object.create(null),[{axis:u},c,f[u],f[d]])}),e.data.datasets.forEach(a=>{const c=a.type||e.type,u=a.indexAxis||oE(c,t),f=(sc[c]||{}).scales||{};Object.keys(f).forEach(m=>{const y=Pit(m,u),v=a[y+"AxisID"]||y;r[v]=r[v]||Object.create(null),Zd(r[v],[{axis:y},i[v],f[m]])})}),Object.keys(r).forEach(a=>{const c=r[a];Zd(c,[xn.scales[c.type],xn.scale])}),r}function l4(e){const t=e.options||(e.options={});t.plugins=ce(t.plugins,{}),t.scales=jit(e,t)}function c4(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Uit(e){return e=e||{},e.data=c4(e.data),l4(e),e}const xN=new Map,u4=new Set;function dg(e,t){let n=xN.get(e);return n||(n=t(),xN.set(e,n),u4.add(n)),n}const bd=(e,t,n)=>{const i=ic(t,n);i!==void 0&&e.add(i)};class Fit{constructor(t){this._config=Uit(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=c4(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),l4(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return dg(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return dg(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return dg(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return dg(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let s=i.get(t);return(!s||n)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,n,i){const{options:s,type:r}=this,a=this._cachedScopes(t,i),c=a.get(n);if(c)return c;const u=new Set;n.forEach(f=>{t&&(u.add(t),f.forEach(m=>bd(u,t,m))),f.forEach(m=>bd(u,s,m)),f.forEach(m=>bd(u,sc[r]||{},m)),f.forEach(m=>bd(u,xn,m)),f.forEach(m=>bd(u,iE,m))});const d=Array.from(u);return d.length===0&&d.push(Object.create(null)),u4.has(n)&&a.set(n,d),d}chartOptionScopes(){const{options:t,type:n}=this;return[t,sc[n]||{},xn.datasets[n]||{},{type:n},xn,iE]}resolveNamedOptions(t,n,i,s=[""]){const r={$shared:!0},{resolver:a,subPrefixes:c}=SN(this._resolverCache,t,s);let u=a;if(zit(a,n)){r.$shared=!1,i=Ba(i)?i():i;const d=this.createResolver(t,i,c);u=Bu(a,i,d)}for(const d of n)r[d]=u[d];return r}createResolver(t,n,i=[""],s){const{resolver:r}=SN(this._resolverCache,t,i);return Te(n)?Bu(r,n,void 0,s):r}}function SN(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let r=i.get(s);return r||(r={resolver:Qx(t,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},i.set(s,r)),r}const Bit=e=>Te(e)&&Object.getOwnPropertyNames(e).some(t=>Ba(e[t]));function zit(e,t){const{isScriptable:n,isIndexable:i}=Gj(e);for(const s of t){const r=n(s),a=i(s),c=(a||r)&&e[s];if(r&&(Ba(c)||Bit(c))||a&&Jn(c))return!0}return!1}var Hit="4.4.8";const qit=["top","bottom","left","right","chartArea"];function AN(e,t){return e==="top"||e==="bottom"||qit.indexOf(e)===-1&&t==="x"}function CN(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function RN(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),en(n&&n.onComplete,[e],t)}function $it(e){const t=e.chart,n=t.options.animation;en(n&&n.onProgress,[e],t)}function h4(e){return Jx()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Bg={},IN=e=>{const t=h4(e);return Object.values(Bg).filter(n=>n.canvas===t).pop()};function Git(e,t,n){const i=Object.keys(e);for(const s of i){const r=+s;if(r>=t){const a=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=a)}}}function Wit(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}function fg(e,t,n){return e.options.clip?e[n]:t[n]}function Kit(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:fg(n,t,"left"),right:fg(n,t,"right"),top:fg(i,t,"top"),bottom:fg(i,t,"bottom")}:t}var ha;let _p=(ha=class{static register(...t){Er.add(...t),DN()}static unregister(...t){Er.remove(...t),DN()}constructor(t,n){const i=this.config=new Fit(n),s=h4(t),r=IN(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||hit(s)),this.platform.updateConfig(i);const c=this.platform.acquireContext(s,a.aspectRatio),u=c&&c.canvas,d=u&&u.height,f=u&&u.width;if(this.id=ztt(),this.ctx=c,this.canvas=u,this.width=f,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Iit,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=aet(m=>this.update(m),a.resizeDelay||0),this._dataChanges=[],Bg[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}ho.listen(this,"complete",RN),ho.listen(this,"progress",$it),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return ke(t)?n&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Er}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ZM(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return YM(this.canvas,this.ctx),this}stop(){return ho.stop(this),this}resize(t,n){ho.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,n,r),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,ZM(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),en(i.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ve(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{});let r=[];n&&(r=r.concat(Object.keys(n).map(a=>{const c=n[a],u=aE(a,c),d=u==="r",f=u==="x";return{options:c,dposition:d?"chartArea":f?"bottom":"left",dtype:d?"radialLinear":f?"category":"linear"}}))),Ve(r,a=>{const c=a.options,u=c.id,d=aE(u,c),f=ce(c.type,a.dtype);(c.position===void 0||AN(c.position,d)!==AN(a.dposition))&&(c.position=a.dposition),s[u]=!0;let m=null;if(u in i&&i[u].type===f)m=i[u];else{const y=Er.getScale(f);m=new y({id:u,type:f,ctx:this.ctx,chart:this}),i[m.id]=m}m.init(c,t)}),Ve(s,(a,c)=>{a||delete i[c]}),Ve(i,a=>{Ta.configure(this,a,a.options),Ta.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(CN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let a=this.getDatasetMeta(i);const c=r.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=r.indexAxis||oE(c,this.options),a.order=r.order||0,a.index=i,a.label=""+r.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const u=Er.getController(c),{datasetElementType:d,dataElementType:f}=xn.datasets[c];Object.assign(u,{dataElementType:Er.getElement(f),datasetElementType:d&&Er.getElement(d)}),a.controller=new u(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Ve(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,f=this.data.datasets.length;d<f;d++){const{controller:m}=this.getDatasetMeta(d),y=!s&&r.indexOf(m)===-1;m.buildOrUpdateElements(y),a=Math.max(+m.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||Ve(r,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(CN("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Ve(this.scales,t=>{Ta.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!UM(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const a=i==="_removeElements"?-r:r;Git(t,s,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(t.filter(a=>a[0]===r).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!UM(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ta.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ve(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Ba(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ho.has(this)?this.attached&&!ho.running(this)&&ho.start(this):(this.draw(),RN({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const a=n[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i=t._clip,s=!i.disabled,r=Kit(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&Wx(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),t.controller.draw(),s&&Kx(n),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Vf(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,s){const r=qnt.modes[n];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=fc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),a=r.controller._resolveAnimations(void 0,s);Pf(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(r,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ho.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),YM(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Bg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(r,a)=>{n.addEventListener(this,r,a),t[r]=a},s=(r,a,c)=>{r.offsetX=a,r.offsetY=c,this._eventHandler(r)};Ve(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(u,d)=>{n.addEventListener(this,u,d),t[u]=d},s=(u,d)=>{t[u]&&(n.removeEventListener(this,u,d),delete t[u])},r=(u,d)=>{this.canvas&&this.resize(u,d)};let a;const c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",r),i("detach",a)};a=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",c)},n.isAttached(this.canvas)?c():a()}unbindEvents(){Ve(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Ve(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const s=i?"set":"remove";let r,a,c,u;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),c=0,u=t.length;c<u;++c){a=t[c];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:r,index:a})=>{const c=this.getDatasetMeta(r);if(!c)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:c.data[a],index:a}});!Ly(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const s=this.options.hover,r=(u,d)=>u.filter(f=>!d.some(m=>f.datasetIndex===m.datasetIndex&&f.index===m.index)),a=r(n,t),c=i?t:r(t,n);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:s=[],options:r}=this,a=n,c=this._getActiveElements(t,s,i,a),u=Ktt(t),d=Wit(t,this._lastEvent,i,u);i&&(this._lastEvent=null,en(r.onHover,[t,c,this],this),u&&en(r.onClick,[t,c,this],this));const f=!Ly(c,s);return(f||n)&&(this._active=c,this._updateHoverStyles(c,s,n)),this._lastEvent=d,f}_getActiveElements(t,n,i,s){if(t.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},xt(ha,"defaults",xn),xt(ha,"instances",Bg),xt(ha,"overrides",sc),xt(ha,"registry",Er),xt(ha,"version",Hit),xt(ha,"getChart",IN),ha);function DN(){return Ve(_p.instances,e=>e._plugins.invalidate())}function Yit(e,t,n){const{startAngle:i,pixelMargin:s,x:r,y:a,outerRadius:c,innerRadius:u}=t;let d=s/c;e.beginPath(),e.arc(r,a,c,i-d,n+d),u>s?(d=s/u,e.arc(r,a,u,n+d,i-d,!0)):e.arc(r,a,s,n+Un,i-Un),e.closePath(),e.clip()}function Qit(e){return Yx(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Xit(e,t,n,i){const s=Qit(e.options.borderRadius),r=(n-t)/2,a=Math.min(r,i*t/2),c=u=>{const d=(n-Math.min(r,u))*i/2;return Ei(u,0,Math.min(r,d))};return{outerStart:c(s.outerStart),outerEnd:c(s.outerEnd),innerStart:Ei(s.innerStart,0,a),innerEnd:Ei(s.innerEnd,0,a)}}function ru(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function Hy(e,t,n,i,s,r){const{x:a,y:c,startAngle:u,pixelMargin:d,innerRadius:f}=t,m=Math.max(t.outerRadius+i+n-d,0),y=f>0?f+i+n+d:0;let v=0;const w=s-u;if(i){const ft=f>0?f-i:0,K=m>0?m-i:0,tt=(ft+K)/2,dt=tt!==0?w*tt/(tt+i):w;v=(w-dt)/2}const T=Math.max(.001,w*m-n/Mn)/m,x=(w-T)/2,C=u+x+v,k=s-x-v,{outerStart:M,outerEnd:z,innerStart:j,innerEnd:$}=Xit(t,y,m,k-C),O=m-M,D=m-z,N=C+M/O,L=k-z/D,F=y+j,H=y+$,B=C+j/F,_t=k-$/H;if(e.beginPath(),r){const ft=(N+L)/2;if(e.arc(a,c,m,N,ft),e.arc(a,c,m,ft,L),z>0){const yt=ru(D,L,a,c);e.arc(yt.x,yt.y,z,L,k+Un)}const K=ru(H,k,a,c);if(e.lineTo(K.x,K.y),$>0){const yt=ru(H,_t,a,c);e.arc(yt.x,yt.y,$,k+Un,_t+Math.PI)}const tt=(k-$/y+(C+j/y))/2;if(e.arc(a,c,y,k-$/y,tt,!0),e.arc(a,c,y,tt,C+j/y,!0),j>0){const yt=ru(F,B,a,c);e.arc(yt.x,yt.y,j,B+Math.PI,C-Un)}const dt=ru(O,C,a,c);if(e.lineTo(dt.x,dt.y),M>0){const yt=ru(O,N,a,c);e.arc(yt.x,yt.y,M,C-Un,N)}}else{e.moveTo(a,c);const ft=Math.cos(N)*m+a,K=Math.sin(N)*m+c;e.lineTo(ft,K);const tt=Math.cos(L)*m+a,dt=Math.sin(L)*m+c;e.lineTo(tt,dt)}e.closePath()}function Zit(e,t,n,i,s){const{fullCircles:r,startAngle:a,circumference:c}=t;let u=t.endAngle;if(r){Hy(e,t,n,i,u,s);for(let d=0;d<r;++d)e.fill();isNaN(c)||(u=a+(c%gn||gn))}return Hy(e,t,n,i,u,s),e.fill(),u}function Jit(e,t,n,i,s){const{fullCircles:r,startAngle:a,circumference:c,options:u}=t,{borderWidth:d,borderJoinStyle:f,borderDash:m,borderDashOffset:y}=u,v=u.borderAlign==="inner";if(!d)return;e.setLineDash(m||[]),e.lineDashOffset=y,v?(e.lineWidth=d*2,e.lineJoin=f||"round"):(e.lineWidth=d,e.lineJoin=f||"bevel");let w=t.endAngle;if(r){Hy(e,t,n,i,w,s);for(let T=0;T<r;++T)e.stroke();isNaN(c)||(w=a+(c%gn||gn))}v&&Yit(e,t,w),r||(Hy(e,t,n,i,w,s),e.stroke())}class vu extends Xa{constructor(n){super();xt(this,"circumference");xt(this,"endAngle");xt(this,"fullCircles");xt(this,"innerRadius");xt(this,"outerRadius");xt(this,"pixelMargin");xt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.getProps(["x","y"],s),{angle:a,distance:c}=Vj(r,{x:n,y:i}),{startAngle:u,endAngle:d,innerRadius:f,outerRadius:m,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),v=(this.options.spacing+this.options.borderWidth)/2,w=ce(y,d-u),T=Lf(a,u,d)&&u!==d,x=w>=gn||T,C=Ea(c,f+v,m+v);return x&&C}getCenterPoint(n){const{x:i,y:s,startAngle:r,endAngle:a,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:d,spacing:f}=this.options,m=(r+a)/2,y=(c+u+f+d)/2;return{x:i+Math.cos(m)*y,y:s+Math.sin(m)*y}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:s}=this,r=(i.offset||0)/4,a=(i.spacing||0)/2,c=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>gn?Math.floor(s/gn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const u=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(u)*r,Math.sin(u)*r);const d=1-Math.sin(Math.min(Mn,s||0)),f=r*d;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,Zit(n,this,f,a,c),Jit(n,this,f,a,c),n.restore()}}xt(vu,"id","arc"),xt(vu,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),xt(vu,"defaultRoutes",{backgroundColor:"backgroundColor"}),xt(vu,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function d4(e,t,n=t){e.lineCap=ce(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ce(n.borderDash,t.borderDash)),e.lineDashOffset=ce(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ce(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ce(n.borderWidth,t.borderWidth),e.strokeStyle=ce(n.borderColor,t.borderColor)}function tst(e,t,n){e.lineTo(n.x,n.y)}function est(e){return e.stepped?Eet:e.tension||e.cubicInterpolationMode==="monotone"?Tet:tst}function f4(e,t,n={}){const i=e.length,{start:s=0,end:r=i-1}=n,{start:a,end:c}=t,u=Math.max(s,a),d=Math.min(r,c),f=s<a&&r<a||s>c&&r>c;return{count:i,start:u,loop:t.loop,ilen:d<u&&!f?i+d-u:d-u}}function nst(e,t,n,i){const{points:s,options:r}=t,{count:a,start:c,loop:u,ilen:d}=f4(s,n,i),f=est(r);let{move:m=!0,reverse:y}=i||{},v,w,T;for(v=0;v<=d;++v)w=s[(c+(y?d-v:v))%a],!w.skip&&(m?(e.moveTo(w.x,w.y),m=!1):f(e,T,w,y,r.stepped),T=w);return u&&(w=s[(c+(y?d:0))%a],f(e,T,w,y,r.stepped)),!!u}function ist(e,t,n,i){const s=t.points,{count:r,start:a,ilen:c}=f4(s,n,i),{move:u=!0,reverse:d}=i||{};let f=0,m=0,y,v,w,T,x,C;const k=z=>(a+(d?c-z:z))%r,M=()=>{T!==x&&(e.lineTo(f,x),e.lineTo(f,T),e.lineTo(f,C))};for(u&&(v=s[k(0)],e.moveTo(v.x,v.y)),y=0;y<=c;++y){if(v=s[k(y)],v.skip)continue;const z=v.x,j=v.y,$=z|0;$===w?(j<T?T=j:j>x&&(x=j),f=(m*f+z)/++m):(M(),e.lineTo(z,j),w=$,m=0,T=x=j),C=j}M()}function lE(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?ist:nst}function sst(e){return e.stepped?nnt:e.tension||e.cubicInterpolationMode==="monotone"?int:Ol}function rst(e,t,n,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,i)&&s.closePath()),d4(e,t.options),e.stroke(s)}function ost(e,t,n,i){const{segments:s,options:r}=t,a=lE(t);for(const c of s)d4(e,r,c.style),e.beginPath(),a(e,t,c,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const ast=typeof Path2D=="function";function lst(e,t,n,i){ast&&!t.options.segment?rst(e,t,n,i):ost(e,t,n,i)}class Od extends Xa{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;Ket(this._points,i,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hnt(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,s=t[n],r=this.points,a=lnt(this,{property:n,start:s,end:s});if(!a.length)return;const c=[],u=sst(i);let d,f;for(d=0,f=a.length;d<f;++d){const{start:m,end:y}=a[d],v=r[m],w=r[y];if(v===w){c.push(v);continue}const T=Math.abs((s-v[n])/(w[n]-v[n])),x=u(v,w,T,i.stepped);x[n]=t[n],c.push(x)}return c.length===1?c[0]:c}pathSegment(t,n,i){return lE(this)(t,this,n,i)}path(t,n,i){const s=this.segments,r=lE(this);let a=this._loop;n=n||0,i=i||this.points.length-n;for(const c of s)a&=r(t,this,c,{start:n,end:n+i-1});return!!a}draw(t,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),lst(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}xt(Od,"id","line"),xt(Od,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),xt(Od,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),xt(Od,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function MN(e,t,n,i){const s=e.options,{[n]:r}=e.getProps([n],i);return Math.abs(t-r)<s.radius+s.hitRadius}class zg extends Xa{constructor(n){super();xt(this,"parsed");xt(this,"skip");xt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:a,y:c}=this.getProps(["x","y"],s);return Math.pow(n-a,2)+Math.pow(i-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return MN(this,n,"x",i)}inYRange(n,i){return MN(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!Vf(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,sE(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}xt(zg,"id","point"),xt(zg,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),xt(zg,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function p4(e,t){const{x:n,y:i,base:s,width:r,height:a}=e.getProps(["x","y","base","width","height"],t);let c,u,d,f,m;return e.horizontal?(m=a/2,c=Math.min(n,s),u=Math.max(n,s),d=i-m,f=i+m):(m=r/2,c=n-m,u=n+m,d=Math.min(i,s),f=Math.max(i,s)),{left:c,top:d,right:u,bottom:f}}function xa(e,t,n,i){return e?0:Ei(t,n,i)}function cst(e,t,n){const i=e.options.borderWidth,s=e.borderSkipped,r=$j(i);return{t:xa(s.top,r.top,0,n),r:xa(s.right,r.right,0,t),b:xa(s.bottom,r.bottom,0,n),l:xa(s.left,r.left,0,t)}}function ust(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=Au(s),a=Math.min(t,n),c=e.borderSkipped,u=i||Te(s);return{topLeft:xa(!u||c.top||c.left,r.topLeft,0,a),topRight:xa(!u||c.top||c.right,r.topRight,0,a),bottomLeft:xa(!u||c.bottom||c.left,r.bottomLeft,0,a),bottomRight:xa(!u||c.bottom||c.right,r.bottomRight,0,a)}}function hst(e){const t=p4(e),n=t.right-t.left,i=t.bottom-t.top,s=cst(e,n/2,i/2),r=ust(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Pb(e,t,n,i){const s=t===null,r=n===null,c=e&&!(s&&r)&&p4(e,i);return c&&(s||Ea(t,c.left,c.right))&&(r||Ea(n,c.top,c.bottom))}function dst(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function fst(e,t){e.rect(t.x,t.y,t.w,t.h)}function Ob(e,t,n={}){const i=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+i,y:e.y+s,w:e.w+r,h:e.h+a,radius:e.radius}}class Hg extends Xa{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:a}=hst(this),c=dst(a.radius)?Fy:fst;t.save(),(a.w!==r.w||a.h!==r.h)&&(t.beginPath(),c(t,Ob(a,n,r)),t.clip(),c(t,Ob(r,-n,a)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),c(t,Ob(r,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,i){return Pb(this,t,n,i)}inXRange(t,n){return Pb(this,t,null,n)}inYRange(t,n){return Pb(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}xt(Hg,"id","bar"),xt(Hg,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),xt(Hg,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const NN=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},pst=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class kN extends Xa{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=en(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=$i(i.font),r=s.size,a=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=NN(i,r);let d,f;n.font=s.string,this.isHorizontal()?(d=this.maxWidth,f=this._fitRows(a,r,c,u)+10):(f=this.maxHeight,d=this._fitCols(a,s,c,u)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(f,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,s){const{ctx:r,maxWidth:a,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],d=this.lineWidths=[0],f=s+c;let m=t;r.textAlign="left",r.textBaseline="middle";let y=-1,v=-f;return this.legendItems.forEach((w,T)=>{const x=i+n/2+r.measureText(w.text).width;(T===0||d[d.length-1]+x+2*c>a)&&(m+=f,d[d.length-(T>0?0:1)]=0,v+=f,y++),u[T]={left:0,top:v,row:y,width:x,height:s},d[d.length-1]+=x+c}),m}_fitCols(t,n,i,s){const{ctx:r,maxHeight:a,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],d=this.columnSizes=[],f=a-t;let m=c,y=0,v=0,w=0,T=0;return this.legendItems.forEach((x,C)=>{const{itemWidth:k,itemHeight:M}=mst(i,n,r,x,s);C>0&&v+M+2*c>f&&(m+=y+c,d.push({width:y,height:v}),w+=y+c,T++,y=v=0),u[C]={left:w,top:v,col:T,width:k,height:M},y=Math.max(y,k),v+=M+c}),m+=y,d.push({width:y,height:v}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,a=Cu(r,this.left,this.width);if(this.isHorizontal()){let c=0,u=os(i,this.left+s,this.right-this.lineWidths[c]);for(const d of n)c!==d.row&&(c=d.row,u=os(i,this.left+s,this.right-this.lineWidths[c])),d.top+=this.top+t+s,d.left=a.leftForLtr(a.x(u),d.width),u+=d.width+s}else{let c=0,u=os(i,this.top+t+s,this.bottom-this.columnSizes[c].height);for(const d of n)d.col!==c&&(c=d.col,u=os(i,this.top+t+s,this.bottom-this.columnSizes[c].height)),d.top=u,d.left+=this.left+s,d.left=a.leftForLtr(a.x(d.left),d.width),u+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Wx(t,this),this._draw(),Kx(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:a}=t,c=xn.color,u=Cu(t.rtl,this.left,this.width),d=$i(a.font),{padding:f}=a,m=d.size,y=m/2;let v;this.drawTitle(),s.textAlign=u.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:w,boxHeight:T,itemHeight:x}=NN(a,m),C=function($,O,D){if(isNaN(w)||w<=0||isNaN(T)||T<0)return;s.save();const N=ce(D.lineWidth,1);if(s.fillStyle=ce(D.fillStyle,c),s.lineCap=ce(D.lineCap,"butt"),s.lineDashOffset=ce(D.lineDashOffset,0),s.lineJoin=ce(D.lineJoin,"miter"),s.lineWidth=N,s.strokeStyle=ce(D.strokeStyle,c),s.setLineDash(ce(D.lineDash,[])),a.usePointStyle){const L={radius:T*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:N},F=u.xPlus($,w/2),H=O+y;qj(s,L,F,H,a.pointStyleWidth&&w)}else{const L=O+Math.max((m-T)/2,0),F=u.leftForLtr($,w),H=Au(D.borderRadius);s.beginPath(),Object.values(H).some(B=>B!==0)?Fy(s,{x:F,y:L,w,h:T,radius:H}):s.rect(F,L,w,T),s.fill(),N!==0&&s.stroke()}s.restore()},k=function($,O,D){Uy(s,D.text,$,O+x/2,d,{strikethrough:D.hidden,textAlign:u.textAlign(D.textAlign)})},M=this.isHorizontal(),z=this._computeTitleHeight();M?v={x:os(r,this.left+f,this.right-i[0]),y:this.top+f+z,line:0}:v={x:this.left+f,y:os(r,this.top+z+f,this.bottom-n[0].height),line:0},Xj(this.ctx,t.textDirection);const j=x+f;this.legendItems.forEach(($,O)=>{s.strokeStyle=$.fontColor,s.fillStyle=$.fontColor;const D=s.measureText($.text).width,N=u.textAlign($.textAlign||($.textAlign=a.textAlign)),L=w+y+D;let F=v.x,H=v.y;u.setWidth(this.width),M?O>0&&F+L+f>this.right&&(H=v.y+=j,v.line++,F=v.x=os(r,this.left+f,this.right-i[v.line])):O>0&&H+j>this.bottom&&(F=v.x=F+n[v.line].width+f,v.line++,H=v.y=os(r,this.top+z+f,this.bottom-n[v.line].height));const B=u.x(F);if(C(B,H,$),F=cet(N,F+w+y,M?F+L:this.right,t.rtl),k(u.x(F),H,$),M)v.x+=L+f;else if(typeof $.text!="string"){const _t=d.lineHeight;v.y+=m4($,_t)+f}else v.y+=j}),Zj(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=$i(n.font),s=er(n.padding);if(!n.display)return;const r=Cu(t.rtl,this.left,this.width),a=this.ctx,c=n.position,u=i.size/2,d=s.top+u;let f,m=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),f=this.top+d,m=os(t.align,m,this.right-y);else{const w=this.columnSizes.reduce((T,x)=>Math.max(T,x.height),0);f=d+os(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const v=os(c,m,m+y);a.textAlign=r.textAlign(zj(c)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=i.string,Uy(a,n.text,v,f,i)}_computeTitleHeight(){const t=this.options.title,n=$i(t.font),i=er(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,s,r;if(Ea(t,this.left,this.right)&&Ea(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Ea(t,s.left,s.left+s.width)&&Ea(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!_st(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=pst(s,i);s&&!r&&en(n.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&en(n.onHover,[t,i,this],this)}else i&&en(n.onClick,[t,i,this],this)}}function mst(e,t,n,i,s){const r=gst(i,e,t,n),a=yst(s,i,t.lineHeight);return{itemWidth:r,itemHeight:a}}function gst(e,t,n,i){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,a)=>r.length>a.length?r:a)),t+n.size/2+i.measureText(s).width}function yst(e,t,n){let i=e;return typeof t.text!="string"&&(i=m4(t,n)),i}function m4(e,t){const n=e.text?e.text.length:0;return t*n}function _st(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var g4={id:"legend",_element:kN,start(e,t,n){const i=e.legend=new kN({ctx:e.ctx,options:n,chart:e});Ta.configure(e,i,n),Ta.addBox(e,i)},stop(e){Ta.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Ta.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:a,borderRadius:c}}=e.legend.options;return e._getSortedDatasetMetas().map(u=>{const d=u.controller.getStyle(n?0:void 0),f=er(d.borderWidth);return{text:t[u.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!u.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:a&&(c||d.borderRadius),datasetIndex:u.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Ld={average(e){if(!e.length)return!1;let t,n,i=new Set,s=0,r=0;for(t=0,n=e.length;t<n;++t){const c=e[t].element;if(c&&c.hasValue()){const u=c.tooltipPosition();i.add(u.x),s+=u.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((c,u)=>c+u)/i.size,y:s/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,a,c;for(r=0,a=e.length;r<a;++r){const u=e[r].element;if(u&&u.hasValue()){const d=u.getCenterPoint(),f=nE(t,d);f<s&&(s=f,c=u)}}if(c){const u=c.tooltipPosition();n=u.x,i=u.y}return{x:n,y:i}}};function wr(e,t){return t&&(Jn(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function fo(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function vst(e,t){const{element:n,datasetIndex:i,index:s}=t,r=e.getDatasetMeta(i).controller,{label:a,value:c}=r.getLabelAndValue(s);return{chart:e,label:a,parsed:r.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:c,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function PN(e,t){const n=e.chart.ctx,{body:i,footer:s,title:r}=e,{boxWidth:a,boxHeight:c}=t,u=$i(t.bodyFont),d=$i(t.titleFont),f=$i(t.footerFont),m=r.length,y=s.length,v=i.length,w=er(t.padding);let T=w.height,x=0,C=i.reduce((z,j)=>z+j.before.length+j.lines.length+j.after.length,0);if(C+=e.beforeBody.length+e.afterBody.length,m&&(T+=m*d.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),C){const z=t.displayColors?Math.max(c,u.lineHeight):u.lineHeight;T+=v*z+(C-v)*u.lineHeight+(C-1)*t.bodySpacing}y&&(T+=t.footerMarginTop+y*f.lineHeight+(y-1)*t.footerSpacing);let k=0;const M=function(z){x=Math.max(x,n.measureText(z).width+k)};return n.save(),n.font=d.string,Ve(e.title,M),n.font=u.string,Ve(e.beforeBody.concat(e.afterBody),M),k=t.displayColors?a+2+t.boxPadding:0,Ve(i,z=>{Ve(z.before,M),Ve(z.lines,M),Ve(z.after,M)}),k=0,n.font=f.string,Ve(e.footer,M),n.restore(),x+=w.width,{width:x,height:T}}function bst(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function wst(e,t,n,i){const{x:s,width:r}=i,a=n.caretSize+n.caretPadding;if(e==="left"&&s+r+a>t.width||e==="right"&&s-r-a<0)return!0}function Est(e,t,n,i){const{x:s,width:r}=n,{width:a,chartArea:{left:c,right:u}}=e;let d="center";return i==="center"?d=s<=(c+u)/2?"left":"right":s<=r/2?d="left":s>=a-r/2&&(d="right"),wst(d,e,t,n)&&(d="center"),d}function ON(e,t,n){const i=n.yAlign||t.yAlign||bst(e,n);return{xAlign:n.xAlign||t.xAlign||Est(e,t,n,i),yAlign:i}}function Tst(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function xst(e,t,n){let{y:i,height:s}=e;return t==="top"?i+=n:t==="bottom"?i-=s+n:i-=s/2,i}function LN(e,t,n,i){const{caretSize:s,caretPadding:r,cornerRadius:a}=e,{xAlign:c,yAlign:u}=n,d=s+r,{topLeft:f,topRight:m,bottomLeft:y,bottomRight:v}=Au(a);let w=Tst(t,c);const T=xst(t,u,d);return u==="center"?c==="left"?w+=d:c==="right"&&(w-=d):c==="left"?w-=Math.max(f,y)+s:c==="right"&&(w+=Math.max(m,v)+s),{x:Ei(w,0,i.width-t.width),y:Ei(T,0,i.height-t.height)}}function pg(e,t,n){const i=er(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function VN(e){return wr([],fo(e))}function Sst(e,t,n){return fc(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function jN(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const y4={beforeTitle:co,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:co,beforeBody:co,beforeLabel:co,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ke(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:co,afterBody:co,beforeFooter:co,footer:co,afterFooter:co};function Ui(e,t,n,i){const s=e[t].call(n,i);return typeof s>"u"?y4[t].call(n,i):s}class cE extends Xa{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new t4(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Sst(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,s=Ui(i,"beforeTitle",this,t),r=Ui(i,"title",this,t),a=Ui(i,"afterTitle",this,t);let c=[];return c=wr(c,fo(s)),c=wr(c,fo(r)),c=wr(c,fo(a)),c}getBeforeBody(t,n){return VN(Ui(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,s=[];return Ve(t,r=>{const a={before:[],lines:[],after:[]},c=jN(i,r);wr(a.before,fo(Ui(c,"beforeLabel",this,r))),wr(a.lines,Ui(c,"label",this,r)),wr(a.after,fo(Ui(c,"afterLabel",this,r))),s.push(a)}),s}getAfterBody(t,n){return VN(Ui(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,s=Ui(i,"beforeFooter",this,t),r=Ui(i,"footer",this,t),a=Ui(i,"afterFooter",this,t);let c=[];return c=wr(c,fo(s)),c=wr(c,fo(r)),c=wr(c,fo(a)),c}_createItems(t){const n=this._active,i=this.chart.data,s=[],r=[],a=[];let c=[],u,d;for(u=0,d=n.length;u<d;++u)c.push(vst(this.chart,n[u]));return t.filter&&(c=c.filter((f,m,y)=>t.filter(f,m,y,i))),t.itemSort&&(c=c.sort((f,m)=>t.itemSort(f,m,i))),Ve(c,f=>{const m=jN(t.callbacks,f);s.push(Ui(m,"labelColor",this,f)),r.push(Ui(m,"labelPointStyle",this,f)),a.push(Ui(m,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=c,c}update(t,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,a=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const c=Ld[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const u=this._size=PN(this,i),d=Object.assign({},c,u),f=ON(this.chart,i,d),m=LN(i,d,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,r={opacity:1,x:m.x,y:m.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,s){const r=this.getCaretPosition(t,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:m}=Au(c),{x:y,y:v}=t,{width:w,height:T}=n;let x,C,k,M,z,j;return r==="center"?(z=v+T/2,s==="left"?(x=y,C=x-a,M=z+a,j=z-a):(x=y+w,C=x+a,M=z-a,j=z+a),k=x):(s==="left"?C=y+Math.max(u,f)+a:s==="right"?C=y+w-Math.max(d,m)-a:C=this.caretX,r==="top"?(M=v,z=M-a,x=C-a,k=C+a):(M=v+T,z=M+a,x=C+a,k=C-a),j=M),{x1:x,x2:C,x3:k,y1:M,y2:z,y3:j}}drawTitle(t,n,i){const s=this.title,r=s.length;let a,c,u;if(r){const d=Cu(i.rtl,this.x,this.width);for(t.x=pg(this,i.titleAlign,i),n.textAlign=d.textAlign(i.titleAlign),n.textBaseline="middle",a=$i(i.titleFont),c=i.titleSpacing,n.fillStyle=i.titleColor,n.font=a.string,u=0;u<r;++u)n.fillText(s[u],d.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,u+1===r&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,n,i,s,r){const a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:u,boxWidth:d}=r,f=$i(r.bodyFont),m=pg(this,"left",r),y=s.x(m),v=u<f.lineHeight?(f.lineHeight-u)/2:0,w=n.y+v;if(r.usePointStyle){const T={radius:Math.min(d,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},x=s.leftForLtr(y,d)+d/2,C=w+u/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,sE(t,T,x,C),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,sE(t,T,x,C)}else{t.lineWidth=Te(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const T=s.leftForLtr(y,d),x=s.leftForLtr(s.xPlus(y,1),d-2),C=Au(a.borderRadius);Object.values(C).some(k=>k!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Fy(t,{x:T,y:w,w:d,h:u,radius:C}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Fy(t,{x,y:w+1,w:d-2,h:u-2,radius:C}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(T,w,d,u),t.strokeRect(T,w,d,u),t.fillStyle=a.backgroundColor,t.fillRect(x,w+1,d-2,u-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:a,displayColors:c,boxHeight:u,boxWidth:d,boxPadding:f}=i,m=$i(i.bodyFont);let y=m.lineHeight,v=0;const w=Cu(i.rtl,this.x,this.width),T=function(D){n.fillText(D,w.x(t.x+v),t.y+y/2),t.y+=y+r},x=w.textAlign(a);let C,k,M,z,j,$,O;for(n.textAlign=a,n.textBaseline="middle",n.font=m.string,t.x=pg(this,x,i),n.fillStyle=i.bodyColor,Ve(this.beforeBody,T),v=c&&x!=="right"?a==="center"?d/2+f:d+2+f:0,z=0,$=s.length;z<$;++z){for(C=s[z],k=this.labelTextColors[z],n.fillStyle=k,Ve(C.before,T),M=C.lines,c&&M.length&&(this._drawColorBox(n,t,z,w,i),y=Math.max(m.lineHeight,u)),j=0,O=M.length;j<O;++j)T(M[j]),y=m.lineHeight;Ve(C.after,T)}v=0,y=m.lineHeight,Ve(this.afterBody,T),t.y-=r}drawFooter(t,n,i){const s=this.footer,r=s.length;let a,c;if(r){const u=Cu(i.rtl,this.x,this.width);for(t.x=pg(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=u.textAlign(i.footerAlign),n.textBaseline="middle",a=$i(i.footerFont),n.fillStyle=i.footerColor,n.font=a.string,c=0;c<r;++c)n.fillText(s[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,n,i,s){const{xAlign:r,yAlign:a}=this,{x:c,y:u}=t,{width:d,height:f}=i,{topLeft:m,topRight:y,bottomLeft:v,bottomRight:w}=Au(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(c+m,u),a==="top"&&this.drawCaret(t,n,i,s),n.lineTo(c+d-y,u),n.quadraticCurveTo(c+d,u,c+d,u+y),a==="center"&&r==="right"&&this.drawCaret(t,n,i,s),n.lineTo(c+d,u+f-w),n.quadraticCurveTo(c+d,u+f,c+d-w,u+f),a==="bottom"&&this.drawCaret(t,n,i,s),n.lineTo(c+v,u+f),n.quadraticCurveTo(c,u+f,c,u+f-v),a==="center"&&r==="left"&&this.drawCaret(t,n,i,s),n.lineTo(c,u+m),n.quadraticCurveTo(c,u,c+m,u),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const a=Ld[t.position].call(this,this._active,this._eventPosition);if(!a)return;const c=this._size=PN(this,t),u=Object.assign({},a,this._size),d=ON(n,t,u),f=LN(t,u,d,n);(s._to!==f.x||r._to!==f.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=er(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,n),Xj(t,n.textDirection),r.y+=a.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),Zj(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,s=t.map(({datasetIndex:c,index:u})=>{const d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[u],index:u}}),r=!Ly(i,s),a=this._positionChanged(s,n);(r||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],a=this._getActiveElements(t,r,n,i),c=this._positionChanged(a,t),u=n||!Ly(a,r)||c;return u&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),u}_getActiveElements(t,n,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:i,caretY:s,options:r}=this,a=Ld[r.position].call(this,t,n);return a!==!1&&(i!==a.x||s!==a.y)}}xt(cE,"positioners",Ld);var _4={id:"tooltip",_element:cE,positioners:Ld,afterInit(e,t,n){n&&(e.tooltip=new cE({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:y4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Ast=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function Cst(e,t,n,i){const s=e.indexOf(t);if(s===-1)return Ast(e,t,n,i);const r=e.lastIndexOf(t);return s!==r?n:s}const Rst=(e,t)=>e===null?null:Ei(Math.round(e),0,t);function UN(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class uE extends rh{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(ke(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:Cst(i,t,ce(n,t),this._addedLabels),Rst(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=n;a++)s.push({value:a});return s}getLabelForValue(t){return UN.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}xt(uE,"id","category"),xt(uE,"defaults",{ticks:{callback:UN}});function Ist(e,t){const n=[],{bounds:s,step:r,min:a,max:c,precision:u,count:d,maxTicks:f,maxDigits:m,includeBounds:y}=e,v=r||1,w=f-1,{min:T,max:x}=t,C=!ke(a),k=!ke(c),M=!ke(d),z=(x-T)/(m+1);let j=BM((x-T)/w/v)*v,$,O,D,N;if(j<1e-14&&!C&&!k)return[{value:T},{value:x}];N=Math.ceil(x/j)-Math.floor(T/j),N>w&&(j=BM(N*j/w/v)*v),ke(u)||($=Math.pow(10,u),j=Math.ceil(j*$)/$),s==="ticks"?(O=Math.floor(T/j)*j,D=Math.ceil(x/j)*j):(O=T,D=x),C&&k&&r&&Jtt((c-a)/r,j/1e3)?(N=Math.round(Math.min((c-a)/j,f)),j=(c-a)/N,O=a,D=c):M?(O=C?a:O,D=k?c:D,N=d-1,j=(D-O)/N):(N=(D-O)/j,Jd(N,Math.round(N),j/1e3)?N=Math.round(N):N=Math.ceil(N));const L=Math.max(zM(j),zM(O));$=Math.pow(10,ke(u)?L:u),O=Math.round(O*$)/$,D=Math.round(D*$)/$;let F=0;for(C&&(y&&O!==a?(n.push({value:a}),O<a&&F++,Jd(Math.round((O+F*j)*$)/$,a,FN(a,z,e))&&F++):O<a&&F++);F<N;++F){const H=Math.round((O+F*j)*$)/$;if(k&&H>c)break;n.push({value:H})}return k&&y&&D!==c?n.length&&Jd(n[n.length-1].value,c,FN(c,z,e))?n[n.length-1].value=c:n.push({value:c}):(!k||D===c)&&n.push({value:D}),n}function FN(e,t,{horizontal:n,minRotation:i}){const s=bo(i),r=(n?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/r,a)}class Dst extends rh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return ke(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const a=u=>s=n?s:u,c=u=>r=i?r:u;if(t){const u=kr(s),d=kr(r);u<0&&d<0?c(0):u>0&&d>0&&a(0)}if(s===r){let u=r===0?1:Math.abs(r*.05);c(r+u),t||a(s-u)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,a=Ist(s,r);return t.bounds==="ticks"&&tet(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-n)/Math.max(t.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return Gx(t,this.chart.options.locale,this.options.ticks.format)}}class hE extends Dst{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Os(t)?t:0,this.max=Os(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=bo(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}xt(hE,"id","linear"),xt(hE,"defaults",{ticks:{callback:Hj.formatters.numeric}});const L_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Hi=Object.keys(L_);function BN(e,t){return e-t}function zN(e,t){if(ke(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:r}=e._parseOpts;let a=t;return typeof i=="function"&&(a=i(a)),Os(a)||(a=typeof i=="string"?n.parse(a,i):n.parse(a)),a===null?null:(s&&(a=s==="week"&&(Of(r)||r===!0)?n.startOf(a,"isoWeek",r):n.startOf(a,s)),+a)}function HN(e,t,n,i){const s=Hi.length;for(let r=Hi.indexOf(e);r<s-1;++r){const a=L_[Hi[r]],c=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(c*a.size))<=i)return Hi[r]}return Hi[s-1]}function Mst(e,t,n,i,s){for(let r=Hi.length-1;r>=Hi.indexOf(n);r--){const a=Hi[r];if(L_[a].common&&e._adapter.diff(s,i,a)>=t-1)return a}return Hi[n?Hi.indexOf(n):0]}function Nst(e){for(let t=Hi.indexOf(e)+1,n=Hi.length;t<n;++t)if(L_[Hi[t]].common)return Hi[t]}function qN(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:s}=qx(n,t),r=n[i]>=t?n[i]:n[s];e[r]=!0}}function kst(e,t,n,i){const s=e._adapter,r=+s.startOf(t[0].value,i),a=t[t.length-1].value;let c,u;for(c=r;c<=a;c=+s.add(c,1,i))u=n[c],u>=0&&(t[u].major=!0);return t}function $N(e,t,n){const i=[],s={},r=t.length;let a,c;for(a=0;a<r;++a)c=t[a],s[c]=a,i.push({value:c,major:!1});return r===0||!n?i:kst(e,i,s,n)}class qy extends rh{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),s=this._adapter=new Unt._date(t.adapters.date);s.init(n),Zd(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:zN(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:a,maxDefined:c}=this.getUserBounds();function u(d){!a&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!c&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!a||!c)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),s=Os(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=Os(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,a=this.max,c=ret(s,r,a);return this._unit=n.unit||(i.autoSkip?HN(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):Mst(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Nst(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),$N(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=Ei(n,0,a),i=Ei(i,0,a),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,a=r.unit||HN(r.minUnit,n,i,this._getLabelCapacity(n)),c=ce(s.ticks.stepSize,1),u=a==="week"?r.isoWeekday:!1,d=Of(u)||u===!0,f={};let m=n,y,v;if(d&&(m=+t.startOf(m,"isoWeek",u)),m=+t.startOf(m,d?"day":a),t.diff(i,n,a)>1e5*c)throw new Error(n+" and "+i+" are too far apart with stepSize of "+c+" "+a);const w=s.ticks.source==="data"&&this.getDataTimestamps();for(y=m,v=0;y<i;y=+t.add(y,c,a),v++)qN(f,y,w);return(y===i||s.bounds==="ticks"||v===1)&&qN(f,y,w),Object.keys(f).sort(BN).map(T=>+T)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,r=this._unit,a=n||s[r];return this._adapter.format(t,a)}_tickFormatFunction(t,n,i,s){const r=this.options,a=r.ticks.callback;if(a)return en(a,[t,n,i],this);const c=r.time.displayFormats,u=this._unit,d=this._majorUnit,f=u&&c[u],m=d&&c[d],y=i[n],v=d&&m&&y&&y.major;return this._adapter.format(t,s||(v?m:f))}generateTickLabels(t){let n,i,s;for(n=0,i=t.length;n<i;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,s=bo(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*r+c*a,h:i*a+c*r}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(t,0,$N(this,[t],this._majorUnit),s),a=this._getLabelSize(r),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)t.push(zN(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Uj(t.sort(BN))}}xt(qy,"id","time"),xt(qy,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function mg(e,t,n){let i=0,s=e.length-1,r,a,c,u;n?(t>=e[i].pos&&t<=e[s].pos&&({lo:i,hi:s}=Hl(e,"pos",t)),{pos:r,time:c}=e[i],{pos:a,time:u}=e[s]):(t>=e[i].time&&t<=e[s].time&&({lo:i,hi:s}=Hl(e,"time",t)),{time:r,pos:c}=e[i],{time:a,pos:u}=e[s]);const d=a-r;return d?c+(u-c)*(t-r)/d:c}class GN extends qy{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=mg(n,this.min),this._tableRange=mg(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,s=[],r=[];let a,c,u,d,f;for(a=0,c=t.length;a<c;++a)d=t[a],d>=n&&d<=i&&s.push(d);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(a=0,c=s.length;a<c;++a)f=s[a+1],u=s[a-1],d=s[a],Math.round((f+u)/2)!==d&&r.push({time:d,pos:a/(c-1)});return r}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(mg(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return mg(this._table,i*this._tableRange+this._minPos,!0)}}xt(GN,"id","timeseries"),xt(GN,"defaults",qy.defaults);const v4="label";function WN(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Pst(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function b4(e,t){e.labels=t}function w4(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v4;const i=[];e.datasets=t.map(s=>{const r=e.datasets.find(a=>a[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function Ost(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v4;const n={labels:[],datasets:[]};return b4(n,e.labels),w4(n,e.datasets,t),n}function Lst(e,t){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:a,data:c,options:u,plugins:d=[],fallbackContent:f,updateMode:m,...y}=e,v=R.useRef(null),w=R.useRef(null),T=()=>{v.current&&(w.current=new _p(v.current,{type:a,data:Ost(c,r),options:u&&{...u},plugins:d}),WN(t,w.current))},x=()=>{WN(t,null),w.current&&(w.current.destroy(),w.current=null)};return R.useEffect(()=>{!s&&w.current&&u&&Pst(w.current,u)},[s,u]),R.useEffect(()=>{!s&&w.current&&b4(w.current.config.data,c.labels)},[s,c.labels]),R.useEffect(()=>{!s&&w.current&&c.datasets&&w4(w.current.config.data,c.datasets,r)},[s,c.datasets]),R.useEffect(()=>{w.current&&(s?(x(),setTimeout(T)):w.current.update(m))},[s,u,c.labels,c.datasets,m]),R.useEffect(()=>{w.current&&(x(),setTimeout(T))},[a]),R.useEffect(()=>(T(),()=>x()),[]),de.createElement("canvas",{ref:v,role:"img",height:n,width:i,...y},f)}const Vst=R.forwardRef(Lst);function nS(e,t){return _p.register(t),R.forwardRef((n,i)=>de.createElement(Vst,{...n,ref:i,type:e}))}const jst=nS("line",Ug),Ust=nS("bar",jg),Fst=nS("pie",rE),E4=({isOpen:e,onClose:t,onApply:n,onClear:i})=>{const[s,r]=R.useState(null),[a,c]=R.useState(null),[u,d]=R.useState(null),[f,m]=R.useState(null);if(!e)return null;const y=new Date().getFullYear(),v=Array.from({length:10},(w,T)=>y-T);return S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:S.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-xl w-full max-w-md shadow-lg border border-gray-300",children:[S.jsx("h2",{className:"text-xl font-bold mb-4",children:"Filter Analytics"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{const w=new Date,T=new Date(w.getFullYear(),w.getMonth(),w.getDate());r(T),c(w),d(null),m(null)},children:"Today"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{const w=new Date,T=new Date(w);T.setDate(w.getDate()-7),r(T),c(w),d(null),m(null)},children:"Last 7 Days"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{const w=new Date,T=new Date(w.getFullYear(),w.getMonth(),1);r(T),c(w),d(null),m(null)},children:"This Month"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{r(null),c(null),d(null),m(null)},children:"All Time"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Start Date"}),S.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:s?s.toISOString().split("T")[0]:"",onChange:w=>r(w.target.value?new Date(w.target.value):null)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"End Date"}),S.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:a?a.toISOString().split("T")[0]:"",onChange:w=>c(w.target.value?new Date(w.target.value):null)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Month"}),S.jsxs("select",{className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:u??"",onChange:w=>d(w.target.value?parseInt(w.target.value):null),children:[S.jsx("option",{value:"",children:"Select Month"}),Array.from({length:12},(w,T)=>S.jsx("option",{value:T,children:new Date(0,T).toLocaleString("default",{month:"long"})},T))]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Year"}),S.jsxs("select",{className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:f??"",onChange:w=>m(w.target.value?parseInt(w.target.value):null),children:[S.jsx("option",{value:"",children:"Select Year"}),v.map(w=>S.jsx("option",{value:w,children:w},w))]})]})]}),S.jsxs("div",{className:"flex justify-between mt-6",children:[S.jsx("button",{onClick:()=>{r(null),c(null),d(null),m(null),i&&i()},className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Clear"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:t,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Cancel"}),S.jsx("button",{onClick:()=>{let w=s,T=a;u!==null&&f!==null&&(w=new Date(f,u,1),T=new Date(f,u+1,0)),n(w,T)},className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded",children:"Apply"})]})]})]})})};_p.register(Hg,uE,hE,_4,g4,vu,zg,Od,g3);const Bst="cdbb40b30135e8397fe914b98c469d44",zst=e=>(e=e.toLowerCase(),e.includes("rain")?"":e.includes("cloud")?"":e.includes("clear")?"":e.includes("storm")?"":e.includes("snow")?"":e.includes("fog")||e.includes("mist")?"":""),gg=e=>e.trim().toLowerCase(),Hst=()=>{const{user:e}=gp(),[t,n]=R.useState([]),[i,s]=R.useState(0),[r,a]=R.useState(0),[c,u]=R.useState(0),[d,f]=R.useState({}),[m,y]=R.useState(""),[v,w]=R.useState(!1),[T,x]=R.useState([]),[C,k]=R.useState("weekly"),[M,z]=R.useState([]),[j,$]=R.useState(!1),[O,D]=R.useState(null),[N,L]=R.useState(null),[F,H]=R.useState(null),[B,_t]=R.useState(null),[ft,K]=R.useState(!1),tt=R.useCallback(()=>{navigator.geolocation.getCurrentPosition(async({coords:U})=>{try{const st=(await(await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${U.latitude}&lon=${U.longitude}&units=metric&appid=${Bst}`)).json()).list.filter((pt,St)=>St%8===0).slice(0,7).map(pt=>{const St=new Date(pt.dt_txt),gt=pt.weather[0].description,ue=zst(gt);return!m&&(gt.includes("rain")||gt.includes("storm"))&&y(" Expect rain  rides may increase!"),{date:St.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),temp:pt.main.temp,description:gt,icon:ue}});n(st)}catch(J){console.error("Weather fetch error:",J)}},U=>{console.error("Failed to get location for weather:",U)})},[m]),dt=R.useCallback(async()=>{if(e){w(!0);try{const U=new Date;U.setHours(0,0,0,0);const J=new Date(U);J.setDate(U.getDate()-6);const ot=mo(En(ze,"ride_logs"),Ll("driverId","==",e.uid),Ll("timestamp",">=",Qe.fromDate(J))),st=await vf(ot);let pt=0,St=0,gt=0,ue={},vt={};for(let zt=0;zt<7;zt++){const Ct=new Date(J.getTime()+zt*864e5),At=Ct.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});vt[At]={earnings:0,rides:0,date:Ct}}let Vt=0,Mt=0;st.forEach(zt=>{var Sn,ln,kn;const Ct=zt.data(),At=(Sn=Ct.timestamp)==null?void 0:Sn.toDate();if(!At)return;const qe=(Ct.dropoffName||"").trim(),Bn={};Object.entries(Mf).forEach(([Pi,Yi])=>{Bn[gg(Pi)]=Yi});const Se=Bn[gg(qe)]||0;pt+=Se,At>=U&&At<new Date(U.getTime()+864e5)&&(Vt+=Se,Mt++),typeof Ct.waitTimeMinutes=="number"&&Ct.waitTimeMinutes>=0&&(St+=Ct.waitTimeMinutes,gt++);const ti=At.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});vt[ti]&&(vt[ti]={earnings:(((ln=vt[ti])==null?void 0:ln.earnings)||0)+Se,rides:(((kn=vt[ti])==null?void 0:kn.rides)||0)+1,date:vt[ti].date}),qe&&(ue[qe]||(ue[qe]={count:0,earnings:0}),ue[qe].count+=1,ue[qe].earnings+=Se)}),a(Mt),u(Vt),s(gt?Math.round(St/gt):0),f(ue),x(Object.entries(vt).reverse().map(([zt,Ct])=>({date:Ct.date.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),earnings:Ct.earnings||0,rides:Ct.rides||0})))}catch(U){console.error("Error loading analytics:",U)}w(!1)}},[e]),yt=R.useCallback(async(U,J,ot)=>{if(e)try{let st,pt;const St=new Date;if(St.setHours(0,0,0,0),J&&ot)st=new Date(J),st.setHours(0,0,0,0),pt=new Date(ot),pt.setHours(23,59,59,999);else{const Ct=U==="annually"?365:U==="monthly"?30:7;st=new Date(St),st.setDate(St.getDate()-(Ct-1)),pt=new Date(St),pt.setHours(23,59,59,999)}const gt=mo(En(ze,"ride_logs"),Ll("driverId","==",e.uid),Ll("timestamp",">=",Qe.fromDate(st)),Ll("timestamp","<=",Qe.fromDate(pt))),ue=await vf(gt);let vt={};const Vt=Math.ceil((pt.getTime()-st.getTime())/(1e3*60*60*24))+1;for(let Ct=0;Ct<Vt;Ct++){const At=new Date(st.getTime()+Ct*864e5),me=At.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});vt[me]={earnings:0,rides:0,date:At}}ue.forEach(Ct=>{var ln;const At=Ct.data(),me=(ln=At.timestamp)==null?void 0:ln.toDate();if(!me)return;const Bn=(At.dropoffName||"").trim(),Se={};Object.entries(Mf).forEach(([kn,Pi])=>{Se[gg(kn)]=Pi});const ti=Se[gg(Bn)]||0,Sn=me.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});vt[Sn]&&(vt[Sn].earnings+=ti,vt[Sn].rides+=1)});let Mt={};J&&ot?Object.entries(vt).forEach(([Ct,At])=>{Mt[Ct]=At}):U==="weekly"?Object.entries(vt).forEach(([Ct,At])=>{Mt[Ct]=At}):U==="monthly"?Object.entries(vt).forEach(([Ct,At])=>{const me=new Date(At.date);me.setDate(At.date.getDate()-At.date.getDay());const qe=me.toLocaleDateString(void 0,{month:"short",day:"numeric"});Mt[qe]||(Mt[qe]={earnings:0,rides:0}),Mt[qe].earnings+=At.earnings,Mt[qe].rides+=At.rides}):U==="annually"&&Object.entries(vt).forEach(([Ct,At])=>{const me=At.date.toLocaleDateString(void 0,{month:"short",year:"numeric"});Mt[me]||(Mt[me]={earnings:0,rides:0}),Mt[me].earnings+=At.earnings,Mt[me].rides+=At.rides});const zt=Object.entries(Mt).map(([Ct,At])=>({label:Ct,earnings:At.earnings,rides:At.rides}));z(zt)}catch(st){console.error("Error loading pie analytics:",st)}},[e]);return R.useEffect(()=>{e&&(tt(),dt(),yt(C))},[e,tt,dt,yt,C]),R.useEffect(()=>{e&&yt(C)},[C,yt,e]),S.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 text-gray-900",children:S.jsxs("div",{className:"max-w-7xl mx-auto",children:[S.jsx("h1",{className:"text-3xl font-bold mb-6 text-center animate-fade-in",children:" Analytics Dashboard"}),m&&S.jsx("div",{className:"bg-yellow-200 p-4 rounded-lg mb-6 shadow-lg animate-slide-down",children:m}),t.length>0&&S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-4 mb-8 animate-fade-in-up",children:t.map((U,J)=>S.jsxs("div",{className:"bg-white p-4 rounded-xl flex flex-col items-center shadow-lg hover:shadow-xl transition-shadow duration-300",children:[S.jsx("p",{className:"text-sm font-medium text-gray-700",children:U.date}),S.jsx("div",{className:"text-4xl my-2",children:U.icon}),S.jsxs("p",{className:"font-bold text-lg",children:[U.temp.toFixed(1),"C"]}),S.jsx("p",{className:"text-xs capitalize text-center text-gray-600",children:U.description})]},J))}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-slide-up",children:[S.jsx("div",{className:"text-4xl mb-2",children:""}),S.jsx("p",{className:"font-semibold text-xl mb-1",children:"Avg Wait Time"}),S.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[i," mins"]}),S.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"(Based on queued wait times recorded)"})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-slide-up",style:{animationDelay:"0.1s"},children:[S.jsx("div",{className:"text-4xl mb-2",children:""}),S.jsx("p",{className:"font-semibold text-xl mb-1",children:"Rides Today"}),S.jsx("p",{className:"text-3xl font-bold text-green-600",children:r}),S.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["as of ",new Date().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})]})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-slide-up",style:{animationDelay:"0.2s"},children:[S.jsx("div",{className:"text-4xl mb-2",children:""}),S.jsx("p",{className:"font-semibold text-xl mb-1",children:"Total Earnings"}),S.jsxs("p",{className:"text-3xl font-bold text-yellow-600",children:["",c.toFixed(2)]}),S.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["as of ",new Date().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg animate-fade-in-left",children:[S.jsx("h2",{className:"font-semibold text-xl mb-4",children:" Top Drop-offs"}),Object.entries(d).length?S.jsx("ul",{className:"space-y-2",children:Object.entries(d).sort(([,U],[,J])=>J.earnings-U.earnings).slice(0,5).map(([U,J],ot)=>S.jsxs("li",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[S.jsx("span",{className:"font-medium",children:U}),S.jsxs("span",{className:"text-sm text-gray-600",children:[J.count," ride",J.count>1?"s":"",", ",J.earnings.toFixed(2)]})]},ot))}):S.jsx("p",{className:"text-gray-500",children:"No drop-offs recorded yet."})]}),S.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg flex items-center justify-center animate-fade-in-right",children:S.jsx("button",{onClick:()=>{dt(),tt(),yt(C)},disabled:v,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 text-white px-8 py-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105",children:v?" Refreshing...":" Refresh Data"})})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg mb-8 animate-fade-in-up",children:[S.jsx("h2",{className:"text-xl font-semibold mb-6",children:" 7-Day Ride & Earnings Trend"}),S.jsx("div",{className:"h-80",children:S.jsx(Ust,{data:{labels:T.map(U=>U.date),datasets:[{label:"Rides",data:T.map(U=>U.rides),backgroundColor:"#3b82f6",borderRadius:6},{label:"Earnings ()",data:T.map(U=>U.earnings),backgroundColor:"#10b981",borderRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:1500,easing:"easeOutCubic"},scales:{y:{beginAtZero:!0,ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{tooltip:{callbacks:{label:U=>`${U.dataset.label||"Unknown"}: ${U.parsed.y}`}},legend:{labels:{color:"#374151"}}}}})})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg animate-fade-in-up",style:{animationDelay:"0.3s"},children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[S.jsx("h2",{className:"text-xl font-semibold mb-4 sm:mb-0",children:" Ride & Earnings Breakdown"}),S.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.jsx("button",{onClick:()=>{$(!0)},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${ft?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Filter"}),S.jsx("button",{onClick:()=>{k("weekly"),K(!1),yt("weekly")},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${C==="weekly"&&!ft?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Weekly"}),S.jsx("button",{onClick:()=>{k("monthly"),K(!1),yt("monthly")},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${C==="monthly"&&!ft?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Monthly"}),S.jsx("button",{onClick:()=>{k("annually"),K(!1),yt("annually")},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${C==="annually"&&!ft?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Annually"})]})]}),S.jsx("div",{className:"h-96",children:S.jsx(jst,{data:{labels:M.map(U=>U.label),datasets:[{label:"Earnings ()",data:M.map(U=>U.earnings),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"#10b981",pointBorderColor:"#10b981"},{label:"Rides",data:M.map(U=>U.rides),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"#3b82f6",pointBorderColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:1500,easing:"easeOutCubic"},scales:{y:{beginAtZero:!0,ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{tooltip:{callbacks:{label:U=>{const J=U.dataset.label||"Unknown",ot=U.parsed.y;return`${J}: ${ot}`}}},legend:{labels:{color:"#374151"}},zoom:{zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"x"},pan:{enabled:!0,mode:"x"}}}}})})]}),j&&S.jsx(E4,{isOpen:j,onClose:()=>$(!1),onApply:(U,J)=>{D(U),L(J),K(!0),yt("weekly",U,J),$(!1)}})]})})},qst=()=>{const e=[{to:"/home",icon:iK,label:"Home"},{to:"/analytics",icon:WW,label:"Analytics"},{to:"/history",icon:aK,label:"History"},{to:"/profile",icon:hK,label:"Profile"}];return S.jsx("nav",{className:`fixed bottom-0 left-0 w-full h-16 z-50 border-t backdrop-blur-sm\r
    bg-white/80 text-black border-gray-200\r
    dark:bg-[#0D111C]/95 dark:text-white dark:border-[#1c2230]\r
    flex justify-around items-center transition-colors duration-300`,children:e.map(({to:t,icon:n,label:i})=>S.jsxs(w2,{to:t,className:({isActive:s})=>`flex flex-col items-center justify-center text-xs font-medium transition-colors duration-200
            ${s?"text-blue-600":"text-gray-500"}`,children:[S.jsx(n,{size:20}),S.jsx("span",{children:i})]},t))})},$st=()=>S.jsxs("div",{className:"min-h-screen bg-white text-black transition-colors duration-500 pb-16",children:[S.jsx("header",{className:"sticky top-0 z-40 bg-white px-4 pt-4 pb-2 flex justify-between items-center shadow-sm",children:S.jsx("h1",{className:"text-lg font-bold",children:"AGDUWA Drivers"})}),S.jsx("main",{className:"p-4",children:S.jsx(_F,{})}),S.jsx(qst,{})]}),Gst=()=>{const{driverId:e}=sF(),[t,n]=R.useState(null),[i,s]=R.useState(!0);if(R.useEffect(()=>{(async()=>{if(!e){s(!1);return}try{const c=Qt(ze,"publicProfiles",e),u=await np(c);u.exists()?n(u.data()):n(null)}catch(c){console.error("Error fetching driver:",c),n(null)}s(!1)})()},[e]),i)return S.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-900 text-white p-4",children:S.jsx("p",{children:"Loading driver profile..."})});if(!t)return S.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen bg-gray-100 text-gray-900 p-4",children:[S.jsx("p",{className:"mb-4",children:"Driver profile not found."}),S.jsx(AE,{to:"/",className:"text-blue-500 hover:underline",children:"Return to Home"})]});const r=`${window.location.origin}/driver/${e}`;return S.jsx("div",{className:"flex justify-center p-4 bg-gray-100 min-h-screen text-gray-900",children:S.jsxs("div",{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-md",children:[S.jsx("div",{className:"flex justify-center mb-6",children:S.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden bg-gray-200 border-2 border-gray-900",children:t.image?S.jsx("img",{src:t.image,alt:`${t.name} profile`,className:"w-full h-full object-cover"}):S.jsx("div",{className:"text-gray-400 text-sm flex items-center justify-center h-full",children:"No Image"})})}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{children:[S.jsx("strong",{children:"Name:"})," ",t.name||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Plate:"})," ",t.plate||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Vehicle:"})," ",t.vehicle||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Status:"})," ",S.jsx("span",{className:`px-2 py-1 rounded text-sm font-semibold ${t.status==="Online"?"bg-green-600 text-green-100":"bg-red-600 text-red-100"}`,children:t.status||"Offline"})]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Age:"})," ",t.age||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Contact:"})," ",t.contact||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Payment Method:"})," ",t.paymentMethod||"N/A"]}),S.jsxs("div",{children:[S.jsxs("strong",{children:[t.paymentMethod||"Payment"," Number:"]})," ",t.paymentNumber||"N/A"]})]}),S.jsxs("div",{className:"text-center mt-8",children:[S.jsx("h2",{className:"font-bold text-sm mb-2",children:"Driver QR Code"}),S.jsx("div",{className:"bg-white p-4 rounded-lg w-fit mx-auto",children:S.jsx(Ux,{value:r,size:150})}),S.jsx("p",{className:"text-xs mt-2 text-gray-400 break-all",children:r})]})]})})};var Lb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var KN;function Wst(){return KN||(KN=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(r=s(r,i(c)))}return r}function i(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return n.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var a="";for(var c in r)t.call(r,c)&&r[c]&&(a=s(a,c));return a}function s(r,a){return a?r?r+" "+a:r+a:r}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(Lb)),Lb.exports}var Kst=Wst();const Yst=yE(Kst),Qst=({driver:e,onClose:t,onSaveSuccess:n,user:i})=>{const s=g_(),[r,a]=R.useState(!1),[c,u]=R.useState({name:e.name||"",plate:e.plate||"",status:e.status||"offline",contact:e.phone||"",age:e.age||"",paymentNumber:e.paymentNumber||""}),[d,f]=R.useState(!1);R.useEffect(()=>{setTimeout(()=>a(!0),10)},[]);const m=()=>{const{name:w,plate:T,contact:x,age:C}=c;if(!w||!T||!x||!C)return $t.error("Please fill in all required fields"),!1;if(!/^[0-9]{10,13}$/.test(x))return $t.error("Enter a valid contact number"),!1;const M=parseInt(C);return isNaN(M)||M<18||M>100?($t.error("Enter a valid age (18100)"),!1):!0},y=async()=>{if(m())try{f(!0),await JP(Qt(s,"drivers",e.id),{name:c.name,plate:c.plate,status:c.status,phone:c.contact,age:parseInt(c.age),paymentNumber:c.paymentNumber}),$t.success("Driver updated"),await Je(Qt(En(s,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Edited driver: ${e.name} (${e.plate})`,timestamp:as()}),n(),v()}catch(w){console.error(w),$t.error("Update failed")}finally{f(!1)}},v=()=>{a(!1),setTimeout(()=>t(),250)};return S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:S.jsxs("div",{className:Yst("bg-white p-6 rounded-lg max-w-md w-full transform transition-all duration-300 border border-gray-300 shadow-lg",{"scale-100 opacity-100":r,"scale-95 opacity-0":!r}),children:[S.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Edit Driver"}),S.jsxs("div",{className:"space-y-3",children:[S.jsx("input",{type:"text",placeholder:"Name",value:c.name,onChange:w=>u({...c,name:w.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsx("input",{type:"text",placeholder:"Plate",value:c.plate,onChange:w=>u({...c,plate:w.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsx("input",{type:"text",placeholder:"Contact",value:c.contact,onChange:w=>u({...c,contact:w.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsx("input",{type:"number",placeholder:"Age",value:c.age,onChange:w=>u({...c,age:w.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsx("input",{type:"text",placeholder:"Payment Number",value:c.paymentNumber,onChange:w=>u({...c,paymentNumber:w.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsxs("select",{value:c.status,onChange:w=>u({...c,status:w.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900",children:[S.jsx("option",{value:"offline",children:"Offline"}),S.jsx("option",{value:"online",children:"Online"})]})]}),S.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[S.jsx("button",{onClick:v,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",disabled:d,children:"Cancel"}),S.jsx("button",{onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",disabled:d,children:d?"Saving...":"Save"})]})]})})},V_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function oh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function iS(e){return"nodeType"in e}function Ki(e){var t,n;return e?oh(e)?e:iS(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function sS(e){const{Document:t}=Ki(e);return e instanceof t}function vp(e){return oh(e)?!1:e instanceof Ki(e).HTMLElement}function T4(e){return e instanceof Ki(e).SVGElement}function ah(e){return e?oh(e)?e.document:iS(e)?sS(e)?e:vp(e)||T4(e)?e.ownerDocument:document:document:document}const za=V_?R.useLayoutEffect:R.useEffect;function rS(e){const t=R.useRef(e);return za(()=>{t.current=e}),R.useCallback(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t.current==null?void 0:t.current(...i)},[])}function Xst(){const e=R.useRef(null),t=R.useCallback((i,s)=>{e.current=setInterval(i,s)},[]),n=R.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function x4(e,t){t===void 0&&(t=[e]);const n=R.useRef(e);return za(()=>{n.current!==e&&(n.current=e)},t),n}function bp(e,t){const n=R.useRef();return R.useMemo(()=>{const i=e(n.current);return n.current=i,i},[...t])}function Zst(e){const t=rS(e),n=R.useRef(null),i=R.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,i]}function dE(e){const t=R.useRef();return R.useEffect(()=>{t.current=e},[e]),t.current}let Vb={};function oS(e,t){return R.useMemo(()=>{if(t)return t;const n=Vb[e]==null?0:Vb[e]+1;return Vb[e]=n,e+"-"+n},[e,t])}function S4(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.reduce((r,a)=>{const c=Object.entries(a);for(const[u,d]of c){const f=r[u];f!=null&&(r[u]=f+e*d)}return r},{...t})}}const Ru=S4(1),$y=S4(-1);function Jst(e){return"clientX"in e&&"clientY"in e}function A4(e){if(!e)return!1;const{KeyboardEvent:t}=Ki(e.target);return t&&e instanceof t}function trt(e){if(!e)return!1;const{TouchEvent:t}=Ki(e.target);return t&&e instanceof t}function fE(e){if(trt(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Jst(e)?{x:e.clientX,y:e.clientY}:null}const YN="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ert(e){return e.matches(YN)?e:e.querySelector(YN)}const nrt={display:"none"};function irt(e){let{id:t,value:n}=e;return de.createElement("div",{id:t,style:nrt},n)}function srt(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return de.createElement("div",{id:t,style:s,role:"status","aria-live":i,"aria-atomic":!0},n)}function rrt(){const[e,t]=R.useState("");return{announce:R.useCallback(i=>{i!=null&&t(i)},[]),announcement:e}}const C4=R.createContext(null);function ort(e){const t=R.useContext(C4);R.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function art(){const[e]=R.useState(()=>new Set),t=R.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[R.useCallback(i=>{let{type:s,event:r}=i;e.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,r)})},[e]),t]}const lrt={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},crt={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function urt(e){let{announcements:t=crt,container:n,hiddenTextDescribedById:i,screenReaderInstructions:s=lrt}=e;const{announce:r,announcement:a}=rrt(),c=oS("DndLiveRegion"),[u,d]=R.useState(!1);if(R.useEffect(()=>{d(!0)},[]),ort(R.useMemo(()=>({onDragStart(m){let{active:y}=m;r(t.onDragStart({active:y}))},onDragMove(m){let{active:y,over:v}=m;t.onDragMove&&r(t.onDragMove({active:y,over:v}))},onDragOver(m){let{active:y,over:v}=m;r(t.onDragOver({active:y,over:v}))},onDragEnd(m){let{active:y,over:v}=m;r(t.onDragEnd({active:y,over:v}))},onDragCancel(m){let{active:y,over:v}=m;r(t.onDragCancel({active:y,over:v}))}}),[r,t])),!u)return null;const f=de.createElement(de.Fragment,null,de.createElement(irt,{id:i,value:s.draggable}),de.createElement(srt,{id:c,announcement:a}));return n?wd.createPortal(f,n):f}var gi;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(gi||(gi={}));function Gy(){}function hrt(e,t){return R.useMemo(()=>({sensor:e,options:{}}),[e,t])}function drt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>[...t].filter(i=>i!=null),[...t])}const nr=Object.freeze({x:0,y:0});function frt(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function prt(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return n-i}function mrt(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return i-n}function grt(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function QN(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const yrt=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const s=QN(t,t.left,t.top),r=[];for(const a of i){const{id:c}=a,u=n.get(c);if(u){const d=frt(QN(u),s);r.push({id:c,data:{droppableContainer:a,value:d}})}}return r.sort(prt)};function _rt(e,t){const n=Math.max(t.top,e.top),i=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),r=Math.min(t.top+t.height,e.top+e.height),a=s-i,c=r-n;if(i<s&&n<r){const u=t.width*t.height,d=e.width*e.height,f=a*c,m=f/(u+d-f);return Number(m.toFixed(4))}return 0}const vrt=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const s=[];for(const r of i){const{id:a}=r,c=n.get(a);if(c){const u=_rt(c,t);u>0&&s.push({id:a,data:{droppableContainer:r,value:u}})}}return s.sort(mrt)};function brt(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function R4(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:nr}function wrt(e){return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return s.reduce((a,c)=>({...a,top:a.top+e*c.y,bottom:a.bottom+e*c.y,left:a.left+e*c.x,right:a.right+e*c.x}),{...n})}}const Ert=wrt(1);function Trt(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function xrt(e,t,n){const i=Trt(t);if(!i)return e;const{scaleX:s,scaleY:r,x:a,y:c}=i,u=e.left-a-(1-s)*parseFloat(n),d=e.top-c-(1-r)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?e.width/s:e.width,m=r?e.height/r:e.height;return{width:f,height:m,top:d,right:u+f,bottom:d+m,left:u}}const Srt={ignoreTransform:!1};function wp(e,t){t===void 0&&(t=Srt);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:f}=Ki(e).getComputedStyle(e);d&&(n=xrt(n,d,f))}const{top:i,left:s,width:r,height:a,bottom:c,right:u}=n;return{top:i,left:s,width:r,height:a,bottom:c,right:u}}function XN(e){return wp(e,{ignoreTransform:!0})}function Art(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Crt(e,t){return t===void 0&&(t=Ki(e).getComputedStyle(e)),t.position==="fixed"}function Rrt(e,t){t===void 0&&(t=Ki(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const r=t[s];return typeof r=="string"?n.test(r):!1})}function aS(e,t){const n=[];function i(s){if(t!=null&&n.length>=t||!s)return n;if(sS(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!vp(s)||T4(s)||n.includes(s))return n;const r=Ki(e).getComputedStyle(s);return s!==e&&Rrt(s,r)&&n.push(s),Crt(s,r)?n:i(s.parentNode)}return e?i(e):n}function I4(e){const[t]=aS(e,1);return t??null}function jb(e){return!V_||!e?null:oh(e)?e:iS(e)?sS(e)||e===ah(e).scrollingElement?window:vp(e)?e:null:null}function D4(e){return oh(e)?e.scrollX:e.scrollLeft}function M4(e){return oh(e)?e.scrollY:e.scrollTop}function pE(e){return{x:D4(e),y:M4(e)}}var Qn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Qn||(Qn={}));function N4(e){return!V_||!e?!1:e===document.scrollingElement}function k4(e){const t={x:0,y:0},n=N4(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,r=e.scrollLeft<=t.x,a=e.scrollTop>=i.y,c=e.scrollLeft>=i.x;return{isTop:s,isLeft:r,isBottom:a,isRight:c,maxScroll:i,minScroll:t}}const Irt={x:.2,y:.2};function Drt(e,t,n,i,s){let{top:r,left:a,right:c,bottom:u}=n;i===void 0&&(i=10),s===void 0&&(s=Irt);const{isTop:d,isBottom:f,isLeft:m,isRight:y}=k4(e),v={x:0,y:0},w={x:0,y:0},T={height:t.height*s.y,width:t.width*s.x};return!d&&r<=t.top+T.height?(v.y=Qn.Backward,w.y=i*Math.abs((t.top+T.height-r)/T.height)):!f&&u>=t.bottom-T.height&&(v.y=Qn.Forward,w.y=i*Math.abs((t.bottom-T.height-u)/T.height)),!y&&c>=t.right-T.width?(v.x=Qn.Forward,w.x=i*Math.abs((t.right-T.width-c)/T.width)):!m&&a<=t.left+T.width&&(v.x=Qn.Backward,w.x=i*Math.abs((t.left+T.width-a)/T.width)),{direction:v,speed:w}}function Mrt(e){if(e===document.scrollingElement){const{innerWidth:r,innerHeight:a}=window;return{top:0,left:0,right:r,bottom:a,width:r,height:a}}const{top:t,left:n,right:i,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:s,width:e.clientWidth,height:e.clientHeight}}function P4(e){return e.reduce((t,n)=>Ru(t,pE(n)),nr)}function Nrt(e){return e.reduce((t,n)=>t+D4(n),0)}function krt(e){return e.reduce((t,n)=>t+M4(n),0)}function Prt(e,t){if(t===void 0&&(t=wp),!e)return;const{top:n,left:i,bottom:s,right:r}=t(e);I4(e)&&(s<=0||r<=0||n>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ort=[["x",["left","right"],Nrt],["y",["top","bottom"],krt]];class lS{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=aS(n),s=P4(i);this.rect={...t},this.width=t.width,this.height=t.height;for(const[r,a,c]of Ort)for(const u of a)Object.defineProperty(this,u,{get:()=>{const d=c(i),f=s[r]-d;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class nf{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=t}add(t,n,i){var s;(s=this.target)==null||s.addEventListener(t,n,i),this.listeners.push([t,n,i])}}function Lrt(e){const{EventTarget:t}=Ki(e);return e instanceof t?e:ah(e)}function Ub(e,t){const n=Math.abs(e.x),i=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t?i>t.y:!1}var Ds;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ds||(Ds={}));function ZN(e){e.preventDefault()}function Vrt(e){e.stopPropagation()}var Ie;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ie||(Ie={}));const O4={start:[Ie.Space,Ie.Enter],cancel:[Ie.Esc],end:[Ie.Space,Ie.Enter,Ie.Tab]},jrt=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Ie.Right:return{...n,x:n.x+25};case Ie.Left:return{...n,x:n.x-25};case Ie.Down:return{...n,y:n.y+25};case Ie.Up:return{...n,y:n.y-25}}};class L4{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new nf(ah(n)),this.windowListeners=new nf(Ki(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ds.Resize,this.handleCancel),this.windowListeners.add(Ds.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ds.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,i=t.node.current;i&&Prt(i),n(nr)}handleKeyDown(t){if(A4(t)){const{active:n,context:i,options:s}=this.props,{keyboardCodes:r=O4,coordinateGetter:a=jrt,scrollBehavior:c="smooth"}=s,{code:u}=t;if(r.end.includes(u)){this.handleEnd(t);return}if(r.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=i.current,f=d?{x:d.left,y:d.top}:nr;this.referenceCoordinates||(this.referenceCoordinates=f);const m=a(t,{active:n,context:i.current,currentCoordinates:f});if(m){const y=$y(m,f),v={x:0,y:0},{scrollableAncestors:w}=i.current;for(const T of w){const x=t.code,{isTop:C,isRight:k,isLeft:M,isBottom:z,maxScroll:j,minScroll:$}=k4(T),O=Mrt(T),D={x:Math.min(x===Ie.Right?O.right-O.width/2:O.right,Math.max(x===Ie.Right?O.left:O.left+O.width/2,m.x)),y:Math.min(x===Ie.Down?O.bottom-O.height/2:O.bottom,Math.max(x===Ie.Down?O.top:O.top+O.height/2,m.y))},N=x===Ie.Right&&!k||x===Ie.Left&&!M,L=x===Ie.Down&&!z||x===Ie.Up&&!C;if(N&&D.x!==m.x){const F=T.scrollLeft+y.x,H=x===Ie.Right&&F<=j.x||x===Ie.Left&&F>=$.x;if(H&&!y.y){T.scrollTo({left:F,behavior:c});return}H?v.x=T.scrollLeft-F:v.x=x===Ie.Right?T.scrollLeft-j.x:T.scrollLeft-$.x,v.x&&T.scrollBy({left:-v.x,behavior:c});break}else if(L&&D.y!==m.y){const F=T.scrollTop+y.y,H=x===Ie.Down&&F<=j.y||x===Ie.Up&&F>=$.y;if(H&&!y.x){T.scrollTo({top:F,behavior:c});return}H?v.y=T.scrollTop-F:v.y=x===Ie.Down?T.scrollTop-j.y:T.scrollTop-$.y,v.y&&T.scrollBy({top:-v.y,behavior:c});break}}this.handleMove(t,Ru($y(m,this.referenceCoordinates),v))}}}handleMove(t,n){const{onMove:i}=this.props;t.preventDefault(),i(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}L4.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:i=O4,onActivation:s}=t,{active:r}=n;const{code:a}=e.nativeEvent;if(i.start.includes(a)){const c=r.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function JN(e){return!!(e&&"distance"in e)}function t2(e){return!!(e&&"delay"in e)}class cS{constructor(t,n,i){var s;i===void 0&&(i=Lrt(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:r}=t,{target:a}=r;this.props=t,this.events=n,this.document=ah(a),this.documentListeners=new nf(this.document),this.listeners=new nf(i),this.windowListeners=new nf(Ki(a)),this.initialCoordinates=(s=fE(r))!=null?s:nr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ds.Resize,this.handleCancel),this.windowListeners.add(Ds.DragStart,ZN),this.windowListeners.add(Ds.VisibilityChange,this.handleCancel),this.windowListeners.add(Ds.ContextMenu,ZN),this.documentListeners.add(Ds.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(t2(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(JN(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:i,onPending:s}=this.props;s(i,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ds.Click,Vrt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ds.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:i,initialCoordinates:s,props:r}=this,{onMove:a,options:{activationConstraint:c}}=r;if(!s)return;const u=(n=fE(t))!=null?n:nr,d=$y(s,u);if(!i&&c){if(JN(c)){if(c.tolerance!=null&&Ub(d,c.tolerance))return this.handleCancel();if(Ub(d,c.distance))return this.handleStart()}if(t2(c)&&Ub(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Ie.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Urt={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class uS extends cS{constructor(t){const{event:n}=t,i=ah(n.target);super(t,Urt,i)}}uS.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return!n.isPrimary||n.button!==0?!1:(i==null||i({event:n}),!0)}}];const Frt={move:{name:"mousemove"},end:{name:"mouseup"}};var mE;(function(e){e[e.RightClick=2]="RightClick"})(mE||(mE={}));class Brt extends cS{constructor(t){super(t,Frt,ah(t.event.target))}}Brt.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return n.button===mE.RightClick?!1:(i==null||i({event:n}),!0)}}];const Fb={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class zrt extends cS{constructor(t){super(t,Fb)}static setup(){return window.addEventListener(Fb.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Fb.move.name,t)};function t(){}}}zrt.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;const{touches:s}=n;return s.length>1?!1:(i==null||i({event:n}),!0)}}];var sf;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(sf||(sf={}));var Wy;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Wy||(Wy={}));function Hrt(e){let{acceleration:t,activator:n=sf.Pointer,canScroll:i,draggingRect:s,enabled:r,interval:a=5,order:c=Wy.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:f,delta:m,threshold:y}=e;const v=$rt({delta:m,disabled:!r}),[w,T]=Xst(),x=R.useRef({x:0,y:0}),C=R.useRef({x:0,y:0}),k=R.useMemo(()=>{switch(n){case sf.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case sf.DraggableRect:return s}},[n,s,u]),M=R.useRef(null),z=R.useCallback(()=>{const $=M.current;if(!$)return;const O=x.current.x*C.current.x,D=x.current.y*C.current.y;$.scrollBy(O,D)},[]),j=R.useMemo(()=>c===Wy.TreeOrder?[...d].reverse():d,[c,d]);R.useEffect(()=>{if(!r||!d.length||!k){T();return}for(const $ of j){if((i==null?void 0:i($))===!1)continue;const O=d.indexOf($),D=f[O];if(!D)continue;const{direction:N,speed:L}=Drt($,D,k,t,y);for(const F of["x","y"])v[F][N[F]]||(L[F]=0,N[F]=0);if(L.x>0||L.y>0){T(),M.current=$,w(z,a),x.current=L,C.current=N;return}}x.current={x:0,y:0},C.current={x:0,y:0},T()},[t,z,i,T,r,a,JSON.stringify(k),JSON.stringify(v),w,d,j,f,JSON.stringify(y)])}const qrt={x:{[Qn.Backward]:!1,[Qn.Forward]:!1},y:{[Qn.Backward]:!1,[Qn.Forward]:!1}};function $rt(e){let{delta:t,disabled:n}=e;const i=dE(t);return bp(s=>{if(n||!i||!s)return qrt;const r={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[Qn.Backward]:s.x[Qn.Backward]||r.x===-1,[Qn.Forward]:s.x[Qn.Forward]||r.x===1},y:{[Qn.Backward]:s.y[Qn.Backward]||r.y===-1,[Qn.Forward]:s.y[Qn.Forward]||r.y===1}}},[n,t,i])}function Grt(e,t){const n=t!=null?e.get(t):void 0,i=n?n.node.current:null;return bp(s=>{var r;return t==null?null:(r=i??s)!=null?r:null},[i,t])}function Wrt(e,t){return R.useMemo(()=>e.reduce((n,i)=>{const{sensor:s}=i,r=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,i)}));return[...n,...r]},[]),[e,t])}var Uf;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Uf||(Uf={}));var gE;(function(e){e.Optimized="optimized"})(gE||(gE={}));const e2=new Map;function Krt(e,t){let{dragging:n,dependencies:i,config:s}=t;const[r,a]=R.useState(null),{frequency:c,measure:u,strategy:d}=s,f=R.useRef(e),m=x(),y=x4(m),v=R.useCallback(function(C){C===void 0&&(C=[]),!y.current&&a(k=>k===null?C:k.concat(C.filter(M=>!k.includes(M))))},[y]),w=R.useRef(null),T=bp(C=>{if(m&&!n)return e2;if(!C||C===e2||f.current!==e||r!=null){const k=new Map;for(let M of e){if(!M)continue;if(r&&r.length>0&&!r.includes(M.id)&&M.rect.current){k.set(M.id,M.rect.current);continue}const z=M.node.current,j=z?new lS(u(z),z):null;M.rect.current=j,j&&k.set(M.id,j)}return k}return C},[e,r,n,m,u]);return R.useEffect(()=>{f.current=e},[e]),R.useEffect(()=>{m||v()},[n,m]),R.useEffect(()=>{r&&r.length>0&&a(null)},[JSON.stringify(r)]),R.useEffect(()=>{m||typeof c!="number"||w.current!==null||(w.current=setTimeout(()=>{v(),w.current=null},c))},[c,m,v,...i]),{droppableRects:T,measureDroppableContainers:v,measuringScheduled:r!=null};function x(){switch(d){case Uf.Always:return!1;case Uf.BeforeDragging:return n;default:return!n}}}function V4(e,t){return bp(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Yrt(e,t){return V4(e,t)}function Qrt(e){let{callback:t,disabled:n}=e;const i=rS(t),s=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:r}=window;return new r(i)},[i,n]);return R.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function hS(e){let{callback:t,disabled:n}=e;const i=rS(t),s=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:r}=window;return new r(i)},[n]);return R.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Xrt(e){return new lS(wp(e),e)}function n2(e,t,n){t===void 0&&(t=Xrt);const[i,s]=R.useState(null);function r(){s(u=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=u??n)!=null?d:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const a=Qrt({callback(u){if(e)for(const d of u){const{type:f,target:m}=d;if(f==="childList"&&m instanceof HTMLElement&&m.contains(e)){r();break}}}}),c=hS({callback:r});return za(()=>{r(),e?(c==null||c.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[e]),i}function Zrt(e){const t=V4(e);return R4(e,t)}const i2=[];function Jrt(e){const t=R.useRef(e),n=bp(i=>e?i&&i!==i2&&e&&t.current&&e.parentNode===t.current.parentNode?i:aS(e):i2,[e]);return R.useEffect(()=>{t.current=e},[e]),n}function tot(e){const[t,n]=R.useState(null),i=R.useRef(e),s=R.useCallback(r=>{const a=jb(r.target);a&&n(c=>c?(c.set(a,pE(a)),new Map(c)):null)},[]);return R.useEffect(()=>{const r=i.current;if(e!==r){a(r);const c=e.map(u=>{const d=jb(u);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,pE(d)]):null}).filter(u=>u!=null);n(c.length?new Map(c):null),i.current=e}return()=>{a(e),a(r)};function a(c){c.forEach(u=>{const d=jb(u);d==null||d.removeEventListener("scroll",s)})}},[s,e]),R.useMemo(()=>e.length?t?Array.from(t.values()).reduce((r,a)=>Ru(r,a),nr):P4(e):nr,[e,t])}function s2(e,t){t===void 0&&(t=[]);const n=R.useRef(null);return R.useEffect(()=>{n.current=null},t),R.useEffect(()=>{const i=e!==nr;i&&!n.current&&(n.current=e),!i&&n.current&&(n.current=null)},[e]),n.current?$y(e,n.current):nr}function eot(e){R.useEffect(()=>{if(!V_)return;const t=e.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function j4(e){return R.useMemo(()=>e?Art(e):null,[e])}const r2=[];function not(e,t){t===void 0&&(t=wp);const[n]=e,i=j4(n?Ki(n):null),[s,r]=R.useState(r2);function a(){r(()=>e.length?e.map(u=>N4(u)?i:new lS(t(u),u)):r2)}const c=hS({callback:a});return za(()=>{c==null||c.disconnect(),a(),e.forEach(u=>c==null?void 0:c.observe(u))},[e]),s}function iot(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return vp(t)?t:e}function sot(e){let{measure:t}=e;const[n,i]=R.useState(null),s=R.useCallback(d=>{for(const{target:f}of d)if(vp(f)){i(m=>{const y=t(f);return m?{...m,width:y.width,height:y.height}:y});break}},[t]),r=hS({callback:s}),a=R.useCallback(d=>{const f=iot(d);r==null||r.disconnect(),f&&(r==null||r.observe(f)),i(f?t(f):null)},[t,r]),[c,u]=Zst(a);return R.useMemo(()=>({nodeRef:c,rect:n,setRef:u}),[n,c,u])}const rot=[{sensor:uS,options:{}},{sensor:L4,options:{}}],oot={current:{}},qg={draggable:{measure:XN},droppable:{measure:XN,strategy:Uf.WhileDragging,frequency:gE.Optimized},dragOverlay:{measure:wp}};class rf extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,i;return(n=(i=this.get(t))==null?void 0:i.node.current)!=null?n:void 0}}const aot={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gy},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:qg,measureDroppableContainers:Gy,windowRect:null,measuringScheduled:!1},lot={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gy,draggableNodes:new Map,over:null,measureDroppableContainers:Gy},U4=R.createContext(lot),F4=R.createContext(aot);function cot(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rf}}}function uot(e,t){switch(t.type){case gi.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case gi.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case gi.DragEnd:case gi.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case gi.RegisterDroppable:{const{element:n}=t,{id:i}=n,s=new rf(e.droppable.containers);return s.set(i,n),{...e,droppable:{...e.droppable,containers:s}}}case gi.SetDroppableDisabled:{const{id:n,key:i,disabled:s}=t,r=e.droppable.containers.get(n);if(!r||i!==r.key)return e;const a=new rf(e.droppable.containers);return a.set(n,{...r,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case gi.UnregisterDroppable:{const{id:n,key:i}=t,s=e.droppable.containers.get(n);if(!s||i!==s.key)return e;const r=new rf(e.droppable.containers);return r.delete(n),{...e,droppable:{...e.droppable,containers:r}}}default:return e}}function hot(e){let{disabled:t}=e;const{active:n,activatorEvent:i,draggableNodes:s}=R.useContext(U4),r=dE(i),a=dE(n==null?void 0:n.id);return R.useEffect(()=>{if(!t&&!i&&r&&a!=null){if(!A4(r)||document.activeElement===r.target)return;const c=s.get(a);if(!c)return;const{activatorNode:u,node:d}=c;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const f of[u.current,d.current]){if(!f)continue;const m=ert(f);if(m){m.focus();break}}})}},[i,t,s,a,r]),null}function dot(e,t){let{transform:n,...i}=t;return e!=null&&e.length?e.reduce((s,r)=>r({transform:s,...i}),n):n}function fot(e){return R.useMemo(()=>({draggable:{...qg.draggable,...e==null?void 0:e.draggable},droppable:{...qg.droppable,...e==null?void 0:e.droppable},dragOverlay:{...qg.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function pot(e){let{activeNode:t,measure:n,initialRect:i,config:s=!0}=e;const r=R.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;za(()=>{if(!a&&!c||!t){r.current=!1;return}if(r.current||!i)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const f=n(d),m=R4(f,i);if(a||(m.x=0),c||(m.y=0),r.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=I4(d);y&&y.scrollBy({top:m.y,left:m.x})}},[t,a,c,i,n])}const mot=R.createContext({...nr,scaleX:1,scaleY:1});var pa;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(pa||(pa={}));const got=R.memo(function(t){var n,i,s,r;let{id:a,accessibility:c,autoScroll:u=!0,children:d,sensors:f=rot,collisionDetection:m=vrt,measuring:y,modifiers:v,...w}=t;const T=R.useReducer(uot,void 0,cot),[x,C]=T,[k,M]=art(),[z,j]=R.useState(pa.Uninitialized),$=z===pa.Initialized,{draggable:{active:O,nodes:D,translate:N},droppable:{containers:L}}=x,F=O!=null?D.get(O):null,H=R.useRef({initial:null,translated:null}),B=R.useMemo(()=>{var qt;return O!=null?{id:O,data:(qt=F==null?void 0:F.data)!=null?qt:oot,rect:H}:null},[O,F]),_t=R.useRef(null),[ft,K]=R.useState(null),[tt,dt]=R.useState(null),yt=x4(w,Object.values(w)),U=oS("DndDescribedBy",a),J=R.useMemo(()=>L.getEnabled(),[L]),ot=fot(y),{droppableRects:st,measureDroppableContainers:pt,measuringScheduled:St}=Krt(J,{dragging:$,dependencies:[N.x,N.y],config:ot.droppable}),gt=Grt(D,O),ue=R.useMemo(()=>tt?fE(tt):null,[tt]),vt=Xt(),Vt=Yrt(gt,ot.draggable.measure);pot({activeNode:O!=null?D.get(O):null,config:vt.layoutShiftCompensation,initialRect:Vt,measure:ot.draggable.measure});const Mt=n2(gt,ot.draggable.measure,Vt),zt=n2(gt?gt.parentElement:null),Ct=R.useRef({activatorEvent:null,active:null,activeNode:gt,collisionRect:null,collisions:null,droppableRects:st,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),At=L.getNodeFor((n=Ct.current.over)==null?void 0:n.id),me=sot({measure:ot.dragOverlay.measure}),qe=(i=me.nodeRef.current)!=null?i:gt,Bn=$?(s=me.rect)!=null?s:Mt:null,Se=!!(me.nodeRef.current&&me.rect),ti=Zrt(Se?null:Mt),Sn=j4(qe?Ki(qe):null),ln=Jrt($?At??gt:null),kn=not(ln),Pi=dot(v,{transform:{x:N.x-ti.x,y:N.y-ti.y,scaleX:1,scaleY:1},activatorEvent:tt,active:B,activeNodeRect:Mt,containerNodeRect:zt,draggingNodeRect:Bn,over:Ct.current.over,overlayNodeRect:me.rect,scrollableAncestors:ln,scrollableAncestorRects:kn,windowRect:Sn}),Yi=ue?Ru(ue,N):null,sr=tot(ln),jr=s2(sr),Ge=s2(sr,[Mt]),Jt=Ru(Pi,jr),hn=Bn?Ert(Bn,Pi):null,We=B&&hn?m({active:B,collisionRect:hn,droppableRects:st,droppableContainers:J,pointerCoordinates:Yi}):null,js=grt(We,"id"),[Oi,fs]=R.useState(null),Us=Se?Pi:Ru(Pi,Ge),Q=brt(Us,(r=Oi==null?void 0:Oi.rect)!=null?r:null,Mt),ht=R.useRef(null),kt=R.useCallback((qt,Ce)=>{let{sensor:Nt,options:yn}=Ce;if(_t.current==null)return;const Zt=D.get(_t.current);if(!Zt)return;const Ut=qt.nativeEvent,se=new Nt({active:_t.current,activeNode:Zt,event:Ut,options:yn,context:Ct,onAbort(Rt){if(!D.get(Rt))return;const{onDragAbort:he}=yt.current,Ke={id:Rt};he==null||he(Ke),k({type:"onDragAbort",event:Ke})},onPending(Rt,ne,he,Ke){if(!D.get(Rt))return;const{onDragPending:ps}=yt.current,Pn={id:Rt,constraint:ne,initialCoordinates:he,offset:Ke};ps==null||ps(Pn),k({type:"onDragPending",event:Pn})},onStart(Rt){const ne=_t.current;if(ne==null)return;const he=D.get(ne);if(!he)return;const{onDragStart:Ke}=yt.current,Qi={activatorEvent:Ut,active:{id:ne,data:he.data,rect:H}};wd.unstable_batchedUpdates(()=>{Ke==null||Ke(Qi),j(pa.Initializing),C({type:gi.DragStart,initialCoordinates:Rt,active:ne}),k({type:"onDragStart",event:Qi}),K(ht.current),dt(Ut)})},onMove(Rt){C({type:gi.DragMove,coordinates:Rt})},onEnd:De(gi.DragEnd),onCancel:De(gi.DragCancel)});ht.current=se;function De(Rt){return async function(){const{active:he,collisions:Ke,over:Qi,scrollAdjustedTranslate:ps}=Ct.current;let Pn=null;if(he&&ps){const{cancelDrop:ms}=yt.current;Pn={activatorEvent:Ut,active:he,collisions:Ke,delta:ps,over:Qi},Rt===gi.DragEnd&&typeof ms=="function"&&await Promise.resolve(ms(Pn))&&(Rt=gi.DragCancel)}_t.current=null,wd.unstable_batchedUpdates(()=>{C({type:Rt}),j(pa.Uninitialized),fs(null),K(null),dt(null),ht.current=null;const ms=Rt===gi.DragEnd?"onDragEnd":"onDragCancel";if(Pn){const Xi=yt.current[ms];Xi==null||Xi(Pn),k({type:ms,event:Pn})}})}}},[D]),Ht=R.useCallback((qt,Ce)=>(Nt,yn)=>{const Zt=Nt.nativeEvent,Ut=D.get(yn);if(_t.current!==null||!Ut||Zt.dndKit||Zt.defaultPrevented)return;const se={active:Ut};qt(Nt,Ce.options,se)===!0&&(Zt.dndKit={capturedBy:Ce.sensor},_t.current=yn,kt(Nt,Ce))},[D,kt]),ge=Wrt(f,Ht);eot(f),za(()=>{Mt&&z===pa.Initializing&&j(pa.Initialized)},[Mt,z]),R.useEffect(()=>{const{onDragMove:qt}=yt.current,{active:Ce,activatorEvent:Nt,collisions:yn,over:Zt}=Ct.current;if(!Ce||!Nt)return;const Ut={active:Ce,activatorEvent:Nt,collisions:yn,delta:{x:Jt.x,y:Jt.y},over:Zt};wd.unstable_batchedUpdates(()=>{qt==null||qt(Ut),k({type:"onDragMove",event:Ut})})},[Jt.x,Jt.y]),R.useEffect(()=>{const{active:qt,activatorEvent:Ce,collisions:Nt,droppableContainers:yn,scrollAdjustedTranslate:Zt}=Ct.current;if(!qt||_t.current==null||!Ce||!Zt)return;const{onDragOver:Ut}=yt.current,se=yn.get(js),De=se&&se.rect.current?{id:se.id,rect:se.rect.current,data:se.data,disabled:se.disabled}:null,Rt={active:qt,activatorEvent:Ce,collisions:Nt,delta:{x:Zt.x,y:Zt.y},over:De};wd.unstable_batchedUpdates(()=>{fs(De),Ut==null||Ut(Rt),k({type:"onDragOver",event:Rt})})},[js]),za(()=>{Ct.current={activatorEvent:tt,active:B,activeNode:gt,collisionRect:hn,collisions:We,droppableRects:st,draggableNodes:D,draggingNode:qe,draggingNodeRect:Bn,droppableContainers:L,over:Oi,scrollableAncestors:ln,scrollAdjustedTranslate:Jt},H.current={initial:Bn,translated:hn}},[B,gt,We,hn,D,qe,Bn,st,L,Oi,ln,Jt]),Hrt({...vt,delta:N,draggingRect:hn,pointerCoordinates:Yi,scrollableAncestors:ln,scrollableAncestorRects:kn});const Ae=R.useMemo(()=>({active:B,activeNode:gt,activeNodeRect:Mt,activatorEvent:tt,collisions:We,containerNodeRect:zt,dragOverlay:me,draggableNodes:D,droppableContainers:L,droppableRects:st,over:Oi,measureDroppableContainers:pt,scrollableAncestors:ln,scrollableAncestorRects:kn,measuringConfiguration:ot,measuringScheduled:St,windowRect:Sn}),[B,gt,Mt,tt,We,zt,me,D,L,st,Oi,pt,ln,kn,ot,St,Sn]),Kt=R.useMemo(()=>({activatorEvent:tt,activators:ge,active:B,activeNodeRect:Mt,ariaDescribedById:{draggable:U},dispatch:C,draggableNodes:D,over:Oi,measureDroppableContainers:pt}),[tt,ge,B,Mt,C,U,D,Oi,pt]);return de.createElement(C4.Provider,{value:M},de.createElement(U4.Provider,{value:Kt},de.createElement(F4.Provider,{value:Ae},de.createElement(mot.Provider,{value:Q},d)),de.createElement(hot,{disabled:(c==null?void 0:c.restoreFocus)===!1})),de.createElement(urt,{...c,hiddenTextDescribedById:U}));function Xt(){const qt=(ft==null?void 0:ft.autoScrollEnabled)===!1,Ce=typeof u=="object"?u.enabled===!1:u===!1,Nt=$&&!qt&&!Ce;return typeof u=="object"?{...u,enabled:Nt}:{enabled:Nt}}});function yot(){return R.useContext(F4)}function B4(e,t,n){const i=e.slice();return i.splice(n<0?i.length+n:n,0,i.splice(t,1)[0]),i}function _ot(e,t){return e.reduce((n,i,s)=>{const r=t.get(i);return r&&(n[s]=r),n},Array(e.length))}function vot(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function bot(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const z4=e=>{let{rects:t,activeIndex:n,overIndex:i,index:s}=e;const r=B4(t,i,n),a=t[s],c=r[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},yg={scaleX:1,scaleY:1},wot=e=>{var t;let{activeIndex:n,activeNodeRect:i,index:s,rects:r,overIndex:a}=e;const c=(t=r[n])!=null?t:i;if(!c)return null;if(s===n){const d=r[a];return d?{x:0,y:n<a?d.top+d.height-(c.top+c.height):d.top-c.top,...yg}:null}const u=Eot(r,s,n);return s>n&&s<=a?{x:0,y:-c.height-u,...yg}:s<n&&s>=a?{x:0,y:c.height+u,...yg}:{x:0,y:0,...yg}};function Eot(e,t,n){const i=e[t],s=e[t-1],r=e[t+1];return i?n<t?s?i.top-(s.top+s.height):r?r.top-(i.top+i.height):0:r?r.top-(i.top+i.height):s?i.top-(s.top+s.height):0:0}const H4="Sortable",Tot=de.createContext({activeIndex:-1,containerId:H4,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:z4,disabled:{draggable:!1,droppable:!1}});function xot(e){let{children:t,id:n,items:i,strategy:s=z4,disabled:r=!1}=e;const{active:a,dragOverlay:c,droppableRects:u,over:d,measureDroppableContainers:f}=yot(),m=oS(H4,n),y=c.rect!==null,v=R.useMemo(()=>i.map($=>typeof $=="object"&&"id"in $?$.id:$),[i]),w=a!=null,T=a?v.indexOf(a.id):-1,x=d?v.indexOf(d.id):-1,C=R.useRef(v),k=!vot(v,C.current),M=x!==-1&&T===-1||k,z=bot(r);za(()=>{k&&w&&f(v)},[k,v,w,f]),R.useEffect(()=>{C.current=v},[v]);const j=R.useMemo(()=>({activeIndex:T,containerId:m,disabled:z,disableTransforms:M,items:v,overIndex:x,useDragOverlay:y,sortedRects:_ot(v,u),strategy:s}),[T,m,z.draggable,z.droppable,M,v,x,u,y,s]);return de.createElement(Tot.Provider,{value:j},t)}Ie.Down,Ie.Right,Ie.Up,Ie.Left;_p.register(vu,_4,g4);const o2=e=>e.trim().toLowerCase(),Sot=()=>{const e=g_(),t=wk(),n=rc(),[i,s]=R.useState(null),[r,a]=R.useState([]),[c,u]=R.useState([]),[d,f]=R.useState([]),[m,y]=R.useState([]),[v,w]=R.useState(""),[T,x]=R.useState("analytics"),[C,k]=R.useState(!1),[M,z]=R.useState(null),[j,$]=R.useState("weekly"),[O,D]=R.useState([]),[N,L]=R.useState({}),[F,H]=R.useState(0),[B,_t]=R.useState(0),[ft,K]=R.useState(!1),[tt,dt]=R.useState(null),[yt,U]=R.useState(null),[J,ot]=R.useState(new Date),[st,pt]=R.useState([]),[St,gt]=R.useState(!1),[ue,vt]=R.useState(!1),[Vt,Mt]=R.useState([]),[zt,Ct]=R.useState([]),[At,me]=R.useState(window.innerWidth>=768),[qe,Bn]=R.useState(window.innerWidth<768);R.useEffect(()=>{const Q=()=>{Bn(window.innerWidth<768)};return window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),R.useEffect(()=>(qe&&At?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[qe,At]);const Se=R.useRef(new Map),ti=R.useRef(new Set),Sn=R.useRef(0);R.useEffect(()=>{const Q=HE(t,ht=>{ht?s(ht):n("/login")});return()=>Q()},[t,n]),R.useEffect(()=>{if(!i)return;console.log("User in Admin:",i);const Q=Id(En(e,"drivers"),Kt=>{const Xt=Kt.docs.map(Nt=>({id:Nt.id,...Nt.data()}));console.log(" Firestore snapshot received - Total drivers:",Kt.docs.length),console.log(" All drivers data:",Xt.map(Nt=>({id:Nt.id,name:Nt.name,email:Nt.email,verified:Nt.verified,createdAt:Nt.createdAt})));const qt=Xt.filter(Nt=>Nt.verified===!0),Ce=Xt.filter(Nt=>Nt.verified===!1);if(console.log(" Verified drivers:",qt.length,qt.map(Nt=>({id:Nt.id,name:Nt.name,verified:Nt.verified}))),console.log(" Pending drivers:",Ce.length,Ce.map(Nt=>({id:Nt.id,name:Nt.name,verified:Nt.verified}))),a(qt),u(Ce),Ce.length>Sn.current){const Nt=Ce.length-Sn.current;console.log(" New pending requests detected:",Nt),$t(`New pending registration request${Nt>1?"s":""} (${Nt})`)}Sn.current=Ce.length},Kt=>{console.error(" Error fetching drivers:",Kt),$t.error("Error fetching drivers: "+Kt.message)}),ht=mo(En(e,"queues"),Cd("joinedAt","asc")),kt=Id(ht,async Kt=>{const Xt=Kt.docs.map(Zt=>({id:Zt.id,...Zt.data()}));f(Xt);const qt=new Set(Xt.map(Zt=>Zt.driverId)),Ce=ti.current,Nt=Array.from(Ce).filter(Zt=>!qt.has(Zt)),yn=Array.from(qt);for(const Zt of Nt){const Ut=Se.current.get(Zt);Ut&&clearTimeout(Ut);const se=Qt(e,"drivers",Zt),De=await np(se);if(De.exists()&&De.data().status==="offline")continue;try{await Je(se,{status:"in ride",leftAt:as()},{merge:!0})}catch(ne){$t.error("Failed to update driver status to Left the queue (In Ride): "+ne.message)}const Rt=setTimeout(async()=>{try{await Je(se,{status:"offline"},{merge:!0}),$t.success(`Driver ${Zt} status changed to Offline after 1 minute of leaving queue.`)}catch(ne){$t.error("Failed to update driver status to Offline: "+ne.message)}Se.current.delete(Zt)},6e4);Se.current.set(Zt,Rt)}for(const Zt of yn){const Ut=Se.current.get(Zt);Ut&&(clearTimeout(Ut),Se.current.delete(Zt));const se=Qt(e,"drivers",Zt);try{await Je(se,{status:"waiting"},{merge:!0})}catch(De){$t.error("Failed to update driver status to In Queue: "+De.message)}}ti.current=qt},Kt=>{$t.error("Error fetching queue: "+Kt.message)}),Ht=mo(En(e,"ride_logs"),Ll("status","!=","completed")),ge=Id(Ht,Kt=>{const Xt=Kt.docs.map(qt=>({id:qt.id,...qt.data()}));Mt(Xt)},Kt=>{console.error("Error fetching active rides:",Kt)}),Ae=Id(mo(En(e,"adminAccessLogs"),Cd("timestamp","desc")),Kt=>{y(Kt.docs.map(Xt=>({id:Xt.id,...Xt.data()})))},Kt=>{$t.error("Error fetching logs: "+Kt.message)});return()=>{Q(),kt(),ge(),Ae(),Se.current.forEach(Kt=>clearTimeout(Kt)),Se.current.clear()}},[e,i]);const ln=drt(hrt(uS)),kn=async Q=>{const{active:ht,over:kt}=Q;if(!kt||ht.id===kt.id)return;const Ht=d.findIndex(Xt=>Xt.driverId===ht.id),ge=d.findIndex(Xt=>Xt.driverId===kt.id);if(Ht===-1||ge===-1)return;const Ae=B4(d,Ht,ge);f(Ae);const Kt=Zq(e);Ae.forEach((Xt,qt)=>{const Ce=Qt(e,"queues",Xt.driverId);Kt.update(Ce,{order:qt})});try{await Kt.commit(),$t.success("Queue reordered successfully")}catch(Xt){$t.error("Failed to reorder queue: "+Xt.message)}},Pi=async Q=>{try{await _o(Qt(e,"drivers",Q)),$t.success("Driver deleted");const ht=r.find(kt=>kt.id===Q);await Je(Qt(En(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Deleted driver: ${ht==null?void 0:ht.name} (${ht==null?void 0:ht.plate})`,timestamp:as()})}catch{$t.error("Error deleting driver")}},Yi=async Q=>{try{await k5(t,Q),$t.success("Password reset email sent"),await Je(Qt(En(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Sent password reset email to: ${Q}`,timestamp:as()})}catch{$t.error("Error sending reset email")}},sr=async Q=>{try{await Je(Qt(e,"queues",Q.id),{driverId:Q.id,name:Q.name,plateNumber:Q.plate,joinedAt:as(),order:d.length}),$t.success(`${Q.name} added to queue`),await Je(Qt(En(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Added driver to queue: ${Q.name} (${Q.plate})`,timestamp:as()})}catch(ht){$t.error("Failed to add to queue: "+ht.message)}},jr=async Q=>{try{await _o(Qt(e,"queues",Q)),$t.success("Driver removed from queue");const ht=r.find(kt=>kt.id===Q);await Je(Qt(En(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Removed driver from queue: ${ht==null?void 0:ht.name} (${ht==null?void 0:ht.plate})`,timestamp:as()})}catch(ht){$t.error("Failed to remove from queue: "+ht.message)}},Ge=r.filter(Q=>{var ht,kt;return((ht=Q.name)==null?void 0:ht.toLowerCase().includes(v.toLowerCase()))||((kt=Q.plate)==null?void 0:kt.toLowerCase().includes(v.toLowerCase()))}),Jt=Q=>{const ht=r.find(kt=>kt.id===Q);return ht?ht.status==="waiting"?"In Queue":ht.status==="in ride"?"Left the queue (In Ride)":(ht.status==="offline","Offline"):"Offline"},hn=async()=>{try{const Q=t.currentUser;if(Q){const ht=Qt(e,"queues",Q.uid);try{await _o(ht)}catch{}const kt=Qt(e,"drivers",Q.uid);await Je(kt,{status:"offline"},{merge:!0})}await ey(t),$t.success("Logged out"),n("/login")}catch{$t.error("Logout failed")}},We=Q=>Q?new Date(Q*1e3).toLocaleString():"No date",js=async()=>{try{const Q=mo(En(e,"ride_logs"),Cd("timestamp","desc")),kt=(await vf(Q)).docs.map(Ut=>({id:Ut.id,...Ut.data()}));console.log("Fetched ride_logs:",kt);const Ht=new Date;let ge,Ae=[];if(j==="custom"&&tt&&yt)Ae=kt.filter(Ut=>{var De,Rt;const se=(De=Ut.startedAt)!=null&&De.toDate?Ut.startedAt.toDate():new Date(((Rt=Ut.startedAt)==null?void 0:Rt.seconds)*1e3);return se>=tt&&se<=yt});else{switch(j){case"daily":ge=new Date(Ht.getTime()-24*60*60*1e3);break;case"weekly":ge=new Date(Ht.getTime()-7*24*60*60*1e3);break;case"monthly":ge=new Date(Ht.getFullYear(),Ht.getMonth()-1,Ht.getDate());break;case"annually":ge=new Date(Ht.getFullYear()-1,Ht.getMonth(),Ht.getDate());break;default:ge=new Date(Ht.getTime()-7*24*60*60*1e3)}Ae=kt.filter(Ut=>{var De,Rt;return((De=Ut.startedAt)!=null&&De.toDate?Ut.startedAt.toDate():new Date(((Rt=Ut.startedAt)==null?void 0:Rt.seconds)*1e3))>=ge})}const Kt={};let Xt=0,qt=0;r.forEach(Ut=>{const se=Ae.filter(ne=>ne.driverId===Ut.id),De=se.reduce((ne,he)=>{const Qi=(he.dropoffName||"").trim(),ps={};Object.entries(Mf).forEach(([ms,Xi])=>{ps[o2(ms)]=Xi});const Pn=ps[o2(Qi)]||0;return ne+Pn},0),Rt=se.length;Xt+=De,qt+=Rt,Kt[Ut.id]=[{label:"Rides",earnings:Rt,rides:Rt},{label:"Earnings",earnings:De,rides:Rt}]});const Ce=Ae.filter(Ut=>Ut.status==="completed").length,yn=[...r.map((Ut,se)=>{var he,Ke;const De=Kt[Ut.id];if(!De)return null;const Rt=((he=De[1])==null?void 0:he.earnings)||0,ne=((Ke=De[0])==null?void 0:Ke.rides)||0;return{label:Ut.name,earnings:Rt,rides:ne}}).filter(Boolean)].sort((Ut,se)=>se.earnings-Ut.earnings);D(yn);const Zt=yn.map((Ut,se)=>`hsl(${yn.length>1?120-se/(yn.length-1)*120:120}, 70%, 50%)`);Ct(Zt),L(Kt),H(Xt),_t(qt)}catch(Q){$t.error("Failed to fetch analytics: "+Q.message)}},Oi=async()=>{vt(!0);try{const Q=mo(En(e,"ride_logs"),Cd("startedAt","desc")),kt=(await vf(Q)).docs.map(Ht=>({id:Ht.id,...Ht.data()}));pt(kt),gt(!0)}catch(Q){$t.error("Failed to fetch destination history: "+Q.message)}finally{vt(!1)}};R.useEffect(()=>{T==="analytics"&&i&&js()},[T,j,i,J]);const fs=(Q,ht)=>{dt(Q),U(ht),$("custom"),K(!1),js()},Us=()=>{$("weekly"),dt(null),U(null),K(!1),js()};return S.jsxs("div",{className:"min-h-screen bg-gray-100",children:[S.jsx("div",{className:`fixed top-0 left-0 h-full bg-gray-100 text-gray-900 transition-all duration-300 overflow-hidden overscroll-none z-10 ${At?"w-full md:w-64":"w-0"}`,children:S.jsxs("div",{className:"p-4 h-full flex flex-col",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h2",{className:"text-xl font-bold",children:"Admin Panel"}),S.jsx("button",{onClick:()=>me(!1),className:"p-1 hover:bg-gray-200 rounded",children:""})]}),S.jsx("nav",{className:"space-y-2 flex-1 overflow-hidden",children:[{type:"analytics",label:"Analytics",icon:$W},{type:"drivers",label:"Drivers",icon:fK},{type:"queue",label:"Queue",icon:rK},{type:"status",label:"Status",icon:HW},{type:"logs",label:"Logs",icon:XW},{type:"history",label:"History",icon:eK},{type:"pending",label:"Pending",icon:YW}].map(({type:Q,label:ht,icon:kt})=>S.jsxs("button",{onClick:()=>x(Q),className:`w-full text-left px-3 py-2 rounded flex items-center gap-2 ${T===Q?"bg-blue-600 text-white":"hover:bg-gray-200"}`,children:[S.jsx(kt,{size:18}),ht,Q==="pending"&&c.length>0&&S.jsx("span",{className:"ml-auto bg-red-600 text-xs rounded-full px-1.5",children:c.length})]},Q))}),S.jsx("div",{className:"mt-auto",children:S.jsxs("button",{onClick:hn,className:"w-full px-3 py-2 rounded bg-red-600 hover:bg-red-700 text-white flex items-center gap-2",children:[S.jsx(cK,{size:18}),"Logout"]})})]})}),S.jsxs("div",{className:`p-4 text-gray-900 ${At?"md:ml-64":""} ${qe&&At?"overflow-hidden":""}`,children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("div",{className:"flex items-center gap-2",children:S.jsx("button",{onClick:()=>me(!At),className:"p-2 bg-gray-200 rounded hover:bg-gray-300",children:""})}),S.jsx("span",{className:"text-lg text-gray-600",children:new Date().toLocaleDateString("en-US",{month:"long"})+": "+new Date().getDate()+", "+new Date().getFullYear()})]}),T==="drivers"&&S.jsxs(S.Fragment,{children:[S.jsx("input",{type:"text",placeholder:"Search by name or plate",value:v,onChange:Q=>w(Q.target.value),className:"p-2 w-full text-black rounded mb-4"}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-gray-50 text-left",children:[S.jsx("th",{className:"p-2",children:"Name"}),S.jsx("th",{children:"Plate"}),S.jsx("th",{children:"Status"}),S.jsx("th",{children:"Email"}),S.jsx("th",{className:"text-right pr-4",children:"Actions"})]})}),S.jsx("tbody",{children:Ge.map(Q=>S.jsxs("tr",{className:"border-t border-gray-300",children:[S.jsx("td",{className:"p-2",children:Q.name}),S.jsx("td",{children:Q.plate}),S.jsx("td",{children:Jt(Q.id)}),S.jsx("td",{children:Q.email}),S.jsxs("td",{className:"space-x-2 text-right pr-4",children:[S.jsx("button",{onClick:()=>{z(Q),k(!0)},className:"text-blue-400",children:"Edit"}),S.jsx("button",{onClick:()=>Pi(Q.id),className:"text-red-400",children:"Delete"}),S.jsx("button",{onClick:()=>Yi(Q.email),className:"text-purple-400",children:"Reset"}),d.some(ht=>ht.driverId===Q.id)?S.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to remove ${Q.name} from the queue?`)&&jr(Q.id)},className:"text-red-400",children:"Remove from Queue"}):S.jsx("button",{onClick:()=>sr(Q),className:"text-green-400",children:"Add to Queue"})]})]},Q.id))})]})})]}),T==="queue"&&S.jsxs("div",{className:"bg-white p-4 rounded mt-4 border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Driver Queue"}),S.jsx(got,{sensors:ln,collisionDetection:yrt,onDragEnd:kn,children:S.jsx(xot,{items:d.map(Q=>Q.driverId),strategy:wot,children:S.jsx("ul",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:d.map(Q=>{const ht=r.find(Ht=>Ht.id===Q.driverId),kt=Jt(Q.driverId);return S.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded cursor-move border border-gray-200",children:[S.jsxs("span",{children:[(ht==null?void 0:ht.name)??Q.name," (",(ht==null?void 0:ht.plate)??Q.plate,")"]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:`text-sm font-medium ${kt==="In Queue"?"text-green-600":kt==="Left the queue (In Ride)"?"text-yellow-600":"text-red-600"}`,children:kt}),S.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to remove ${Q.name} from the queue?`)&&jr(Q.driverId)},className:"text-red-600",children:"Remove"})]})]},Q.driverId)})})})})]}),T==="status"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-900",children:"Driver Status"}),S.jsxs("div",{className:"mb-6",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-green-600",children:"In Queue"}),S.jsx("ul",{className:"space-y-2",children:r.filter(Q=>Q.status==="waiting").sort((Q,ht)=>{var ge,Ae,Kt,Xt;const kt=((Ae=(ge=d.find(qt=>qt.driverId===Q.id))==null?void 0:ge.joinedAt)==null?void 0:Ae.seconds)||0,Ht=((Xt=(Kt=d.find(qt=>qt.driverId===ht.id))==null?void 0:Kt.joinedAt)==null?void 0:Xt.seconds)||0;return kt-Ht}).map(Q=>S.jsx("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200",children:S.jsxs("span",{children:[Q.name," (",Q.plate,") -"," ",S.jsx("span",{className:"font-semibold text-green-600",children:"In Queue"})]})},Q.id))})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-yellow-600",children:"In Ride"}),S.jsx("ul",{className:"space-y-2",children:r.filter(Q=>Q.status==="in ride").sort((Q,ht)=>{var ge,Ae;const kt=((ge=Q.leftAt)==null?void 0:ge.seconds)||0,Ht=((Ae=ht.leftAt)==null?void 0:Ae.seconds)||0;return kt-Ht}).map(Q=>{var Ht;const ht=Q.selectedDestination||"Unknown",kt=We((Ht=Q.leftAt)==null?void 0:Ht.seconds);return S.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200",children:[S.jsxs("span",{children:[Q.name," (",Q.plate,") -"," ",S.jsxs("span",{className:"font-semibold text-yellow-600",children:["In route to ",ht]})]}),S.jsx("span",{className:"text-sm text-gray-500",children:kt})]},Q.id)})})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-red-600",children:"Offline"}),S.jsx("ul",{className:"space-y-2",children:r.filter(Q=>Q.status==="offline").sort((Q,ht)=>Q.name.localeCompare(ht.name)).map(Q=>S.jsx("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200",children:S.jsxs("span",{children:[Q.name," (",Q.plate,") -"," ",S.jsx("span",{className:"font-semibold text-red-600",children:"Offline"})]})},Q.id))})]})]}),T==="logs"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Admin Activity Logs"}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-gray-50 text-left",children:[S.jsx("th",{className:"p-2",children:"Actions"}),S.jsx("th",{className:"p-2",children:"Date and Time"})]})}),S.jsx("tbody",{children:m.map(Q=>{var ht;return S.jsxs("tr",{className:"border-t border-gray-300",children:[S.jsxs("td",{className:"p-2",children:[S.jsx("strong",{children:Q.email}),": ",Q.action]}),S.jsx("td",{className:"p-2",children:(ht=Q.timestamp)!=null&&ht.seconds?We(Q.timestamp.seconds):"No time"})]},Q.id)})})]})})]}),T==="history"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Driver History"}),S.jsx("button",{onClick:Oi,disabled:ue,className:"mb-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:ue?"Loading...":"View Destination History"}),S.jsx("div",{className:"overflow-y-auto max-h-[400px] space-y-2",children:r.map(Q=>{var ht;return S.jsx("div",{className:"border-b border-gray-300 py-1",children:S.jsxs("p",{className:"text-sm text-gray-900",children:[S.jsx("strong",{children:Q.name}),"  ",Q.plate,"  Registered on:"," ",We((ht=Q.createdAt)==null?void 0:ht.seconds)]})},Q.id)})}),St&&S.jsxs("div",{className:"mt-4",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-gray-900",children:"Destination History (Chronological)"}),st.length===0?S.jsx("p",{className:"text-gray-500",children:"No rides found."}):S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden border border-gray-300",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-gray-50 text-left",children:[S.jsx("th",{className:"p-2",children:"Driver Name"}),S.jsx("th",{children:"Plate Number"}),S.jsx("th",{children:"Destination"}),S.jsx("th",{children:"Date and Time"})]})}),S.jsx("tbody",{children:st.map(Q=>{var Ht,ge;const ht=r.find(Ae=>Ae.id===Q.driverId),kt=(Ht=Q.startedAt)!=null&&Ht.toDate?Q.startedAt.toDate():new Date(((ge=Q.startedAt)==null?void 0:ge.seconds)*1e3);return S.jsxs("tr",{className:"border-t border-gray-300",children:[S.jsx("td",{className:"p-2 text-gray-900",children:(ht==null?void 0:ht.name)||"Unknown Driver"}),S.jsx("td",{className:"text-gray-900",children:(ht==null?void 0:ht.plate)||"N/A"}),S.jsx("td",{className:"text-gray-900",children:Q.dropoffName}),S.jsx("td",{className:"text-gray-900",children:kt.toLocaleString()})]},Q.id)})})]})})]})]}),T==="pending"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Pending Registration Requests"}),c.length===0?S.jsx("p",{className:"text-gray-500",children:"No pending requests."}):S.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden border border-gray-300",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-gray-50 text-left",children:[S.jsx("th",{className:"p-2",children:"Name"}),S.jsx("th",{children:"Plate"}),S.jsx("th",{children:"Email"}),S.jsx("th",{children:"Phone"}),S.jsx("th",{children:"Status"}),S.jsx("th",{className:"text-right pr-4",children:"Actions"})]})}),S.jsx("tbody",{children:c.map(Q=>S.jsxs("tr",{className:"border-t border-gray-300",children:[S.jsx("td",{className:"p-2 text-gray-900",children:Q.name}),S.jsx("td",{className:"text-gray-900",children:Q.plate}),S.jsx("td",{className:"text-gray-900",children:Q.email}),S.jsx("td",{className:"text-gray-900",children:Q.phone||"N/A"}),S.jsx("td",{className:"text-gray-900",children:"Pending"}),S.jsxs("td",{className:"space-x-2 text-right pr-4",children:[S.jsx("button",{onClick:async()=>{try{await Je(Qt(e,"drivers",Q.id),{verified:!0},{merge:!0}),$t.success(`Verified ${Q.name}`),await Je(Qt(En(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Approved driver registration: ${Q.name} (${Q.plate})`,timestamp:as()})}catch(ht){$t.error("Failed to verify: "+ht.message)}},className:"text-green-600",children:"Approve"}),S.jsx("button",{onClick:async()=>{try{await _o(Qt(e,"drivers",Q.id)),$t.success(`Rejected and deleted ${Q.name}`),await Je(Qt(En(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Rejected driver registration: ${Q.name} (${Q.plate})`,timestamp:as()})}catch(ht){$t.error("Failed to delete: "+ht.message)}},className:"text-red-600",children:"Reject"})]})]},Q.id))})]})]}),T==="analytics"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-900",children:"Analytics Dashboard"}),S.jsxs("div",{className:"flex gap-2 mb-6",children:[["daily","weekly","monthly","annually"].map(Q=>S.jsx("button",{onClick:()=>$(Q),className:`px-4 py-2 rounded ${j===Q?"bg-blue-600":"bg-gray-200"}`,children:Q.charAt(0).toUpperCase()+Q.slice(1)},Q)),S.jsx("button",{onClick:()=>K(!0),className:`px-4 py-2 rounded ${j==="custom"?"bg-blue-600":"bg-gray-200"}`,children:"Custom"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[S.jsxs("div",{className:"bg-white p-4 rounded border border-gray-300",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-gray-900",children:"Overall Statistics"}),O.length>0&&S.jsx(Fst,{data:{labels:O.map(Q=>Q.label),datasets:[{data:O.map(Q=>Q.earnings),backgroundColor:zt,borderColor:zt,borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:Q=>`${Q.label}: ${Q.parsed}`}}}}}),S.jsxs("div",{className:"mt-4 text-sm font-bold",children:[S.jsxs("p",{children:[S.jsx("span",{className:"text-gray-900",children:"Total Rides:"})," ",B]}),S.jsxs("p",{children:[S.jsx("span",{className:"text-gray-900",children:"Total Earnings:"})," ",F]})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded border border-gray-300",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-gray-900",children:"Driver Performance"}),S.jsxs("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:[[...r].sort((Q,ht)=>{var ge,Ae,Kt,Xt;const kt=((Ae=(ge=N[Q.id])==null?void 0:ge[1])==null?void 0:Ae.earnings)||0;return(((Xt=(Kt=N[ht.id])==null?void 0:Kt[1])==null?void 0:Xt.earnings)||0)-kt}).map((Q,ht,kt)=>{var Ae,Kt;const Ht=N[Q.id];if(!Ht||Ht.length===0)return null;const ge=kt.length>1?120-ht/(kt.length-1)*120:120;return S.jsxs("div",{className:"p-3 rounded font-medium mb-2",style:{backgroundColor:`hsl(${ge}, 70%, 50%)`},children:[S.jsxs("h4",{className:"font-medium mb-2 text-white",children:[Q.name," (",Q.plate,")"]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[S.jsx("div",{children:S.jsxs("span",{className:"text-white",children:["Rides: ",((Ae=Ht[0])==null?void 0:Ae.rides)||0]})}),S.jsx("div",{children:S.jsxs("span",{className:"text-white",children:["Earnings: ",((Kt=Ht[1])==null?void 0:Kt.earnings)||0]})})]})]},Q.id)}),S.jsxs("div",{className:"bg-gray-50 p-3 rounded font-bold border-t border-gray-300",children:[S.jsx("h4",{className:"mb-2 text-gray-900",children:"Total for All Drivers"}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[S.jsxs("div",{children:[S.jsx("span",{className:"text-gray-900",children:"Total Rides:"})," ",B]}),S.jsxs("div",{children:[S.jsx("span",{className:"text-gray-900",children:"Total Earnings:"})," ",F]})]})]})]})]})]})]}),C&&M&&S.jsx(Qst,{driver:M,onClose:()=>k(!1),onSaveSuccess:()=>k(!1),user:i}),ft&&S.jsx(E4,{isOpen:ft,onClose:()=>K(!1),onApply:fs,onClear:Us})]})]})},Aot=()=>S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-gray-900 bg-gray-100",children:[S.jsx("h1",{className:"text-6xl font-bold mb-4",children:"404"}),S.jsx("p",{className:"text-lg mb-6",children:"Page not found"}),S.jsx("a",{href:"/home",className:"text-blue-400 underline",children:"Go back to Home"})]}),Bb="agduwaadmin@gmail.com",Cot=()=>{const{user:e,loading:t}=gp(),n=rc();R.useEffect(()=>{var i;if(!t){const s=((i=e==null?void 0:e.email)==null?void 0:i.toLowerCase())===(Bb==null?void 0:Bb.toLowerCase());(!e||!s)&&n("/home")}},[e,t,n])},Rot="agduwaadmin@gmail.com",Iot=({children:e})=>{var i;const{loading:t,user:n}=gp();return Cot(),t?S.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-900 text-white",children:[S.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-white border-t-transparent rounded-full"}),S.jsx("span",{className:"ml-3",children:"Checking access..."})]}):!n||((i=n.email)==null?void 0:i.toLowerCase())!==Rot.toLowerCase()?S.jsx(vg,{to:"/",replace:!0}):S.jsx(S.Fragment,{children:e})},zb="agduwaadmin@gmail.com".trim().toLowerCase(),Dot=()=>{var v;const[e,t]=R.useState(null),[n,i]=R.useState(null),[s,r]=R.useState(!0),[a,c]=R.useState(!1),[u,d]=R.useState("loading"),f=g_();if(R.useEffect(()=>{const w=HE(ls,async T=>{var x;if(T){t(T);const C=((x=T.email)==null?void 0:x.trim().toLowerCase())||"";console.log("ADMIN_EMAIL:",zb),console.log("Logged in user email:",C);const k=C===zb;if(console.log("Is admin user:",k),k){try{await Ng(En(f,"adminAccessLogs"),{email:T.email,uid:T.uid,accessedAt:as()})}catch(M){console.error("Error logging admin access:",M)}c(!0),i(!0),setTimeout(()=>{c(!1)},2e3),localStorage.setItem("driver",JSON.stringify({id:T.uid,email:T.email,verified:!0}))}else try{const M=await np(Qt(f,"drivers",T.uid));if(M.exists()){const z=M.data();z.verified?(c(!0),i(!0),setTimeout(()=>{c(!1)},2e3),localStorage.setItem("driver",JSON.stringify({id:T.uid,email:T.email,...z}))):(await ls.signOut(),t(null),i(!1),Xn.error("Your account is not verified by admin yet. Please wait for approval."),localStorage.removeItem("driver"))}else await ls.signOut(),t(null),i(!1),Xn.error("No profile found for this account."),localStorage.removeItem("driver")}catch(M){console.error("Error checking verification:",M),await ls.signOut(),t(null),i(!1),Xn.error("Error verifying account."),localStorage.removeItem("driver")}}else t(null),i(!1),localStorage.removeItem("driver");r(!1)});return()=>w()},[f]),s)return S.jsxs("div",{className:"h-screen bg-white relative",children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:`
      .loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .car {
        animation: speeder 0.4s linear infinite;
        width: 900px;
        height: 900px;
      }
      @media (max-width: 768px) {
        .car {
          width: 300px;
          height: 300px;
        }
      }
      @keyframes speeder {
        0% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        10% {
          transform: translate(-1px, -3px) rotate(-1deg);
        }
        20% {
          transform: translate(-2px, 0px) rotate(1deg);
        }
        30% {
          transform: translate(1px, 2px) rotate(0deg);
        }
        40% {
          transform: translate(1px, -1px) rotate(1deg);
        }
        50% {
          transform: translate(-1px, 3px) rotate(-1deg);
        }
        60% {
          transform: translate(-1px, 1px) rotate(0deg);
        }
        70% {
          transform: translate(3px, 1px) rotate(-1deg);
        }
        80% {
          transform: translate(-2px, -1px) rotate(1deg);
        }
        90% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        100% {
          transform: translate(1px, -2px) rotate(-1deg);
        }
      }
    `}}),S.jsx("div",{className:"loader",children:S.jsx("img",{src:"/img/vecteezy_sports-car-logo-icon-motor-vehicle-silhouette-emblems-auto_.jpg",alt:"car",className:"car"})})]});if(a)return S.jsxs("div",{className:"h-screen bg-white relative",children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:`
      .loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .car {
        animation: speeder 0.4s linear infinite;
        width: 900px;
        height: 900px;
      }
      @media (max-width: 768px) {
        .car {
          width: 300px;
          height: 300px;
        }
      }
      @keyframes speeder {
        0% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        10% {
          transform: translate(-1px, -3px) rotate(-1deg);
        }
        20% {
          transform: translate(-2px, 0px) rotate(1deg);
        }
        30% {
          transform: translate(1px, 2px) rotate(0deg);
        }
        40% {
          transform: translate(1px, -1px) rotate(1deg);
        }
        50% {
          transform: translate(-1px, 3px) rotate(-1deg);
        }
        60% {
          transform: translate(-1px, 1px) rotate(0deg);
        }
        70% {
          transform: translate(3px, 1px) rotate(-1deg);
        }
        80% {
          transform: translate(-2px, -1px) rotate(1deg);
        }
        90% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        100% {
          transform: translate(1px, -2px) rotate(-1deg);
        }
      }
    `}}),S.jsx("div",{className:"loader",children:S.jsx("img",{src:"/img/vecteezy_sports-car-logo-icon-motor-vehicle-silhouette-emblems-auto_.jpg",alt:"car",className:"car"})})]});const m=!!e&&n===!0&&!a,y=((v=e==null?void 0:e.email)==null?void 0:v.trim().toLowerCase())===zb;return S.jsxs(fJ,{children:[S.jsx(jx,{position:"top-center"}),S.jsxs(bF,{children:[S.jsx($s,{path:"/",element:m?y?S.jsx(vg,{to:"/admin",replace:!0}):S.jsx(vg,{to:"/home",replace:!0}):S.jsx(stt,{})}),S.jsx($s,{path:"/driver/:driverId",element:S.jsx(Gst,{})}),m&&S.jsxs($s,{element:S.jsx($st,{}),children:[S.jsx($s,{path:"/home",element:S.jsx(pJ,{})}),S.jsx($s,{path:"/history",element:S.jsx(ctt,{})}),S.jsx($s,{path:"/analytics",element:S.jsx(Hst,{})}),S.jsx($s,{path:"/profile",element:S.jsx(vtt,{})})]}),m&&S.jsx($s,{path:"/admin",element:S.jsx(Iot,{children:S.jsx(Sot,{})})}),!m&&S.jsx($s,{path:"*",element:S.jsx(vg,{to:"/"})}),S.jsx($s,{path:"*",element:S.jsx(Aot,{})})]})]})};A3.createRoot(document.getElementById("root")).render(S.jsx(de.StrictMode,{children:S.jsx(HF,{children:S.jsxs(ltt,{children:[S.jsx(Dot,{}),S.jsx(jx,{position:"top-center",toastOptions:{duration:4e3}})," "]})})}));
