import{r as Q1,g as X1,a as x,R as gt,C as Z1,B as vL,b as _L,L as bL,p as J1,c as eI,A as tI,P as EL,d as wL,i as TL,e as SL,f as AL,h as xL,j as RL}from"./chartjs-BDCihV9L.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Cv={exports:{}},sh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function CL(){if(RA)return sh;RA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:o}}return sh.Fragment=e,sh.jsx=n,sh.jsxs=n,sh}var CA;function IL(){return CA||(CA=1,Cv.exports=CL()),Cv.exports}var w=IL(),Iv={exports:{}},rh={},Nv={exports:{}},Dv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IA;function NL(){return IA||(IA=1,function(t){function e(J,te){var ue=J.length;J.push(te);e:for(;0<ue;){var be=ue-1>>>1,ie=J[be];if(0<r(ie,te))J[be]=te,J[ue]=ie,ue=be;else break e}}function n(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var te=J[0],ue=J.pop();if(ue!==te){J[0]=ue;e:for(var be=0,ie=J.length,ye=ie>>>1;be<ye;){var me=2*(be+1)-1,de=J[me],qe=me+1,ct=J[qe];if(0>r(de,ue))qe<ie&&0>r(ct,de)?(J[be]=ct,J[qe]=ue,be=qe):(J[be]=de,J[me]=ue,be=me);else if(qe<ie&&0>r(ct,ue))J[be]=ct,J[qe]=ue,be=qe;else break e}}return te}function r(J,te){var ue=J.sortIndex-te.sortIndex;return ue!==0?ue:J.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],f=[],p=1,y=null,_=3,E=!1,S=!1,R=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function q(J){for(var te=n(f);te!==null;){if(te.callback===null)i(f);else if(te.startTime<=J)i(f),te.sortIndex=te.expirationTime,e(h,te);else break;te=n(f)}}function G(J){if(R=!1,q(J),!S)if(n(h)!==null)S=!0,Y||(Y=!0,B());else{var te=n(f);te!==null&&we(G,te.startTime-J)}}var Y=!1,L=-1,C=5,M=-1;function k(){return I?!0:!(t.unstable_now()-M<C)}function j(){if(I=!1,Y){var J=t.unstable_now();M=J;var te=!0;try{e:{S=!1,R&&(R=!1,F(L),L=-1),E=!0;var ue=_;try{t:{for(q(J),y=n(h);y!==null&&!(y.expirationTime>J&&k());){var be=y.callback;if(typeof be=="function"){y.callback=null,_=y.priorityLevel;var ie=be(y.expirationTime<=J);if(J=t.unstable_now(),typeof ie=="function"){y.callback=ie,q(J),te=!0;break t}y===n(h)&&i(h),q(J)}else i(h);y=n(h)}if(y!==null)te=!0;else{var ye=n(f);ye!==null&&we(G,ye.startTime-J),te=!1}}break e}finally{y=null,_=ue,E=!1}te=void 0}}finally{te?B():Y=!1}}}var B;if(typeof O=="function")B=function(){O(j)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ve=V.port2;V.port1.onmessage=j,B=function(){ve.postMessage(null)}}else B=function(){P(j,0)};function we(J,te){L=P(function(){J(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(J){switch(_){case 1:case 2:case 3:var te=3;break;default:te=_}var ue=_;_=te;try{return J()}finally{_=ue}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(J,te){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ue=_;_=J;try{return te()}finally{_=ue}},t.unstable_scheduleCallback=function(J,te,ue){var be=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?be+ue:be):ue=be,J){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=ue+ie,J={id:p++,callback:te,priorityLevel:J,startTime:ue,expirationTime:ie,sortIndex:-1},ue>be?(J.sortIndex=ue,e(f,J),n(h)===null&&J===n(f)&&(R?(F(L),L=-1):R=!0,we(G,ue-be))):(J.sortIndex=ie,e(h,J),S||E||(S=!0,Y||(Y=!0,B()))),J},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(J){var te=_;return function(){var ue=_;_=te;try{return J.apply(this,arguments)}finally{_=ue}}}}(Dv)),Dv}var NA;function DL(){return NA||(NA=1,Nv.exports=NL()),Nv.exports}var Mv={exports:{}},Jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA;function ML(){if(DA)return Jn;DA=1;var t=Q1();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jn.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,p)},Jn.flushSync=function(h){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=f,i.p=p,i.d.f()}},Jn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Jn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Jn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:E}):p==="script"&&i.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Jn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Jn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);i.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Jn.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Jn.requestFormReset=function(h){i.d.r(h)},Jn.unstable_batchedUpdates=function(h,f){return h(f)},Jn.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},Jn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Jn.version="19.1.0",Jn}var MA;function nI(){if(MA)return Mv.exports;MA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mv.exports=ML(),Mv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA;function PL(){if(PA)return rh;PA=1;var t=DL(),e=Q1(),n=nI();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(o(s)!==s)throw Error(i(188))}function h(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var c=s,d=a;;){var g=c.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===c)return u(g),s;if(v===d)return u(g),a;v=v.sibling}throw Error(i(188))}if(c.return!==d.return)c=g,d=v;else{for(var A=!1,N=g.child;N;){if(N===c){A=!0,c=g,d=v;break}if(N===d){A=!0,d=g,c=v;break}N=N.sibling}if(!A){for(N=v.child;N;){if(N===c){A=!0,c=v,d=g;break}if(N===d){A=!0,d=v,c=g;break}N=N.sibling}if(!A)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:a}function f(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=f(s),a!==null)return a;s=s.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),O=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=j&&s[j]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function ve(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case I:return"Profiler";case R:return"StrictMode";case G:return"Suspense";case Y:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case O:return(s.displayName||"Context")+".Provider";case F:return(s._context.displayName||"Context")+".Consumer";case q:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return a=s.displayName||null,a!==null?a:ve(s.type)||"Memo";case C:a=s._payload,s=s._init;try{return ve(s(a))}catch{}}return null}var we=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},be=[],ie=-1;function ye(s){return{current:s}}function me(s){0>ie||(s.current=be[ie],be[ie]=null,ie--)}function de(s,a){ie++,be[ie]=s.current,s.current=a}var qe=ye(null),ct=ye(null),rt=ye(null),Vt=ye(null);function Ae(s,a){switch(de(rt,a),de(ct,s),de(qe,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?tA(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=tA(a),s=nA(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}me(qe),de(qe,s)}function Ve(){me(qe),me(ct),me(rt)}function Re(s){s.memoizedState!==null&&de(Vt,s);var a=qe.current,c=nA(a,s.type);a!==c&&(de(ct,s),de(qe,c))}function je(s){ct.current===s&&(me(qe),me(ct)),Vt.current===s&&(me(Vt),Ju._currentValue=ue)}var Ee=Object.prototype.hasOwnProperty,_e=t.unstable_scheduleCallback,ut=t.unstable_cancelCallback,jt=t.unstable_shouldYield,Nn=t.unstable_requestPaint,bt=t.unstable_now,zn=t.unstable_getCurrentPriorityLevel,gn=t.unstable_ImmediatePriority,en=t.unstable_UserBlockingPriority,Tn=t.unstable_NormalPriority,Ei=t.unstable_LowPriority,Pi=t.unstable_IdlePriority,js=t.log,mr=t.unstable_setDisableYieldValue,Ft=null,Ye=null;function sn(s){if(typeof js=="function"&&mr(s),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Ft,s)}catch{}}var Bt=Math.clz32?Math.clz32:Qi,bs=Math.log,wi=Math.LN2;function Qi(s){return s>>>=0,s===0?32:31-(bs(s)/wi|0)|0}var Es=256,K=4194304;function le(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ie(s,a,c){var d=s.pendingLanes;if(d===0)return 0;var g=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var N=d&134217727;return N!==0?(d=N&~v,d!==0?g=le(d):(A&=N,A!==0?g=le(A):c||(c=N&~s,c!==0&&(g=le(c))))):(N=d&~v,N!==0?g=le(N):A!==0?g=le(A):c||(c=d&~s,c!==0&&(g=le(c)))),g===0?0:a!==0&&a!==g&&(a&v)===0&&(v=g&-g,c=a&-a,v>=c||v===32&&(c&4194048)!==0)?a:g}function Ue(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function ht(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Et(){var s=Es;return Es<<=1,(Es&4194048)===0&&(Es=256),s}function Ge(){var s=K;return K<<=1,(K&62914560)===0&&(K=4194304),s}function Ke(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function Fe(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function wt(s,a,c,d,g,v){var A=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var N=s.entanglements,U=s.expirationTimes,Q=s.hiddenUpdates;for(c=A&~c;0<c;){var ne=31-Bt(c),ae=1<<ne;N[ne]=0,U[ne]=-1;var X=Q[ne];if(X!==null)for(Q[ne]=null,ne=0;ne<X.length;ne++){var Z=X[ne];Z!==null&&(Z.lane&=-536870913)}c&=~ae}d!==0&&Ce(s,d,0),v!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~a))}function Ce(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-Bt(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|c&4194090}function cn(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var d=31-Bt(c),g=1<<d;g&a|s[d]&a&&(s[d]|=a),c&=~g}}function We(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Oe(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function et(){var s=te.p;return s!==0?s:(s=window.event,s===void 0?32:EA(s.type))}function At(s,a){var c=te.p;try{return te.p=s,a()}finally{te.p=c}}var Te=Math.random().toString(36).slice(2),Ze="__reactFiber$"+Te,at="__reactProps$"+Te,zt="__reactContainer$"+Te,Oi="__reactEvents$"+Te,Xi="__reactListeners$"+Te,Sn="__reactHandles$"+Te,Zi="__reactResources$"+Te,ki="__reactMarker$"+Te;function ca(s){delete s[Ze],delete s[at],delete s[Oi],delete s[Xi],delete s[Sn]}function pr(s){var a=s[Ze];if(a)return a;for(var c=s.parentNode;c;){if(a=c[zt]||c[Ze]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=aA(s);s!==null;){if(c=s[Ze])return c;s=aA(s)}return a}s=c,c=s.parentNode}return null}function Us(s){if(s=s[Ze]||s[zt]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Fs(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function fi(s){var a=s[Zi];return a||(a=s[Zi]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function un(s){s[ki]=!0}var ru=new Set,_l={};function ws(s,a){gr(s,a),gr(s+"Capture",a)}function gr(s,a){for(_l[s]=a,s=0;s<a.length;s++)ru.add(a[s])}var Wd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yd={},mo={};function Qd(s){return Ee.call(mo,s)?!0:Ee.call(Yd,s)?!1:Wd.test(s)?mo[s]=!0:(Yd[s]=!0,!1)}function ua(s,a,c){if(Qd(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function Bs(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function qn(s,a,c,d){if(d===null)s.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+d)}}var po,Xd;function yr(s){if(po===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);po=a&&a[1]||"",Xd=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+po+s+Xd}var bl=!1;function El(s,a){if(!s||bl)return"";bl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var X=Z}Reflect.construct(s,[],ae)}else{try{ae.call()}catch(Z){X=Z}s.call(ae.prototype)}}else{try{throw Error()}catch(Z){X=Z}(ae=s())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&X&&typeof Z.stack=="string")return[Z.stack,X.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),A=v[0],N=v[1];if(A&&N){var U=A.split(`
`),Q=N.split(`
`);for(g=d=0;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;for(;g<Q.length&&!Q[g].includes("DetermineComponentFrameRoot");)g++;if(d===U.length||g===Q.length)for(d=U.length-1,g=Q.length-1;1<=d&&0<=g&&U[d]!==Q[g];)g--;for(;1<=d&&0<=g;d--,g--)if(U[d]!==Q[g]){if(d!==1||g!==1)do if(d--,g--,0>g||U[d]!==Q[g]){var ne=`
`+U[d].replace(" at new "," at ");return s.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",s.displayName)),ne}while(1<=d&&0<=g);break}}}finally{bl=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?yr(c):""}function au(s){switch(s.tag){case 26:case 27:case 5:return yr(s.type);case 16:return yr("Lazy");case 13:return yr("Suspense");case 19:return yr("SuspenseList");case 0:case 15:return El(s.type,!1);case 11:return El(s.type.render,!1);case 1:return El(s.type,!0);case 31:return yr("Activity");default:return""}}function wl(s){try{var a="";do a+=au(s),s=s.return;while(s);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function mi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ou(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Mg(s){var a=ou(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),d=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(A){d=""+A,v.call(this,A)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(A){d=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Tl(s){s._valueTracker||(s._valueTracker=Mg(s))}function lu(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return s&&(d=ou(s)?s.checked?"true":"false":s.value),s=d,s!==c?(a.setValue(s),!0):!1}function go(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Pg=/[\n"\\]/g;function yn(s){return s.replace(Pg,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Li(s,a,c,d,g,v,A,N){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+mi(a)):s.value!==""+mi(a)&&(s.value=""+mi(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?ha(s,A,mi(a)):c!=null?ha(s,A,mi(c)):d!=null&&s.removeAttribute("value"),g==null&&v!=null&&(s.defaultChecked=!!v),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.name=""+mi(N):s.removeAttribute("name")}function yo(s,a,c,d,g,v,A,N){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),a!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;c=c!=null?""+mi(c):"",a=a!=null?""+mi(a):c,N||a===s.value||(s.value=a),s.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=N?s.checked:!!d,s.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A)}function ha(s,a,c){a==="number"&&go(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function vr(s,a,c,d){if(s=s.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=a.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&d&&(s[c].defaultSelected=!0)}else{for(c=""+mi(c),a=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Dt(s,a,c){if(a!=null&&(a=""+mi(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+mi(c):""}function vo(s,a,c,d){if(a==null){if(d!=null){if(c!=null)throw Error(i(92));if(we(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),a=c}c=mi(a),s.defaultValue=c,d=s.textContent,d===c&&d!==""&&d!==null&&(s.value=d)}function Ji(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var _o=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zd(s,a,c){var d=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,c):typeof c!="number"||c===0||_o.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function cu(s,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&c[g]!==d&&Zd(s,g,d)}else for(var v in a)a.hasOwnProperty(v)&&Zd(s,v,a[v])}function uu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Og=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sl(s){return kg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var _r=null;function es(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var br=null,Er=null;function hu(s){var a=Us(s);if(a&&(s=a.stateNode)){var c=s[at]||null;e:switch(s=a.stateNode,a.type){case"input":if(Li(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+yn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==s&&d.form===s.form){var g=d[at]||null;if(!g)throw Error(i(90));Li(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)d=c[a],d.form===s.form&&lu(d)}break e;case"textarea":Dt(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&vr(s,!!c.multiple,a,!1)}}}var zs=!1;function Jd(s,a,c){if(zs)return s(a,c);zs=!0;try{var d=s(a);return d}finally{if(zs=!1,(br!==null||Er!==null)&&(Kf(),br&&(a=br,s=Er,Er=br=null,hu(a),s)))for(a=0;a<s.length;a++)hu(s[a])}}function bo(s,a){var c=s.stateNode;if(c===null)return null;var d=c[at]||null;if(d===null)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ts=!1;if(Ts)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){ts=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{ts=!1}var qs=null,da=null,wr=null;function du(){if(wr)return wr;var s,a=da,c=a.length,d,g="value"in qs?qs.value:qs.textContent,v=g.length;for(s=0;s<c&&a[s]===g[s];s++);var A=c-s;for(d=1;d<=A&&a[c-d]===g[v-d];d++);return wr=g.slice(s,1<d?1-d:void 0)}function Hs(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Gs(){return!0}function fu(){return!1}function Dn(s){function a(c,d,g,v,A){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(c=s[N],this[N]=c?c(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Gs:fu,this.isPropagationStopped=fu,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),a}var xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Al=Dn(xt),wo=p({},xt,{view:0,detail:0}),ef=Dn(wo),xl,Rl,$s,To=p({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==$s&&($s&&s.type==="mousemove"?(xl=s.screenX-$s.screenX,Rl=s.screenY-$s.screenY):Rl=xl=0,$s=s),xl)},movementY:function(s){return"movementY"in s?s.movementY:Rl}}),ns=Dn(To),tf=p({},To,{dataTransfer:0}),Lg=Dn(tf),So=p({},wo,{relatedTarget:0}),Cl=Dn(So),mu=p({},xt,{animationName:0,elapsedTime:0,pseudoElement:0}),Il=Dn(mu),nf=p({},xt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Nl=Dn(nf),Vg=p({},xt,{data:0}),pu=Dn(Vg),Ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=rf[s])?!!a[s]:!1}function xo(){return gu}var af=p({},wo,{key:function(s){if(s.key){var a=Ao[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Hs(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?sf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xo,charCode:function(s){return s.type==="keypress"?Hs(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Hs(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Dl=Dn(af),of=p({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yu=Dn(of),Tr=p({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xo}),lf=Dn(Tr),cf=p({},xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),uf=Dn(cf),hf=p({},To,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ml=Dn(hf),pi=p({},xt,{newState:0,oldState:0}),df=Dn(pi),ff=[9,13,27,32],Ks=Ts&&"CompositionEvent"in window,m=null;Ts&&"documentMode"in document&&(m=document.documentMode);var b=Ts&&"TextEvent"in window&&!m,T=Ts&&(!Ks||m&&8<m&&11>=m),D=" ",$=!1;function ee(s,a){switch(s){case"keyup":return ff.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var dt=!1;function An(s,a){switch(s){case"compositionend":return ce(a);case"keypress":return a.which!==32?null:($=!0,D);case"textInput":return s=a.data,s===D&&$?null:s;default:return null}}function ft(s,a){if(dt)return s==="compositionend"||!Ks&&ee(s,a)?(s=du(),wr=da=qs=null,dt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return T&&a.locale!=="ko"?null:a.data;default:return null}}var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xn(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Mn[s.type]:a==="textarea"}function Sr(s,a,c,d){br?Er?Er.push(d):Er=[d]:br=d,a=Jf(a,"onChange"),0<a.length&&(c=new Al("onChange","change",null,c,d),s.push({event:c,listeners:a}))}var Hn=null,Ws=null;function vu(s){QS(s,0)}function mf(s){var a=Fs(s);if(lu(a))return s}function yw(s,a){if(s==="change")return a}var vw=!1;if(Ts){var jg;if(Ts){var Ug="oninput"in document;if(!Ug){var _w=document.createElement("div");_w.setAttribute("oninput","return;"),Ug=typeof _w.oninput=="function"}jg=Ug}else jg=!1;vw=jg&&(!document.documentMode||9<document.documentMode)}function bw(){Hn&&(Hn.detachEvent("onpropertychange",Ew),Ws=Hn=null)}function Ew(s){if(s.propertyName==="value"&&mf(Ws)){var a=[];Sr(a,Ws,s,es(s)),Jd(vu,a)}}function WO(s,a,c){s==="focusin"?(bw(),Hn=a,Ws=c,Hn.attachEvent("onpropertychange",Ew)):s==="focusout"&&bw()}function YO(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return mf(Ws)}function QO(s,a){if(s==="click")return mf(a)}function XO(s,a){if(s==="input"||s==="change")return mf(a)}function ZO(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Vi=typeof Object.is=="function"?Object.is:ZO;function _u(s,a){if(Vi(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!Ee.call(a,g)||!Vi(s[g],a[g]))return!1}return!0}function ww(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Tw(s,a){var c=ww(s);s=0;for(var d;c;){if(c.nodeType===3){if(d=s+c.textContent.length,s<=a&&d>=a)return{node:c,offset:a-s};s=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ww(c)}}function Sw(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Sw(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Aw(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=go(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=go(s.document)}return a}function Fg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var JO=Ts&&"documentMode"in document&&11>=document.documentMode,Pl=null,Bg=null,bu=null,zg=!1;function xw(s,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;zg||Pl==null||Pl!==go(d)||(d=Pl,"selectionStart"in d&&Fg(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),bu&&_u(bu,d)||(bu=d,d=Jf(Bg,"onSelect"),0<d.length&&(a=new Al("onSelect","select",null,a,c),s.push({event:a,listeners:d}),a.target=Pl)))}function Ro(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var Ol={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionrun:Ro("Transition","TransitionRun"),transitionstart:Ro("Transition","TransitionStart"),transitioncancel:Ro("Transition","TransitionCancel"),transitionend:Ro("Transition","TransitionEnd")},qg={},Rw={};Ts&&(Rw=document.createElement("div").style,"AnimationEvent"in window||(delete Ol.animationend.animation,delete Ol.animationiteration.animation,delete Ol.animationstart.animation),"TransitionEvent"in window||delete Ol.transitionend.transition);function Co(s){if(qg[s])return qg[s];if(!Ol[s])return s;var a=Ol[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in Rw)return qg[s]=a[c];return s}var Cw=Co("animationend"),Iw=Co("animationiteration"),Nw=Co("animationstart"),ek=Co("transitionrun"),tk=Co("transitionstart"),nk=Co("transitioncancel"),Dw=Co("transitionend"),Mw=new Map,Hg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hg.push("scrollEnd");function Ss(s,a){Mw.set(s,a),ws(a,[s])}var Pw=new WeakMap;function is(s,a){if(typeof s=="object"&&s!==null){var c=Pw.get(s);return c!==void 0?c:(a={value:s,source:a,stack:wl(a)},Pw.set(s,a),a)}return{value:s,source:a,stack:wl(a)}}var ss=[],kl=0,Gg=0;function pf(){for(var s=kl,a=Gg=kl=0;a<s;){var c=ss[a];ss[a++]=null;var d=ss[a];ss[a++]=null;var g=ss[a];ss[a++]=null;var v=ss[a];if(ss[a++]=null,d!==null&&g!==null){var A=d.pending;A===null?g.next=g:(g.next=A.next,A.next=g),d.pending=g}v!==0&&Ow(c,g,v)}}function gf(s,a,c,d){ss[kl++]=s,ss[kl++]=a,ss[kl++]=c,ss[kl++]=d,Gg|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function $g(s,a,c,d){return gf(s,a,c,d),yf(s)}function Ll(s,a){return gf(s,null,null,a),yf(s)}function Ow(s,a,c){s.lanes|=c;var d=s.alternate;d!==null&&(d.lanes|=c);for(var g=!1,v=s.return;v!==null;)v.childLanes|=c,d=v.alternate,d!==null&&(d.childLanes|=c),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(g=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,g&&a!==null&&(g=31-Bt(c),s=v.hiddenUpdates,d=s[g],d===null?s[g]=[a]:d.push(a),a.lane=c|536870912),v):null}function yf(s){if(50<Gu)throw Gu=0,Zy=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Vl={};function ik(s,a,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(s,a,c,d){return new ik(s,a,c,d)}function Kg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ar(s,a){var c=s.alternate;return c===null?(c=ji(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function kw(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function vf(s,a,c,d,g,v){var A=0;if(d=s,typeof s=="function")Kg(s)&&(A=1);else if(typeof s=="string")A=rL(s,c,qe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case M:return s=ji(31,c,a,g),s.elementType=M,s.lanes=v,s;case S:return Io(c.children,g,v,a);case R:A=8,g|=24;break;case I:return s=ji(12,c,a,g|2),s.elementType=I,s.lanes=v,s;case G:return s=ji(13,c,a,g),s.elementType=G,s.lanes=v,s;case Y:return s=ji(19,c,a,g),s.elementType=Y,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case P:case O:A=10;break e;case F:A=9;break e;case q:A=11;break e;case L:A=14;break e;case C:A=16,d=null;break e}A=29,c=Error(i(130,s===null?"null":typeof s,"")),d=null}return a=ji(A,c,a,g),a.elementType=s,a.type=d,a.lanes=v,a}function Io(s,a,c,d){return s=ji(7,s,d,a),s.lanes=c,s}function Wg(s,a,c){return s=ji(6,s,null,a),s.lanes=c,s}function Yg(s,a,c){return a=ji(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var jl=[],Ul=0,_f=null,bf=0,rs=[],as=0,No=null,xr=1,Rr="";function Do(s,a){jl[Ul++]=bf,jl[Ul++]=_f,_f=s,bf=a}function Lw(s,a,c){rs[as++]=xr,rs[as++]=Rr,rs[as++]=No,No=s;var d=xr;s=Rr;var g=32-Bt(d)-1;d&=~(1<<g),c+=1;var v=32-Bt(a)+g;if(30<v){var A=g-g%5;v=(d&(1<<A)-1).toString(32),d>>=A,g-=A,xr=1<<32-Bt(a)+g|c<<g|d,Rr=v+s}else xr=1<<v|c<<g|d,Rr=s}function Qg(s){s.return!==null&&(Do(s,1),Lw(s,1,0))}function Xg(s){for(;s===_f;)_f=jl[--Ul],jl[Ul]=null,bf=jl[--Ul],jl[Ul]=null;for(;s===No;)No=rs[--as],rs[as]=null,Rr=rs[--as],rs[as]=null,xr=rs[--as],rs[as]=null}var gi=null,rn=null,Tt=!1,Mo=null,Ys=!1,Zg=Error(i(519));function Po(s){var a=Error(i(418,""));throw Tu(is(a,s)),Zg}function Vw(s){var a=s.stateNode,c=s.type,d=s.memoizedProps;switch(a[Ze]=s,a[at]=d,c){case"dialog":nt("cancel",a),nt("close",a);break;case"iframe":case"object":case"embed":nt("load",a);break;case"video":case"audio":for(c=0;c<Ku.length;c++)nt(Ku[c],a);break;case"source":nt("error",a);break;case"img":case"image":case"link":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"input":nt("invalid",a),yo(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Tl(a);break;case"select":nt("invalid",a);break;case"textarea":nt("invalid",a),vo(a,d.value,d.defaultValue,d.children),Tl(a)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||d.suppressHydrationWarning===!0||eA(a.textContent,c)?(d.popover!=null&&(nt("beforetoggle",a),nt("toggle",a)),d.onScroll!=null&&nt("scroll",a),d.onScrollEnd!=null&&nt("scrollend",a),d.onClick!=null&&(a.onclick=em),a=!0):a=!1,a||Po(s)}function jw(s){for(gi=s.return;gi;)switch(gi.tag){case 5:case 13:Ys=!1;return;case 27:case 3:Ys=!0;return;default:gi=gi.return}}function Eu(s){if(s!==gi)return!1;if(!Tt)return jw(s),Tt=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||mv(s.type,s.memoizedProps)),c=!c),c&&rn&&Po(s),jw(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(a===0){rn=xs(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;s=s.nextSibling}rn=null}}else a===27?(a=rn,Ca(s.type)?(s=vv,vv=null,rn=s):rn=a):rn=gi?xs(s.stateNode.nextSibling):null;return!0}function wu(){rn=gi=null,Tt=!1}function Uw(){var s=Mo;return s!==null&&(Ai===null?Ai=s:Ai.push.apply(Ai,s),Mo=null),s}function Tu(s){Mo===null?Mo=[s]:Mo.push(s)}var Jg=ye(null),Oo=null,Cr=null;function fa(s,a,c){de(Jg,a._currentValue),a._currentValue=c}function Ir(s){s._currentValue=Jg.current,me(Jg)}function ey(s,a,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===c)break;s=s.return}}function ty(s,a,c,d){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var v=g.dependencies;if(v!==null){var A=g.child;v=v.firstContext;e:for(;v!==null;){var N=v;v=g;for(var U=0;U<a.length;U++)if(N.context===a[U]){v.lanes|=c,N=v.alternate,N!==null&&(N.lanes|=c),ey(v.return,c,s),d||(A=null);break e}v=N.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(i(341));A.lanes|=c,v=A.alternate,v!==null&&(v.lanes|=c),ey(A,c,s),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===s){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function Su(s,a,c,d){s=null;for(var g=a,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var N=g.type;Vi(g.pendingProps.value,A.value)||(s!==null?s.push(N):s=[N])}}else if(g===Vt.current){if(A=g.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Ju):s=[Ju])}g=g.return}s!==null&&ty(a,s,c,d),a.flags|=262144}function Ef(s){for(s=s.firstContext;s!==null;){if(!Vi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ko(s){Oo=s,Cr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Zn(s){return Fw(Oo,s)}function wf(s,a){return Oo===null&&ko(s),Fw(s,a)}function Fw(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Cr===null){if(s===null)throw Error(i(308));Cr=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Cr=Cr.next=a;return c}var sk=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},rk=t.unstable_scheduleCallback,ak=t.unstable_NormalPriority,Rn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ny(){return{controller:new sk,data:new Map,refCount:0}}function Au(s){s.refCount--,s.refCount===0&&rk(ak,function(){s.controller.abort()})}var xu=null,iy=0,Fl=0,Bl=null;function ok(s,a){if(xu===null){var c=xu=[];iy=0,Fl=rv(),Bl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return iy++,a.then(Bw,Bw),a}function Bw(){if(--iy===0&&xu!==null){Bl!==null&&(Bl.status="fulfilled");var s=xu;xu=null,Fl=0,Bl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function lk(s,a){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var zw=J.S;J.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&ok(s,a),zw!==null&&zw(s,a)};var Lo=ye(null);function sy(){var s=Lo.current;return s!==null?s:qt.pooledCache}function Tf(s,a){a===null?de(Lo,Lo.current):de(Lo,a.pool)}function qw(){var s=sy();return s===null?null:{parent:Rn._currentValue,pool:s}}var Ru=Error(i(460)),Hw=Error(i(474)),Sf=Error(i(542)),ry={then:function(){}};function Gw(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Af(){}function $w(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(Af,Af),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Ww(s),s;default:if(typeof a.status=="string")a.then(Af,Af);else{if(s=qt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Ww(s),s}throw Cu=a,Ru}}var Cu=null;function Kw(){if(Cu===null)throw Error(i(459));var s=Cu;return Cu=null,s}function Ww(s){if(s===Ru||s===Sf)throw Error(i(483))}var ma=!1;function ay(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oy(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function pa(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ga(s,a,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(It&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=yf(s),Ow(s,null,c),a}return gf(s,d,a,c),yf(s)}function Iu(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,cn(s,c)}}function ly(s,a){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?g=v=A:v=v.next=A,c=c.next}while(c!==null);v===null?g=v=a:v=v.next=a}else g=v=a;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var cy=!1;function Nu(){if(cy){var s=Bl;if(s!==null)throw s}}function Du(s,a,c,d){cy=!1;var g=s.updateQueue;ma=!1;var v=g.firstBaseUpdate,A=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var U=N,Q=U.next;U.next=null,A===null?v=Q:A.next=Q,A=U;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,N=ne.lastBaseUpdate,N!==A&&(N===null?ne.firstBaseUpdate=Q:N.next=Q,ne.lastBaseUpdate=U))}if(v!==null){var ae=g.baseState;A=0,ne=Q=U=null,N=v;do{var X=N.lane&-536870913,Z=X!==N.lane;if(Z?(mt&X)===X:(d&X)===X){X!==0&&X===Fl&&(cy=!0),ne!==null&&(ne=ne.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ke=s,Ne=N;X=a;var Ot=c;switch(Ne.tag){case 1:if(ke=Ne.payload,typeof ke=="function"){ae=ke.call(Ot,ae,X);break e}ae=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ne.payload,X=typeof ke=="function"?ke.call(Ot,ae,X):ke,X==null)break e;ae=p({},ae,X);break e;case 2:ma=!0}}X=N.callback,X!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=g.callbacks,Z===null?g.callbacks=[X]:Z.push(X))}else Z={lane:X,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ne===null?(Q=ne=Z,U=ae):ne=ne.next=Z,A|=X;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;Z=N,N=Z.next,Z.next=null,g.lastBaseUpdate=Z,g.shared.pending=null}}while(!0);ne===null&&(U=ae),g.baseState=U,g.firstBaseUpdate=Q,g.lastBaseUpdate=ne,v===null&&(g.shared.lanes=0),Sa|=A,s.lanes=A,s.memoizedState=ae}}function Yw(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function Qw(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)Yw(c[s],a)}var zl=ye(null),xf=ye(0);function Xw(s,a){s=Lr,de(xf,s),de(zl,a),Lr=s|a.baseLanes}function uy(){de(xf,Lr),de(zl,zl.current)}function hy(){Lr=xf.current,me(zl),me(xf)}var ya=0,Qe=null,Mt=null,vn=null,Rf=!1,ql=!1,Vo=!1,Cf=0,Mu=0,Hl=null,ck=0;function hn(){throw Error(i(321))}function dy(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Vi(s[c],a[c]))return!1;return!0}function fy(s,a,c,d,g,v){return ya=v,Qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,J.H=s===null||s.memoizedState===null?OT:kT,Vo=!1,v=c(d,g),Vo=!1,ql&&(v=Jw(a,c,d,g)),Zw(s),v}function Zw(s){J.H=Of;var a=Mt!==null&&Mt.next!==null;if(ya=0,vn=Mt=Qe=null,Rf=!1,Mu=0,Hl=null,a)throw Error(i(300));s===null||Pn||(s=s.dependencies,s!==null&&Ef(s)&&(Pn=!0))}function Jw(s,a,c,d){Qe=s;var g=0;do{if(ql&&(Hl=null),Mu=0,ql=!1,25<=g)throw Error(i(301));if(g+=1,vn=Mt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}J.H=gk,v=a(c,d)}while(ql);return v}function uk(){var s=J.H,a=s.useState()[0];return a=typeof a.then=="function"?Pu(a):a,s=s.useState()[0],(Mt!==null?Mt.memoizedState:null)!==s&&(Qe.flags|=1024),a}function my(){var s=Cf!==0;return Cf=0,s}function py(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function gy(s){if(Rf){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Rf=!1}ya=0,vn=Mt=Qe=null,ql=!1,Mu=Cf=0,Hl=null}function Ti(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Qe.memoizedState=vn=s:vn=vn.next=s,vn}function _n(){if(Mt===null){var s=Qe.alternate;s=s!==null?s.memoizedState:null}else s=Mt.next;var a=vn===null?Qe.memoizedState:vn.next;if(a!==null)vn=a,Mt=s;else{if(s===null)throw Qe.alternate===null?Error(i(467)):Error(i(310));Mt=s,s={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},vn===null?Qe.memoizedState=vn=s:vn=vn.next=s}return vn}function yy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pu(s){var a=Mu;return Mu+=1,Hl===null&&(Hl=[]),s=$w(Hl,s,a),a=Qe,(vn===null?a.memoizedState:vn.next)===null&&(a=a.alternate,J.H=a===null||a.memoizedState===null?OT:kT),s}function If(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Pu(s);if(s.$$typeof===O)return Zn(s)}throw Error(i(438,String(s)))}function vy(s){var a=null,c=Qe.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var d=Qe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=yy(),Qe.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),d=0;d<s;d++)c[d]=k;return a.index++,c}function Nr(s,a){return typeof a=="function"?a(s):a}function Nf(s){var a=_n();return _y(a,Mt,s)}function _y(s,a,c){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var g=s.baseQueue,v=d.pending;if(v!==null){if(g!==null){var A=g.next;g.next=v.next,v.next=A}a.baseQueue=g=v,d.pending=null}if(v=s.baseState,g===null)s.memoizedState=v;else{a=g.next;var N=A=null,U=null,Q=a,ne=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(mt&ae)===ae:(ya&ae)===ae){var X=Q.revertLane;if(X===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===Fl&&(ne=!0);else if((ya&X)===X){Q=Q.next,X===Fl&&(ne=!0);continue}else ae={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},U===null?(N=U=ae,A=v):U=U.next=ae,Qe.lanes|=X,Sa|=X;ae=Q.action,Vo&&c(v,ae),v=Q.hasEagerState?Q.eagerState:c(v,ae)}else X={lane:ae,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},U===null?(N=U=X,A=v):U=U.next=X,Qe.lanes|=ae,Sa|=ae;Q=Q.next}while(Q!==null&&Q!==a);if(U===null?A=v:U.next=N,!Vi(v,s.memoizedState)&&(Pn=!0,ne&&(c=Bl,c!==null)))throw c;s.memoizedState=v,s.baseState=A,s.baseQueue=U,d.lastRenderedState=v}return g===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function by(s){var a=_n(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var d=c.dispatch,g=c.pending,v=a.memoizedState;if(g!==null){c.pending=null;var A=g=g.next;do v=s(v,A.action),A=A.next;while(A!==g);Vi(v,a.memoizedState)||(Pn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),c.lastRenderedState=v}return[v,d]}function eT(s,a,c){var d=Qe,g=_n(),v=Tt;if(v){if(c===void 0)throw Error(i(407));c=c()}else c=a();var A=!Vi((Mt||g).memoizedState,c);A&&(g.memoizedState=c,Pn=!0),g=g.queue;var N=iT.bind(null,d,g,s);if(Ou(2048,8,N,[s]),g.getSnapshot!==a||A||vn!==null&&vn.memoizedState.tag&1){if(d.flags|=2048,Gl(9,Df(),nT.bind(null,d,g,c,a),null),qt===null)throw Error(i(349));v||(ya&124)!==0||tT(d,a,c)}return c}function tT(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Qe.updateQueue,a===null?(a=yy(),Qe.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function nT(s,a,c,d){a.value=c,a.getSnapshot=d,sT(a)&&rT(s)}function iT(s,a,c){return c(function(){sT(a)&&rT(s)})}function sT(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Vi(s,c)}catch{return!0}}function rT(s){var a=Ll(s,2);a!==null&&qi(a,s,2)}function Ey(s){var a=Ti();if(typeof s=="function"){var c=s;if(s=c(),Vo){sn(!0);try{c()}finally{sn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:s},a}function aT(s,a,c,d){return s.baseState=c,_y(s,Mt,typeof d=="function"?d:Nr)}function hk(s,a,c,d,g){if(Pf(s))throw Error(i(485));if(s=a.action,s!==null){var v={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};J.T!==null?c(!0):v.isTransition=!1,d(v),c=a.pending,c===null?(v.next=a.pending=v,oT(a,v)):(v.next=c.next,a.pending=c.next=v)}}function oT(s,a){var c=a.action,d=a.payload,g=s.state;if(a.isTransition){var v=J.T,A={};J.T=A;try{var N=c(g,d),U=J.S;U!==null&&U(A,N),lT(s,a,N)}catch(Q){wy(s,a,Q)}finally{J.T=v}}else try{v=c(g,d),lT(s,a,v)}catch(Q){wy(s,a,Q)}}function lT(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){cT(s,a,d)},function(d){return wy(s,a,d)}):cT(s,a,c)}function cT(s,a,c){a.status="fulfilled",a.value=c,uT(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,oT(s,c)))}function wy(s,a,c){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=c,uT(a),a=a.next;while(a!==d)}s.action=null}function uT(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function hT(s,a){return a}function dT(s,a){if(Tt){var c=qt.formState;if(c!==null){e:{var d=Qe;if(Tt){if(rn){t:{for(var g=rn,v=Ys;g.nodeType!==8;){if(!v){g=null;break t}if(g=xs(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){rn=xs(g.nextSibling),d=g.data==="F!";break e}}Po(d)}d=!1}d&&(a=c[0])}}return c=Ti(),c.memoizedState=c.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hT,lastRenderedState:a},c.queue=d,c=DT.bind(null,Qe,d),d.dispatch=c,d=Ey(!1),v=Ry.bind(null,Qe,!1,d.queue),d=Ti(),g={state:a,dispatch:null,action:s,pending:null},d.queue=g,c=hk.bind(null,Qe,g,v,c),g.dispatch=c,d.memoizedState=s,[a,c,!1]}function fT(s){var a=_n();return mT(a,Mt,s)}function mT(s,a,c){if(a=_y(s,a,hT)[0],s=Nf(Nr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Pu(a)}catch(A){throw A===Ru?Sf:A}else d=a;a=_n();var g=a.queue,v=g.dispatch;return c!==a.memoizedState&&(Qe.flags|=2048,Gl(9,Df(),dk.bind(null,g,c),null)),[d,v,s]}function dk(s,a){s.action=a}function pT(s){var a=_n(),c=Mt;if(c!==null)return mT(a,c,s);_n(),a=a.memoizedState,c=_n();var d=c.queue.dispatch;return c.memoizedState=s,[a,d,!1]}function Gl(s,a,c,d){return s={tag:s,create:c,deps:d,inst:a,next:null},a=Qe.updateQueue,a===null&&(a=yy(),Qe.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,a.lastEffect=s),s}function Df(){return{destroy:void 0,resource:void 0}}function gT(){return _n().memoizedState}function Mf(s,a,c,d){var g=Ti();d=d===void 0?null:d,Qe.flags|=s,g.memoizedState=Gl(1|a,Df(),c,d)}function Ou(s,a,c,d){var g=_n();d=d===void 0?null:d;var v=g.memoizedState.inst;Mt!==null&&d!==null&&dy(d,Mt.memoizedState.deps)?g.memoizedState=Gl(a,v,c,d):(Qe.flags|=s,g.memoizedState=Gl(1|a,v,c,d))}function yT(s,a){Mf(8390656,8,s,a)}function vT(s,a){Ou(2048,8,s,a)}function _T(s,a){return Ou(4,2,s,a)}function bT(s,a){return Ou(4,4,s,a)}function ET(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function wT(s,a,c){c=c!=null?c.concat([s]):null,Ou(4,4,ET.bind(null,a,s),c)}function Ty(){}function TT(s,a){var c=_n();a=a===void 0?null:a;var d=c.memoizedState;return a!==null&&dy(a,d[1])?d[0]:(c.memoizedState=[s,a],s)}function ST(s,a){var c=_n();a=a===void 0?null:a;var d=c.memoizedState;if(a!==null&&dy(a,d[1]))return d[0];if(d=s(),Vo){sn(!0);try{s()}finally{sn(!1)}}return c.memoizedState=[d,a],d}function Sy(s,a,c){return c===void 0||(ya&1073741824)!==0?s.memoizedState=a:(s.memoizedState=c,s=RS(),Qe.lanes|=s,Sa|=s,c)}function AT(s,a,c,d){return Vi(c,a)?c:zl.current!==null?(s=Sy(s,c,d),Vi(s,a)||(Pn=!0),s):(ya&42)===0?(Pn=!0,s.memoizedState=c):(s=RS(),Qe.lanes|=s,Sa|=s,a)}function xT(s,a,c,d,g){var v=te.p;te.p=v!==0&&8>v?v:8;var A=J.T,N={};J.T=N,Ry(s,!1,a,c);try{var U=g(),Q=J.S;if(Q!==null&&Q(N,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ne=lk(U,d);ku(s,a,ne,zi(s))}else ku(s,a,d,zi(s))}catch(ae){ku(s,a,{then:function(){},status:"rejected",reason:ae},zi())}finally{te.p=v,J.T=A}}function fk(){}function Ay(s,a,c,d){if(s.tag!==5)throw Error(i(476));var g=RT(s).queue;xT(s,g,a,ue,c===null?fk:function(){return CT(s),c(d)})}function RT(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:ue},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function CT(s){var a=RT(s).next.queue;ku(s,a,{},zi())}function xy(){return Zn(Ju)}function IT(){return _n().memoizedState}function NT(){return _n().memoizedState}function mk(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=zi();s=pa(c);var d=ga(a,s,c);d!==null&&(qi(d,a,c),Iu(d,a,c)),a={cache:ny()},s.payload=a;return}a=a.return}}function pk(s,a,c){var d=zi();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Pf(s)?MT(a,c):(c=$g(s,a,c,d),c!==null&&(qi(c,s,d),PT(c,a,d)))}function DT(s,a,c){var d=zi();ku(s,a,c,d)}function ku(s,a,c,d){var g={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Pf(s))MT(a,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var A=a.lastRenderedState,N=v(A,c);if(g.hasEagerState=!0,g.eagerState=N,Vi(N,A))return gf(s,a,g,0),qt===null&&pf(),!1}catch{}finally{}if(c=$g(s,a,g,d),c!==null)return qi(c,s,d),PT(c,a,d),!0}return!1}function Ry(s,a,c,d){if(d={lane:2,revertLane:rv(),action:d,hasEagerState:!1,eagerState:null,next:null},Pf(s)){if(a)throw Error(i(479))}else a=$g(s,c,d,2),a!==null&&qi(a,s,2)}function Pf(s){var a=s.alternate;return s===Qe||a!==null&&a===Qe}function MT(s,a){ql=Rf=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function PT(s,a,c){if((c&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,cn(s,c)}}var Of={readContext:Zn,use:If,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn},OT={readContext:Zn,use:If,useCallback:function(s,a){return Ti().memoizedState=[s,a===void 0?null:a],s},useContext:Zn,useEffect:yT,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Mf(4194308,4,ET.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Mf(4194308,4,s,a)},useInsertionEffect:function(s,a){Mf(4,2,s,a)},useMemo:function(s,a){var c=Ti();a=a===void 0?null:a;var d=s();if(Vo){sn(!0);try{s()}finally{sn(!1)}}return c.memoizedState=[d,a],d},useReducer:function(s,a,c){var d=Ti();if(c!==void 0){var g=c(a);if(Vo){sn(!0);try{c(a)}finally{sn(!1)}}}else g=a;return d.memoizedState=d.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},d.queue=s,s=s.dispatch=pk.bind(null,Qe,s),[d.memoizedState,s]},useRef:function(s){var a=Ti();return s={current:s},a.memoizedState=s},useState:function(s){s=Ey(s);var a=s.queue,c=DT.bind(null,Qe,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:Ty,useDeferredValue:function(s,a){var c=Ti();return Sy(c,s,a)},useTransition:function(){var s=Ey(!1);return s=xT.bind(null,Qe,s.queue,!0,!1),Ti().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var d=Qe,g=Ti();if(Tt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),qt===null)throw Error(i(349));(mt&124)!==0||tT(d,a,c)}g.memoizedState=c;var v={value:c,getSnapshot:a};return g.queue=v,yT(iT.bind(null,d,v,s),[s]),d.flags|=2048,Gl(9,Df(),nT.bind(null,d,v,c,a),null),c},useId:function(){var s=Ti(),a=qt.identifierPrefix;if(Tt){var c=Rr,d=xr;c=(d&~(1<<32-Bt(d)-1)).toString(32)+c,a=""+a+"R"+c,c=Cf++,0<c&&(a+="H"+c.toString(32)),a+=""}else c=ck++,a=""+a+"r"+c.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:xy,useFormState:dT,useActionState:dT,useOptimistic:function(s){var a=Ti();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Ry.bind(null,Qe,!0,c),c.dispatch=a,[s,a]},useMemoCache:vy,useCacheRefresh:function(){return Ti().memoizedState=mk.bind(null,Qe)}},kT={readContext:Zn,use:If,useCallback:TT,useContext:Zn,useEffect:vT,useImperativeHandle:wT,useInsertionEffect:_T,useLayoutEffect:bT,useMemo:ST,useReducer:Nf,useRef:gT,useState:function(){return Nf(Nr)},useDebugValue:Ty,useDeferredValue:function(s,a){var c=_n();return AT(c,Mt.memoizedState,s,a)},useTransition:function(){var s=Nf(Nr)[0],a=_n().memoizedState;return[typeof s=="boolean"?s:Pu(s),a]},useSyncExternalStore:eT,useId:IT,useHostTransitionStatus:xy,useFormState:fT,useActionState:fT,useOptimistic:function(s,a){var c=_n();return aT(c,Mt,s,a)},useMemoCache:vy,useCacheRefresh:NT},gk={readContext:Zn,use:If,useCallback:TT,useContext:Zn,useEffect:vT,useImperativeHandle:wT,useInsertionEffect:_T,useLayoutEffect:bT,useMemo:ST,useReducer:by,useRef:gT,useState:function(){return by(Nr)},useDebugValue:Ty,useDeferredValue:function(s,a){var c=_n();return Mt===null?Sy(c,s,a):AT(c,Mt.memoizedState,s,a)},useTransition:function(){var s=by(Nr)[0],a=_n().memoizedState;return[typeof s=="boolean"?s:Pu(s),a]},useSyncExternalStore:eT,useId:IT,useHostTransitionStatus:xy,useFormState:pT,useActionState:pT,useOptimistic:function(s,a){var c=_n();return Mt!==null?aT(c,Mt,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:vy,useCacheRefresh:NT},$l=null,Lu=0;function kf(s){var a=Lu;return Lu+=1,$l===null&&($l=[]),$w($l,s,a)}function Vu(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Lf(s,a){throw a.$$typeof===y?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function LT(s){var a=s._init;return a(s._payload)}function VT(s){function a(H,z){if(s){var W=H.deletions;W===null?(H.deletions=[z],H.flags|=16):W.push(z)}}function c(H,z){if(!s)return null;for(;z!==null;)a(H,z),z=z.sibling;return null}function d(H){for(var z=new Map;H!==null;)H.key!==null?z.set(H.key,H):z.set(H.index,H),H=H.sibling;return z}function g(H,z){return H=Ar(H,z),H.index=0,H.sibling=null,H}function v(H,z,W){return H.index=W,s?(W=H.alternate,W!==null?(W=W.index,W<z?(H.flags|=67108866,z):W):(H.flags|=67108866,z)):(H.flags|=1048576,z)}function A(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function N(H,z,W,se){return z===null||z.tag!==6?(z=Wg(W,H.mode,se),z.return=H,z):(z=g(z,W),z.return=H,z)}function U(H,z,W,se){var ge=W.type;return ge===S?ne(H,z,W.props.children,se,W.key):z!==null&&(z.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===C&&LT(ge)===z.type)?(z=g(z,W.props),Vu(z,W),z.return=H,z):(z=vf(W.type,W.key,W.props,null,H.mode,se),Vu(z,W),z.return=H,z)}function Q(H,z,W,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=Yg(W,H.mode,se),z.return=H,z):(z=g(z,W.children||[]),z.return=H,z)}function ne(H,z,W,se,ge){return z===null||z.tag!==7?(z=Io(W,H.mode,se,ge),z.return=H,z):(z=g(z,W),z.return=H,z)}function ae(H,z,W){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Wg(""+z,H.mode,W),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case _:return W=vf(z.type,z.key,z.props,null,H.mode,W),Vu(W,z),W.return=H,W;case E:return z=Yg(z,H.mode,W),z.return=H,z;case C:var se=z._init;return z=se(z._payload),ae(H,z,W)}if(we(z)||B(z))return z=Io(z,H.mode,W,null),z.return=H,z;if(typeof z.then=="function")return ae(H,kf(z),W);if(z.$$typeof===O)return ae(H,wf(H,z),W);Lf(H,z)}return null}function X(H,z,W,se){var ge=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return ge!==null?null:N(H,z,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case _:return W.key===ge?U(H,z,W,se):null;case E:return W.key===ge?Q(H,z,W,se):null;case C:return ge=W._init,W=ge(W._payload),X(H,z,W,se)}if(we(W)||B(W))return ge!==null?null:ne(H,z,W,se,null);if(typeof W.then=="function")return X(H,z,kf(W),se);if(W.$$typeof===O)return X(H,z,wf(H,W),se);Lf(H,W)}return null}function Z(H,z,W,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return H=H.get(W)||null,N(z,H,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case _:return H=H.get(se.key===null?W:se.key)||null,U(z,H,se,ge);case E:return H=H.get(se.key===null?W:se.key)||null,Q(z,H,se,ge);case C:var Je=se._init;return se=Je(se._payload),Z(H,z,W,se,ge)}if(we(se)||B(se))return H=H.get(W)||null,ne(z,H,se,ge,null);if(typeof se.then=="function")return Z(H,z,W,kf(se),ge);if(se.$$typeof===O)return Z(H,z,W,wf(z,se),ge);Lf(z,se)}return null}function ke(H,z,W,se){for(var ge=null,Je=null,Se=z,De=z=0,kn=null;Se!==null&&De<W.length;De++){Se.index>De?(kn=Se,Se=null):kn=Se.sibling;var _t=X(H,Se,W[De],se);if(_t===null){Se===null&&(Se=kn);break}s&&Se&&_t.alternate===null&&a(H,Se),z=v(_t,z,De),Je===null?ge=_t:Je.sibling=_t,Je=_t,Se=kn}if(De===W.length)return c(H,Se),Tt&&Do(H,De),ge;if(Se===null){for(;De<W.length;De++)Se=ae(H,W[De],se),Se!==null&&(z=v(Se,z,De),Je===null?ge=Se:Je.sibling=Se,Je=Se);return Tt&&Do(H,De),ge}for(Se=d(Se);De<W.length;De++)kn=Z(Se,H,De,W[De],se),kn!==null&&(s&&kn.alternate!==null&&Se.delete(kn.key===null?De:kn.key),z=v(kn,z,De),Je===null?ge=kn:Je.sibling=kn,Je=kn);return s&&Se.forEach(function(Pa){return a(H,Pa)}),Tt&&Do(H,De),ge}function Ne(H,z,W,se){if(W==null)throw Error(i(151));for(var ge=null,Je=null,Se=z,De=z=0,kn=null,_t=W.next();Se!==null&&!_t.done;De++,_t=W.next()){Se.index>De?(kn=Se,Se=null):kn=Se.sibling;var Pa=X(H,Se,_t.value,se);if(Pa===null){Se===null&&(Se=kn);break}s&&Se&&Pa.alternate===null&&a(H,Se),z=v(Pa,z,De),Je===null?ge=Pa:Je.sibling=Pa,Je=Pa,Se=kn}if(_t.done)return c(H,Se),Tt&&Do(H,De),ge;if(Se===null){for(;!_t.done;De++,_t=W.next())_t=ae(H,_t.value,se),_t!==null&&(z=v(_t,z,De),Je===null?ge=_t:Je.sibling=_t,Je=_t);return Tt&&Do(H,De),ge}for(Se=d(Se);!_t.done;De++,_t=W.next())_t=Z(Se,H,De,_t.value,se),_t!==null&&(s&&_t.alternate!==null&&Se.delete(_t.key===null?De:_t.key),z=v(_t,z,De),Je===null?ge=_t:Je.sibling=_t,Je=_t);return s&&Se.forEach(function(yL){return a(H,yL)}),Tt&&Do(H,De),ge}function Ot(H,z,W,se){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case _:e:{for(var ge=W.key;z!==null;){if(z.key===ge){if(ge=W.type,ge===S){if(z.tag===7){c(H,z.sibling),se=g(z,W.props.children),se.return=H,H=se;break e}}else if(z.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===C&&LT(ge)===z.type){c(H,z.sibling),se=g(z,W.props),Vu(se,W),se.return=H,H=se;break e}c(H,z);break}else a(H,z);z=z.sibling}W.type===S?(se=Io(W.props.children,H.mode,se,W.key),se.return=H,H=se):(se=vf(W.type,W.key,W.props,null,H.mode,se),Vu(se,W),se.return=H,H=se)}return A(H);case E:e:{for(ge=W.key;z!==null;){if(z.key===ge)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){c(H,z.sibling),se=g(z,W.children||[]),se.return=H,H=se;break e}else{c(H,z);break}else a(H,z);z=z.sibling}se=Yg(W,H.mode,se),se.return=H,H=se}return A(H);case C:return ge=W._init,W=ge(W._payload),Ot(H,z,W,se)}if(we(W))return ke(H,z,W,se);if(B(W)){if(ge=B(W),typeof ge!="function")throw Error(i(150));return W=ge.call(W),Ne(H,z,W,se)}if(typeof W.then=="function")return Ot(H,z,kf(W),se);if(W.$$typeof===O)return Ot(H,z,wf(H,W),se);Lf(H,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,z!==null&&z.tag===6?(c(H,z.sibling),se=g(z,W),se.return=H,H=se):(c(H,z),se=Wg(W,H.mode,se),se.return=H,H=se),A(H)):c(H,z)}return function(H,z,W,se){try{Lu=0;var ge=Ot(H,z,W,se);return $l=null,ge}catch(Se){if(Se===Ru||Se===Sf)throw Se;var Je=ji(29,Se,null,H.mode);return Je.lanes=se,Je.return=H,Je}finally{}}}var Kl=VT(!0),jT=VT(!1),os=ye(null),Qs=null;function va(s){var a=s.alternate;de(Cn,Cn.current&1),de(os,s),Qs===null&&(a===null||zl.current!==null||a.memoizedState!==null)&&(Qs=s)}function UT(s){if(s.tag===22){if(de(Cn,Cn.current),de(os,s),Qs===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(Qs=s)}}else _a()}function _a(){de(Cn,Cn.current),de(os,os.current)}function Dr(s){me(os),Qs===s&&(Qs=null),me(Cn)}var Cn=ye(0);function Vf(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||yv(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Cy(s,a,c,d){a=s.memoizedState,c=c(d,a),c=c==null?a:p({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Iy={enqueueSetState:function(s,a,c){s=s._reactInternals;var d=zi(),g=pa(d);g.payload=a,c!=null&&(g.callback=c),a=ga(s,g,d),a!==null&&(qi(a,s,d),Iu(a,s,d))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var d=zi(),g=pa(d);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=ga(s,g,d),a!==null&&(qi(a,s,d),Iu(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=zi(),d=pa(c);d.tag=2,a!=null&&(d.callback=a),a=ga(s,d,c),a!==null&&(qi(a,s,c),Iu(a,s,c))}};function FT(s,a,c,d,g,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,A):a.prototype&&a.prototype.isPureReactComponent?!_u(c,d)||!_u(g,v):!0}function BT(s,a,c,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==s&&Iy.enqueueReplaceState(a,a.state,null)}function jo(s,a){var c=a;if("ref"in a){c={};for(var d in a)d!=="ref"&&(c[d]=a[d])}if(s=s.defaultProps){c===a&&(c=p({},c));for(var g in s)c[g]===void 0&&(c[g]=s[g])}return c}var jf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function zT(s){jf(s)}function qT(s){console.error(s)}function HT(s){jf(s)}function Uf(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function GT(s,a,c){try{var d=s.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Ny(s,a,c){return c=pa(c),c.tag=3,c.payload={element:null},c.callback=function(){Uf(s,a)},c}function $T(s){return s=pa(s),s.tag=3,s}function KT(s,a,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;s.payload=function(){return g(v)},s.callback=function(){GT(a,c,d)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){GT(a,c,d),typeof g!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function yk(s,a,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=c.alternate,a!==null&&Su(a,c,g,!0),c=os.current,c!==null){switch(c.tag){case 13:return Qs===null?ev():c.alternate===null&&an===0&&(an=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===ry?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([d]):a.add(d),nv(s,d,g)),!1;case 22:return c.flags|=65536,d===ry?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([d]):c.add(d)),nv(s,d,g)),!1}throw Error(i(435,c.tag))}return nv(s,d,g),ev(),!1}if(Tt)return a=os.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==Zg&&(s=Error(i(422),{cause:d}),Tu(is(s,c)))):(d!==Zg&&(a=Error(i(423),{cause:d}),Tu(is(a,c))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,d=is(d,c),g=Ny(s.stateNode,d,g),ly(s,g),an!==4&&(an=2)),!1;var v=Error(i(520),{cause:d});if(v=is(v,c),Hu===null?Hu=[v]:Hu.push(v),an!==4&&(an=2),a===null)return!0;d=is(d,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=g&-g,c.lanes|=s,s=Ny(c.stateNode,d,s),ly(c,s),!1;case 1:if(a=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Aa===null||!Aa.has(v))))return c.flags|=65536,g&=-g,c.lanes|=g,g=$T(g),KT(g,s,c,d),ly(c,g),!1}c=c.return}while(c!==null);return!1}var WT=Error(i(461)),Pn=!1;function Gn(s,a,c,d){a.child=s===null?jT(a,null,c,d):Kl(a,s.child,c,d)}function YT(s,a,c,d,g){c=c.render;var v=a.ref;if("ref"in d){var A={};for(var N in d)N!=="ref"&&(A[N]=d[N])}else A=d;return ko(a),d=fy(s,a,c,A,v,g),N=my(),s!==null&&!Pn?(py(s,a,g),Mr(s,a,g)):(Tt&&N&&Qg(a),a.flags|=1,Gn(s,a,d,g),a.child)}function QT(s,a,c,d,g){if(s===null){var v=c.type;return typeof v=="function"&&!Kg(v)&&v.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=v,XT(s,a,v,d,g)):(s=vf(c.type,null,d,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(v=s.child,!jy(s,g)){var A=v.memoizedProps;if(c=c.compare,c=c!==null?c:_u,c(A,d)&&s.ref===a.ref)return Mr(s,a,g)}return a.flags|=1,s=Ar(v,d),s.ref=a.ref,s.return=a,a.child=s}function XT(s,a,c,d,g){if(s!==null){var v=s.memoizedProps;if(_u(v,d)&&s.ref===a.ref)if(Pn=!1,a.pendingProps=d=v,jy(s,g))(s.flags&131072)!==0&&(Pn=!0);else return a.lanes=s.lanes,Mr(s,a,g)}return Dy(s,a,c,d,g)}function ZT(s,a,c){var d=a.pendingProps,g=d.children,v=s!==null?s.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=v!==null?v.baseLanes|c:c,s!==null){for(g=a.child=s.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;a.childLanes=v&~d}else a.childLanes=0,a.child=null;return JT(s,a,d,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Tf(a,v!==null?v.cachePool:null),v!==null?Xw(a,v):uy(),UT(a);else return a.lanes=a.childLanes=536870912,JT(s,a,v!==null?v.baseLanes|c:c,c)}else v!==null?(Tf(a,v.cachePool),Xw(a,v),_a(),a.memoizedState=null):(s!==null&&Tf(a,null),uy(),_a());return Gn(s,a,g,c),a.child}function JT(s,a,c,d){var g=sy();return g=g===null?null:{parent:Rn._currentValue,pool:g},a.memoizedState={baseLanes:c,cachePool:g},s!==null&&Tf(a,null),uy(),UT(a),s!==null&&Su(s,a,d,!0),null}function Ff(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function Dy(s,a,c,d,g){return ko(a),c=fy(s,a,c,d,void 0,g),d=my(),s!==null&&!Pn?(py(s,a,g),Mr(s,a,g)):(Tt&&d&&Qg(a),a.flags|=1,Gn(s,a,c,g),a.child)}function eS(s,a,c,d,g,v){return ko(a),a.updateQueue=null,c=Jw(a,d,c,g),Zw(s),d=my(),s!==null&&!Pn?(py(s,a,v),Mr(s,a,v)):(Tt&&d&&Qg(a),a.flags|=1,Gn(s,a,c,v),a.child)}function tS(s,a,c,d,g){if(ko(a),a.stateNode===null){var v=Vl,A=c.contextType;typeof A=="object"&&A!==null&&(v=Zn(A)),v=new c(d,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Iy,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=d,v.state=a.memoizedState,v.refs={},ay(a),A=c.contextType,v.context=typeof A=="object"&&A!==null?Zn(A):Vl,v.state=a.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(Cy(a,c,A,d),v.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Iy.enqueueReplaceState(v,v.state,null),Du(a,d,v,g),Nu(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){v=a.stateNode;var N=a.memoizedProps,U=jo(c,N);v.props=U;var Q=v.context,ne=c.contextType;A=Vl,typeof ne=="object"&&ne!==null&&(A=Zn(ne));var ae=c.getDerivedStateFromProps;ne=typeof ae=="function"||typeof v.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,ne||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(N||Q!==A)&&BT(a,v,d,A),ma=!1;var X=a.memoizedState;v.state=X,Du(a,d,v,g),Nu(),Q=a.memoizedState,N||X!==Q||ma?(typeof ae=="function"&&(Cy(a,c,ae,d),Q=a.memoizedState),(U=ma||FT(a,c,U,d,X,Q,A))?(ne||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=Q),v.props=d,v.state=Q,v.context=A,d=U):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{v=a.stateNode,oy(s,a),A=a.memoizedProps,ne=jo(c,A),v.props=ne,ae=a.pendingProps,X=v.context,Q=c.contextType,U=Vl,typeof Q=="object"&&Q!==null&&(U=Zn(Q)),N=c.getDerivedStateFromProps,(Q=typeof N=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ae||X!==U)&&BT(a,v,d,U),ma=!1,X=a.memoizedState,v.state=X,Du(a,d,v,g),Nu();var Z=a.memoizedState;A!==ae||X!==Z||ma||s!==null&&s.dependencies!==null&&Ef(s.dependencies)?(typeof N=="function"&&(Cy(a,c,N,d),Z=a.memoizedState),(ne=ma||FT(a,c,ne,d,X,Z,U)||s!==null&&s.dependencies!==null&&Ef(s.dependencies))?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,Z,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,Z,U)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&X===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&X===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=Z),v.props=d,v.state=Z,v.context=U,d=ne):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&X===s.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&X===s.memoizedState||(a.flags|=1024),d=!1)}return v=d,Ff(s,a),d=(a.flags&128)!==0,v||d?(v=a.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,s!==null&&d?(a.child=Kl(a,s.child,null,g),a.child=Kl(a,null,c,g)):Gn(s,a,c,g),a.memoizedState=v.state,s=a.child):s=Mr(s,a,g),s}function nS(s,a,c,d){return wu(),a.flags|=256,Gn(s,a,c,d),a.child}var My={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Py(s){return{baseLanes:s,cachePool:qw()}}function Oy(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=ls),s}function iS(s,a,c){var d=a.pendingProps,g=!1,v=(a.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(Cn.current&2)!==0),A&&(g=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(Tt){if(g?va(a):_a(),Tt){var N=rn,U;if(U=N){e:{for(U=N,N=Ys;U.nodeType!==8;){if(!N){N=null;break e}if(U=xs(U.nextSibling),U===null){N=null;break e}}N=U}N!==null?(a.memoizedState={dehydrated:N,treeContext:No!==null?{id:xr,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},U=ji(18,null,null,0),U.stateNode=N,U.return=a,a.child=U,gi=a,rn=null,U=!0):U=!1}U||Po(a)}if(N=a.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return yv(N)?a.lanes=32:a.lanes=536870912,null;Dr(a)}return N=d.children,d=d.fallback,g?(_a(),g=a.mode,N=Bf({mode:"hidden",children:N},g),d=Io(d,g,c,null),N.return=a,d.return=a,N.sibling=d,a.child=N,g=a.child,g.memoizedState=Py(c),g.childLanes=Oy(s,A,c),a.memoizedState=My,d):(va(a),ky(a,N))}if(U=s.memoizedState,U!==null&&(N=U.dehydrated,N!==null)){if(v)a.flags&256?(va(a),a.flags&=-257,a=Ly(s,a,c)):a.memoizedState!==null?(_a(),a.child=s.child,a.flags|=128,a=null):(_a(),g=d.fallback,N=a.mode,d=Bf({mode:"visible",children:d.children},N),g=Io(g,N,c,null),g.flags|=2,d.return=a,g.return=a,d.sibling=g,a.child=d,Kl(a,s.child,null,c),d=a.child,d.memoizedState=Py(c),d.childLanes=Oy(s,A,c),a.memoizedState=My,a=g);else if(va(a),yv(N)){if(A=N.nextSibling&&N.nextSibling.dataset,A)var Q=A.dgst;A=Q,d=Error(i(419)),d.stack="",d.digest=A,Tu({value:d,source:null,stack:null}),a=Ly(s,a,c)}else if(Pn||Su(s,a,c,!1),A=(c&s.childLanes)!==0,Pn||A){if(A=qt,A!==null&&(d=c&-c,d=(d&42)!==0?1:We(d),d=(d&(A.suspendedLanes|c))!==0?0:d,d!==0&&d!==U.retryLane))throw U.retryLane=d,Ll(s,d),qi(A,s,d),WT;N.data==="$?"||ev(),a=Ly(s,a,c)}else N.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=U.treeContext,rn=xs(N.nextSibling),gi=a,Tt=!0,Mo=null,Ys=!1,s!==null&&(rs[as++]=xr,rs[as++]=Rr,rs[as++]=No,xr=s.id,Rr=s.overflow,No=a),a=ky(a,d.children),a.flags|=4096);return a}return g?(_a(),g=d.fallback,N=a.mode,U=s.child,Q=U.sibling,d=Ar(U,{mode:"hidden",children:d.children}),d.subtreeFlags=U.subtreeFlags&65011712,Q!==null?g=Ar(Q,g):(g=Io(g,N,c,null),g.flags|=2),g.return=a,d.return=a,d.sibling=g,a.child=d,d=g,g=a.child,N=s.child.memoizedState,N===null?N=Py(c):(U=N.cachePool,U!==null?(Q=Rn._currentValue,U=U.parent!==Q?{parent:Q,pool:Q}:U):U=qw(),N={baseLanes:N.baseLanes|c,cachePool:U}),g.memoizedState=N,g.childLanes=Oy(s,A,c),a.memoizedState=My,d):(va(a),c=s.child,s=c.sibling,c=Ar(c,{mode:"visible",children:d.children}),c.return=a,c.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=c,a.memoizedState=null,c)}function ky(s,a){return a=Bf({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Bf(s,a){return s=ji(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ly(s,a,c){return Kl(a,s.child,null,c),s=ky(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function sS(s,a,c){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),ey(s.return,a,c)}function Vy(s,a,c,d,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=c,v.tailMode=g)}function rS(s,a,c){var d=a.pendingProps,g=d.revealOrder,v=d.tail;if(Gn(s,a,d.children,c),d=Cn.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&sS(s,c,a);else if(s.tag===19)sS(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}switch(de(Cn,d),g){case"forwards":for(c=a.child,g=null;c!==null;)s=c.alternate,s!==null&&Vf(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Vy(a,!1,g,c,v);break;case"backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&Vf(s)===null){a.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}Vy(a,!0,c,null,v);break;case"together":Vy(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Mr(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),Sa|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(Su(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,c=Ar(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=Ar(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function jy(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Ef(s)))}function vk(s,a,c){switch(a.tag){case 3:Ae(a,a.stateNode.containerInfo),fa(a,Rn,s.memoizedState.cache),wu();break;case 27:case 5:Re(a);break;case 4:Ae(a,a.stateNode.containerInfo);break;case 10:fa(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(va(a),a.flags|=128,null):(c&a.child.childLanes)!==0?iS(s,a,c):(va(a),s=Mr(s,a,c),s!==null?s.sibling:null);va(a);break;case 19:var g=(s.flags&128)!==0;if(d=(c&a.childLanes)!==0,d||(Su(s,a,c,!1),d=(c&a.childLanes)!==0),g){if(d)return rS(s,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(Cn,Cn.current),d)break;return null;case 22:case 23:return a.lanes=0,ZT(s,a,c);case 24:fa(a,Rn,s.memoizedState.cache)}return Mr(s,a,c)}function aS(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)Pn=!0;else{if(!jy(s,c)&&(a.flags&128)===0)return Pn=!1,vk(s,a,c);Pn=(s.flags&131072)!==0}else Pn=!1,Tt&&(a.flags&1048576)!==0&&Lw(a,bf,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var d=a.elementType,g=d._init;if(d=g(d._payload),a.type=d,typeof d=="function")Kg(d)?(s=jo(d,s),a.tag=1,a=tS(null,a,d,s,c)):(a.tag=0,a=Dy(null,a,d,s,c));else{if(d!=null){if(g=d.$$typeof,g===q){a.tag=11,a=YT(null,a,d,s,c);break e}else if(g===L){a.tag=14,a=QT(null,a,d,s,c);break e}}throw a=ve(d)||d,Error(i(306,a,""))}}return a;case 0:return Dy(s,a,a.type,a.pendingProps,c);case 1:return d=a.type,g=jo(d,a.pendingProps),tS(s,a,d,g,c);case 3:e:{if(Ae(a,a.stateNode.containerInfo),s===null)throw Error(i(387));d=a.pendingProps;var v=a.memoizedState;g=v.element,oy(s,a),Du(a,d,null,c);var A=a.memoizedState;if(d=A.cache,fa(a,Rn,d),d!==v.cache&&ty(a,[Rn],c,!0),Nu(),d=A.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=nS(s,a,d,c);break e}else if(d!==g){g=is(Error(i(424)),a),Tu(g),a=nS(s,a,d,c);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(rn=xs(s.firstChild),gi=a,Tt=!0,Mo=null,Ys=!0,c=jT(a,null,d,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(wu(),d===g){a=Mr(s,a,c);break e}Gn(s,a,d,c)}a=a.child}return a;case 26:return Ff(s,a),s===null?(c=uA(a.type,null,a.pendingProps,null))?a.memoizedState=c:Tt||(c=a.type,s=a.pendingProps,d=tm(rt.current).createElement(c),d[Ze]=a,d[at]=s,Kn(d,c,s),un(d),a.stateNode=d):a.memoizedState=uA(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Re(a),s===null&&Tt&&(d=a.stateNode=oA(a.type,a.pendingProps,rt.current),gi=a,Ys=!0,g=rn,Ca(a.type)?(vv=g,rn=xs(d.firstChild)):rn=g),Gn(s,a,a.pendingProps.children,c),Ff(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Tt&&((g=d=rn)&&(d=$k(d,a.type,a.pendingProps,Ys),d!==null?(a.stateNode=d,gi=a,rn=xs(d.firstChild),Ys=!1,g=!0):g=!1),g||Po(a)),Re(a),g=a.type,v=a.pendingProps,A=s!==null?s.memoizedProps:null,d=v.children,mv(g,v)?d=null:A!==null&&mv(g,A)&&(a.flags|=32),a.memoizedState!==null&&(g=fy(s,a,uk,null,null,c),Ju._currentValue=g),Ff(s,a),Gn(s,a,d,c),a.child;case 6:return s===null&&Tt&&((s=c=rn)&&(c=Kk(c,a.pendingProps,Ys),c!==null?(a.stateNode=c,gi=a,rn=null,s=!0):s=!1),s||Po(a)),null;case 13:return iS(s,a,c);case 4:return Ae(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=Kl(a,null,d,c):Gn(s,a,d,c),a.child;case 11:return YT(s,a,a.type,a.pendingProps,c);case 7:return Gn(s,a,a.pendingProps,c),a.child;case 8:return Gn(s,a,a.pendingProps.children,c),a.child;case 12:return Gn(s,a,a.pendingProps.children,c),a.child;case 10:return d=a.pendingProps,fa(a,a.type,d.value),Gn(s,a,d.children,c),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,ko(a),g=Zn(g),d=d(g),a.flags|=1,Gn(s,a,d,c),a.child;case 14:return QT(s,a,a.type,a.pendingProps,c);case 15:return XT(s,a,a.type,a.pendingProps,c);case 19:return rS(s,a,c);case 31:return d=a.pendingProps,c=a.mode,d={mode:d.mode,children:d.children},s===null?(c=Bf(d,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=Ar(s.child,d),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return ZT(s,a,c);case 24:return ko(a),d=Zn(Rn),s===null?(g=sy(),g===null&&(g=qt,v=ny(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=c),g=v),a.memoizedState={parent:d,cache:g},ay(a),fa(a,Rn,g)):((s.lanes&c)!==0&&(oy(s,a),Du(a,null,null,c),Nu()),g=s.memoizedState,v=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),fa(a,Rn,d)):(d=v.cache,fa(a,Rn,d),d!==g.cache&&ty(a,[Rn],c,!0))),Gn(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Pr(s){s.flags|=4}function oS(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!pA(a)){if(a=os.current,a!==null&&((mt&4194048)===mt?Qs!==null:(mt&62914560)!==mt&&(mt&536870912)===0||a!==Qs))throw Cu=ry,Hw;s.flags|=8192}}function zf(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ge():536870912,s.lanes|=a,Xl|=a)}function ju(s,a){if(!Tt)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function tn(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(a)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=c,a}function _k(s,a,c){var d=a.pendingProps;switch(Xg(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(a),null;case 1:return tn(a),null;case 3:return c=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Ir(Rn),Ve(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Eu(a)?Pr(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Uw())),tn(a),null;case 26:return c=a.memoizedState,s===null?(Pr(a),c!==null?(tn(a),oS(a,c)):(tn(a),a.flags&=-16777217)):c?c!==s.memoizedState?(Pr(a),tn(a),oS(a,c)):(tn(a),a.flags&=-16777217):(s.memoizedProps!==d&&Pr(a),tn(a),a.flags&=-16777217),null;case 27:je(a),c=rt.current;var g=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Pr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return tn(a),null}s=qe.current,Eu(a)?Vw(a):(s=oA(g,d,c),a.stateNode=s,Pr(a))}return tn(a),null;case 5:if(je(a),c=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Pr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return tn(a),null}if(s=qe.current,Eu(a))Vw(a);else{switch(g=tm(rt.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?s.multiple=!0:d.size&&(s.size=d.size);break;default:s=typeof d.is=="string"?g.createElement(c,{is:d.is}):g.createElement(c)}}s[Ze]=a,s[at]=d;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=s;e:switch(Kn(s,c,d),c){case"button":case"input":case"select":case"textarea":s=!!d.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Pr(a)}}return tn(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&Pr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(s=rt.current,Eu(a)){if(s=a.stateNode,c=a.memoizedProps,d=null,g=gi,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}s[Ze]=a,s=!!(s.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||eA(s.nodeValue,c)),s||Po(a)}else s=tm(s).createTextNode(d),s[Ze]=a,a.stateNode=s}return tn(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Eu(a),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ze]=a}else wu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;tn(a),g=!1}else g=Uw(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Dr(a),a):(Dr(a),null)}if(Dr(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=d!==null,s=s!==null&&s.memoizedState!==null,c){d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)}return c!==s&&c&&(a.child.flags|=8192),zf(a,a.updateQueue),tn(a),null;case 4:return Ve(),s===null&&cv(a.stateNode.containerInfo),tn(a),null;case 10:return Ir(a.type),tn(a),null;case 19:if(me(Cn),g=a.memoizedState,g===null)return tn(a),null;if(d=(a.flags&128)!==0,v=g.rendering,v===null)if(d)ju(g,!1);else{if(an!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(v=Vf(s),v!==null){for(a.flags|=128,ju(g,!1),s=v.updateQueue,a.updateQueue=s,zf(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)kw(c,s),c=c.sibling;return de(Cn,Cn.current&1|2),a.child}s=s.sibling}g.tail!==null&&bt()>Gf&&(a.flags|=128,d=!0,ju(g,!1),a.lanes=4194304)}else{if(!d)if(s=Vf(v),s!==null){if(a.flags|=128,d=!0,s=s.updateQueue,a.updateQueue=s,zf(a,s),ju(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Tt)return tn(a),null}else 2*bt()-g.renderingStartTime>Gf&&c!==536870912&&(a.flags|=128,d=!0,ju(g,!1),a.lanes=4194304);g.isBackwards?(v.sibling=a.child,a.child=v):(s=g.last,s!==null?s.sibling=v:a.child=v,g.last=v)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=bt(),a.sibling=null,s=Cn.current,de(Cn,d?s&1|2:s&1),a):(tn(a),null);case 22:case 23:return Dr(a),hy(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(c&536870912)!==0&&(a.flags&128)===0&&(tn(a),a.subtreeFlags&6&&(a.flags|=8192)):tn(a),c=a.updateQueue,c!==null&&zf(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048),s!==null&&me(Lo),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Ir(Rn),tn(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function bk(s,a){switch(Xg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ir(Rn),Ve(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return je(a),null;case 13:if(Dr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));wu()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return me(Cn),null;case 4:return Ve(),null;case 10:return Ir(a.type),null;case 22:case 23:return Dr(a),hy(),s!==null&&me(Lo),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Ir(Rn),null;case 25:return null;default:return null}}function lS(s,a){switch(Xg(a),a.tag){case 3:Ir(Rn),Ve();break;case 26:case 27:case 5:je(a);break;case 4:Ve();break;case 13:Dr(a);break;case 19:me(Cn);break;case 10:Ir(a.type);break;case 22:case 23:Dr(a),hy(),s!==null&&me(Lo);break;case 24:Ir(Rn)}}function Uu(s,a){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&s)===s){d=void 0;var v=c.create,A=c.inst;d=v(),A.destroy=d}c=c.next}while(c!==g)}}catch(N){Ut(a,a.return,N)}}function ba(s,a,c){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&s)===s){var A=d.inst,N=A.destroy;if(N!==void 0){A.destroy=void 0,g=a;var U=c,Q=N;try{Q()}catch(ne){Ut(g,U,ne)}}}d=d.next}while(d!==v)}}catch(ne){Ut(a,a.return,ne)}}function cS(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{Qw(a,c)}catch(d){Ut(s,s.return,d)}}}function uS(s,a,c){c.props=jo(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(d){Ut(s,a,d)}}function Fu(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof c=="function"?s.refCleanup=c(d):c.current=d}}catch(g){Ut(s,a,g)}}function Xs(s,a){var c=s.ref,d=s.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Ut(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Ut(s,a,g)}else c.current=null}function hS(s){var a=s.type,c=s.memoizedProps,d=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Ut(s,s.return,g)}}function Uy(s,a,c){try{var d=s.stateNode;Bk(d,s.type,c,a),d[at]=a}catch(g){Ut(s,s.return,g)}}function dS(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ca(s.type)||s.tag===4}function Fy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||dS(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ca(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function By(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=em));else if(d!==4&&(d===27&&Ca(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(By(s,a,c),s=s.sibling;s!==null;)By(s,a,c),s=s.sibling}function qf(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(d!==4&&(d===27&&Ca(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(qf(s,a,c),s=s.sibling;s!==null;)qf(s,a,c),s=s.sibling}function fS(s){var a=s.stateNode,c=s.memoizedProps;try{for(var d=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Kn(a,d,c),a[Ze]=s,a[at]=c}catch(v){Ut(s,s.return,v)}}var Or=!1,dn=!1,zy=!1,mS=typeof WeakSet=="function"?WeakSet:Set,On=null;function Ek(s,a){if(s=s.containerInfo,dv=om,s=Aw(s),Fg(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var A=0,N=-1,U=-1,Q=0,ne=0,ae=s,X=null;t:for(;;){for(var Z;ae!==c||g!==0&&ae.nodeType!==3||(N=A+g),ae!==v||d!==0&&ae.nodeType!==3||(U=A+d),ae.nodeType===3&&(A+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)X=ae,ae=Z;for(;;){if(ae===s)break t;if(X===c&&++Q===g&&(N=A),X===v&&++ne===d&&(U=A),(Z=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=Z}c=N===-1||U===-1?null:{start:N,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(fv={focusedElem:s,selectionRange:c},om=!1,On=a;On!==null;)if(a=On,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,On=s;else for(;On!==null;){switch(a=On,v=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,c=a,g=v.memoizedProps,v=v.memoizedState,d=c.stateNode;try{var ke=jo(c.type,g,c.elementType===c.type);s=d.getSnapshotBeforeUpdate(ke,v),d.__reactInternalSnapshotBeforeUpdate=s}catch(Ne){Ut(c,c.return,Ne)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)gv(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":gv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,On=s;break}On=a.return}}function pS(s,a,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Ea(s,c),d&4&&Uu(5,c);break;case 1:if(Ea(s,c),d&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(A){Ut(c,c.return,A)}else{var g=jo(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){Ut(c,c.return,A)}}d&64&&cS(c),d&512&&Fu(c,c.return);break;case 3:if(Ea(s,c),d&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Qw(s,a)}catch(A){Ut(c,c.return,A)}}break;case 27:a===null&&d&4&&fS(c);case 26:case 5:Ea(s,c),a===null&&d&4&&hS(c),d&512&&Fu(c,c.return);break;case 12:Ea(s,c);break;case 13:Ea(s,c),d&4&&vS(s,c),d&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=Nk.bind(null,c),Wk(s,c))));break;case 22:if(d=c.memoizedState!==null||Or,!d){a=a!==null&&a.memoizedState!==null||dn,g=Or;var v=dn;Or=d,(dn=a)&&!v?wa(s,c,(c.subtreeFlags&8772)!==0):Ea(s,c),Or=g,dn=v}break;case 30:break;default:Ea(s,c)}}function gS(s){var a=s.alternate;a!==null&&(s.alternate=null,gS(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ca(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Zt=null,Si=!1;function kr(s,a,c){for(c=c.child;c!==null;)yS(s,a,c),c=c.sibling}function yS(s,a,c){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Ft,c)}catch{}switch(c.tag){case 26:dn||Xs(c,a),kr(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:dn||Xs(c,a);var d=Zt,g=Si;Ca(c.type)&&(Zt=c.stateNode,Si=!1),kr(s,a,c),Yu(c.stateNode),Zt=d,Si=g;break;case 5:dn||Xs(c,a);case 6:if(d=Zt,g=Si,Zt=null,kr(s,a,c),Zt=d,Si=g,Zt!==null)if(Si)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(c.stateNode)}catch(v){Ut(c,a,v)}else try{Zt.removeChild(c.stateNode)}catch(v){Ut(c,a,v)}break;case 18:Zt!==null&&(Si?(s=Zt,rA(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),ih(s)):rA(Zt,c.stateNode));break;case 4:d=Zt,g=Si,Zt=c.stateNode.containerInfo,Si=!0,kr(s,a,c),Zt=d,Si=g;break;case 0:case 11:case 14:case 15:dn||ba(2,c,a),dn||ba(4,c,a),kr(s,a,c);break;case 1:dn||(Xs(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"&&uS(c,a,d)),kr(s,a,c);break;case 21:kr(s,a,c);break;case 22:dn=(d=dn)||c.memoizedState!==null,kr(s,a,c),dn=d;break;default:kr(s,a,c)}}function vS(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ih(s)}catch(c){Ut(a,a.return,c)}}function wk(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new mS),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new mS),a;default:throw Error(i(435,s.tag))}}function qy(s,a){var c=wk(s);a.forEach(function(d){var g=Dk.bind(null,s,d);c.has(d)||(c.add(d),d.then(g,g))})}function Ui(s,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],v=s,A=a,N=A;e:for(;N!==null;){switch(N.tag){case 27:if(Ca(N.type)){Zt=N.stateNode,Si=!1;break e}break;case 5:Zt=N.stateNode,Si=!1;break e;case 3:case 4:Zt=N.stateNode.containerInfo,Si=!0;break e}N=N.return}if(Zt===null)throw Error(i(160));yS(v,A,g),Zt=null,Si=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)_S(a,s),a=a.sibling}var As=null;function _S(s,a){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ui(a,s),Fi(s),d&4&&(ba(3,s,s.return),Uu(3,s),ba(5,s,s.return));break;case 1:Ui(a,s),Fi(s),d&512&&(dn||c===null||Xs(c,c.return)),d&64&&Or&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=As;if(Ui(a,s),Fi(s),d&512&&(dn||c===null||Xs(c,c.return)),d&4){var v=c!==null?c.memoizedState:null;if(d=s.memoizedState,c===null)if(d===null)if(s.stateNode===null){e:{d=s.type,c=s.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[ki]||v[Ze]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),Kn(v,d,c),v[Ze]=s,un(v),d=v;break e;case"link":var A=fA("link","href",g).get(d+(c.href||""));if(A){for(var N=0;N<A.length;N++)if(v=A[N],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(N,1);break t}}v=g.createElement(d),Kn(v,d,c),g.head.appendChild(v);break;case"meta":if(A=fA("meta","content",g).get(d+(c.content||""))){for(N=0;N<A.length;N++)if(v=A[N],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(N,1);break t}}v=g.createElement(d),Kn(v,d,c),g.head.appendChild(v);break;default:throw Error(i(468,d))}v[Ze]=s,un(v),d=v}s.stateNode=d}else mA(g,s.type,s.stateNode);else s.stateNode=dA(g,d,s.memoizedProps);else v!==d?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,d===null?mA(g,s.type,s.stateNode):dA(g,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Uy(s,s.memoizedProps,c.memoizedProps)}break;case 27:Ui(a,s),Fi(s),d&512&&(dn||c===null||Xs(c,c.return)),c!==null&&d&4&&Uy(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Ui(a,s),Fi(s),d&512&&(dn||c===null||Xs(c,c.return)),s.flags&32){g=s.stateNode;try{Ji(g,"")}catch(Z){Ut(s,s.return,Z)}}d&4&&s.stateNode!=null&&(g=s.memoizedProps,Uy(s,g,c!==null?c.memoizedProps:g)),d&1024&&(zy=!0);break;case 6:if(Ui(a,s),Fi(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,c=s.stateNode;try{c.nodeValue=d}catch(Z){Ut(s,s.return,Z)}}break;case 3:if(sm=null,g=As,As=nm(a.containerInfo),Ui(a,s),As=g,Fi(s),d&4&&c!==null&&c.memoizedState.isDehydrated)try{ih(a.containerInfo)}catch(Z){Ut(s,s.return,Z)}zy&&(zy=!1,bS(s));break;case 4:d=As,As=nm(s.stateNode.containerInfo),Ui(a,s),Fi(s),As=d;break;case 12:Ui(a,s),Fi(s);break;case 13:Ui(a,s),Fi(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Yy=bt()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,qy(s,d)));break;case 22:g=s.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,Q=Or,ne=dn;if(Or=Q||g,dn=ne||U,Ui(a,s),dn=ne,Or=Q,Fi(s),d&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||U||Or||dn||Uo(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){U=c=a;try{if(v=U.stateNode,g)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{N=U.stateNode;var ae=U.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;N.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Z){Ut(U,U.return,Z)}}}else if(a.tag===6){if(c===null){U=a;try{U.stateNode.nodeValue=g?"":U.memoizedProps}catch(Z){Ut(U,U.return,Z)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,qy(s,c))));break;case 19:Ui(a,s),Fi(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,qy(s,d)));break;case 30:break;case 21:break;default:Ui(a,s),Fi(s)}}function Fi(s){var a=s.flags;if(a&2){try{for(var c,d=s.return;d!==null;){if(dS(d)){c=d;break}d=d.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,v=Fy(s);qf(s,v,g);break;case 5:var A=c.stateNode;c.flags&32&&(Ji(A,""),c.flags&=-33);var N=Fy(s);qf(s,N,A);break;case 3:case 4:var U=c.stateNode.containerInfo,Q=Fy(s);By(s,Q,U);break;default:throw Error(i(161))}}catch(ne){Ut(s,s.return,ne)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function bS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;bS(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Ea(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)pS(s,a.alternate,a),a=a.sibling}function Uo(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:ba(4,a,a.return),Uo(a);break;case 1:Xs(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&uS(a,a.return,c),Uo(a);break;case 27:Yu(a.stateNode);case 26:case 5:Xs(a,a.return),Uo(a);break;case 22:a.memoizedState===null&&Uo(a);break;case 30:Uo(a);break;default:Uo(a)}s=s.sibling}}function wa(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=s,v=a,A=v.flags;switch(v.tag){case 0:case 11:case 15:wa(g,v,c),Uu(4,v);break;case 1:if(wa(g,v,c),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Q){Ut(d,d.return,Q)}if(d=v,g=d.updateQueue,g!==null){var N=d.stateNode;try{var U=g.shared.hiddenCallbacks;if(U!==null)for(g.shared.hiddenCallbacks=null,g=0;g<U.length;g++)Yw(U[g],N)}catch(Q){Ut(d,d.return,Q)}}c&&A&64&&cS(v),Fu(v,v.return);break;case 27:fS(v);case 26:case 5:wa(g,v,c),c&&d===null&&A&4&&hS(v),Fu(v,v.return);break;case 12:wa(g,v,c);break;case 13:wa(g,v,c),c&&A&4&&vS(g,v);break;case 22:v.memoizedState===null&&wa(g,v,c),Fu(v,v.return);break;case 30:break;default:wa(g,v,c)}a=a.sibling}}function Hy(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Au(c))}function Gy(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Au(s))}function Zs(s,a,c,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ES(s,a,c,d),a=a.sibling}function ES(s,a,c,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Zs(s,a,c,d),g&2048&&Uu(9,a);break;case 1:Zs(s,a,c,d);break;case 3:Zs(s,a,c,d),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Au(s)));break;case 12:if(g&2048){Zs(s,a,c,d),s=a.stateNode;try{var v=a.memoizedProps,A=v.id,N=v.onPostCommit;typeof N=="function"&&N(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){Ut(a,a.return,U)}}else Zs(s,a,c,d);break;case 13:Zs(s,a,c,d);break;case 23:break;case 22:v=a.stateNode,A=a.alternate,a.memoizedState!==null?v._visibility&2?Zs(s,a,c,d):Bu(s,a):v._visibility&2?Zs(s,a,c,d):(v._visibility|=2,Wl(s,a,c,d,(a.subtreeFlags&10256)!==0)),g&2048&&Hy(A,a);break;case 24:Zs(s,a,c,d),g&2048&&Gy(a.alternate,a);break;default:Zs(s,a,c,d)}}function Wl(s,a,c,d,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=s,A=a,N=c,U=d,Q=A.flags;switch(A.tag){case 0:case 11:case 15:Wl(v,A,N,U,g),Uu(8,A);break;case 23:break;case 22:var ne=A.stateNode;A.memoizedState!==null?ne._visibility&2?Wl(v,A,N,U,g):Bu(v,A):(ne._visibility|=2,Wl(v,A,N,U,g)),g&&Q&2048&&Hy(A.alternate,A);break;case 24:Wl(v,A,N,U,g),g&&Q&2048&&Gy(A.alternate,A);break;default:Wl(v,A,N,U,g)}a=a.sibling}}function Bu(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,d=a,g=d.flags;switch(d.tag){case 22:Bu(c,d),g&2048&&Hy(d.alternate,d);break;case 24:Bu(c,d),g&2048&&Gy(d.alternate,d);break;default:Bu(c,d)}a=a.sibling}}var zu=8192;function Yl(s){if(s.subtreeFlags&zu)for(s=s.child;s!==null;)wS(s),s=s.sibling}function wS(s){switch(s.tag){case 26:Yl(s),s.flags&zu&&s.memoizedState!==null&&oL(As,s.memoizedState,s.memoizedProps);break;case 5:Yl(s);break;case 3:case 4:var a=As;As=nm(s.stateNode.containerInfo),Yl(s),As=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=zu,zu=16777216,Yl(s),zu=a):Yl(s));break;default:Yl(s)}}function TS(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function qu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];On=d,AS(d,s)}TS(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)SS(s),s=s.sibling}function SS(s){switch(s.tag){case 0:case 11:case 15:qu(s),s.flags&2048&&ba(9,s,s.return);break;case 3:qu(s);break;case 12:qu(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Hf(s)):qu(s);break;default:qu(s)}}function Hf(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];On=d,AS(d,s)}TS(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:ba(8,a,a.return),Hf(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Hf(a));break;default:Hf(a)}s=s.sibling}}function AS(s,a){for(;On!==null;){var c=On;switch(c.tag){case 0:case 11:case 15:ba(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Au(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,On=d;else e:for(c=s;On!==null;){d=On;var g=d.sibling,v=d.return;if(gS(d),d===c){On=null;break e}if(g!==null){g.return=v,On=g;break e}On=v}}}var Tk={getCacheForType:function(s){var a=Zn(Rn),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c}},Sk=typeof WeakMap=="function"?WeakMap:Map,It=0,qt=null,tt=null,mt=0,Nt=0,Bi=null,Ta=!1,Ql=!1,$y=!1,Lr=0,an=0,Sa=0,Fo=0,Ky=0,ls=0,Xl=0,Hu=null,Ai=null,Wy=!1,Yy=0,Gf=1/0,$f=null,Aa=null,$n=0,xa=null,Zl=null,Jl=0,Qy=0,Xy=null,xS=null,Gu=0,Zy=null;function zi(){if((It&2)!==0&&mt!==0)return mt&-mt;if(J.T!==null){var s=Fl;return s!==0?s:rv()}return et()}function RS(){ls===0&&(ls=(mt&536870912)===0||Tt?Et():536870912);var s=os.current;return s!==null&&(s.flags|=32),ls}function qi(s,a,c){(s===qt&&(Nt===2||Nt===9)||s.cancelPendingCommit!==null)&&(ec(s,0),Ra(s,mt,ls,!1)),Fe(s,c),((It&2)===0||s!==qt)&&(s===qt&&((It&2)===0&&(Fo|=c),an===4&&Ra(s,mt,ls,!1)),Js(s))}function CS(s,a,c){if((It&6)!==0)throw Error(i(327));var d=!c&&(a&124)===0&&(a&s.expiredLanes)===0||Ue(s,a),g=d?Rk(s,a):tv(s,a,!0),v=d;do{if(g===0){Ql&&!d&&Ra(s,a,0,!1);break}else{if(c=s.current.alternate,v&&!Ak(c)){g=tv(s,a,!1),v=!1;continue}if(g===2){if(v=a,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var N=s;g=Hu;var U=N.current.memoizedState.isDehydrated;if(U&&(ec(N,A).flags|=256),A=tv(N,A,!1),A!==2){if($y&&!U){N.errorRecoveryDisabledLanes|=v,Fo|=v,g=4;break e}v=Ai,Ai=g,v!==null&&(Ai===null?Ai=v:Ai.push.apply(Ai,v))}g=A}if(v=!1,g!==2)continue}}if(g===1){ec(s,0),Ra(s,a,0,!0);break}e:{switch(d=s,v=g,v){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ra(d,a,ls,!Ta);break e;case 2:Ai=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=Yy+300-bt(),10<g)){if(Ra(d,a,ls,!Ta),Ie(d,0,!0)!==0)break e;d.timeoutHandle=iA(IS.bind(null,d,c,Ai,$f,Wy,a,ls,Fo,Xl,Ta,v,2,-0,0),g);break e}IS(d,c,Ai,$f,Wy,a,ls,Fo,Xl,Ta,v,0,-0,0)}}break}while(!0);Js(s)}function IS(s,a,c,d,g,v,A,N,U,Q,ne,ae,X,Z){if(s.timeoutHandle=-1,ae=a.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(Zu={stylesheets:null,count:0,unsuspend:aL},wS(a),ae=lL(),ae!==null)){s.cancelPendingCommit=ae(LS.bind(null,s,a,v,c,d,g,A,N,U,ne,1,X,Z)),Ra(s,v,A,!Q);return}LS(s,a,v,c,d,g,A,N,U)}function Ak(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],v=g.getSnapshot;g=g.value;try{if(!Vi(v(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ra(s,a,c,d){a&=~Ky,a&=~Fo,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var g=a;0<g;){var v=31-Bt(g),A=1<<v;d[v]=-1,g&=~A}c!==0&&Ce(s,c,a)}function Kf(){return(It&6)===0?($u(0),!1):!0}function Jy(){if(tt!==null){if(Nt===0)var s=tt.return;else s=tt,Cr=Oo=null,gy(s),$l=null,Lu=0,s=tt;for(;s!==null;)lS(s.alternate,s),s=s.return;tt=null}}function ec(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,qk(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Jy(),qt=s,tt=c=Ar(s.current,null),mt=a,Nt=0,Bi=null,Ta=!1,Ql=Ue(s,a),$y=!1,Xl=ls=Ky=Fo=Sa=an=0,Ai=Hu=null,Wy=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var g=31-Bt(d),v=1<<g;a|=s[g],d&=~v}return Lr=a,pf(),c}function NS(s,a){Qe=null,J.H=Of,a===Ru||a===Sf?(a=Kw(),Nt=3):a===Hw?(a=Kw(),Nt=4):Nt=a===WT?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Bi=a,tt===null&&(an=1,Uf(s,is(a,s.current)))}function DS(){var s=J.H;return J.H=Of,s===null?Of:s}function MS(){var s=J.A;return J.A=Tk,s}function ev(){an=4,Ta||(mt&4194048)!==mt&&os.current!==null||(Ql=!0),(Sa&134217727)===0&&(Fo&134217727)===0||qt===null||Ra(qt,mt,ls,!1)}function tv(s,a,c){var d=It;It|=2;var g=DS(),v=MS();(qt!==s||mt!==a)&&($f=null,ec(s,a)),a=!1;var A=an;e:do try{if(Nt!==0&&tt!==null){var N=tt,U=Bi;switch(Nt){case 8:Jy(),A=6;break e;case 3:case 2:case 9:case 6:os.current===null&&(a=!0);var Q=Nt;if(Nt=0,Bi=null,tc(s,N,U,Q),c&&Ql){A=0;break e}break;default:Q=Nt,Nt=0,Bi=null,tc(s,N,U,Q)}}xk(),A=an;break}catch(ne){NS(s,ne)}while(!0);return a&&s.shellSuspendCounter++,Cr=Oo=null,It=d,J.H=g,J.A=v,tt===null&&(qt=null,mt=0,pf()),A}function xk(){for(;tt!==null;)PS(tt)}function Rk(s,a){var c=It;It|=2;var d=DS(),g=MS();qt!==s||mt!==a?($f=null,Gf=bt()+500,ec(s,a)):Ql=Ue(s,a);e:do try{if(Nt!==0&&tt!==null){a=tt;var v=Bi;t:switch(Nt){case 1:Nt=0,Bi=null,tc(s,a,v,1);break;case 2:case 9:if(Gw(v)){Nt=0,Bi=null,OS(a);break}a=function(){Nt!==2&&Nt!==9||qt!==s||(Nt=7),Js(s)},v.then(a,a);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:Gw(v)?(Nt=0,Bi=null,OS(a)):(Nt=0,Bi=null,tc(s,a,v,7));break;case 5:var A=null;switch(tt.tag){case 26:A=tt.memoizedState;case 5:case 27:var N=tt;if(!A||pA(A)){Nt=0,Bi=null;var U=N.sibling;if(U!==null)tt=U;else{var Q=N.return;Q!==null?(tt=Q,Wf(Q)):tt=null}break t}}Nt=0,Bi=null,tc(s,a,v,5);break;case 6:Nt=0,Bi=null,tc(s,a,v,6);break;case 8:Jy(),an=6;break e;default:throw Error(i(462))}}Ck();break}catch(ne){NS(s,ne)}while(!0);return Cr=Oo=null,J.H=d,J.A=g,It=c,tt!==null?0:(qt=null,mt=0,pf(),an)}function Ck(){for(;tt!==null&&!jt();)PS(tt)}function PS(s){var a=aS(s.alternate,s,Lr);s.memoizedProps=s.pendingProps,a===null?Wf(s):tt=a}function OS(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=eS(c,a,a.pendingProps,a.type,void 0,mt);break;case 11:a=eS(c,a,a.pendingProps,a.type.render,a.ref,mt);break;case 5:gy(a);default:lS(c,a),a=tt=kw(a,Lr),a=aS(c,a,Lr)}s.memoizedProps=s.pendingProps,a===null?Wf(s):tt=a}function tc(s,a,c,d){Cr=Oo=null,gy(a),$l=null,Lu=0;var g=a.return;try{if(yk(s,g,a,c,mt)){an=1,Uf(s,is(c,s.current)),tt=null;return}}catch(v){if(g!==null)throw tt=g,v;an=1,Uf(s,is(c,s.current)),tt=null;return}a.flags&32768?(Tt||d===1?s=!0:Ql||(mt&536870912)!==0?s=!1:(Ta=s=!0,(d===2||d===9||d===3||d===6)&&(d=os.current,d!==null&&d.tag===13&&(d.flags|=16384))),kS(a,s)):Wf(a)}function Wf(s){var a=s;do{if((a.flags&32768)!==0){kS(a,Ta);return}s=a.return;var c=_k(a.alternate,a,Lr);if(c!==null){tt=c;return}if(a=a.sibling,a!==null){tt=a;return}tt=a=s}while(a!==null);an===0&&(an=5)}function kS(s,a){do{var c=bk(s.alternate,s);if(c!==null){c.flags&=32767,tt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){tt=s;return}tt=s=c}while(s!==null);an=6,tt=null}function LS(s,a,c,d,g,v,A,N,U){s.cancelPendingCommit=null;do Yf();while($n!==0);if((It&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(v=a.lanes|a.childLanes,v|=Gg,wt(s,c,v,A,N,U),s===qt&&(tt=qt=null,mt=0),Zl=a,xa=s,Jl=c,Qy=v,Xy=g,xS=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Mk(Tn,function(){return BS(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=J.T,J.T=null,g=te.p,te.p=2,A=It,It|=4;try{Ek(s,a,c)}finally{It=A,te.p=g,J.T=d}}$n=1,VS(),jS(),US()}}function VS(){if($n===1){$n=0;var s=xa,a=Zl,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=J.T,J.T=null;var d=te.p;te.p=2;var g=It;It|=4;try{_S(a,s);var v=fv,A=Aw(s.containerInfo),N=v.focusedElem,U=v.selectionRange;if(A!==N&&N&&N.ownerDocument&&Sw(N.ownerDocument.documentElement,N)){if(U!==null&&Fg(N)){var Q=U.start,ne=U.end;if(ne===void 0&&(ne=Q),"selectionStart"in N)N.selectionStart=Q,N.selectionEnd=Math.min(ne,N.value.length);else{var ae=N.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var Z=X.getSelection(),ke=N.textContent.length,Ne=Math.min(U.start,ke),Ot=U.end===void 0?Ne:Math.min(U.end,ke);!Z.extend&&Ne>Ot&&(A=Ot,Ot=Ne,Ne=A);var H=Tw(N,Ne),z=Tw(N,Ot);if(H&&z&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==z.node||Z.focusOffset!==z.offset)){var W=ae.createRange();W.setStart(H.node,H.offset),Z.removeAllRanges(),Ne>Ot?(Z.addRange(W),Z.extend(z.node,z.offset)):(W.setEnd(z.node,z.offset),Z.addRange(W))}}}}for(ae=[],Z=N;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ae.length;N++){var se=ae[N];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}om=!!dv,fv=dv=null}finally{It=g,te.p=d,J.T=c}}s.current=a,$n=2}}function jS(){if($n===2){$n=0;var s=xa,a=Zl,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=J.T,J.T=null;var d=te.p;te.p=2;var g=It;It|=4;try{pS(s,a.alternate,a)}finally{It=g,te.p=d,J.T=c}}$n=3}}function US(){if($n===4||$n===3){$n=0,Nn();var s=xa,a=Zl,c=Jl,d=xS;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?$n=5:($n=0,Zl=xa=null,FS(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Aa=null),Oe(c),a=a.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Ft,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=J.T,g=te.p,te.p=2,J.T=null;try{for(var v=s.onRecoverableError,A=0;A<d.length;A++){var N=d[A];v(N.value,{componentStack:N.stack})}}finally{J.T=a,te.p=g}}(Jl&3)!==0&&Yf(),Js(s),g=s.pendingLanes,(c&4194090)!==0&&(g&42)!==0?s===Zy?Gu++:(Gu=0,Zy=s):Gu=0,$u(0)}}function FS(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Au(a)))}function Yf(s){return VS(),jS(),US(),BS()}function BS(){if($n!==5)return!1;var s=xa,a=Qy;Qy=0;var c=Oe(Jl),d=J.T,g=te.p;try{te.p=32>c?32:c,J.T=null,c=Xy,Xy=null;var v=xa,A=Jl;if($n=0,Zl=xa=null,Jl=0,(It&6)!==0)throw Error(i(331));var N=It;if(It|=4,SS(v.current),ES(v,v.current,A,c),It=N,$u(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Ft,v)}catch{}return!0}finally{te.p=g,J.T=d,FS(s,a)}}function zS(s,a,c){a=is(c,a),a=Ny(s.stateNode,a,2),s=ga(s,a,2),s!==null&&(Fe(s,2),Js(s))}function Ut(s,a,c){if(s.tag===3)zS(s,s,c);else for(;a!==null;){if(a.tag===3){zS(a,s,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Aa===null||!Aa.has(d))){s=is(c,s),c=$T(2),d=ga(a,c,2),d!==null&&(KT(c,d,a,s),Fe(d,2),Js(d));break}}a=a.return}}function nv(s,a,c){var d=s.pingCache;if(d===null){d=s.pingCache=new Sk;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(c)||($y=!0,g.add(c),s=Ik.bind(null,s,a,c),a.then(s,s))}function Ik(s,a,c){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,qt===s&&(mt&c)===c&&(an===4||an===3&&(mt&62914560)===mt&&300>bt()-Yy?(It&2)===0&&ec(s,0):Ky|=c,Xl===mt&&(Xl=0)),Js(s)}function qS(s,a){a===0&&(a=Ge()),s=Ll(s,a),s!==null&&(Fe(s,a),Js(s))}function Nk(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),qS(s,c)}function Dk(s,a){var c=0;switch(s.tag){case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),qS(s,c)}function Mk(s,a){return _e(s,a)}var Qf=null,nc=null,iv=!1,Xf=!1,sv=!1,Bo=0;function Js(s){s!==nc&&s.next===null&&(nc===null?Qf=nc=s:nc=nc.next=s),Xf=!0,iv||(iv=!0,Ok())}function $u(s,a){if(!sv&&Xf){sv=!0;do for(var c=!1,d=Qf;d!==null;){if(s!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var A=d.suspendedLanes,N=d.pingedLanes;v=(1<<31-Bt(42|s)+1)-1,v&=g&~(A&~N),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,KS(d,v))}else v=mt,v=Ie(d,d===qt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||Ue(d,v)||(c=!0,KS(d,v));d=d.next}while(c);sv=!1}}function Pk(){HS()}function HS(){Xf=iv=!1;var s=0;Bo!==0&&(zk()&&(s=Bo),Bo=0);for(var a=bt(),c=null,d=Qf;d!==null;){var g=d.next,v=GS(d,a);v===0?(d.next=null,c===null?Qf=g:c.next=g,g===null&&(nc=c)):(c=d,(s!==0||(v&3)!==0)&&(Xf=!0)),d=g}$u(s)}function GS(s,a){for(var c=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-Bt(v),N=1<<A,U=g[A];U===-1?((N&c)===0||(N&d)!==0)&&(g[A]=ht(N,a)):U<=a&&(s.expiredLanes|=N),v&=~N}if(a=qt,c=mt,c=Ie(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,c===0||s===a&&(Nt===2||Nt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&ut(d),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Ue(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(d!==null&&ut(d),Oe(c)){case 2:case 8:c=en;break;case 32:c=Tn;break;case 268435456:c=Pi;break;default:c=Tn}return d=$S.bind(null,s),c=_e(c,d),s.callbackPriority=a,s.callbackNode=c,a}return d!==null&&d!==null&&ut(d),s.callbackPriority=2,s.callbackNode=null,2}function $S(s,a){if($n!==0&&$n!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Yf()&&s.callbackNode!==c)return null;var d=mt;return d=Ie(s,s===qt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(CS(s,d,a),GS(s,bt()),s.callbackNode!=null&&s.callbackNode===c?$S.bind(null,s):null)}function KS(s,a){if(Yf())return null;CS(s,a,!0)}function Ok(){Hk(function(){(It&6)!==0?_e(gn,Pk):HS()})}function rv(){return Bo===0&&(Bo=Et()),Bo}function WS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Sl(""+s)}function YS(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function kk(s,a,c,d,g){if(a==="submit"&&c&&c.stateNode===g){var v=WS((g[at]||null).action),A=d.submitter;A&&(a=(a=A[at]||null)?WS(a.formAction):A.getAttribute("formAction"),a!==null&&(v=a,A=null));var N=new Al("action","action",null,d,g);s.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Bo!==0){var U=A?YS(g,A):new FormData(g);Ay(c,{pending:!0,data:U,method:g.method,action:v},null,U)}}else typeof v=="function"&&(N.preventDefault(),U=A?YS(g,A):new FormData(g),Ay(c,{pending:!0,data:U,method:g.method,action:v},v,U))},currentTarget:g}]})}}for(var av=0;av<Hg.length;av++){var ov=Hg[av],Lk=ov.toLowerCase(),Vk=ov[0].toUpperCase()+ov.slice(1);Ss(Lk,"on"+Vk)}Ss(Cw,"onAnimationEnd"),Ss(Iw,"onAnimationIteration"),Ss(Nw,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(ek,"onTransitionRun"),Ss(tk,"onTransitionStart"),Ss(nk,"onTransitionCancel"),Ss(Dw,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function QS(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var d=s[c],g=d.event;d=d.listeners;e:{var v=void 0;if(a)for(var A=d.length-1;0<=A;A--){var N=d[A],U=N.instance,Q=N.currentTarget;if(N=N.listener,U!==v&&g.isPropagationStopped())break e;v=N,g.currentTarget=Q;try{v(g)}catch(ne){jf(ne)}g.currentTarget=null,v=U}else for(A=0;A<d.length;A++){if(N=d[A],U=N.instance,Q=N.currentTarget,N=N.listener,U!==v&&g.isPropagationStopped())break e;v=N,g.currentTarget=Q;try{v(g)}catch(ne){jf(ne)}g.currentTarget=null,v=U}}}}function nt(s,a){var c=a[Oi];c===void 0&&(c=a[Oi]=new Set);var d=s+"__bubble";c.has(d)||(XS(a,s,2,!1),c.add(d))}function lv(s,a,c){var d=0;a&&(d|=4),XS(c,s,d,a)}var Zf="_reactListening"+Math.random().toString(36).slice(2);function cv(s){if(!s[Zf]){s[Zf]=!0,ru.forEach(function(c){c!=="selectionchange"&&(jk.has(c)||lv(c,!1,s),lv(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Zf]||(a[Zf]=!0,lv("selectionchange",!1,a))}}function XS(s,a,c,d){switch(EA(a)){case 2:var g=hL;break;case 8:g=dL;break;default:g=Tv}c=g.bind(null,a,c,s),g=void 0,!ts||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(a,c,{capture:!0,passive:g}):s.addEventListener(a,c,!0):g!==void 0?s.addEventListener(a,c,{passive:g}):s.addEventListener(a,c,!1)}function uv(s,a,c,d,g){var v=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var N=d.stateNode.containerInfo;if(N===g)break;if(A===4)for(A=d.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;N!==null;){if(A=pr(N),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){d=v=A;continue e}N=N.parentNode}}d=d.return}Jd(function(){var Q=v,ne=es(c),ae=[];e:{var X=Mw.get(s);if(X!==void 0){var Z=Al,ke=s;switch(s){case"keypress":if(Hs(c)===0)break e;case"keydown":case"keyup":Z=Dl;break;case"focusin":ke="focus",Z=Cl;break;case"focusout":ke="blur",Z=Cl;break;case"beforeblur":case"afterblur":Z=Cl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ns;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=lf;break;case Cw:case Iw:case Nw:Z=Il;break;case Dw:Z=uf;break;case"scroll":case"scrollend":Z=ef;break;case"wheel":Z=Ml;break;case"copy":case"cut":case"paste":Z=Nl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=yu;break;case"toggle":case"beforetoggle":Z=df}var Ne=(a&4)!==0,Ot=!Ne&&(s==="scroll"||s==="scrollend"),H=Ne?X!==null?X+"Capture":null:X;Ne=[];for(var z=Q,W;z!==null;){var se=z;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||H===null||(se=bo(z,H),se!=null&&Ne.push(Wu(z,se,W))),Ot)break;z=z.return}0<Ne.length&&(X=new Z(X,ke,null,c,ne),ae.push({event:X,listeners:Ne}))}}if((a&7)===0){e:{if(X=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",X&&c!==_r&&(ke=c.relatedTarget||c.fromElement)&&(pr(ke)||ke[zt]))break e;if((Z||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,Z?(ke=c.relatedTarget||c.toElement,Z=Q,ke=ke?pr(ke):null,ke!==null&&(Ot=o(ke),Ne=ke.tag,ke!==Ot||Ne!==5&&Ne!==27&&Ne!==6)&&(ke=null)):(Z=null,ke=Q),Z!==ke)){if(Ne=ns,se="onMouseLeave",H="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(Ne=yu,se="onPointerLeave",H="onPointerEnter",z="pointer"),Ot=Z==null?X:Fs(Z),W=ke==null?X:Fs(ke),X=new Ne(se,z+"leave",Z,c,ne),X.target=Ot,X.relatedTarget=W,se=null,pr(ne)===Q&&(Ne=new Ne(H,z+"enter",ke,c,ne),Ne.target=W,Ne.relatedTarget=Ot,se=Ne),Ot=se,Z&&ke)t:{for(Ne=Z,H=ke,z=0,W=Ne;W;W=ic(W))z++;for(W=0,se=H;se;se=ic(se))W++;for(;0<z-W;)Ne=ic(Ne),z--;for(;0<W-z;)H=ic(H),W--;for(;z--;){if(Ne===H||H!==null&&Ne===H.alternate)break t;Ne=ic(Ne),H=ic(H)}Ne=null}else Ne=null;Z!==null&&ZS(ae,X,Z,Ne,!1),ke!==null&&Ot!==null&&ZS(ae,Ot,ke,Ne,!0)}}e:{if(X=Q?Fs(Q):window,Z=X.nodeName&&X.nodeName.toLowerCase(),Z==="select"||Z==="input"&&X.type==="file")var ge=yw;else if(xn(X))if(vw)ge=XO;else{ge=YO;var Je=WO}else Z=X.nodeName,!Z||Z.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&uu(Q.elementType)&&(ge=yw):ge=QO;if(ge&&(ge=ge(s,Q))){Sr(ae,ge,c,ne);break e}Je&&Je(s,X,Q),s==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&ha(X,"number",X.value)}switch(Je=Q?Fs(Q):window,s){case"focusin":(xn(Je)||Je.contentEditable==="true")&&(Pl=Je,Bg=Q,bu=null);break;case"focusout":bu=Bg=Pl=null;break;case"mousedown":zg=!0;break;case"contextmenu":case"mouseup":case"dragend":zg=!1,xw(ae,c,ne);break;case"selectionchange":if(JO)break;case"keydown":case"keyup":xw(ae,c,ne)}var Se;if(Ks)e:{switch(s){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else dt?ee(s,c)&&(De="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(De="onCompositionStart");De&&(T&&c.locale!=="ko"&&(dt||De!=="onCompositionStart"?De==="onCompositionEnd"&&dt&&(Se=du()):(qs=ne,da="value"in qs?qs.value:qs.textContent,dt=!0)),Je=Jf(Q,De),0<Je.length&&(De=new pu(De,s,null,c,ne),ae.push({event:De,listeners:Je}),Se?De.data=Se:(Se=ce(c),Se!==null&&(De.data=Se)))),(Se=b?An(s,c):ft(s,c))&&(De=Jf(Q,"onBeforeInput"),0<De.length&&(Je=new pu("onBeforeInput","beforeinput",null,c,ne),ae.push({event:Je,listeners:De}),Je.data=Se)),kk(ae,s,Q,c,ne)}QS(ae,a)})}function Wu(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Jf(s,a){for(var c=a+"Capture",d=[];s!==null;){var g=s,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=bo(s,c),g!=null&&d.unshift(Wu(s,g,v)),g=bo(s,a),g!=null&&d.push(Wu(s,g,v))),s.tag===3)return d;s=s.return}return[]}function ic(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ZS(s,a,c,d,g){for(var v=a._reactName,A=[];c!==null&&c!==d;){var N=c,U=N.alternate,Q=N.stateNode;if(N=N.tag,U!==null&&U===d)break;N!==5&&N!==26&&N!==27||Q===null||(U=Q,g?(Q=bo(c,v),Q!=null&&A.unshift(Wu(c,Q,U))):g||(Q=bo(c,v),Q!=null&&A.push(Wu(c,Q,U)))),c=c.return}A.length!==0&&s.push({event:a,listeners:A})}var Uk=/\r\n?/g,Fk=/\u0000|\uFFFD/g;function JS(s){return(typeof s=="string"?s:""+s).replace(Uk,`
`).replace(Fk,"")}function eA(s,a){return a=JS(a),JS(s)===a}function em(){}function Pt(s,a,c,d,g,v){switch(c){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Ji(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Ji(s,""+d);break;case"className":Bs(s,"class",d);break;case"tabIndex":Bs(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(s,c,d);break;case"style":cu(s,d,v);break;case"data":if(a!=="object"){Bs(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(c);break}d=Sl(""+d),s.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(a!=="input"&&Pt(s,a,"name",g.name,g,null),Pt(s,a,"formEncType",g.formEncType,g,null),Pt(s,a,"formMethod",g.formMethod,g,null),Pt(s,a,"formTarget",g.formTarget,g,null)):(Pt(s,a,"encType",g.encType,g,null),Pt(s,a,"method",g.method,g,null),Pt(s,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(c);break}d=Sl(""+d),s.setAttribute(c,d);break;case"onClick":d!=null&&(s.onclick=em);break;case"onScroll":d!=null&&nt("scroll",s);break;case"onScrollEnd":d!=null&&nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}c=Sl(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,""+d):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":d===!0?s.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,d):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(c,d):s.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(c):s.setAttribute(c,d);break;case"popover":nt("beforetoggle",s),nt("toggle",s),ua(s,"popover",d);break;case"xlinkActuate":qn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":qn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":qn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":qn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":qn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":qn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":qn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":qn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":qn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ua(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Og.get(c)||c,ua(s,c,d))}}function hv(s,a,c,d,g,v){switch(c){case"style":cu(s,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof d=="string"?Ji(s,d):(typeof d=="number"||typeof d=="bigint")&&Ji(s,""+d);break;case"onScroll":d!=null&&nt("scroll",s);break;case"onScrollEnd":d!=null&&nt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=em);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_l.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),v=s[at]||null,v=v!=null?v[c]:null,typeof v=="function"&&s.removeEventListener(a,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,d,g);break e}c in s?s[c]=d:d===!0?s.setAttribute(c,""):ua(s,c,d)}}}function Kn(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",s),nt("load",s);var d=!1,g=!1,v;for(v in c)if(c.hasOwnProperty(v)){var A=c[v];if(A!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Pt(s,a,v,A,c,null)}}g&&Pt(s,a,"srcSet",c.srcSet,c,null),d&&Pt(s,a,"src",c.src,c,null);return;case"input":nt("invalid",s);var N=v=A=g=null,U=null,Q=null;for(d in c)if(c.hasOwnProperty(d)){var ne=c[d];if(ne!=null)switch(d){case"name":g=ne;break;case"type":A=ne;break;case"checked":U=ne;break;case"defaultChecked":Q=ne;break;case"value":v=ne;break;case"defaultValue":N=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:Pt(s,a,d,ne,c,null)}}yo(s,v,N,U,Q,A,g,!1),Tl(s);return;case"select":nt("invalid",s),d=A=v=null;for(g in c)if(c.hasOwnProperty(g)&&(N=c[g],N!=null))switch(g){case"value":v=N;break;case"defaultValue":A=N;break;case"multiple":d=N;default:Pt(s,a,g,N,c,null)}a=v,c=A,s.multiple=!!d,a!=null?vr(s,!!d,a,!1):c!=null&&vr(s,!!d,c,!0);return;case"textarea":nt("invalid",s),v=g=d=null;for(A in c)if(c.hasOwnProperty(A)&&(N=c[A],N!=null))switch(A){case"value":d=N;break;case"defaultValue":g=N;break;case"children":v=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:Pt(s,a,A,N,c,null)}vo(s,d,g,v),Tl(s);return;case"option":for(U in c)if(c.hasOwnProperty(U)&&(d=c[U],d!=null))switch(U){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Pt(s,a,U,d,c,null)}return;case"dialog":nt("beforetoggle",s),nt("toggle",s),nt("cancel",s),nt("close",s);break;case"iframe":case"object":nt("load",s);break;case"video":case"audio":for(d=0;d<Ku.length;d++)nt(Ku[d],s);break;case"image":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"embed":case"source":case"link":nt("error",s),nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(d=c[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Pt(s,a,Q,d,c,null)}return;default:if(uu(a)){for(ne in c)c.hasOwnProperty(ne)&&(d=c[ne],d!==void 0&&hv(s,a,ne,d,c,void 0));return}}for(N in c)c.hasOwnProperty(N)&&(d=c[N],d!=null&&Pt(s,a,N,d,c,null))}function Bk(s,a,c,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,A=null,N=null,U=null,Q=null,ne=null;for(Z in c){var ae=c[Z];if(c.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":U=ae;default:d.hasOwnProperty(Z)||Pt(s,a,Z,null,d,ae)}}for(var X in d){var Z=d[X];if(ae=c[X],d.hasOwnProperty(X)&&(Z!=null||ae!=null))switch(X){case"type":v=Z;break;case"name":g=Z;break;case"checked":Q=Z;break;case"defaultChecked":ne=Z;break;case"value":A=Z;break;case"defaultValue":N=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:Z!==ae&&Pt(s,a,X,Z,d,ae)}}Li(s,A,N,U,Q,ne,v,g);return;case"select":Z=A=N=X=null;for(v in c)if(U=c[v],c.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":Z=U;default:d.hasOwnProperty(v)||Pt(s,a,v,null,d,U)}for(g in d)if(v=d[g],U=c[g],d.hasOwnProperty(g)&&(v!=null||U!=null))switch(g){case"value":X=v;break;case"defaultValue":N=v;break;case"multiple":A=v;default:v!==U&&Pt(s,a,g,v,d,U)}a=N,c=A,d=Z,X!=null?vr(s,!!c,X,!1):!!d!=!!c&&(a!=null?vr(s,!!c,a,!0):vr(s,!!c,c?[]:"",!1));return;case"textarea":Z=X=null;for(N in c)if(g=c[N],c.hasOwnProperty(N)&&g!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Pt(s,a,N,null,d,g)}for(A in d)if(g=d[A],v=c[A],d.hasOwnProperty(A)&&(g!=null||v!=null))switch(A){case"value":X=g;break;case"defaultValue":Z=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==v&&Pt(s,a,A,g,d,v)}Dt(s,X,Z);return;case"option":for(var ke in c)if(X=c[ke],c.hasOwnProperty(ke)&&X!=null&&!d.hasOwnProperty(ke))switch(ke){case"selected":s.selected=!1;break;default:Pt(s,a,ke,null,d,X)}for(U in d)if(X=d[U],Z=c[U],d.hasOwnProperty(U)&&X!==Z&&(X!=null||Z!=null))switch(U){case"selected":s.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Pt(s,a,U,X,d,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in c)X=c[Ne],c.hasOwnProperty(Ne)&&X!=null&&!d.hasOwnProperty(Ne)&&Pt(s,a,Ne,null,d,X);for(Q in d)if(X=d[Q],Z=c[Q],d.hasOwnProperty(Q)&&X!==Z&&(X!=null||Z!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,a));break;default:Pt(s,a,Q,X,d,Z)}return;default:if(uu(a)){for(var Ot in c)X=c[Ot],c.hasOwnProperty(Ot)&&X!==void 0&&!d.hasOwnProperty(Ot)&&hv(s,a,Ot,void 0,d,X);for(ne in d)X=d[ne],Z=c[ne],!d.hasOwnProperty(ne)||X===Z||X===void 0&&Z===void 0||hv(s,a,ne,X,d,Z);return}}for(var H in c)X=c[H],c.hasOwnProperty(H)&&X!=null&&!d.hasOwnProperty(H)&&Pt(s,a,H,null,d,X);for(ae in d)X=d[ae],Z=c[ae],!d.hasOwnProperty(ae)||X===Z||X==null&&Z==null||Pt(s,a,ae,X,d,Z)}var dv=null,fv=null;function tm(s){return s.nodeType===9?s:s.ownerDocument}function tA(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nA(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function mv(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var pv=null;function zk(){var s=window.event;return s&&s.type==="popstate"?s===pv?!1:(pv=s,!0):(pv=null,!1)}var iA=typeof setTimeout=="function"?setTimeout:void 0,qk=typeof clearTimeout=="function"?clearTimeout:void 0,sA=typeof Promise=="function"?Promise:void 0,Hk=typeof queueMicrotask=="function"?queueMicrotask:typeof sA<"u"?function(s){return sA.resolve(null).then(s).catch(Gk)}:iA;function Gk(s){setTimeout(function(){throw s})}function Ca(s){return s==="head"}function rA(s,a){var c=a,d=0,g=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(0<d&&8>d){c=d;var A=s.ownerDocument;if(c&1&&Yu(A.documentElement),c&2&&Yu(A.body),c&4)for(c=A.head,Yu(c),A=c.firstChild;A;){var N=A.nextSibling,U=A.nodeName;A[ki]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&A.rel.toLowerCase()==="stylesheet"||c.removeChild(A),A=N}}if(g===0){s.removeChild(v),ih(a);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:d=c.charCodeAt(0)-48;else d=0;c=v}while(c);ih(a)}function gv(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":gv(c),ca(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function $k(s,a,c,d){for(;s.nodeType===1;){var g=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[ki])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=xs(s.nextSibling),s===null)break}return null}function Kk(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=xs(s.nextSibling),s===null))return null;return s}function yv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Wk(s,a){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")a();else{var d=function(){a(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function xs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var vv=null;function aA(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}function oA(s,a,c){switch(a=tm(c),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Yu(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ca(s)}var cs=new Map,lA=new Set;function nm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Vr=te.d;te.d={f:Yk,r:Qk,D:Xk,C:Zk,L:Jk,m:eL,X:nL,S:tL,M:iL};function Yk(){var s=Vr.f(),a=Kf();return s||a}function Qk(s){var a=Us(s);a!==null&&a.tag===5&&a.type==="form"?CT(a):Vr.r(s)}var sc=typeof document>"u"?null:document;function cA(s,a,c){var d=sc;if(d&&typeof a=="string"&&a){var g=yn(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),lA.has(g)||(lA.add(g),s={rel:s,crossOrigin:c,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),Kn(a,"link",s),un(a),d.head.appendChild(a)))}}function Xk(s){Vr.D(s),cA("dns-prefetch",s,null)}function Zk(s,a){Vr.C(s,a),cA("preconnect",s,a)}function Jk(s,a,c){Vr.L(s,a,c);var d=sc;if(d&&s&&a){var g='link[rel="preload"][as="'+yn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+yn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+yn(c.imageSizes)+'"]')):g+='[href="'+yn(s)+'"]';var v=g;switch(a){case"style":v=rc(s);break;case"script":v=ac(s)}cs.has(v)||(s=p({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),cs.set(v,s),d.querySelector(g)!==null||a==="style"&&d.querySelector(Qu(v))||a==="script"&&d.querySelector(Xu(v))||(a=d.createElement("link"),Kn(a,"link",s),un(a),d.head.appendChild(a)))}}function eL(s,a){Vr.m(s,a);var c=sc;if(c&&s){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+yn(d)+'"][href="'+yn(s)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ac(s)}if(!cs.has(v)&&(s=p({rel:"modulepreload",href:s},a),cs.set(v,s),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Xu(v)))return}d=c.createElement("link"),Kn(d,"link",s),un(d),c.head.appendChild(d)}}}function tL(s,a,c){Vr.S(s,a,c);var d=sc;if(d&&s){var g=fi(d).hoistableStyles,v=rc(s);a=a||"default";var A=g.get(v);if(!A){var N={loading:0,preload:null};if(A=d.querySelector(Qu(v)))N.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":a},c),(c=cs.get(v))&&_v(s,c);var U=A=d.createElement("link");un(U),Kn(U,"link",s),U._p=new Promise(function(Q,ne){U.onload=Q,U.onerror=ne}),U.addEventListener("load",function(){N.loading|=1}),U.addEventListener("error",function(){N.loading|=2}),N.loading|=4,im(A,a,d)}A={type:"stylesheet",instance:A,count:1,state:N},g.set(v,A)}}}function nL(s,a){Vr.X(s,a);var c=sc;if(c&&s){var d=fi(c).hoistableScripts,g=ac(s),v=d.get(g);v||(v=c.querySelector(Xu(g)),v||(s=p({src:s,async:!0},a),(a=cs.get(g))&&bv(s,a),v=c.createElement("script"),un(v),Kn(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function iL(s,a){Vr.M(s,a);var c=sc;if(c&&s){var d=fi(c).hoistableScripts,g=ac(s),v=d.get(g);v||(v=c.querySelector(Xu(g)),v||(s=p({src:s,async:!0,type:"module"},a),(a=cs.get(g))&&bv(s,a),v=c.createElement("script"),un(v),Kn(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function uA(s,a,c,d){var g=(g=rt.current)?nm(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=rc(c.href),c=fi(g).hoistableStyles,d=c.get(a),d||(d={type:"style",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=rc(c.href);var v=fi(g).hoistableStyles,A=v.get(s);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=g.querySelector(Qu(s)))&&!v._p&&(A.instance=v,A.state.loading=5),cs.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},cs.set(s,c),v||sL(g,s,c,A.state))),a&&d===null)throw Error(i(528,""));return A}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ac(c),c=fi(g).hoistableScripts,d=c.get(a),d||(d={type:"script",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function rc(s){return'href="'+yn(s)+'"'}function Qu(s){return'link[rel="stylesheet"]['+s+"]"}function hA(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function sL(s,a,c,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Kn(a,"link",c),un(a),s.head.appendChild(a))}function ac(s){return'[src="'+yn(s)+'"]'}function Xu(s){return"script[async]"+s}function dA(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+yn(c.href)+'"]');if(d)return a.instance=d,un(d),d;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),un(d),Kn(d,"style",g),im(d,c.precedence,s),a.instance=d;case"stylesheet":g=rc(c.href);var v=s.querySelector(Qu(g));if(v)return a.state.loading|=4,a.instance=v,un(v),v;d=hA(c),(g=cs.get(g))&&_v(d,g),v=(s.ownerDocument||s).createElement("link"),un(v);var A=v;return A._p=new Promise(function(N,U){A.onload=N,A.onerror=U}),Kn(v,"link",d),a.state.loading|=4,im(v,c.precedence,s),a.instance=v;case"script":return v=ac(c.src),(g=s.querySelector(Xu(v)))?(a.instance=g,un(g),g):(d=c,(g=cs.get(v))&&(d=p({},c),bv(d,g)),s=s.ownerDocument||s,g=s.createElement("script"),un(g),Kn(g,"link",d),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,im(d,c.precedence,s));return a.instance}function im(s,a,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,A=0;A<d.length;A++){var N=d[A];if(N.dataset.precedence===a)v=N;else if(v!==g)break}v?v.parentNode.insertBefore(s,v.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function _v(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function bv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var sm=null;function fA(s,a,c){if(sm===null){var d=new Map,g=sm=new Map;g.set(c,d)}else g=sm,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(s))return d;for(d.set(s,null),c=c.getElementsByTagName(s),g=0;g<c.length;g++){var v=c[g];if(!(v[ki]||v[Ze]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(a)||"";A=s+A;var N=d.get(A);N?N.push(v):d.set(A,[v])}}return d}function mA(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function rL(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function pA(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Zu=null;function aL(){}function oL(s,a,c){if(Zu===null)throw Error(i(475));var d=Zu;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=rc(c.href),v=s.querySelector(Qu(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(d.count++,d=rm.bind(d),s.then(d,d)),a.state.loading|=4,a.instance=v,un(v);return}v=s.ownerDocument||s,c=hA(c),(g=cs.get(g))&&_v(c,g),v=v.createElement("link"),un(v);var A=v;A._p=new Promise(function(N,U){A.onload=N,A.onerror=U}),Kn(v,"link",c),a.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=rm.bind(d),s.addEventListener("load",a),s.addEventListener("error",a))}}function lL(){if(Zu===null)throw Error(i(475));var s=Zu;return s.stylesheets&&s.count===0&&Ev(s,s.stylesheets),0<s.count?function(a){var c=setTimeout(function(){if(s.stylesheets&&Ev(s,s.stylesheets),s.unsuspend){var d=s.unsuspend;s.unsuspend=null,d()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c)}}:null}function rm(){if(this.count--,this.count===0){if(this.stylesheets)Ev(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var am=null;function Ev(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,am=new Map,a.forEach(cL,s),am=null,rm.call(s))}function cL(s,a){if(!(a.state.loading&4)){var c=am.get(s);if(c)var d=c.get(null);else{c=new Map,am.set(s,c);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var A=g[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),d=A)}d&&c.set(null,d)}g=a.instance,A=g.getAttribute("data-precedence"),v=c.get(A)||d,v===d&&c.set(null,g),c.set(A,g),this.count++,d=rm.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var Ju={$$typeof:O,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function uL(s,a,c,d,g,v,A,N){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ke(0),this.hiddenUpdates=Ke(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function gA(s,a,c,d,g,v,A,N,U,Q,ne,ae){return s=new uL(s,a,c,A,N,U,Q,ae),a=1,v===!0&&(a|=24),v=ji(3,null,null,a),s.current=v,v.stateNode=s,a=ny(),a.refCount++,s.pooledCache=a,a.refCount++,v.memoizedState={element:d,isDehydrated:c,cache:a},ay(v),s}function yA(s){return s?(s=Vl,s):Vl}function vA(s,a,c,d,g,v){g=yA(g),d.context===null?d.context=g:d.pendingContext=g,d=pa(a),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=ga(s,d,a),c!==null&&(qi(c,s,a),Iu(c,s,a))}function _A(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function wv(s,a){_A(s,a),(s=s.alternate)&&_A(s,a)}function bA(s){if(s.tag===13){var a=Ll(s,67108864);a!==null&&qi(a,s,67108864),wv(s,67108864)}}var om=!0;function hL(s,a,c,d){var g=J.T;J.T=null;var v=te.p;try{te.p=2,Tv(s,a,c,d)}finally{te.p=v,J.T=g}}function dL(s,a,c,d){var g=J.T;J.T=null;var v=te.p;try{te.p=8,Tv(s,a,c,d)}finally{te.p=v,J.T=g}}function Tv(s,a,c,d){if(om){var g=Sv(d);if(g===null)uv(s,a,d,lm,c),wA(s,d);else if(mL(g,s,a,c,d))d.stopPropagation();else if(wA(s,d),a&4&&-1<fL.indexOf(s)){for(;g!==null;){var v=Us(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=le(v.pendingLanes);if(A!==0){var N=v;for(N.pendingLanes|=2,N.entangledLanes|=2;A;){var U=1<<31-Bt(A);N.entanglements[1]|=U,A&=~U}Js(v),(It&6)===0&&(Gf=bt()+500,$u(0))}}break;case 13:N=Ll(v,2),N!==null&&qi(N,v,2),Kf(),wv(v,2)}if(v=Sv(d),v===null&&uv(s,a,d,lm,c),v===g)break;g=v}g!==null&&d.stopPropagation()}else uv(s,a,d,null,c)}}function Sv(s){return s=es(s),Av(s)}var lm=null;function Av(s){if(lm=null,s=pr(s),s!==null){var a=o(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=l(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return lm=s,null}function EA(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zn()){case gn:return 2;case en:return 8;case Tn:case Ei:return 32;case Pi:return 268435456;default:return 32}default:return 32}}var xv=!1,Ia=null,Na=null,Da=null,eh=new Map,th=new Map,Ma=[],fL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wA(s,a){switch(s){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":eh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":th.delete(a.pointerId)}}function nh(s,a,c,d,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},a!==null&&(a=Us(a),a!==null&&bA(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function mL(s,a,c,d,g){switch(a){case"focusin":return Ia=nh(Ia,s,a,c,d,g),!0;case"dragenter":return Na=nh(Na,s,a,c,d,g),!0;case"mouseover":return Da=nh(Da,s,a,c,d,g),!0;case"pointerover":var v=g.pointerId;return eh.set(v,nh(eh.get(v)||null,s,a,c,d,g)),!0;case"gotpointercapture":return v=g.pointerId,th.set(v,nh(th.get(v)||null,s,a,c,d,g)),!0}return!1}function TA(s){var a=pr(s.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){s.blockedOn=a,At(s.priority,function(){if(c.tag===13){var d=zi();d=We(d);var g=Ll(c,d);g!==null&&qi(g,c,d),wv(c,d)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function cm(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=Sv(s.nativeEvent);if(c===null){c=s.nativeEvent;var d=new c.constructor(c.type,c);_r=d,c.target.dispatchEvent(d),_r=null}else return a=Us(c),a!==null&&bA(a),s.blockedOn=c,!1;a.shift()}return!0}function SA(s,a,c){cm(s)&&c.delete(a)}function pL(){xv=!1,Ia!==null&&cm(Ia)&&(Ia=null),Na!==null&&cm(Na)&&(Na=null),Da!==null&&cm(Da)&&(Da=null),eh.forEach(SA),th.forEach(SA)}function um(s,a){s.blockedOn===a&&(s.blockedOn=null,xv||(xv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pL)))}var hm=null;function AA(s){hm!==s&&(hm=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hm===s&&(hm=null);for(var a=0;a<s.length;a+=3){var c=s[a],d=s[a+1],g=s[a+2];if(typeof d!="function"){if(Av(d||c)===null)continue;break}var v=Us(c);v!==null&&(s.splice(a,3),a-=3,Ay(v,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function ih(s){function a(U){return um(U,s)}Ia!==null&&um(Ia,s),Na!==null&&um(Na,s),Da!==null&&um(Da,s),eh.forEach(a),th.forEach(a);for(var c=0;c<Ma.length;c++){var d=Ma[c];d.blockedOn===s&&(d.blockedOn=null)}for(;0<Ma.length&&(c=Ma[0],c.blockedOn===null);)TA(c),c.blockedOn===null&&Ma.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],v=c[d+1],A=g[at]||null;if(typeof v=="function")A||AA(c);else if(A){var N=null;if(v&&v.hasAttribute("formAction")){if(g=v,A=v[at]||null)N=A.formAction;else if(Av(g)!==null)continue}else N=A.action;typeof N=="function"?c[d+1]=N:(c.splice(d,3),d-=3),AA(c)}}}function Rv(s){this._internalRoot=s}dm.prototype.render=Rv.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,d=zi();vA(c,d,s,a,null,null)},dm.prototype.unmount=Rv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;vA(s.current,2,null,s,null,null),Kf(),a[zt]=null}};function dm(s){this._internalRoot=s}dm.prototype.unstable_scheduleHydration=function(s){if(s){var a=et();s={blockedOn:null,target:s,priority:a};for(var c=0;c<Ma.length&&a!==0&&a<Ma[c].priority;c++);Ma.splice(c,0,s),c===0&&TA(s)}};var xA=e.version;if(xA!=="19.1.0")throw Error(i(527,xA,"19.1.0"));te.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(a),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var gL={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fm.isDisabled&&fm.supportsFiber)try{Ft=fm.inject(gL),Ye=fm}catch{}}return rh.createRoot=function(s,a){if(!r(s))throw Error(i(299));var c=!1,d="",g=zT,v=qT,A=HT,N=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks)),a=gA(s,1,!1,null,null,c,d,g,v,A,N,null),s[zt]=a.current,cv(s),new Rv(a)},rh.hydrateRoot=function(s,a,c){if(!r(s))throw Error(i(299));var d=!1,g="",v=zT,A=qT,N=HT,U=null,Q=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(N=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(U=c.unstable_transitionCallbacks),c.formState!==void 0&&(Q=c.formState)),a=gA(s,1,!0,a,c??null,d,g,v,A,N,U,Q),a.context=yA(null),c=a.current,d=zi(),d=We(d),g=pa(d),g.callback=null,ga(c,g,d),c=d,a.current.lanes=c,Fe(a,c),Js(a),s[zt]=a.current,cv(s),new dm(a)},rh.version="19.1.0",rh}var OA;function OL(){if(OA)return Iv.exports;OA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Iv.exports=PL(),Iv.exports}var kL=OL();const LL=X1(kL);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var kA="popstate";function VL(t={}){function e(i,r){let{pathname:o,search:l,hash:u}=i.location;return S_("",{pathname:o,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Bh(r)}return UL(e,n,null,t)}function Jt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ps(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jL(){return Math.random().toString(36).substring(2,10)}function LA(t,e){return{usr:t.state,key:t.key,idx:e}}function S_(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Bc(e):e,state:n,key:e&&e.key||i||jL()}}function Bh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Bc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function UL(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,u="POP",h=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function y(){u="POP";let I=p(),P=I==null?null:I-f;f=I,h&&h({action:u,location:R.location,delta:P})}function _(I,P){u="PUSH";let F=S_(R.location,I,P);f=p()+1;let O=LA(F,f),q=R.createHref(F);try{l.pushState(O,"",q)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;r.location.assign(q)}o&&h&&h({action:u,location:R.location,delta:1})}function E(I,P){u="REPLACE";let F=S_(R.location,I,P);f=p();let O=LA(F,f),q=R.createHref(F);l.replaceState(O,"",q),o&&h&&h({action:u,location:R.location,delta:0})}function S(I){return FL(I)}let R={get action(){return u},get location(){return t(r,l)},listen(I){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(kA,y),h=I,()=>{r.removeEventListener(kA,y),h=null}},createHref(I){return e(r,I)},createURL:S,encodeLocation(I){let P=S(I);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:_,replace:E,go(I){return l.go(I)}};return R}function FL(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Jt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Bh(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function iI(t,e,n="/"){return BL(t,e,n,!1)}function BL(t,e,n,i){let r=typeof e=="string"?Bc(e):e,o=Qr(r.pathname||"/",n);if(o==null)return null;let l=sI(t);zL(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=JL(o);u=XL(l[h],f,i)}return u}function sI(t,e=[],n=[],i="",r=!1){let o=(l,u,h=r,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&h)return;Jt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let y=Gr([i,p.relativePath]),_=n.concat(p);l.children&&l.children.length>0&&(Jt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),sI(l.children,e,_,y,h)),!(l.path==null&&!l.index)&&e.push({path:y,score:YL(y,l.index),routesMeta:_})};return t.forEach((l,u)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,u);else for(let f of rI(l.path))o(l,u,!0,f)}),e}function rI(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=rI(i.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),r&&u.push(...l),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function zL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QL(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var qL=/^:[\w-]+$/,HL=3,GL=2,$L=1,KL=10,WL=-2,VA=t=>t==="*";function YL(t,e){let n=t.split("/"),i=n.length;return n.some(VA)&&(i+=WL),e&&(i+=GL),n.filter(r=>!VA(r)).reduce((r,o)=>r+(qL.test(o)?HL:o===""?$L:KL),i)}function QL(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function XL(t,e,n=!1){let{routesMeta:i}=t,r={},o="/",l=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",y=Xm({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),_=h.route;if(!y&&f&&n&&!i[i.length-1].route.index&&(y=Xm({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:Gr([o,y.pathname]),pathnameBase:sV(Gr([o,y.pathnameBase])),route:_}),y.pathnameBase!=="/"&&(o=Gr([o,y.pathnameBase]))}return l}function Xm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=ZL(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:y},_)=>{if(p==="*"){let S=u[_]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const E=u[_];return y&&!E?f[p]=void 0:f[p]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function ZL(t,e=!1,n=!0){ps(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function JL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ps(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Qr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var eV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tV=t=>eV.test(t);function nV(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Bc(t):t,o;if(n)if(tV(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),ps(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?o=jA(n.substring(1),"/"):o=jA(n,e)}else o=e;return{pathname:o,search:rV(i),hash:aV(r)}}function jA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Pv(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function B0(t){let e=iV(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function z0(t,e,n,i=!1){let r;typeof t=="string"?r=Bc(t):(r={...t},Jt(!r.pathname||!r.pathname.includes("?"),Pv("?","pathname","search",r)),Jt(!r.pathname||!r.pathname.includes("#"),Pv("#","pathname","hash",r)),Jt(!r.search||!r.search.includes("#"),Pv("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,u;if(l==null)u=n;else{let y=e.length-1;if(!i&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),y-=1;r.pathname=_.join("/")}u=y>=0?e[y]:"/"}let h=nV(r,u),f=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var Gr=t=>t.join("/").replace(/\/\/+/g,"/"),sV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,aV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var aI=["POST","PUT","PATCH","DELETE"];new Set(aI);var lV=["GET",...aI];new Set(lV);var zc=x.createContext(null);zc.displayName="DataRouter";var Gp=x.createContext(null);Gp.displayName="DataRouterState";x.createContext(!1);var oI=x.createContext({isTransitioning:!1});oI.displayName="ViewTransition";var cV=x.createContext(new Map);cV.displayName="Fetchers";var uV=x.createContext(null);uV.displayName="Await";var Vs=x.createContext(null);Vs.displayName="Navigation";var md=x.createContext(null);md.displayName="Location";var vs=x.createContext({outlet:null,matches:[],isDataRoute:!1});vs.displayName="Route";var q0=x.createContext(null);q0.displayName="RouteError";function hV(t,{relative:e}={}){Jt(qc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=x.useContext(Vs),{hash:r,pathname:o,search:l}=pd(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Gr([n,o])),i.createHref({pathname:u,search:l,hash:r})}function qc(){return x.useContext(md)!=null}function ro(){return Jt(qc(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(md).location}var lI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cI(t){x.useContext(Vs).static||x.useLayoutEffect(t)}function hl(){let{isDataRoute:t}=x.useContext(vs);return t?RV():dV()}function dV(){Jt(qc(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(zc),{basename:e,navigator:n}=x.useContext(Vs),{matches:i}=x.useContext(vs),{pathname:r}=ro(),o=JSON.stringify(B0(i)),l=x.useRef(!1);return cI(()=>{l.current=!0}),x.useCallback((h,f={})=>{if(ps(l.current,lI),!l.current)return;if(typeof h=="number"){n.go(h);return}let p=z0(h,JSON.parse(o),r,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Gr([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,o,r,t])}var fV=x.createContext(null);function mV(t){let e=x.useContext(vs).outlet;return x.useMemo(()=>e&&x.createElement(fV.Provider,{value:t},e),[e,t])}function pV(){let{matches:t}=x.useContext(vs),e=t[t.length-1];return e?e.params:{}}function pd(t,{relative:e}={}){let{matches:n}=x.useContext(vs),{pathname:i}=ro(),r=JSON.stringify(B0(n));return x.useMemo(()=>z0(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function gV(t,e){return uI(t,e)}function uI(t,e,n,i,r){var F;Jt(qc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=x.useContext(Vs),{matches:l}=x.useContext(vs),u=l[l.length-1],h=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",y=u&&u.route;{let O=y&&y.path||"";hI(f,!y||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let _=ro(),E;if(e){let O=typeof e=="string"?Bc(e):e;Jt(p==="/"||((F=O.pathname)==null?void 0:F.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${O.pathname}" was given in the \`location\` prop.`),E=O}else E=_;let S=E.pathname||"/",R=S;if(p!=="/"){let O=p.replace(/^\//,"").split("/");R="/"+S.replace(/^\//,"").split("/").slice(O.length).join("/")}let I=iI(t,{pathname:R});ps(y||I!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),ps(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=EV(I&&I.map(O=>Object.assign({},O,{params:Object.assign({},h,O.params),pathname:Gr([p,o.encodeLocation?o.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:Gr([p,o.encodeLocation?o.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),l,n,i,r);return e&&P?x.createElement(md.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},P):P}function yV(){let t=xV(),e=oV(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:o},"ErrorBoundary")," or"," ",x.createElement("code",{style:o},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:r},n):null,l)}var vV=x.createElement(yV,null),_V=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?x.createElement(vs.Provider,{value:this.props.routeContext},x.createElement(q0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bV({routeContext:t,match:e,children:n}){let i=x.useContext(zc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(vs.Provider,{value:t},n)}function EV(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n==null?void 0:n.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);Jt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,h=-1;if(n)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=p),y.route.id){let{loaderData:_,errors:E}=n,S=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||S){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=n&&i?(p,y)=>{var _,E;i(p,{location:n.location,params:((E=(_=n.matches)==null?void 0:_[0])==null?void 0:E.params)??{},errorInfo:y})}:void 0;return o.reduceRight((p,y,_)=>{let E,S=!1,R=null,I=null;n&&(E=l&&y.route.id?l[y.route.id]:void 0,R=y.route.errorElement||vV,u&&(h<0&&_===0?(hI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,I=null):h===_&&(S=!0,I=y.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,_+1)),F=()=>{let O;return E?O=R:S?O=I:y.route.Component?O=x.createElement(y.route.Component,null):y.route.element?O=y.route.element:O=p,x.createElement(bV,{match:y,routeContext:{outlet:p,matches:P,isDataRoute:n!=null},children:O})};return n&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?x.createElement(_V,{location:n.location,revalidation:n.revalidation,component:R,error:E,children:F(),routeContext:{outlet:null,matches:P,isDataRoute:!0},onError:f}):F()},null)}function H0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wV(t){let e=x.useContext(zc);return Jt(e,H0(t)),e}function TV(t){let e=x.useContext(Gp);return Jt(e,H0(t)),e}function SV(t){let e=x.useContext(vs);return Jt(e,H0(t)),e}function G0(t){let e=SV(t),n=e.matches[e.matches.length-1];return Jt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function AV(){return G0("useRouteId")}function xV(){var i;let t=x.useContext(q0),e=TV("useRouteError"),n=G0("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function RV(){let{router:t}=wV("useNavigate"),e=G0("useNavigate"),n=x.useRef(!1);return cI(()=>{n.current=!0}),x.useCallback(async(r,o={})=>{ps(n.current,lI),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...o}))},[t,e])}var UA={};function hI(t,e,n){!e&&!UA[t]&&(UA[t]=!0,ps(!1,n))}x.memo(CV);function CV({routes:t,future:e,state:n,unstable_onError:i}){return uI(t,void 0,n,i,e)}function Dm({to:t,replace:e,state:n,relative:i}){Jt(qc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=x.useContext(Vs);ps(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=x.useContext(vs),{pathname:l}=ro(),u=hl(),h=z0(t,B0(o),l,i==="path"),f=JSON.stringify(h);return x.useEffect(()=>{u(JSON.parse(f),{replace:e,state:n,relative:i})},[u,f,i,e,n]),null}function IV(t){return mV(t.context)}function Rs(t){Jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NV({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:o=!1}){Jt(!qc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:l,navigator:r,static:o,future:{}}),[l,r,o]);typeof n=="string"&&(n=Bc(n));let{pathname:h="/",search:f="",hash:p="",state:y=null,key:_="default"}=n,E=x.useMemo(()=>{let S=Qr(h,l);return S==null?null:{location:{pathname:S,search:f,hash:p,state:y,key:_},navigationType:i}},[l,h,f,p,y,_,i]);return ps(E!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:x.createElement(Vs.Provider,{value:u},x.createElement(md.Provider,{children:e,value:E}))}function DV({children:t,location:e}){return gV(A_(t),e)}function A_(t,e=[]){let n=[];return x.Children.forEach(t,(i,r)=>{if(!x.isValidElement(i))return;let o=[...e,r];if(i.type===x.Fragment){n.push.apply(n,A_(i.props.children,o));return}Jt(i.type===Rs,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=A_(i.props.children,o)),n.push(l)}),n}var Mm="get",Pm="application/x-www-form-urlencoded";function $p(t){return t!=null&&typeof t.tagName=="string"}function MV(t){return $p(t)&&t.tagName.toLowerCase()==="button"}function PV(t){return $p(t)&&t.tagName.toLowerCase()==="form"}function OV(t){return $p(t)&&t.tagName.toLowerCase()==="input"}function kV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LV(t,e){return t.button===0&&(!e||e==="_self")&&!kV(t)}var mm=null;function VV(){if(mm===null)try{new FormData(document.createElement("form"),0),mm=!1}catch{mm=!0}return mm}var jV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ov(t){return t!=null&&!jV.has(t)?(ps(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pm}"`),null):t}function UV(t,e){let n,i,r,o,l;if(PV(t)){let u=t.getAttribute("action");i=u?Qr(u,e):null,n=t.getAttribute("method")||Mm,r=Ov(t.getAttribute("enctype"))||Pm,o=new FormData(t)}else if(MV(t)||OV(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||u.getAttribute("action");if(i=h?Qr(h,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Mm,r=Ov(t.getAttribute("formenctype"))||Ov(u.getAttribute("enctype"))||Pm,o=new FormData(u,t),!VV()){let{name:f,type:p,value:y}=t;if(p==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,y)}}else{if($p(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Mm,i=null,r=Pm,l=t}return o&&r==="text/plain"&&(l=o,o=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function FV(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Qr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function BV(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zV(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function qV(t,e,n){let i=await Promise.all(t.map(async r=>{let o=e.routes[r.route.id];if(o){let l=await BV(o,n);return l.links?l.links():[]}return[]}));return KV(i.flat(1).filter(zV).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function FA(t,e,n,i,r,o){let l=(h,f)=>n[f]?h.route.id!==n[f].route.id:!0,u=(h,f)=>{var p;return n[f].pathname!==h.pathname||((p=n[f].route.path)==null?void 0:p.endsWith("*"))&&n[f].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,f)=>l(h,f)||u(h,f)):o==="data"?e.filter((h,f)=>{var y;let p=i.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(l(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let _=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function HV(t,e,{includeHydrateFallback:n}={}){return GV(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function GV(t){return[...new Set(t)]}function $V(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function KV(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let o=JSON.stringify($V(r));return n.has(o)||(n.add(o),i.push({key:o,link:r})),i},[])}function dI(){let t=x.useContext(zc);return $0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function WV(){let t=x.useContext(Gp);return $0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var K0=x.createContext(void 0);K0.displayName="FrameworkContext";function fI(){let t=x.useContext(K0);return $0(t,"You must render this element inside a <HydratedRouter> element"),t}function YV(t,e){let n=x.useContext(K0),[i,r]=x.useState(!1),[o,l]=x.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=e,_=x.useRef(null);x.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let R=P=>{P.forEach(F=>{l(F.isIntersecting)})},I=new IntersectionObserver(R,{threshold:.5});return _.current&&I.observe(_.current),()=>{I.disconnect()}}},[t]),x.useEffect(()=>{if(i){let R=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(R)}}},[i]);let E=()=>{r(!0)},S=()=>{r(!1),l(!1)};return n?t!=="intent"?[o,_,{}]:[o,_,{onFocus:ah(u,E),onBlur:ah(h,S),onMouseEnter:ah(f,E),onMouseLeave:ah(p,S),onTouchStart:ah(y,E)}]:[!1,_,{}]}function ah(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function QV({page:t,...e}){let{router:n}=dI(),i=x.useMemo(()=>iI(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?x.createElement(ZV,{page:t,matches:i,...e}):null}function XV(t){let{manifest:e,routeModules:n}=fI(),[i,r]=x.useState([]);return x.useEffect(()=>{let o=!1;return qV(t,e,n).then(l=>{o||r(l)}),()=>{o=!0}},[t,e,n]),i}function ZV({page:t,matches:e,...n}){let i=ro(),{manifest:r,routeModules:o}=fI(),{basename:l}=dI(),{loaderData:u,matches:h}=WV(),f=x.useMemo(()=>FA(t,e,h,r,i,"data"),[t,e,h,r,i]),p=x.useMemo(()=>FA(t,e,h,r,i,"assets"),[t,e,h,r,i]),y=x.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let S=new Set,R=!1;if(e.forEach(P=>{var O;let F=r.routes[P.route.id];!F||!F.hasLoader||(!f.some(q=>q.route.id===P.route.id)&&P.route.id in u&&((O=o[P.route.id])!=null&&O.shouldRevalidate)||F.hasClientLoader?R=!0:S.add(P.route.id))}),S.size===0)return[];let I=FV(t,l,"data");return R&&S.size>0&&I.searchParams.set("_routes",e.filter(P=>S.has(P.route.id)).map(P=>P.route.id).join(",")),[I.pathname+I.search]},[l,u,i,r,f,e,t,o]),_=x.useMemo(()=>HV(p,r),[p,r]),E=XV(p);return x.createElement(x.Fragment,null,y.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),_.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),E.map(({key:S,link:R})=>x.createElement("link",{key:S,nonce:n.nonce,...R})))}function JV(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var mI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mI&&(window.__reactRouterVersion="7.9.6")}catch{}function e4({basename:t,children:e,window:n}){let i=x.useRef();i.current==null&&(i.current=VL({window:n,v5Compat:!0}));let r=i.current,[o,l]=x.useState({action:r.action,location:r.location}),u=x.useCallback(h=>{x.startTransition(()=>l(h))},[l]);return x.useLayoutEffect(()=>r.listen(u),[r,u]),x.createElement(NV,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:r})}var pI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W0=x.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:o,replace:l,state:u,target:h,to:f,preventScrollReset:p,viewTransition:y,..._},E){let{basename:S}=x.useContext(Vs),R=typeof f=="string"&&pI.test(f),I,P=!1;if(typeof f=="string"&&R&&(I=f,mI))try{let M=new URL(window.location.href),k=f.startsWith("//")?new URL(M.protocol+f):new URL(f),j=Qr(k.pathname,S);k.origin===M.origin&&j!=null?f=j+k.search+k.hash:P=!0}catch{ps(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=hV(f,{relative:r}),[O,q,G]=YV(i,_),Y=i4(f,{replace:l,state:u,target:h,preventScrollReset:p,relative:r,viewTransition:y});function L(M){e&&e(M),M.defaultPrevented||Y(M)}let C=x.createElement("a",{..._,...G,href:I||F,onClick:P||o?e:L,ref:JV(E,q),target:h,"data-discover":!R&&n==="render"?"true":void 0});return O&&!R?x.createElement(x.Fragment,null,C,x.createElement(QV,{page:F})):C});W0.displayName="Link";var gI=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:o,to:l,viewTransition:u,children:h,...f},p){let y=pd(l,{relative:f.relative}),_=ro(),E=x.useContext(Gp),{navigator:S,basename:R}=x.useContext(Vs),I=E!=null&&l4(y)&&u===!0,P=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,F=_.pathname,O=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(F=F.toLowerCase(),O=O?O.toLowerCase():null,P=P.toLowerCase()),O&&R&&(O=Qr(O,R)||O);const q=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let G=F===P||!r&&F.startsWith(P)&&F.charAt(q)==="/",Y=O!=null&&(O===P||!r&&O.startsWith(P)&&O.charAt(P.length)==="/"),L={isActive:G,isPending:Y,isTransitioning:I},C=G?e:void 0,M;typeof i=="function"?M=i(L):M=[i,G?"active":null,Y?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(L):o;return x.createElement(W0,{...f,"aria-current":C,className:M,ref:p,style:k,to:l,viewTransition:u},typeof h=="function"?h(L):h)});gI.displayName="NavLink";var t4=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:o,method:l=Mm,action:u,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:y,..._},E)=>{let S=a4(),R=o4(u,{relative:f}),I=l.toLowerCase()==="get"?"get":"post",P=typeof u=="string"&&pI.test(u),F=O=>{if(h&&h(O),O.defaultPrevented)return;O.preventDefault();let q=O.nativeEvent.submitter,G=(q==null?void 0:q.getAttribute("formmethod"))||l;S(q||O.currentTarget,{fetcherKey:e,method:G,navigate:n,replace:r,state:o,relative:f,preventScrollReset:p,viewTransition:y})};return x.createElement("form",{ref:E,method:I,action:R,onSubmit:i?h:F,..._,"data-discover":!P&&t==="render"?"true":void 0})});t4.displayName="Form";function n4(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yI(t){let e=x.useContext(zc);return Jt(e,n4(t)),e}function i4(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:o,viewTransition:l}={}){let u=hl(),h=ro(),f=pd(t,{relative:o});return x.useCallback(p=>{if(LV(p,e)){p.preventDefault();let y=n!==void 0?n:Bh(h)===Bh(f);u(t,{replace:y,state:i,preventScrollReset:r,relative:o,viewTransition:l})}},[h,u,f,n,i,e,t,r,o,l])}var s4=0,r4=()=>`__${String(++s4)}__`;function a4(){let{router:t}=yI("useSubmit"),{basename:e}=x.useContext(Vs),n=AV();return x.useCallback(async(i,r={})=>{let{action:o,method:l,encType:u,formData:h,body:f}=UV(i,e);if(r.navigate===!1){let p=r.fetcherKey||r4();await t.fetch(p,n,r.action||o,{preventScrollReset:r.preventScrollReset,formData:h,body:f,formMethod:r.method||l,formEncType:r.encType||u,flushSync:r.flushSync})}else await t.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:h,body:f,formMethod:r.method||l,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function o4(t,{relative:e}={}){let{basename:n}=x.useContext(Vs),i=x.useContext(vs);Jt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),o={...pd(t||".",{relative:e})},l=ro();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(y=>y).forEach(y=>u.append("index",y));let p=u.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Gr([n,o.pathname])),Bh(o)}function l4(t,{relative:e}={}){let n=x.useContext(oI);Jt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=yI("useViewTransitionState"),r=pd(t,{relative:e});if(!n.isTransitioning)return!1;let o=Qr(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=Qr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Xm(r.pathname,l)!=null||Xm(r.pathname,o)!=null}var dh=nI();const c4=()=>{};var BA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he=function(t,e){if(!t)throw Hc(e)},Hc=function(t){return new Error("Firebase Database ("+vI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},u4=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,u=l?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,p=o>>2,y=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,E=f&63;h||(E=64,l||(_=64)),i.push(n[p],n[y],n[_],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_I(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||y==null)throw new h4;const _=o<<2|u>>4;if(i.push(_),f!==64){const E=u<<4&240|f>>2;if(i.push(E),y!==64){const S=f<<6&192|y;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bI=function(t){const e=_I(t);return Y0.encodeByteArray(e,!0)},Zm=function(t){return bI(t).replace(/\./g,"")},Jm=function(t){try{return Y0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){return EI(void 0,t)}function EI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!f4(n)||(t[n]=EI(t[n],e[n]));return t}function f4(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=()=>m4().__FIREBASE_DEFAULTS__,g4=()=>{if(typeof process>"u"||typeof BA>"u")return;const t=BA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jm(t[1]);return e&&JSON.parse(e)},Kp=()=>{try{return c4()||p4()||g4()||y4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wI=t=>{var e,n;return(n=(e=Kp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Q0=t=>{const e=wI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},TI=()=>{var t;return(t=Kp())===null||t===void 0?void 0:t.config},SI=t=>{var e;return(e=Kp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zm(JSON.stringify(n)),Zm(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(di())}function v4(){var t;const e=(t=Kp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b4(){const t=di();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E4(){return vI.NODE_ADMIN===!0}function w4(){return!v4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tb(){try{return typeof indexedDB=="object"}catch{return!1}}function nb(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function xI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4="FirebaseError";class _s extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=T4,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?S4(o,i):"Error",u=`${this.serviceName}: ${l} (${r}).`;return new _s(r,u,i)}}function S4(t,e){return t.replace(A4,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const A4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t){return JSON.parse(t)}function Yn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=zh(Jm(o[0])||""),n=zh(Jm(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},x4=function(t){const e=RI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},R4=function(t){const e=RI(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ic(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function x_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ep(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Xr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(zA(o)&&zA(l)){if(!Xr(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function zA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function fh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function mh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)i[y]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let y=0;y<16;y++)i[y]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let y=16;y<80;y++){const _=i[y-3]^i[y-8]^i[y-14]^i[y-16];i[y]=(_<<1|_>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],l=this.chain_[2],u=this.chain_[3],h=this.chain_[4],f,p;for(let y=0;y<80;y++){y<40?y<20?(f=u^o&(l^u),p=1518500249):(f=o^l^u,p=1859775393):y<60?(f=o&l|u&(o|l),p=2400959708):(f=o^l^u,p=3395469782);const _=(r<<5|r>>>27)+f+h+p+i[y]&4294967295;h=u,u=l,l=(o<<30|o>>>2)&4294967295,o=r,r=_}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let l=this.inbuf_;for(;r<n;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}else for(;r<n;)if(o[l]=e[r],++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function I4(t,e){const n=new N4(t,e);return n.subscribe.bind(n)}class N4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");D4(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=kv),r.error===void 0&&(r.error=kv),r.complete===void 0&&(r.complete=kv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kv(){}function M4(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,he(i<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(i)-56320;r=65536+(o<<10)+l}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Wp=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=1e3,k4=2,L4=4*60*60*1e3,V4=.5;function qA(t,e=O4,n=k4){const i=e*Math.pow(n,t),r=Math.round(V4*i*(Math.random()-.5)*2);return Math.min(L4,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t&&t._delegate?t._delegate:t}class Yi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new X0;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F4(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:U4(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U4(t){return t===qo?void 0:t}function F4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const z4={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},q4=st.INFO,H4={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},G4=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=H4[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gd{constructor(e){this.name=e,this._logLevel=q4,this._logHandler=G4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const $4=(t,e)=>e.some(n=>t instanceof n);let HA,GA;function K4(){return HA||(HA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W4(){return GA||(GA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CI=new WeakMap,R_=new WeakMap,II=new WeakMap,Lv=new WeakMap,ib=new WeakMap;function Y4(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(qa(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&CI.set(n,t)}).catch(()=>{}),ib.set(e,t),e}function Q4(t){if(R_.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});R_.set(t,e)}let C_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return R_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||II.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X4(t){C_=t(C_)}function Z4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Vv(this),e,...n);return II.set(i,e.sort?e.sort():[e]),qa(i)}:W4().includes(t)?function(...e){return t.apply(Vv(this),e),qa(CI.get(this))}:function(...e){return qa(t.apply(Vv(this),e))}}function J4(t){return typeof t=="function"?Z4(t):(t instanceof IDBTransaction&&Q4(t),$4(t,K4())?new Proxy(t,C_):t)}function qa(t){if(t instanceof IDBRequest)return Y4(t);if(Lv.has(t))return Lv.get(t);const e=J4(t);return e!==t&&(Lv.set(t,e),ib.set(e,t)),e}const Vv=t=>ib.get(t);function NI(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),u=qa(l);return i&&l.addEventListener("upgradeneeded",h=>{i(qa(l.result),h.oldVersion,h.newVersion,qa(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const ej=["get","getKey","getAll","getAllKeys","count"],tj=["put","add","delete","clear"],jv=new Map;function $A(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jv.get(e))return jv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=tj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||ej.includes(n)))return;const o=async function(l,...u){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return jv.set(e,o),o}X4(t=>({...t,get:(e,n,i)=>$A(e,n)||t.get(e,n,i),has:(e,n)=>!!$A(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ij(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ij(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const I_="@firebase/app",KA="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new gd("@firebase/app"),sj="@firebase/app-compat",rj="@firebase/analytics-compat",aj="@firebase/analytics",oj="@firebase/app-check-compat",lj="@firebase/app-check",cj="@firebase/auth",uj="@firebase/auth-compat",hj="@firebase/database",dj="@firebase/data-connect",fj="@firebase/database-compat",mj="@firebase/functions",pj="@firebase/functions-compat",gj="@firebase/installations",yj="@firebase/installations-compat",vj="@firebase/messaging",_j="@firebase/messaging-compat",bj="@firebase/performance",Ej="@firebase/performance-compat",wj="@firebase/remote-config",Tj="@firebase/remote-config-compat",Sj="@firebase/storage",Aj="@firebase/storage-compat",xj="@firebase/firestore",Rj="@firebase/vertexai",Cj="@firebase/firestore-compat",Ij="firebase",Nj="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="[DEFAULT]",Dj={[I_]:"fire-core",[sj]:"fire-core-compat",[aj]:"fire-analytics",[rj]:"fire-analytics-compat",[lj]:"fire-app-check",[oj]:"fire-app-check-compat",[cj]:"fire-auth",[uj]:"fire-auth-compat",[hj]:"fire-rtdb",[dj]:"fire-data-connect",[fj]:"fire-rtdb-compat",[mj]:"fire-fn",[pj]:"fire-fn-compat",[gj]:"fire-iid",[yj]:"fire-iid-compat",[vj]:"fire-fcm",[_j]:"fire-fcm-compat",[bj]:"fire-perf",[Ej]:"fire-perf-compat",[wj]:"fire-rc",[Tj]:"fire-rc-compat",[Sj]:"fire-gcs",[Aj]:"fire-gcs-compat",[xj]:"fire-fst",[Cj]:"fire-fst-compat",[Rj]:"fire-vertex","fire-js":"fire-js",[Ij]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new Map,Mj=new Map,D_=new Map;function WA(t,e){try{t.container.addComponent(e)}catch(n){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gs(t){const e=t.name;if(D_.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;D_.set(e,t);for(const n of tp.values())WA(n,t);for(const n of Mj.values())WA(n,t);return!0}function aa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ri(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ha=new dl("app","Firebase",Pj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ha.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=Nj;function DI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:N_,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ha.create("bad-app-name",{appName:String(r)});if(n||(n=TI()),!n)throw Ha.create("no-options");const o=tp.get(r);if(o){if(Xr(n,o.options)&&Xr(i,o.config))return o;throw Ha.create("duplicate-app",{appName:r})}const l=new B4(r);for(const h of D_.values())l.addComponent(h);const u=new Oj(n,i,l);return tp.set(r,u),u}function yd(t=N_){const e=tp.get(t);if(!e&&t===N_&&TI())return DI();if(!e)throw Ha.create("no-app",{appName:t});return e}function ui(t,e,n){var i;let r=(i=Dj[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(u.join(" "));return}gs(new Yi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="firebase-heartbeat-database",Lj=1,qh="firebase-heartbeat-store";let Uv=null;function MI(){return Uv||(Uv=NI(kj,Lj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ha.create("idb-open",{originalErrorMessage:t.message})})),Uv}async function Vj(t){try{const n=(await MI()).transaction(qh),i=await n.objectStore(qh).get(PI(t));return await n.done,i}catch(e){if(e instanceof _s)Zr.warn(e.message);else{const n=Ha.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(n.message)}}}async function YA(t,e){try{const i=(await MI()).transaction(qh,"readwrite");await i.objectStore(qh).put(e,PI(t)),await i.done}catch(n){if(n instanceof _s)Zr.warn(n.message);else{const i=Ha.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zr.warn(i.message)}}}function PI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=1024,Uj=30;class Fj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zj(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=QA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>Uj){const l=qj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Zr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=QA(),{heartbeatsToSend:i,unsentEntries:r}=Bj(this._heartbeatsCache.heartbeats),o=Zm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Zr.warn(n),""}}}function QA(){return new Date().toISOString().substring(0,10)}function Bj(t,e=jj){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),XA(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),XA(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class zj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tb()?nb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Vj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return YA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return YA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function XA(t){return Zm(JSON.stringify({version:2,heartbeats:t})).length}function qj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t){gs(new Yi("platform-logger",e=>new nj(e),"PRIVATE")),gs(new Yi("heartbeat",e=>new Fj(e),"PRIVATE")),ui(I_,KA,t),ui(I_,KA,"esm2017"),ui("fire-js","")}Hj("");function sb(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function OI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gj=OI,kI=new dl("auth","Firebase",OI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=new gd("@firebase/auth");function $j(t,...e){np.logLevel<=st.WARN&&np.warn(`Auth (${ao}): ${t}`,...e)}function Om(t,...e){np.logLevel<=st.ERROR&&np.error(`Auth (${ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t,...e){throw rb(t,...e)}function nr(t,...e){return rb(t,...e)}function LI(t,e,n){const i=Object.assign(Object.assign({},Gj()),{[e]:n});return new dl("auth","Firebase",i).create(e,{appName:t.name})}function $r(t){return LI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rb(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return kI.create(t,...e)}function Pe(t,e,...n){if(!t)throw rb(e,...n)}function Br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Om(e),new Error(e)}function Jr(t,e){t||Br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Kj(){return ZA()==="http:"||ZA()==="https:"}function ZA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Kj()||eb()||"connection"in navigator)?navigator.onLine:!0}function Yj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jr(n>e,"Short delay should be less than long delay!"),this.isMobile=J0()||AI()}get(){return Wj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t,e){Jr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zj=new vd(3e4,6e4);function oa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function la(t,e,n,i,r={}){return jI(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const u=Gc(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},o);return _4()||(f.referrerPolicy="no-referrer"),VI.fetch()(await UI(t,t.config.apiHost,n,u),f)})}async function jI(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Qj),e);try{const r=new eU(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw pm(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw pm(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw pm(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw pm(t,"user-disabled",l);const p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw LI(t,p,f);Os(t,p)}}catch(r){if(r instanceof _s)throw r;Os(t,"network-request-failed",{message:String(r)})}}async function _d(t,e,n,i,r={}){const o=await la(t,e,n,i,r);return"mfaPendingCredential"in o&&Os(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function UI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?ab(t.config,r):`${t.config.apiScheme}://${r}`;return Xj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function Jj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(nr(this.auth,"network-request-failed")),Zj.get())})}}function pm(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=nr(t,e,i);return r.customData._tokenResponse=n,r}function JA(t){return t!==void 0&&t.enterprise!==void 0}class tU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Jj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nU(t,e){return la(t,"GET","/v2/recaptchaConfig",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iU(t,e){return la(t,"POST","/v1/accounts:delete",e)}async function ip(t,e){return la(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sU(t,e=!1){const n=$t(t),i=await n.getIdToken(e),r=ob(i);Pe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Th(Fv(r.auth_time)),issuedAtTime:Th(Fv(r.iat)),expirationTime:Th(Fv(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Fv(t){return Number(t)*1e3}function ob(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Om("JWT malformed, contained fewer than 3 sections"),null;try{const r=Jm(n);return r?JSON.parse(r):(Om("Failed to decode base64 JWT payload"),null)}catch(r){return Om("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ex(t){const e=ob(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof _s&&rU(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function rU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Th(this.lastLoginAt),this.creationTime=Th(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Hh(t,ip(n,{idToken:i}));Pe(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?FI(o.providerUserInfo):[],u=lU(t.providerData,l),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),p=h?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new P_(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function oU(t){const e=$t(t);await sp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lU(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function FI(t){return t.map(e=>{var{providerId:n}=e,i=sb(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(t,e){const n=await jI(t,{},async()=>{const i=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await UI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",VI.fetch()(l,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uU(t,e){return la(t,"POST","/v2/accounts:revokeToken",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=ex(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await cU(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new wc;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Pe(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Pe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wc,this.toJSON())}_performRefresh(){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ns{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=sb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new P_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Hh(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sU(this,e)}reload(){return oU(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ns(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await sp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ri(this.auth.app))return Promise.reject($r(this.auth));const e=await this.getIdToken();return await Hh(this,iU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,u,h,f,p;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,_=(r=n.email)!==null&&r!==void 0?r:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(l=n.photoURL)!==null&&l!==void 0?l:void 0,R=(u=n.tenantId)!==null&&u!==void 0?u:void 0,I=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,P=(f=n.createdAt)!==null&&f!==void 0?f:void 0,F=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:O,emailVerified:q,isAnonymous:G,providerData:Y,stsTokenManager:L}=n;Pe(O&&L,e,"internal-error");const C=wc.fromJSON(this.name,L);Pe(typeof O=="string",e,"internal-error"),Oa(y,e.name),Oa(_,e.name),Pe(typeof q=="boolean",e,"internal-error"),Pe(typeof G=="boolean",e,"internal-error"),Oa(E,e.name),Oa(S,e.name),Oa(R,e.name),Oa(I,e.name),Oa(P,e.name),Oa(F,e.name);const M=new Ns({uid:O,auth:e,email:_,emailVerified:q,displayName:y,isAnonymous:G,photoURL:S,phoneNumber:E,tenantId:R,stsTokenManager:C,createdAt:P,lastLoginAt:F});return Y&&Array.isArray(Y)&&(M.providerData=Y.map(k=>Object.assign({},k))),I&&(M._redirectEventId=I),M}static async _fromIdTokenResponse(e,n,i=!1){const r=new wc;r.updateFromServerResponse(n);const o=new Ns({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await sp(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Pe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?FI(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new wc;u.updateFromIdToken(i);const h=new Ns({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new P_(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Map;function zr(t){Jr(t instanceof Function,"Expected a class definition");let e=tx.get(t);return e?(Jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BI.type="NONE";const nx=BI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t,e,n){return`firebase:${t}:${e}:${n}`}class Tc{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=km(this.userKey,r.apiKey,o),this.fullPersistenceKey=km("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ip(this.auth,{idToken:e}).catch(()=>{});return n?Ns._fromGetAccountInfoResponse(this.auth,n,e):null}return Ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Tc(zr(nx),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||zr(nx);const l=km(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(l);if(p){let y;if(typeof p=="string"){const _=await ip(e,{idToken:p}).catch(()=>{});if(!_)break;y=await Ns._fromGetAccountInfoResponse(e,_,p)}else y=Ns._fromJSON(e,p);f!==o&&(u=y),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Tc(o,e,i):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Tc(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KI(e))return"Blackberry";if(WI(e))return"Webos";if(qI(e))return"Safari";if((e.includes("chrome/")||HI(e))&&!e.includes("edge/"))return"Chrome";if($I(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function zI(t=di()){return/firefox\//i.test(t)}function qI(t=di()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HI(t=di()){return/crios\//i.test(t)}function GI(t=di()){return/iemobile/i.test(t)}function $I(t=di()){return/android/i.test(t)}function KI(t=di()){return/blackberry/i.test(t)}function WI(t=di()){return/webos/i.test(t)}function lb(t=di()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hU(t=di()){var e;return lb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dU(){return b4()&&document.documentMode===10}function YI(t=di()){return lb(t)||$I(t)||WI(t)||KI(t)||/windows phone/i.test(t)||GI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t,e=[]){let n;switch(t){case"Browser":n=ix(di());break;case"Worker":n=`${ix(di())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mU(t,e={}){return la(t,"GET","/v2/passwordPolicy",oa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=6;class gU{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:pU,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(r=h.containsLowercaseLetter)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sx(this),this.idTokenSubscription=new sx(this),this.beforeStateQueue=new fU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Tc.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ip(this,{idToken:e}),i=await Ns._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ri(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Yj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ri(this.app))return Promise.reject($r(this));const n=e?$t(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ri(this.app)?Promise.reject($r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ri(this.app)?Promise.reject($r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mU(this),n=new gU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await uU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zr(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Tc.create(this,[zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$j(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oo(t){return $t(t)}class sx{constructor(e){this.auth=e,this.observer=null,this.addObserver=I4(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vU(t){Yp=t}function XI(t){return Yp.loadJS(t)}function _U(){return Yp.recaptchaEnterpriseScript}function bU(){return Yp.gapiScript}function EU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class wU{constructor(){this.enterprise=new TU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class TU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SU="recaptcha-enterprise",ZI="NO_RECAPTCHA";class AU{constructor(e){this.type=SU,this.auth=oo(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{nU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new tU(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{u(h)})})}function r(o,l,u){const h=window.grecaptcha;JA(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(ZI)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(u=>{if(!n&&JA(window.grecaptcha))r(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=_U();h.length!==0&&(h+=u),XI(h).then(()=>{r(u,o,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function rx(t,e,n,i=!1,r=!1){const o=new AU(t);let l;if(r)l=ZI;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function rp(t,e,n,i,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await rx(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await rx(t,e,n,n==="getOobCode");return i(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t,e){const n=aa(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Xr(o,e??{}))return r;Os(r,"already-initialized")}return n.initialize({options:e})}function RU(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(zr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function CU(t,e,n){const i=oo(t);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=JI(e),{host:l,port:u}=IU(e),h=u===null?"":`:${u}`,f={url:`${o}//${l}${h}/`},p=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe(Xr(f,i.config.emulator)&&Xr(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,NU()}function JI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IU(t){const e=JI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:ax(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:ax(l)}}}function ax(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,n){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}}async function DU(t,e){return la(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(t,e){return _d(t,"POST","/v1/accounts:signInWithPassword",oa(t,e))}async function PU(t,e){return la(t,"POST","/v1/accounts:sendOobCode",oa(t,e))}async function OU(t,e){return PU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(t,e){return _d(t,"POST","/v1/accounts:signInWithEmailLink",oa(t,e))}async function LU(t,e){return _d(t,"POST","/v1/accounts:signInWithEmailLink",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends cb{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Gh(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Gh(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rp(e,n,"signInWithPassword",MU);case"emailLink":return kU(e,{email:this._email,oobCode:this._password});default:Os(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rp(e,i,"signUpPassword",DU);case"emailLink":return LU(e,{idToken:n,email:this._email,oobCode:this._password});default:Os(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(t,e){return _d(t,"POST","/v1/accounts:signInWithIdp",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU="http://localhost";class tl extends cb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new tl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Os("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=sb(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new tl(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Sc(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Sc(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sc(e,n)}buildRequest(){const e={requestUri:VU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UU(t){const e=fh(mh(t)).link,n=e?fh(mh(e)).deep_link_id:null,i=fh(mh(t)).deep_link_id;return(i?fh(mh(i)).link:null)||i||n||e||t}class ub{constructor(e){var n,i,r,o,l,u;const h=fh(mh(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,p=(i=h.oobCode)!==null&&i!==void 0?i:null,y=jU((r=h.mode)!==null&&r!==void 0?r:null);Pe(f&&p&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=p,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=UU(e);try{return new ub(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this.providerId=$c.PROVIDER_ID}static credential(e,n){return Gh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ub.parseLink(n);return Pe(i,"argument-error"),Gh._fromEmailAndCode(e,i.code,i.tenantId)}}$c.PROVIDER_ID="password";$c.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$c.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends eN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends bd{constructor(){super("facebook.com")}static credential(e){return tl._fromParams({providerId:Va.PROVIDER_ID,signInMethod:Va.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Va.credentialFromTaggedObject(e)}static credentialFromError(e){return Va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Va.credential(e.oauthAccessToken)}catch{return null}}}Va.FACEBOOK_SIGN_IN_METHOD="facebook.com";Va.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends bd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return tl._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ja.credential(n,i)}catch{return null}}}ja.GOOGLE_SIGN_IN_METHOD="google.com";ja.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends bd{constructor(){super("github.com")}static credential(e){return tl._fromParams({providerId:Ua.PROVIDER_ID,signInMethod:Ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ua.credentialFromTaggedObject(e)}static credentialFromError(e){return Ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ua.credential(e.oauthAccessToken)}catch{return null}}}Ua.GITHUB_SIGN_IN_METHOD="github.com";Ua.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends bd{constructor(){super("twitter.com")}static credential(e,n){return tl._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Fa.credential(n,i)}catch{return null}}}Fa.TWITTER_SIGN_IN_METHOD="twitter.com";Fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e){return _d(t,"POST","/v1/accounts:signUp",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Ns._fromIdTokenResponse(e,i,r),l=ox(i);return new nl({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=ox(i);return new nl({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function ox(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends _s{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ap.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new ap(e,n,i,r)}}function tN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ap._fromErrorAndOperation(t,o,e,i):o})}async function BU(t,e,n=!1){const i=await Hh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return nl._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zU(t,e,n=!1){const{auth:i}=t;if(Ri(i.app))return Promise.reject($r(i));const r="reauthenticate";try{const o=await Hh(t,tN(i,r,e,t),n);Pe(o.idToken,i,"internal-error");const l=ob(o.idToken);Pe(l,i,"internal-error");const{sub:u}=l;return Pe(t.uid===u,i,"user-mismatch"),nl._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Os(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e,n=!1){if(Ri(t.app))return Promise.reject($r(t));const i="signIn",r=await tN(t,i,e),o=await nl._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function qU(t,e){return nN(oo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t){const e=oo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HU(t,e,n){const i=oo(t);await rp(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",OU)}async function sN(t,e,n){if(Ri(t.app))return Promise.reject($r(t));const i=oo(t),l=await rp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FU).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&iN(t),h}),u=await nl._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function rN(t,e,n){return Ri(t.app)?Promise.reject($r(t)):qU($t(t),$c.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&iN(t),i})}function GU(t,e,n,i){return $t(t).onIdTokenChanged(e,n,i)}function $U(t,e,n){return $t(t).beforeAuthStateChanged(e,n)}function hb(t,e,n,i){return $t(t).onAuthStateChanged(e,n,i)}function op(t){return $t(t).signOut()}const lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lp,"1"),this.storage.removeItem(lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=1e3,WU=10;class oN extends aN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);dU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,WU):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},KU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oN.type="LOCAL";const YU=oN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN extends aN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lN.type="SESSION";const cN=lN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Qp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(l).map(async f=>f(n.origin,o)),h=await QU(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((u,h)=>{const f=db("",20);r.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(y){const _=y;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(p),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function ZU(t){ir().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function JU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function e3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function t3(){return uN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="firebaseLocalStorageDb",n3=1,cp="firebaseLocalStorage",dN="fbase_key";class Ed{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xp(t,e){return t.transaction([cp],e?"readwrite":"readonly").objectStore(cp)}function i3(){const t=indexedDB.deleteDatabase(hN);return new Ed(t).toPromise()}function O_(){const t=indexedDB.open(hN,n3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(cp,{keyPath:dN})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(cp)?e(i):(i.close(),await i3(),e(await O_()))})})}async function lx(t,e,n){const i=Xp(t,!0).put({[dN]:e,value:n});return new Ed(i).toPromise()}async function s3(t,e){const n=Xp(t,!1).get(e),i=await new Ed(n).toPromise();return i===void 0?null:i.value}function cx(t,e){const n=Xp(t,!0).delete(e);return new Ed(n).toPromise()}const r3=800,a3=3;class fN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await O_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>a3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qp._getInstance(t3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await JU(),!this.activeServiceWorker)return;this.sender=new XU(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||e3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await O_();return await lx(e,lp,"1"),await cx(e,lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>lx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>s3(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Xp(r,!1).getAll();return new Ed(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),r3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fN.type="LOCAL";const o3=fN;new vd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t,e){return e?zr(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb extends cb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function c3(t){return nN(t.auth,new fb(t),t.bypassAuthState)}function u3(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),zU(n,new fb(t),t.bypassAuthState)}async function h3(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),BU(n,new fb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c3;case"linkViaPopup":case"linkViaRedirect":return h3;case"reauthViaPopup":case"reauthViaRedirect":return u3;default:Os(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=new vd(2e3,1e4);class fc extends mN{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,fc.currentPopupAction&&fc.currentPopupAction.cancel(),fc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Jr(this.filter.length===1,"Popup operations only handle one event");const e=db();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,d3.get())};e()}}fc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="pendingRedirect",Lm=new Map;class m3 extends mN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Lm.get(this.auth._key());if(!e){try{const i=await p3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Lm.set(this.auth._key(),e)}return this.bypassAuthState||Lm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p3(t,e){const n=v3(e),i=y3(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function g3(t,e){Lm.set(t._key(),e)}function y3(t){return zr(t._redirectPersistence)}function v3(t){return km(f3,t.config.apiKey,t.name)}async function _3(t,e,n=!1){if(Ri(t.app))return Promise.reject($r(t));const i=oo(t),r=l3(i,e),l=await new m3(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=10*60*1e3;class E3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!pN(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b3&&this.cachedEventUids.clear(),this.cachedEventUids.has(ux(e))}saveEventToCache(e){this.cachedEventUids.add(ux(e)),this.lastProcessedEventTime=Date.now()}}function ux(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function w3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T3(t,e={}){return la(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A3=/^https?/;async function x3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T3(t);for(const n of e)try{if(R3(n))return}catch{}Os(t,"unauthorized-domain")}function R3(t){const e=M_(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!A3.test(n))return!1;if(S3.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=new vd(3e4,6e4);function hx(){const t=ir().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function I3(t){return new Promise((e,n)=>{var i,r,o;function l(){hx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hx(),n(nr(t,"network-request-failed"))},timeout:C3.get()})}if(!((r=(i=ir().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=ir().gapi)===null||o===void 0)&&o.load)l();else{const u=EU("iframefcb");return ir()[u]=()=>{gapi.load?l():n(nr(t,"network-request-failed"))},XI(`${bU()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Vm=null,e})}let Vm=null;function N3(t){return Vm=Vm||I3(t),Vm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=new vd(5e3,15e3),M3="__/auth/iframe",P3="emulator/auth/iframe",O3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L3(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ab(e,P3):`https://${t.config.authDomain}/${M3}`,i={apiKey:e.apiKey,appName:t.name,v:ao},r=k3.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Gc(i).slice(1)}`}async function V3(t){const e=await N3(t),n=ir().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:L3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O3,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=nr(t,"network-request-failed"),u=ir().setTimeout(()=>{o(l)},D3.get());function h(){ir().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U3=500,F3=600,B3="_blank",z3="http://localhost";class dx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q3(t,e,n,i=U3,r=F3){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h=Object.assign(Object.assign({},j3),{width:i.toString(),height:r.toString(),top:o,left:l}),f=di().toLowerCase();n&&(u=HI(f)?B3:n),zI(f)&&(e=e||z3,h.scrollbars="yes");const p=Object.entries(h).reduce((_,[E,S])=>`${_}${E}=${S},`,"");if(hU(f)&&u!=="_self")return H3(e||"",u),new dx(null);const y=window.open(e||"",u,p);Pe(y,t,"popup-blocked");try{y.focus()}catch{}return new dx(y)}function H3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="__/auth/handler",$3="emulator/auth/handler",K3=encodeURIComponent("fac");async function fx(t,e,n,i,r,o){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ao,eventId:r};if(e instanceof eN){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",x_(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))l[p]=y}if(e instanceof bd){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await t._getAppCheckToken(),f=h?`#${K3}=${encodeURIComponent(h)}`:"";return`${W3(t)}?${Gc(u).slice(1)}${f}`}function W3({config:t}){return t.emulator?ab(t,$3):`https://${t.authDomain}/${G3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="webStorageSupport";class Y3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cN,this._completeRedirectFn=_3,this._overrideRedirectResult=g3}async _openPopup(e,n,i,r){var o;Jr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await fx(e,n,i,M_(),r);return q3(e,l,db())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await fx(e,n,i,M_(),r);return ZU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Jr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await V3(e),i=new E3(e);return n.register("authEvent",r=>(Pe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bv,{type:Bv},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Bv];l!==void 0&&n(!!l),Os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=x3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YI()||qI()||lb()}}const Q3=Y3;var mx="@firebase/auth",px="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J3(t){gs(new Yi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;Pe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QI(t)},f=new yU(i,r,o,h);return RU(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),gs(new Yi("auth-internal",e=>{const n=oo(e.getProvider("auth").getImmediate());return(i=>new X3(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(mx,px,Z3(t)),ui(mx,px,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=5*60,t6=SI("authIdTokenMaxAge")||e6;let gx=null;const n6=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>t6)return;const r=n==null?void 0:n.token;gx!==r&&(gx=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function gN(t=yd()){const e=aa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xU(t,{popupRedirectResolver:Q3,persistence:[o3,YU,cN]}),i=SI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=n6(o.toString());$U(n,l,()=>l(n.currentUser)),GU(n,u=>l(u))}}const r=wI("auth");return r&&CU(n,`http://${r}`),n}function i6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=nr("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",i6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J3("Browser");var yx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ga,yN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,C){function M(){}M.prototype=C.prototype,L.D=C.prototype,L.prototype=new M,L.prototype.constructor=L,L.C=function(k,j,B){for(var V=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)V[ve-2]=arguments[ve];return C.prototype[j].apply(k,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(L,C,M){M||(M=0);var k=Array(16);if(typeof C=="string")for(var j=0;16>j;++j)k[j]=C.charCodeAt(M++)|C.charCodeAt(M++)<<8|C.charCodeAt(M++)<<16|C.charCodeAt(M++)<<24;else for(j=0;16>j;++j)k[j]=C[M++]|C[M++]<<8|C[M++]<<16|C[M++]<<24;C=L.g[0],M=L.g[1],j=L.g[2];var B=L.g[3],V=C+(B^M&(j^B))+k[0]+3614090360&4294967295;C=M+(V<<7&4294967295|V>>>25),V=B+(j^C&(M^j))+k[1]+3905402710&4294967295,B=C+(V<<12&4294967295|V>>>20),V=j+(M^B&(C^M))+k[2]+606105819&4294967295,j=B+(V<<17&4294967295|V>>>15),V=M+(C^j&(B^C))+k[3]+3250441966&4294967295,M=j+(V<<22&4294967295|V>>>10),V=C+(B^M&(j^B))+k[4]+4118548399&4294967295,C=M+(V<<7&4294967295|V>>>25),V=B+(j^C&(M^j))+k[5]+1200080426&4294967295,B=C+(V<<12&4294967295|V>>>20),V=j+(M^B&(C^M))+k[6]+2821735955&4294967295,j=B+(V<<17&4294967295|V>>>15),V=M+(C^j&(B^C))+k[7]+4249261313&4294967295,M=j+(V<<22&4294967295|V>>>10),V=C+(B^M&(j^B))+k[8]+1770035416&4294967295,C=M+(V<<7&4294967295|V>>>25),V=B+(j^C&(M^j))+k[9]+2336552879&4294967295,B=C+(V<<12&4294967295|V>>>20),V=j+(M^B&(C^M))+k[10]+4294925233&4294967295,j=B+(V<<17&4294967295|V>>>15),V=M+(C^j&(B^C))+k[11]+2304563134&4294967295,M=j+(V<<22&4294967295|V>>>10),V=C+(B^M&(j^B))+k[12]+1804603682&4294967295,C=M+(V<<7&4294967295|V>>>25),V=B+(j^C&(M^j))+k[13]+4254626195&4294967295,B=C+(V<<12&4294967295|V>>>20),V=j+(M^B&(C^M))+k[14]+2792965006&4294967295,j=B+(V<<17&4294967295|V>>>15),V=M+(C^j&(B^C))+k[15]+1236535329&4294967295,M=j+(V<<22&4294967295|V>>>10),V=C+(j^B&(M^j))+k[1]+4129170786&4294967295,C=M+(V<<5&4294967295|V>>>27),V=B+(M^j&(C^M))+k[6]+3225465664&4294967295,B=C+(V<<9&4294967295|V>>>23),V=j+(C^M&(B^C))+k[11]+643717713&4294967295,j=B+(V<<14&4294967295|V>>>18),V=M+(B^C&(j^B))+k[0]+3921069994&4294967295,M=j+(V<<20&4294967295|V>>>12),V=C+(j^B&(M^j))+k[5]+3593408605&4294967295,C=M+(V<<5&4294967295|V>>>27),V=B+(M^j&(C^M))+k[10]+38016083&4294967295,B=C+(V<<9&4294967295|V>>>23),V=j+(C^M&(B^C))+k[15]+3634488961&4294967295,j=B+(V<<14&4294967295|V>>>18),V=M+(B^C&(j^B))+k[4]+3889429448&4294967295,M=j+(V<<20&4294967295|V>>>12),V=C+(j^B&(M^j))+k[9]+568446438&4294967295,C=M+(V<<5&4294967295|V>>>27),V=B+(M^j&(C^M))+k[14]+3275163606&4294967295,B=C+(V<<9&4294967295|V>>>23),V=j+(C^M&(B^C))+k[3]+4107603335&4294967295,j=B+(V<<14&4294967295|V>>>18),V=M+(B^C&(j^B))+k[8]+1163531501&4294967295,M=j+(V<<20&4294967295|V>>>12),V=C+(j^B&(M^j))+k[13]+2850285829&4294967295,C=M+(V<<5&4294967295|V>>>27),V=B+(M^j&(C^M))+k[2]+4243563512&4294967295,B=C+(V<<9&4294967295|V>>>23),V=j+(C^M&(B^C))+k[7]+1735328473&4294967295,j=B+(V<<14&4294967295|V>>>18),V=M+(B^C&(j^B))+k[12]+2368359562&4294967295,M=j+(V<<20&4294967295|V>>>12),V=C+(M^j^B)+k[5]+4294588738&4294967295,C=M+(V<<4&4294967295|V>>>28),V=B+(C^M^j)+k[8]+2272392833&4294967295,B=C+(V<<11&4294967295|V>>>21),V=j+(B^C^M)+k[11]+1839030562&4294967295,j=B+(V<<16&4294967295|V>>>16),V=M+(j^B^C)+k[14]+4259657740&4294967295,M=j+(V<<23&4294967295|V>>>9),V=C+(M^j^B)+k[1]+2763975236&4294967295,C=M+(V<<4&4294967295|V>>>28),V=B+(C^M^j)+k[4]+1272893353&4294967295,B=C+(V<<11&4294967295|V>>>21),V=j+(B^C^M)+k[7]+4139469664&4294967295,j=B+(V<<16&4294967295|V>>>16),V=M+(j^B^C)+k[10]+3200236656&4294967295,M=j+(V<<23&4294967295|V>>>9),V=C+(M^j^B)+k[13]+681279174&4294967295,C=M+(V<<4&4294967295|V>>>28),V=B+(C^M^j)+k[0]+3936430074&4294967295,B=C+(V<<11&4294967295|V>>>21),V=j+(B^C^M)+k[3]+3572445317&4294967295,j=B+(V<<16&4294967295|V>>>16),V=M+(j^B^C)+k[6]+76029189&4294967295,M=j+(V<<23&4294967295|V>>>9),V=C+(M^j^B)+k[9]+3654602809&4294967295,C=M+(V<<4&4294967295|V>>>28),V=B+(C^M^j)+k[12]+3873151461&4294967295,B=C+(V<<11&4294967295|V>>>21),V=j+(B^C^M)+k[15]+530742520&4294967295,j=B+(V<<16&4294967295|V>>>16),V=M+(j^B^C)+k[2]+3299628645&4294967295,M=j+(V<<23&4294967295|V>>>9),V=C+(j^(M|~B))+k[0]+4096336452&4294967295,C=M+(V<<6&4294967295|V>>>26),V=B+(M^(C|~j))+k[7]+1126891415&4294967295,B=C+(V<<10&4294967295|V>>>22),V=j+(C^(B|~M))+k[14]+2878612391&4294967295,j=B+(V<<15&4294967295|V>>>17),V=M+(B^(j|~C))+k[5]+4237533241&4294967295,M=j+(V<<21&4294967295|V>>>11),V=C+(j^(M|~B))+k[12]+1700485571&4294967295,C=M+(V<<6&4294967295|V>>>26),V=B+(M^(C|~j))+k[3]+2399980690&4294967295,B=C+(V<<10&4294967295|V>>>22),V=j+(C^(B|~M))+k[10]+4293915773&4294967295,j=B+(V<<15&4294967295|V>>>17),V=M+(B^(j|~C))+k[1]+2240044497&4294967295,M=j+(V<<21&4294967295|V>>>11),V=C+(j^(M|~B))+k[8]+1873313359&4294967295,C=M+(V<<6&4294967295|V>>>26),V=B+(M^(C|~j))+k[15]+4264355552&4294967295,B=C+(V<<10&4294967295|V>>>22),V=j+(C^(B|~M))+k[6]+2734768916&4294967295,j=B+(V<<15&4294967295|V>>>17),V=M+(B^(j|~C))+k[13]+1309151649&4294967295,M=j+(V<<21&4294967295|V>>>11),V=C+(j^(M|~B))+k[4]+4149444226&4294967295,C=M+(V<<6&4294967295|V>>>26),V=B+(M^(C|~j))+k[11]+3174756917&4294967295,B=C+(V<<10&4294967295|V>>>22),V=j+(C^(B|~M))+k[2]+718787259&4294967295,j=B+(V<<15&4294967295|V>>>17),V=M+(B^(j|~C))+k[9]+3951481745&4294967295,L.g[0]=L.g[0]+C&4294967295,L.g[1]=L.g[1]+(j+(V<<21&4294967295|V>>>11))&4294967295,L.g[2]=L.g[2]+j&4294967295,L.g[3]=L.g[3]+B&4294967295}i.prototype.u=function(L,C){C===void 0&&(C=L.length);for(var M=C-this.blockSize,k=this.B,j=this.h,B=0;B<C;){if(j==0)for(;B<=M;)r(this,L,B),B+=this.blockSize;if(typeof L=="string"){for(;B<C;)if(k[j++]=L.charCodeAt(B++),j==this.blockSize){r(this,k),j=0;break}}else for(;B<C;)if(k[j++]=L[B++],j==this.blockSize){r(this,k),j=0;break}}this.h=j,this.o+=C},i.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var C=1;C<L.length-8;++C)L[C]=0;var M=8*this.o;for(C=L.length-8;C<L.length;++C)L[C]=M&255,M/=256;for(this.u(L),L=Array(16),C=M=0;4>C;++C)for(var k=0;32>k;k+=8)L[M++]=this.g[C]>>>k&255;return L};function o(L,C){var M=u;return Object.prototype.hasOwnProperty.call(M,L)?M[L]:M[L]=C(L)}function l(L,C){this.h=C;for(var M=[],k=!0,j=L.length-1;0<=j;j--){var B=L[j]|0;k&&B==C||(M[j]=B,k=!1)}this.g=M}var u={};function h(L){return-128<=L&&128>L?o(L,function(C){return new l([C|0],0>C?-1:0)}):new l([L|0],0>L?-1:0)}function f(L){if(isNaN(L)||!isFinite(L))return y;if(0>L)return I(f(-L));for(var C=[],M=1,k=0;L>=M;k++)C[k]=L/M|0,M*=4294967296;return new l(C,0)}function p(L,C){if(L.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(L.charAt(0)=="-")return I(p(L.substring(1),C));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=f(Math.pow(C,8)),k=y,j=0;j<L.length;j+=8){var B=Math.min(8,L.length-j),V=parseInt(L.substring(j,j+B),C);8>B?(B=f(Math.pow(C,B)),k=k.j(B).add(f(V))):(k=k.j(M),k=k.add(f(V)))}return k}var y=h(0),_=h(1),E=h(16777216);t=l.prototype,t.m=function(){if(R(this))return-I(this).m();for(var L=0,C=1,M=0;M<this.g.length;M++){var k=this.i(M);L+=(0<=k?k:4294967296+k)*C,C*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(S(this))return"0";if(R(this))return"-"+I(this).toString(L);for(var C=f(Math.pow(L,6)),M=this,k="";;){var j=q(M,C).g;M=P(M,j.j(C));var B=((0<M.g.length?M.g[0]:M.h)>>>0).toString(L);if(M=j,S(M))return B+k;for(;6>B.length;)B="0"+B;k=B+k}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function S(L){if(L.h!=0)return!1;for(var C=0;C<L.g.length;C++)if(L.g[C]!=0)return!1;return!0}function R(L){return L.h==-1}t.l=function(L){return L=P(this,L),R(L)?-1:S(L)?0:1};function I(L){for(var C=L.g.length,M=[],k=0;k<C;k++)M[k]=~L.g[k];return new l(M,~L.h).add(_)}t.abs=function(){return R(this)?I(this):this},t.add=function(L){for(var C=Math.max(this.g.length,L.g.length),M=[],k=0,j=0;j<=C;j++){var B=k+(this.i(j)&65535)+(L.i(j)&65535),V=(B>>>16)+(this.i(j)>>>16)+(L.i(j)>>>16);k=V>>>16,B&=65535,V&=65535,M[j]=V<<16|B}return new l(M,M[M.length-1]&-2147483648?-1:0)};function P(L,C){return L.add(I(C))}t.j=function(L){if(S(this)||S(L))return y;if(R(this))return R(L)?I(this).j(I(L)):I(I(this).j(L));if(R(L))return I(this.j(I(L)));if(0>this.l(E)&&0>L.l(E))return f(this.m()*L.m());for(var C=this.g.length+L.g.length,M=[],k=0;k<2*C;k++)M[k]=0;for(k=0;k<this.g.length;k++)for(var j=0;j<L.g.length;j++){var B=this.i(k)>>>16,V=this.i(k)&65535,ve=L.i(j)>>>16,we=L.i(j)&65535;M[2*k+2*j]+=V*we,F(M,2*k+2*j),M[2*k+2*j+1]+=B*we,F(M,2*k+2*j+1),M[2*k+2*j+1]+=V*ve,F(M,2*k+2*j+1),M[2*k+2*j+2]+=B*ve,F(M,2*k+2*j+2)}for(k=0;k<C;k++)M[k]=M[2*k+1]<<16|M[2*k];for(k=C;k<2*C;k++)M[k]=0;return new l(M,0)};function F(L,C){for(;(L[C]&65535)!=L[C];)L[C+1]+=L[C]>>>16,L[C]&=65535,C++}function O(L,C){this.g=L,this.h=C}function q(L,C){if(S(C))throw Error("division by zero");if(S(L))return new O(y,y);if(R(L))return C=q(I(L),C),new O(I(C.g),I(C.h));if(R(C))return C=q(L,I(C)),new O(I(C.g),C.h);if(30<L.g.length){if(R(L)||R(C))throw Error("slowDivide_ only works with positive integers.");for(var M=_,k=C;0>=k.l(L);)M=G(M),k=G(k);var j=Y(M,1),B=Y(k,1);for(k=Y(k,2),M=Y(M,2);!S(k);){var V=B.add(k);0>=V.l(L)&&(j=j.add(M),B=V),k=Y(k,1),M=Y(M,1)}return C=P(L,j.j(C)),new O(j,C)}for(j=y;0<=L.l(C);){for(M=Math.max(1,Math.floor(L.m()/C.m())),k=Math.ceil(Math.log(M)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),B=f(M),V=B.j(C);R(V)||0<V.l(L);)M-=k,B=f(M),V=B.j(C);S(B)&&(B=_),j=j.add(B),L=P(L,V)}return new O(j,L)}t.A=function(L){return q(this,L).h},t.and=function(L){for(var C=Math.max(this.g.length,L.g.length),M=[],k=0;k<C;k++)M[k]=this.i(k)&L.i(k);return new l(M,this.h&L.h)},t.or=function(L){for(var C=Math.max(this.g.length,L.g.length),M=[],k=0;k<C;k++)M[k]=this.i(k)|L.i(k);return new l(M,this.h|L.h)},t.xor=function(L){for(var C=Math.max(this.g.length,L.g.length),M=[],k=0;k<C;k++)M[k]=this.i(k)^L.i(k);return new l(M,this.h^L.h)};function G(L){for(var C=L.g.length+1,M=[],k=0;k<C;k++)M[k]=L.i(k)<<1|L.i(k-1)>>>31;return new l(M,L.h)}function Y(L,C){var M=C>>5;C%=32;for(var k=L.g.length-M,j=[],B=0;B<k;B++)j[B]=0<C?L.i(B+M)>>>C|L.i(B+M+1)<<32-C:L.i(B+M);return new l(j,L.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yN=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,Ga=l}).apply(typeof yx<"u"?yx:typeof self<"u"?self:typeof window<"u"?window:{});var gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vN,ph,_N,jm,k_,bN,EN,wN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,b,T){return m==Array.prototype||m==Object.prototype||(m[b]=T.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof gm=="object"&&gm];for(var b=0;b<m.length;++b){var T=m[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function r(m,b){if(b)e:{var T=i;m=m.split(".");for(var D=0;D<m.length-1;D++){var $=m[D];if(!($ in T))break e;T=T[$]}m=m[m.length-1],D=T[m],b=b(D),b!=D&&b!=null&&e(T,m,{configurable:!0,writable:!0,value:b})}}function o(m,b){m instanceof String&&(m+="");var T=0,D=!1,$={next:function(){if(!D&&T<m.length){var ee=T++;return{value:b(ee,m[ee]),done:!1}}return D=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}r("Array.prototype.values",function(m){return m||function(){return o(this,function(b,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(m){var b=typeof m;return b=b!="object"?b:m?Array.isArray(m)?"array":b:"null",b=="array"||b=="object"&&typeof m.length=="number"}function f(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function p(m,b,T){return m.call.apply(m.bind,arguments)}function y(m,b,T){if(!m)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,D),m.apply(b,$)}}return function(){return m.apply(b,arguments)}}function _(m,b,T){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,_.apply(null,arguments)}function E(m,b){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),m.apply(this,D)}}function S(m,b){function T(){}T.prototype=b.prototype,m.aa=b.prototype,m.prototype=new T,m.prototype.constructor=m,m.Qb=function(D,$,ee){for(var ce=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)ce[dt-2]=arguments[dt];return b.prototype[$].apply(D,ce)}}function R(m){const b=m.length;if(0<b){const T=Array(b);for(let D=0;D<b;D++)T[D]=m[D];return T}return[]}function I(m,b){for(let T=1;T<arguments.length;T++){const D=arguments[T];if(h(D)){const $=m.length||0,ee=D.length||0;m.length=$+ee;for(let ce=0;ce<ee;ce++)m[$+ce]=D[ce]}else m.push(D)}}class P{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function F(m){return/^[\s\xa0]*$/.test(m)}function O(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function q(m){return q[" "](m),m}q[" "]=function(){};var G=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Y(m,b,T){for(const D in m)b.call(T,m[D],D,m)}function L(m,b){for(const T in m)b.call(void 0,m[T],T,m)}function C(m){const b={};for(const T in m)b[T]=m[T];return b}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,b){let T,D;for(let $=1;$<arguments.length;$++){D=arguments[$];for(T in D)m[T]=D[T];for(let ee=0;ee<M.length;ee++)T=M[ee],Object.prototype.hasOwnProperty.call(D,T)&&(m[T]=D[T])}}function j(m){var b=1;m=m.split(":");const T=[];for(;0<b&&m.length;)T.push(m.shift()),b--;return m.length&&T.push(m.join(":")),T}function B(m){u.setTimeout(()=>{throw m},0)}function V(){var m=be;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class ve{constructor(){this.h=this.g=null}add(b,T){const D=we.get();D.set(b,T),this.h?this.h.next=D:this.g=D,this.h=D}}var we=new P(()=>new J,m=>m.reset());class J{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ue=!1,be=new ve,ie=()=>{const m=u.Promise.resolve(void 0);te=()=>{m.then(ye)}};var ye=()=>{for(var m;m=V();){try{m.h.call(m.g)}catch(T){B(T)}var b=we;b.j(m),100>b.h&&(b.h++,m.next=b.g,b.g=m)}ue=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};u.addEventListener("test",T,b),u.removeEventListener("test",T,b)}catch{}return m}();function ct(m,b){if(de.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var T=this.type=m.type,D=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget){if(G){e:{try{q(b.nodeName);var $=!0;break e}catch{}$=!1}$||(b=null)}}else T=="mouseover"?b=m.fromElement:T=="mouseout"&&(b=m.toElement);this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:rt[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&ct.aa.h.call(this)}}S(ct,de);var rt={2:"touch",3:"pen",4:"mouse"};ct.prototype.h=function(){ct.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Vt="closure_listenable_"+(1e6*Math.random()|0),Ae=0;function Ve(m,b,T,D,$){this.listener=m,this.proxy=null,this.src=b,this.type=T,this.capture=!!D,this.ha=$,this.key=++Ae,this.da=this.fa=!1}function Re(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function je(m){this.src=m,this.g={},this.h=0}je.prototype.add=function(m,b,T,D,$){var ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);var ce=_e(m,b,D,$);return-1<ce?(b=m[ce],T||(b.fa=!1)):(b=new Ve(b,this.src,ee,!!D,$),b.fa=T,m.push(b)),b};function Ee(m,b){var T=b.type;if(T in m.g){var D=m.g[T],$=Array.prototype.indexOf.call(D,b,void 0),ee;(ee=0<=$)&&Array.prototype.splice.call(D,$,1),ee&&(Re(b),m.g[T].length==0&&(delete m.g[T],m.h--))}}function _e(m,b,T,D){for(var $=0;$<m.length;++$){var ee=m[$];if(!ee.da&&ee.listener==b&&ee.capture==!!T&&ee.ha==D)return $}return-1}var ut="closure_lm_"+(1e6*Math.random()|0),jt={};function Nn(m,b,T,D,$){if(Array.isArray(b)){for(var ee=0;ee<b.length;ee++)Nn(m,b[ee],T,D,$);return null}return T=mr(T),m&&m[Vt]?m.K(b,T,f(D)?!!D.capture:!1,$):bt(m,b,T,!1,D,$)}function bt(m,b,T,D,$,ee){if(!b)throw Error("Invalid event type");var ce=f($)?!!$.capture:!!$,dt=Pi(m);if(dt||(m[ut]=dt=new je(m)),T=dt.add(b,T,D,ce,ee),T.proxy)return T;if(D=zn(),T.proxy=D,D.src=m,D.listener=T,m.addEventListener)qe||($=ce),$===void 0&&($=!1),m.addEventListener(b.toString(),D,$);else if(m.attachEvent)m.attachEvent(Tn(b.toString()),D);else if(m.addListener&&m.removeListener)m.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function zn(){function m(T){return b.call(m.src,m.listener,T)}const b=Ei;return m}function gn(m,b,T,D,$){if(Array.isArray(b))for(var ee=0;ee<b.length;ee++)gn(m,b[ee],T,D,$);else D=f(D)?!!D.capture:!!D,T=mr(T),m&&m[Vt]?(m=m.i,b=String(b).toString(),b in m.g&&(ee=m.g[b],T=_e(ee,T,D,$),-1<T&&(Re(ee[T]),Array.prototype.splice.call(ee,T,1),ee.length==0&&(delete m.g[b],m.h--)))):m&&(m=Pi(m))&&(b=m.g[b.toString()],m=-1,b&&(m=_e(b,T,D,$)),(T=-1<m?b[m]:null)&&en(T))}function en(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[Vt])Ee(b.i,m);else{var T=m.type,D=m.proxy;b.removeEventListener?b.removeEventListener(T,D,m.capture):b.detachEvent?b.detachEvent(Tn(T),D):b.addListener&&b.removeListener&&b.removeListener(D),(T=Pi(b))?(Ee(T,m),T.h==0&&(T.src=null,b[ut]=null)):Re(m)}}}function Tn(m){return m in jt?jt[m]:jt[m]="on"+m}function Ei(m,b){if(m.da)m=!0;else{b=new ct(b,this);var T=m.listener,D=m.ha||m.src;m.fa&&en(m),m=T.call(D,b)}return m}function Pi(m){return m=m[ut],m instanceof je?m:null}var js="__closure_events_fn_"+(1e9*Math.random()>>>0);function mr(m){return typeof m=="function"?m:(m[js]||(m[js]=function(b){return m.handleEvent(b)}),m[js])}function Ft(){me.call(this),this.i=new je(this),this.M=this,this.F=null}S(Ft,me),Ft.prototype[Vt]=!0,Ft.prototype.removeEventListener=function(m,b,T,D){gn(this,m,b,T,D)};function Ye(m,b){var T,D=m.F;if(D)for(T=[];D;D=D.F)T.push(D);if(m=m.M,D=b.type||b,typeof b=="string")b=new de(b,m);else if(b instanceof de)b.target=b.target||m;else{var $=b;b=new de(D,m),k(b,$)}if($=!0,T)for(var ee=T.length-1;0<=ee;ee--){var ce=b.g=T[ee];$=sn(ce,D,!0,b)&&$}if(ce=b.g=m,$=sn(ce,D,!0,b)&&$,$=sn(ce,D,!1,b)&&$,T)for(ee=0;ee<T.length;ee++)ce=b.g=T[ee],$=sn(ce,D,!1,b)&&$}Ft.prototype.N=function(){if(Ft.aa.N.call(this),this.i){var m=this.i,b;for(b in m.g){for(var T=m.g[b],D=0;D<T.length;D++)Re(T[D]);delete m.g[b],m.h--}}this.F=null},Ft.prototype.K=function(m,b,T,D){return this.i.add(String(m),b,!1,T,D)},Ft.prototype.L=function(m,b,T,D){return this.i.add(String(m),b,!0,T,D)};function sn(m,b,T,D){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();for(var $=!0,ee=0;ee<b.length;++ee){var ce=b[ee];if(ce&&!ce.da&&ce.capture==T){var dt=ce.listener,An=ce.ha||ce.src;ce.fa&&Ee(m.i,ce),$=dt.call(An,D)!==!1&&$}}return $&&!D.defaultPrevented}function Bt(m,b,T){if(typeof m=="function")T&&(m=_(m,T));else if(m&&typeof m.handleEvent=="function")m=_(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(m,b||0)}function bs(m){m.g=Bt(()=>{m.g=null,m.i&&(m.i=!1,bs(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class wi extends me{constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:bs(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(m){me.call(this),this.h=m,this.g={}}S(Qi,me);var Es=[];function K(m){Y(m.g,function(b,T){this.g.hasOwnProperty(T)&&en(b)},m),m.g={}}Qi.prototype.N=function(){Qi.aa.N.call(this),K(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=u.JSON.stringify,Ie=u.JSON.parse,Ue=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ht(){}ht.prototype.h=null;function Et(m){return m.h||(m.h=m.i())}function Ge(){}var Ke={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fe(){de.call(this,"d")}S(Fe,de);function wt(){de.call(this,"c")}S(wt,de);var Ce={},cn=null;function We(){return cn=cn||new Ft}Ce.La="serverreachability";function Oe(m){de.call(this,Ce.La,m)}S(Oe,de);function et(m){const b=We();Ye(b,new Oe(b))}Ce.STAT_EVENT="statevent";function At(m,b){de.call(this,Ce.STAT_EVENT,m),this.stat=b}S(At,de);function Te(m){const b=We();Ye(b,new At(b,m))}Ce.Ma="timingevent";function Ze(m,b){de.call(this,Ce.Ma,m),this.size=b}S(Ze,de);function at(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},b)}function zt(){this.g=!0}zt.prototype.xa=function(){this.g=!1};function Oi(m,b,T,D,$,ee){m.info(function(){if(m.g)if(ee)for(var ce="",dt=ee.split("&"),An=0;An<dt.length;An++){var ft=dt[An].split("=");if(1<ft.length){var Mn=ft[0];ft=ft[1];var xn=Mn.split("_");ce=2<=xn.length&&xn[1]=="type"?ce+(Mn+"="+ft+"&"):ce+(Mn+"=redacted&")}}else ce=null;else ce=ee;return"XMLHTTP REQ ("+D+") [attempt "+$+"]: "+b+`
`+T+`
`+ce})}function Xi(m,b,T,D,$,ee,ce){m.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+$+"]: "+b+`
`+T+`
`+ee+" "+ce})}function Sn(m,b,T,D){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+ki(m,T)+(D?" "+D:"")})}function Zi(m,b){m.info(function(){return"TIMEOUT: "+b})}zt.prototype.info=function(){};function ki(m,b){if(!m.g)return b;if(!b)return null;try{var T=JSON.parse(b);if(T){for(m=0;m<T.length;m++)if(Array.isArray(T[m])){var D=T[m];if(!(2>D.length)){var $=D[1];if(Array.isArray($)&&!(1>$.length)){var ee=$[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var ce=1;ce<$.length;ce++)$[ce]=""}}}}return le(T)}catch{return b}}var ca={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Us;function Fs(){}S(Fs,ht),Fs.prototype.g=function(){return new XMLHttpRequest},Fs.prototype.i=function(){return{}},Us=new Fs;function fi(m,b,T,D){this.j=m,this.i=b,this.l=T,this.R=D||1,this.U=new Qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var ru={},_l={};function ws(m,b,T){m.L=1,m.v=vo(Li(b)),m.m=T,m.P=!0,gr(m,null)}function gr(m,b){m.F=Date.now(),mo(m),m.A=Li(m.v);var T=m.A,D=m.R;Array.isArray(D)||(D=[String(D)]),hu(T.i,"t",D),m.C=0,T=m.j.J,m.h=new un,m.g=uf(m.j,T?b:null,!m.m),0<m.O&&(m.M=new wi(_(m.Y,m,m.g),m.O)),b=m.U,T=m.g,D=m.ca;var $="readystatechange";Array.isArray($)||($&&(Es[0]=$.toString()),$=Es);for(var ee=0;ee<$.length;ee++){var ce=Nn(T,$[ee],D||b.handleEvent,!1,b.h||b);if(!ce)break;b.g[ce.key]=ce}b=m.H?C(m.H):{},m.m?(m.u||(m.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,b)):(m.u="GET",m.g.ea(m.A,m.u,null,b)),et(),Oi(m.i,m.u,m.A,m.l,m.R,m.m)}fi.prototype.ca=function(m){m=m.target;const b=this.M;b&&ns(m)==3?b.j():this.Y(m)},fi.prototype.Y=function(m){try{if(m==this.g)e:{const xn=ns(this.g);var b=this.g.Ba();const Sr=this.g.Z();if(!(3>xn)&&(xn!=3||this.g&&(this.h.h||this.g.oa()||tf(this.g)))){this.J||xn!=4||b==7||(b==8||0>=Sr?et(3):et(2)),ua(this);var T=this.g.Z();this.X=T;t:if(Wd(this)){var D=tf(this.g);m="";var $=D.length,ee=ns(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),Bs(this);var ce="";break t}this.h.i=new u.TextDecoder}for(b=0;b<$;b++)this.h.h=!0,m+=this.h.i.decode(D[b],{stream:!(ee&&b==$-1)});D.length=0,this.h.g+=m,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=T==200,Xi(this.i,this.u,this.A,this.l,this.R,xn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,An=this.g;if((dt=An.g?An.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(dt)){var ft=dt;break t}}ft=null}if(T=ft)Sn(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,po(this,T);else{this.o=!1,this.s=3,Te(12),qn(this),Bs(this);break e}}if(this.P){T=!0;let Hn;for(;!this.J&&this.C<ce.length;)if(Hn=Yd(this,ce),Hn==_l){xn==4&&(this.s=4,Te(14),T=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==ru){this.s=4,Te(15),Sn(this.i,this.l,ce,"[Invalid Chunk]"),T=!1;break}else Sn(this.i,this.l,Hn,null),po(this,Hn);if(Wd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xn!=4||ce.length!=0||this.h.h||(this.s=1,Te(16),T=!1),this.o=this.o&&T,!T)Sn(this.i,this.l,ce,"[Invalid Chunked Response]"),qn(this),Bs(this);else if(0<ce.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),xo(Mn),Mn.M=!0,Te(11))}}else Sn(this.i,this.l,ce,null),po(this,ce);xn==4&&qn(this),this.o&&!this.J&&(xn==4?of(this.j,this):(this.o=!1,mo(this)))}else Lg(this.g),T==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),qn(this),Bs(this)}}}catch{}finally{}};function Wd(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Yd(m,b){var T=m.C,D=b.indexOf(`
`,T);return D==-1?_l:(T=Number(b.substring(T,D)),isNaN(T)?ru:(D+=1,D+T>b.length?_l:(b=b.slice(D,D+T),m.C=D+T,b)))}fi.prototype.cancel=function(){this.J=!0,qn(this)};function mo(m){m.S=Date.now()+m.I,Qd(m,m.I)}function Qd(m,b){if(m.B!=null)throw Error("WatchDog timer not null");m.B=at(_(m.ba,m),b)}function ua(m){m.B&&(u.clearTimeout(m.B),m.B=null)}fi.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Zi(this.i,this.A),this.L!=2&&(et(),Te(17)),qn(this),this.s=2,Bs(this)):Qd(this,this.S-m)};function Bs(m){m.j.G==0||m.J||of(m.j,m)}function qn(m){ua(m);var b=m.M;b&&typeof b.ma=="function"&&b.ma(),m.M=null,K(m.U),m.g&&(b=m.g,m.g=null,b.abort(),b.ma())}function po(m,b){try{var T=m.j;if(T.G!=0&&(T.g==m||au(T.h,m))){if(!m.K&&au(T.h,m)&&T.G==3){try{var D=T.Da.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var $=D;if($[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<m.F)Dl(T),Il(T);else break e;gu(T),Te(18)}}else T.za=$[1],0<T.za-T.T&&37500>$[2]&&T.F&&T.v==0&&!T.C&&(T.C=at(_(T.Za,T),6e3));if(1>=El(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Tr(T,11)}else if((m.K||T.g==m)&&Dl(T),!F(b))for($=T.Da.g.parse(b),b=0;b<$.length;b++){let ft=$[b];if(T.T=ft[0],ft=ft[1],T.G==2)if(ft[0]=="c"){T.K=ft[1],T.ia=ft[2];const Mn=ft[3];Mn!=null&&(T.la=Mn,T.j.info("VER="+T.la));const xn=ft[4];xn!=null&&(T.Aa=xn,T.j.info("SVER="+T.Aa));const Sr=ft[5];Sr!=null&&typeof Sr=="number"&&0<Sr&&(D=1.5*Sr,T.L=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Hn=m.g;if(Hn){const Ws=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var ee=D.h;ee.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(wl(ee,ee.h),ee.h=null))}if(D.D){const vu=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;vu&&(D.ya=vu,Dt(D.I,D.D,vu))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-m.F,T.j.info("Handshake RTT: "+T.R+"ms")),D=T;var ce=m;if(D.qa=cf(D,D.J?D.ia:null,D.W),ce.K){mi(D.h,ce);var dt=ce,An=D.L;An&&(dt.I=An),dt.B&&(ua(dt),mo(dt)),D.g=ce}else rf(D);0<T.i.length&&Nl(T)}else ft[0]!="stop"&&ft[0]!="close"||Tr(T,7);else T.G==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?Tr(T,7):mu(T):ft[0]!="noop"&&T.l&&T.l.ta(ft),T.v=0)}}et(4)}catch{}}var Xd=class{constructor(m,b){this.g=m,this.map=b}};function yr(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function El(m){return m.h?1:m.g?m.g.size:0}function au(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function wl(m,b){m.g?m.g.add(b):m.h=b}function mi(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}yr.prototype.cancel=function(){if(this.i=ou(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ou(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const T of m.g.values())b=b.concat(T.D);return b}return R(m.i)}function Mg(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var b=[],T=m.length,D=0;D<T;D++)b.push(m[D]);return b}b=[],T=0;for(D in m)b[T++]=m[D];return b}function Tl(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var b=[];m=m.length;for(var T=0;T<m;T++)b.push(T);return b}b=[],T=0;for(const D in m)b[T++]=D;return b}}}function lu(m,b){if(m.forEach&&typeof m.forEach=="function")m.forEach(b,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,b,void 0);else for(var T=Tl(m),D=Mg(m),$=D.length,ee=0;ee<$;ee++)b.call(void 0,D[ee],T&&T[ee],m)}var go=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pg(m,b){if(m){m=m.split("&");for(var T=0;T<m.length;T++){var D=m[T].indexOf("="),$=null;if(0<=D){var ee=m[T].substring(0,D);$=m[T].substring(D+1)}else ee=m[T];b(ee,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function yn(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof yn){this.h=m.h,yo(this,m.j),this.o=m.o,this.g=m.g,ha(this,m.s),this.l=m.l;var b=m.i,T=new _r;T.i=b.i,b.g&&(T.g=new Map(b.g),T.h=b.h),vr(this,T),this.m=m.m}else m&&(b=String(m).match(go))?(this.h=!1,yo(this,b[1]||"",!0),this.o=Ji(b[2]||""),this.g=Ji(b[3]||"",!0),ha(this,b[4]),this.l=Ji(b[5]||"",!0),vr(this,b[6]||"",!0),this.m=Ji(b[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}yn.prototype.toString=function(){var m=[],b=this.j;b&&m.push(_o(b,cu,!0),":");var T=this.g;return(T||b=="file")&&(m.push("//"),(b=this.o)&&m.push(_o(b,cu,!0),"@"),m.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&m.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(_o(T,T.charAt(0)=="/"?Og:uu,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",_o(T,Sl)),m.join("")};function Li(m){return new yn(m)}function yo(m,b,T){m.j=T?Ji(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function ha(m,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);m.s=b}else m.s=null}function vr(m,b,T){b instanceof _r?(m.i=b,Jd(m.i,m.h)):(T||(b=_o(b,kg)),m.i=new _r(b,m.h))}function Dt(m,b,T){m.i.set(b,T)}function vo(m){return Dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ji(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function _o(m,b,T){return typeof m=="string"?(m=encodeURI(m).replace(b,Zd),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Zd(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var cu=/[#\/\?@]/g,uu=/[#\?:]/g,Og=/[#\?]/g,kg=/[#\?@]/g,Sl=/#/g;function _r(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function es(m){m.g||(m.g=new Map,m.h=0,m.i&&Pg(m.i,function(b,T){m.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}t=_r.prototype,t.add=function(m,b){es(this),this.i=null,m=zs(this,m);var T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(b),this.h+=1,this};function br(m,b){es(m),b=zs(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Er(m,b){return es(m),b=zs(m,b),m.g.has(b)}t.forEach=function(m,b){es(this),this.g.forEach(function(T,D){T.forEach(function($){m.call(b,$,D,this)},this)},this)},t.na=function(){es(this);const m=Array.from(this.g.values()),b=Array.from(this.g.keys()),T=[];for(let D=0;D<b.length;D++){const $=m[D];for(let ee=0;ee<$.length;ee++)T.push(b[D])}return T},t.V=function(m){es(this);let b=[];if(typeof m=="string")Er(this,m)&&(b=b.concat(this.g.get(zs(this,m))));else{m=Array.from(this.g.values());for(let T=0;T<m.length;T++)b=b.concat(m[T])}return b},t.set=function(m,b){return es(this),this.i=null,m=zs(this,m),Er(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},t.get=function(m,b){return m?(m=this.V(m),0<m.length?String(m[0]):b):b};function hu(m,b,T){br(m,b),0<T.length&&(m.i=null,m.g.set(zs(m,b),R(T)),m.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(var T=0;T<b.length;T++){var D=b[T];const ee=encodeURIComponent(String(D)),ce=this.V(D);for(D=0;D<ce.length;D++){var $=ee;ce[D]!==""&&($+="="+encodeURIComponent(String(ce[D]))),m.push($)}}return this.i=m.join("&")};function zs(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function Jd(m,b){b&&!m.j&&(es(m),m.i=null,m.g.forEach(function(T,D){var $=D.toLowerCase();D!=$&&(br(this,D),hu(this,$,T))},m)),m.j=b}function bo(m,b){const T=new zt;if(u.Image){const D=new Image;D.onload=E(ts,T,"TestLoadImage: loaded",!0,b,D),D.onerror=E(ts,T,"TestLoadImage: error",!1,b,D),D.onabort=E(ts,T,"TestLoadImage: abort",!1,b,D),D.ontimeout=E(ts,T,"TestLoadImage: timeout",!1,b,D),u.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=m}else b(!1)}function Ts(m,b){const T=new zt,D=new AbortController,$=setTimeout(()=>{D.abort(),ts(T,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:D.signal}).then(ee=>{clearTimeout($),ee.ok?ts(T,"TestPingServer: ok",!0,b):ts(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout($),ts(T,"TestPingServer: error",!1,b)})}function ts(m,b,T,D,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),D(T)}catch{}}function Eo(){this.g=new Ue}function qs(m,b,T){const D=T||"";try{lu(m,function($,ee){let ce=$;f($)&&(ce=le($)),b.push(D+ee+"="+encodeURIComponent(ce))})}catch($){throw b.push(D+"type="+encodeURIComponent("_badmap")),$}}function da(m){this.l=m.Ub||null,this.j=m.eb||!1}S(da,ht),da.prototype.g=function(){return new wr(this.l,this.j)},da.prototype.i=function(m){return function(){return m}}({});function wr(m,b){Ft.call(this),this.D=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(wr,Ft),t=wr.prototype,t.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=b,this.readyState=1,Gs(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(b.body=m),(this.D||u).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hs(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;du(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function du(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Hs(this):Gs(this),this.readyState==3&&du(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Hs(this))},t.Qa=function(m){this.g&&(this.response=m,Hs(this))},t.ga=function(){this.g&&Hs(this)};function Hs(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Gs(m)}t.setRequestHeader=function(m,b){this.u.append(m,b)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=b.next();return m.join(`\r
`)};function Gs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function fu(m){let b="";return Y(m,function(T,D){b+=D,b+=":",b+=T,b+=`\r
`}),b}function Dn(m,b,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=fu(T),typeof m=="string"?T!=null&&encodeURIComponent(String(T)):Dt(m,b,T))}function xt(m){Ft.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(xt,Ft);var Al=/^https?$/i,wo=["POST","PUT"];t=xt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,b,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Us.g(),this.v=this.o?Et(this.o):Et(Us),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(ee){ef(this,ee);return}if(m=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var $ in D)T.set($,D[$]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ee of D.keys())T.set(ee,D.get(ee));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),$=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(wo,b,void 0))||D||$||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ce]of T)this.g.setRequestHeader(ee,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{To(this),this.u=!0,this.g.send(m),this.u=!1}catch(ee){ef(this,ee)}};function ef(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.m=5,xl(m),$s(m)}function xl(m){m.A||(m.A=!0,Ye(m,"complete"),Ye(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ye(this,"complete"),Ye(this,"abort"),$s(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$s(this,!0)),xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rl(this):this.bb())},t.bb=function(){Rl(this)};function Rl(m){if(m.h&&typeof l<"u"&&(!m.v[1]||ns(m)!=4||m.Z()!=2)){if(m.u&&ns(m)==4)Bt(m.Ea,0,m);else if(Ye(m,"readystatechange"),ns(m)==4){m.h=!1;try{const ce=m.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var D;if(D=ce===0){var $=String(m.D).match(go)[1]||null;!$&&u.self&&u.self.location&&($=u.self.location.protocol.slice(0,-1)),D=!Al.test($?$.toLowerCase():"")}T=D}if(T)Ye(m,"complete"),Ye(m,"success");else{m.m=6;try{var ee=2<ns(m)?m.g.statusText:""}catch{ee=""}m.l=ee+" ["+m.Z()+"]",xl(m)}}finally{$s(m)}}}}function $s(m,b){if(m.g){To(m);const T=m.g,D=m.v[0]?()=>{}:null;m.g=null,m.v=null,b||Ye(m,"ready");try{T.onreadystatechange=D}catch{}}}function To(m){m.I&&(u.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function ns(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<ns(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),Ie(b)}};function tf(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Lg(m){const b={};m=(m.g&&2<=ns(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<m.length;D++){if(F(m[D]))continue;var T=j(m[D]);const $=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=b[$]||[];b[$]=ee,ee.push(T)}L(b,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function So(m,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||b}function Cl(m){this.Aa=0,this.i=[],this.j=new zt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=So("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=So("baseRetryDelayMs",5e3,m),this.cb=So("retryDelaySeedMs",1e4,m),this.Wa=So("forwardChannelMaxRetries",2,m),this.wa=So("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new yr(m&&m.concurrentRequestLimit),this.Da=new Eo,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Cl.prototype,t.la=8,t.G=1,t.connect=function(m,b,T,D){Te(0),this.W=m,this.H=b||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.I=cf(this,null,this.W),Nl(this)};function mu(m){if(nf(m),m.G==3){var b=m.U++,T=Li(m.I);if(Dt(T,"SID",m.K),Dt(T,"RID",b),Dt(T,"TYPE","terminate"),Ao(m,T),b=new fi(m,m.j,b),b.L=2,b.v=vo(Li(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(b.v.toString(),"")}catch{}!T&&u.Image&&(new Image().src=b.v,T=!0),T||(b.g=uf(b.j,null),b.g.ea(b.v)),b.F=Date.now(),mo(b)}lf(m)}function Il(m){m.g&&(xo(m),m.g.cancel(),m.g=null)}function nf(m){Il(m),m.u&&(u.clearTimeout(m.u),m.u=null),Dl(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Nl(m){if(!bl(m.h)&&!m.s){m.s=!0;var b=m.Ga;te||ie(),ue||(te(),ue=!0),be.add(b,m),m.B=0}}function Vg(m,b){return El(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=b.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=at(_(m.Ga,m,b),yu(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const $=new fi(this,this.j,m);let ee=this.o;if(this.S&&(ee?(ee=C(ee),k(ee,this.S)):ee=this.S),this.m!==null||this.O||($.H=ee,ee=null),this.P)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,4096<b){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=sf(this,$,b),T=Li(this.I),Dt(T,"RID",m),Dt(T,"CVER",22),this.D&&Dt(T,"X-HTTP-Session-Id",this.D),Ao(this,T),ee&&(this.O?b="headers="+encodeURIComponent(String(fu(ee)))+"&"+b:this.m&&Dn(T,this.m,ee)),wl(this.h,$),this.Ua&&Dt(T,"TYPE","init"),this.P?(Dt(T,"$req",b),Dt(T,"SID","null"),$.T=!0,ws($,T,null)):ws($,T,b),this.G=2}}else this.G==3&&(m?pu(this,m):this.i.length==0||bl(this.h)||pu(this))};function pu(m,b){var T;b?T=b.l:T=m.U++;const D=Li(m.I);Dt(D,"SID",m.K),Dt(D,"RID",T),Dt(D,"AID",m.T),Ao(m,D),m.m&&m.o&&Dn(D,m.m,m.o),T=new fi(m,m.j,T,m.B+1),m.m===null&&(T.H=m.o),b&&(m.i=b.D.concat(m.i)),b=sf(m,T,1e3),T.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),wl(m.h,T),ws(T,D,b)}function Ao(m,b){m.H&&Y(m.H,function(T,D){Dt(b,D,T)}),m.l&&lu({},function(T,D){Dt(b,D,T)})}function sf(m,b,T){T=Math.min(m.i.length,T);var D=m.l?_(m.l.Na,m.l,m):null;e:{var $=m.i;let ee=-1;for(;;){const ce=["count="+T];ee==-1?0<T?(ee=$[0].g,ce.push("ofs="+ee)):ee=0:ce.push("ofs="+ee);let dt=!0;for(let An=0;An<T;An++){let ft=$[An].g;const Mn=$[An].map;if(ft-=ee,0>ft)ee=Math.max(0,$[An].g-100),dt=!1;else try{qs(Mn,ce,"req"+ft+"_")}catch{D&&D(Mn)}}if(dt){D=ce.join("&");break e}}}return m=m.i.splice(0,T),b.D=m,D}function rf(m){if(!m.g&&!m.u){m.Y=1;var b=m.Fa;te||ie(),ue||(te(),ue=!0),be.add(b,m),m.v=0}}function gu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=at(_(m.Fa,m),yu(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,af(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=at(_(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Il(this),af(this))};function xo(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function af(m){m.g=new fi(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var b=Li(m.qa);Dt(b,"RID","rpc"),Dt(b,"SID",m.K),Dt(b,"AID",m.T),Dt(b,"CI",m.F?"0":"1"),!m.F&&m.ja&&Dt(b,"TO",m.ja),Dt(b,"TYPE","xmlhttp"),Ao(m,b),m.m&&m.o&&Dn(b,m.m,m.o),m.L&&(m.g.I=m.L);var T=m.g;m=m.ia,T.L=1,T.v=vo(Li(b)),T.m=null,T.P=!0,gr(T,m)}t.Za=function(){this.C!=null&&(this.C=null,Il(this),gu(this),Te(19))};function Dl(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function of(m,b){var T=null;if(m.g==b){Dl(m),xo(m),m.g=null;var D=2}else if(au(m.h,b))T=b.D,mi(m.h,b),D=1;else return;if(m.G!=0){if(b.o)if(D==1){T=b.m?b.m.length:0,b=Date.now()-b.F;var $=m.B;D=We(),Ye(D,new Ze(D,T)),Nl(m)}else rf(m);else if($=b.s,$==3||$==0&&0<b.X||!(D==1&&Vg(m,b)||D==2&&gu(m)))switch(T&&0<T.length&&(b=m.h,b.i=b.i.concat(T)),$){case 1:Tr(m,5);break;case 4:Tr(m,10);break;case 3:Tr(m,6);break;default:Tr(m,2)}}}function yu(m,b){let T=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(T*=2),T*b}function Tr(m,b){if(m.j.info("Error code "+b),b==2){var T=_(m.fb,m),D=m.Xa;const $=!D;D=new yn(D||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||yo(D,"https"),vo(D),$?bo(D.toString(),T):Ts(D.toString(),T)}else Te(2);m.G=0,m.l&&m.l.sa(b),lf(m),nf(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function lf(m){if(m.G=0,m.ka=[],m.l){const b=ou(m.h);(b.length!=0||m.i.length!=0)&&(I(m.ka,b),I(m.ka,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.ra()}}function cf(m,b,T){var D=T instanceof yn?Li(T):new yn(T);if(D.g!="")b&&(D.g=b+"."+D.g),ha(D,D.s);else{var $=u.location;D=$.protocol,b=b?b+"."+$.hostname:$.hostname,$=+$.port;var ee=new yn(null);D&&yo(ee,D),b&&(ee.g=b),$&&ha(ee,$),T&&(ee.l=T),D=ee}return T=m.D,b=m.ya,T&&b&&Dt(D,T,b),Dt(D,"VER",m.la),Ao(m,D),D}function uf(m,b,T){if(b&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Ca&&!m.pa?new xt(new da({eb:T})):new xt(m.pa),b.Ha(m.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hf(){}t=hf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ml(){}Ml.prototype.g=function(m,b){return new pi(m,b)};function pi(m,b){Ft.call(this),this.g=new Cl(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(m?m["X-WebChannel-Client-Profile"]=b.va:m={"X-WebChannel-Client-Profile":b.va}),this.g.S=m,(m=b&&b.Sb)&&!F(m)&&(this.g.m=m),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!F(b)&&(this.g.D=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new Ks(this)}S(pi,Ft),pi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pi.prototype.close=function(){mu(this.g)},pi.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.u&&(T={},T.__data__=le(m),m=T);b.i.push(new Xd(b.Ya++,m)),b.G==3&&Nl(b)},pi.prototype.N=function(){this.g.l=null,delete this.j,mu(this.g),delete this.g,pi.aa.N.call(this)};function df(m){Fe.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const T in b){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}S(df,Fe);function ff(){wt.call(this),this.status=1}S(ff,wt);function Ks(m){this.g=m}S(Ks,hf),Ks.prototype.ua=function(){Ye(this.g,"a")},Ks.prototype.ta=function(m){Ye(this.g,new df(m))},Ks.prototype.sa=function(m){Ye(this.g,new ff)},Ks.prototype.ra=function(){Ye(this.g,"b")},Ml.prototype.createWebChannel=Ml.prototype.g,pi.prototype.send=pi.prototype.o,pi.prototype.open=pi.prototype.m,pi.prototype.close=pi.prototype.close,wN=function(){return new Ml},EN=function(){return We()},bN=Ce,k_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ca.NO_ERROR=0,ca.TIMEOUT=8,ca.HTTP_ERROR=6,jm=ca,pr.COMPLETE="complete",_N=pr,Ge.EventType=Ke,Ke.OPEN="a",Ke.CLOSE="b",Ke.ERROR="c",Ke.MESSAGE="d",Ft.prototype.listen=Ft.prototype.K,ph=Ge,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,vN=xt}).apply(typeof gm<"u"?gm:typeof self<"u"?self:typeof window<"u"?window:{});const vx="@firebase/firestore",_x="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ii=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new gd("@firebase/firestore");function cc(){return il.logLevel}function pe(t,...e){if(il.logLevel<=st.DEBUG){const n=e.map(mb);il.debug(`Firestore (${Kc}): ${t}`,...n)}}function ea(t,...e){if(il.logLevel<=st.ERROR){const n=e.map(mb);il.error(`Firestore (${Kc}): ${t}`,...n)}}function Nc(t,...e){if(il.logLevel<=st.WARN){const n=e.map(mb);il.warn(`Firestore (${Kc}): ${t}`,...n)}}function mb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t="Unexpected state"){const e=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: `+t;throw ea(e),new Error(e)}function Ct(t,e){t||Le()}function He(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends _s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ii.UNAUTHENTICATED))}shutdown(){}}class r6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a6{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ct(this.o===void 0);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Kr,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Kr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ct(typeof i.accessToken=="string"),new TN(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ct(e===null||typeof e=="string"),new ii(e)}}class o6{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=ii.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class l6{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new o6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c6{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ri(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Ct(this.o===void 0);const i=o=>{o.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new bx(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ct(typeof n.token=="string"),this.R=n.token,new bx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=u6(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Xe(t,e){return t<e?-1:t>e?1:0}function L_(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return Xe(i,r);{const o=SN(),l=h6(o.encode(Ex(t,n)),o.encode(Ex(e,n)));return l!==0?l:Xe(i,r)}}n+=i>65535?2:1}return Xe(t.length,e.length)}function Ex(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function h6(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Xe(t[n],e[n]);return Xe(t.length,e.length)}function Dc(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=-62135596800,Tx=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Tx);return new Ht(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wx)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tx}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-wx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Ht(0,0))}static max(){return new ze(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="__name__";class er{constructor(e,n,i){n===void 0?n=0:n>e.length&&Le(),i===void 0?i=e.length-n:i>e.length-n&&Le(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return er.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof er?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=er.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Xe(e.length,n.length)}static compareSegments(e,n){const i=er.isNumericId(e),r=er.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?er.extractNumericId(e).compare(er.extractNumericId(n)):L_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ga.fromString(e.substring(4,e.length-2))}}class Qt extends er{construct(e,n,i){return new Qt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Qt(n)}static emptyPath(){return new Qt([])}}const d6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends er{construct(e,n,i){return new Qn(e,n,i)}static isValidIdentifier(e){return d6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sx}static keyField(){return new Qn([Sx])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new fe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(l=!l,r++):u!=="."||l?(i+=u,r++):(o(),r++)}if(o(),l)throw new fe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(n)}static emptyPath(){return new Qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Qt.fromString(e))}static fromName(e){return new xe(Qt.fromString(e).popFirst(5))}static empty(){return new xe(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=-1;function f6(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ze.fromTimestamp(i===1e9?new Ht(n+1,0):new Ht(n,i));return new Ya(r,xe.empty(),e)}function m6(t){return new Ya(t.readTime,t.key,$h)}class Ya{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ya(ze.min(),xe.empty(),$h)}static max(){return new Ya(ze.max(),xe.empty(),$h)}}function p6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==g6)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,i)=>{n(e)})}static reject(e){return new oe((n,i)=>{i(e)})}static waitFor(e){return new oe((n,i)=>{let r=0,o=0,l=!1;e.forEach(u=>{++r,u.next(()=>{++o,l&&o===r&&n()},h=>i(h))}),l=!0,o===r&&n()})}static or(e){let n=oe.resolve(!1);for(const i of e)n=n.next(r=>r?oe.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new oe((i,r)=>{const o=e.length,l=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(p=>{l[f]=p,++u,u===o&&i(l)},p=>r(p))}})}static doWhile(e,n){return new oe((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function v6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Zp.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=-1;function Jp(t){return t==null}function up(t){return t===0&&1/t==-1/0}function _6(t){return typeof t=="number"&&Number.isInteger(t)&&!up(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="";function b6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ax(e)),e=E6(t.get(n),e);return Ax(e)}function E6(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case xN:n+="";break;default:n+=o}}return n}function Ax(t){return t+xN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wn=class V_{constructor(e,n){this.comparator=e,this.root=n||$a.EMPTY}insert(e,n){return new V_(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$a.BLACK,null,null))}remove(e){return new V_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$a.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ym(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ym(this.root,e,this.comparator,!1)}getReverseIterator(){return new ym(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ym(this.root,e,this.comparator,!0)}},ym=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$a=class Ur{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ur.RED,this.left=r??Ur.EMPTY,this.right=o??Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ur(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ur.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Le();const e=this.left.check();if(e!==this.right.check())throw Le();return e+(this.isRed()?0:1)}};$a.EMPTY=null,$a.RED=!0,$a.BLACK=!1;$a.EMPTY=new class{constructor(){this.size=0}get key(){throw Le()}get value(){throw Le()}get color(){throw Le()}get left(){throw Le()}get right(){throw Le()}copy(e,n,i,r,o){return this}insert(e,n,i){return new $a(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rx(this.data.getIterator())}getIteratorFrom(e){return new Rx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new In(this.comparator);return n.data=e,n}}class Rx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new $i([])}unionWith(e){let n=new In(Qn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new $i(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dc(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CN("Invalid base64 string: "+o):o}}(e);return new Xn(n)}static fromUint8Array(e){const n=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const w6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qa(t){if(Ct(!!t),typeof t=="string"){let e=0;const n=w6.exec(t);if(Ct(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:pn(t.seconds),nanos:pn(t.nanos)}}function pn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xa(t){return typeof t=="string"?Xn.fromBase64String(t):Xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="server_timestamp",NN="__type__",DN="__previous_value__",MN="__local_write_time__";function gb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[NN])===null||n===void 0?void 0:n.stringValue)===IN}function eg(t){const e=t.mapValue.fields[DN];return gb(e)?eg(e):e}function Kh(t){const e=Qa(t.mapValue.fields[MN].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n,i,r,o,l,u,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f}}const hp="(default)";class Wh{constructor(e,n){this.projectId=e,this.database=n||hp}static empty(){return new Wh("","")}get isDefaultDatabase(){return this.database===hp}isEqual(e){return e instanceof Wh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="__type__",S6="__max__",vm={mapValue:{}},ON="__vector__",dp="value";function Za(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gb(t)?4:x6(t)?9007199254740991:A6(t)?10:11:Le()}function ur(t,e){if(t===e)return!0;const n=Za(t);if(n!==Za(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kh(t).isEqual(Kh(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Qa(r.timestampValue),u=Qa(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Xa(r.bytesValue).isEqual(Xa(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return pn(r.geoPointValue.latitude)===pn(o.geoPointValue.latitude)&&pn(r.geoPointValue.longitude)===pn(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return pn(r.integerValue)===pn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=pn(r.doubleValue),u=pn(o.doubleValue);return l===u?up(l)===up(u):isNaN(l)&&isNaN(u)}return!1}(t,e);case 9:return Dc(t.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return function(r,o){const l=r.mapValue.fields||{},u=o.mapValue.fields||{};if(xx(l)!==xx(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!ur(l[h],u[h])))return!1;return!0}(t,e);default:return Le()}}function Yh(t,e){return(t.values||[]).find(n=>ur(n,e))!==void 0}function Mc(t,e){if(t===e)return 0;const n=Za(t),i=Za(e);if(n!==i)return Xe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(o,l){const u=pn(o.integerValue||o.doubleValue),h=pn(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Cx(t.timestampValue,e.timestampValue);case 4:return Cx(Kh(t),Kh(e));case 5:return L_(t.stringValue,e.stringValue);case 6:return function(o,l){const u=Xa(o),h=Xa(l);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),h=l.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=Xe(u[f],h[f]);if(p!==0)return p}return Xe(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const u=Xe(pn(o.latitude),pn(l.latitude));return u!==0?u:Xe(pn(o.longitude),pn(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ix(t.arrayValue,e.arrayValue);case 10:return function(o,l){var u,h,f,p;const y=o.fields||{},_=l.fields||{},E=(u=y[dp])===null||u===void 0?void 0:u.arrayValue,S=(h=_[dp])===null||h===void 0?void 0:h.arrayValue,R=Xe(((f=E==null?void 0:E.values)===null||f===void 0?void 0:f.length)||0,((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:Ix(E,S)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===vm.mapValue&&l===vm.mapValue)return 0;if(o===vm.mapValue)return 1;if(l===vm.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=l.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let y=0;y<h.length&&y<p.length;++y){const _=L_(h[y],p[y]);if(_!==0)return _;const E=Mc(u[h[y]],f[p[y]]);if(E!==0)return E}return Xe(h.length,p.length)}(t.mapValue,e.mapValue);default:throw Le()}}function Cx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=Qa(t),i=Qa(e),r=Xe(n.seconds,i.seconds);return r!==0?r:Xe(n.nanos,i.nanos)}function Ix(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Mc(n[r],i[r]);if(o)return o}return Xe(n.length,i.length)}function Pc(t){return j_(t)}function j_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Qa(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=j_(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${j_(n.fields[l])}`;return r+"}"}(t.mapValue):Le()}function Um(t){switch(Za(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eg(t);return e?16+Um(e):16;case 5:return 2*t.stringValue.length;case 6:return Xa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Um(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return lo(i.fields,(o,l)=>{r+=o.length+Um(l)}),r}(t.mapValue);default:throw Le()}}function Nx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function U_(t){return!!t&&"integerValue"in t}function yb(t){return!!t&&"arrayValue"in t}function Dx(t){return!!t&&"nullValue"in t}function Mx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fm(t){return!!t&&"mapValue"in t}function A6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[PN])===null||n===void 0?void 0:n.stringValue)===ON}function Sh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Sh(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function x6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===S6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sh(n)}setAll(e){let n=Qn.emptyPath(),i={},r=[];e.forEach((l,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}l?i[u.lastSegment()]=Sh(l):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Fm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Fm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){lo(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Ci(Sh(this.value))}}function kN(t){const e=[];return lo(t.fields,(n,i)=>{const r=new Qn([n]);if(Fm(i)){const o=kN(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)}),new $i(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,i,r,o,l,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new ri(e,0,ze.min(),ze.min(),ze.min(),Ci.empty(),0)}static newFoundDocument(e,n,i,r){return new ri(e,1,n,ze.min(),i,r,0)}static newNoDocument(e,n){return new ri(e,2,n,ze.min(),ze.min(),Ci.empty(),0)}static newUnknownDocument(e,n){return new ri(e,3,n,ze.min(),ze.min(),Ci.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ri&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ri(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.position=e,this.inclusive=n}}function Px(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=xe.comparator(xe.fromName(l.referenceValue),n.key):i=Mc(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ox(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ur(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n="asc"){this.field=e,this.dir=n}}function R6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{}class En extends LN{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new I6(e,n,i):n==="array-contains"?new M6(e,i):n==="in"?new P6(e,i):n==="not-in"?new O6(e,i):n==="array-contains-any"?new k6(e,i):new En(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new N6(e,i):new D6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mc(n,this.value)):n!==null&&Za(this.value)===Za(n)&&this.matchesComparison(Mc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ks extends LN{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ks(e,n)}matches(e){return VN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function VN(t){return t.op==="and"}function jN(t){return C6(t)&&VN(t)}function C6(t){for(const e of t.filters)if(e instanceof ks)return!1;return!0}function F_(t){if(t instanceof En)return t.field.canonicalString()+t.op.toString()+Pc(t.value);if(jN(t))return t.filters.map(e=>F_(e)).join(",");{const e=t.filters.map(n=>F_(n)).join(",");return`${t.op}(${e})`}}function UN(t,e){return t instanceof En?function(i,r){return r instanceof En&&i.op===r.op&&i.field.isEqual(r.field)&&ur(i.value,r.value)}(t,e):t instanceof ks?function(i,r){return r instanceof ks&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,l,u)=>o&&UN(l,r.filters[u]),!0):!1}(t,e):void Le()}function FN(t){return t instanceof En?function(n){return`${n.field.canonicalString()} ${n.op} ${Pc(n.value)}`}(t):t instanceof ks?function(n){return n.op.toString()+" {"+n.getFilters().map(FN).join(" ,")+"}"}(t):"Filter"}class I6 extends En{constructor(e,n,i){super(e,n,i),this.key=xe.fromName(i.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class N6 extends En{constructor(e,n){super(e,"in",n),this.keys=BN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class D6 extends En{constructor(e,n){super(e,"not-in",n),this.keys=BN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>xe.fromName(i.referenceValue))}class M6 extends En{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yb(n)&&Yh(n.arrayValue,this.value)}}class P6 extends En{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yh(this.value.arrayValue,n)}}class O6 extends En{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yh(this.value.arrayValue,n)}}class k6 extends En{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Yh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n=null,i=[],r=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function kx(t,e=null,n=[],i=[],r=null,o=null,l=null){return new L6(t,e,n,i,r,o,l)}function vb(t){const e=He(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>F_(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Jp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Pc(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Pc(i)).join(",")),e.le=n}return e.le}function _b(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ox(t.startAt,e.startAt)&&Ox(t.endAt,e.endAt)}function B_(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n=null,i=[],r=[],o=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=h,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function V6(t,e,n,i,r,o,l,u){return new Qc(t,e,n,i,r,o,l,u)}function tg(t){return new Qc(t)}function Lx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zN(t){return t.collectionGroup!==null}function Ah(t){const e=He(t);if(e.he===null){e.he=[];const n=new Set;for(const o of e.explicitOrderBy)e.he.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new In(Qn.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.he.push(new Qh(o,i))}),n.has(Qn.keyField().canonicalString())||e.he.push(new Qh(Qn.keyField(),i))}return e.he}function sr(t){const e=He(t);return e.Pe||(e.Pe=j6(e,Ah(t))),e.Pe}function j6(t,e){if(t.limitType==="F")return kx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Qh(r.field,o)});const n=t.endAt?new fp(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new fp(t.startAt.position,t.startAt.inclusive):null;return kx(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function z_(t,e){const n=t.filters.concat([e]);return new Qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function q_(t,e,n){return new Qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ng(t,e){return _b(sr(t),sr(e))&&t.limitType===e.limitType}function qN(t){return`${vb(sr(t))}|lt:${t.limitType}`}function uc(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>FN(r)).join(", ")}]`),Jp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Pc(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Pc(r)).join(",")),`Target(${i})`}(sr(t))}; limitType=${t.limitType})`}function ig(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):xe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Ah(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(l,u,h){const f=Px(l,u,h);return l.inclusive?f<=0:f<0}(i.startAt,Ah(i),r)||i.endAt&&!function(l,u,h){const f=Px(l,u,h);return l.inclusive?f>=0:f>0}(i.endAt,Ah(i),r))}(t,e)}function U6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HN(t){return(e,n)=>{let i=!1;for(const r of Ah(t)){const o=F6(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function F6(t,e,n){const i=t.field.isKeyField()?xe.comparator(e.key,n.key):function(o,l,u){const h=l.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Mc(h,f):Le()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return RN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=new wn(xe.comparator);function ta(){return B6}const GN=new wn(xe.comparator);function gh(...t){let e=GN;for(const n of t)e=e.insert(n.key,n);return e}function $N(t){let e=GN;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Wo(){return xh()}function KN(){return xh()}function xh(){return new fl(t=>t.toString(),(t,e)=>t.isEqual(e))}const z6=new wn(xe.comparator),q6=new In(xe.comparator);function ot(...t){let e=q6;for(const n of t)e=e.add(n);return e}const H6=new In(Xe);function G6(){return H6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:up(e)?"-0":e}}function WN(t){return{integerValue:""+t}}function $6(t,e){return _6(e)?WN(e):bb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this._=void 0}}function K6(t,e,n){return t instanceof Xh?function(r,o){const l={fields:{[NN]:{stringValue:IN},[MN]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&gb(o)&&(o=eg(o)),o&&(l.fields[DN]=o),{mapValue:l}}(n,e):t instanceof Zh?QN(t,e):t instanceof Jh?XN(t,e):function(r,o){const l=YN(r,o),u=Vx(l)+Vx(r.Ie);return U_(l)&&U_(r.Ie)?WN(u):bb(r.serializer,u)}(t,e)}function W6(t,e,n){return t instanceof Zh?QN(t,e):t instanceof Jh?XN(t,e):n}function YN(t,e){return t instanceof mp?function(i){return U_(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Xh extends sg{}class Zh extends sg{constructor(e){super(),this.elements=e}}function QN(t,e){const n=ZN(e);for(const i of t.elements)n.some(r=>ur(r,i))||n.push(i);return{arrayValue:{values:n}}}class Jh extends sg{constructor(e){super(),this.elements=e}}function XN(t,e){let n=ZN(e);for(const i of t.elements)n=n.filter(r=>!ur(r,i));return{arrayValue:{values:n}}}class mp extends sg{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Vx(t){return pn(t.integerValue||t.doubleValue)}function ZN(t){return yb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,n){this.field=e,this.transform=n}}function Q6(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Zh&&r instanceof Zh||i instanceof Jh&&r instanceof Jh?Dc(i.elements,r.elements,ur):i instanceof mp&&r instanceof mp?ur(i.Ie,r.Ie):i instanceof Xh&&r instanceof Xh}(t.transform,e.transform)}class X6{constructor(e,n){this.version=e,this.transformResults=n}}class _i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rg{}function JN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ag(t.key,_i.none()):new wd(t.key,t.data,_i.none());{const n=t.data,i=Ci.empty();let r=new In(Qn.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new co(t.key,i,new $i(r.toArray()),_i.none())}}function Z6(t,e,n){t instanceof wd?function(r,o,l){const u=r.value.clone(),h=Ux(r.fieldTransforms,o,l.transformResults);u.setAll(h),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):t instanceof co?function(r,o,l){if(!Bm(r.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Ux(r.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(eD(r)),h.setAll(u),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Rh(t,e,n,i){return t instanceof wd?function(o,l,u,h){if(!Bm(o.precondition,l))return u;const f=o.value.clone(),p=Fx(o.fieldTransforms,h,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof co?function(o,l,u,h){if(!Bm(o.precondition,l))return u;const f=Fx(o.fieldTransforms,h,l),p=l.data;return p.setAll(eD(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,l,u){return Bm(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(t,e,n)}function J6(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=YN(i.transform,r||null);o!=null&&(n===null&&(n=Ci.empty()),n.set(i.field,o))}return n||null}function jx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Dc(i,r,(o,l)=>Q6(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wd extends rg{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class co extends rg{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function eD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Ux(t,e,n){const i=new Map;Ct(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,u=e.data.field(o.field);i.set(o.field,W6(l,u,n[r]))}return i}function Fx(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,K6(o,l,e))}return i}class ag extends rg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eF extends rg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&Z6(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Rh(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Rh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=KN();return this.mutations.forEach(r=>{const o=e.get(r.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(r.key)?null:u;const h=JN(l,u);h!==null&&i.set(r.key,h),l.isValidDocument()||l.convertToNoDocument(ze.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ot())}isEqual(e){return this.batchId===e.batchId&&Dc(this.mutations,e.mutations,(n,i)=>jx(n,i))&&Dc(this.baseMutations,e.baseMutations,(n,i)=>jx(n,i))}}class Eb{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ct(e.mutations.length===i.length);let r=function(){return z6}();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new Eb(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,pt;function sF(t){switch(t){case re.OK:return Le();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Le()}}function tD(t){if(t===void 0)return ea("GRPC error has no .code"),re.UNKNOWN;switch(t){case bn.OK:return re.OK;case bn.CANCELLED:return re.CANCELLED;case bn.UNKNOWN:return re.UNKNOWN;case bn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case bn.INTERNAL:return re.INTERNAL;case bn.UNAVAILABLE:return re.UNAVAILABLE;case bn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case bn.NOT_FOUND:return re.NOT_FOUND;case bn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case bn.ABORTED:return re.ABORTED;case bn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case bn.DATA_LOSS:return re.DATA_LOSS;default:return Le()}}(pt=bn||(bn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=new Ga([4294967295,4294967295],0);function Bx(t){const e=SN().encode(t),n=new yN;return n.update(e),new Uint8Array(n.digest())}function zx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ga([n,i],0),new Ga([r,o],0)]}class wb{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new yh(`Invalid padding: ${n}`);if(i<0)throw new yh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new yh(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new yh(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Ga.fromNumber(this.Ee)}Ae(e,n,i){let r=e.add(n.multiply(Ga.fromNumber(i)));return r.compare(rF)===1&&(r=new Ga([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=Bx(e),[i,r]=zx(n);for(let o=0;o<this.hashCount;o++){const l=this.Ae(i,r,o);if(!this.Re(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new wb(o,r,n);return i.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const n=Bx(e),[i,r]=zx(n);for(let o=0;o<this.hashCount;o++){const l=this.Ae(i,r,o);this.Ve(l)}}Ve(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class yh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Td.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new og(ze.min(),r,new wn(Xe),ta(),ot())}}class Td{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Td(i,n,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,i,r){this.me=e,this.removedTargetIds=n,this.key=i,this.fe=r}}class nD{constructor(e,n){this.targetId=e,this.ge=n}}class iD{constructor(e,n,i=Xn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class qx{constructor(){this.pe=0,this.ye=Hx(),this.we=Xn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ot(),n=ot(),i=ot();return this.ye.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Le()}}),new Td(this.we,this.Se,e,n,i)}Me(){this.be=!1,this.ye=Hx()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ct(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class aF{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ta(),this.$e=_m(),this.Ue=_m(),this.Ke=new wn(Xe)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const i=this.He(n);switch(e.state){case 0:this.Je(n)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(e.resumeToken));break;default:Le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((i,r)=>{this.Je(r)&&n(r)})}Ze(e){const n=e.targetId,i=e.ge.count,r=this.Xe(n);if(r){const o=r.target;if(B_(o))if(i===0){const l=new xe(o.path);this.ze(n,l,ri.newNoDocument(l,ze.min()))}else Ct(i===1);else{const l=this.et(n);if(l!==i){const u=this.tt(e),h=u?this.nt(u,e,l):1;if(h!==0){this.Ye(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,f)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,u;try{l=Xa(i).toUint8Array()}catch(h){if(h instanceof CN)return Nc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new wb(l,r,o)}catch(h){return Nc(h instanceof yh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ee===0?null:u}nt(e,n,i){return n.ge.count===i-this.st(e,n.targetId)?0:2}st(e,n){const i=this.ke.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(n,o,null),r++)}),r}ot(e){const n=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&B_(u.target)){const h=new xe(u.target.path);this._t(h).has(l)||this.ut(l,h)||this.ze(l,h,ri.newNoDocument(h,e))}o.ve&&(n.set(l,o.Fe()),o.Me())}});let i=ot();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(h=>{const f=this.Xe(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const r=new og(e,n,this.Ke,this.Qe,i);return this.Qe=ta(),this.$e=_m(),this.Ue=_m(),this.Ke=new wn(Xe),r}Ge(e,n){if(!this.Je(e))return;const i=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,i){if(!this.Je(e))return;const r=this.He(e);this.ut(e,n)?r.xe(n,1):r.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new qx,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new In(Xe),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new In(Xe),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new qx),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function _m(){return new wn(xe.comparator)}function Hx(){return new wn(xe.comparator)}const oF={asc:"ASCENDING",desc:"DESCENDING"},lF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cF={and:"AND",or:"OR"};class uF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function H_(t,e){return t.useProto3Json||Jp(e)?e:{value:e}}function pp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hF(t,e){return pp(t,e.toTimestamp())}function rr(t){return Ct(!!t),ze.fromTimestamp(function(n){const i=Qa(n);return new Ht(i.seconds,i.nanos)}(t))}function Tb(t,e){return G_(t,e).canonicalString()}function G_(t,e){const n=function(r){return new Qt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rD(t){const e=Qt.fromString(t);return Ct(uD(e)),e}function $_(t,e){return Tb(t.databaseId,e.path)}function zv(t,e){const n=rD(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(oD(n))}function aD(t,e){return Tb(t.databaseId,e)}function dF(t){const e=rD(t);return e.length===4?Qt.emptyPath():oD(e)}function K_(t){return new Qt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oD(t){return Ct(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Gx(t,e,n){return{name:$_(t,e),fields:n.value.mapValue.fields}}function fF(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Le()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,p){return f.useProto3Json?(Ct(p===void 0||typeof p=="string"),Xn.fromBase64String(p||"")):(Ct(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Xn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(f){const p=f.code===void 0?re.UNKNOWN:tD(f.code);return new fe(p,f.message||"")}(l);n=new iD(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=zv(t,i.document.name),o=rr(i.document.updateTime),l=i.document.createTime?rr(i.document.createTime):ze.min(),u=new Ci({mapValue:{fields:i.document.fields}}),h=ri.newFoundDocument(r,o,l,u),f=i.targetIds||[],p=i.removedTargetIds||[];n=new zm(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=zv(t,i.document),o=i.readTime?rr(i.readTime):ze.min(),l=ri.newNoDocument(r,o),u=i.removedTargetIds||[];n=new zm([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=zv(t,i.document),o=i.removedTargetIds||[];n=new zm([],o,r,null)}else{if(!("filter"in e))return Le();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new iF(r,o),u=i.targetId;n=new nD(u,l)}}return n}function mF(t,e){let n;if(e instanceof wd)n={update:Gx(t,e.key,e.value)};else if(e instanceof ag)n={delete:$_(t,e.key)};else if(e instanceof co)n={update:Gx(t,e.key,e.data),updateMask:TF(e.fieldMask)};else{if(!(e instanceof eF))return Le();n={verify:$_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const u=l.transform;if(u instanceof Xh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Zh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Jh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof mp)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Le()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:hF(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Le()}(t,e.precondition)),n}function pF(t,e){return t&&t.length>0?(Ct(e!==void 0),t.map(n=>function(r,o){let l=r.updateTime?rr(r.updateTime):rr(o);return l.isEqual(ze.min())&&(l=rr(o)),new X6(l,r.transformResults||[])}(n,e))):[]}function gF(t,e){return{documents:[aD(t,e.path)]}}function yF(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=aD(t,r);const o=function(f){if(f.length!==0)return cD(ks.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(p=>function(_){return{field:hc(_.field),direction:bF(_.dir)}}(p))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=H_(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ht:n,parent:r}}function vF(t){let e=dF(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ct(i===1);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(y){const _=lD(y);return _ instanceof ks&&jN(_)?_.getFilters():[_]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(_=>function(S){return new Qh(dc(S.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(y){let _;return _=typeof y=="object"?y.value:y,Jp(_)?null:_}(n.limit));let h=null;n.startAt&&(h=function(y){const _=!!y.before,E=y.values||[];return new fp(E,_)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const _=!y.before,E=y.values||[];return new fp(E,_)}(n.endAt)),V6(e,r,l,o,u,"F",h,f)}function _F(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=dc(n.unaryFilter.field);return En.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=dc(n.unaryFilter.field);return En.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=dc(n.unaryFilter.field);return En.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=dc(n.unaryFilter.field);return En.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Le()}}(t):t.fieldFilter!==void 0?function(n){return En.create(dc(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ks.create(n.compositeFilter.filters.map(i=>lD(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Le()}}(n.compositeFilter.op))}(t):Le()}function bF(t){return oF[t]}function EF(t){return lF[t]}function wF(t){return cF[t]}function hc(t){return{fieldPath:t.canonicalString()}}function dc(t){return Qn.fromServerFormat(t.fieldPath)}function cD(t){return t instanceof En?function(n){if(n.op==="=="){if(Mx(n.value))return{unaryFilter:{field:hc(n.field),op:"IS_NAN"}};if(Dx(n.value))return{unaryFilter:{field:hc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Mx(n.value))return{unaryFilter:{field:hc(n.field),op:"IS_NOT_NAN"}};if(Dx(n.value))return{unaryFilter:{field:hc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hc(n.field),op:EF(n.op),value:n.value}}}(t):t instanceof ks?function(n){const i=n.getFilters().map(r=>cD(r));return i.length===1?i[0]:{compositeFilter:{op:wF(n.op),filters:i}}}(t):Le()}function TF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,i,r,o=ze.min(),l=ze.min(),u=Xn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e){this.Tt=e}}function AF(t){const e=vF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?q_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(){this.Tn=new RF}addToCollectionParentIndex(e,n){return this.Tn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Ya.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Ya.min())}updateCollectionGroup(e,n,i){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class RF{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new In(Qt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new In(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hD=41943040;class xi{static withCacheSize(e){return new xi(e,xi.DEFAULT_COLLECTION_PERCENTILE,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi.DEFAULT_COLLECTION_PERCENTILE=10,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xi.DEFAULT=new xi(hD,xi.DEFAULT_COLLECTION_PERCENTILE,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xi.DISABLED=new xi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Oc(0)}static Kn(){return new Oc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="LruGarbageCollector",CF=1048576;function Wx([t,e],[n,i]){const r=Xe(t,n);return r===0?Xe(e,i):r}class IF{constructor(e){this.Hn=e,this.buffer=new In(Wx),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Wx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class NF{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){pe(Kx,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yc(n)?pe(Kx,"Ignoring IndexedDB error during garbage collection: ",n):await Wc(n)}await this.er(3e5)})}}class DF{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(Zp.ae);const i=new IF(n);return this.tr.forEachTarget(e,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(e,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.tr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve($x)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$x):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let i,r,o,l,u,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,l=Date.now(),this.nthSequenceNumber(e,r))).next(y=>(i=y,u=Date.now(),this.removeTargets(e,i,n))).next(y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(f=Date.now(),cc()<=st.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(u-l)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y})))}}function MF(t,e){return new DF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.changes=new fl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?oe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Rh(i.mutation,r,$i.empty(),Ht.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ot()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ot()){const r=Wo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let l=gh();return o.forEach((u,h)=>{l=l.insert(u,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=Wo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ot()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((l,u)=>{n.set(l,u)})})}computeViews(e,n,i,r){let o=ta();const l=xh(),u=function(){return xh()}();return n.forEach((h,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof co)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),Rh(p.mutation,f,p.mutation.getFieldMask(),Ht.now())):l.set(f.key,$i.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,p)=>l.set(f,p)),n.forEach((f,p)=>{var y;return u.set(f,new OF(p,(y=l.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const i=xh();let r=new wn((l,u)=>l-u),o=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const u of l)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let p=i.get(h)||$i.empty();p=u.applyToLocalView(f,p),i.set(h,p);const y=(r.get(u.batchId)||ot()).add(h);r=r.insert(u.batchId,y)})}).next(()=>{const l=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,y=KN();p.forEach(_=>{if(!o.has(_)){const E=JN(n.get(_),i.get(_));E!==null&&y.set(_,E),o=o.add(_)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return oe.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(l){return xe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):oe.resolve(Wo());let u=$h,h=o;return l.next(f=>oe.forEach(f,(p,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(p)?oe.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{h=h.insert(p,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,ot())).next(p=>({batchId:u,changes:$N(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next(i=>{let r=gh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=gh();return this.indexManager.getCollectionParents(e,o).next(u=>oe.forEach(u,h=>{const f=function(y,_){return new Qc(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(p=>{p.forEach((y,_)=>{l=l.insert(y,_)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(l=>{o.forEach((h,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,ri.newInvalidDocument(p)))});let u=gh();return l.forEach((h,f)=>{const p=o.get(h);p!==void 0&&Rh(p.mutation,f,$i.empty(),Ht.now()),ig(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return oe.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:rr(r.createTime)}}(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(r){return{name:r.name,query:AF(r.bundledQuery),readTime:rr(r.readTime)}}(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.overlays=new wn(xe.comparator),this.Rr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Wo();return oe.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.Et(e,n,o)}),oe.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),oe.resolve()}getOverlaysForCollection(e,n,i){const r=Wo(),o=n.length+1,l=new xe(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new wn((f,p)=>f-p);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=Wo(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=Wo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=r)););return oe.resolve(u)}Et(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new nF(n,i));let o=this.Rr.get(n);o===void 0&&(o=ot(),this.Rr.set(n,o)),this.Rr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.Vr=new In(Vn.mr),this.gr=new In(Vn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const i=new Vn(e,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.wr(new Vn(e,n))}Sr(e,n){e.forEach(i=>this.removeReference(i,n))}br(e){const n=new xe(new Qt([])),i=new Vn(n,e),r=new Vn(n,e+1),o=[];return this.gr.forEachInRange([i,r],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new xe(new Qt([])),i=new Vn(n,e),r=new Vn(n,e+1);let o=ot();return this.gr.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Vn(e,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Vn{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return xe.comparator(e.key,n.key)||Xe(e.Cr,n.Cr)}static pr(e,n){return Xe(e.Cr,n.Cr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new In(Vn.mr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new tF(o,n,i,r);this.mutationQueue.push(l);for(const u of r)this.Mr=this.Mr.add(new Vn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,n){return oe.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Nr(i),o=r<0?0:r;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?pb:this.Fr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Vn(n,0),r=new Vn(n,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,r],l=>{const u=this.Or(l.Cr);o.push(u)}),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new In(Xe);return n.forEach(r=>{const o=new Vn(r,0),l=new Vn(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{i=i.add(u.Cr)})}),oe.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;xe.isDocumentKey(o)||(o=o.child(""));const l=new Vn(new xe(o),0);let u=new In(Xe);return this.Mr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Cr)),!0)},l),oe.resolve(this.Br(u))}Br(e){const n=[];return e.forEach(i=>{const r=this.Or(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ct(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return oe.forEach(n.mutations,r=>{const o=new Vn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,n){const i=new Vn(n,0),r=this.Mr.firstAfterOrEqual(i);return oe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e){this.kr=e,this.docs=function(){return new wn(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return oe.resolve(i?i.document.mutableCopy():ri.newInvalidDocument(n))}getEntries(e,n){let i=ta();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ri.newInvalidDocument(r))}),oe.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=ta();const l=n.path,u=new xe(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||p6(m6(p),i)<=0||(r.has(p.key)||ig(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Le()}qr(e,n){return oe.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new BF(this)}getSize(e){return oe.resolve(this.size)}}class BF extends PF{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(i)}),oe.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e){this.persistence=e,this.Qr=new fl(n=>vb(n),_b),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Sb,this.targetCount=0,this.Kr=Oc.Un()}forEachTarget(e,n){return this.Qr.forEach((i,r)=>n(r)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),oe.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Oc(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.zn(n),oe.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),oe.waitFor(o).next(()=>r)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const i=this.Qr.get(n)||null;return oe.resolve(i)}addMatchingKeys(e,n,i){return this.Ur.yr(n,i),oe.resolve()}removeMatchingKeys(e,n,i){this.Ur.Sr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(l=>{o.push(r.markPotentiallyOrphaned(e,l))}),oe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Ur.vr(n);return oe.resolve(i)}containsKey(e,n){return oe.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Zp(0),this.zr=!1,this.zr=!0,this.jr=new jF,this.referenceDelegate=e(this),this.Hr=new zF(this),this.indexManager=new xF,this.remoteDocumentCache=function(r){return new FF(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new SF(n),this.Yr=new LF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Wr[e.toKey()];return i||(i=new UF(n,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,i){pe("MemoryPersistence","Starting transaction:",e);const r=new qF(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(o=>this.referenceDelegate.Xr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}ei(e,n){return oe.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,n)))}}class qF extends y6{constructor(e){super(),this.currentSequenceNumber=e}}class Ab{constructor(e){this.persistence=e,this.ti=new Sb,this.ni=null}static ri(e){return new Ab(e)}get ii(){if(this.ni)return this.ni;throw Le()}addReference(e,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),oe.resolve()}removeReference(e,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),oe.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.ii,i=>{const r=xe.fromPath(i);return this.si(e,r).next(o=>{o||n.removeEntry(r,ze.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return oe.or([()=>oe.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class gp{constructor(e,n){this.persistence=e,this.oi=new fl(i=>b6(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=MF(this,n)}static ri(e,n){return new gp(e,n)}Zr(){}Xr(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}sr(e){let n=0;return this.rr(e,i=>{n++}).next(()=>n)}rr(e,n){return oe.forEach(this.oi,(i,r)=>this.ar(e,i,r).next(o=>o?oe.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.qr(e,l=>this.ar(e,l,n).next(u=>{u||(i++,o.removeEntry(l,ze.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),oe.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Um(e.data.value)),n}ar(e,n,i){return oe.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.oi.get(n);return oe.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Hi=i,this.Ji=r}static Yi(e,n){let i=ot(),r=ot();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new xb(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return w4()?8:v6(di())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.rs(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,n,r,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new HF;return this._s(e,n,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,n,l,u.size)})}).next(()=>o.result)}us(e,n,i,r){return i.documentReadCount<this.es?(cc()<=st.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",uc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),oe.resolve()):(cc()<=st.DEBUG&&pe("QueryEngine","Query:",uc(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(cc()<=st.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",uc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(n))):oe.resolve())}rs(e,n){if(Lx(n))return oe.resolve(null);let i=sr(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=q_(n,null,"F"),i=sr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=ot(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.cs(n,u);return this.ls(n,f,l,h.readTime)?this.rs(e,q_(n,null,"F")):this.hs(e,f,n,h)}))})))}ss(e,n,i,r){return Lx(n)||r.isEqual(ze.min())?oe.resolve(null):this.ns.getDocuments(e,i).next(o=>{const l=this.cs(n,o);return this.ls(n,l,i,r)?oe.resolve(null):(cc()<=st.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),uc(n)),this.hs(e,l,n,f6(r,$h)).next(u=>u))})}cs(e,n){let i=new In(HN(e));return n.forEach((r,o)=>{ig(e,o)&&(i=i.add(o))}),i}ls(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}_s(e,n,i){return cc()<=st.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",uc(n)),this.ns.getDocumentsMatchingQuery(e,n,Ya.min(),i)}hs(e,n,i,r){return this.ns.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="LocalStore",$F=3e8;class KF{constructor(e,n,i,r){this.persistence=e,this.Ps=n,this.serializer=r,this.Ts=new wn(Xe),this.Is=new fl(o=>vb(o),_b),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function WF(t,e,n,i){return new KF(t,e,n,i)}async function fD(t,e){const n=He(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.As(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],u=[];let h=ot();for(const f of r){l.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of o){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Rs:f,removedBatchIds:l,addedBatchIds:u}))})})}function YF(t,e){const n=He(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.ds.newChangeBuffer({trackRemovals:!0});return function(u,h,f,p){const y=f.batch,_=y.keys();let E=oe.resolve();return _.forEach(S=>{E=E.next(()=>p.getEntry(h,S)).next(R=>{const I=f.docVersions.get(S);Ct(I!==null),R.version.compareTo(I)<0&&(y.applyToRemoteDocument(R,f),R.isValidDocument()&&(R.setReadTime(f.commitVersion),p.addEntry(R)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=ot();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function mD(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function QF(t,e){const n=He(t),i=e.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const u=[];e.targetChanges.forEach((p,y)=>{const _=r.get(y);if(!_)return;u.push(n.Hr.removeMatchingKeys(o,p.removedDocuments,y).next(()=>n.Hr.addMatchingKeys(o,p.addedDocuments,y)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(Xn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,i)),r=r.insert(y,E),function(R,I,P){return R.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=$F?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(_,E,p)&&u.push(n.Hr.updateTargetData(o,E))});let h=ta(),f=ot();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),u.push(XF(o,l,e.documentUpdates).next(p=>{h=p.Vs,f=p.fs})),!i.isEqual(ze.min())){const p=n.Hr.getLastRemoteSnapshotVersion(o).next(y=>n.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(p)}return oe.waitFor(u).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ts=r,o))}function XF(t,e,n){let i=ot(),r=ot();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=ta();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(ze.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):pe(Rb,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{Vs:l,fs:r}})}function ZF(t,e){const n=He(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=pb),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function JF(t,e){const n=He(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Hr.getTargetData(i,e).next(o=>o?(r=o,oe.resolve(r)):n.Hr.allocateTargetId(i).next(l=>(r=new za(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(e,i.targetId)),i})}async function W_(t,e,n){const i=He(t),r=i.Ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!Yc(l))throw l;pe(Rb,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ts=i.Ts.remove(e),i.Is.delete(r.target)}function Yx(t,e,n){const i=He(t);let r=ze.min(),o=ot();return i.persistence.runTransaction("Execute query","readwrite",l=>function(h,f,p){const y=He(h),_=y.Is.get(p);return _!==void 0?oe.resolve(y.Ts.get(_)):y.Hr.getTargetData(f,p)}(i,l,sr(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(l,u.targetId).next(h=>{o=h})}).next(()=>i.Ps.getDocumentsMatchingQuery(l,e,n?r:ze.min(),n?o:ot())).next(u=>(e9(i,U6(e),u),{documents:u,gs:o})))}function e9(t,e,n){let i=t.Es.get(e)||ze.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Es.set(e,i)}class Qx{constructor(){this.activeTargetIds=G6()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t9{constructor(){this.ho=new Qx,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,i){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Qx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="ConnectivityMonitor";class Zx{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){pe(Xx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){pe(Xx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bm=null;function Y_(){return bm===null?bm=function(){return 268435456+Math.round(2147483648*Math.random())}():bm++,"0x"+bm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="RestConnection",i9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class s9{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===hp?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(e,n,i,r,o){const l=Y_(),u=this.bo(e,n.toUriEncodedString());pe(qv,`Sending RPC '${e}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(h,r,o),this.vo(e,u,h,i).then(f=>(pe(qv,`Received RPC '${e}' ${l}: `,f),f),f=>{throw Nc(qv,`RPC '${e}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Co(e,n,i,r,o,l){return this.So(e,n,i,r,o)}Do(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}bo(e,n){const i=i9[e];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="WebChannelConnection";class a9 extends s9{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,i,r){const o=Y_();return new Promise((l,u)=>{const h=new vN;h.setWithCredentials(!0),h.listenOnce(_N.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case jm.NO_ERROR:const p=h.getResponseJson();pe(ei,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case jm.TIMEOUT:pe(ei,`RPC '${e}' ${o} timed out`),u(new fe(re.DEADLINE_EXCEEDED,"Request time out"));break;case jm.HTTP_ERROR:const y=h.getStatus();if(pe(ei,`RPC '${e}' ${o} failed with status:`,y,"response text:",h.getResponseText()),y>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_==null?void 0:_.error;if(E&&E.status&&E.message){const S=function(I){const P=I.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(P)>=0?P:re.UNKNOWN}(E.status);u(new fe(S,E.message))}else u(new fe(re.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new fe(re.UNAVAILABLE,"Connection failed."));break;default:Le()}}finally{pe(ei,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);pe(ei,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,i,15)})}Wo(e,n,i){const r=Y_(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=wN(),u=EN(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Do(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const p=o.join("");pe(ei,`Creating RPC '${e}' stream ${r}: ${p}`,h);const y=l.createWebChannel(p,h);let _=!1,E=!1;const S=new r9({Fo:I=>{E?pe(ei,`Not sending because RPC '${e}' stream ${r} is closed:`,I):(_||(pe(ei,`Opening RPC '${e}' stream ${r} transport.`),y.open(),_=!0),pe(ei,`RPC '${e}' stream ${r} sending:`,I),y.send(I))},Mo:()=>y.close()}),R=(I,P,F)=>{I.listen(P,O=>{try{F(O)}catch(q){setTimeout(()=>{throw q},0)}})};return R(y,ph.EventType.OPEN,()=>{E||(pe(ei,`RPC '${e}' stream ${r} transport opened.`),S.Qo())}),R(y,ph.EventType.CLOSE,()=>{E||(E=!0,pe(ei,`RPC '${e}' stream ${r} transport closed`),S.Uo())}),R(y,ph.EventType.ERROR,I=>{E||(E=!0,Nc(ei,`RPC '${e}' stream ${r} transport errored:`,I),S.Uo(new fe(re.UNAVAILABLE,"The operation could not be completed")))}),R(y,ph.EventType.MESSAGE,I=>{var P;if(!E){const F=I.data[0];Ct(!!F);const O=F,q=(O==null?void 0:O.error)||((P=O[0])===null||P===void 0?void 0:P.error);if(q){pe(ei,`RPC '${e}' stream ${r} received error:`,q);const G=q.status;let Y=function(M){const k=bn[M];if(k!==void 0)return tD(k)}(G),L=q.message;Y===void 0&&(Y=re.INTERNAL,L="Unknown error status: "+G+" with message "+q.message),E=!0,S.Uo(new fe(Y,L)),y.close()}else pe(ei,`RPC '${e}' stream ${r} received:`,F),S.Ko(F)}}),R(u,bN.STAT_EVENT,I=>{I.stat===k_.PROXY?pe(ei,`RPC '${e}' stream ${r} detected buffering proxy`):I.stat===k_.NOPROXY&&pe(ei,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.$o()},0),S}}function Hv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t){return new uF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Ti=e,this.timerId=n,this.Go=i,this.zo=r,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,n-i);r>0&&pe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="PersistentStream";class gD{constructor(e,n,i,r,o,l,u,h){this.Ti=e,this.n_=i,this.r_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new pD(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(ea(n.toString()),ea("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===n&&this.V_(i,r)},i=>{e(()=>{const r=new fe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(e,n){const i=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return pe(Jx,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(pe(Jx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o9 extends gD{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=fF(this.serializer,e),i=function(o){if(!("targetChange"in o))return ze.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ze.min():l.readTime?rr(l.readTime):ze.min()}(e);return this.listener.p_(n,i)}y_(e){const n={};n.database=K_(this.serializer),n.addTarget=function(o,l){let u;const h=l.target;if(u=B_(h)?{documents:gF(o,h)}:{query:yF(o,h).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=sD(o,l.resumeToken);const f=H_(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(ze.min())>0){u.readTime=pp(o,l.snapshotVersion.toTimestamp());const f=H_(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=_F(this.serializer,e);i&&(n.labels=i),this.I_(n)}w_(e){const n={};n.database=K_(this.serializer),n.removeTarget=e,this.I_(n)}}class l9 extends gD{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,Ct(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=pF(e.writeResults,e.commitTime),i=rr(e.commitTime);return this.listener.v_(i,n)}C_(){const e={};e.database=K_(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>mF(this.serializer,i))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{}class u9 extends c9{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,G_(n,i),r,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(re.UNKNOWN,o.toString())})}Co(e,n,i,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,G_(n,i),r,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(re.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class h9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ea(n),this.N_=!1):pe("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="RemoteStore";class d9{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{i.enqueueAndForget(async()=>{ml(this)&&(pe(sl,"Restarting streams for network reachability change."),await async function(h){const f=He(h);f.W_.add(4),await Sd(f),f.j_.set("Unknown"),f.W_.delete(4),await cg(f)}(this))})}),this.j_=new h9(i,r)}}async function cg(t){if(ml(t))for(const e of t.G_)await e(!0)}async function Sd(t){for(const e of t.G_)await e(!1)}function yD(t,e){const n=He(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Db(n)?Nb(n):Xc(n).c_()&&Ib(n,e))}function Cb(t,e){const n=He(t),i=Xc(n);n.K_.delete(e),i.c_()&&vD(n,e),n.K_.size===0&&(i.c_()?i.P_():ml(n)&&n.j_.set("Unknown"))}function Ib(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xc(t).y_(e)}function vD(t,e){t.H_.Ne(e),Xc(t).w_(e)}function Nb(t){t.H_=new aF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Xc(t).start(),t.j_.B_()}function Db(t){return ml(t)&&!Xc(t).u_()&&t.K_.size>0}function ml(t){return He(t).W_.size===0}function _D(t){t.H_=void 0}async function f9(t){t.j_.set("Online")}async function m9(t){t.K_.forEach((e,n)=>{Ib(t,e)})}async function p9(t,e){_D(t),Db(t)?(t.j_.q_(e),Nb(t)):t.j_.set("Unknown")}async function g9(t,e,n){if(t.j_.set("Online"),e instanceof iD&&e.state===2&&e.cause)try{await async function(r,o){const l=o.cause;for(const u of o.targetIds)r.K_.has(u)&&(await r.remoteSyncer.rejectListen(u,l),r.K_.delete(u),r.H_.removeTarget(u))}(t,e)}catch(i){pe(sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yp(t,i)}else if(e instanceof zm?t.H_.We(e):e instanceof nD?t.H_.Ze(e):t.H_.je(e),!n.isEqual(ze.min()))try{const i=await mD(t.localStore);n.compareTo(i)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=o.K_.get(f);p&&o.K_.set(f,p.withResumeToken(h.resumeToken,l))}}),u.targetMismatches.forEach((h,f)=>{const p=o.K_.get(h);if(!p)return;o.K_.set(h,p.withResumeToken(Xn.EMPTY_BYTE_STRING,p.snapshotVersion)),vD(o,h);const y=new za(p.target,h,f,p.sequenceNumber);Ib(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){pe(sl,"Failed to raise snapshot:",i),await yp(t,i)}}async function yp(t,e,n){if(!Yc(e))throw e;t.W_.add(1),await Sd(t),t.j_.set("Offline"),n||(n=()=>mD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe(sl,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await cg(t)})}function bD(t,e){return e().catch(n=>yp(t,n,e))}async function ug(t){const e=He(t),n=Ja(e);let i=e.U_.length>0?e.U_[e.U_.length-1].batchId:pb;for(;y9(e);)try{const r=await ZF(e.localStore,i);if(r===null){e.U_.length===0&&n.P_();break}i=r.batchId,v9(e,r)}catch(r){await yp(e,r)}ED(e)&&wD(e)}function y9(t){return ml(t)&&t.U_.length<10}function v9(t,e){t.U_.push(e);const n=Ja(t);n.c_()&&n.S_&&n.b_(e.mutations)}function ED(t){return ml(t)&&!Ja(t).u_()&&t.U_.length>0}function wD(t){Ja(t).start()}async function _9(t){Ja(t).C_()}async function b9(t){const e=Ja(t);for(const n of t.U_)e.b_(n.mutations)}async function E9(t,e,n){const i=t.U_.shift(),r=Eb.from(i,e,n);await bD(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ug(t)}async function w9(t,e){e&&Ja(t).S_&&await async function(i,r){if(function(l){return sF(l)&&l!==re.ABORTED}(r.code)){const o=i.U_.shift();Ja(i).h_(),await bD(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await ug(i)}}(t,e),ED(t)&&wD(t)}async function eR(t,e){const n=He(t);n.asyncQueue.verifyOperationInProgress(),pe(sl,"RemoteStore received new credentials");const i=ml(n);n.W_.add(3),await Sd(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await cg(n)}async function T9(t,e){const n=He(t);e?(n.W_.delete(2),await cg(n)):e||(n.W_.add(2),await Sd(n),n.j_.set("Unknown"))}function Xc(t){return t.J_||(t.J_=function(n,i,r){const o=He(n);return o.M_(),new o9(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{xo:f9.bind(null,t),No:m9.bind(null,t),Lo:p9.bind(null,t),p_:g9.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Db(t)?Nb(t):t.j_.set("Unknown")):(await t.J_.stop(),_D(t))})),t.J_}function Ja(t){return t.Y_||(t.Y_=function(n,i,r){const o=He(n);return o.M_(),new l9(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:_9.bind(null,t),Lo:w9.bind(null,t),D_:b9.bind(null,t),v_:E9.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await ug(t)):(await t.Y_.stop(),t.U_.length>0&&(pe(sl,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,u=new Mb(e,n,l,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pb(t,e){if(ea("AsyncQueue",`${e}: ${t}`),Yc(t))return new fe(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{static emptySet(e){return new Ac(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||xe.comparator(n.key,i.key):(n,i)=>xe.comparator(n.key,i.key),this.keyedMap=gh(),this.sortedSet=new wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ac)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ac;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.Z_=new wn(xe.comparator)}track(e){const n=e.doc.key,i=this.Z_.get(n);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(n):e.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Le():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,i)=>{e.push(i)}),e}}class kc{constructor(e,n,i,r,o,l,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach(u=>{l.push({type:0,doc:u})}),new kc(e,n,Ac.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ng(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class A9{constructor(){this.queries=nR(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const r=He(n),o=r.queries;r.queries=nR(),o.forEach((l,u)=>{for(const h of u.ta)h.onError(i)})})(this,new fe(re.ABORTED,"Firestore shutting down"))}}function nR(){return new fl(t=>qN(t),ng)}async function Ob(t,e){const n=He(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.na()&&e.ra()&&(i=2):(o=new S9,i=e.ra()?0:1);try{switch(i){case 0:o.ea=await n.onListen(r,!0);break;case 1:o.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const u=Pb(l,`Initialization of query '${uc(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.ta.push(e),e.sa(n.onlineState),o.ea&&e.oa(o.ea)&&Lb(n)}async function kb(t,e){const n=He(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?r=e.ra()?0:1:!o.na()&&e.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function x9(t,e){const n=He(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const u of l.ta)u.oa(r)&&(i=!0);l.ea=r}}i&&Lb(n)}function R9(t,e,n){const i=He(t),r=i.queries.get(e);if(r)for(const o of r.ta)o.onError(n);i.queries.delete(e)}function Lb(t){t.ia.forEach(e=>{e.next()})}var Q_,iR;(iR=Q_||(Q_={}))._a="default",iR.Cache="cache";class Vb{constructor(e,n,i){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new kc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Q_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.key=e}}class SD{constructor(e){this.key=e}}class C9{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ot(),this.mutatedKeys=ot(),this.ya=HN(e),this.wa=new Ac(this.ya)}get Sa(){return this.fa}ba(e,n){const i=n?n.Da:new tR,r=n?n.wa:this.wa;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,y)=>{const _=r.get(p),E=ig(this.query,y)?y:null,S=!!_&&this.mutatedKeys.has(_.key),R=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let I=!1;_&&E?_.data.isEqual(E.data)?S!==R&&(i.track({type:3,doc:E}),I=!0):this.va(_,E)||(i.track({type:2,doc:E}),I=!0,(h&&this.ya(E,h)>0||f&&this.ya(E,f)<0)&&(u=!0)):!_&&E?(i.track({type:0,doc:E}),I=!0):_&&!E&&(i.track({type:1,doc:_}),I=!0,(h||f)&&(u=!0)),I&&(E?(l=l.add(E),o=R?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{wa:l,Da:i,ls:u,mutatedKeys:o}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((p,y)=>function(E,S){const R=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le()}};return R(E)-R(S)}(p.type,y.type)||this.ya(p.doc,y.doc)),this.Ca(i),r=r!=null&&r;const u=n&&!r?this.Fa():[],h=this.pa.size===0&&this.current&&!r?1:0,f=h!==this.ga;return this.ga=h,l.length!==0||f?{snapshot:new kc(this.query,e.wa,o,l,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new tR,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ot(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return e.forEach(i=>{this.pa.has(i)||n.push(new SD(i))}),this.pa.forEach(i=>{e.has(i)||n.push(new TD(i))}),n}Oa(e){this.fa=e.gs,this.pa=ot();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return kc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const jb="SyncEngine";class I9{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class N9{constructor(e){this.key=e,this.Ba=!1}}class D9{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new fl(u=>qN(u),ng),this.qa=new Map,this.Qa=new Set,this.$a=new wn(xe.comparator),this.Ua=new Map,this.Ka=new Sb,this.Wa={},this.Ga=new Map,this.za=Oc.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function M9(t,e,n=!0){const i=ND(t);let r;const o=i.ka.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Na()):r=await AD(i,e,n,!0),r}async function P9(t,e){const n=ND(t);await AD(n,e,!0,!1)}async function AD(t,e,n,i){const r=await JF(t.localStore,sr(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await O9(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&yD(t.remoteStore,r),u}async function O9(t,e,n,i,r){t.Ha=(y,_,E)=>async function(R,I,P,F){let O=I.view.ba(P);O.ls&&(O=await Yx(R.localStore,I.query,!1).then(({documents:L})=>I.view.ba(L,O)));const q=F&&F.targetChanges.get(I.targetId),G=F&&F.targetMismatches.get(I.targetId)!=null,Y=I.view.applyChanges(O,R.isPrimaryClient,q,G);return rR(R,I.targetId,Y.Ma),Y.snapshot}(t,y,_,E);const o=await Yx(t.localStore,e,!0),l=new C9(e,o.gs),u=l.ba(o.documents),h=Td.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=l.applyChanges(u,t.isPrimaryClient,h);rR(t,n,f.Ma);const p=new I9(e,n,l);return t.ka.set(e,p),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),f.snapshot}async function k9(t,e,n){const i=He(t),r=i.ka.get(e),o=i.qa.get(r.targetId);if(o.length>1)return i.qa.set(r.targetId,o.filter(l=>!ng(l,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await W_(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Cb(i.remoteStore,r.targetId),X_(i,r.targetId)}).catch(Wc)):(X_(i,r.targetId),await W_(i.localStore,r.targetId,!0))}async function L9(t,e){const n=He(t),i=n.ka.get(e),r=n.qa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Cb(n.remoteStore,i.targetId))}async function V9(t,e,n){const i=H9(t);try{const r=await function(l,u){const h=He(l),f=Ht.now(),p=u.reduce((E,S)=>E.add(S.key),ot());let y,_;return h.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=ta(),R=ot();return h.ds.getEntries(E,p).next(I=>{S=I,S.forEach((P,F)=>{F.isValidDocument()||(R=R.add(P))})}).next(()=>h.localDocuments.getOverlayedDocuments(E,S)).next(I=>{y=I;const P=[];for(const F of u){const O=J6(F,y.get(F.key).overlayedDocument);O!=null&&P.push(new co(F.key,O,kN(O.value.mapValue),_i.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,P,u)}).next(I=>{_=I;const P=I.applyToLocalDocumentSet(y,R);return h.documentOverlayCache.saveOverlays(E,I.batchId,P)})}).then(()=>({batchId:_.batchId,changes:$N(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(l,u,h){let f=l.Wa[l.currentUser.toKey()];f||(f=new wn(Xe)),f=f.insert(u,h),l.Wa[l.currentUser.toKey()]=f}(i,r.batchId,n),await Ad(i,r.changes),await ug(i.remoteStore)}catch(r){const o=Pb(r,"Failed to persist write");n.reject(o)}}async function xD(t,e){const n=He(t);try{const i=await QF(n.localStore,e);e.targetChanges.forEach((r,o)=>{const l=n.Ua.get(o);l&&(Ct(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.Ba=!0:r.modifiedDocuments.size>0?Ct(l.Ba):r.removedDocuments.size>0&&(Ct(l.Ba),l.Ba=!1))}),await Ad(n,i,e)}catch(i){await Wc(i)}}function sR(t,e,n){const i=He(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&r.push(u.snapshot)}),function(l,u){const h=He(l);h.onlineState=u;let f=!1;h.queries.forEach((p,y)=>{for(const _ of y.ta)_.sa(u)&&(f=!0)}),f&&Lb(h)}(i.eventManager,e),r.length&&i.La.p_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function j9(t,e,n){const i=He(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Ua.get(e),o=r&&r.key;if(o){let l=new wn(xe.comparator);l=l.insert(o,ri.newNoDocument(o,ze.min()));const u=ot().add(o),h=new og(ze.min(),new Map,new wn(Xe),l,u);await xD(i,h),i.$a=i.$a.remove(o),i.Ua.delete(e),Ub(i)}else await W_(i.localStore,e,!1).then(()=>X_(i,e,n)).catch(Wc)}async function U9(t,e){const n=He(t),i=e.batch.batchId;try{const r=await YF(n.localStore,e);CD(n,i,null),RD(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ad(n,r)}catch(r){await Wc(r)}}async function F9(t,e,n){const i=He(t);try{const r=await function(l,u){const h=He(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next(y=>(Ct(y!==null),p=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>h.localDocuments.getDocuments(f,p))})}(i.localStore,e);CD(i,e,n),RD(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ad(i,r)}catch(r){await Wc(r)}}function RD(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function CD(t,e,n){const i=He(t);let r=i.Wa[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Wa[i.currentUser.toKey()]=r}}function X_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),n&&t.La.Ja(i,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(i=>{t.Ka.containsKey(i)||ID(t,i)})}function ID(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(Cb(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),Ub(t))}function rR(t,e,n){for(const i of n)i instanceof TD?(t.Ka.addReference(i.key,e),B9(t,i)):i instanceof SD?(pe(jb,"Document no longer in limbo: "+i.key),t.Ka.removeReference(i.key,e),t.Ka.containsKey(i.key)||ID(t,i.key)):Le()}function B9(t,e){const n=e.key,i=n.path.canonicalString();t.$a.get(n)||t.Qa.has(i)||(pe(jb,"New document in limbo: "+n),t.Qa.add(i),Ub(t))}function Ub(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new xe(Qt.fromString(e)),i=t.za.next();t.Ua.set(i,new N9(n)),t.$a=t.$a.insert(n,i),yD(t.remoteStore,new za(sr(tg(n.path)),i,"TargetPurposeLimboResolution",Zp.ae))}}async function Ad(t,e,n){const i=He(t),r=[],o=[],l=[];i.ka.isEmpty()||(i.ka.forEach((u,h)=>{l.push(i.Ha(h,e,n).then(f=>{var p;if((f||n)&&i.isPrimaryClient){const y=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){r.push(f);const y=xb.Yi(h.targetId,f);o.push(y)}}))}),await Promise.all(l),i.La.p_(r),await async function(h,f){const p=He(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>oe.forEach(f,_=>oe.forEach(_.Hi,E=>p.persistence.referenceDelegate.addReference(y,_.targetId,E)).next(()=>oe.forEach(_.Ji,E=>p.persistence.referenceDelegate.removeReference(y,_.targetId,E)))))}catch(y){if(!Yc(y))throw y;pe(Rb,"Failed to update sequence numbers: "+y)}for(const y of f){const _=y.targetId;if(!y.fromCache){const E=p.Ts.get(_),S=E.snapshotVersion,R=E.withLastLimboFreeSnapshotVersion(S);p.Ts=p.Ts.insert(_,R)}}}(i.localStore,o))}async function z9(t,e){const n=He(t);if(!n.currentUser.isEqual(e)){pe(jb,"User change. New user:",e.toKey());const i=await fD(n.localStore,e);n.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(h=>{h.reject(new fe(re.CANCELLED,l))})}),o.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ad(n,i.Rs)}}function q9(t,e){const n=He(t),i=n.Ua.get(e);if(i&&i.Ba)return ot().add(i.key);{let r=ot();const o=n.qa.get(e);if(!o)return r;for(const l of o){const u=n.ka.get(l);r=r.unionWith(u.view.Sa)}return r}}function ND(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j9.bind(null,e),e.La.p_=x9.bind(null,e.eventManager),e.La.Ja=R9.bind(null,e.eventManager),e}function H9(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F9.bind(null,e),e}class vp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lg(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return WF(this.persistence,new GF,e.initialUser,this.serializer)}Xa(e){return new dD(Ab.ri,this.serializer)}Za(e){return new t9}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vp.provider={build:()=>new vp};class G9 extends vp{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Ct(this.persistence.referenceDelegate instanceof gp);const i=this.persistence.referenceDelegate.garbageCollector;return new NF(i,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?xi.withCacheSize(this.cacheSizeBytes):xi.DEFAULT;return new dD(i=>gp.ri(i,n),this.serializer)}}class Z_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=z9.bind(null,this.syncEngine),await T9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A9}()}createDatastore(e){const n=lg(e.databaseInfo.databaseId),i=function(o){return new a9(o)}(e.databaseInfo);return function(o,l,u,h){return new u9(o,l,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,l,u){return new d9(i,r,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,n=>sR(this.syncEngine,n,0),function(){return Zx.D()?new Zx:new n9}())}createSyncEngine(e,n){return function(r,o,l,u,h,f,p){const y=new D9(r,o,l,u,h,f);return p&&(y.ja=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=He(r);pe(sl,"RemoteStore shutting down."),o.W_.add(5),await Sd(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Z_.provider={build:()=>new Z_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ea("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="FirestoreClient";class $9{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ii.UNAUTHENTICATED,this.clientId=AN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{pe(eo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(pe(eo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Pb(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Gv(t,e){t.asyncQueue.verifyOperationInProgress(),pe(eo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await fD(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function aR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await K9(t);pe(eo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>eR(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>eR(e.remoteStore,r)),t._onlineComponents=e}async function K9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(eo,"Using user provided OfflineComponentProvider");try{await Gv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===re.FAILED_PRECONDITION||r.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Nc("Error using user provided cache. Falling back to memory cache: "+n),await Gv(t,new vp)}}else pe(eo,"Using default OfflineComponentProvider"),await Gv(t,new G9(void 0));return t._offlineComponents}async function DD(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(eo,"Using user provided OnlineComponentProvider"),await aR(t,t._uninitializedComponentsProvider._online)):(pe(eo,"Using default OnlineComponentProvider"),await aR(t,new Z_))),t._onlineComponents}function W9(t){return DD(t).then(e=>e.syncEngine)}async function _p(t){const e=await DD(t),n=e.eventManager;return n.onListen=M9.bind(null,e.syncEngine),n.onUnlisten=k9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L9.bind(null,e.syncEngine),n}function Y9(t,e,n={}){const i=new Kr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,h,f){const p=new Fb({next:_=>{p.su(),l.enqueueAndForget(()=>kb(o,y));const E=_.docs.has(u);!E&&_.fromCache?f.reject(new fe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&h&&h.source==="server"?f.reject(new fe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new Vb(tg(u.path),p,{includeMetadataChanges:!0,Ta:!0});return Ob(o,y)}(await _p(t),t.asyncQueue,e,n,i)),i.promise}function Q9(t,e,n={}){const i=new Kr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,h,f){const p=new Fb({next:_=>{p.su(),l.enqueueAndForget(()=>kb(o,y)),_.fromCache&&h.source==="server"?f.reject(new fe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new Vb(u,p,{includeMetadataChanges:!0,Ta:!0});return Ob(o,y)}(await _p(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t,e,n){if(!n)throw new fe(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X9(t,e,n,i){if(e===!0&&i===!0)throw new fe(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lR(t){if(!xe.isDocumentKey(t))throw new fe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cR(t){if(xe.isDocumentKey(t))throw new fe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Le()}function bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hg(t);throw new fe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="firestore.googleapis.com",uR=!0;class hR{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OD,this.ssl=uR}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:uR;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CF)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MD((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dg{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new s6;switch(i.type){case"firstParty":return new l6(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=oR.get(n);i&&(pe("ComponentProvider","Removing Datastore"),oR.delete(n),i.terminate())}(this),Promise.resolve()}}function Z9(t,e,n,i={}){var r;const o=(t=bi(t,dg))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o.host!==OD&&o.host!==u&&Nc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:i});if(!Xr(h,l)&&(t._setSettings(h),i.mockUserToken)){let f,p;if(typeof i.mockUserToken=="string")f=i.mockUserToken,p=ii.MOCK_USER;else{f=Z0(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new fe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ii(y)}t._authCredentials=new r6(new TN(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class hi{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hi(this.firestore,e,this._key)}}class Ka extends uo{constructor(e,n,i){super(e,n,tg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hi(this.firestore,null,new xe(e))}withConverter(e){return new Ka(this.firestore,e,this._path)}}function mn(t,e,...n){if(t=$t(t),PD("collection","path",e),t instanceof dg){const i=Qt.fromString(e,...n);return cR(i),new Ka(t,null,i)}{if(!(t instanceof hi||t instanceof Ka))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Qt.fromString(e,...n));return cR(i),new Ka(t.firestore,null,i)}}function $e(t,e,...n){if(t=$t(t),arguments.length===1&&(e=AN.newId()),PD("doc","path",e),t instanceof dg){const i=Qt.fromString(e,...n);return lR(i),new hi(t,null,new xe(i))}{if(!(t instanceof hi||t instanceof Ka))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Qt.fromString(e,...n));return lR(i),new hi(t.firestore,t instanceof Ka?t.converter:null,new xe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="AsyncQueue";class fR{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new pD(this,"async_queue_retry"),this.Su=()=>{const i=Hv();i&&pe(dR,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const n=Hv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Hv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Kr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Yc(e))throw e;pe(dR,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const r=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(i);throw ea("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(e,n,i){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const r=Mb.createAndSchedule(this,e,n,i,o=>this.Fu(o));return this.fu.push(r),r}Du(){this.gu&&Le()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function mR(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class hr extends dg{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new fR,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fR(e),this._firestoreClient=void 0,await e}}}function fg(t,e){const n=typeof t=="object"?t:yd(),i=typeof t=="string"?t:hp,r=aa(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=Q0("firestore");o&&Z9(r,...o)}return r}function xd(t){if(t._terminated)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||J9(t),t._firestoreClient}function J9(t){var e,n,i;const r=t._freezeSettings(),o=function(u,h,f,p){return new T6(u,h,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,MD(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new $9(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lc(Xn.fromBase64String(e))}catch(n){throw new fe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lc(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=/^__.*__$/;class tB{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,n,this.fieldTransforms):new wd(e,this.data,n,this.fieldTransforms)}}class kD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new co(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le()}}class qb{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new qb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ku({path:i,Qu:!1});return r.$u(e),r}Uu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return bp(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(LD(this.Lu)&&eB.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class nB{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||lg(e)}ju(e,n,i,r=!1){return new qb({Lu:e,methodName:n,zu:i,path:Qn.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cd(t){const e=t._freezeSettings(),n=lg(t._databaseId);return new nB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hb(t,e,n,i,r,o={}){const l=t.ju(o.merge||o.mergeFields?2:0,e,n,r);$b("Data must be an object, but it was:",l,i);const u=UD(i,l);let h,f;if(o.merge)h=new $i(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const _=J_(e,y,n);if(!l.contains(_))throw new fe(re.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);BD(p,_)||p.push(_)}h=new $i(p),f=l.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=l.fieldTransforms;return new tB(new Ci(u),h,f)}class pg extends mg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pg}}class Gb extends mg{_toFieldTransform(e){return new Y6(e.path,new Xh)}isEqual(e){return e instanceof Gb}}function VD(t,e,n,i){const r=t.ju(1,e,n);$b("Data must be an object, but it was:",r,i);const o=[],l=Ci.empty();lo(i,(h,f)=>{const p=Kb(e,h,n);f=$t(f);const y=r.Uu(p);if(f instanceof pg)o.push(p);else{const _=Id(f,y);_!=null&&(o.push(p),l.set(p,_))}});const u=new $i(o);return new kD(l,u,r.fieldTransforms)}function jD(t,e,n,i,r,o){const l=t.ju(1,e,n),u=[J_(e,i,n)],h=[r];if(o.length%2!=0)throw new fe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(J_(e,o[_])),h.push(o[_+1]);const f=[],p=Ci.empty();for(let _=u.length-1;_>=0;--_)if(!BD(f,u[_])){const E=u[_];let S=h[_];S=$t(S);const R=l.Uu(E);if(S instanceof pg)f.push(E);else{const I=Id(S,R);I!=null&&(f.push(E),p.set(E,I))}}const y=new $i(f);return new kD(p,y,l.fieldTransforms)}function iB(t,e,n,i=!1){return Id(n,t.ju(i?4:3,e))}function Id(t,e){if(FD(t=$t(t)))return $b("Unsupported field value:",e,t),UD(t,e);if(t instanceof mg)return function(i,r){if(!LD(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,r){const o=[];let l=0;for(const u of i){let h=Id(u,r.Ku(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=$t(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $6(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ht.fromDate(i);return{timestampValue:pp(r.serializer,o)}}if(i instanceof Ht){const o=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:pp(r.serializer,o)}}if(i instanceof Bb)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lc)return{bytesValue:sD(r.serializer,i._byteString)};if(i instanceof hi){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Tb(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof zb)return function(l,u){return{mapValue:{fields:{[PN]:{stringValue:ON},[dp]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw u.Wu("VectorValues must only contain numeric values.");return bb(u.serializer,f)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${hg(i)}`)}(t,e)}function UD(t,e){const n={};return RN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(t,(i,r)=>{const o=Id(r,e.qu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function FD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ht||t instanceof Bb||t instanceof Lc||t instanceof hi||t instanceof mg||t instanceof zb)}function $b(t,e,n){if(!FD(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=hg(n);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function J_(t,e,n){if((e=$t(e))instanceof Rd)return e._internalPath;if(typeof e=="string")return Kb(t,e);throw bp("Field path arguments must be of type string or ",t,!1,void 0,n)}const sB=new RegExp("[~\\*/\\[\\]]");function Kb(t,e,n){if(e.search(sB)>=0)throw bp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rd(...e.split("."))._internalPath}catch{throw bp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bp(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${i}`),l&&(h+=` in document ${r}`),h+=")"),new fe(re.INVALID_ARGUMENT,u+t+h)}function BD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new hi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rB extends zD{data(){return super.data()}}function gg(t,e){return typeof e=="string"?Kb(t,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wb{}class HD extends Wb{}function Fr(t,e,...n){let i=[];e instanceof Wb&&i.push(e),i=i.concat(n),function(o){const l=o.filter(h=>h instanceof Yb).length,u=o.filter(h=>h instanceof yg).length;if(l>1||l>0&&u>0)throw new fe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class yg extends HD{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new yg(e,n,i)}_apply(e){const n=this._parse(e);return GD(e._query,n),new uo(e.firestore,e.converter,z_(e._query,n))}_parse(e){const n=Cd(e.firestore);return function(o,l,u,h,f,p,y){let _;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new fe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){gR(y,p);const S=[];for(const R of y)S.push(pR(h,o,R));_={arrayValue:{values:S}}}else _=pR(h,o,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||gR(y,p),_=iB(u,l,y,p==="in"||p==="not-in");return En.create(f,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ko(t,e,n){const i=e,r=gg("where",t);return yg._create(r,i,n)}class Yb extends Wb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yb(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ks.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let l=r;const u=o.getFlattenedFilters();for(const h of u)GD(l,h),l=z_(l,h)}(e._query,n),new uo(e.firestore,e.converter,z_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qb extends HD{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Qb(e,n)}_apply(e){const n=function(r,o,l){if(r.startAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qh(o,l)}(e._query,this._field,this._direction);return new uo(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Qc(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function vh(t,e="asc"){const n=e,i=gg("orderBy",t);return Qb._create(i,n)}function pR(t,e,n){if(typeof(n=$t(n))=="string"){if(n==="")throw new fe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zN(e)&&n.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Qt.fromString(n));if(!xe.isDocumentKey(i))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Nx(t,new xe(i))}if(n instanceof hi)return Nx(t,n._key);throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hg(n)}.`)}function gR(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GD(t,e){const n=function(r,o){for(const l of r)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aB{convertValue(e,n="none"){switch(Za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return lo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[dp].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(l=>pn(l.doubleValue));return new zb(o)}convertGeoPoint(e){return new Bb(pn(e.latitude),pn(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=eg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Kh(e));default:return null}}convertTimestamp(e){const n=Qa(e);return new Ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Qt.fromString(e);Ct(uD(i));const r=new Wh(i.get(1),i.get(3)),o=new xe(i.popFirst(5));return r.isEqual(n)||ea(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $D extends zD{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(gg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class qm extends $D{data(e={}){return super.data(e)}}class KD{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new _h(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new qm(this._firestore,this._userDataWriter,i.key,i,new _h(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(u=>{const h=new qm(r._firestore,r._userDataWriter,u.doc.key,u.doc,new _h(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new qm(r._firestore,r._userDataWriter,u.doc.key,u.doc,new _h(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:oB(u.type),doc:h,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t){t=bi(t,hi);const e=bi(t.firestore,hr);return Y9(xd(e),t._key).then(n=>YD(e,t,n))}class Zb extends aB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new hi(this.firestore,null,n)}}function ed(t){t=bi(t,uo);const e=bi(t.firestore,hr),n=xd(e),i=new Zb(e);return qD(t._query),Q9(n,t._query).then(r=>new KD(e,i,t,r))}function Kt(t,e,n){t=bi(t,hi);const i=bi(t.firestore,hr),r=Xb(t.converter,e,n);return Dd(i,[Hb(Cd(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,_i.none())])}function WD(t,e,n,...i){t=bi(t,hi);const r=bi(t.firestore,hr),o=Cd(r);let l;return l=typeof(e=$t(e))=="string"||e instanceof Rd?jD(o,"updateDoc",t._key,e,n,i):VD(o,"updateDoc",t._key,e),Dd(r,[l.toMutation(t._key,_i.exists(!0))])}function qr(t){return Dd(bi(t.firestore,hr),[new ag(t._key,_i.none())])}function Hm(t,e){const n=bi(t.firestore,hr),i=$e(t),r=Xb(t.converter,e);return Dd(n,[Hb(Cd(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,_i.exists(!1))]).then(()=>i)}function bh(t,...e){var n,i,r;t=$t(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||mR(e[l])||(o=e[l],l++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(mR(e[l])){const y=e[l];e[l]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[l+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[l+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}let h,f,p;if(t instanceof hi)f=bi(t.firestore,hr),p=tg(t._key.path),h={next:y=>{e[l]&&e[l](YD(f,t,y))},error:e[l+1],complete:e[l+2]};else{const y=bi(t,uo);f=bi(y.firestore,hr),p=y._query;const _=new Zb(f);h={next:E=>{e[l]&&e[l](new KD(f,_,y,E))},error:e[l+1],complete:e[l+2]},qD(t._query)}return function(_,E,S,R){const I=new Fb(R),P=new Vb(E,I,S);return _.asyncQueue.enqueueAndForget(async()=>Ob(await _p(_),P)),()=>{I.su(),_.asyncQueue.enqueueAndForget(async()=>kb(await _p(_),P))}}(xd(f),p,u,h)}function Dd(t,e){return function(i,r){const o=new Kr;return i.asyncQueue.enqueueAndForget(async()=>V9(await W9(i),r,o)),o.promise}(xd(t),e)}function YD(t,e,n){const i=n.docs.get(e._key),r=new Zb(t);return new $D(t,r,e._key,i,new _h(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Cd(e)}set(e,n,i){this._verifyNotCommitted();const r=$v(e,this._firestore),o=Xb(r.converter,n,i),l=Hb(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(l.toMutation(r._key,_i.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const o=$v(e,this._firestore);let l;return l=typeof(n=$t(n))=="string"||n instanceof Rd?jD(this._dataReader,"WriteBatch.update",o._key,n,i,r):VD(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$v(e,this._firestore);return this._mutations=this._mutations.concat(new ag(n._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $v(t,e){if((t=$t(t)).firestore!==e)throw new fe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Hi(){return new Gb("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(t){return xd(t=bi(t,hr)),new lB(t,e=>Dd(t,e))}(function(e,n=!0){(function(r){Kc=r})(ao),gs(new Yi("firestore",(i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),u=new hr(new a6(i.getProvider("auth-internal")),new c6(l,i.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new fe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wh(f.options.projectId,p)}(l,r),l);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),ui(vx,_x,e),ui(vx,_x,"esm2017")})();var uB="firebase",hB="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(uB,hB,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD="firebasestorage.googleapis.com",dB="storageBucket",fB=2*60*1e3,mB=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends _s{constructor(e,n,i=0){super(Kv(e),`Firebase Storage: ${n} (${Kv(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dr||(dr={}));function Kv(t){return"storage/"+t}function pB(){const t="An unknown error occurred, please check the error payload for server response.";return new fr(dr.UNKNOWN,t)}function gB(){return new fr(dr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yB(){return new fr(dr.CANCELED,"User canceled the upload/download.")}function vB(t){return new fr(dr.INVALID_URL,"Invalid URL '"+t+"'.")}function _B(t){return new fr(dr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yR(t){return new fr(dr.INVALID_ARGUMENT,t)}function XD(){return new fr(dr.APP_DELETED,"The Firebase app was deleted.")}function bB(t){return new fr(dr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Ds.makeFromUrl(e,n)}catch{return new Ds(e,"")}if(i.path==="")return i;throw _B(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+r+l,"i"),h={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const p="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",E=new RegExp(`^https?://${y}/${p}/b/${r}/o${_}`,"i"),S={bucket:1,path:3},R=n===QD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",P=new RegExp(`^https?://${R}/${r}/${I}`,"i"),O=[{regex:u,indices:h,postModify:o},{regex:E,indices:S,postModify:f},{regex:P,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<O.length;q++){const G=O[q],Y=G.regex.exec(e);if(Y){const L=Y[G.indices.bucket];let C=Y[G.indices.path];C||(C=""),i=new Ds(L,C),G.postModify(i);break}}if(i==null)throw vB(e);return i}}class EB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t,e,n){let i=1,r=null,o=null,l=!1,u=0;function h(){return u===2}let f=!1;function p(...I){f||(f=!0,e.apply(null,I))}function y(I){r=setTimeout(()=>{r=null,t(E,h())},I)}function _(){o&&clearTimeout(o)}function E(I,...P){if(f){_();return}if(I){_(),p.call(null,I,...P);return}if(h()||l){_(),p.call(null,I,...P);return}i<64&&(i*=2);let O;u===1?(u=2,O=0):O=(i+Math.random())*1e3,y(O)}let S=!1;function R(I){S||(S=!0,_(),!f&&(r!==null?(I||(u=2),clearTimeout(r),y(0)):I||(u=1)))}return y(0),o=setTimeout(()=>{l=!0,R(!0)},n),R}function TB(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t){return t!==void 0}function vR(t,e,n,i){if(i<e)throw yR(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw yR(`Invalid value for '${t}'. Expected ${n} or less.`)}function AB(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ep;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ep||(Ep={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,n,i,r,o,l,u,h,f,p,y,_=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=y,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Em(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===Ep.NO_ERROR,h=o.getStatus();if(!u||xB(h,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===Ep.ABORT;i(!1,new Em(!1,null,p));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new Em(f,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());SB(h)?o(h):o()}catch(h){l(h)}else if(u!==null){const h=pB();h.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,h)):l(h)}else if(r.canceled){const h=this.appDelete_?XD():yB();l(h)}else{const h=gB();l(h)}};this.canceled_?n(!1,new Em(!1,null,!0)):this.backoffId_=wB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Em{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function CB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function IB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NB(t,e){e&&(t["X-Firebase-GMPID"]=e)}function DB(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function MB(t,e,n,i,r,o,l=!0){const u=AB(t.urlParams),h=t.url+u,f=Object.assign({},t.headers);return NB(f,e),CB(f,n),IB(f,o),DB(f,i),new RB(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function OB(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){this._service=e,n instanceof Ds?this._location=n:this._location=Ds.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wp(e,n)}get root(){const e=new Ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OB(this._location.path)}get storage(){return this._service}get parent(){const e=PB(this._location.path);if(e===null)return null;const n=new Ds(this._location.bucket,e);return new wp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw bB(e)}}function _R(t,e){const n=e==null?void 0:e[dB];return n==null?null:Ds.makeFromBucketSpec(n,t)}function kB(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:Z0(r,t.app.options.projectId))}class LB{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=QD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fB,this._maxUploadRetryTime=mB,this._requests=new Set,r!=null?this._bucket=Ds.makeFromBucketSpec(r,this._host):this._bucket=_R(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ds.makeFromBucketSpec(this._url,e):this._bucket=_R(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wp(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new EB(XD());{const l=MB(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const bR="@firebase/storage",ER="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="storage";function VB(t=yd(),e){t=$t(t);const i=aa(t,ZD).getImmediate({identifier:e}),r=Q0("storage");return r&&jB(i,...r),i}function jB(t,e,n,i={}){kB(t,e,n,i)}function UB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new LB(n,i,r,e,ao)}function FB(){gs(new Yi(ZD,UB,"PUBLIC").setMultipleInstances(!0)),ui(bR,ER,""),ui(bR,ER,"esm2017")}FB();var wR={};const TR="@firebase/database",SR="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JD="";function BB(t){JD=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Yn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:zh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ra(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new zB(e)}}catch{}return new qB},Yo=e2("localStorage"),HB=e2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new gd("@firebase/database"),GB=function(){let t=1;return function(){return t++}}(),t2=function(t){const e=P4(t),n=new C4;n.update(e);const i=n.digest();return Y0.encodeByteArray(i)},Md=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Md.apply(null,i):typeof i=="object"?e+=Yn(i):e+=i,e+=" "}return e};let Ch=null,AR=!0;const $B=function(t,e){he(!0,"Can't turn on custom loggers persistently."),xc.logLevel=st.VERBOSE,Ch=xc.log.bind(xc)},ai=function(...t){if(AR===!0&&(AR=!1,Ch===null&&HB.get("logging_enabled")===!0&&$B()),Ch){const e=Md.apply(null,t);Ch(e)}},Pd=function(t){return function(...e){ai(t,...e)}},e0=function(...t){const e="FIREBASE INTERNAL ERROR: "+Md(...t);xc.error(e)},na=function(...t){const e=`FIREBASE FATAL ERROR: ${Md(...t)}`;throw xc.error(e),new Error(e)},Ki=function(...t){const e="FIREBASE WARNING: "+Md(...t);xc.warn(e)},KB=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ki("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},n2=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},WB=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Vc="[MIN_NAME]",rl="[MAX_NAME]",Zc=function(t,e){if(t===e)return 0;if(t===Vc||e===rl)return-1;if(e===Vc||t===rl)return 1;{const n=xR(t),i=xR(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},YB=function(t,e){return t===e?0:t<e?-1:1},oh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Yn(e))},Jb=function(t){if(typeof t!="object"||t===null)return Yn(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Yn(e[i]),n+=":",n+=Jb(t[e[i]]);return n+="}",n},i2=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function ys(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const s2=function(t){he(!n2(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,l,u,h;t===0?(o=0,l=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=u+i,l=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(o=0,l=Math.round(t/Math.pow(2,1-i-n))));const f=[];for(h=n;h;h-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(h=e;h;h-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(r?1:0),f.reverse();const p=f.join("");let y="";for(h=0;h<64;h+=8){let _=parseInt(p.substr(h,8),2).toString(16);_.length===1&&(_="0"+_),y=y+_}return y.toLowerCase()},QB=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},XB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},ZB=new RegExp("^-?(0*)\\d{1,10}$"),JB=-2147483648,e5=2147483647,xR=function(t){if(ZB.test(t)){const e=Number(t);if(e>=JB&&e<=e5)return e}return null},Od=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ki("Exception was thrown by user callback.",n),e},Math.floor(0))}},t5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ih=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ri(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Ki(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ai("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ki(e)}}class Gm{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Gm.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="5",r2="v",a2="s",o2="r",l2="f",c2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,u2="ls",h2="p",t0="ac",d2="websocket",f2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n,i,r,o=!1,l="",u=!1,h=!1,f=null){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=h,this.emulatorOptions=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Yo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function s5(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function p2(t,e,n){he(typeof e=="string","typeof type must == string"),he(typeof n=="object","typeof params must == object");let i;if(e===d2)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===f2)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);s5(t)&&(n.ns=t.namespace);const r=[];return ys(n,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){this.counters_={}}incrementCounter(e,n=1){ra(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return d4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv={},Yv={};function tE(t){const e=t.toString();return Wv[e]||(Wv[e]=new r5),Wv[e]}function a5(t,e){const n=t.toString();return Yv[n]||(Yv[n]=e()),Yv[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Od(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="start",l5="close",c5="pLPCommand",u5="pRTLPCB",g2="id",y2="pw",v2="ser",h5="cb",d5="seg",f5="ts",m5="d",p5="dframe",_2=1870,b2=30,g5=_2-b2,y5=25e3,v5=3e4;class mc{constructor(e,n,i,r,o,l,u){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pd(e),this.stats_=tE(n),this.urlFn=h=>(this.appCheckToken&&(h[t0]=this.appCheckToken),p2(n,f2,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new o5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(v5)),WB(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nE((...o)=>{const[l,u,h,f,p]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===RR)this.id=u,this.password=h;else if(l===l5)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[RR]="t",i[v2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[h5]=this.scriptTagHolder.uniqueCallbackIdentifier),i[r2]=eE,this.transportSessionId&&(i[a2]=this.transportSessionId),this.lastSessionId&&(i[u2]=this.lastSessionId),this.applicationId&&(i[h2]=this.applicationId),this.appCheckToken&&(i[t0]=this.appCheckToken),typeof location<"u"&&location.hostname&&c2.test(location.hostname)&&(i[o2]=l2);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mc.forceAllow_=!0}static forceDisallow(){mc.forceDisallow_=!0}static isAvailable(){return mc.forceAllow_?!0:!mc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!QB()&&!XB()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Yn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=bI(n),r=i2(i,g5);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[p5]="t",i[g2]=e,i[y2]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Yn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class nE{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=GB(),window[c5+this.uniqueCallbackIdentifier]=e,window[u5+this.uniqueCallbackIdentifier]=n,this.myIFrame=nE.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){ai("frame writing exception"),u.stack&&ai(u.stack),ai(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ai("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[g2]=this.myID,e[y2]=this.myPW,e[v2]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+b2+i.length<=_2;){const l=this.pendingSegs.shift();i=i+"&"+d5+r+"="+l.seg+"&"+f5+r+"="+l.ts+"&"+m5+r+"="+l.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(y5)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{ai("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=16384,b5=45e3;let Tp=null;typeof MozWebSocket<"u"?Tp=MozWebSocket:typeof WebSocket<"u"&&(Tp=WebSocket);class Is{constructor(e,n,i,r,o,l,u){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pd(this.connId),this.stats_=tE(n),this.connURL=Is.connectionURL_(n,l,u,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const l={};return l[r2]=eE,typeof location<"u"&&location.hostname&&c2.test(location.hostname)&&(l[o2]=l2),n&&(l[a2]=n),i&&(l[u2]=i),r&&(l[t0]=r),o&&(l[h2]=o),p2(e,d2,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yo.set("previous_websocket_failure",!0);try{let i;E4(),this.mySock=new Tp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Is.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Tp!==null&&!Is.forceDisallow_}static previouslyFailed(){return Yo.isInMemoryStorage||Yo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Yo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=zh(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(he(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Yn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=i2(n,_5);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(b5))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Is.responsesRequiredToBeHealthy=2;Is.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{static get ALL_TRANSPORTS(){return[mc,Is]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Is&&Is.isAvailable();let i=n&&!Is.previouslyFailed();if(e.webSocketOnly&&(n||Ki("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Is];else{const r=this.transports_=[];for(const o of td.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);td.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}td.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=6e4,w5=5e3,T5=10*1024,S5=100*1024,Qv="t",CR="d",A5="s",IR="r",x5="e",NR="o",DR="a",MR="n",PR="p",R5="h";class C5{constructor(e,n,i,r,o,l,u,h,f,p){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=h,this.onKill_=f,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pd("c:"+this.id+":"),this.transportManager_=new td(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ih(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>S5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>T5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qv in e){const n=e[Qv];n===DR?this.upgradeIfSecondaryHealthy_():n===IR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===NR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=oh("t",e),i=oh("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:DR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:MR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=oh("t",e),i=oh("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=oh(Qv,e);if(CR in e){const i=e[CR];if(n===R5){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===MR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===A5?this.onConnectionShutdown_(i):n===IR?this.onReset_(i):n===x5?e0("Server Error: "+i):n===NR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):e0("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),eE!==i&&Ki("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Ih(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(E5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ih(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(w5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PR,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.allowedEvents_=e,this.listeners_={},he(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){he(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp extends w2{static getInstance(){return new Sp}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!J0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return he(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=32,kR=768;class Xt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Lt(){return new Xt("")}function yt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function to(t){return t.pieces_.length-t.pieceNum_}function Yt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Xt(t.pieces_,e)}function T2(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function I5(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function S2(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function A2(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Xt(e,0)}function Bn(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Xt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Xt(n,0)}function lt(t){return t.pieceNum_>=t.pieces_.length}function fs(t,e){const n=yt(t),i=yt(e);if(n===null)return e;if(n===i)return fs(Yt(t),Yt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function x2(t,e){if(to(t)!==to(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Ms(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(to(t)>to(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class N5{constructor(e,n){this.errorPrefix_=n,this.parts_=S2(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Wp(this.parts_[i]);R2(this)}}function D5(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Wp(e),R2(t)}function M5(t){const e=t.parts_.pop();t.byteLength_-=Wp(e),t.parts_.length>0&&(t.byteLength_-=1)}function R2(t){if(t.byteLength_>kR)throw new Error(t.errorPrefix_+"has a key path longer than "+kR+" bytes ("+t.byteLength_+").");if(t.parts_.length>OR)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+OR+") or object contains a cycle "+Ho(t))}function Ho(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE extends w2{static getInstance(){return new iE}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return he(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=1e3,P5=60*5*1e3,LR=30*1e3,O5=1.3,k5=3e4,L5="server_kill",VR=3;class Wr extends E2{constructor(e,n,i,r,o,l,u,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=h,this.id=Wr.nextPersistentConnectionId_++,this.log_=Pd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lh,this.maxReconnectDelay_=P5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iE.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Sp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(Yn(o)),he(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new X0,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),he(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(l).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},l="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,u=>{const h=u.d,f=u.s;Wr.warnOnListenWarnings_(h,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",u),f!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(f,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ra(e,"w")){const i=Ic(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Ki(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||R4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=LR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=x4(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,l=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},l="n";r&&(o.q=i,o.t=r),this.sendRequest(l,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const l={p:n,d:i};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Yn(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):e0("Unrecognized action received from server: "+Yn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){he(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=lh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>k5&&(this.reconnectDelay_=lh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*O5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Wr.nextConnectionId_++,o=this.lastSessionId;let l=!1,u=null;const h=function(){u?u.close():(l=!0,i())},f=function(y){he(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(y)};this.realtime_={close:h,sendRequest:f};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,_]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);l?ai("getToken() completed but was canceled"):(ai("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=_&&_.token,u=new C5(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,E=>{Ki(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(L5)},o))}catch(y){this.log_("Failed to get token: "+y),l||(this.repoInfo_.nodeAdmin&&Ki(y),h())}}}interrupt(e){ai("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ai("Resuming connection for reason: "+e),delete this.interruptReasons_[e],x_(this.interruptReasons_)&&(this.reconnectDelay_=lh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>Jb(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new Xt(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){ai("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=VR&&(this.reconnectDelay_=LR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ai("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=VR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+JD.replace(/\./g,"-")]=1,J0()?e["framework.cordova"]=1:AI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Sp.getInstance().currentlyOnline();return x_(this.interruptReasons_)&&e}}Wr.nextPersistentConnectionId_=0;Wr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new vt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new vt(Vc,e),r=new vt(Vc,n);return this.compare(i,r)!==0}minPost(){return vt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wm;class C2 extends vg{static get __EMPTY_NODE(){return wm}static set __EMPTY_NODE(e){wm=e}compare(e,n){return Zc(e.name,n.name)}isDefinedOn(e){throw Hc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return vt.MIN}maxPost(){return new vt(rl,wm)}makePost(e,n){return he(typeof e=="string","KeyIndex indexValue must always be a string."),new vt(e,wm)}toString(){return".key"}}const Rc=new C2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?i(e.key,n):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class jn{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??jn.RED,this.left=r??Ii.EMPTY_NODE,this.right=o??Ii.EMPTY_NODE}copy(e,n,i,r,o){return new jn(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ii.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Ii.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}jn.RED=!0;jn.BLACK=!1;class V5{copy(e,n,i,r,o){return this}insert(e,n,i){return new jn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ii{constructor(e,n=Ii.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ii(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jn.BLACK,null,null))}remove(e){return new Ii(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jn.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Tm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Tm(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Tm(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Tm(this.root_,null,this.comparator_,!0,e)}}Ii.EMPTY_NODE=new V5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(t,e){return Zc(t.name,e.name)}function sE(t,e){return Zc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n0;function U5(t){n0=t}const I2=function(t){return typeof t=="number"?"number:"+s2(t):"string:"+t},N2=function(t){if(t.isLeafNode()){const e=t.val();he(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ra(e,".sv"),"Priority must be a string or number.")}else he(t===n0||t.isEmpty(),"priority of unexpected type.");he(t===n0||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jR;class Ln{static set __childrenNodeConstructor(e){jR=e}static get __childrenNodeConstructor(){return jR}constructor(e,n=Ln.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,he(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),N2(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ln(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ln.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return lt(e)?this:yt(e)===".priority"?this.priorityNode_:Ln.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ln.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=yt(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(he(i!==".priority"||to(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Ln.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+I2(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=s2(this.value_):e+=this.value_,this.lazyHash_=t2(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ln.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ln.__childrenNodeConstructor?-1:(he(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Ln.VALUE_TYPE_ORDER.indexOf(n),o=Ln.VALUE_TYPE_ORDER.indexOf(i);return he(r>=0,"Unknown leaf type: "+n),he(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ln.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D2,M2;function F5(t){D2=t}function B5(t){M2=t}class z5 extends vg{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Zc(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return vt.MIN}maxPost(){return new vt(rl,new Ln("[PRIORITY-POST]",M2))}makePost(e,n){const i=D2(e);return new vt(n,new Ln("[PRIORITY-POST]",i))}toString(){return".priority"}}const li=new z5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=Math.log(2);class H5{constructor(e){const n=o=>parseInt(Math.log(o)/q5,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ap=function(t,e,n,i){t.sort(e);const r=function(h,f){const p=f-h;let y,_;if(p===0)return null;if(p===1)return y=t[h],_=n?n(y):y,new jn(_,y.node,jn.BLACK,null,null);{const E=parseInt(p/2,10)+h,S=r(h,E),R=r(E+1,f);return y=t[E],_=n?n(y):y,new jn(_,y.node,jn.BLACK,S,R)}},o=function(h){let f=null,p=null,y=t.length;const _=function(S,R){const I=y-S,P=y;y-=S;const F=r(I+1,P),O=t[I],q=n?n(O):O;E(new jn(q,O.node,R,null,F))},E=function(S){f?(f.left=S,f=S):(p=S,f=S)};for(let S=0;S<h.count;++S){const R=h.nextBitIsOne(),I=Math.pow(2,h.count-(S+1));R?_(I,jn.BLACK):(_(I,jn.BLACK),_(I,jn.RED))}return p},l=new H5(t.length),u=o(l);return new Ii(i||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xv;const oc={};class Hr{static get Default(){return he(oc&&li,"ChildrenNode.ts has not been loaded"),Xv=Xv||new Hr({".priority":oc},{".priority":li}),Xv}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ic(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ii?n:null}hasIndex(e){return ra(this.indexSet_,e.toString())}addIndex(e,n){he(e!==Rc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(vt.Wrap);let l=o.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=o.getNext();let u;r?u=Ap(i,e.getCompare()):u=oc;const h=e.toString(),f=Object.assign({},this.indexSet_);f[h]=e;const p=Object.assign({},this.indexes_);return p[h]=u,new Hr(p,f)}addToIndexes(e,n){const i=ep(this.indexes_,(r,o)=>{const l=Ic(this.indexSet_,o);if(he(l,"Missing index implementation for "+o),r===oc)if(l.isDefinedOn(e.node)){const u=[],h=n.getIterator(vt.Wrap);let f=h.getNext();for(;f;)f.name!==e.name&&u.push(f),f=h.getNext();return u.push(e),Ap(u,l.getCompare())}else return oc;else{const u=n.get(e.name);let h=r;return u&&(h=h.remove(new vt(e.name,u))),h.insert(e,e.node)}});return new Hr(i,this.indexSet_)}removeFromIndexes(e,n){const i=ep(this.indexes_,r=>{if(r===oc)return r;{const o=n.get(e.name);return o?r.remove(new vt(e.name,o)):r}});return new Hr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch;class Rt{static get EMPTY_NODE(){return ch||(ch=new Rt(new Ii(sE),null,Hr.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&N2(this.priorityNode_),this.children_.isEmpty()&&he(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ch}updatePriority(e){return this.children_.isEmpty()?this:new Rt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ch:n}}getChild(e){const n=yt(e);return n===null?this:this.getImmediateChild(n).getChild(Yt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(he(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new vt(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?ch:this.priorityNode_;return new Rt(r,l,o)}}updateChild(e,n){const i=yt(e);if(i===null)return n;{he(yt(e)!==".priority"||to(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Yt(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(li,(l,u)=>{n[l]=u.val(e),i++,o&&Rt.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):o=!1}),!e&&o&&r<2*i){const l=[];for(const u in n)l[u]=n[u];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+I2(this.getPriority().val())+":"),this.forEachChild(li,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":t2(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new vt(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new vt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new vt(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,vt.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,vt.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===kd?-1:0}withIndex(e){if(e===Rc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Rt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Rc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(li),r=n.getIterator(li);let o=i.getNext(),l=r.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=i.getNext(),l=r.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Rc?null:this.indexMap_.get(e.toString())}}Rt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class G5 extends Rt{constructor(){super(new Ii(sE),Rt.EMPTY_NODE,Hr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Rt.EMPTY_NODE}isEmpty(){return!1}}const kd=new G5;Object.defineProperties(vt,{MIN:{value:new vt(Vc,Rt.EMPTY_NODE)},MAX:{value:new vt(rl,kd)}});C2.__EMPTY_NODE=Rt.EMPTY_NODE;Ln.__childrenNodeConstructor=Rt;U5(kd);B5(kd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=!0;function oi(t,e=null){if(t===null)return Rt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),he(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ln(n,oi(e))}if(!(t instanceof Array)&&$5){const n=[];let i=!1;if(ys(t,(l,u)=>{if(l.substring(0,1)!=="."){const h=oi(u);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),n.push(new vt(l,h)))}}),n.length===0)return Rt.EMPTY_NODE;const o=Ap(n,j5,l=>l.name,sE);if(i){const l=Ap(n,li.getCompare());return new Rt(o,oi(e),new Hr({".priority":l},{".priority":li}))}else return new Rt(o,oi(e),Hr.Default)}else{let n=Rt.EMPTY_NODE;return ys(t,(i,r)=>{if(ra(t,i)&&i.substring(0,1)!=="."){const o=oi(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(oi(e))}}F5(oi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5 extends vg{constructor(e){super(),this.indexPath_=e,he(!lt(e)&&yt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Zc(e.name,n.name):o}makePost(e,n){const i=oi(e),r=Rt.EMPTY_NODE.updateChild(this.indexPath_,i);return new vt(n,r)}maxPost(){const e=Rt.EMPTY_NODE.updateChild(this.indexPath_,kd);return new vt(rl,e)}toString(){return S2(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5 extends vg{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Zc(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return vt.MIN}maxPost(){return vt.MAX}makePost(e,n){const i=oi(e);return new vt(n,i)}toString(){return".value"}}const Y5=new W5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t){return{type:"value",snapshotNode:t}}function X5(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Z5(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function UR(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function J5(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=li}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return he(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return he(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vc}hasEnd(){return this.endSet_}getIndexEndValue(){return he(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return he(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return he(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===li}copy(){const e=new rE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function FR(t){const e={};if(t.isDefault())return e;let n;if(t.index_===li?n="$priority":t.index_===Y5?n="$value":t.index_===Rc?n="$key":(he(t.index_ instanceof K5,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Yn(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Yn(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Yn(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Yn(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Yn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function BR(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==li&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends E2{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(he(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Pd("p:rest:"),this.listens_={}}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=xp.getListenId_(e,i),u={};this.listens_[l]=u;const h=FR(e._queryParams);this.restRequest_(o+".json",h,(f,p)=>{let y=p;if(f===404&&(y=null,f=null),f===null&&this.onDataUpdate_(o,y,!1,i),Ic(this.listens_,l)===u){let _;f?f===401?_="permission_denied":_="rest_error:"+f:_="ok",r(_,null)}})}unlisten(e,n){const i=xp.getListenId_(e,n);delete this.listens_[i]}get(e){const n=FR(e._queryParams),i=e._path.toString(),r=new X0;return this.restRequest_(i+".json",n,(o,l)=>{let u=l;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(i,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Gc(n);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let h=null;if(u.status>=200&&u.status<300){try{h=zh(u.responseText)}catch{Ki("Failed to parse JSON response for "+l+": "+u.responseText)}i(null,h)}else u.status!==401&&u.status!==404&&Ki("Got unsuccessful REST response for "+l+" Status: "+u.status),i(u.status);i=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(){this.rootNode_=Rt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(){return{value:null,children:new Map}}function P2(t,e,n){if(lt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=yt(e);t.children.has(i)||t.children.set(i,Rp());const r=t.children.get(i);e=Yt(e),P2(r,e,n)}}function i0(t,e,n){t.value!==null?n(e,t.value):tz(t,(i,r)=>{const o=new Xt(e.toString()+"/"+i);i0(r,o,n)})}function tz(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ys(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=10*1e3,iz=30*1e3,sz=5*60*1e3;class rz{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new nz(e);const i=zR+(iz-zR)*Math.random();Ih(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;ys(e,(r,o)=>{o>0&&ra(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),Ih(this.reportStats_.bind(this),Math.floor(Math.random()*2*sz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(tr||(tr={}));function O2(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function k2(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function L2(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=tr.ACK_USER_WRITE,this.source=O2()}operationForChild(e){if(lt(this.path)){if(this.affectedTree.value!=null)return he(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Xt(e));return new Cp(Lt(),n,this.revert)}}else return he(yt(this.path)===e,"operationForChild called for unrelated child."),new Cp(Yt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=tr.OVERWRITE}operationForChild(e){return lt(this.path)?new al(this.source,Lt(),this.snap.getImmediateChild(e)):new al(this.source,Yt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=tr.MERGE}operationForChild(e){if(lt(this.path)){const n=this.children.subtree(new Xt(e));return n.isEmpty()?null:n.value?new al(this.source,Lt(),n.value):new nd(this.source,Lt(),n)}else return he(yt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new nd(this.source,Yt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(lt(e))return this.isFullyInitialized()&&!this.filtered_;const n=yt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function az(t,e,n,i){const r=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(J5(l.childName,l.snapshotNode))}),uh(t,r,"child_removed",e,i,n),uh(t,r,"child_added",e,i,n),uh(t,r,"child_moved",o,i,n),uh(t,r,"child_changed",e,i,n),uh(t,r,"value",e,i,n),r}function uh(t,e,n,i,r,o){const l=i.filter(u=>u.type===n);l.sort((u,h)=>lz(t,u,h)),l.forEach(u=>{const h=oz(t,u,o);r.forEach(f=>{f.respondsTo(u.type)&&e.push(f.createEvent(h,t.query_))})})}function oz(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function lz(t,e,n){if(e.childName==null||n.childName==null)throw Hc("Should only compare child_ events.");const i=new vt(e.childName,e.snapshotNode),r=new vt(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e){return{eventCache:t,serverCache:e}}function Nh(t,e,n,i){return V2(new aE(e,n,i),t.serverCache)}function j2(t,e,n,i){return V2(t.eventCache,new aE(e,n,i))}function s0(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ol(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zv;const cz=()=>(Zv||(Zv=new Ii(YB)),Zv);class Wt{static fromObject(e){let n=new Wt(null);return ys(e,(i,r)=>{n=n.set(new Xt(i),r)}),n}constructor(e,n=cz()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Lt(),value:this.value};if(lt(e))return null;{const i=yt(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(Yt(e),n);return o!=null?{path:Bn(new Xt(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(lt(e))return this;{const n=yt(e),i=this.children.get(n);return i!==null?i.subtree(Yt(e)):new Wt(null)}}set(e,n){if(lt(e))return new Wt(n,this.children);{const i=yt(e),o=(this.children.get(i)||new Wt(null)).set(Yt(e),n),l=this.children.insert(i,o);return new Wt(this.value,l)}}remove(e){if(lt(e))return this.children.isEmpty()?new Wt(null):new Wt(null,this.children);{const n=yt(e),i=this.children.get(n);if(i){const r=i.remove(Yt(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new Wt(null):new Wt(this.value,o)}else return this}}get(e){if(lt(e))return this.value;{const n=yt(e),i=this.children.get(n);return i?i.get(Yt(e)):null}}setTree(e,n){if(lt(e))return n;{const i=yt(e),o=(this.children.get(i)||new Wt(null)).setTree(Yt(e),n);let l;return o.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,o),new Wt(this.value,l)}}fold(e){return this.fold_(Lt(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Bn(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Lt(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(lt(e))return null;{const o=yt(e),l=this.children.get(o);return l?l.findOnPath_(Yt(e),Bn(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Lt(),n)}foreachOnPath_(e,n,i){if(lt(e))return this;{this.value&&i(n,this.value);const r=yt(e),o=this.children.get(r);return o?o.foreachOnPath_(Yt(e),Bn(n,r),i):new Wt(null)}}foreach(e){this.foreach_(Lt(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Bn(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.writeTree_=e}static empty(){return new Ps(new Wt(null))}}function Dh(t,e,n){if(lt(e))return new Ps(new Wt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const l=fs(r,e);return o=o.updateChild(l,n),new Ps(t.writeTree_.set(r,o))}else{const r=new Wt(n),o=t.writeTree_.setTree(e,r);return new Ps(o)}}}function qR(t,e,n){let i=t;return ys(n,(r,o)=>{i=Dh(i,Bn(e,r),o)}),i}function HR(t,e){if(lt(e))return Ps.empty();{const n=t.writeTree_.setTree(e,new Wt(null));return new Ps(n)}}function r0(t,e){return pl(t,e)!=null}function pl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(fs(n.path,e)):null}function GR(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(li,(i,r)=>{e.push(new vt(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new vt(i,r.value))}),e}function Wa(t,e){if(lt(e))return t;{const n=pl(t,e);return n!=null?new Ps(new Wt(n)):new Ps(t.writeTree_.subtree(e))}}function a0(t){return t.writeTree_.isEmpty()}function jc(t,e){return U2(Lt(),t.writeTree_,e)}function U2(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(he(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=U2(Bn(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Bn(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t,e){return G2(e,t)}function uz(t,e,n,i,r){he(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Dh(t.visibleWrites,e,n)),t.lastWriteId=i}function hz(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function dz(t,e){const n=t.allWrites.findIndex(u=>u.writeId===e);he(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,l=t.allWrites.length-1;for(;r&&l>=0;){const u=t.allWrites[l];u.visible&&(l>=n&&fz(u,i.path)?r=!1:Ms(i.path,u.path)&&(o=!0)),l--}if(r){if(o)return mz(t),!0;if(i.snap)t.visibleWrites=HR(t.visibleWrites,i.path);else{const u=i.children;ys(u,h=>{t.visibleWrites=HR(t.visibleWrites,Bn(i.path,h))})}return!0}else return!1}function fz(t,e){if(t.snap)return Ms(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ms(Bn(t.path,n),e))return!0;return!1}function mz(t){t.visibleWrites=B2(t.allWrites,pz,Lt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function pz(t){return t.visible}function B2(t,e,n){let i=Ps.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const l=o.path;let u;if(o.snap)Ms(n,l)?(u=fs(n,l),i=Dh(i,u,o.snap)):Ms(l,n)&&(u=fs(l,n),i=Dh(i,Lt(),o.snap.getChild(u)));else if(o.children){if(Ms(n,l))u=fs(n,l),i=qR(i,u,o.children);else if(Ms(l,n))if(u=fs(l,n),lt(u))i=qR(i,Lt(),o.children);else{const h=Ic(o.children,yt(u));if(h){const f=h.getChild(Yt(u));i=Dh(i,Lt(),f)}}}else throw Hc("WriteRecord should have .snap or .children")}}return i}function z2(t,e,n,i,r){if(!i&&!r){const o=pl(t.visibleWrites,e);if(o!=null)return o;{const l=Wa(t.visibleWrites,e);if(a0(l))return n;if(n==null&&!r0(l,Lt()))return null;{const u=n||Rt.EMPTY_NODE;return jc(l,u)}}}else{const o=Wa(t.visibleWrites,e);if(!r&&a0(o))return n;if(!r&&n==null&&!r0(o,Lt()))return null;{const l=function(f){return(f.visible||r)&&(!i||!~i.indexOf(f.writeId))&&(Ms(f.path,e)||Ms(e,f.path))},u=B2(t.allWrites,l,e),h=n||Rt.EMPTY_NODE;return jc(u,h)}}}function gz(t,e,n){let i=Rt.EMPTY_NODE;const r=pl(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(li,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(n){const o=Wa(t.visibleWrites,e);return n.forEachChild(li,(l,u)=>{const h=jc(Wa(o,new Xt(l)),u);i=i.updateImmediateChild(l,h)}),GR(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const o=Wa(t.visibleWrites,e);return GR(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function yz(t,e,n,i,r){he(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=Bn(e,n);if(r0(t.visibleWrites,o))return null;{const l=Wa(t.visibleWrites,o);return a0(l)?r.getChild(n):jc(l,r.getChild(n))}}function vz(t,e,n,i){const r=Bn(e,n),o=pl(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const l=Wa(t.visibleWrites,r);return jc(l,i.getNode().getImmediateChild(n))}else return null}function _z(t,e){return pl(t.visibleWrites,e)}function bz(t,e,n,i,r,o,l){let u;const h=Wa(t.visibleWrites,e),f=pl(h,Lt());if(f!=null)u=f;else if(n!=null)u=jc(h,n);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const p=[],y=l.getCompare(),_=o?u.getReverseIteratorFrom(i,l):u.getIteratorFrom(i,l);let E=_.getNext();for(;E&&p.length<r;)y(E,i)!==0&&p.push(E),E=_.getNext();return p}else return[]}function Ez(){return{visibleWrites:Ps.empty(),allWrites:[],lastWriteId:-1}}function o0(t,e,n,i){return z2(t.writeTree,t.treePath,e,n,i)}function q2(t,e){return gz(t.writeTree,t.treePath,e)}function $R(t,e,n,i){return yz(t.writeTree,t.treePath,e,n,i)}function Ip(t,e){return _z(t.writeTree,Bn(t.treePath,e))}function wz(t,e,n,i,r,o){return bz(t.writeTree,t.treePath,e,n,i,r,o)}function oE(t,e,n){return vz(t.writeTree,t.treePath,e,n)}function H2(t,e){return G2(Bn(t.treePath,e),t.writeTree)}function G2(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;he(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),he(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,UR(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Z5(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,X5(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,UR(i,e.snapshotNode,r.oldSnap));else throw Hc("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const $2=new Sz;class lE{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new aE(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oE(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ol(this.viewCache_),o=wz(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}function Az(t,e){he(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),he(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function xz(t,e,n,i,r){const o=new Tz;let l,u;if(n.type===tr.OVERWRITE){const f=n;f.source.fromUser?l=l0(t,e,f.path,f.snap,i,r,o):(he(f.source.fromServer,"Unknown source."),u=f.source.tagged||e.serverCache.isFiltered()&&!lt(f.path),l=Np(t,e,f.path,f.snap,i,r,u,o))}else if(n.type===tr.MERGE){const f=n;f.source.fromUser?l=Cz(t,e,f.path,f.children,i,r,o):(he(f.source.fromServer,"Unknown source."),u=f.source.tagged||e.serverCache.isFiltered(),l=c0(t,e,f.path,f.children,i,r,u,o))}else if(n.type===tr.ACK_USER_WRITE){const f=n;f.revert?l=Dz(t,e,f.path,i,r,o):l=Iz(t,e,f.path,f.affectedTree,i,r,o)}else if(n.type===tr.LISTEN_COMPLETE)l=Nz(t,e,n.path,i,o);else throw Hc("Unknown operation type: "+n.type);const h=o.getChanges();return Rz(e,l,h),{viewCache:l,changes:h}}function Rz(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=s0(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(Q5(s0(e)))}}function K2(t,e,n,i,r,o){const l=e.eventCache;if(Ip(i,n)!=null)return e;{let u,h;if(lt(n))if(he(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=ol(e),p=f instanceof Rt?f:Rt.EMPTY_NODE,y=q2(i,p);u=t.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const f=o0(i,ol(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const f=yt(n);if(f===".priority"){he(to(n)===1,"Can't have a priority with additional path components");const p=l.getNode();h=e.serverCache.getNode();const y=$R(i,n,p,h);y!=null?u=t.filter.updatePriority(p,y):u=l.getNode()}else{const p=Yt(n);let y;if(l.isCompleteForChild(f)){h=e.serverCache.getNode();const _=$R(i,n,l.getNode(),h);_!=null?y=l.getNode().getImmediateChild(f).updateChild(p,_):y=l.getNode().getImmediateChild(f)}else y=oE(i,f,e.serverCache);y!=null?u=t.filter.updateChild(l.getNode(),f,y,p,r,o):u=l.getNode()}}return Nh(e,u,l.isFullyInitialized()||lt(n),t.filter.filtersNodes())}}function Np(t,e,n,i,r,o,l,u){const h=e.serverCache;let f;const p=l?t.filter:t.filter.getIndexedFilter();if(lt(n))f=p.updateFullNode(h.getNode(),i,null);else if(p.filtersNodes()&&!h.isFiltered()){const E=h.getNode().updateChild(n,i);f=p.updateFullNode(h.getNode(),E,null)}else{const E=yt(n);if(!h.isCompleteForPath(n)&&to(n)>1)return e;const S=Yt(n),I=h.getNode().getImmediateChild(E).updateChild(S,i);E===".priority"?f=p.updatePriority(h.getNode(),I):f=p.updateChild(h.getNode(),E,I,S,$2,null)}const y=j2(e,f,h.isFullyInitialized()||lt(n),p.filtersNodes()),_=new lE(r,y,o);return K2(t,y,n,r,_,u)}function l0(t,e,n,i,r,o,l){const u=e.eventCache;let h,f;const p=new lE(r,e,o);if(lt(n))f=t.filter.updateFullNode(e.eventCache.getNode(),i,l),h=Nh(e,f,!0,t.filter.filtersNodes());else{const y=yt(n);if(y===".priority")f=t.filter.updatePriority(e.eventCache.getNode(),i),h=Nh(e,f,u.isFullyInitialized(),u.isFiltered());else{const _=Yt(n),E=u.getNode().getImmediateChild(y);let S;if(lt(_))S=i;else{const R=p.getCompleteChild(y);R!=null?T2(_)===".priority"&&R.getChild(A2(_)).isEmpty()?S=R:S=R.updateChild(_,i):S=Rt.EMPTY_NODE}if(E.equals(S))h=e;else{const R=t.filter.updateChild(u.getNode(),y,S,_,p,l);h=Nh(e,R,u.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function KR(t,e){return t.eventCache.isCompleteForChild(e)}function Cz(t,e,n,i,r,o,l){let u=e;return i.foreach((h,f)=>{const p=Bn(n,h);KR(e,yt(p))&&(u=l0(t,u,p,f,r,o,l))}),i.foreach((h,f)=>{const p=Bn(n,h);KR(e,yt(p))||(u=l0(t,u,p,f,r,o,l))}),u}function WR(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function c0(t,e,n,i,r,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,f;lt(n)?f=i:f=new Wt(null).setTree(n,i);const p=e.serverCache.getNode();return f.children.inorderTraversal((y,_)=>{if(p.hasChild(y)){const E=e.serverCache.getNode().getImmediateChild(y),S=WR(t,E,_);h=Np(t,h,new Xt(y),S,r,o,l,u)}}),f.children.inorderTraversal((y,_)=>{const E=!e.serverCache.isCompleteForChild(y)&&_.value===null;if(!p.hasChild(y)&&!E){const S=e.serverCache.getNode().getImmediateChild(y),R=WR(t,S,_);h=Np(t,h,new Xt(y),R,r,o,l,u)}}),h}function Iz(t,e,n,i,r,o,l){if(Ip(r,n)!=null)return e;const u=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(lt(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return Np(t,e,n,h.getNode().getChild(n),r,o,u,l);if(lt(n)){let f=new Wt(null);return h.getNode().forEachChild(Rc,(p,y)=>{f=f.set(new Xt(p),y)}),c0(t,e,n,f,r,o,u,l)}else return e}else{let f=new Wt(null);return i.foreach((p,y)=>{const _=Bn(n,p);h.isCompleteForPath(_)&&(f=f.set(p,h.getNode().getChild(_)))}),c0(t,e,n,f,r,o,u,l)}}function Nz(t,e,n,i,r){const o=e.serverCache,l=j2(e,o.getNode(),o.isFullyInitialized()||lt(n),o.isFiltered());return K2(t,l,n,i,$2,r)}function Dz(t,e,n,i,r,o){let l;if(Ip(i,n)!=null)return e;{const u=new lE(i,e,r),h=e.eventCache.getNode();let f;if(lt(n)||yt(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=o0(i,ol(e));else{const y=e.serverCache.getNode();he(y instanceof Rt,"serverChildren would be complete if leaf node"),p=q2(i,y)}p=p,f=t.filter.updateFullNode(h,p,o)}else{const p=yt(n);let y=oE(i,p,e.serverCache);y==null&&e.serverCache.isCompleteForChild(p)&&(y=h.getImmediateChild(p)),y!=null?f=t.filter.updateChild(h,p,y,Yt(n),u,o):e.eventCache.getNode().hasChild(p)?f=t.filter.updateChild(h,p,Rt.EMPTY_NODE,Yt(n),u,o):f=h,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=o0(i,ol(e)),l.isLeafNode()&&(f=t.filter.updateFullNode(f,l,o)))}return l=e.serverCache.isFullyInitialized()||Ip(i,Lt())!=null,Nh(e,f,l,t.filter.filtersNodes())}}function Mz(t,e){const n=ol(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!lt(e)&&!n.getImmediateChild(yt(e)).isEmpty())?n.getChild(e):null}function YR(t,e,n,i){e.type===tr.MERGE&&e.source.queryId!==null&&(he(ol(t.viewCache_),"We should always have a full cache before handling merges"),he(s0(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=xz(t.processor_,r,e,n,i);return Az(t.processor_,o.viewCache),he(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Pz(t,o.changes,o.viewCache.eventCache.getNode())}function Pz(t,e,n,i){const r=t.eventRegistrations_;return az(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QR;function Oz(t){he(!QR,"__referenceConstructor has already been defined"),QR=t}function cE(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return he(o!=null,"SyncTree gave us an op for an invalid query."),YR(o,e,n,i)}else{let o=[];for(const l of t.views.values())o=o.concat(YR(l,e,n,i));return o}}function uE(t,e){let n=null;for(const i of t.views.values())n=n||Mz(i,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XR;function kz(t){he(!XR,"__referenceConstructor has already been defined"),XR=t}class ZR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Wt(null),this.pendingWriteTree_=Ez(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Lz(t,e,n,i,r){return uz(t.pendingWriteTree_,e,n,i,r),r?bg(t,new al(O2(),e,n)):[]}function pc(t,e,n=!1){const i=hz(t.pendingWriteTree_,e);if(dz(t.pendingWriteTree_,e)){let o=new Wt(null);return i.snap!=null?o=o.set(Lt(),!0):ys(i.children,l=>{o=o.set(new Xt(l),!0)}),bg(t,new Cp(i.path,o,n))}else return[]}function _g(t,e,n){return bg(t,new al(k2(),e,n))}function Vz(t,e,n){const i=Wt.fromObject(n);return bg(t,new nd(k2(),e,i))}function jz(t,e,n,i){const r=X2(t,i);if(r!=null){const o=Z2(r),l=o.path,u=o.queryId,h=fs(l,e),f=new al(L2(u),h,n);return J2(t,l,f)}else return[]}function Uz(t,e,n,i){const r=X2(t,i);if(r){const o=Z2(r),l=o.path,u=o.queryId,h=fs(l,e),f=Wt.fromObject(n),p=new nd(L2(u),h,f);return J2(t,l,p)}else return[]}function W2(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(l,u)=>{const h=fs(l,e),f=uE(u,h);if(f)return f});return z2(r,e,o,n,!0)}function bg(t,e){return Y2(e,t.syncPointTree_,null,F2(t.pendingWriteTree_,Lt()))}function Y2(t,e,n,i){if(lt(t.path))return Q2(t,e,n,i);{const r=e.get(Lt());n==null&&r!=null&&(n=uE(r,Lt()));let o=[];const l=yt(t.path),u=t.operationForChild(l),h=e.children.get(l);if(h&&u){const f=n?n.getImmediateChild(l):null,p=H2(i,l);o=o.concat(Y2(u,h,f,p))}return r&&(o=o.concat(cE(r,t,i,n))),o}}function Q2(t,e,n,i){const r=e.get(Lt());n==null&&r!=null&&(n=uE(r,Lt()));let o=[];return e.children.inorderTraversal((l,u)=>{const h=n?n.getImmediateChild(l):null,f=H2(i,l),p=t.operationForChild(l);p&&(o=o.concat(Q2(p,u,h,f)))}),r&&(o=o.concat(cE(r,t,i,n))),o}function X2(t,e){return t.tagToQueryMap.get(e)}function Z2(t){const e=t.indexOf("$");return he(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Xt(t.substr(0,e))}}function J2(t,e,n){const i=t.syncPointTree_.get(e);he(i,"Missing sync point for query tag that we're tracking");const r=F2(t.pendingWriteTree_,e);return cE(i,n,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new hE(n)}node(){return this.node_}}class dE{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Bn(this.path_,e);return new dE(this.syncTree_,n)}node(){return W2(this.syncTree_,this.path_)}}const Fz=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},JR=function(t,e,n){if(!t||typeof t!="object")return t;if(he(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Bz(t[".sv"],e,n);if(typeof t[".sv"]=="object")return zz(t[".sv"],e);he(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Bz=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:he(!1,"Unexpected server value: "+t)}},zz=function(t,e,n){t.hasOwnProperty("increment")||he(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&he(!1,"Unexpected increment value: "+i);const r=e.node();if(he(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},qz=function(t,e,n,i){return fE(e,new dE(n,t),i)},Hz=function(t,e,n){return fE(t,new hE(e),n)};function fE(t,e,n){const i=t.getPriority().val(),r=JR(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const l=t,u=JR(l.getValue(),e,n);return u!==l.getValue()||r!==l.getPriority().val()?new Ln(u,oi(r)):t}else{const l=t;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new Ln(r))),l.forEachChild(li,(u,h)=>{const f=fE(h,e.getImmediateChild(u),n);f!==h&&(o=o.updateImmediateChild(u,f))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function pE(t,e){let n=e instanceof Xt?e:new Xt(e),i=t,r=yt(n);for(;r!==null;){const o=Ic(i.node.children,r)||{children:{},childCount:0};i=new mE(r,i,o),n=Yt(n),r=yt(n)}return i}function Jc(t){return t.node.value}function eM(t,e){t.node.value=e,u0(t)}function tM(t){return t.node.childCount>0}function Gz(t){return Jc(t)===void 0&&!tM(t)}function Eg(t,e){ys(t.node.children,(n,i)=>{e(new mE(n,t,i))})}function nM(t,e,n,i){n&&e(t),Eg(t,r=>{nM(r,e,!0)})}function $z(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ld(t){return new Xt(t.parent===null?t.name:Ld(t.parent)+"/"+t.name)}function u0(t){t.parent!==null&&Kz(t.parent,t.name,t)}function Kz(t,e,n){const i=Gz(n),r=ra(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,u0(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,u0(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz=/[\[\].#$\/\u0000-\u001F\u007F]/,Yz=/[\[\].#$\u0000-\u001F\u007F]/,Jv=10*1024*1024,iM=function(t){return typeof t=="string"&&t.length!==0&&!Wz.test(t)},Qz=function(t){return typeof t=="string"&&t.length!==0&&!Yz.test(t)},Xz=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Qz(t)},sM=function(t,e,n){const i=n instanceof Xt?new N5(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ho(i));if(typeof e=="function")throw new Error(t+"contains a function "+Ho(i)+" with contents = "+e.toString());if(n2(e))throw new Error(t+"contains "+e.toString()+" "+Ho(i));if(typeof e=="string"&&e.length>Jv/3&&Wp(e)>Jv)throw new Error(t+"contains a string greater than "+Jv+" utf8 bytes "+Ho(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(ys(e,(l,u)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!iM(l)))throw new Error(t+" contains an invalid key ("+l+") "+Ho(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);D5(i,l),sM(t,u,i),M5(i)}),r&&o)throw new Error(t+' contains ".value" child '+Ho(i)+" in addition to actual children.")}},Zz=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!iM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Xz(n))throw new Error(M4(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eq(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!x2(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function gl(t,e,n){eq(t,n),tq(t,i=>Ms(i,e)||Ms(e,i))}function tq(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(nq(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function nq(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Ch&&ai("event: "+n.toString()),Od(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq="repo_interrupt",sq=25;class rq{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jz,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rp(),this.transactionQueueTree_=new mE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function aq(t,e,n){if(t.stats_=tE(t.repoInfo_),t.forceRestClient_||t5())t.server_=new xp(t.repoInfo_,(i,r,o,l)=>{eC(t,i,r,o,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>tC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yn(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Wr(t.repoInfo_,e,(i,r,o,l)=>{eC(t,i,r,o,l)},i=>{tC(t,i)},i=>{lq(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=a5(t.repoInfo_,()=>new rz(t.stats_,t.server_)),t.infoData_=new ez,t.infoSyncTree_=new ZR({startListening:(i,r,o,l)=>{let u=[];const h=t.infoData_.getNode(i._path);return h.isEmpty()||(u=_g(t.infoSyncTree_,i._path,h),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),gE(t,"connected",!1),t.serverSyncTree_=new ZR({startListening:(i,r,o,l)=>(t.server_.listen(i,o,r,(u,h)=>{const f=l(u,h);gl(t.eventQueue_,i._path,f)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function oq(t){const n=t.infoData_.getNode(new Xt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function rM(t){return Fz({timestamp:oq(t)})}function eC(t,e,n,i,r){t.dataUpdateCount++;const o=new Xt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(r)if(i){const h=ep(n,f=>oi(f));l=Uz(t.serverSyncTree_,o,h,r)}else{const h=oi(n);l=jz(t.serverSyncTree_,o,h,r)}else if(i){const h=ep(n,f=>oi(f));l=Vz(t.serverSyncTree_,o,h)}else{const h=oi(n);l=_g(t.serverSyncTree_,o,h)}let u=o;l.length>0&&(u=vE(t,o)),gl(t.eventQueue_,u,l)}function tC(t,e){gE(t,"connected",e),e===!1&&uq(t)}function lq(t,e){ys(e,(n,i)=>{gE(t,n,i)})}function gE(t,e,n){const i=new Xt("/.info/"+e),r=oi(n);t.infoData_.updateSnapshot(i,r);const o=_g(t.infoSyncTree_,i,r);gl(t.eventQueue_,i,o)}function cq(t){return t.nextWriteId_++}function uq(t){aM(t,"onDisconnectEvents");const e=rM(t),n=Rp();i0(t.onDisconnect_,Lt(),(r,o)=>{const l=qz(r,o,t.serverSyncTree_,e);P2(n,r,l)});let i=[];i0(n,Lt(),(r,o)=>{i=i.concat(_g(t.serverSyncTree_,r,o));const l=mq(t,r);vE(t,l)}),t.onDisconnect_=Rp(),gl(t.eventQueue_,Lt(),i)}function hq(t){t.persistentConnection_&&t.persistentConnection_.interrupt(iq)}function aM(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ai(n,...e)}function oM(t,e,n){return W2(t.serverSyncTree_,e,n)||Rt.EMPTY_NODE}function yE(t,e=t.transactionQueueTree_){if(e||wg(t,e),Jc(e)){const n=cM(t,e);he(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&dq(t,Ld(e),n)}else tM(e)&&Eg(e,n=>{yE(t,n)})}function dq(t,e,n){const i=n.map(f=>f.currentWriteId),r=oM(t,e,i);let o=r;const l=r.hash();for(let f=0;f<n.length;f++){const p=n[f];he(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const y=fs(e,p.path);o=o.updateChild(y,p.currentOutputSnapshotRaw)}const u=o.val(!0),h=e;t.server_.put(h.toString(),u,f=>{aM(t,"transaction put response",{path:h.toString(),status:f});let p=[];if(f==="ok"){const y=[];for(let _=0;_<n.length;_++)n[_].status=2,p=p.concat(pc(t.serverSyncTree_,n[_].currentWriteId)),n[_].onComplete&&y.push(()=>n[_].onComplete(null,!0,n[_].currentOutputSnapshotResolved)),n[_].unwatcher();wg(t,pE(t.transactionQueueTree_,e)),yE(t,t.transactionQueueTree_),gl(t.eventQueue_,e,p);for(let _=0;_<y.length;_++)Od(y[_])}else{if(f==="datastale")for(let y=0;y<n.length;y++)n[y].status===3?n[y].status=4:n[y].status=0;else{Ki("transaction at "+h.toString()+" failed: "+f);for(let y=0;y<n.length;y++)n[y].status=4,n[y].abortReason=f}vE(t,e)}},l)}function vE(t,e){const n=lM(t,e),i=Ld(n),r=cM(t,n);return fq(t,r,i),i}function fq(t,e,n){if(e.length===0)return;const i=[];let r=[];const l=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const h=e[u],f=fs(n,h.path);let p=!1,y;if(he(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)p=!0,y=h.abortReason,r=r.concat(pc(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=sq)p=!0,y="maxretry",r=r.concat(pc(t.serverSyncTree_,h.currentWriteId,!0));else{const _=oM(t,h.path,l);h.currentInputSnapshot=_;const E=e[u].update(_.val());if(E!==void 0){sM("transaction failed: Data returned ",E,h.path);let S=oi(E);typeof E=="object"&&E!=null&&ra(E,".priority")||(S=S.updatePriority(_.getPriority()));const I=h.currentWriteId,P=rM(t),F=Hz(S,_,P);h.currentOutputSnapshotRaw=S,h.currentOutputSnapshotResolved=F,h.currentWriteId=cq(t),l.splice(l.indexOf(I),1),r=r.concat(Lz(t.serverSyncTree_,h.path,F,h.currentWriteId,h.applyLocally)),r=r.concat(pc(t.serverSyncTree_,I,!0))}else p=!0,y="nodata",r=r.concat(pc(t.serverSyncTree_,h.currentWriteId,!0))}gl(t.eventQueue_,n,r),r=[],p&&(e[u].status=2,function(_){setTimeout(_,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(y==="nodata"?i.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):i.push(()=>e[u].onComplete(new Error(y),!1,null))))}wg(t,t.transactionQueueTree_);for(let u=0;u<i.length;u++)Od(i[u]);yE(t,t.transactionQueueTree_)}function lM(t,e){let n,i=t.transactionQueueTree_;for(n=yt(e);n!==null&&Jc(i)===void 0;)i=pE(i,n),e=Yt(e),n=yt(e);return i}function cM(t,e){const n=[];return uM(t,e,n),n.sort((i,r)=>i.order-r.order),n}function uM(t,e,n){const i=Jc(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Eg(e,r=>{uM(t,r,n)})}function wg(t,e){const n=Jc(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,eM(e,n.length>0?n:void 0)}Eg(e,i=>{wg(t,i)})}function mq(t,e){const n=Ld(lM(t,e)),i=pE(t.transactionQueueTree_,e);return $z(i,r=>{e_(t,r)}),e_(t,i),nM(i,r=>{e_(t,r)}),n}function e_(t,e){const n=Jc(e);if(n){const i=[];let r=[],o=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(he(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):(he(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),r=r.concat(pc(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&i.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?eM(e,void 0):n.length=o+1,gl(t.eventQueue_,Ld(e),r);for(let l=0;l<i.length;l++)Od(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function gq(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ki(`Invalid query segment '${n}' in query '${t}'`)}return e}const nC=function(t,e){const n=yq(t),i=n.namespace;n.domain==="firebase.com"&&na(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&na("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||KB();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new m2(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new Xt(n.pathString)}},yq=function(t){let e="",n="",i="",r="",o="",l=!0,u="https",h=443;if(typeof t=="string"){let f=t.indexOf("//");f>=0&&(u=t.substring(0,f-1),t=t.substring(f+2));let p=t.indexOf("/");p===-1&&(p=t.length);let y=t.indexOf("?");y===-1&&(y=t.length),e=t.substring(0,Math.min(p,y)),p<y&&(r=pq(t.substring(p,y)));const _=gq(t.substring(Math.min(t.length,y)));f=e.indexOf(":"),f>=0?(l=u==="https"||u==="wss",h=parseInt(e.substring(f+1),10)):f=e.length;const E=e.slice(0,f);if(E.toLowerCase()==="localhost")n="localhost";else if(E.split(".").length<=2)n=E;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),n=e.substring(S+1),o=i}"ns"in _&&(o=_.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:l,scheme:u,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return lt(this._path)?null:T2(this._path)}get ref(){return new eu(this._repo,this._path)}get _queryIdentifier(){const e=BR(this._queryParams),n=Jb(e);return n==="{}"?"default":n}get _queryObject(){return BR(this._queryParams)}isEqual(e){if(e=$t(e),!(e instanceof _E))return!1;const n=this._repo===e._repo,i=x2(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+I5(this._path)}}class eu extends _E{constructor(e,n){super(e,n,new rE,!1)}get parent(){const e=A2(this._path);return e===null?null:new eu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}Oz(eu);kz(eu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq="FIREBASE_DATABASE_EMULATOR_HOST",h0={};let _q=!1;function bq(t,e,n,i){t.repoInfo_=new m2(e,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(t.authTokenProvider_=i)}function Eq(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||na("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ai("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=nC(o,r),u=l.repoInfo,h;typeof process<"u"&&wR&&(h=wR[vq]),h?(o=`http://${h}?ns=${u.namespace}`,l=nC(o,r),u=l.repoInfo):l.repoInfo.secure;const f=new i5(t.name,t.options,e);Zz("Invalid Firebase Database URL",l),lt(l.path)||na("Database URL must point to the root of a Firebase Database (not including a child path).");const p=Tq(u,t,f,new n5(t,n));return new Sq(p,t)}function wq(t,e){const n=h0[e];(!n||n[t.key]!==t)&&na(`Database ${e}(${t.repoInfo_}) has already been deleted.`),hq(t),delete n[t.key]}function Tq(t,e,n,i){let r=h0[e.name];r||(r={},h0[e.name]=r);let o=r[t.toURLString()];return o&&na("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new rq(t,_q,n,i),r[t.toURLString()]=o,o}class Sq{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(aq(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new eu(this._repo,Lt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wq(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&na("Cannot call "+e+" on a deleted database.")}}function Aq(t=yd(),e){const n=aa(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=Q0("database");i&&xq(n,...i)}return n}function xq(t,e,n,i={}){t=$t(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,o=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Xr(i,o.repoInfo_.emulatorOptions))return;na("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&na('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Gm(Gm.OWNER);else if(i.mockUserToken){const u=typeof i.mockUserToken=="string"?i.mockUserToken:Z0(i.mockUserToken,t.app.options.projectId);l=new Gm(u)}bq(o,r,i,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(t){BB(ao),gs(new Yi("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Eq(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),ui(TR,SR,t),ui(TR,SR,"esm2017")}Wr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Wr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Rq();const hM="@firebase/installations",bE="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=1e4,fM=`w:${bE}`,mM="FIS_v2",Cq="https://firebaseinstallations.googleapis.com/v1",Iq=60*60*1e3,Nq="installations",Dq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ll=new dl(Nq,Dq,Mq);function pM(t){return t instanceof _s&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM({projectId:t}){return`${Cq}/projects/${t}/installations`}function yM(t){return{token:t.token,requestStatus:2,expiresIn:Oq(t.expiresIn),creationTime:Date.now()}}async function vM(t,e){const i=(await e.json()).error;return ll.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function _M({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Pq(t,{refreshToken:e}){const n=_M(t);return n.append("Authorization",kq(e)),n}async function bM(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Oq(t){return Number(t.replace("s","000"))}function kq(t){return`${mM} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lq({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=gM(t),r=_M(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={fid:n,authVersion:mM,appId:t.appId,sdkVersion:fM},u={method:"POST",headers:r,body:JSON.stringify(l)},h=await bM(()=>fetch(i,u));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:yM(f.authToken)}}else throw await vM("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vq(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq=/^[cdef][\w-]{21}$/,d0="";function Uq(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Fq(t);return jq.test(n)?n:d0}catch{return d0}}function Fq(t){return Vq(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new Map;function TM(t,e){const n=Tg(t);SM(n,e),Bq(n,e)}function SM(t,e){const n=wM.get(t);if(n)for(const i of n)i(e)}function Bq(t,e){const n=zq();n&&n.postMessage({key:t,fid:e}),qq()}let Qo=null;function zq(){return!Qo&&"BroadcastChannel"in self&&(Qo=new BroadcastChannel("[Firebase] FID Change"),Qo.onmessage=t=>{SM(t.data.key,t.data.fid)}),Qo}function qq(){wM.size===0&&Qo&&(Qo.close(),Qo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq="firebase-installations-database",Gq=1,cl="firebase-installations-store";let t_=null;function EE(){return t_||(t_=NI(Hq,Gq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(cl)}}})),t_}async function Dp(t,e){const n=Tg(t),r=(await EE()).transaction(cl,"readwrite"),o=r.objectStore(cl),l=await o.get(n);return await o.put(e,n),await r.done,(!l||l.fid!==e.fid)&&TM(t,e.fid),e}async function AM(t){const e=Tg(t),i=(await EE()).transaction(cl,"readwrite");await i.objectStore(cl).delete(e),await i.done}async function Sg(t,e){const n=Tg(t),r=(await EE()).transaction(cl,"readwrite"),o=r.objectStore(cl),l=await o.get(n),u=e(l);return u===void 0?await o.delete(n):await o.put(u,n),await r.done,u&&(!l||l.fid!==u.fid)&&TM(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wE(t){let e;const n=await Sg(t.appConfig,i=>{const r=$q(i),o=Kq(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===d0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function $q(t){const e=t||{fid:Uq(),registrationStatus:0};return xM(e)}function Kq(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ll.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Wq(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Yq(t)}:{installationEntry:e}}async function Wq(t,e){try{const n=await Lq(t,e);return Dp(t.appConfig,n)}catch(n){throw pM(n)&&n.customData.serverCode===409?await AM(t.appConfig):await Dp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Yq(t){let e=await iC(t.appConfig);for(;e.registrationStatus===1;)await EM(100),e=await iC(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await wE(t);return i||n}return e}function iC(t){return Sg(t,e=>{if(!e)throw ll.create("installation-not-found");return xM(e)})}function xM(t){return Qq(t)?{fid:t.fid,registrationStatus:0}:t}function Qq(t){return t.registrationStatus===1&&t.registrationTime+dM<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xq({appConfig:t,heartbeatServiceProvider:e},n){const i=Zq(t,n),r=Pq(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={installation:{sdkVersion:fM,appId:t.appId}},u={method:"POST",headers:r,body:JSON.stringify(l)},h=await bM(()=>fetch(i,u));if(h.ok){const f=await h.json();return yM(f)}else throw await vM("Generate Auth Token",h)}function Zq(t,{fid:e}){return`${gM(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(t,e=!1){let n;const i=await Sg(t.appConfig,o=>{if(!RM(o))throw ll.create("not-registered");const l=o.authToken;if(!e&&tH(l))return o;if(l.requestStatus===1)return n=Jq(t,e),o;{if(!navigator.onLine)throw ll.create("app-offline");const u=iH(o);return n=eH(t,u),u}});return n?await n:i.authToken}async function Jq(t,e){let n=await sC(t.appConfig);for(;n.authToken.requestStatus===1;)await EM(100),n=await sC(t.appConfig);const i=n.authToken;return i.requestStatus===0?TE(t,e):i}function sC(t){return Sg(t,e=>{if(!RM(e))throw ll.create("not-registered");const n=e.authToken;return sH(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function eH(t,e){try{const n=await Xq(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Dp(t.appConfig,i),n}catch(n){if(pM(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await AM(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Dp(t.appConfig,i)}throw n}}function RM(t){return t!==void 0&&t.registrationStatus===2}function tH(t){return t.requestStatus===2&&!nH(t)}function nH(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Iq}function iH(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function sH(t){return t.requestStatus===1&&t.requestTime+dM<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH(t){const e=t,{installationEntry:n,registrationPromise:i}=await wE(e);return i?i.catch(console.error):TE(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aH(t,e=!1){const n=t;return await oH(n),(await TE(n,e)).token}async function oH(t){const{registrationPromise:e}=await wE(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(t){if(!t||!t.options)throw n_("App Configuration");if(!t.name)throw n_("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw n_(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function n_(t){return ll.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="installations",cH="installations-internal",uH=t=>{const e=t.getProvider("app").getImmediate(),n=lH(e),i=aa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},hH=t=>{const e=t.getProvider("app").getImmediate(),n=aa(e,CM).getImmediate();return{getId:()=>rH(n),getToken:r=>aH(n,r)}};function dH(){gs(new Yi(CM,uH,"PUBLIC")),gs(new Yi(cH,hH,"PRIVATE"))}dH();ui(hM,bE);ui(hM,bE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="analytics",fH="firebase_id",mH="origin",pH=60*1e3,gH="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",SE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new gd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wi=new dl("analytics","Analytics",yH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(t){if(!t.startsWith(SE)){const e=Wi.create("invalid-gtag-resource",{gtagURL:t});return Ni.warn(e.message),""}return t}function IM(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function _H(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function bH(t,e){const n=_H("firebase-js-sdk-policy",{createScriptURL:vH}),i=document.createElement("script"),r=`${SE}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function EH(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function wH(t,e,n,i,r,o){const l=i[r];try{if(l)await e[l];else{const h=(await IM(n)).find(f=>f.measurementId===r);h&&await e[h.appId]}}catch(u){Ni.error(u)}t("config",r,o)}async function TH(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const u=await IM(n);for(const h of l){const f=u.find(y=>y.measurementId===h),p=f&&e[f.appId];if(p)o.push(p);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){Ni.error(o)}}function SH(t,e,n,i){async function r(o,...l){try{if(o==="event"){const[u,h]=l;await TH(t,e,n,u,h)}else if(o==="config"){const[u,h]=l;await wH(t,e,n,i,u,h)}else if(o==="consent"){const[u,h]=l;t("consent",u,h)}else if(o==="get"){const[u,h,f]=l;t("get",u,h,f)}else if(o==="set"){const[u]=l;t("set",u)}else t(o,...l)}catch(u){Ni.error(u)}}return r}function AH(t,e,n,i,r){let o=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=SH(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function xH(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(SE)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH=30,CH=1e3;class IH{constructor(e={},n=CH){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const NM=new IH;function NH(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function DH(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:NH(i)},o=gH.replace("{app-id}",n),l=await fetch(o,r);if(l.status!==200&&l.status!==304){let u="";try{const h=await l.json();!((e=h.error)===null||e===void 0)&&e.message&&(u=h.error.message)}catch{}throw Wi.create("config-fetch-failed",{httpStatus:l.status,responseMessage:u})}return l.json()}async function MH(t,e=NM,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw Wi.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw Wi.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new kH;return setTimeout(async()=>{u.abort()},pH),DM({appId:i,apiKey:r,measurementId:o},l,u,e)}async function DM(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=NM){var o;const{appId:l,measurementId:u}=t;try{await PH(i,e)}catch(h){if(u)return Ni.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:l,measurementId:u};throw h}try{const h=await DH(t);return r.deleteThrottleMetadata(l),h}catch(h){const f=h;if(!OH(f)){if(r.deleteThrottleMetadata(l),u)return Ni.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:l,measurementId:u};throw h}const p=Number((o=f==null?void 0:f.customData)===null||o===void 0?void 0:o.httpStatus)===503?qA(n,r.intervalMillis,RH):qA(n,r.intervalMillis),y={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return r.setThrottleMetadata(l,y),Ni.debug(`Calling attemptFetch again in ${p} millis`),DM(t,y,i,r)}}function PH(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(Wi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OH(t){if(!(t instanceof _s)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class kH{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function LH(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,l=Object.assign(Object.assign({},i),{send_to:o});t("event",n,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VH(){if(tb())try{await nb()}catch(t){return Ni.warn(Wi.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ni.warn(Wi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function jH(t,e,n,i,r,o,l){var u;const h=MH(t);h.then(E=>{n[E.measurementId]=E.appId,t.options.measurementId&&E.measurementId!==t.options.measurementId&&Ni.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>Ni.error(E)),e.push(h);const f=VH().then(E=>{if(E)return i.getId()}),[p,y]=await Promise.all([h,f]);xH(o)||bH(o,p.measurementId),r("js",new Date);const _=(u=l==null?void 0:l.config)!==null&&u!==void 0?u:{};return _[mH]="firebase",_.update=!0,y!=null&&(_[fH]=y),r("config",p.measurementId,_),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e){this.app=e}_delete(){return delete Mh[this.app.options.appId],Promise.resolve()}}let Mh={},rC=[];const aC={};let i_="dataLayer",FH="gtag",oC,MM,lC=!1;function BH(){const t=[];if(eb()&&t.push("This is a browser extension environment."),xI()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=Wi.create("invalid-analytics-context",{errorInfo:e});Ni.warn(n.message)}}function zH(t,e,n){BH();const i=t.options.appId;if(!i)throw Wi.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ni.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wi.create("no-api-key");if(Mh[i]!=null)throw Wi.create("already-exists",{id:i});if(!lC){EH(i_);const{wrappedGtag:o,gtagCore:l}=AH(Mh,rC,aC,i_,FH);MM=o,oC=l,lC=!0}return Mh[i]=jH(t,rC,aC,e,oC,i_,n),new UH(t)}function qH(t=yd()){t=$t(t);const e=aa(t,Mp);return e.isInitialized()?e.getImmediate():HH(t)}function HH(t,e={}){const n=aa(t,Mp);if(n.isInitialized()){const r=n.getImmediate();if(Xr(e,n.getOptions()))return r;throw Wi.create("already-initialized")}return n.initialize({options:e})}async function GH(){if(eb()||!xI()||!tb())return!1;try{return await nb()}catch{return!1}}function $H(t,e,n,i){t=$t(t),LH(MM,Mh[t.app.options.appId],e,n,i).catch(r=>Ni.error(r))}const cC="@firebase/analytics",uC="0.10.12";function KH(){gs(new Yi(Mp,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return zH(i,r,n)},"PUBLIC")),gs(new Yi("analytics-internal",t,"PRIVATE")),ui(cC,uC),ui(cC,uC,"esm2017");function t(e){try{const n=e.getProvider(Mp).getImmediate();return{logEvent:(i,r,o)=>$H(n,i,r,o)}}catch(n){throw Wi.create("interop-component-reg-failed",{reason:n})}}}KH();console.log(" FIREBASE API KEY:","AIzaSyAjF3oLNRGFwh_BUYA4qF55zl0qw4dprwI");const WH={apiKey:"AIzaSyAjF3oLNRGFwh_BUYA4qF55zl0qw4dprwI",authDomain:"agduwaqueue.firebaseapp.com",databaseURL:"https://agduwaqueue-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"agduwaqueue",storageBucket:"agduwaqueue.appspot.com",messagingSenderId:"242220098930",appId:"1:242220098930:web:4b5332473f339ca1be69eb",measurementId:"G-2CQ56KNPDZ"},Vd=DI(WH),kt=fg(Vd),Gi=gN(Vd);VB(Vd);Aq(Vd);GH().then(t=>{t&&qH(Vd)});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QH=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),hC=t=>{const e=QH(t);return e.charAt(0).toUpperCase()+e.slice(1)},PM=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:l,...u},h)=>x.createElement("svg",{ref:h,...XH,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:PM("lucide",r),...u},[...l.map(([f,p])=>x.createElement(f,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=(t,e)=>{const n=x.forwardRef(({className:i,...r},o)=>x.createElement(ZH,{ref:o,iconNode:e,className:PM(`lucide-${YH(hC(t))}`,`lucide-${t}`,i),...r}));return n.displayName=hC(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],e8=Di("activity",JH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],n8=Di("chart-column",t8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],s8=Di("chart-no-axes-column",i8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],a8=Di("circle-alert",r8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],l8=Di("file-text",o8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],u8=Di("funnel",c8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],d8=Di("history",h8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],m8=Di("house",f8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],g8=Di("list-ordered",p8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],v8=Di("list",y8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],b8=Di("log-out",_8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],w8=Di("user",E8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],S8=Di("users",T8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],x8=Di("x",A8),AE=x.createContext({});function xE(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const RE=typeof window<"u",OM=RE?x.useLayoutEffect:x.useEffect,Ag=x.createContext(null),CE=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class R8 extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=i instanceof HTMLElement&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=r-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function C8({children:t,isPresent:e,anchorX:n}){const i=x.useId(),r=x.useRef(null),o=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=x.useContext(CE);return x.useInsertionEffect(()=>{const{width:u,height:h,top:f,left:p,right:y}=o.current;if(e||!r.current||!u||!h)return;const _=n==="left"?`left: ${p}`:`right: ${y}`;r.current.dataset.motionPopId=i;const E=document.createElement("style");return l&&(E.nonce=l),document.head.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.removeChild(E)}},[e]),w.jsx(R8,{isPresent:e,childRef:r,sizeRef:o,children:x.cloneElement(t,{ref:r})})}const I8=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const h=xE(N8),f=x.useId(),p=x.useCallback(_=>{h.set(_,!0);for(const E of h.values())if(!E)return;i&&i()},[h,i]),y=x.useMemo(()=>({id:f,initial:e,isPresent:n,custom:r,onExitComplete:p,register:_=>(h.set(_,!1),()=>h.delete(_))}),o?[Math.random(),p]:[n,p]);return x.useMemo(()=>{h.forEach((_,E)=>h.set(E,!1))},[n]),x.useEffect(()=>{!n&&!h.size&&i&&i()},[n]),l==="popLayout"&&(t=w.jsx(C8,{isPresent:n,anchorX:u,children:t})),w.jsx(Ag.Provider,{value:y,children:t})};function N8(){return new Map}function kM(t=!0){const e=x.useContext(Ag);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=x.useId();x.useEffect(()=>{if(t)return r(o)},[t]);const l=x.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const Sm=t=>t.key||"";function dC(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const f0=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[h,f]=kM(l),p=x.useMemo(()=>dC(t),[t]),y=l&&!h?[]:p.map(Sm),_=x.useRef(!0),E=x.useRef(p),S=xE(()=>new Map),[R,I]=x.useState(p),[P,F]=x.useState(p);OM(()=>{_.current=!1,E.current=p;for(let G=0;G<P.length;G++){const Y=Sm(P[G]);y.includes(Y)?S.delete(Y):S.get(Y)!==!0&&S.set(Y,!1)}},[P,y.length,y.join("-")]);const O=[];if(p!==R){let G=[...p];for(let Y=0;Y<P.length;Y++){const L=P[Y],C=Sm(L);y.includes(C)||(G.splice(Y,0,L),O.push(L))}return o==="wait"&&O.length&&(G=O),F(dC(G)),I(p),null}const{forceRender:q}=x.useContext(AE);return w.jsx(w.Fragment,{children:P.map(G=>{const Y=Sm(G),L=l&&!h?!1:p===P||y.includes(Y),C=()=>{if(S.has(Y))S.set(Y,!0);else return;let M=!0;S.forEach(k=>{k||(M=!1)}),M&&(q==null||q(),F(E.current),l&&(f==null||f()),i&&i())};return w.jsx(I8,{isPresent:L,initial:!_.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:o,onExitComplete:L?void 0:C,anchorX:u,children:G},Y)})})};function IE(t,e){t.indexOf(e)===-1&&t.push(e)}function NE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let LM=()=>{};const D8={useManualTiming:!1};function DE(t){let e;return()=>(e===void 0&&(e=t()),e)}const ms=t=>t,id=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class ME{constructor(){this.subscriptions=[]}add(e){return IE(this.subscriptions,e),()=>NE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ar=t=>t*1e3,or=t=>t/1e3;function VM(t,e){return e?t*(1e3/e):0}const M8=DE(()=>window.ScrollTimeline!==void 0);class P8{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(M8()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class O8 extends P8{then(e,n){return this.finished.finally(e).then(()=>{})}}const fC={value:null},PE=t=>Array.isArray(t)&&typeof t[0]=="number",k8={};function L8(t,e){const n=DE(t);return()=>k8[e]??n()}const sd=L8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jM=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(o/(r-1))+", ";return`linear(${i.substring(0,i.length-2)})`},Eh=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,m0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Eh([0,.65,.55,1]),circOut:Eh([.55,0,1,.45]),backIn:Eh([.31,.01,.66,-.59]),backOut:Eh([.33,1.53,.69,.99])};function UM(t,e){if(t)return typeof t=="function"&&sd()?jM(t,e):PE(t)?Eh(t):Array.isArray(t)?t.map(n=>UM(n,e)||m0.easeOut):m0[t]}function V8(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:h}={},f=void 0){const p={[e]:n};h&&(p.offset=h);const y=UM(u,r);return Array.isArray(y)&&(p.easing=y),t.animate(p,{delay:i,duration:r,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal",pseudoElement:f})}function OE(t){return typeof t=="function"&&"applyToOptions"in t}function kE(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Pp=2e4;function LE(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Pp;)e+=n,i=t.next(e);return e>=Pp?1/0:e}function j8(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(LE(i),Pp);return{type:"keyframes",ease:o=>i.next(r*o).value/e,duration:or(r)}}function FM(t){return!!(typeof t=="function"&&sd()||!t||typeof t=="string"&&(t in m0||sd())||PE(t)||Array.isArray(t)&&t.every(FM))}function mC(t,e){t.timeline=e,t.onfinish=null}const Am=["read","resolveKeyframes","update","preRender","render","postRender"];function U8(t,e){let n=new Set,i=new Set,r=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},h=0;function f(y){l.has(y)&&(p.schedule(y),t()),h++,y(u)}const p={schedule:(y,_=!1,E=!1)=>{const R=E&&r?n:i;return _&&l.add(y),R.has(y)||R.add(y),y},cancel:y=>{i.delete(y),l.delete(y)},process:y=>{if(u=y,r){o=!0;return}r=!0,[n,i]=[i,n],n.forEach(f),e&&fC.value&&fC.value.frameloop[e].push(h),h=0,n.clear(),r=!1,o&&(o=!1,p.process(y))}};return p}const F8=40;function BM(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Am.reduce((P,F)=>(P[F]=U8(o,e?F:void 0),P),{}),{read:u,resolveKeyframes:h,update:f,preRender:p,render:y,postRender:_}=l,E=()=>{const P=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(P-r.timestamp,F8),1),r.timestamp=P,r.isProcessing=!0,u.process(r),h.process(r),f.process(r),p.process(r),y.process(r),_.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(E))},S=()=>{n=!0,i=!0,r.isProcessing||t(E)};return{schedule:Am.reduce((P,F)=>{const O=l[F];return P[F]=(q,G=!1,Y=!1)=>(n||S(),O.schedule(q,G,Y)),P},{}),cancel:P=>{for(let F=0;F<Am.length;F++)l[Am[F]].cancel(P)},state:r,steps:l}}const{schedule:Gt,cancel:no,state:Wn,steps:s_}=BM(typeof requestAnimationFrame<"u"?requestAnimationFrame:ms,!0),{schedule:VE}=BM(queueMicrotask,!1);let $m;function B8(){$m=void 0}const lr={now:()=>($m===void 0&&lr.set(Wn.isProcessing||D8.useManualTiming?Wn.timestamp:performance.now()),$m),set:t=>{$m=t,queueMicrotask(B8)}},Cs={x:!1,y:!1};function zM(){return Cs.x||Cs.y}function z8(t){return t==="x"||t==="y"?Cs[t]?null:(Cs[t]=!0,()=>{Cs[t]=!1}):Cs.x||Cs.y?null:(Cs.x=Cs.y=!0,()=>{Cs.x=Cs.y=!1})}function q8(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const r=document.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}function qM(t,e){const n=q8(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function pC(t){return!(t.pointerType==="touch"||zM())}function H8(t,e,n={}){const[i,r,o]=qM(t,n),l=u=>{if(!pC(u))return;const{target:h}=u,f=e(h,u);if(typeof f!="function"||!h)return;const p=y=>{pC(y)&&(f(y),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,r)};return i.forEach(u=>{u.addEventListener("pointerenter",l,r)}),o}const HM=(t,e)=>e?t===e?!0:HM(t,e.parentElement):!1,jE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,G8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $8(t){return G8.has(t.tagName)||t.tabIndex!==-1}const wh=new WeakSet;function gC(t){return e=>{e.key==="Enter"&&t(e)}}function r_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const K8=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=gC(()=>{if(wh.has(n))return;r_(n,"down");const r=gC(()=>{r_(n,"up")}),o=()=>r_(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function yC(t){return jE(t)&&!zM()}function W8(t,e,n={}){const[i,r,o]=qM(t,n),l=u=>{const h=u.currentTarget;if(!yC(u)||wh.has(h))return;wh.add(h);const f=e(h,u),p=(E,S)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",_),!(!yC(E)||!wh.has(h))&&(wh.delete(h),typeof f=="function"&&f(E,{success:S}))},y=E=>{p(E,h===window||h===document||n.useGlobalTarget||HM(h,E.target))},_=E=>{p(E,!1)};window.addEventListener("pointerup",y,r),window.addEventListener("pointercancel",_,r)};return i.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,r),u instanceof HTMLElement&&(u.addEventListener("focus",f=>K8(f,r)),!$8(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}const vC=30,Y8=t=>!isNaN(parseFloat(t));class Q8{constructor(e,n={}){this.version="12.6.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=lr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=lr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Y8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ME);const i=this.events[e].add(n);return e==="change"?()=>{i(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=lr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vC);return VM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rd(t,e){return new Q8(t,e)}const GM=x.createContext({strict:!1}),_C={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Uc={};for(const t in _C)Uc[t]={isEnabled:e=>_C[t].some(n=>!!e[n])};function X8(t){for(const e in t)Uc[e]={...Uc[e],...t[e]}}const Z8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Op(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Z8.has(t)}let $M=t=>!Op(t);function J8(t){t&&($M=e=>e.startsWith("on")?!Op(e):t(e))}try{J8(require("@emotion/is-prop-valid").default)}catch{}function e7(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||($M(r)||n===!0&&Op(r)||!e&&!Op(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function t7(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const xg=x.createContext({});function Rg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ad(t){return typeof t=="string"||Array.isArray(t)}const UE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],FE=["initial",...UE];function Cg(t){return Rg(t.animate)||FE.some(e=>ad(t[e]))}function KM(t){return!!(Cg(t)||t.variants)}function n7(t,e){if(Cg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||ad(n)?n:void 0,animate:ad(i)?i:void 0}}return t.inherit!==!1?e:{}}function i7(t){const{initial:e,animate:n}=n7(t,x.useContext(xg));return x.useMemo(()=>({initial:e,animate:n}),[bC(e),bC(n)])}function bC(t){return Array.isArray(t)?t.join(" "):t}const s7=Symbol.for("motionComponentSymbol");function gc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function r7(t,e,n){return x.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):gc(n)&&(n.current=i))},[e])}const BE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),a7="framerAppearId",WM="data-"+BE(a7),YM=x.createContext({});function o7(t,e,n,i,r){var R,I;const{visualElement:o}=x.useContext(xg),l=x.useContext(GM),u=x.useContext(Ag),h=x.useContext(CE).reducedMotion,f=x.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,y=x.useContext(YM);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&l7(f.current,n,r,y);const _=x.useRef(!1);x.useInsertionEffect(()=>{p&&_.current&&p.update(n,u)});const E=n[WM],S=x.useRef(!!E&&!((R=window.MotionHandoffIsComplete)!=null&&R.call(window,E))&&((I=window.MotionHasOptimisedAnimation)==null?void 0:I.call(window,E)));return OM(()=>{p&&(_.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),VE.render(p.render),S.current&&p.animationState&&p.animationState.animateChanges())}),x.useEffect(()=>{p&&(!S.current&&p.animationState&&p.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)==null||P.call(window,E)}),S.current=!1))}),p}function l7(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:u,layoutScroll:h,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:QM(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||u&&gc(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:f})}function QM(t){if(t)return t.options.allowProjection!==!1?t.projection:QM(t.parent)}function c7({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&X8(t);function o(u,h){let f;const p={...x.useContext(CE),...u,layoutId:u7(u)},{isStatic:y}=p,_=i7(u),E=i(u,y);if(!y&&RE){h7();const S=d7(p);f=S.MeasureLayout,_.visualElement=o7(r,E,p,e,S.ProjectionNode)}return w.jsxs(xg.Provider,{value:_,children:[f&&_.visualElement?w.jsx(f,{visualElement:_.visualElement,...p}):null,n(r,u,r7(E,_.visualElement,h),E,y,_.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const l=x.forwardRef(o);return l[s7]=r,l}function u7({layoutId:t}){const e=x.useContext(AE).id;return e&&t!==void 0?e+"-"+t:t}function h7(t,e){x.useContext(GM).strict}function d7(t){const{drag:e,layout:n}=Uc;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const XM=t=>e=>typeof e=="string"&&e.startsWith(t),zE=XM("--"),f7=XM("var(--"),qE=t=>f7(t)?m7.test(t.split("/*")[0].trim()):!1,m7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,od={};function p7(t){for(const e in t)od[e]=t[e],zE(e)&&(od[e].isCSSVariable=!0)}const tu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yl=new Set(tu);function ZM(t,{layout:e,layoutId:n}){return yl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!od[t]||t==="opacity")}const ci=t=>!!(t&&t.getVelocity),JM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ia=(t,e,n)=>n>e?e:n<t?t:n,nu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ld={...nu,transform:t=>ia(0,1,t)},xm={...nu,default:1},jd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ka=jd("deg"),cr=jd("%"),Me=jd("px"),g7=jd("vh"),y7=jd("vw"),EC={...cr,parse:t=>cr.parse(t)/100,transform:t=>cr.transform(t*100)},v7={borderWidth:Me,borderTopWidth:Me,borderRightWidth:Me,borderBottomWidth:Me,borderLeftWidth:Me,borderRadius:Me,radius:Me,borderTopLeftRadius:Me,borderTopRightRadius:Me,borderBottomRightRadius:Me,borderBottomLeftRadius:Me,width:Me,maxWidth:Me,height:Me,maxHeight:Me,top:Me,right:Me,bottom:Me,left:Me,padding:Me,paddingTop:Me,paddingRight:Me,paddingBottom:Me,paddingLeft:Me,margin:Me,marginTop:Me,marginRight:Me,marginBottom:Me,marginLeft:Me,backgroundPositionX:Me,backgroundPositionY:Me},_7={rotate:ka,rotateX:ka,rotateY:ka,rotateZ:ka,scale:xm,scaleX:xm,scaleY:xm,scaleZ:xm,skew:ka,skewX:ka,skewY:ka,distance:Me,translateX:Me,translateY:Me,translateZ:Me,x:Me,y:Me,z:Me,perspective:Me,transformPerspective:Me,opacity:ld,originX:EC,originY:EC,originZ:Me},wC={...nu,transform:Math.round},HE={...v7,..._7,zIndex:wC,size:Me,fillOpacity:ld,strokeOpacity:ld,numOctaves:wC},b7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},E7=tu.length;function w7(t,e,n){let i="",r=!0;for(let o=0;o<E7;o++){const l=tu[o],u=t[l];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(l.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||n){const f=JM(u,HE[l]);if(!h){r=!1;const p=b7[l]||l;i+=`${p}(${f}) `}n&&(e[l]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function GE(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,u=!1;for(const h in e){const f=e[h];if(yl.has(h)){l=!0;continue}else if(zE(h)){r[h]=f;continue}else{const p=JM(f,HE[h]);h.startsWith("origin")?(u=!0,o[h]=p):i[h]=p}}if(e.transform||(l||n?i.transform=w7(e,t.transform,n):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=o;i.transformOrigin=`${h} ${f} ${p}`}}const $E=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eP(t,e,n){for(const i in e)!ci(e[i])&&!ZM(i,n)&&(t[i]=e[i])}function T7({transformTemplate:t},e){return x.useMemo(()=>{const n=$E();return GE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function S7(t,e){const n=t.style||{},i={};return eP(i,n,t),Object.assign(i,T7(t,e)),i}function A7(t,e){const n={},i=S7(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const x7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function KE(t){return typeof t!="string"||t.includes("-")?!1:!!(x7.indexOf(t)>-1||/[A-Z]/u.test(t))}const R7={offset:"stroke-dashoffset",array:"stroke-dasharray"},C7={offset:"strokeDashoffset",array:"strokeDasharray"};function I7(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?R7:C7;t[o.offset]=Me.transform(-i);const l=Me.transform(e),u=Me.transform(n);t[o.array]=`${l} ${u}`}function TC(t,e,n){return typeof t=="string"?t:Me.transform(e+n*t)}function N7(t,e,n){const i=TC(e,t.x,t.width),r=TC(n,t.y,t.height);return`${i} ${r}`}function WE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:h=0,...f},p,y){if(GE(t,f,y),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:E,dimensions:S}=t;_.transform&&(S&&(E.transform=_.transform),delete _.transform),S&&(r!==void 0||o!==void 0||E.transform)&&(E.transformOrigin=N7(S,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),i!==void 0&&(_.scale=i),l!==void 0&&I7(_,l,u,h,!1)}const tP=()=>({...$E(),attrs:{}}),YE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function D7(t,e,n,i){const r=x.useMemo(()=>{const o=tP();return WE(o,e,YE(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};eP(o,t.style,t),r.style={...o,...r.style}}return r}function M7(t=!1){return(n,i,r,{latestValues:o},l)=>{const h=(KE(n)?D7:A7)(i,o,l,n),f=e7(i,typeof n=="string",t),p=n!==x.Fragment?{...f,...h,ref:r}:{},{children:y}=i,_=x.useMemo(()=>ci(y)?y.get():y,[y]);return x.createElement(n,{...p,children:_})}}function SC(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function QE(t,e,n,i){if(typeof e=="function"){const[r,o]=SC(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=SC(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const p0=t=>Array.isArray(t),P7=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),O7=t=>p0(t)?t[t.length-1]||0:t;function Km(t){const e=ci(t)?t.get():t;return P7(e)?e.toValue():e}function k7({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const l={latestValues:L7(i,r,o,t),renderState:e()};return n&&(l.onMount=u=>n({props:i,current:u,...l}),l.onUpdate=u=>n(u)),l}const nP=t=>(e,n)=>{const i=x.useContext(xg),r=x.useContext(Ag),o=()=>k7(t,e,i,r);return n?o():xE(o)};function L7(t,e,n,i){const r={},o=i(t,{});for(const _ in o)r[_]=Km(o[_]);let{initial:l,animate:u}=t;const h=Cg(t),f=KM(t);e&&f&&!h&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const y=p?u:l;if(y&&typeof y!="boolean"&&!Rg(y)){const _=Array.isArray(y)?y:[y];for(let E=0;E<_.length;E++){const S=QE(t,_[E]);if(S){const{transitionEnd:R,transition:I,...P}=S;for(const F in P){let O=P[F];if(Array.isArray(O)){const q=p?O.length-1:0;O=O[q]}O!==null&&(r[F]=O)}for(const F in R)r[F]=R[F]}}}return r}function XE(t,e,n){var o;const{style:i}=t,r={};for(const l in i)(ci(i[l])||e.style&&ci(e.style[l])||ZM(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(r[l]=i[l]);return r}const V7={useVisualState:nP({scrapeMotionValuesFromProps:XE,createRenderState:$E})};function iP(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function sP(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const rP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function aP(t,e,n,i){sP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(rP.has(r)?r:BE(r),e.attrs[r])}function oP(t,e,n){const i=XE(t,e,n);for(const r in t)if(ci(t[r])||ci(e[r])){const o=tu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}const AC=["x","y","width","height","cx","cy","r"],j7={useVisualState:nP({scrapeMotionValuesFromProps:oP,createRenderState:tP,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in r)if(yl.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<AC.length;u++){const h=AC[u];t[h]!==e[h]&&(l=!0)}l&&Gt.read(()=>{iP(n,i),Gt.render(()=>{WE(i,r,YE(n.tagName),t.transformTemplate),aP(n,i)})})}})};function U7(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...KE(i)?j7:V7,preloadedFeatures:t,useRender:M7(r),createVisualElement:e,Component:i};return c7(l)}}function cd(t,e,n){const i=t.getProps();return QE(i,e,n!==void 0?n:i.custom,t)}const lP=new Set(["width","height","top","left","right","bottom",...tu]);function F7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,rd(n))}function B7(t,e){const n=cd(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const u=O7(o[l]);F7(t,l,u)}}function z7(t){return!!(ci(t)&&t.add)}function g0(t,e){const n=t.getValue("willChange");if(z7(n))return n.add(e)}function cP(t){return t.props[WM]}const uP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,q7=1e-7,H7=12;function G7(t,e,n,i,r){let o,l,u=0;do l=e+(n-e)/2,o=uP(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>q7&&++u<H7);return l}function Ud(t,e,n,i){if(t===e&&n===i)return ms;const r=o=>G7(o,0,1,t,n);return o=>o===0||o===1?o:uP(r(o),e,i)}const hP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,dP=t=>e=>1-t(1-e),fP=Ud(.33,1.53,.69,.99),ZE=dP(fP),mP=hP(ZE),pP=t=>(t*=2)<1?.5*ZE(t):.5*(2-Math.pow(2,-10*(t-1))),JE=t=>1-Math.sin(Math.acos(t)),gP=dP(JE),yP=hP(JE),vP=t=>/^0[^.\s]+$/u.test(t);function $7(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||vP(t):!0}const Ph=t=>Math.round(t*1e5)/1e5,ew=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function K7(t){return t==null}const W7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tw=(t,e)=>n=>!!(typeof n=="string"&&W7.test(n)&&n.startsWith(t)||e&&!K7(n)&&Object.prototype.hasOwnProperty.call(n,e)),_P=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,u]=i.match(ew);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},Y7=t=>ia(0,255,t),a_={...nu,transform:t=>Math.round(Y7(t))},Xo={test:tw("rgb","red"),parse:_P("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+a_.transform(t)+", "+a_.transform(e)+", "+a_.transform(n)+", "+Ph(ld.transform(i))+")"};function Q7(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const y0={test:tw("#"),parse:Q7,transform:Xo.transform},yc={test:tw("hsl","hue"),parse:_P("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+cr.transform(Ph(e))+", "+cr.transform(Ph(n))+", "+Ph(ld.transform(i))+")"},ni={test:t=>Xo.test(t)||y0.test(t)||yc.test(t),parse:t=>Xo.test(t)?Xo.parse(t):yc.test(t)?yc.parse(t):y0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xo.transform(t):yc.transform(t)},X7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Z7(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ew))==null?void 0:e.length)||0)+(((n=t.match(X7))==null?void 0:n.length)||0)>0}const bP="number",EP="color",J7="var",eG="var(",xC="${}",tG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ud(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const u=e.replace(tG,h=>(ni.test(h)?(i.color.push(o),r.push(EP),n.push(ni.parse(h))):h.startsWith(eG)?(i.var.push(o),r.push(J7),n.push(h)):(i.number.push(o),r.push(bP),n.push(parseFloat(h))),++o,xC)).split(xC);return{values:n,split:u,indexes:i,types:r}}function wP(t){return ud(t).values}function TP(t){const{split:e,types:n}=ud(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const u=n[l];u===bP?o+=Ph(r[l]):u===EP?o+=ni.transform(r[l]):o+=r[l]}return o}}const nG=t=>typeof t=="number"?0:t;function iG(t){const e=wP(t);return TP(t)(e.map(nG))}const io={test:Z7,parse:wP,createTransformer:TP,getAnimatableNone:iG},sG=new Set(["brightness","contrast","saturate","opacity"]);function rG(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(ew)||[];if(!i)return t;const r=n.replace(i,"");let o=sG.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const aG=/\b([a-z-]*)\(.*?\)/gu,v0={...io,getAnimatableNone:t=>{const e=t.match(aG);return e?e.map(rG).join(" "):t}},oG={...HE,color:ni,backgroundColor:ni,outlineColor:ni,fill:ni,stroke:ni,borderColor:ni,borderTopColor:ni,borderRightColor:ni,borderBottomColor:ni,borderLeftColor:ni,filter:v0,WebkitFilter:v0},SP=t=>oG[t];function AP(t,e){let n=SP(t);return n!==v0&&(n=io),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lG=new Set(["auto","none","0"]);function cG(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!lG.has(o)&&ud(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=AP(n,r)}const Zo=t=>t*180/Math.PI,_0=t=>{const e=Zo(Math.atan2(t[1],t[0]));return b0(e)},uG={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:_0,rotateZ:_0,skewX:t=>Zo(Math.atan(t[1])),skewY:t=>Zo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},b0=t=>(t=t%360,t<0&&(t+=360),t),RC=_0,CC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),IC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),hG={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:CC,scaleY:IC,scale:t=>(CC(t)+IC(t))/2,rotateX:t=>b0(Zo(Math.atan2(t[6],t[5]))),rotateY:t=>b0(Zo(Math.atan2(-t[2],t[0]))),rotateZ:RC,rotate:RC,skewX:t=>Zo(Math.atan(t[4])),skewY:t=>Zo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function NC(t){return t.includes("scale")?1:0}function E0(t,e){if(!t||t==="none")return NC(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=hG,r=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=uG,r=u}if(!r)return NC(e);const o=i[e],l=r[1].split(",").map(fG);return typeof o=="function"?o(l):l[o]}const dG=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return E0(n,e)};function fG(t){return parseFloat(t.trim())}const DC=t=>t===nu||t===Me,mG=new Set(["x","y","z"]),pG=tu.filter(t=>!mG.has(t));function gG(t){const e=[];return pG.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Fc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>E0(e,"x"),y:(t,{transform:e})=>E0(e,"y")};Fc.translateX=Fc.x;Fc.translateY=Fc.y;const el=new Set;let w0=!1,T0=!1;function xP(){if(T0){const t=Array.from(el).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=gG(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{var u;(u=i.getValue(o))==null||u.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}T0=!1,w0=!1,el.forEach(t=>t.complete()),el.clear()}function RP(){el.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(T0=!0)})}function yG(){RP(),xP()}class nw{constructor(e,n,i,r,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(el.add(this),w0||(w0=!0,Gt.read(RP),Gt.resolveKeyframes(xP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=r==null?void 0:r.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const h=i.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),r&&l===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),el.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,el.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const CP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),vG=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _G(t){const e=vG.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function IP(t,e,n=1){const[i,r]=_G(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return CP(l)?parseFloat(l):l}return qE(r)?IP(r,e,n+1):r}const NP=t=>e=>e.test(t),bG={test:t=>t==="auto",parse:t=>t},DP=[nu,Me,cr,ka,y7,g7,bG],MC=t=>DP.find(NP(t));class MP extends nw{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),qE(f))){const p=IP(f,n.current);p!==void 0&&(e[h]=p),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!lP.has(i)||e.length!==2)return;const[r,o]=e,l=MC(r),u=MC(o);if(l!==u)if(DC(l)&&DC(u))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)$7(e[r])&&i.push(r);i.length&&cG(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Fc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const PC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(io.test(t)||t==="0")&&!t.startsWith("url("));function EG(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function wG(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=PC(r,e),u=PC(o,e);return!l||!u?!1:EG(t)||(n==="spring"||OE(n))&&i}const TG=t=>t!==null;function Ig(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(TG),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const SG=40;class PP{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=lr.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>SG?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&yG(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=lr.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:l,onComplete:u,onUpdate:h,isGenerator:f}=this.options;if(!f&&!wG(e,i,r,o))if(l)this.options.duration=0;else{h&&h(Ig(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const nn=(t,e,n)=>t+(e-t)*n;function o_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function AG({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=o_(h,u,t+1/3),o=o_(h,u,t),l=o_(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function kp(t,e){return n=>n>0?e:t}const l_=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},xG=[y0,Xo,yc],RG=t=>xG.find(e=>e.test(t));function OC(t){const e=RG(t);if(!e)return!1;let n=e.parse(t);return e===yc&&(n=AG(n)),n}const kC=(t,e)=>{const n=OC(t),i=OC(e);if(!n||!i)return kp(t,e);const r={...n};return o=>(r.red=l_(n.red,i.red,o),r.green=l_(n.green,i.green,o),r.blue=l_(n.blue,i.blue,o),r.alpha=nn(n.alpha,i.alpha,o),Xo.transform(r))},CG=(t,e)=>n=>e(t(n)),Fd=(...t)=>t.reduce(CG),S0=new Set(["none","hidden"]);function IG(t,e){return S0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function NG(t,e){return n=>nn(t,e,n)}function iw(t){return typeof t=="number"?NG:typeof t=="string"?qE(t)?kp:ni.test(t)?kC:PG:Array.isArray(t)?OP:typeof t=="object"?ni.test(t)?kC:DG:kp}function OP(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>iw(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function DG(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=iw(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function MG(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],l=t.indexes[o][i[o]],u=t.values[l]??0;n[r]=u,i[o]++}return n}const PG=(t,e)=>{const n=io.createTransformer(e),i=ud(t),r=ud(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?S0.has(t)&&!r.values.length||S0.has(e)&&!i.values.length?IG(t,e):Fd(OP(MG(i,r),r.values),n):kp(t,e)};function kP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?nn(t,e,n):iw(t)(t,e)}const OG=5;function LP(t,e,n){const i=Math.max(e-OG,0);return VM(n-t(i),e-i)}const ln={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},LC=.001;function kG({duration:t=ln.duration,bounce:e=ln.bounce,velocity:n=ln.velocity,mass:i=ln.mass}){let r,o,l=1-e;l=ia(ln.minDamping,ln.maxDamping,l),t=ia(ln.minDuration,ln.maxDuration,or(t)),l<1?(r=f=>{const p=f*l,y=p*t,_=p-n,E=A0(f,l),S=Math.exp(-y);return LC-_/E*S},o=f=>{const y=f*l*t,_=y*n+n,E=Math.pow(l,2)*Math.pow(f,2)*t,S=Math.exp(-y),R=A0(Math.pow(f,2),l);return(-r(f)+LC>0?-1:1)*((_-E)*S)/R}):(r=f=>{const p=Math.exp(-f*t),y=(f-n)*t+1;return-.001+p*y},o=f=>{const p=Math.exp(-f*t),y=(n-f)*(t*t);return p*y});const u=5/t,h=VG(r,o,u);if(t=ar(t),isNaN(h))return{stiffness:ln.stiffness,damping:ln.damping,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:t}}}const LG=12;function VG(t,e,n){let i=n;for(let r=1;r<LG;r++)i=i-t(i)/e(i);return i}function A0(t,e){return t*Math.sqrt(1-e*e)}const jG=["duration","bounce"],UG=["stiffness","damping","mass"];function VC(t,e){return e.some(n=>t[n]!==void 0)}function FG(t){let e={velocity:ln.velocity,stiffness:ln.stiffness,damping:ln.damping,mass:ln.mass,isResolvedFromDuration:!1,...t};if(!VC(t,UG)&&VC(t,jG))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*ia(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:ln.mass,stiffness:r,damping:o}}else{const n=kG(t);e={...e,...n,mass:ln.mass},e.isResolvedFromDuration=!0}return e}function Lp(t=ln.visualDuration,e=ln.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:p,duration:y,velocity:_,isResolvedFromDuration:E}=FG({...n,velocity:-or(n.velocity||0)}),S=_||0,R=f/(2*Math.sqrt(h*p)),I=l-o,P=or(Math.sqrt(h/p)),F=Math.abs(I)<5;i||(i=F?ln.restSpeed.granular:ln.restSpeed.default),r||(r=F?ln.restDelta.granular:ln.restDelta.default);let O;if(R<1){const G=A0(P,R);O=Y=>{const L=Math.exp(-R*P*Y);return l-L*((S+R*P*I)/G*Math.sin(G*Y)+I*Math.cos(G*Y))}}else if(R===1)O=G=>l-Math.exp(-P*G)*(I+(S+P*I)*G);else{const G=P*Math.sqrt(R*R-1);O=Y=>{const L=Math.exp(-R*P*Y),C=Math.min(G*Y,300);return l-L*((S+R*P*I)*Math.sinh(C)+G*I*Math.cosh(C))/G}}const q={calculatedDuration:E&&y||null,next:G=>{const Y=O(G);if(E)u.done=G>=y;else{let L=0;R<1&&(L=G===0?ar(S):LP(O,G,Y));const C=Math.abs(L)<=i,M=Math.abs(l-Y)<=r;u.done=C&&M}return u.value=u.done?l:Y,u},toString:()=>{const G=Math.min(LE(q),Pp),Y=jM(L=>q.next(G*L).value,G,30);return G+"ms "+Y},toTransition:()=>{}};return q}Lp.applyToOptions=t=>{const e=j8(t,100,Lp);return t.ease=sd()?e.ease:"easeOut",t.duration=ar(e.duration),t.type="keyframes",t};function jC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:h,restDelta:f=.5,restSpeed:p}){const y=t[0],_={done:!1,value:y},E=C=>u!==void 0&&C<u||h!==void 0&&C>h,S=C=>u===void 0?h:h===void 0||Math.abs(u-C)<Math.abs(h-C)?u:h;let R=n*e;const I=y+R,P=l===void 0?I:l(I);P!==I&&(R=P-y);const F=C=>-R*Math.exp(-C/i),O=C=>P+F(C),q=C=>{const M=F(C),k=O(C);_.done=Math.abs(M)<=f,_.value=_.done?P:k};let G,Y;const L=C=>{E(_.value)&&(G=C,Y=Lp({keyframes:[_.value,S(_.value)],velocity:LP(O,C,_.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return L(0),{calculatedDuration:null,next:C=>{let M=!1;return!Y&&G===void 0&&(M=!0,q(C),L(C)),G!==void 0&&C>=G?Y.next(C-G):(!M&&q(C),_)}}}const BG=Ud(.42,0,1,1),zG=Ud(0,0,.58,1),VP=Ud(.42,0,.58,1),qG=t=>Array.isArray(t)&&typeof t[0]!="number",HG={linear:ms,easeIn:BG,easeInOut:VP,easeOut:zG,circIn:JE,circInOut:yP,circOut:gP,backIn:ZE,backInOut:mP,backOut:fP,anticipate:pP},UC=t=>{if(PE(t)){LM(t.length===4);const[e,n,i,r]=t;return Ud(e,n,i,r)}else if(typeof t=="string")return HG[t];return t};function GG(t,e,n){const i=[],r=n||kP,o=t.length-1;for(let l=0;l<o;l++){let u=r(t[l],t[l+1]);if(e){const h=Array.isArray(e)?e[l]||ms:e;u=Fd(h,u)}i.push(u)}return i}function $G(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(LM(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=GG(e,i,r),h=u.length,f=p=>{if(l&&p<t[0])return e[0];let y=0;if(h>1)for(;y<t.length-2&&!(p<t[y+1]);y++);const _=id(t[y],t[y+1],p);return u[y](_)};return n?p=>f(ia(t[0],t[o-1],p)):f}function KG(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=id(0,e,i);t.push(nn(n,1,r))}}function WG(t){const e=[0];return KG(e,t.length-1),e}function YG(t,e){return t.map(n=>n*e)}function QG(t,e){return t.map(()=>e||VP).splice(0,t.length-1)}function Vp({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=qG(i)?i.map(UC):UC(i),o={done:!1,value:e[0]},l=YG(n&&n.length===e.length?n:WG(e),t),u=$G(l,e,{ease:Array.isArray(r)?r:QG(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}const XG=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Gt.update(e,!0),stop:()=>no(e),now:()=>Wn.isProcessing?Wn.timestamp:lr.now()}},ZG={decay:jC,inertia:jC,tween:Vp,keyframes:Vp,spring:Lp},JG=t=>t/100;class sw extends PP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,l=(r==null?void 0:r.KeyframeResolver)||nw,u=(h,f)=>this.onKeyframesResolved(h,f);this.resolver=new l(o,u,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=this.options,u=OE(n)?n:ZG[n]||Vp;let h,f;u!==Vp&&typeof e[0]!="number"&&(h=Fd(JG,kP(e[0],e[1])),e=[0,100]);const p=u({...this.options,keyframes:e});o==="mirror"&&(f=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=LE(p));const{calculatedDuration:y}=p,_=y+r,E=_*(i+1)-r;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:h,calculatedDuration:y,resolvedDuration:_,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:h,calculatedDuration:f,totalDuration:p,resolvedDuration:y}=i;if(this.startTime===null)return o.next(0);const{delay:_,repeat:E,repeatType:S,repeatDelay:R,onUpdate:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const P=this.currentTime-_*(this.speed>=0?1:-1),F=this.speed>=0?P<0:P>p;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let O=this.currentTime,q=o;if(E){const C=Math.min(this.currentTime,p)/y;let M=Math.floor(C),k=C%1;!k&&C>=1&&(k=1),k===1&&M--,M=Math.min(M,E+1),!!(M%2)&&(S==="reverse"?(k=1-k,R&&(k-=R/y)):S==="mirror"&&(q=l)),O=ia(0,1,k)*y}const G=F?{done:!1,value:h[0]}:q.next(O);u&&(G.value=u(G.value));let{done:Y}=G;!F&&f!==null&&(Y=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return L&&r!==void 0&&(G.value=Ig(h,this.options,r)),I&&I(G.value),L&&this.finish(),G}get duration(){const{resolved:e}=this;return e?or(e.calculatedDuration):0}get time(){return or(this.currentTime)}set time(e){e=ar(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=or(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=XG,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const e$=new Set(["opacity","clipPath","filter","transform"]),t$=DE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),jp=10,n$=2e4;function i$(t){return OE(t.type)||t.type==="spring"||!FM(t.ease)}function s$(t,e){const n=new sw({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<n$;)i=n.sample(o),r.push(i.value),o+=jp;return{times:void 0,keyframes:r,duration:o-jp,ease:"linear"}}const jP={anticipate:pP,backInOut:mP,circInOut:yP};function r$(t){return t in jP}class FC extends PP{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new MP(o,(l,u)=>this.onKeyframesResolved(l,u),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:l,motionValue:u,name:h,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&sd()&&r$(o)&&(o=jP[o]),i$(this.options)){const{onComplete:y,onUpdate:_,motionValue:E,element:S,...R}=this.options,I=s$(e,R);e=I.keyframes,e.length===1&&(e[1]=e[0]),i=I.duration,r=I.times,o=I.ease,l="keyframes"}const p=V8(u.owner.current,h,e,{...this.options,duration:i,times:r,ease:o});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(mC(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:y}=this.options;u.set(Ig(e,this.options,n)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return or(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return or(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=ar(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ms;const{animation:i}=n;mC(i,e)}return ms}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:l,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:y,element:_,...E}=this.options,S=new sw({...E,keyframes:i,duration:r,type:o,ease:l,times:u,isGenerator:!0}),R=ar(this.time);f.setWithVelocity(S.sample(R-jp).value,S.sample(R).value,jp)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:l,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=n.owner.getProps();return t$()&&i&&e$.has(i)&&(i!=="transform"||!f)&&!h&&!r&&o!=="mirror"&&l!==0&&u!=="inertia"}}const a$={type:"spring",stiffness:500,damping:25,restSpeed:10},o$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),l$={type:"keyframes",duration:.8},c$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},u$=(t,{keyframes:e})=>e.length>2?l$:yl.has(t)?t.startsWith("scale")?o$(e[1]):a$:c$;function h$({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const rw=(t,e,n,i={},r,o)=>l=>{const u=kE(i,t)||{},h=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-ar(h);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:r};h$(u)||(p={...p,...u$(t,p)}),p.duration&&(p.duration=ar(p.duration)),p.repeatDelay&&(p.repeatDelay=ar(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(y=!0)),p.allowFlatten=!u.type&&!u.ease,y&&!o&&e.get()!==void 0){const _=Ig(p.keyframes,u);if(_!==void 0)return Gt.update(()=>{p.onUpdate(_),p.onComplete()}),new O8([])}return!o&&FC.supports(p)?new FC(p):new sw(p)};function d$({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function UP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;i&&(o=i);const h=[],f=r&&t.animationState&&t.animationState.getState()[r];for(const p in u){const y=t.getValue(p,t.latestValues[p]??null),_=u[p];if(_===void 0||f&&d$(f,p))continue;const E={delay:n,...kE(o||{},p)};let S=!1;if(window.MotionHandoffAnimation){const I=cP(t);if(I){const P=window.MotionHandoffAnimation(I,p,Gt);P!==null&&(E.startTime=P,S=!0)}}g0(t,p),y.start(rw(p,y,_,t.shouldReduceMotion&&lP.has(p)?{type:!1}:E,t,S));const R=y.animation;R&&h.push(R)}return l&&Promise.all(h).then(()=>{Gt.update(()=>{l&&B7(t,l)})}),h}function x0(t,e,n={}){var h;const i=cd(t,e,n.type==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(UP(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:_}=r;return f$(t,e,p+f,y,_,n)}:()=>Promise.resolve(),{when:u}=r;if(u){const[f,p]=u==="beforeChildren"?[o,l]:[l,o];return f().then(()=>p())}else return Promise.all([o(),l(n.delay)])}function f$(t,e,n=0,i=0,r=1,o){const l=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(m$).forEach((f,p)=>{f.notify("AnimationStart",e),l.push(x0(f,e,{...o,delay:n+h(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function m$(t,e){return t.sortNodePosition(e)}function p$(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>x0(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=x0(t,e,n);else{const r=typeof e=="function"?cd(t,e,n.custom):e;i=Promise.all(UP(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function FP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const g$=FE.length;function BP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?BP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<g$;n++){const i=FE[n],r=t.props[i];(ad(r)||r===!1)&&(e[i]=r)}return e}const y$=[...UE].reverse(),v$=UE.length;function _$(t){return e=>Promise.all(e.map(({animation:n,options:i})=>p$(t,n,i)))}function b$(t){let e=_$(t),n=BC(),i=!0;const r=h=>(f,p)=>{var _;const y=cd(t,p,h==="exit"?(_=t.presenceContext)==null?void 0:_.custom:void 0);if(y){const{transition:E,transitionEnd:S,...R}=y;f={...f,...R,...S}}return f};function o(h){e=h(t)}function l(h){const{props:f}=t,p=BP(t.parent)||{},y=[],_=new Set;let E={},S=1/0;for(let I=0;I<v$;I++){const P=y$[I],F=n[P],O=f[P]!==void 0?f[P]:p[P],q=ad(O),G=P===h?F.isActive:null;G===!1&&(S=I);let Y=O===p[P]&&O!==f[P]&&q;if(Y&&i&&t.manuallyAnimateOnMount&&(Y=!1),F.protectedKeys={...E},!F.isActive&&G===null||!O&&!F.prevProp||Rg(O)||typeof O=="boolean")continue;const L=E$(F.prevProp,O);let C=L||P===h&&F.isActive&&!Y&&q||I>S&&q,M=!1;const k=Array.isArray(O)?O:[O];let j=k.reduce(r(P),{});G===!1&&(j={});const{prevResolvedValues:B={}}=F,V={...B,...j},ve=te=>{C=!0,_.has(te)&&(M=!0,_.delete(te)),F.needsAnimating[te]=!0;const ue=t.getValue(te);ue&&(ue.liveStyle=!1)};for(const te in V){const ue=j[te],be=B[te];if(E.hasOwnProperty(te))continue;let ie=!1;p0(ue)&&p0(be)?ie=!FP(ue,be):ie=ue!==be,ie?ue!=null?ve(te):_.add(te):ue!==void 0&&_.has(te)?ve(te):F.protectedKeys[te]=!0}F.prevProp=O,F.prevResolvedValues=j,F.isActive&&(E={...E,...j}),i&&t.blockInitialAnimation&&(C=!1),C&&(!(Y&&L)||M)&&y.push(...k.map(te=>({animation:te,options:{type:P}})))}if(_.size){const I={};if(typeof f.initial!="boolean"){const P=cd(t,Array.isArray(f.initial)?f.initial[0]:f.initial);P&&P.transition&&(I.transition=P.transition)}_.forEach(P=>{const F=t.getBaseTarget(P),O=t.getValue(P);O&&(O.liveStyle=!0),I[P]=F??null}),y.push({animation:I})}let R=!!y.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(R=!1),i=!1,R?e(y):Promise.resolve()}function u(h,f){var y;if(n[h].isActive===f)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(_=>{var E;return(E=_.animationState)==null?void 0:E.setActive(h,f)}),n[h].isActive=f;const p=l(h);for(const _ in n)n[_].protectedKeys={};return p}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=BC(),i=!0}}}function E$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!FP(e,t):!1}function zo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function BC(){return{animate:zo(!0),whileInView:zo(),whileHover:zo(),whileTap:zo(),whileDrag:zo(),whileFocus:zo(),exit:zo()}}class ho{constructor(e){this.isMounted=!1,this.node=e}update(){}}class w$ extends ho{constructor(e){super(e),e.animationState||(e.animationState=b$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let T$=0;class S$ extends ho{constructor(){super(...arguments),this.id=T$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const A$={animation:{Feature:w$},exit:{Feature:S$}};function hd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Bd(t){return{point:{x:t.pageX,y:t.pageY}}}const x$=t=>e=>jE(e)&&t(e,Bd(e));function Oh(t,e,n,i){return hd(t,e,x$(n),i)}function zP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function R$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function C$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const qP=1e-4,I$=1-qP,N$=1+qP,HP=.01,D$=0-HP,M$=0+HP;function vi(t){return t.max-t.min}function P$(t,e,n){return Math.abs(t-e)<=n}function zC(t,e,n,i=.5){t.origin=i,t.originPoint=nn(e.min,e.max,t.origin),t.scale=vi(n)/vi(e),t.translate=nn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=I$&&t.scale<=N$||isNaN(t.scale))&&(t.scale=1),(t.translate>=D$&&t.translate<=M$||isNaN(t.translate))&&(t.translate=0)}function kh(t,e,n,i){zC(t.x,e.x,n.x,i?i.originX:void 0),zC(t.y,e.y,n.y,i?i.originY:void 0)}function qC(t,e,n){t.min=n.min+e.min,t.max=t.min+vi(e)}function O$(t,e,n){qC(t.x,e.x,n.x),qC(t.y,e.y,n.y)}function HC(t,e,n){t.min=e.min-n.min,t.max=t.min+vi(e)}function Lh(t,e,n){HC(t.x,e.x,n.x),HC(t.y,e.y,n.y)}const GC=()=>({translate:0,scale:1,origin:0,originPoint:0}),vc=()=>({x:GC(),y:GC()}),$C=()=>({min:0,max:0}),fn=()=>({x:$C(),y:$C()});function hs(t){return[t("x"),t("y")]}function c_(t){return t===void 0||t===1}function R0({scale:t,scaleX:e,scaleY:n}){return!c_(t)||!c_(e)||!c_(n)}function Go(t){return R0(t)||GP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function GP(t){return KC(t.x)||KC(t.y)}function KC(t){return t&&t!=="0%"}function Up(t,e,n){const i=t-n,r=e*i;return n+r}function WC(t,e,n,i,r){return r!==void 0&&(t=Up(t,r,i)),Up(t,n,i)+e}function C0(t,e=0,n=1,i,r){t.min=WC(t.min,e,n,i,r),t.max=WC(t.max,e,n,i,r)}function $P(t,{x:e,y:n}){C0(t.x,e.translate,e.scale,e.originPoint),C0(t.y,n.translate,n.scale,n.originPoint)}const YC=.999999999999,QC=1.0000000000001;function k$(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let u=0;u<r;u++){o=n[u],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&bc(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,$P(t,l)),i&&Go(o.latestValues)&&bc(t,o.latestValues))}e.x<QC&&e.x>YC&&(e.x=1),e.y<QC&&e.y>YC&&(e.y=1)}function _c(t,e){t.min=t.min+e,t.max=t.max+e}function XC(t,e,n,i,r=.5){const o=nn(t.min,t.max,r);C0(t,e,n,o,i)}function bc(t,e){XC(t.x,e.x,e.scaleX,e.scale,e.originX),XC(t.y,e.y,e.scaleY,e.scale,e.originY)}function KP(t,e){return zP(C$(t.getBoundingClientRect(),e))}function L$(t,e,n){const i=KP(t,n),{scroll:r}=e;return r&&(_c(i.x,r.offset.x),_c(i.y,r.offset.y)),i}const WP=({current:t})=>t?t.ownerDocument.defaultView:null,ZC=(t,e)=>Math.abs(t-e);function V$(t,e){const n=ZC(t.x,e.x),i=ZC(t.y,e.y);return Math.sqrt(n**2+i**2)}class YP{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=h_(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=V$(y.offset,{x:0,y:0})>=3;if(!_&&!E)return;const{point:S}=y,{timestamp:R}=Wn;this.history.push({...S,timestamp:R});const{onStart:I,onMove:P}=this.handlers;_||(I&&I(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,y)},this.handlePointerMove=(y,_)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=u_(_,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(y,_)=>{this.end();const{onEnd:E,onSessionEnd:S,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=h_(y.type==="pointercancel"?this.lastMoveEventInfo:u_(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(y,I),S&&S(y,I)},!jE(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=Bd(e),u=u_(l,this.transformPagePoint),{point:h}=u,{timestamp:f}=Wn;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,h_(u,this.history)),this.removeListeners=Fd(Oh(this.contextWindow,"pointermove",this.handlePointerMove),Oh(this.contextWindow,"pointerup",this.handlePointerUp),Oh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),no(this.updatePoint)}}function u_(t,e){return e?{point:e(t.point)}:t}function JC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function h_({point:t},e){return{point:t,delta:JC(t,QP(e)),offset:JC(t,j$(e)),velocity:U$(e,.1)}}function j$(t){return t[0]}function QP(t){return t[t.length-1]}function U$(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=QP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>ar(e)));)n--;if(!i)return{x:0,y:0};const o=or(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function F$(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?nn(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?nn(n,t,i.max):Math.min(t,n)),t}function e1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function B$(t,{top:e,left:n,bottom:i,right:r}){return{x:e1(t.x,n,r),y:e1(t.y,e,i)}}function t1(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function z$(t,e){return{x:t1(t.x,e.x),y:t1(t.y,e.y)}}function q$(t,e){let n=.5;const i=vi(t),r=vi(e);return r>i?n=id(e.min,e.max-i,t.min):i>r&&(n=id(t.min,t.max-r,e.min)),ia(0,1,n)}function H$(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const I0=.35;function G$(t=I0){return t===!1?t=0:t===!0&&(t=I0),{x:n1(t,"left","right"),y:n1(t,"top","bottom")}}function n1(t,e,n){return{min:i1(t,e),max:i1(t,n)}}function i1(t,e){return typeof t=="number"?t:t[e]||0}const $$=new WeakMap;class K${constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Bd(p).point)},o=(p,y)=>{const{drag:_,dragPropagation:E,onDragStart:S}=this.getProps();if(_&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=z8(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hs(I=>{let P=this.getAxisMotionValue(I).get()||0;if(cr.test(P)){const{projection:F}=this.visualElement;if(F&&F.layout){const O=F.layout.layoutBox[I];O&&(P=vi(O)*(parseFloat(P)/100))}}this.originPoint[I]=P}),S&&Gt.postRender(()=>S(p,y)),g0(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},l=(p,y)=>{const{dragPropagation:_,dragDirectionLock:E,onDirectionLock:S,onDrag:R}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:I}=y;if(E&&this.currentDirection===null){this.currentDirection=W$(I),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",y.point,I),this.updateAxis("y",y.point,I),this.visualElement.render(),R&&R(p,y)},u=(p,y)=>this.stop(p,y),h=()=>hs(p=>{var y;return this.getAnimationState(p)==="paused"&&((y=this.getAxisMotionValue(p).animation)==null?void 0:y.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new YP(e,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:WP(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Gt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Rm(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=F$(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,r=this.constraints;e&&gc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=B$(i.layoutBox,e):this.constraints=!1,this.elastic=G$(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&hs(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=H$(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!gc(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=L$(i,r.root,this.visualElement.getTransformPagePoint());let l=z$(r.layout.layoutBox,o);if(n){const u=n(R$(l));this.hasMutatedConstraints=!!u,u&&(l=zP(u))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=hs(p=>{if(!Rm(p,n,this.currentDirection))return;let y=h&&h[p]||{};l&&(y={min:0,max:0});const _=r?200:1e6,E=r?40:1e7,S={type:"inertia",velocity:i?e[p]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(p,S)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return g0(this.visualElement,e),i.start(rw(e,i,0,n,this.visualElement,!1))}stopAnimation(){hs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){hs(n=>{const{drag:i}=this.getProps();if(!Rm(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:u}=r.layout.layoutBox[n];o.set(e[n]-nn(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!gc(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};hs(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();r[l]=q$({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),hs(l=>{if(!Rm(l,e,null))return;const u=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];u.set(nn(h,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;$$.set(this.visualElement,this);const e=this.visualElement.current,n=Oh(e,"pointerdown",h=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();gc(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Gt.read(i);const l=hd(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(hs(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=h[p].translate,y.set(y.get()+h[p].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=I0,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function Rm(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function W$(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Y$ extends ho{constructor(e){super(e),this.removeGroupControls=ms,this.removeListeners=ms,this.controls=new K$(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ms}unmount(){this.removeGroupControls(),this.removeListeners()}}const s1=t=>(e,n)=>{t&&Gt.postRender(()=>t(e,n))};class Q$ extends ho{constructor(){super(...arguments),this.removePointerDownListener=ms}onPointerDown(e){this.session=new YP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:s1(e),onStart:s1(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&Gt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=Oh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function r1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const hh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Me.test(t))t=parseFloat(t);else return t;const n=r1(t,e.target.x),i=r1(t,e.target.y);return`${n}% ${i}%`}},X$={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=io.parse(t);if(r.length>5)return i;const o=io.createTransformer(t),l=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+l]/=u,r[1+l]/=h;const f=nn(u,h,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),o(r)}};class Z$ extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;p7(J$),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Wm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,l=i.projection;return l&&(l.isPresent=o,r||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Gt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),VE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function XP(t){const[e,n]=kM(),i=x.useContext(AE);return w.jsx(Z$,{...t,layoutGroup:i,switchLayoutGroup:x.useContext(YM),isPresent:e,safeToRemove:n})}const J$={borderRadius:{...hh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hh,borderTopRightRadius:hh,borderBottomLeftRadius:hh,borderBottomRightRadius:hh,boxShadow:X$};function eK(t,e,n){const i=ci(t)?t:rd(t);return i.start(rw("",i,e,n)),i.animation}function tK(t){return t instanceof SVGElement&&t.tagName!=="svg"}const nK=(t,e)=>t.depth-e.depth;class iK{constructor(){this.children=[],this.isDirty=!1}add(e){IE(this.children,e),this.isDirty=!0}remove(e){NE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nK),this.isDirty=!1,this.children.forEach(e)}}function sK(t,e){const n=lr.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(no(i),t(o-e))};return Gt.read(i,!0),()=>no(i)}const ZP=["TopLeft","TopRight","BottomLeft","BottomRight"],rK=ZP.length,a1=t=>typeof t=="string"?parseFloat(t):t,o1=t=>typeof t=="number"||Me.test(t);function aK(t,e,n,i,r,o){r?(t.opacity=nn(0,n.opacity!==void 0?n.opacity:1,oK(i)),t.opacityExit=nn(e.opacity!==void 0?e.opacity:1,0,lK(i))):o&&(t.opacity=nn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<rK;l++){const u=`border${ZP[l]}Radius`;let h=l1(e,u),f=l1(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||o1(h)===o1(f)?(t[u]=Math.max(nn(a1(h),a1(f),i),0),(cr.test(f)||cr.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=nn(e.rotate||0,n.rotate||0,i))}function l1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const oK=JP(0,.5,gP),lK=JP(.5,.95,ms);function JP(t,e,n){return i=>i<t?0:i>e?1:n(id(t,e,i))}function c1(t,e){t.min=e.min,t.max=e.max}function us(t,e){c1(t.x,e.x),c1(t.y,e.y)}function u1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function h1(t,e,n,i,r){return t-=e,t=Up(t,1/n,i),r!==void 0&&(t=Up(t,1/r,i)),t}function cK(t,e=0,n=1,i=.5,r,o=t,l=t){if(cr.test(e)&&(e=parseFloat(e),e=nn(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=nn(o.min,o.max,i);t===o&&(u-=e),t.min=h1(t.min,e,n,u,r),t.max=h1(t.max,e,n,u,r)}function d1(t,e,[n,i,r],o,l){cK(t,e[n],e[i],e[r],e.scale,o,l)}const uK=["x","scaleX","originX"],hK=["y","scaleY","originY"];function f1(t,e,n,i){d1(t.x,e,uK,n?n.x:void 0,i?i.x:void 0),d1(t.y,e,hK,n?n.y:void 0,i?i.y:void 0)}function m1(t){return t.translate===0&&t.scale===1}function eO(t){return m1(t.x)&&m1(t.y)}function p1(t,e){return t.min===e.min&&t.max===e.max}function dK(t,e){return p1(t.x,e.x)&&p1(t.y,e.y)}function g1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function tO(t,e){return g1(t.x,e.x)&&g1(t.y,e.y)}function y1(t){return vi(t.x)/vi(t.y)}function v1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class fK{constructor(){this.members=[]}add(e){IE(this.members,e),e.scheduleRender()}remove(e){if(NE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mK(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:y,rotateY:_,skewX:E,skewY:S}=n;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),y&&(i+=`rotateX(${y}deg) `),_&&(i+=`rotateY(${_}deg) `),E&&(i+=`skewX(${E}deg) `),S&&(i+=`skewY(${S}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(i+=`scale(${u}, ${h})`),i||"none"}const d_=["","X","Y","Z"],pK={visibility:"hidden"},_1=1e3;let gK=0;function f_(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function nO(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=cP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&nO(i)}function iO({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},u=e==null?void 0:e()){this.id=gK++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_K),this.nodes.forEach(SK),this.nodes.forEach(AK),this.nodes.forEach(bK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new iK)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new ME),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const h=this.eventHandlers.get(l);h&&h.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=tK(l),this.instance=l;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let y;const _=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=sK(_,250),Wm.hasAnimatedSinceResize&&(Wm.hasAnimatedSinceResize=!1,this.nodes.forEach(E1))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:_,hasRelativeLayoutChanged:E,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||p.getDefaultTransition()||NK,{onLayoutAnimationStart:I,onLayoutAnimationComplete:P}=p.getProps(),F=!this.targetLayout||!tO(this.targetLayout,S),O=!_&&E;if(this.options.layoutRoot||this.resumeFrom||O||_&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,O);const q={...kE(R,"layout"),onPlay:I,onComplete:P};(p.shouldReduceMotion||this.options.layoutRoot)&&(q.delay=0,q.type=!1),this.startAnimation(q)}else _||E1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,no(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xK),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(b1);return}this.isUpdating||this.nodes.forEach(wK),this.isUpdating=!1,this.nodes.forEach(TK),this.nodes.forEach(yK),this.nodes.forEach(vK),this.clearAllSnapshots();const u=lr.now();Wn.delta=ia(0,1e3/60,u-Wn.timestamp),Wn.timestamp=u,Wn.isProcessing=!0,s_.update.process(Wn),s_.preRender.process(Wn),s_.render.process(Wn),Wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,VE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(EK),this.sharedNodes.forEach(RK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vi(this.snapshot.measuredBox.x)&&!vi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!eO(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&(u||Go(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return l&&(h=this.removeTransform(h)),DK(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:l}=this.options;if(!l)return fn();const u=l.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(MK))){const{scroll:p}=this.root;p&&(_c(u.x,p.offset.x),_c(u.y,p.offset.y))}return u}removeElementScroll(l){var h;const u=fn();if(us(u,l),(h=this.scroll)!=null&&h.wasRoot)return u;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:y,options:_}=p;p!==this.root&&y&&_.layoutScroll&&(y.wasRoot&&us(u,l),_c(u.x,y.offset.x),_c(u.y,y.offset.y))}return u}applyTransform(l,u=!1){const h=fn();us(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&bc(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Go(p.latestValues)&&bc(h,p.latestValues)}return Go(this.latestValues)&&bc(h,this.latestValues),h}removeTransform(l){const u=fn();us(u,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Go(f.latestValues))continue;R0(f.latestValues)&&f.updateSnapshot();const p=fn(),y=f.measurePageBox();us(p,y),f1(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Go(this.latestValues)&&f1(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var _;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=Wn.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),Lh(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=fn(),this.targetWithTransforms=fn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),O$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):us(this.target,this.layout.layoutBox),$P(this.target,this.targetDelta)):us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),Lh(this.relativeTargetOrigin,this.target,E.target),us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||R0(this.parent.latestValues)||GP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var S;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Wn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;us(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,_=this.treeScale.y;k$(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=fn());const{target:E}=l;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(u1(this.prevProjectionDelta.x,this.projectionDelta.x),u1(this.prevProjectionDelta.y,this.projectionDelta.y)),kh(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==_||!v1(this.projectionDelta.x,this.prevProjectionDelta.x)||!v1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vc(),this.projectionDelta=vc(),this.projectionDeltaWithTransform=vc()}setAnimationOrigin(l,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},y=vc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=fn(),E=h?h.source:void 0,S=this.layout?this.layout.source:void 0,R=E!==S,I=this.getStack(),P=!I||I.members.length<=1,F=!!(R&&!P&&this.options.crossfade===!0&&!this.path.some(IK));this.animationProgress=0;let O;this.mixTargetDelta=q=>{const G=q/1e3;w1(y.x,l.x,G),w1(y.y,l.y,G),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lh(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CK(this.relativeTarget,this.relativeTargetOrigin,_,G),O&&dK(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=fn()),us(O,this.relativeTarget)),R&&(this.animationValues=p,aK(p,f,this.latestValues,G,F,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(no(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{Wm.hasAnimatedSinceResize=!0,this.currentAnimation=eK(0,_1,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=l;if(!(!u||!h||!f)){if(this!==l&&this.layout&&f&&sO(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||fn();const y=vi(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+y;const _=vi(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+_}us(u,h),bc(u,p),kh(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new fK),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&f_("z",l,f,this.animationValues);for(let p=0;p<d_.length;p++)f_(`rotate${d_[p]}`,l,f,this.animationValues),f_(`skew${d_[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return pK;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Km(l==null?void 0:l.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=Km(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Go(this.latestValues)&&(E.transform=h?h({},""):"none",this.hasProjected=!1),E}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=mK(this.projectionDeltaWithTransform,this.treeScale,p),h&&(u.transform=h(p,u.transform));const{x:y,y:_}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,f.animationValues?u.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const E in od){if(p[E]===void 0)continue;const{correct:S,applyTo:R,isCSSVariable:I}=od[E],P=u.transform==="none"?p[E]:S(p[E],f);if(R){const F=R.length;for(let O=0;O<F;O++)u[R[O]]=P}else I?this.options.visualElement.renderState.vars[E]=P:u[E]=P}return this.options.layoutId&&(u.pointerEvents=f===this?Km(l==null?void 0:l.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(b1),this.root.sharedNodes.clear()}}}function yK(t){t.updateLayout()}function vK(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?hs(y=>{const _=l?e.measuredBox[y]:e.layoutBox[y],E=vi(_);_.min=i[y].min,_.max=_.min+E}):sO(o,e.layoutBox,i)&&hs(y=>{const _=l?e.measuredBox[y]:e.layoutBox[y],E=vi(i[y]);_.max=_.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+E)});const u=vc();kh(u,i,e.layoutBox);const h=vc();l?kh(h,t.applyTransform(r,!0),e.measuredBox):kh(h,i,e.layoutBox);const f=!eO(u);let p=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:_,layout:E}=y;if(_&&E){const S=fn();Lh(S,e.layoutBox,_.layoutBox);const R=fn();Lh(R,i,E.layoutBox),tO(S,R)||(p=!0),y.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=S,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function _K(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function EK(t){t.clearSnapshot()}function b1(t){t.clearMeasurements()}function wK(t){t.isLayoutDirty=!1}function TK(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function E1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function SK(t){t.resolveTargetDelta()}function AK(t){t.calcProjection()}function xK(t){t.resetSkewAndRotation()}function RK(t){t.removeLeadSnapshot()}function w1(t,e,n){t.translate=nn(e.translate,0,n),t.scale=nn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function T1(t,e,n,i){t.min=nn(e.min,n.min,i),t.max=nn(e.max,n.max,i)}function CK(t,e,n,i){T1(t.x,e.x,n.x,i),T1(t.y,e.y,n.y,i)}function IK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const NK={duration:.45,ease:[.4,0,.1,1]},S1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),A1=S1("applewebkit/")&&!S1("chrome/")?Math.round:ms;function x1(t){t.min=A1(t.min),t.max=A1(t.max)}function DK(t){x1(t.x),x1(t.y)}function sO(t,e,n){return t==="position"||t==="preserve-aspect"&&!P$(y1(e),y1(n),.2)}function MK(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const PK=iO({attachResizeListener:(t,e)=>hd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),m_={current:void 0},rO=iO({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!m_.current){const t=new PK({});t.mount(window),t.setOptions({layoutScroll:!0}),m_.current=t}return m_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),OK={pan:{Feature:Q$},drag:{Feature:Y$,ProjectionNode:rO,MeasureLayout:XP}};function R1(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Gt.postRender(()=>o(e,Bd(e)))}class kK extends ho{mount(){const{current:e}=this.node;e&&(this.unmount=H8(e,(n,i)=>(R1(this.node,i,"Start"),r=>R1(this.node,r,"End"))))}unmount(){}}class LK extends ho{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fd(hd(this.node.current,"focus",()=>this.onFocus()),hd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function C1(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Gt.postRender(()=>o(e,Bd(e)))}class VK extends ho{mount(){const{current:e}=this.node;e&&(this.unmount=W8(e,(n,i)=>(C1(this.node,i,"Start"),(r,{success:o})=>C1(this.node,r,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const N0=new WeakMap,p_=new WeakMap,jK=t=>{const e=N0.get(t.target);e&&e(t)},UK=t=>{t.forEach(jK)};function FK({root:t,...e}){const n=t||document;p_.has(n)||p_.set(n,{});const i=p_.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(UK,{root:t,...e})),i[r]}function BK(t,e,n){const i=FK(e);return N0.set(t,n),i.observe(t),()=>{N0.delete(t),i.unobserve(t)}}const zK={some:0,all:1};class qK extends ho{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:zK[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),_=f?p:y;_&&_(h)};return BK(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(HK(e,n))&&this.startObserver()}unmount(){}}function HK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const GK={inView:{Feature:qK},tap:{Feature:VK},focus:{Feature:LK},hover:{Feature:kK}},$K={layout:{ProjectionNode:rO,MeasureLayout:XP}},D0={current:null},aO={current:!1};function KK(){if(aO.current=!0,!!RE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>D0.current=t.matches;t.addListener(e),e()}else D0.current=!1}const WK=[...DP,ni,io],YK=t=>WK.find(NP(t)),QK=new WeakMap;function XK(t,e,n){for(const i in e){const r=e[i],o=n[i];if(ci(r))t.addValue(i,r);else if(ci(o))t.addValue(i,rd(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,rd(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const I1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZK{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=lr.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,Gt.render(this.render,!1,!0))};const{latestValues:h,renderState:f,onUpdate:p}=l;this.onUpdate=p,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Cg(n),this.isVariantNode=KM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in _){const S=_[E];h[E]!==void 0&&ci(S)&&S.set(h[E],!1)}}mount(e){this.current=e,QK.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),aO.current||KK(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:D0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),no(this.notifyUpdate),no(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=yl.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Uc){const n=Uc[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<I1.length;i++){const r=I1[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=XK(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=rd(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(CP(i)||vP(i))?i=parseFloat(i):!YK(i)&&io.test(n)&&(i=AP(e,n)),this.setBaseTarget(e,ci(i)?i.get():i)),ci(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const l=QE(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);l&&(i=l[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!ci(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ME),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class oO extends ZK{constructor(){super(...arguments),this.KeyframeResolver=MP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ci(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function JK(t){return window.getComputedStyle(t)}class eW extends oO{constructor(){super(...arguments),this.type="html",this.renderInstance=sP}readValueFromInstance(e,n){if(yl.has(n))return dG(e,n);{const i=JK(e),r=(zE(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return KP(e,n)}build(e,n,i){GE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return XE(e,n,i)}}class tW extends oO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fn,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&iP(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(yl.has(n)){const i=SP(n);return i&&i.default||0}return n=rP.has(n)?n:BE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return oP(e,n,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&Gt.postRender(this.updateDimensions)}build(e,n,i){WE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){aP(e,n,i,r)}mount(e){this.isSVGTag=YE(e.tagName),super.mount(e)}}const nW=(t,e)=>KE(t)?new tW(e):new eW(e,{allowProjection:t!==x.Fragment}),iW=U7({...A$,...GK,...OK,...$K},nW),$o=t7(iW),dd={Debeng:100,"Cadian (Linos Res.- Coop)":130,"Cadian (Kimhaf- Molitos)":150,Tuangan:170,Awa:250,"Pi-ket":300,"Topdac ES":400,Bangawan:480,Besil:500,Polis:600,Tolmod:800,Wagi:900,Shekdan:1e3,"Batu ILI PS":1500,Pual:350,Nalseb:600,Poblacion:600,Sowe:700,Maguey:1200,Pasdong:1700,Catingel:120,Pareg:140,"Kinaong (Baldinos Res)":150,Bileng:170,Cato:250,Balat:350,Segib:400,"Caliking Proper":300,Conet:350,Kesbong:350,Pokit:600,"KM 28":100,"Usap to Saddle":120,Wingian:140,"Siko Curve":150,"Atiws Res.":170,"Saw Mill":200,"KM.24":200,Galilea:220,"KM.22 (Bilis Junction)":250,Bilis:600,"KM.21 (Cagui-ing Elem.)":250,"Labey Junction to coruz junction":300,Acop:600,Tomay:700,"Camp Dangwa":800,"KM.5":1e3,Baguio:1500,"KM.31":100,"KM.32 (Food way-paasin)":130,Tolding:200,Menac:250,"KM.34":150,Japasan:160,"KM.35 (Amcay to Moltio)":170,"KM.36":200,"KM.37":220,"KM.38":250,"Bet-Ang":250,Apunan:300,"Aduyanan ES":300,"Sapuan Junction to Abiangan Brgy Hall":300,Gueweng:350,Lebten:400,Labban:400,Bokao:600,Bonglo:600,Sayangan:700,Abatan:3800,Antabeng:250,Patapat:300,Japa:320,Palutan:250,"Menios Res.":320,"Guzman, Rudy Res.":350,"Japa ES":350,Coop:350,"Talite Junction":500,Ketneg:800,"Tag-Ulo":1e3};function lO(t,e,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties={},i.geometry=t,i}function sW(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!N1(t[0])||!N1(t[1]))throw new Error("coordinates must contain numbers");return lO({type:"Point",coordinates:t},e,n)}function rW(t,e,n={}){for(const r of t){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<r[r.length-1].length;o++)if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}return lO({type:"Polygon",coordinates:t},e,n)}function N1(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}const Yr=11102230246251565e-32,ti=134217729,aW=(3+8*Yr)*Yr;function g_(t,e,n,i,r){let o,l,u,h,f=e[0],p=i[0],y=0,_=0;p>f==p>-f?(o=f,f=e[++y]):(o=p,p=i[++_]);let E=0;if(y<t&&_<n)for(p>f==p>-f?(l=f+o,u=o-(l-f),f=e[++y]):(l=p+o,u=o-(l-p),p=i[++_]),o=l,u!==0&&(r[E++]=u);y<t&&_<n;)p>f==p>-f?(l=o+f,h=l-o,u=o-(l-h)+(f-h),f=e[++y]):(l=o+p,h=l-o,u=o-(l-h)+(p-h),p=i[++_]),o=l,u!==0&&(r[E++]=u);for(;y<t;)l=o+f,h=l-o,u=o-(l-h)+(f-h),f=e[++y],o=l,u!==0&&(r[E++]=u);for(;_<n;)l=o+p,h=l-o,u=o-(l-h)+(p-h),p=i[++_],o=l,u!==0&&(r[E++]=u);return(o!==0||E===0)&&(r[E++]=o),E}function oW(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function zd(t){return new Float64Array(t)}const lW=(3+16*Yr)*Yr,cW=(2+12*Yr)*Yr,uW=(9+64*Yr)*Yr*Yr,lc=zd(4),D1=zd(8),M1=zd(12),P1=zd(16),yi=zd(4);function hW(t,e,n,i,r,o,l){let u,h,f,p,y,_,E,S,R,I,P,F,O,q,G,Y,L,C;const M=t-r,k=n-r,j=e-o,B=i-o;q=M*B,_=ti*M,E=_-(_-M),S=M-E,_=ti*B,R=_-(_-B),I=B-R,G=S*I-(q-E*R-S*R-E*I),Y=j*k,_=ti*j,E=_-(_-j),S=j-E,_=ti*k,R=_-(_-k),I=k-R,L=S*I-(Y-E*R-S*R-E*I),P=G-L,y=G-P,lc[0]=G-(P+y)+(y-L),F=q+P,y=F-q,O=q-(F-y)+(P-y),P=O-Y,y=O-P,lc[1]=O-(P+y)+(y-Y),C=F+P,y=C-F,lc[2]=F-(C-y)+(P-y),lc[3]=C;let V=oW(4,lc),ve=cW*l;if(V>=ve||-V>=ve||(y=t-M,u=t-(M+y)+(y-r),y=n-k,f=n-(k+y)+(y-r),y=e-j,h=e-(j+y)+(y-o),y=i-B,p=i-(B+y)+(y-o),u===0&&h===0&&f===0&&p===0)||(ve=uW*l+aW*Math.abs(V),V+=M*p+B*u-(j*f+k*h),V>=ve||-V>=ve))return V;q=u*B,_=ti*u,E=_-(_-u),S=u-E,_=ti*B,R=_-(_-B),I=B-R,G=S*I-(q-E*R-S*R-E*I),Y=h*k,_=ti*h,E=_-(_-h),S=h-E,_=ti*k,R=_-(_-k),I=k-R,L=S*I-(Y-E*R-S*R-E*I),P=G-L,y=G-P,yi[0]=G-(P+y)+(y-L),F=q+P,y=F-q,O=q-(F-y)+(P-y),P=O-Y,y=O-P,yi[1]=O-(P+y)+(y-Y),C=F+P,y=C-F,yi[2]=F-(C-y)+(P-y),yi[3]=C;const we=g_(4,lc,4,yi,D1);q=M*p,_=ti*M,E=_-(_-M),S=M-E,_=ti*p,R=_-(_-p),I=p-R,G=S*I-(q-E*R-S*R-E*I),Y=j*f,_=ti*j,E=_-(_-j),S=j-E,_=ti*f,R=_-(_-f),I=f-R,L=S*I-(Y-E*R-S*R-E*I),P=G-L,y=G-P,yi[0]=G-(P+y)+(y-L),F=q+P,y=F-q,O=q-(F-y)+(P-y),P=O-Y,y=O-P,yi[1]=O-(P+y)+(y-Y),C=F+P,y=C-F,yi[2]=F-(C-y)+(P-y),yi[3]=C;const J=g_(we,D1,4,yi,M1);q=u*p,_=ti*u,E=_-(_-u),S=u-E,_=ti*p,R=_-(_-p),I=p-R,G=S*I-(q-E*R-S*R-E*I),Y=h*f,_=ti*h,E=_-(_-h),S=h-E,_=ti*f,R=_-(_-f),I=f-R,L=S*I-(Y-E*R-S*R-E*I),P=G-L,y=G-P,yi[0]=G-(P+y)+(y-L),F=q+P,y=F-q,O=q-(F-y)+(P-y),P=O-Y,y=O-P,yi[1]=O-(P+y)+(y-Y),C=F+P,y=C-F,yi[2]=F-(C-y)+(P-y),yi[3]=C;const te=g_(J,M1,4,yi,P1);return P1[te-1]}function dW(t,e,n,i,r,o){const l=(e-o)*(n-r),u=(t-r)*(i-o),h=l-u,f=Math.abs(l+u);return Math.abs(h)>=lW*f?h:-hW(t,e,n,i,r,o,f)}function fW(t,e){var n,i,r=0,o,l,u,h,f,p,y,_=t[0],E=t[1],S=e.length;for(n=0;n<S;n++){i=0;var R=e[n],I=R.length-1;if(p=R[0],p[0]!==R[I][0]&&p[1]!==R[I][1])throw new Error("First and last coordinates in a ring must be the same");for(l=p[0]-_,u=p[1]-E,i;i<I;i++){if(y=R[i+1],h=y[0]-_,f=y[1]-E,u===0&&f===0){if(h<=0&&l>=0||l<=0&&h>=0)return 0}else if(f>=0&&u<=0||f<=0&&u>=0){if(o=dW(l,h,u,f,0,0),o===0)return 0;(o>0&&f>0&&u<=0||o<0&&f<=0&&u>0)&&r++}p=y,u=f,l=h}}return r%2!==0}function mW(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function pW(t){return t.type==="Feature"?t.geometry:t}function gW(t,e,n={}){if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");const i=mW(t),r=pW(e),o=r.type,l=e.bbox;let u=r.coordinates;if(l&&yW(i,l)===!1)return!1;o==="Polygon"&&(u=[u]);let h=!1;for(var f=0;f<u.length;++f){const p=fW(i,u[f]);if(p===0)return!n.ignoreBoundary;p&&(h=!0)}return h}function yW(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}var vW=gW;const _W=rW([[[120.8042,16.6955],[120.8042,16.6965],[120.8052,16.6965],[120.8052,16.6955],[120.8042,16.6955]]]);function bW(t){return vW(sW(t),_W)}function EW(){const[t,e]=x.useState(null),[n,i]=x.useState(!1),[r,o]=x.useState(null);return x.useEffect(()=>{if(!navigator.geolocation){o("Geolocation not supported.");return}const l=navigator.geolocation.watchPosition(u=>{const{latitude:h,longitude:f}=u.coords;e({latitude:h,longitude:f}),i(bW([f,h])),o(null)},()=>{o("Location access denied.")},{enableHighAccuracy:!0,maximumAge:1e4,timeout:5e3});return()=>navigator.geolocation.clearWatch(l)},[]),{coords:t,insideParadahan:n,error:r}}const wW=5,cO=x.createContext(void 0),TW=()=>{const t=x.useContext(cO);if(!t)throw new Error("useRide must be used within a RideProvider");return t},SW=({children:t})=>{const[e,n]=x.useState(null),[i,r]=x.useState(!1),[o,l]=x.useState(!1),[u,h]=x.useState(()=>typeof window<"u"?localStorage.getItem("hasJoinedQueue")==="true":!1),[f,p]=x.useState([]),[y,_]=x.useState(null),[E,S]=x.useState(null),[R,I]=x.useState(!1),[P,F]=x.useState(null),[O,q]=x.useState(null),[G,Y]=x.useState("--:--"),[L,C]=x.useState("Offline"),[M,k]=x.useState(null),[j,B]=x.useState(!1),[V,ve]=x.useState(null),[we,J]=x.useState(0),[te,ue]=x.useState(null),[be,ie]=x.useState(""),{coords:ye,insideParadahan:me,error:de}=EW();x.useEffect(()=>{const Ae=localStorage.getItem("driver");Ae&&n(JSON.parse(Ae))},[]),x.useEffect(()=>{localStorage.setItem("hasJoinedQueue",u?"true":"false")},[u]),x.useEffect(()=>{const Ae=localStorage.getItem("unsyncedRide");if(Ae&&me){const Ve=JSON.parse(Ae);Hm(mn(kt,"ride_logs"),Ve).then(()=>localStorage.removeItem("unsyncedRide")).catch(Re=>console.error("Sync failed:",Re))}},[me]),x.useEffect(()=>{me&&!o?r(!0):!me&&!R&&r(!1)},[me,o,R]),x.useEffect(()=>{C(i?R?"In Ride":"Waiting":"Offline")},[i,R]),x.useEffect(()=>{(async()=>{if(e&&i&&me&&!u&&!o){const Ve=$e(kt,"queues",e.id),Re=$e(kt,"drivers",e.id);try{const je=Ht.now();if(await Kt(Ve,{driverId:e.id,plateNumber:e.plate,joinedAt:je}),await Kt(Re,{status:"waiting"},{merge:!0}),S(je),h(!0),te){const Ee=Math.round((je.toMillis()-te.startedAt.getTime())/6e4),_e={...te,travelTimeMinutes:Ee};try{await Hm(mn(kt,"ride_logs"),_e),ue(null)}catch(ut){console.error("Failed to log ride:",ut),localStorage.setItem("unsyncedRide",JSON.stringify(_e)),ue(null)}}}catch(je){console.error("Failed to join queue:",je),ie(" Failed to join queue. Retrying..."),setTimeout(()=>ie(""),3e3)}}})()},[me,ye,e,u,o,i,te]),x.useEffect(()=>{(async()=>{if(e&&u&&!me&&ye){const Ve=$e(kt,"drivers",e.id);try{if(await qr($e(kt,"queues",e.id)),await Kt(Ve,{status:"in ride",leftAt:Ht.now()},{merge:!0}),h(!1),_(null),p([]),S(null),ie(" You left the paradahan. Ride starting..."),setTimeout(()=>ie(""),4e3),B(!0),q({lat:ye.latitude,lng:ye.longitude}),V){const je=Math.round((new Date().getTime()-V.getTime())/6e4);J(je>0?je:0)}}catch(Re){console.error("Failed to remove from queue:",Re),ie(" Failed to update queue on exit. Please check connection."),setTimeout(()=>ie(""),4e3)}}})()},[me,e,u,ye,V]),x.useEffect(()=>{(async()=>{if(R&&me&&ye&&P&&j){const Ve=new Date,Re={lat:ye.latitude,lng:ye.longitude},je=M?dd[M]:0,Ee=we,_e={driverId:e==null?void 0:e.id,plateNumber:e==null?void 0:e.plate,startedAt:P,endedAt:Ve,travelTimeMinutes:Math.round((Ve.getTime()-P.getTime())/6e4),pickupLocation:O,dropoffLocation:Re,dropoffName:M,waitTimeMinutes:Ee,estimatedEarnings:je,timestamp:Ht.now(),queuePosition:y??null};ue(_e),ve(Ve),I(!1),F(null),q(null),k(null),B(!1),S(null),J(0),ie(` Ride completed at ${M}  ${je}`),setTimeout(()=>ie(""),5e3)}})()},[me,ye,P,M,j,y,e,we,O]),x.useEffect(()=>{const Ae=Fr(mn(kt,"queues"),vh("joinedAt")),Ve=bh(Ae,Re=>{const je=Re.docs.map(_e=>_e.data());p(je);const Ee=je.findIndex(_e=>_e.driverId===(e==null?void 0:e.id));if(R||!u)_(null),S(null);else if(Ee>=0){_(Ee+1);const _e=je[Ee];_e.joinedAt?S(_e.joinedAt):S(null)}else _(null),S(null)});return()=>Ve()},[e,R,u]),x.useEffect(()=>{let Ae=null,Ve=y?y*wW*60:0;const Re=()=>{if(Ve>0){const je=Math.floor(Ve/60),Ee=Ve%60;Y(`${String(je).padStart(2,"0")}:${String(Ee).padStart(2,"0")}`),Ve-=1}else Y("00:00"),Ae&&clearInterval(Ae)};return y&&!R?(Re(),Ae=setInterval(Re,1e3)):Y("--:--"),()=>{Ae&&clearInterval(Ae)}},[y,R]);const Vt={driver:e,isOnline:i,manualOffline:o,hasJoined:u,queue:f,position:y,driverJoinedAt:E,rideStarted:R,rideStartTime:P,pickupLocation:O,countdown:G,rideStatus:L,selectedDestination:M,hasExitedParadahan:j,lastReturnTime:V,currentWaitTimeMinutes:we,pendingRideLog:te,coords:ye,insideParadahan:me,gpsError:de,toastMsg:be,setSelectedDestination:k,handleGoOffline:async()=>{if(!e)return;const Ae=$e(kt,"drivers",e.id);try{await qr($e(kt,"queues",e.id)),await Kt(Ae,{status:"offline"},{merge:!0}),h(!1),_(null),p([]),S(null),l(!0),r(!1),ie(" You are now offline."),setTimeout(()=>ie(""),3e3)}catch(Ve){console.error("Failed to go offline:",Ve),ie(" Failed to go offline. Please try again."),setTimeout(()=>ie(""),3e3)}},handleGoOnlineAgain:async()=>{if(!(!e||!ye))if(l(!1),r(!0),!me)ie(" To join the queue, you must be inside the paradahan."),setTimeout(()=>ie(""),4e3);else{const Ae=$e(kt,"queues",e.id);try{const Ve=Ht.now();if(await Kt(Ae,{driverId:e.id,plateNumber:e.plate,joinedAt:Ve}),S(Ve),h(!0),te){const Re=Math.round((Ve.toMillis()-te.startedAt.getTime())/6e4),je={...te,travelTimeMinutes:Re};try{await Hm(mn(kt,"ride_logs"),je),ue(null)}catch(Ee){console.error("Failed to log ride:",Ee),localStorage.setItem("unsyncedRide",JSON.stringify(je)),ue(null)}}}catch(Ve){console.error("Failed to join queue:",Ve),ie(" Failed to join queue. Please try again."),setTimeout(()=>ie(""),3e3)}}},handleStartRide:async()=>{if(!M){ie(" Please select a destination first."),setTimeout(()=>ie(""),3e3);return}if(!ye){ie(" Location not available. Please try again."),setTimeout(()=>ie(""),3e3);return}try{e&&await qr($e(kt,"queues",e.id));const Ae=new Date;if(h(!1),I(!0),F(Ae),E){const Ve=Math.round((Ae.getTime()-E.toMillis())/6e4);J(Ve>0?Ve:0)}else J(0);if(e){const Ve=$e(kt,"drivers",e.id);await Kt(Ve,{selectedDestination:M},{merge:!0})}ie(" Ride started! Please exit paradahan to begin trip."),setTimeout(()=>ie(""),3e3)}catch(Ae){console.error("Failed to start ride:",Ae),ie(" Failed to start ride. Please try again."),setTimeout(()=>ie(""),3e3)}},setToastMsg:ie};return w.jsx(cO.Provider,{value:Vt,children:t})},AW=()=>{hl();const{driver:t,isOnline:e,hasJoined:n,queue:i,position:r,rideStarted:o,countdown:l,rideStatus:u,selectedDestination:h,setSelectedDestination:f,handleGoOffline:p,handleGoOnlineAgain:y,handleStartRide:_,setToastMsg:E,coords:S,insideParadahan:R,gpsError:I,toastMsg:P}=TW();return w.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 text-gray-900",children:w.jsx("div",{className:"max-w-7xl mx-auto",children:w.jsxs("div",{className:"flex flex-col items-center justify-start min-h-screen relative",children:[w.jsxs("div",{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-lg animate-fade-in",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsxs("h2",{className:"text-xl font-bold animate-slide-down",children:["Welcome, ",(t==null?void 0:t.name)??"Driver"]}),e?w.jsx("button",{onClick:p,className:"px-4 py-2 text-sm rounded-full font-semibold bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg transition-all duration-300 transform hover:scale-105",children:"Go Offline"}):w.jsx("button",{onClick:y,className:"px-4 py-2 text-sm rounded-full font-semibold bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg transition-all duration-300 transform hover:scale-105",children:"Go Online"})]}),w.jsx("hr",{className:"border-gray-300 mb-6"}),w.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6",children:[w.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg animate-slide-up",children:[w.jsx("p",{className:"text-sm font-bold mb-2",children:" Ride Status:"}),w.jsx("p",{className:`text-lg font-semibold ${u==="In Ride"?"text-blue-600":u==="Waiting"?"text-green-600":"text-red-600"}`,children:u})]}),w.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg animate-slide-up",style:{animationDelay:"0.1s"},children:[w.jsxs("p",{className:"text-sm font-bold mb-2",children:[" ",w.jsx("span",{className:"font-semibold",children:"Location Status:"})]}),w.jsx("p",{className:`text-lg font-semibold ${R?"text-green-600":"text-red-600"}`,children:I?` ${I}`:R?"Inside Paradahan":"Outside Paradahan"})]})]}),w.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-6 animate-fade-in-left",children:[w.jsx("p",{className:"text-lg font-semibold mb-3",children:"Vehicle Information"}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("p",{className:"flex justify-between",children:[w.jsx("span",{className:"font-medium",children:"Plate Number:"}),w.jsx("span",{className:"text-gray-700",children:t==null?void 0:t.plate})]}),w.jsxs("p",{className:"flex justify-between",children:[w.jsx("span",{className:"font-medium",children:"Vehicle:"}),w.jsx("span",{className:"text-gray-700",children:t==null?void 0:t.vehicle})]})]})]}),w.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-6 animate-fade-in-right",children:[w.jsx("p",{className:"text-lg font-semibold mb-3",children:" Destination:"}),w.jsxs("select",{className:"w-full p-3 rounded-lg bg-gray-50 text-gray-900 border border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 transition-all",value:h||"",onChange:F=>f(F.target.value),children:[w.jsx("option",{value:"",children:"Select Destination"}),Object.keys(dd).map(F=>w.jsx("option",{value:F,children:F},F))]})]}),n&&!o&&w.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-6 animate-fade-in-up",children:[w.jsx("p",{className:"text-lg font-semibold mb-4",children:" Queue Status"}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("p",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"font-medium",children:"Your position:"}),w.jsx("span",{className:"text-xl font-bold text-yellow-600",children:r??"N/A"})]}),w.jsxs("p",{className:"flex justify-between items-center",children:[w.jsx("span",{className:"font-medium",children:" Estimated Wait:"}),w.jsx("span",{className:"text-xl font-bold text-blue-600",children:l})]}),r===1&&w.jsx("div",{className:"text-green-600 font-bold text-center p-3 bg-green-50 rounded-lg animate-pulse",children:" Its your turn! Get ready for a ride."}),w.jsxs("div",{className:"mt-4",children:[w.jsx("p",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Current Queue:"}),w.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:w.jsx(f0,{children:i.map((F,O)=>w.jsxs($o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`text-sm px-3 py-2 rounded-lg shadow-sm ${F.driverId===(t==null?void 0:t.id)?"bg-yellow-100 text-gray-900 border border-yellow-300":"bg-gray-100 text-gray-900"}`,children:[O+1,". ",F.plateNumber]},F.driverId))})})]})]})]}),r===1&&!o&&w.jsx("button",{onClick:_,disabled:!h,className:"w-full py-3 px-6 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl font-semibold shadow-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:"Start Ride"})]}),P&&w.jsxs("div",{className:"absolute top-4 right-4 bg-blue-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-2 animate-fade-in text-sm z-50",children:[P,w.jsx("button",{onClick:()=>E(""),className:"hover:bg-blue-700 rounded-full p-1 transition-colors",children:w.jsx(x8,{size:16})})]})]})})})};let xW={data:""},RW=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||xW,CW=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,IW=/\/\*[^]*?\*\/|  +/g,O1=/\n+/g,Ba=(t,e)=>{let n="",i="",r="";for(let o in t){let l=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+l+";":i+=o[1]=="f"?Ba(l,o):o+"{"+Ba(l,o[1]=="k"?"":e)+"}":typeof l=="object"?i+=Ba(l,e?e.replace(/([^,])+/g,u=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Ba.p?Ba.p(o,l):o+":"+l+";")}return n+(e&&r?e+"{"+r+"}":r)+i},jr={},uO=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+uO(t[n]);return e}return t},NW=(t,e,n,i,r)=>{let o=uO(t),l=jr[o]||(jr[o]=(h=>{let f=0,p=11;for(;f<h.length;)p=101*p+h.charCodeAt(f++)>>>0;return"go"+p})(o));if(!jr[l]){let h=o!==t?t:(f=>{let p,y,_=[{}];for(;p=CW.exec(f.replace(IW,""));)p[4]?_.shift():p[3]?(y=p[3].replace(O1," ").trim(),_.unshift(_[0][y]=_[0][y]||{})):_[0][p[1]]=p[2].replace(O1," ").trim();return _[0]})(t);jr[l]=Ba(r?{["@keyframes "+l]:h}:h,n?"":"."+l)}let u=n&&jr.g?jr.g:null;return n&&(jr.g=jr[l]),((h,f,p,y)=>{y?f.data=f.data.replace(y,h):f.data.indexOf(h)===-1&&(f.data=p?h+f.data:f.data+h)})(jr[l],e,i,u),l},DW=(t,e,n)=>t.reduce((i,r,o)=>{let l=e[o];if(l&&l.call){let u=l(n),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;l=h?"."+h:u&&typeof u=="object"?u.props?"":Ba(u,""):u===!1?"":u}return i+r+(l??"")},"");function Ng(t){let e=this||{},n=t.call?t(e.p):t;return NW(n.unshift?n.raw?DW(n,[].slice.call(arguments,1),e.p):n.reduce((i,r)=>Object.assign(i,r&&r.call?r(e.p):r),{}):n,RW(e.target),e.g,e.o,e.k)}let hO,M0,P0;Ng.bind({g:1});let sa=Ng.bind({k:1});function MW(t,e,n,i){Ba.p=e,hO=t,M0=n,P0=i}function fo(t,e){let n=this||{};return function(){let i=arguments;function r(o,l){let u=Object.assign({},o),h=u.className||r.className;n.p=Object.assign({theme:M0&&M0()},u),n.o=/ *go\d+/.test(h),u.className=Ng.apply(n,i)+(h?" "+h:"");let f=t;return t[0]&&(f=u.as||t,delete u.as),P0&&f[0]&&P0(u),hO(f,u)}return r}}var PW=t=>typeof t=="function",Fp=(t,e)=>PW(t)?t(e):t,OW=(()=>{let t=0;return()=>(++t).toString()})(),dO=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),kW=20,fO=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,kW)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:n}=e;return fO(t,{type:t.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let r=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+r}))}}},Ym=[],Jo={toasts:[],pausedAt:void 0},vl=t=>{Jo=fO(Jo,t),Ym.forEach(e=>{e(Jo)})},LW={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},VW=(t={})=>{let[e,n]=x.useState(Jo),i=x.useRef(Jo);x.useEffect(()=>(i.current!==Jo&&n(Jo),Ym.push(n),()=>{let o=Ym.indexOf(n);o>-1&&Ym.splice(o,1)}),[]);let r=e.toasts.map(o=>{var l,u,h;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((l=t[o.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((u=t[o.type])==null?void 0:u.duration)||(t==null?void 0:t.duration)||LW[o.type],style:{...t.style,...(h=t[o.type])==null?void 0:h.style,...o.style}}});return{...e,toasts:r}},jW=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||OW()}),qd=t=>(e,n)=>{let i=jW(e,t,n);return vl({type:2,toast:i}),i.id},Fn=(t,e)=>qd("blank")(t,e);Fn.error=qd("error");Fn.success=qd("success");Fn.loading=qd("loading");Fn.custom=qd("custom");Fn.dismiss=t=>{vl({type:3,toastId:t})};Fn.remove=t=>vl({type:4,toastId:t});Fn.promise=(t,e,n)=>{let i=Fn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(r=>{let o=e.success?Fp(e.success,r):void 0;return o?Fn.success(o,{id:i,...n,...n==null?void 0:n.success}):Fn.dismiss(i),r}).catch(r=>{let o=e.error?Fp(e.error,r):void 0;o?Fn.error(o,{id:i,...n,...n==null?void 0:n.error}):Fn.dismiss(i)}),t};var UW=(t,e)=>{vl({type:1,toast:{id:t,height:e}})},FW=()=>{vl({type:5,time:Date.now()})},Vh=new Map,BW=1e3,zW=(t,e=BW)=>{if(Vh.has(t))return;let n=setTimeout(()=>{Vh.delete(t),vl({type:4,toastId:t})},e);Vh.set(t,n)},qW=t=>{let{toasts:e,pausedAt:n}=VW(t);x.useEffect(()=>{if(n)return;let o=Date.now(),l=e.map(u=>{if(u.duration===1/0)return;let h=(u.duration||0)+u.pauseDuration-(o-u.createdAt);if(h<0){u.visible&&Fn.dismiss(u.id);return}return setTimeout(()=>Fn.dismiss(u.id),h)});return()=>{l.forEach(u=>u&&clearTimeout(u))}},[e,n]);let i=x.useCallback(()=>{n&&vl({type:6,time:Date.now()})},[n]),r=x.useCallback((o,l)=>{let{reverseOrder:u=!1,gutter:h=8,defaultPosition:f}=l||{},p=e.filter(E=>(E.position||f)===(o.position||f)&&E.height),y=p.findIndex(E=>E.id===o.id),_=p.filter((E,S)=>S<y&&E.visible).length;return p.filter(E=>E.visible).slice(...u?[_+1]:[0,_]).reduce((E,S)=>E+(S.height||0)+h,0)},[e]);return x.useEffect(()=>{e.forEach(o=>{if(o.dismissed)zW(o.id,o.removeDelay);else{let l=Vh.get(o.id);l&&(clearTimeout(l),Vh.delete(o.id))}})},[e]),{toasts:e,handlers:{updateHeight:UW,startPause:FW,endPause:i,calculateOffset:r}}},HW=sa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,GW=sa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$W=sa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,KW=fo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${HW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${GW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${$W} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,WW=sa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,YW=fo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${WW} 1s linear infinite;
`,QW=sa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,XW=sa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ZW=fo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${QW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${XW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,JW=fo("div")`
  position: absolute;
`,eY=fo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,tY=sa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nY=fo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${tY} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,iY=({toast:t})=>{let{icon:e,type:n,iconTheme:i}=t;return e!==void 0?typeof e=="string"?x.createElement(nY,null,e):e:n==="blank"?null:x.createElement(eY,null,x.createElement(YW,{...i}),n!=="loading"&&x.createElement(JW,null,n==="error"?x.createElement(KW,{...i}):x.createElement(ZW,{...i})))},sY=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,rY=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,aY="0%{opacity:0;} 100%{opacity:1;}",oY="0%{opacity:1;} 100%{opacity:0;}",lY=fo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,cY=fo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,uY=(t,e)=>{let n=t.includes("top")?1:-1,[i,r]=dO()?[aY,oY]:[sY(n),rY(n)];return{animation:e?`${sa(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sa(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},hY=x.memo(({toast:t,position:e,style:n,children:i})=>{let r=t.height?uY(t.position||e||"top-center",t.visible):{opacity:0},o=x.createElement(iY,{toast:t}),l=x.createElement(cY,{...t.ariaProps},Fp(t.message,t));return x.createElement(lY,{className:t.className,style:{...r,...n,...t.style}},typeof i=="function"?i({icon:o,message:l}):x.createElement(x.Fragment,null,o,l))});MW(x.createElement);var dY=({id:t,className:e,style:n,onHeightUpdate:i,children:r})=>{let o=x.useCallback(l=>{if(l){let u=()=>{let h=l.getBoundingClientRect().height;i(t,h)};u(),new MutationObserver(u).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,i]);return x.createElement("div",{ref:o,className:e,style:n},r)},fY=(t,e)=>{let n=t.includes("top"),i=n?{top:0}:{bottom:0},r=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:dO()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...i,...r}},mY=Ng`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Cm=16,aw=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:i,children:r,containerStyle:o,containerClassName:l})=>{let{toasts:u,handlers:h}=qW(n);return x.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Cm,left:Cm,right:Cm,bottom:Cm,pointerEvents:"none",...o},className:l,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(f=>{let p=f.position||e,y=h.calculateOffset(f,{reverseOrder:t,gutter:i,defaultPosition:e}),_=fY(p,y);return x.createElement(dY,{id:f.id,key:f.id,onHeightUpdate:h.updateHeight,className:f.visible?mY:"",style:_},f.type==="custom"?Fp(f.message,f):r?r(f):x.createElement(hY,{toast:f,position:p}))}))},Be=Fn;const k1=["agduwaadmin@gmail.com"],pY=()=>{const[t,e]=x.useState(""),[n,i]=x.useState(""),[r,o]=x.useState(""),[l,u]=x.useState(""),[h,f]=x.useState(""),[p,y]=x.useState(""),[_,E]=x.useState(""),[S,R]=x.useState(""),[I,P]=x.useState(!1),[F,O]=x.useState(!1),[q,G]=x.useState(!1),Y=hl(),L=k=>k.length<6?(o("Password must contain at least 6 characters"),!1):(o(""),!0),C=k=>/^\d{11}$/.test(k)?(R(""),!0):(R("Phone number must contain 11 digits"),!1),M=async()=>{if(!t||!n||I&&(!l||!h||!p||!_)){Be.error("Please fill all fields.");return}if(L(n)&&!(I&&!C(_))){O(!0);try{let k;if(I){k=await sN(Gi,t,n);const j=k.user.uid,B=k1.some(ve=>ve.toLowerCase()===t.toLowerCase()),V={id:j,name:l,plate:h,vehicle:p,email:t,phone:_,status:"offline",age:"",contact:_,image:null,paymentMethod:"GCash",paymentNumber:"",createdAt:Hi(),verified:B};await Kt($e(kt,"drivers",j),V),console.log(" Driver document created:",{uid:j,name:l,email:t,verified:V.verified,createdAt:V.createdAt}),B?(localStorage.setItem("driver",JSON.stringify(V)),Be.success("Registered successfully as Admin!"),setTimeout(()=>Y("/admin"),1e3)):(Be.success("Your account has been created! Please wait for admin approval."),Be.success("You can only log in when the admin approves your account."),e(""),i(""),u(""),f(""),y(""),E(""),P(!1))}else{k=await rN(Gi,t,n);const j=k.user.uid;if(k1.some(te=>te.toLowerCase()===t.toLowerCase())){const te={id:j,name:"Admin",plate:"",vehicle:"",email:t,phone:"",status:"offline",age:"",contact:_||"",image:null,paymentMethod:"GCash",paymentNumber:"",createdAt:Hi(),verified:!0};localStorage.setItem("driver",JSON.stringify(te)),Be.success("Welcome, Admin!"),setTimeout(()=>Y("/admin"),1e3),O(!1);return}const V=$e(kt,"drivers",j),ve=await Nd(V);if(!ve.exists()){Be.error("No profile found for this account."),await op(Gi),O(!1);return}const J={...ve.data(),id:j};if(!J.verified){Be.error("Your account is not verified by admin yet. Please wait for approval."),await op(Gi),O(!1);return}localStorage.setItem("driver",JSON.stringify(J)),Be.success("Welcome back!"),setTimeout(()=>Y("/home"),1e3)}}catch(k){switch(console.error(k.code),k.code){case"auth/user-not-found":Be.error("Account not found.");break;case"auth/wrong-password":Be.error("Incorrect password.");break;case"auth/email-already-in-use":Be.error("Email already in use.");break;case"auth/invalid-email":Be.error("Invalid email.");break;default:Be.error("Authentication failed.")}}finally{O(!1)}}};return w.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-gray-900 p-4",children:[w.jsx(aw,{position:"top-center"}),w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md border border-gray-200",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2 text-center text-gray-900",children:I?"Sign Up":"Login"}),w.jsx("input",{type:"email",placeholder:"Email",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:t,onChange:k=>e(k.target.value),autoComplete:"email"}),w.jsxs("div",{className:"relative mb-3",children:[w.jsx("input",{type:q?"text":"password",placeholder:"Password",className:"w-full p-2 bg-gray-200 rounded border border-gray-300 pr-10 text-gray-900",value:n,onChange:k=>{i(k.target.value),L(k.target.value)},autoComplete:I?"new-password":"current-password"}),w.jsx("button",{onClick:()=>G(!q),className:"absolute right-2 top-2 text-sm text-gray-600 hover:text-gray-900",type:"button","aria-label":q?"Hide password":"Show password",children:q?"Hide":"Show"})]}),r&&w.jsx("p",{className:"text-red-500 text-sm mb-3",children:r}),I&&w.jsxs(w.Fragment,{children:[w.jsx("input",{type:"text",placeholder:"Full Name",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:l,onChange:k=>u(k.target.value),autoComplete:"name"}),w.jsx("input",{type:"text",placeholder:"Plate Number",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:h,onChange:k=>f(k.target.value)}),w.jsx("input",{type:"text",placeholder:"Vehicle",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:p,onChange:k=>y(k.target.value)}),w.jsxs("div",{className:"mb-3",children:[w.jsx("input",{type:"text",placeholder:"Phone Number (e.g., 09123456789)",className:"flex-1 p-2 bg-gray-200 rounded border border-gray-300 text-gray-900",value:_,onChange:k=>{E(k.target.value),C(k.target.value)},autoComplete:"tel"}),S&&w.jsx("p",{className:"text-red-500 text-sm mt-1",children:S})]})]}),w.jsx("button",{onClick:M,disabled:F,className:`w-full py-2 px-4 mt-2 rounded font-semibold ${F?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} text-white`,type:"button",children:F?"Processing...":I?"Create Account":"Login"}),w.jsxs("p",{className:"text-sm text-center text-gray-600 mt-4",children:[I?"Already have an account?":"Don't have an account?"," ",w.jsx("button",{onClick:()=>P(!I),className:"text-blue-600 hover:underline",type:"button",children:I?"Login here":"Register"})]})]})]})},gY=({log:t})=>w.jsxs("div",{className:"bg-white p-4 rounded-lg mb-4 shadow-md",children:[w.jsx("p",{className:"text-lg font-semibold mb-1",children:t.dropoffName}),w.jsxs("p",{className:"text-gray-400 text-sm mb-2",children:["Ended at: ",t.endedAt.toLocaleString()]}),w.jsxs("p",{className:"mb-1",children:["Distance: ",t.travelTimeMinutes>0?(t.travelTimeMinutes*(25/60)).toFixed(2):0," km  Duration: ",t.travelTimeMinutes," mins"]}),w.jsxs("p",{className:"font-semibold mt-2",children:["Earnings: ",t.estimatedEarnings]})]}),yY=({isOpen:t,onClose:e,onApply:n,onClear:i,startDate:r,setStartDate:o,endDate:l,setEndDate:u,dropoffLocation:h,setDropoffLocation:f,minFare:p,setMinFare:y})=>t?w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:w.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-xl w-full max-w-md shadow-lg border border-gray-300",children:[w.jsx("h2",{className:"text-xl font-bold mb-4",children:"Filter Rides"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[w.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{const _=new Date,E=new Date(_.getFullYear(),_.getMonth(),_.getDate());o(E),u(_)},children:"Today"}),w.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{const _=new Date,E=new Date(_);E.setDate(_.getDate()-7),o(E),u(_)},children:"Last 7 Days"}),w.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{const _=new Date,E=new Date(_.getFullYear(),_.getMonth(),1);o(E),u(_)},children:"This Month"}),w.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{o(null),u(null)},children:"All Time"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Start Date"}),w.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:r?r.toISOString().split("T")[0]:"",onChange:_=>o(_.target.value?new Date(_.target.value):null)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"End Date"}),w.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:l?l.toISOString().split("T")[0]:"",onChange:_=>u(_.target.value?new Date(_.target.value):null)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Dropoff Location"}),w.jsx("input",{type:"text",placeholder:"e.g., La Trinidad",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:h,onChange:_=>f(_.target.value)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Minimum Fare ()"}),w.jsx("input",{type:"number",placeholder:"e.g., 50",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:p??"",onChange:_=>y(_.target.value?parseFloat(_.target.value):null)})]})]}),w.jsxs("div",{className:"flex justify-between mt-6",children:[w.jsx("button",{onClick:i,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Clear"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Cancel"}),w.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Apply"})]})]})]})}):null;function vY({children:t,className:e,...n}){return w.jsx("button",{className:`bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition ${e}`,...n,children:t})}const mO=x.createContext(null),_Y=({children:t})=>{const[e,n]=x.useState(null),[i,r]=x.useState(!0);x.useEffect(()=>{const h=hb(Gi,f=>{n(f),r(!1)});return()=>h()},[]);const o=async(h,f)=>{await rN(Gi,h,f)},l=async(h,f,p)=>{const _=(await sN(Gi,h,f)).user.uid,E=["agduwaadmin@gmail.com"].some(R=>R.toLowerCase()===h.toLowerCase()),S=$e(kt,"drivers",_);await Kt(S,{id:_,name:(p==null?void 0:p.name)||h.split("@")[0]||"New Driver",plate:(p==null?void 0:p.plate)||"",vehicle:(p==null?void 0:p.vehicle)||"",email:h,phone:(p==null?void 0:p.phone)||"",status:"offline",age:"",contact:(p==null?void 0:p.phone)||"",image:null,paymentMethod:"GCash",paymentNumber:"",createdAt:Hi(),verified:E})},u=async()=>{const h=Gi.currentUser;if(h){const f=$e(kt,"queues",h.uid);try{await qr(f)}catch{}const p=$e(kt,"drivers",h.uid);await Kt(p,{status:"offline"},{merge:!0})}await op(Gi),n(null)};return w.jsx(mO.Provider,{value:{user:e,loading:i,login:o,signUp:l,logout:u},children:t})},Hd=()=>{const t=x.useContext(mO);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};function bY(){const[t,e]=x.useState([]),[n,i]=x.useState([]),[r,o]=x.useState(!1),[l,u]=x.useState(null),[h,f]=x.useState(null),[p,y]=x.useState(""),[_,E]=x.useState(""),[S,R]=x.useState(null),{user:I}=Hd(),P=async()=>{try{if(!I)return;const q=mn(kt,"ride_logs"),G=Fr(q,Ko("driverId","==",I.uid)),Y=await ed(G);console.log("Fetched snapshot:",Y);const L=Y.docs.map(C=>{const M=C.data();return{id:C.id,driverId:M.driverId,dropoffLocation:M.dropoffLocation,dropoffName:M.dropoffName,endedAt:M.endedAt.toDate(),estimatedEarnings:M.estimatedEarnings,pickupLocation:M.pickupLocation,plateNumber:M.plateNumber,startedAt:M.startedAt.toDate(),travelTimeMinutes:M.travelTimeMinutes,waitTimeMinutes:M.waitTimeMinutes}});console.log("Parsed ride logs:",L),L.sort((C,M)=>M.endedAt.getTime()-C.endedAt.getTime()),e(L),i(L)}catch(q){console.error("Failed to fetch ride logs:",q)}};x.useEffect(()=>{P()},[I]);const F=async()=>{let q=[...t];if(l&&(q=q.filter(G=>G.endedAt>=l)),h&&(q=q.filter(G=>G.endedAt<=h)),p){const G=p.toLowerCase();q=q.filter(Y=>`${Y.pickupLocation.lat}, ${Y.pickupLocation.lng}`.toLowerCase().includes(G))}if(_){const G=_.toLowerCase();q=q.filter(Y=>Y.dropoffName.toLowerCase().includes(G))}S!==null?(q=q.filter(G=>G.estimatedEarnings>=S),q.sort((G,Y)=>Math.abs(G.estimatedEarnings-S)-Math.abs(Y.estimatedEarnings-S))):q.sort((G,Y)=>Y.endedAt.getTime()-G.endedAt.getTime()),i(q),o(!1)},O=()=>{u(null),f(null),y(""),E(""),R(null);const q=[...t].sort((G,Y)=>Y.endedAt.getTime()-G.endedAt.getTime());i(q),o(!1)};return w.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 text-gray-900",children:w.jsx("div",{className:"max-w-7xl mx-auto",children:w.jsxs("div",{className:"max-w-2xl mx-auto min-h-screen",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-2xl font-bold animate-fade-in",children:"Ride History"}),w.jsxs(vY,{onClick:()=>o(!0),className:"gap-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg transition-all duration-300 transform hover:scale-105",children:[w.jsx(u8,{className:"w-4 h-4"})," Filter"]})]}),n.length===0?w.jsx("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center animate-fade-in-up",children:w.jsx("p",{className:"text-gray-500 text-lg",children:"No rides found."})}):w.jsx("div",{className:"space-y-4 animate-fade-in-up",style:{animationDelay:"0.2s"},children:n.map((q,G)=>w.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${G*.1}s`},children:w.jsx(gY,{log:q})},q.id))}),w.jsx(yY,{isOpen:r,onClose:()=>o(!1),onApply:F,onClear:O,startDate:l,setStartDate:u,endDate:h,setEndDate:f,dropoffLocation:_,setDropoffLocation:E,minFare:S,setMinFare:R})]})})})}var EY=Object.defineProperty,Bp=Object.getOwnPropertySymbols,pO=Object.prototype.hasOwnProperty,gO=Object.prototype.propertyIsEnumerable,L1=(t,e,n)=>e in t?EY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O0=(t,e)=>{for(var n in e||(e={}))pO.call(e,n)&&L1(t,n,e[n]);if(Bp)for(var n of Bp(e))gO.call(e,n)&&L1(t,n,e[n]);return t},k0=(t,e)=>{var n={};for(var i in t)pO.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&Bp)for(var i of Bp(t))e.indexOf(i)<0&&gO.call(t,i)&&(n[i]=t[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ul;(t=>{const e=class it{constructor(h,f,p,y){if(this.version=h,this.errorCorrectionLevel=f,this.modules=[],this.isFunction=[],h<it.MIN_VERSION||h>it.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=h*4+17;let _=[];for(let S=0;S<this.size;S++)_.push(!1);for(let S=0;S<this.size;S++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const E=this.addEccAndInterleave(p);if(this.drawCodewords(E),y==-1){let S=1e9;for(let R=0;R<8;R++){this.applyMask(R),this.drawFormatBits(R);const I=this.getPenaltyScore();I<S&&(y=R,S=I),this.applyMask(R)}}r(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(h,f){const p=t.QrSegment.makeSegments(h);return it.encodeSegments(p,f)}static encodeBinary(h,f){const p=t.QrSegment.makeBytes(h);return it.encodeSegments([p],f)}static encodeSegments(h,f,p=1,y=40,_=-1,E=!0){if(!(it.MIN_VERSION<=p&&p<=y&&y<=it.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let S,R;for(S=p;;S++){const O=it.getNumDataCodewords(S,f)*8,q=l.getTotalBits(h,S);if(q<=O){R=q;break}if(S>=y)throw new RangeError("Data too long")}for(const O of[it.Ecc.MEDIUM,it.Ecc.QUARTILE,it.Ecc.HIGH])E&&R<=it.getNumDataCodewords(S,O)*8&&(f=O);let I=[];for(const O of h){n(O.mode.modeBits,4,I),n(O.numChars,O.mode.numCharCountBits(S),I);for(const q of O.getData())I.push(q)}r(I.length==R);const P=it.getNumDataCodewords(S,f)*8;r(I.length<=P),n(0,Math.min(4,P-I.length),I),n(0,(8-I.length%8)%8,I),r(I.length%8==0);for(let O=236;I.length<P;O^=253)n(O,8,I);let F=[];for(;F.length*8<I.length;)F.push(0);return I.forEach((O,q)=>F[q>>>3]|=O<<7-(q&7)),new it(S,f,F,_)}getModule(h,f){return 0<=h&&h<this.size&&0<=f&&f<this.size&&this.modules[f][h]}getModules(){return this.modules}drawFunctionPatterns(){for(let p=0;p<this.size;p++)this.setFunctionModule(6,p,p%2==0),this.setFunctionModule(p,6,p%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const h=this.getAlignmentPatternPositions(),f=h.length;for(let p=0;p<f;p++)for(let y=0;y<f;y++)p==0&&y==0||p==0&&y==f-1||p==f-1&&y==0||this.drawAlignmentPattern(h[p],h[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(h){const f=this.errorCorrectionLevel.formatBits<<3|h;let p=f;for(let _=0;_<10;_++)p=p<<1^(p>>>9)*1335;const y=(f<<10|p)^21522;r(y>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,i(y,_));this.setFunctionModule(8,7,i(y,6)),this.setFunctionModule(8,8,i(y,7)),this.setFunctionModule(7,8,i(y,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,i(y,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,i(y,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,i(y,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let h=this.version;for(let p=0;p<12;p++)h=h<<1^(h>>>11)*7973;const f=this.version<<12|h;r(f>>>18==0);for(let p=0;p<18;p++){const y=i(f,p),_=this.size-11+p%3,E=Math.floor(p/3);this.setFunctionModule(_,E,y),this.setFunctionModule(E,_,y)}}drawFinderPattern(h,f){for(let p=-4;p<=4;p++)for(let y=-4;y<=4;y++){const _=Math.max(Math.abs(y),Math.abs(p)),E=h+y,S=f+p;0<=E&&E<this.size&&0<=S&&S<this.size&&this.setFunctionModule(E,S,_!=2&&_!=4)}}drawAlignmentPattern(h,f){for(let p=-2;p<=2;p++)for(let y=-2;y<=2;y++)this.setFunctionModule(h+y,f+p,Math.max(Math.abs(y),Math.abs(p))!=1)}setFunctionModule(h,f,p){this.modules[f][h]=p,this.isFunction[f][h]=!0}addEccAndInterleave(h){const f=this.version,p=this.errorCorrectionLevel;if(h.length!=it.getNumDataCodewords(f,p))throw new RangeError("Invalid argument");const y=it.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][f],_=it.ECC_CODEWORDS_PER_BLOCK[p.ordinal][f],E=Math.floor(it.getNumRawDataModules(f)/8),S=y-E%y,R=Math.floor(E/y);let I=[];const P=it.reedSolomonComputeDivisor(_);for(let O=0,q=0;O<y;O++){let G=h.slice(q,q+R-_+(O<S?0:1));q+=G.length;const Y=it.reedSolomonComputeRemainder(G,P);O<S&&G.push(0),I.push(G.concat(Y))}let F=[];for(let O=0;O<I[0].length;O++)I.forEach((q,G)=>{(O!=R-_||G>=S)&&F.push(q[O])});return r(F.length==E),F}drawCodewords(h){if(h.length!=Math.floor(it.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let f=0;for(let p=this.size-1;p>=1;p-=2){p==6&&(p=5);for(let y=0;y<this.size;y++)for(let _=0;_<2;_++){const E=p-_,R=(p+1&2)==0?this.size-1-y:y;!this.isFunction[R][E]&&f<h.length*8&&(this.modules[R][E]=i(h[f>>>3],7-(f&7)),f++)}}r(f==h.length*8)}applyMask(h){if(h<0||h>7)throw new RangeError("Mask value out of range");for(let f=0;f<this.size;f++)for(let p=0;p<this.size;p++){let y;switch(h){case 0:y=(p+f)%2==0;break;case 1:y=f%2==0;break;case 2:y=p%3==0;break;case 3:y=(p+f)%3==0;break;case 4:y=(Math.floor(p/3)+Math.floor(f/2))%2==0;break;case 5:y=p*f%2+p*f%3==0;break;case 6:y=(p*f%2+p*f%3)%2==0;break;case 7:y=((p+f)%2+p*f%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[f][p]&&y&&(this.modules[f][p]=!this.modules[f][p])}}getPenaltyScore(){let h=0;for(let _=0;_<this.size;_++){let E=!1,S=0,R=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[_][I]==E?(S++,S==5?h+=it.PENALTY_N1:S>5&&h++):(this.finderPenaltyAddHistory(S,R),E||(h+=this.finderPenaltyCountPatterns(R)*it.PENALTY_N3),E=this.modules[_][I],S=1);h+=this.finderPenaltyTerminateAndCount(E,S,R)*it.PENALTY_N3}for(let _=0;_<this.size;_++){let E=!1,S=0,R=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][_]==E?(S++,S==5?h+=it.PENALTY_N1:S>5&&h++):(this.finderPenaltyAddHistory(S,R),E||(h+=this.finderPenaltyCountPatterns(R)*it.PENALTY_N3),E=this.modules[I][_],S=1);h+=this.finderPenaltyTerminateAndCount(E,S,R)*it.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let E=0;E<this.size-1;E++){const S=this.modules[_][E];S==this.modules[_][E+1]&&S==this.modules[_+1][E]&&S==this.modules[_+1][E+1]&&(h+=it.PENALTY_N2)}let f=0;for(const _ of this.modules)f=_.reduce((E,S)=>E+(S?1:0),f);const p=this.size*this.size,y=Math.ceil(Math.abs(f*20-p*10)/p)-1;return r(0<=y&&y<=9),h+=y*it.PENALTY_N4,r(0<=h&&h<=2568888),h}getAlignmentPatternPositions(){if(this.version==1)return[];{const h=Math.floor(this.version/7)+2,f=this.version==32?26:Math.ceil((this.version*4+4)/(h*2-2))*2;let p=[6];for(let y=this.size-7;p.length<h;y-=f)p.splice(1,0,y);return p}}static getNumRawDataModules(h){if(h<it.MIN_VERSION||h>it.MAX_VERSION)throw new RangeError("Version number out of range");let f=(16*h+128)*h+64;if(h>=2){const p=Math.floor(h/7)+2;f-=(25*p-10)*p-55,h>=7&&(f-=36)}return r(208<=f&&f<=29648),f}static getNumDataCodewords(h,f){return Math.floor(it.getNumRawDataModules(h)/8)-it.ECC_CODEWORDS_PER_BLOCK[f.ordinal][h]*it.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][h]}static reedSolomonComputeDivisor(h){if(h<1||h>255)throw new RangeError("Degree out of range");let f=[];for(let y=0;y<h-1;y++)f.push(0);f.push(1);let p=1;for(let y=0;y<h;y++){for(let _=0;_<f.length;_++)f[_]=it.reedSolomonMultiply(f[_],p),_+1<f.length&&(f[_]^=f[_+1]);p=it.reedSolomonMultiply(p,2)}return f}static reedSolomonComputeRemainder(h,f){let p=f.map(y=>0);for(const y of h){const _=y^p.shift();p.push(0),f.forEach((E,S)=>p[S]^=it.reedSolomonMultiply(E,_))}return p}static reedSolomonMultiply(h,f){if(h>>>8||f>>>8)throw new RangeError("Byte out of range");let p=0;for(let y=7;y>=0;y--)p=p<<1^(p>>>7)*285,p^=(f>>>y&1)*h;return r(p>>>8==0),p}finderPenaltyCountPatterns(h){const f=h[1];r(f<=this.size*3);const p=f>0&&h[2]==f&&h[3]==f*3&&h[4]==f&&h[5]==f;return(p&&h[0]>=f*4&&h[6]>=f?1:0)+(p&&h[6]>=f*4&&h[0]>=f?1:0)}finderPenaltyTerminateAndCount(h,f,p){return h&&(this.finderPenaltyAddHistory(f,p),f=0),f+=this.size,this.finderPenaltyAddHistory(f,p),this.finderPenaltyCountPatterns(p)}finderPenaltyAddHistory(h,f){f[0]==0&&(h+=this.size),f.pop(),f.unshift(h)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(u,h,f){if(h<0||h>31||u>>>h)throw new RangeError("Value out of range");for(let p=h-1;p>=0;p--)f.push(u>>>p&1)}function i(u,h){return(u>>>h&1)!=0}function r(u){if(!u)throw new Error("Assertion error")}const o=class on{constructor(h,f,p){if(this.mode=h,this.numChars=f,this.bitData=p,f<0)throw new RangeError("Invalid argument");this.bitData=p.slice()}static makeBytes(h){let f=[];for(const p of h)n(p,8,f);return new on(on.Mode.BYTE,h.length,f)}static makeNumeric(h){if(!on.isNumeric(h))throw new RangeError("String contains non-numeric characters");let f=[];for(let p=0;p<h.length;){const y=Math.min(h.length-p,3);n(parseInt(h.substring(p,p+y),10),y*3+1,f),p+=y}return new on(on.Mode.NUMERIC,h.length,f)}static makeAlphanumeric(h){if(!on.isAlphanumeric(h))throw new RangeError("String contains unencodable characters in alphanumeric mode");let f=[],p;for(p=0;p+2<=h.length;p+=2){let y=on.ALPHANUMERIC_CHARSET.indexOf(h.charAt(p))*45;y+=on.ALPHANUMERIC_CHARSET.indexOf(h.charAt(p+1)),n(y,11,f)}return p<h.length&&n(on.ALPHANUMERIC_CHARSET.indexOf(h.charAt(p)),6,f),new on(on.Mode.ALPHANUMERIC,h.length,f)}static makeSegments(h){return h==""?[]:on.isNumeric(h)?[on.makeNumeric(h)]:on.isAlphanumeric(h)?[on.makeAlphanumeric(h)]:[on.makeBytes(on.toUtf8ByteArray(h))]}static makeEci(h){let f=[];if(h<0)throw new RangeError("ECI assignment value out of range");if(h<128)n(h,8,f);else if(h<16384)n(2,2,f),n(h,14,f);else if(h<1e6)n(6,3,f),n(h,21,f);else throw new RangeError("ECI assignment value out of range");return new on(on.Mode.ECI,0,f)}static isNumeric(h){return on.NUMERIC_REGEX.test(h)}static isAlphanumeric(h){return on.ALPHANUMERIC_REGEX.test(h)}getData(){return this.bitData.slice()}static getTotalBits(h,f){let p=0;for(const y of h){const _=y.mode.numCharCountBits(f);if(y.numChars>=1<<_)return 1/0;p+=4+_+y.bitData.length}return p}static toUtf8ByteArray(h){h=encodeURI(h);let f=[];for(let p=0;p<h.length;p++)h.charAt(p)!="%"?f.push(h.charCodeAt(p)):(f.push(parseInt(h.substring(p+1,p+3),16)),p+=2);return f}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=o;t.QrSegment=o})(ul||(ul={}));(t=>{(e=>{const n=class{constructor(r,o){this.ordinal=r,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(ul||(ul={}));(t=>{(e=>{const n=class{constructor(r,o){this.modeBits=r,this.numBitsCharCount=o}numCharCountBits(r){return this.numBitsCharCount[Math.floor((r+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(ul||(ul={}));var Ec=ul;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var wY={L:Ec.QrCode.Ecc.LOW,M:Ec.QrCode.Ecc.MEDIUM,Q:Ec.QrCode.Ecc.QUARTILE,H:Ec.QrCode.Ecc.HIGH},yO=128,vO="L",_O="#FFFFFF",bO="#000000",EO=!1,wO=1,TY=4,SY=0,AY=.1;function TO(t,e=0){const n=[];return t.forEach(function(i,r){let o=null;i.forEach(function(l,u){if(!l&&o!==null){n.push(`M${o+e} ${r+e}h${u-o}v1H${o+e}z`),o=null;return}if(u===i.length-1){if(!l)return;o===null?n.push(`M${u+e},${r+e} h1v1H${u+e}z`):n.push(`M${o+e},${r+e} h${u+1-o}v1H${o+e}z`);return}l&&o===null&&(o=u)})}),n.join("")}function SO(t,e){return t.slice().map((n,i)=>i<e.y||i>=e.y+e.h?n:n.map((r,o)=>o<e.x||o>=e.x+e.w?r:!1))}function xY(t,e,n,i){if(i==null)return null;const r=t.length+n*2,o=Math.floor(e*AY),l=r/e,u=(i.width||o)*l,h=(i.height||o)*l,f=i.x==null?t.length/2-u/2:i.x*l,p=i.y==null?t.length/2-h/2:i.y*l,y=i.opacity==null?1:i.opacity;let _=null;if(i.excavate){let S=Math.floor(f),R=Math.floor(p),I=Math.ceil(u+f-S),P=Math.ceil(h+p-R);_={x:S,y:R,w:I,h:P}}const E=i.crossOrigin;return{x:f,y:p,h,w:u,excavation:_,opacity:y,crossOrigin:E}}function RY(t,e){return e!=null?Math.max(Math.floor(e),0):t?TY:SY}function AO({value:t,level:e,minVersion:n,includeMargin:i,marginSize:r,imageSettings:o,size:l,boostLevel:u}){let h=gt.useMemo(()=>{const S=(Array.isArray(t)?t:[t]).reduce((R,I)=>(R.push(...Ec.QrSegment.makeSegments(I)),R),[]);return Ec.QrCode.encodeSegments(S,wY[e],n,void 0,void 0,u)},[t,e,n,u]);const{cells:f,margin:p,numCells:y,calculatedImageSettings:_}=gt.useMemo(()=>{let E=h.getModules();const S=RY(i,r),R=E.length+S*2,I=xY(E,l,S,o);return{cells:E,margin:S,numCells:R,calculatedImageSettings:I}},[h,l,o,i,r]);return{qrcode:h,margin:p,cells:f,numCells:y,calculatedImageSettings:_}}var CY=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),IY=gt.forwardRef(function(e,n){const i=e,{value:r,size:o=yO,level:l=vO,bgColor:u=_O,fgColor:h=bO,includeMargin:f=EO,minVersion:p=wO,boostLevel:y,marginSize:_,imageSettings:E}=i,R=k0(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:I}=R,P=k0(R,["style"]),F=E==null?void 0:E.src,O=gt.useRef(null),q=gt.useRef(null),G=gt.useCallback(ve=>{O.current=ve,typeof n=="function"?n(ve):n&&(n.current=ve)},[n]),[Y,L]=gt.useState(!1),{margin:C,cells:M,numCells:k,calculatedImageSettings:j}=AO({value:r,level:l,minVersion:p,boostLevel:y,includeMargin:f,marginSize:_,imageSettings:E,size:o});gt.useEffect(()=>{if(O.current!=null){const ve=O.current,we=ve.getContext("2d");if(!we)return;let J=M;const te=q.current,ue=j!=null&&te!==null&&te.complete&&te.naturalHeight!==0&&te.naturalWidth!==0;ue&&j.excavation!=null&&(J=SO(M,j.excavation));const be=window.devicePixelRatio||1;ve.height=ve.width=o*be;const ie=o/k*be;we.scale(ie,ie),we.fillStyle=u,we.fillRect(0,0,k,k),we.fillStyle=h,CY?we.fill(new Path2D(TO(J,C))):M.forEach(function(ye,me){ye.forEach(function(de,qe){de&&we.fillRect(qe+C,me+C,1,1)})}),j&&(we.globalAlpha=j.opacity),ue&&we.drawImage(te,j.x+C,j.y+C,j.w,j.h)}}),gt.useEffect(()=>{L(!1)},[F]);const B=O0({height:o,width:o},I);let V=null;return F!=null&&(V=gt.createElement("img",{src:F,key:F,style:{display:"none"},onLoad:()=>{L(!0)},ref:q,crossOrigin:j==null?void 0:j.crossOrigin})),gt.createElement(gt.Fragment,null,gt.createElement("canvas",O0({style:B,height:o,width:o,ref:G,role:"img"},P)),V)});IY.displayName="QRCodeCanvas";var ow=gt.forwardRef(function(e,n){const i=e,{value:r,size:o=yO,level:l=vO,bgColor:u=_O,fgColor:h=bO,includeMargin:f=EO,minVersion:p=wO,boostLevel:y,title:_,marginSize:E,imageSettings:S}=i,R=k0(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:I,cells:P,numCells:F,calculatedImageSettings:O}=AO({value:r,level:l,minVersion:p,boostLevel:y,includeMargin:f,marginSize:E,imageSettings:S,size:o});let q=P,G=null;S!=null&&O!=null&&(O.excavation!=null&&(q=SO(P,O.excavation)),G=gt.createElement("image",{href:S.src,height:O.h,width:O.w,x:O.x+I,y:O.y+I,preserveAspectRatio:"none",opacity:O.opacity,crossOrigin:O.crossOrigin}));const Y=TO(q,I);return gt.createElement("svg",O0({height:o,width:o,viewBox:`0 0 ${F} ${F}`,ref:n,role:"img"},R),!!_&&gt.createElement("title",null,_),gt.createElement("path",{fill:u,d:`M0,0 h${F}v${F}H0z`,shapeRendering:"crispEdges"}),gt.createElement("path",{fill:h,d:Y,shapeRendering:"crispEdges"}),G)});ow.displayName="QRCodeSVG";const NY=()=>{const t=hl(),{user:e,logout:n}=Hd(),[i,r]=x.useState(()=>{const B=localStorage.getItem("driver");return B?JSON.parse(B):null}),[o,l]=x.useState(!1),[u,h]=x.useState(""),[f,p]=x.useState(""),[y,_]=x.useState(""),[E,S]=x.useState(null),[R,I]=x.useState(!1),[P,F]=x.useState("GCash"),[O,q]=x.useState(""),[G,Y]=x.useState(!1);x.useEffect(()=>{if(!e){t("/login");return}(async()=>{const V=$e(kt,"drivers",e.uid),ve=await Nd(V);if(ve.exists()){const we=ve.data();r(we),h(we.status||"Offline"),p(we.age||""),_(we.contact||""),S(we.image||null),F(we.paymentMethod||"GCash"),q(we.paymentNumber||"");const J=$e(kt,"publicProfiles",e.uid);await Kt(J,we)}})()},[e,t]);const L=async()=>{Y(!0),setTimeout(async()=>{if(!e)return;const B=$e(kt,"queues",e.uid);try{await qr(B)}catch{}const V=$e(kt,"drivers",e.uid);await Kt(V,{status:"offline"},{merge:!0}),await(n==null?void 0:n()),localStorage.removeItem("driver"),Be.success("Logout successful!"),t("/login")},500)},C=async()=>{if(!e)return;const B={...i,status:u,age:f,contact:y,image:E,paymentMethod:P,paymentNumber:O},V=$e(kt,"drivers",e.uid);await WD(V,B);const ve=$e(kt,"publicProfiles",e.uid);await Kt(ve,B),r(B),l(!1),Be.success("Profile updated!")},M=B=>{var ve;const V=(ve=B.target.files)==null?void 0:ve[0];if(V){const we=new FileReader;we.onloadend=()=>{S(we.result)},we.readAsDataURL(V)}},k=()=>{h(B=>B==="Online"?"Offline":"Online")};if(!i)return null;const j=`${window.location.origin}/driver/${e==null?void 0:e.uid}`;return w.jsx("div",{className:"flex justify-center p-4 bg-gray-100 min-h-screen text-gray-900",children:w.jsx(f0,{children:!G&&w.jsxs($o.div,{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:40},transition:{duration:.4},children:[w.jsxs("div",{className:"flex flex-col items-center mb-4 relative",children:[w.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 mb-2 cursor-pointer border-2 border-gray-900 hover:scale-105 transition-transform",onClick:()=>E&&I(!0),children:E?w.jsx("img",{src:E,alt:"Driver",className:"w-full h-full object-cover"}):w.jsx("div",{className:"text-gray-400 text-sm flex items-center justify-center h-full",children:"No Image"})}),o&&w.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"text-xs text-gray-400 mb-2"})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{children:[w.jsx("strong",{children:"Name:"})," ",i.name]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Plate:"})," ",i.plate]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Vehicle:"})," ",i.vehicle]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Status:"})," ",o?w.jsxs("div",{className:"flex items-center",children:[w.jsx("span",{className:`inline-block w-10 h-6 rounded-full ${u==="Online"?"bg-green-500":"bg-red-500"} cursor-pointer`,onClick:k,children:w.jsx("span",{className:`block w-4 h-4 bg-white rounded-full transition-transform ${u==="Online"?"translate-x-4":""}`})}),w.jsx("span",{className:"ml-2 text-sm",children:u})]}):u]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Age:"})," ",o?w.jsx("input",{value:f,onChange:B=>p(B.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full"}):f]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Contact:"})," ",o?w.jsx("input",{value:y,onChange:B=>_(B.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full"}):y]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Payment Method:"})," ",o?w.jsxs("select",{value:P,onChange:B=>F(B.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full",children:[w.jsx("option",{value:"GCash",children:"GCash"}),w.jsx("option",{value:"PayMaya",children:"PayMaya"})]}):P]}),w.jsxs("div",{children:[w.jsxs("strong",{children:[P," Number:"]})," ",o?w.jsx("input",{value:O,onChange:B=>q(B.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full"}):O||"N/A"]})]}),w.jsxs("div",{className:"text-center mt-6",children:[w.jsx("h2",{className:"font-bold text-sm mb-2",children:"Your Driver QR Code"}),w.jsx("div",{className:"bg-white p-4 rounded-lg w-fit mx-auto",children:w.jsx(ow,{value:j,size:150})}),w.jsx("p",{className:"text-xs mt-2 text-gray-400 break-all",children:j})]}),w.jsxs("div",{className:"flex justify-between mt-6",children:[o?w.jsx($o.button,{onClick:C,whileTap:{scale:.95},className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-sm w-full mr-2",children:"Save"}):w.jsx($o.button,{onClick:()=>l(!0),whileTap:{scale:.95},className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm w-full mr-2",children:"Edit Profile"}),w.jsx($o.button,{onClick:L,whileTap:{scale:.9},className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm w-full ml-2",children:"Logout"})]}),w.jsx(f0,{children:R&&w.jsx($o.div,{className:"fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>I(!1),children:w.jsx($o.img,{src:E||"",alt:"Zoomed Profile",className:"max-w-[90%] max-h-[90%] rounded-lg shadow-lg",initial:{scale:.8},animate:{scale:1},exit:{scale:.8},transition:{duration:.3}})})})]},"profileCard")})})},xO=({isOpen:t,onClose:e,onApply:n,onClear:i})=>{const[r,o]=x.useState(null),[l,u]=x.useState(null),[h,f]=x.useState(null),[p,y]=x.useState(null);if(!t)return null;const _=new Date().getFullYear(),E=Array.from({length:10},(S,R)=>_-R);return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:w.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-xl w-full max-w-md shadow-lg border border-gray-300",children:[w.jsx("h2",{className:"text-xl font-bold mb-4",children:"Filter Analytics"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[w.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{const S=new Date,R=new Date(S.getFullYear(),S.getMonth(),S.getDate());o(R),u(S),f(null),y(null)},children:"Today"}),w.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{const S=new Date,R=new Date(S);R.setDate(S.getDate()-7),o(R),u(S),f(null),y(null)},children:"Last 7 Days"}),w.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{const S=new Date,R=new Date(S.getFullYear(),S.getMonth(),1);o(R),u(S),f(null),y(null)},children:"This Month"}),w.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{o(null),u(null),f(null),y(null)},children:"All Time"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Start Date"}),w.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:r?r.toISOString().split("T")[0]:"",onChange:S=>o(S.target.value?new Date(S.target.value):null)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"End Date"}),w.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:l?l.toISOString().split("T")[0]:"",onChange:S=>u(S.target.value?new Date(S.target.value):null)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Month"}),w.jsxs("select",{className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:h??"",onChange:S=>f(S.target.value?parseInt(S.target.value):null),children:[w.jsx("option",{value:"",children:"Select Month"}),Array.from({length:12},(S,R)=>w.jsx("option",{value:R,children:new Date(0,R).toLocaleString("default",{month:"long"})},R))]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Year"}),w.jsxs("select",{className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:p??"",onChange:S=>y(S.target.value?parseInt(S.target.value):null),children:[w.jsx("option",{value:"",children:"Select Year"}),E.map(S=>w.jsx("option",{value:S,children:S},S))]})]})]}),w.jsxs("div",{className:"flex justify-between mt-6",children:[w.jsx("button",{onClick:()=>{o(null),u(null),f(null),y(null),i&&i()},className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Clear"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Cancel"}),w.jsx("button",{onClick:()=>{let S=r,R=l;h!==null&&p!==null&&(S=new Date(p,h,1),R=new Date(p,h+1,0)),n(S,R)},className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded",children:"Apply"})]})]})]})})};Z1.register(vL,_L,bL,J1,eI,tI,EL,wL,TL,SL);const DY="cdbb40b30135e8397fe914b98c469d44",MY=t=>(t=t.toLowerCase(),t.includes("rain")?"":t.includes("cloud")?"":t.includes("clear")?"":t.includes("storm")?"":t.includes("snow")?"":t.includes("fog")||t.includes("mist")?"":""),Im=t=>t.trim().toLowerCase(),PY=()=>{const{user:t}=Hd(),[e,n]=x.useState([]),[i,r]=x.useState(0),[o,l]=x.useState(0),[u,h]=x.useState(0),[f,p]=x.useState({}),[y,_]=x.useState(""),[E,S]=x.useState(!1),[R,I]=x.useState([]),[P,F]=x.useState("weekly"),[O,q]=x.useState([]),[G,Y]=x.useState(!1),[L,C]=x.useState(null),[M,k]=x.useState(null),[j,B]=x.useState(null),[V,ve]=x.useState(null),[we,J]=x.useState(!1),te=x.useCallback(()=>{navigator.geolocation.getCurrentPosition(async({coords:ie})=>{try{const de=(await(await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${ie.latitude}&lon=${ie.longitude}&units=metric&appid=${DY}`)).json()).list.filter((qe,ct)=>ct%8===0).slice(0,7).map(qe=>{const ct=new Date(qe.dt_txt),rt=qe.weather[0].description,Vt=MY(rt);return!y&&(rt.includes("rain")||rt.includes("storm"))&&_(" Expect rain  rides may increase!"),{date:ct.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),temp:qe.main.temp,description:rt,icon:Vt}});n(de)}catch(ye){console.error("Weather fetch error:",ye)}},ie=>{console.error("Failed to get location for weather:",ie)})},[y]),ue=x.useCallback(async()=>{if(t){S(!0);try{const ie=new Date;ie.setHours(0,0,0,0);const ye=new Date(ie);ye.setDate(ie.getDate()-6);const me=Fr(mn(kt,"ride_logs"),Ko("driverId","==",t.uid),Ko("timestamp",">=",Ht.fromDate(ye))),de=await ed(me);let qe=0,ct=0,rt=0,Vt={},Ae={};for(let je=0;je<7;je++){const Ee=new Date(ye.getTime()+je*864e5),_e=Ee.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});Ae[_e]={earnings:0,rides:0,date:Ee}}let Ve=0,Re=0;de.forEach(je=>{var gn,en,Tn;const Ee=je.data(),_e=(gn=Ee.timestamp)==null?void 0:gn.toDate();if(!_e)return;const jt=(Ee.dropoffName||"").trim(),Nn={};Object.entries(dd).forEach(([Ei,Pi])=>{Nn[Im(Ei)]=Pi});const bt=Nn[Im(jt)]||0;qe+=bt,_e>=ie&&_e<new Date(ie.getTime()+864e5)&&(Ve+=bt,Re++),typeof Ee.waitTimeMinutes=="number"&&Ee.waitTimeMinutes>=0&&(ct+=Ee.waitTimeMinutes,rt++);const zn=_e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});Ae[zn]&&(Ae[zn]={earnings:(((en=Ae[zn])==null?void 0:en.earnings)||0)+bt,rides:(((Tn=Ae[zn])==null?void 0:Tn.rides)||0)+1,date:Ae[zn].date}),jt&&(Vt[jt]||(Vt[jt]={count:0,earnings:0}),Vt[jt].count+=1,Vt[jt].earnings+=bt)}),l(Re),h(Ve),r(rt?Math.round(ct/rt):0),p(Vt),I(Object.entries(Ae).reverse().map(([je,Ee])=>({date:Ee.date.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),earnings:Ee.earnings||0,rides:Ee.rides||0})))}catch(ie){console.error("Error loading analytics:",ie)}S(!1)}},[t]),be=x.useCallback(async(ie,ye,me)=>{if(t)try{let de,qe;const ct=new Date;if(ct.setHours(0,0,0,0),ye&&me)de=new Date(ye),de.setHours(0,0,0,0),qe=new Date(me),qe.setHours(23,59,59,999);else{const Ee=ie==="annually"?365:ie==="monthly"?30:7;de=new Date(ct),de.setDate(ct.getDate()-(Ee-1)),qe=new Date(ct),qe.setHours(23,59,59,999)}const rt=Fr(mn(kt,"ride_logs"),Ko("driverId","==",t.uid),Ko("timestamp",">=",Ht.fromDate(de)),Ko("timestamp","<=",Ht.fromDate(qe))),Vt=await ed(rt);let Ae={};const Ve=Math.ceil((qe.getTime()-de.getTime())/(1e3*60*60*24))+1;for(let Ee=0;Ee<Ve;Ee++){const _e=new Date(de.getTime()+Ee*864e5),ut=_e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});Ae[ut]={earnings:0,rides:0,date:_e}}Vt.forEach(Ee=>{var en;const _e=Ee.data(),ut=(en=_e.timestamp)==null?void 0:en.toDate();if(!ut)return;const Nn=(_e.dropoffName||"").trim(),bt={};Object.entries(dd).forEach(([Tn,Ei])=>{bt[Im(Tn)]=Ei});const zn=bt[Im(Nn)]||0,gn=ut.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});Ae[gn]&&(Ae[gn].earnings+=zn,Ae[gn].rides+=1)});let Re={};ye&&me?Object.entries(Ae).forEach(([Ee,_e])=>{Re[Ee]=_e}):ie==="weekly"?Object.entries(Ae).forEach(([Ee,_e])=>{Re[Ee]=_e}):ie==="monthly"?Object.entries(Ae).forEach(([Ee,_e])=>{const ut=new Date(_e.date);ut.setDate(_e.date.getDate()-_e.date.getDay());const jt=ut.toLocaleDateString(void 0,{month:"short",day:"numeric"});Re[jt]||(Re[jt]={earnings:0,rides:0}),Re[jt].earnings+=_e.earnings,Re[jt].rides+=_e.rides}):ie==="annually"&&Object.entries(Ae).forEach(([Ee,_e])=>{const ut=_e.date.toLocaleDateString(void 0,{month:"short",year:"numeric"});Re[ut]||(Re[ut]={earnings:0,rides:0}),Re[ut].earnings+=_e.earnings,Re[ut].rides+=_e.rides});const je=Object.entries(Re).map(([Ee,_e])=>({label:Ee,earnings:_e.earnings,rides:_e.rides}));q(je)}catch(de){console.error("Error loading pie analytics:",de)}},[t]);return x.useEffect(()=>{t&&(te(),ue(),be(P))},[t,te,ue,be,P]),x.useEffect(()=>{t&&be(P)},[P,be,t]),w.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 text-gray-900",children:w.jsxs("div",{className:"max-w-7xl mx-auto",children:[w.jsx("h1",{className:"text-3xl font-bold mb-6 text-center animate-fade-in",children:" Analytics Dashboard"}),y&&w.jsx("div",{className:"bg-yellow-200 p-4 rounded-lg mb-6 shadow-lg animate-slide-down",children:y}),e.length>0&&w.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-4 mb-8 animate-fade-in-up",children:e.map((ie,ye)=>w.jsxs("div",{className:"bg-white p-4 rounded-xl flex flex-col items-center shadow-lg hover:shadow-xl transition-shadow duration-300",children:[w.jsx("p",{className:"text-sm font-medium text-gray-700",children:ie.date}),w.jsx("div",{className:"text-4xl my-2",children:ie.icon}),w.jsxs("p",{className:"font-bold text-lg",children:[ie.temp.toFixed(1),"C"]}),w.jsx("p",{className:"text-xs capitalize text-center text-gray-600",children:ie.description})]},ye))}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-slide-up",children:[w.jsx("div",{className:"text-4xl mb-2",children:""}),w.jsx("p",{className:"font-semibold text-xl mb-1",children:"Avg Wait Time"}),w.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[i," mins"]}),w.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"(Based on queued wait times recorded)"})]}),w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-slide-up",style:{animationDelay:"0.1s"},children:[w.jsx("div",{className:"text-4xl mb-2",children:""}),w.jsx("p",{className:"font-semibold text-xl mb-1",children:"Rides Today"}),w.jsx("p",{className:"text-3xl font-bold text-green-600",children:o}),w.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["as of ",new Date().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})]})]}),w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-slide-up",style:{animationDelay:"0.2s"},children:[w.jsx("div",{className:"text-4xl mb-2",children:""}),w.jsx("p",{className:"font-semibold text-xl mb-1",children:"Total Earnings"}),w.jsxs("p",{className:"text-3xl font-bold text-yellow-600",children:["",u.toFixed(2)]}),w.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["as of ",new Date().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg animate-fade-in-left",children:[w.jsx("h2",{className:"font-semibold text-xl mb-4",children:" Top Drop-offs"}),Object.entries(f).length?w.jsx("ul",{className:"space-y-2",children:Object.entries(f).sort(([,ie],[,ye])=>ye.earnings-ie.earnings).slice(0,5).map(([ie,ye],me)=>w.jsxs("li",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[w.jsx("span",{className:"font-medium",children:ie}),w.jsxs("span",{className:"text-sm text-gray-600",children:[ye.count," ride",ye.count>1?"s":"",", ",ye.earnings.toFixed(2)]})]},me))}):w.jsx("p",{className:"text-gray-500",children:"No drop-offs recorded yet."})]}),w.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg flex items-center justify-center animate-fade-in-right",children:w.jsx("button",{onClick:()=>{ue(),te(),be(P)},disabled:E,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 text-white px-8 py-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105",children:E?" Refreshing...":" Refresh Data"})})]}),w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg mb-8 animate-fade-in-up",children:[w.jsx("h2",{className:"text-xl font-semibold mb-6",children:" 7-Day Ride & Earnings Trend"}),w.jsx("div",{className:"h-80",children:w.jsx(AL,{data:{labels:R.map(ie=>ie.date),datasets:[{label:"Rides",data:R.map(ie=>ie.rides),backgroundColor:"#3b82f6",borderRadius:6},{label:"Earnings ()",data:R.map(ie=>ie.earnings),backgroundColor:"#10b981",borderRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:1500,easing:"easeOutCubic"},scales:{y:{beginAtZero:!0,ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{tooltip:{callbacks:{label:ie=>`${ie.dataset.label||"Unknown"}: ${ie.parsed.y}`}},legend:{labels:{color:"#374151"}}}}})})]}),w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg animate-fade-in-up",style:{animationDelay:"0.3s"},children:[w.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[w.jsx("h2",{className:"text-xl font-semibold mb-4 sm:mb-0",children:" Ride & Earnings Breakdown"}),w.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.jsx("button",{onClick:()=>{Y(!0)},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${we?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Filter"}),w.jsx("button",{onClick:()=>{F("weekly"),J(!1),be("weekly")},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${P==="weekly"&&!we?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Weekly"}),w.jsx("button",{onClick:()=>{F("monthly"),J(!1),be("monthly")},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${P==="monthly"&&!we?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Monthly"}),w.jsx("button",{onClick:()=>{F("annually"),J(!1),be("annually")},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${P==="annually"&&!we?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Annually"})]})]}),w.jsx("div",{className:"h-96",children:w.jsx(xL,{data:{labels:O.map(ie=>ie.label),datasets:[{label:"Earnings ()",data:O.map(ie=>ie.earnings),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"#10b981",pointBorderColor:"#10b981"},{label:"Rides",data:O.map(ie=>ie.rides),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"#3b82f6",pointBorderColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:1500,easing:"easeOutCubic"},scales:{y:{beginAtZero:!0,ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{tooltip:{callbacks:{label:ie=>{const ye=ie.dataset.label||"Unknown",me=ie.parsed.y;return`${ye}: ${me}`}}},legend:{labels:{color:"#374151"}},zoom:{zoom:{wheel:{enabled:!0},pinch:{enabled:!1},mode:"x"},pan:{enabled:!0,mode:"x"}}}}})})]}),G&&w.jsx(xO,{isOpen:G,onClose:()=>Y(!1),onApply:(ie,ye)=>{C(ie),k(ye),J(!0),be("weekly",ie,ye),Y(!1)}})]})})},OY=()=>{const t=[{to:"/home",icon:m8,label:"Home"},{to:"/analytics",icon:s8,label:"Analytics"},{to:"/history",icon:v8,label:"History"},{to:"/profile",icon:w8,label:"Profile"}];return w.jsx("nav",{className:`fixed bottom-0 left-0 w-full h-16 z-50 border-t backdrop-blur-sm\r
    bg-white/80 text-black border-gray-200\r
    dark:bg-[#0D111C]/95 dark:text-white dark:border-[#1c2230]\r
    flex justify-around items-center transition-colors duration-300`,children:t.map(({to:e,icon:n,label:i})=>w.jsxs(gI,{to:e,className:({isActive:r})=>`flex flex-col items-center justify-center text-xs font-medium transition-colors duration-200
            ${r?"text-blue-600":"text-gray-500"}`,children:[w.jsx(n,{size:20}),w.jsx("span",{children:i})]},e))})},kY=()=>w.jsxs("div",{className:"min-h-screen bg-white text-black transition-colors duration-500 pb-16",children:[w.jsx("header",{className:"sticky top-0 z-40 bg-white px-4 pt-4 pb-2 flex justify-between items-center shadow-sm",children:w.jsx("h1",{className:"text-lg font-bold",children:"AGDUWA Drivers"})}),w.jsx("main",{className:"p-4",children:w.jsx(IV,{})}),w.jsx(OY,{})]}),LY=()=>{const{driverId:t}=pV(),[e,n]=x.useState(null),[i,r]=x.useState(!0);if(x.useEffect(()=>{(async()=>{if(!t){r(!1);return}try{const u=$e(kt,"publicProfiles",t),h=await Nd(u);h.exists()?n(h.data()):n(null)}catch(u){console.error("Error fetching driver:",u),n(null)}r(!1)})()},[t]),i)return w.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-900 text-white p-4",children:w.jsx("p",{children:"Loading driver profile..."})});if(!e)return w.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen bg-gray-100 text-gray-900 p-4",children:[w.jsx("p",{className:"mb-4",children:"Driver profile not found."}),w.jsx(W0,{to:"/",className:"text-blue-500 hover:underline",children:"Return to Home"})]});const o=`${window.location.origin}/driver/${t}`;return w.jsx("div",{className:"flex justify-center p-4 bg-gray-100 min-h-screen text-gray-900",children:w.jsxs("div",{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-md",children:[w.jsx("div",{className:"flex justify-center mb-6",children:w.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden bg-gray-200 border-2 border-gray-900",children:e.image?w.jsx("img",{src:e.image,alt:`${e.name} profile`,className:"w-full h-full object-cover"}):w.jsx("div",{className:"text-gray-400 text-sm flex items-center justify-center h-full",children:"No Image"})})}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{children:[w.jsx("strong",{children:"Name:"})," ",e.name||"N/A"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Plate:"})," ",e.plate||"N/A"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Vehicle:"})," ",e.vehicle||"N/A"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Status:"})," ",w.jsx("span",{className:`px-2 py-1 rounded text-sm font-semibold ${e.status==="Online"?"bg-green-600 text-green-100":"bg-red-600 text-red-100"}`,children:e.status||"Offline"})]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Age:"})," ",e.age||"N/A"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Contact:"})," ",e.contact||"N/A"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Payment Method:"})," ",e.paymentMethod||"N/A"]}),w.jsxs("div",{children:[w.jsxs("strong",{children:[e.paymentMethod||"Payment"," Number:"]})," ",e.paymentNumber||"N/A"]})]}),w.jsxs("div",{className:"text-center mt-8",children:[w.jsx("h2",{className:"font-bold text-sm mb-2",children:"Driver QR Code"}),w.jsx("div",{className:"bg-white p-4 rounded-lg w-fit mx-auto",children:w.jsx(ow,{value:o,size:150})}),w.jsx("p",{className:"text-xs mt-2 text-gray-400 break-all",children:o})]})]})})};var y_={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var V1;function VY(){return V1||(V1=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(o=r(o,i(u)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var u in o)e.call(o,u)&&o[u]&&(l=r(l,u));return l}function r(o,l){return l?o?o+" "+l:o+l:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(y_)),y_.exports}var jY=VY();const UY=X1(jY),FY=({driver:t,onClose:e,onSaveSuccess:n,user:i})=>{const r=fg(),[o,l]=x.useState(!1),[u,h]=x.useState({name:t.name||"",plate:t.plate||"",status:t.status||"offline",contact:t.phone||"",age:t.age||"",paymentNumber:t.paymentNumber||""}),[f,p]=x.useState(!1);x.useEffect(()=>{setTimeout(()=>l(!0),10)},[]);const y=()=>{const{name:S,plate:R,contact:I,age:P}=u;if(!S||!R||!I||!P)return Be.error("Please fill in all required fields"),!1;if(!/^[0-9]{10,13}$/.test(I))return Be.error("Enter a valid contact number"),!1;const O=parseInt(P);return isNaN(O)||O<18||O>100?(Be.error("Enter a valid age (18100)"),!1):!0},_=async()=>{if(y())try{p(!0),await WD($e(r,"drivers",t.id),{name:u.name,plate:u.plate,status:u.status,phone:u.contact,age:parseInt(u.age),paymentNumber:u.paymentNumber}),Be.success("Driver updated"),await Kt($e(mn(r,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Edited driver: ${t.name} (${t.plate})`,timestamp:Hi()}),n(),E()}catch(S){console.error(S),Be.error("Update failed")}finally{p(!1)}},E=()=>{l(!1),setTimeout(()=>e(),250)};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:w.jsxs("div",{className:UY("bg-white p-6 rounded-lg max-w-md w-full transform transition-all duration-300 border border-gray-300 shadow-lg",{"scale-100 opacity-100":o,"scale-95 opacity-0":!o}),children:[w.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Edit Driver"}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("input",{type:"text",placeholder:"Name",value:u.name,onChange:S=>h({...u,name:S.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),w.jsx("input",{type:"text",placeholder:"Plate",value:u.plate,onChange:S=>h({...u,plate:S.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),w.jsx("input",{type:"text",placeholder:"Contact",value:u.contact,onChange:S=>h({...u,contact:S.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),w.jsx("input",{type:"number",placeholder:"Age",value:u.age,onChange:S=>h({...u,age:S.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),w.jsx("input",{type:"text",placeholder:"Payment Number",value:u.paymentNumber,onChange:S=>h({...u,paymentNumber:S.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),w.jsxs("select",{value:u.status,onChange:S=>h({...u,status:S.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900",children:[w.jsx("option",{value:"offline",children:"Offline"}),w.jsx("option",{value:"online",children:"Online"})]})]}),w.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[w.jsx("button",{onClick:E,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",disabled:f,children:"Cancel"}),w.jsx("button",{onClick:_,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",disabled:f,children:f?"Saving...":"Save"})]})]})})},Dg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function iu(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function lw(t){return"nodeType"in t}function Mi(t){var e,n;return t?iu(t)?t:lw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function cw(t){const{Document:e}=Mi(t);return t instanceof e}function Gd(t){return iu(t)?!1:t instanceof Mi(t).HTMLElement}function RO(t){return t instanceof Mi(t).SVGElement}function su(t){return t?iu(t)?t.document:lw(t)?cw(t)?t:Gd(t)||RO(t)?t.ownerDocument:document:document:document}const so=Dg?x.useLayoutEffect:x.useEffect;function uw(t){const e=x.useRef(t);return so(()=>{e.current=t}),x.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function BY(){const t=x.useRef(null),e=x.useCallback((i,r)=>{t.current=setInterval(i,r)},[]),n=x.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function CO(t,e){e===void 0&&(e=[t]);const n=x.useRef(t);return so(()=>{n.current!==t&&(n.current=t)},e),n}function $d(t,e){const n=x.useRef();return x.useMemo(()=>{const i=t(n.current);return n.current=i,i},[...e])}function zY(t){const e=uw(t),n=x.useRef(null),i=x.useCallback(r=>{r!==n.current&&(e==null||e(r,n.current)),n.current=r},[]);return[n,i]}function L0(t){const e=x.useRef();return x.useEffect(()=>{e.current=t},[t]),e.current}let v_={};function hw(t,e){return x.useMemo(()=>{if(e)return e;const n=v_[t]==null?0:v_[t]+1;return v_[t]=n,t+"-"+n},[t,e])}function IO(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((o,l)=>{const u=Object.entries(l);for(const[h,f]of u){const p=o[h];p!=null&&(o[h]=p+t*f)}return o},{...e})}}const Cc=IO(1),zp=IO(-1);function qY(t){return"clientX"in t&&"clientY"in t}function NO(t){if(!t)return!1;const{KeyboardEvent:e}=Mi(t.target);return e&&t instanceof e}function HY(t){if(!t)return!1;const{TouchEvent:e}=Mi(t.target);return e&&t instanceof e}function V0(t){if(HY(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return qY(t)?{x:t.clientX,y:t.clientY}:null}const j1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function GY(t){return t.matches(j1)?t:t.querySelector(j1)}const $Y={display:"none"};function KY(t){let{id:e,value:n}=t;return gt.createElement("div",{id:e,style:$Y},n)}function WY(t){let{id:e,announcement:n,ariaLiveType:i="assertive"}=t;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},n)}function YY(){const[t,e]=x.useState("");return{announce:x.useCallback(i=>{i!=null&&e(i)},[]),announcement:t}}const DO=x.createContext(null);function QY(t){const e=x.useContext(DO);x.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function XY(){const[t]=x.useState(()=>new Set),e=x.useCallback(i=>(t.add(i),()=>t.delete(i)),[t]);return[x.useCallback(i=>{let{type:r,event:o}=i;t.forEach(l=>{var u;return(u=l[r])==null?void 0:u.call(l,o)})},[t]),e]}const ZY={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},JY={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function eQ(t){let{announcements:e=JY,container:n,hiddenTextDescribedById:i,screenReaderInstructions:r=ZY}=t;const{announce:o,announcement:l}=YY(),u=hw("DndLiveRegion"),[h,f]=x.useState(!1);if(x.useEffect(()=>{f(!0)},[]),QY(x.useMemo(()=>({onDragStart(y){let{active:_}=y;o(e.onDragStart({active:_}))},onDragMove(y){let{active:_,over:E}=y;e.onDragMove&&o(e.onDragMove({active:_,over:E}))},onDragOver(y){let{active:_,over:E}=y;o(e.onDragOver({active:_,over:E}))},onDragEnd(y){let{active:_,over:E}=y;o(e.onDragEnd({active:_,over:E}))},onDragCancel(y){let{active:_,over:E}=y;o(e.onDragCancel({active:_,over:E}))}}),[o,e])),!h)return null;const p=gt.createElement(gt.Fragment,null,gt.createElement(KY,{id:i,value:r.draggable}),gt.createElement(WY,{id:u,announcement:l}));return n?dh.createPortal(p,n):p}var si;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(si||(si={}));function qp(){}function tQ(t,e){return x.useMemo(()=>({sensor:t,options:{}}),[t,e])}function nQ(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return x.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const Ls=Object.freeze({x:0,y:0});function iQ(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function sQ(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return n-i}function rQ(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return i-n}function aQ(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function U1(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const oQ=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const r=U1(e,e.left,e.top),o=[];for(const l of i){const{id:u}=l,h=n.get(u);if(h){const f=iQ(U1(h),r);o.push({id:u,data:{droppableContainer:l,value:f}})}}return o.sort(sQ)};function lQ(t,e){const n=Math.max(e.top,t.top),i=Math.max(e.left,t.left),r=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=r-i,u=o-n;if(i<r&&n<o){const h=e.width*e.height,f=t.width*t.height,p=l*u,y=p/(h+f-p);return Number(y.toFixed(4))}return 0}const cQ=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const r=[];for(const o of i){const{id:l}=o,u=n.get(l);if(u){const h=lQ(u,e);h>0&&r.push({id:l,data:{droppableContainer:o,value:h}})}}return r.sort(rQ)};function uQ(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function MO(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Ls}function hQ(t){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const dQ=hQ(1);function fQ(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function mQ(t,e,n){const i=fQ(e);if(!i)return t;const{scaleX:r,scaleY:o,x:l,y:u}=i,h=t.left-l-(1-r)*parseFloat(n),f=t.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),p=r?t.width/r:t.width,y=o?t.height/o:t.height;return{width:p,height:y,top:f,right:h+p,bottom:f+y,left:h}}const pQ={ignoreTransform:!1};function Kd(t,e){e===void 0&&(e=pQ);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:p}=Mi(t).getComputedStyle(t);f&&(n=mQ(n,f,p))}const{top:i,left:r,width:o,height:l,bottom:u,right:h}=n;return{top:i,left:r,width:o,height:l,bottom:u,right:h}}function F1(t){return Kd(t,{ignoreTransform:!0})}function gQ(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function yQ(t,e){return e===void 0&&(e=Mi(t).getComputedStyle(t)),e.position==="fixed"}function vQ(t,e){e===void 0&&(e=Mi(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?n.test(o):!1})}function dw(t,e){const n=[];function i(r){if(e!=null&&n.length>=e||!r)return n;if(cw(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Gd(r)||RO(r)||n.includes(r))return n;const o=Mi(t).getComputedStyle(r);return r!==t&&vQ(r,o)&&n.push(r),yQ(r,o)?n:i(r.parentNode)}return t?i(t):n}function PO(t){const[e]=dw(t,1);return e??null}function __(t){return!Dg||!t?null:iu(t)?t:lw(t)?cw(t)||t===su(t).scrollingElement?window:Gd(t)?t:null:null}function OO(t){return iu(t)?t.scrollX:t.scrollLeft}function kO(t){return iu(t)?t.scrollY:t.scrollTop}function j0(t){return{x:OO(t),y:kO(t)}}var Un;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Un||(Un={}));function LO(t){return!Dg||!t?!1:t===document.scrollingElement}function VO(t){const e={x:0,y:0},n=LO(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},r=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=i.y,u=t.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:l,isRight:u,maxScroll:i,minScroll:e}}const _Q={x:.2,y:.2};function bQ(t,e,n,i,r){let{top:o,left:l,right:u,bottom:h}=n;i===void 0&&(i=10),r===void 0&&(r=_Q);const{isTop:f,isBottom:p,isLeft:y,isRight:_}=VO(t),E={x:0,y:0},S={x:0,y:0},R={height:e.height*r.y,width:e.width*r.x};return!f&&o<=e.top+R.height?(E.y=Un.Backward,S.y=i*Math.abs((e.top+R.height-o)/R.height)):!p&&h>=e.bottom-R.height&&(E.y=Un.Forward,S.y=i*Math.abs((e.bottom-R.height-h)/R.height)),!_&&u>=e.right-R.width?(E.x=Un.Forward,S.x=i*Math.abs((e.right-R.width-u)/R.width)):!y&&l<=e.left+R.width&&(E.x=Un.Backward,S.x=i*Math.abs((e.left+R.width-l)/R.width)),{direction:E,speed:S}}function EQ(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:i,bottom:r}=t.getBoundingClientRect();return{top:e,left:n,right:i,bottom:r,width:t.clientWidth,height:t.clientHeight}}function jO(t){return t.reduce((e,n)=>Cc(e,j0(n)),Ls)}function wQ(t){return t.reduce((e,n)=>e+OO(n),0)}function TQ(t){return t.reduce((e,n)=>e+kO(n),0)}function SQ(t,e){if(e===void 0&&(e=Kd),!t)return;const{top:n,left:i,bottom:r,right:o}=e(t);PO(t)&&(r<=0||o<=0||n>=window.innerHeight||i>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const AQ=[["x",["left","right"],wQ],["y",["top","bottom"],TQ]];class fw{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=dw(n),r=jO(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,u]of AQ)for(const h of l)Object.defineProperty(this,h,{get:()=>{const f=u(i),p=r[o]-f;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class jh{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=e}add(e,n,i){var r;(r=this.target)==null||r.addEventListener(e,n,i),this.listeners.push([e,n,i])}}function xQ(t){const{EventTarget:e}=Mi(t);return t instanceof e?t:su(t)}function b_(t,e){const n=Math.abs(t.x),i=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+i**2)>e:"x"in e&&"y"in e?n>e.x&&i>e.y:"x"in e?n>e.x:"y"in e?i>e.y:!1}var ds;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ds||(ds={}));function B1(t){t.preventDefault()}function RQ(t){t.stopPropagation()}var St;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(St||(St={}));const UO={start:[St.Space,St.Enter],cancel:[St.Esc],end:[St.Space,St.Enter,St.Tab]},CQ=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case St.Right:return{...n,x:n.x+25};case St.Left:return{...n,x:n.x-25};case St.Down:return{...n,y:n.y+25};case St.Up:return{...n,y:n.y-25}}};class FO{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new jh(su(n)),this.windowListeners=new jh(Mi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ds.Resize,this.handleCancel),this.windowListeners.add(ds.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ds.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,i=e.node.current;i&&SQ(i),n(Ls)}handleKeyDown(e){if(NO(e)){const{active:n,context:i,options:r}=this.props,{keyboardCodes:o=UO,coordinateGetter:l=CQ,scrollBehavior:u="smooth"}=r,{code:h}=e;if(o.end.includes(h)){this.handleEnd(e);return}if(o.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:f}=i.current,p=f?{x:f.left,y:f.top}:Ls;this.referenceCoordinates||(this.referenceCoordinates=p);const y=l(e,{active:n,context:i.current,currentCoordinates:p});if(y){const _=zp(y,p),E={x:0,y:0},{scrollableAncestors:S}=i.current;for(const R of S){const I=e.code,{isTop:P,isRight:F,isLeft:O,isBottom:q,maxScroll:G,minScroll:Y}=VO(R),L=EQ(R),C={x:Math.min(I===St.Right?L.right-L.width/2:L.right,Math.max(I===St.Right?L.left:L.left+L.width/2,y.x)),y:Math.min(I===St.Down?L.bottom-L.height/2:L.bottom,Math.max(I===St.Down?L.top:L.top+L.height/2,y.y))},M=I===St.Right&&!F||I===St.Left&&!O,k=I===St.Down&&!q||I===St.Up&&!P;if(M&&C.x!==y.x){const j=R.scrollLeft+_.x,B=I===St.Right&&j<=G.x||I===St.Left&&j>=Y.x;if(B&&!_.y){R.scrollTo({left:j,behavior:u});return}B?E.x=R.scrollLeft-j:E.x=I===St.Right?R.scrollLeft-G.x:R.scrollLeft-Y.x,E.x&&R.scrollBy({left:-E.x,behavior:u});break}else if(k&&C.y!==y.y){const j=R.scrollTop+_.y,B=I===St.Down&&j<=G.y||I===St.Up&&j>=Y.y;if(B&&!_.x){R.scrollTo({top:j,behavior:u});return}B?E.y=R.scrollTop-j:E.y=I===St.Down?R.scrollTop-G.y:R.scrollTop-Y.y,E.y&&R.scrollBy({top:-E.y,behavior:u});break}}this.handleMove(e,Cc(zp(y,this.referenceCoordinates),E))}}}handleMove(e,n){const{onMove:i}=this.props;e.preventDefault(),i(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}FO.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:i=UO,onActivation:r}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(i.start.includes(l)){const u=o.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),r==null||r({event:t.nativeEvent}),!0)}return!1}}];function z1(t){return!!(t&&"distance"in t)}function q1(t){return!!(t&&"delay"in t)}class mw{constructor(e,n,i){var r;i===void 0&&(i=xQ(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=su(l),this.documentListeners=new jh(this.document),this.listeners=new jh(i),this.windowListeners=new jh(Mi(l)),this.initialCoordinates=(r=V0(o))!=null?r:Ls,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ds.Resize,this.handleCancel),this.windowListeners.add(ds.DragStart,B1),this.windowListeners.add(ds.VisibilityChange,this.handleCancel),this.windowListeners.add(ds.ContextMenu,B1),this.documentListeners.add(ds.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(q1(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(z1(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ds.Click,RQ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ds.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!r)return;const h=(n=V0(e))!=null?n:Ls,f=zp(r,h);if(!i&&u){if(z1(u)){if(u.tolerance!=null&&b_(f,u.tolerance))return this.handleCancel();if(b_(f,u.distance))return this.handleStart()}if(q1(u)&&b_(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}e.cancelable&&e.preventDefault(),l(h)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===St.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const IQ={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class pw extends mw{constructor(e){const{event:n}=e,i=su(n.target);super(e,IQ,i)}}pw.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return!n.isPrimary||n.button!==0?!1:(i==null||i({event:n}),!0)}}];const NQ={move:{name:"mousemove"},end:{name:"mouseup"}};var U0;(function(t){t[t.RightClick=2]="RightClick"})(U0||(U0={}));class DQ extends mw{constructor(e){super(e,NQ,su(e.event.target))}}DQ.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return n.button===U0.RightClick?!1:(i==null||i({event:n}),!0)}}];const E_={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class MQ extends mw{constructor(e){super(e,E_)}static setup(){return window.addEventListener(E_.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(E_.move.name,e)};function e(){}}}MQ.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;const{touches:r}=n;return r.length>1?!1:(i==null||i({event:n}),!0)}}];var Uh;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Uh||(Uh={}));var Hp;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Hp||(Hp={}));function PQ(t){let{acceleration:e,activator:n=Uh.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:l=5,order:u=Hp.TreeOrder,pointerCoordinates:h,scrollableAncestors:f,scrollableAncestorRects:p,delta:y,threshold:_}=t;const E=kQ({delta:y,disabled:!o}),[S,R]=BY(),I=x.useRef({x:0,y:0}),P=x.useRef({x:0,y:0}),F=x.useMemo(()=>{switch(n){case Uh.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Uh.DraggableRect:return r}},[n,r,h]),O=x.useRef(null),q=x.useCallback(()=>{const Y=O.current;if(!Y)return;const L=I.current.x*P.current.x,C=I.current.y*P.current.y;Y.scrollBy(L,C)},[]),G=x.useMemo(()=>u===Hp.TreeOrder?[...f].reverse():f,[u,f]);x.useEffect(()=>{if(!o||!f.length||!F){R();return}for(const Y of G){if((i==null?void 0:i(Y))===!1)continue;const L=f.indexOf(Y),C=p[L];if(!C)continue;const{direction:M,speed:k}=bQ(Y,C,F,e,_);for(const j of["x","y"])E[j][M[j]]||(k[j]=0,M[j]=0);if(k.x>0||k.y>0){R(),O.current=Y,S(q,l),I.current=k,P.current=M;return}}I.current={x:0,y:0},P.current={x:0,y:0},R()},[e,q,i,R,o,l,JSON.stringify(F),JSON.stringify(E),S,f,G,p,JSON.stringify(_)])}const OQ={x:{[Un.Backward]:!1,[Un.Forward]:!1},y:{[Un.Backward]:!1,[Un.Forward]:!1}};function kQ(t){let{delta:e,disabled:n}=t;const i=L0(e);return $d(r=>{if(n||!i||!r)return OQ;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Un.Backward]:r.x[Un.Backward]||o.x===-1,[Un.Forward]:r.x[Un.Forward]||o.x===1},y:{[Un.Backward]:r.y[Un.Backward]||o.y===-1,[Un.Forward]:r.y[Un.Forward]||o.y===1}}},[n,e,i])}function LQ(t,e){const n=e!=null?t.get(e):void 0,i=n?n.node.current:null;return $d(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function VQ(t,e){return x.useMemo(()=>t.reduce((n,i)=>{const{sensor:r}=i,o=r.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,i)}));return[...n,...o]},[]),[t,e])}var fd;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(fd||(fd={}));var F0;(function(t){t.Optimized="optimized"})(F0||(F0={}));const H1=new Map;function jQ(t,e){let{dragging:n,dependencies:i,config:r}=e;const[o,l]=x.useState(null),{frequency:u,measure:h,strategy:f}=r,p=x.useRef(t),y=I(),_=CO(y),E=x.useCallback(function(P){P===void 0&&(P=[]),!_.current&&l(F=>F===null?P:F.concat(P.filter(O=>!F.includes(O))))},[_]),S=x.useRef(null),R=$d(P=>{if(y&&!n)return H1;if(!P||P===H1||p.current!==t||o!=null){const F=new Map;for(let O of t){if(!O)continue;if(o&&o.length>0&&!o.includes(O.id)&&O.rect.current){F.set(O.id,O.rect.current);continue}const q=O.node.current,G=q?new fw(h(q),q):null;O.rect.current=G,G&&F.set(O.id,G)}return F}return P},[t,o,n,y,h]);return x.useEffect(()=>{p.current=t},[t]),x.useEffect(()=>{y||E()},[n,y]),x.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),x.useEffect(()=>{y||typeof u!="number"||S.current!==null||(S.current=setTimeout(()=>{E(),S.current=null},u))},[u,y,E,...i]),{droppableRects:R,measureDroppableContainers:E,measuringScheduled:o!=null};function I(){switch(f){case fd.Always:return!1;case fd.BeforeDragging:return n;default:return!n}}}function BO(t,e){return $d(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function UQ(t,e){return BO(t,e)}function FQ(t){let{callback:e,disabled:n}=t;const i=uw(e),r=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,n]);return x.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function gw(t){let{callback:e,disabled:n}=t;const i=uw(e),r=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[n]);return x.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function BQ(t){return new fw(Kd(t),t)}function G1(t,e,n){e===void 0&&(e=BQ);const[i,r]=x.useState(null);function o(){r(h=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=h??n)!=null?f:null}const p=e(t);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const l=FQ({callback(h){if(t)for(const f of h){const{type:p,target:y}=f;if(p==="childList"&&y instanceof HTMLElement&&y.contains(t)){o();break}}}}),u=gw({callback:o});return so(()=>{o(),t?(u==null||u.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[t]),i}function zQ(t){const e=BO(t);return MO(t,e)}const $1=[];function qQ(t){const e=x.useRef(t),n=$d(i=>t?i&&i!==$1&&t&&e.current&&t.parentNode===e.current.parentNode?i:dw(t):$1,[t]);return x.useEffect(()=>{e.current=t},[t]),n}function HQ(t){const[e,n]=x.useState(null),i=x.useRef(t),r=x.useCallback(o=>{const l=__(o.target);l&&n(u=>u?(u.set(l,j0(l)),new Map(u)):null)},[]);return x.useEffect(()=>{const o=i.current;if(t!==o){l(o);const u=t.map(h=>{const f=__(h);return f?(f.addEventListener("scroll",r,{passive:!0}),[f,j0(f)]):null}).filter(h=>h!=null);n(u.length?new Map(u):null),i.current=t}return()=>{l(t),l(o)};function l(u){u.forEach(h=>{const f=__(h);f==null||f.removeEventListener("scroll",r)})}},[r,t]),x.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>Cc(o,l),Ls):jO(t):Ls,[t,e])}function K1(t,e){e===void 0&&(e=[]);const n=x.useRef(null);return x.useEffect(()=>{n.current=null},e),x.useEffect(()=>{const i=t!==Ls;i&&!n.current&&(n.current=t),!i&&n.current&&(n.current=null)},[t]),n.current?zp(t,n.current):Ls}function GQ(t){x.useEffect(()=>{if(!Dg)return;const e=t.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function zO(t){return x.useMemo(()=>t?gQ(t):null,[t])}const W1=[];function $Q(t,e){e===void 0&&(e=Kd);const[n]=t,i=zO(n?Mi(n):null),[r,o]=x.useState(W1);function l(){o(()=>t.length?t.map(h=>LO(h)?i:new fw(e(h),h)):W1)}const u=gw({callback:l});return so(()=>{u==null||u.disconnect(),l(),t.forEach(h=>u==null?void 0:u.observe(h))},[t]),r}function KQ(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Gd(e)?e:t}function WQ(t){let{measure:e}=t;const[n,i]=x.useState(null),r=x.useCallback(f=>{for(const{target:p}of f)if(Gd(p)){i(y=>{const _=e(p);return y?{...y,width:_.width,height:_.height}:_});break}},[e]),o=gw({callback:r}),l=x.useCallback(f=>{const p=KQ(f);o==null||o.disconnect(),p&&(o==null||o.observe(p)),i(p?e(p):null)},[e,o]),[u,h]=zY(l);return x.useMemo(()=>({nodeRef:u,rect:n,setRef:h}),[n,u,h])}const YQ=[{sensor:pw,options:{}},{sensor:FO,options:{}}],QQ={current:{}},Qm={draggable:{measure:F1},droppable:{measure:F1,strategy:fd.WhileDragging,frequency:F0.Optimized},dragOverlay:{measure:Kd}};class Fh extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,i;return(n=(i=this.get(e))==null?void 0:i.node.current)!=null?n:void 0}}const XQ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Fh,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:qp},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qm,measureDroppableContainers:qp,windowRect:null,measuringScheduled:!1},ZQ={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:qp,draggableNodes:new Map,over:null,measureDroppableContainers:qp},qO=x.createContext(ZQ),HO=x.createContext(XQ);function JQ(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Fh}}}function eX(t,e){switch(e.type){case si.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case si.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case si.DragEnd:case si.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case si.RegisterDroppable:{const{element:n}=e,{id:i}=n,r=new Fh(t.droppable.containers);return r.set(i,n),{...t,droppable:{...t.droppable,containers:r}}}case si.SetDroppableDisabled:{const{id:n,key:i,disabled:r}=e,o=t.droppable.containers.get(n);if(!o||i!==o.key)return t;const l=new Fh(t.droppable.containers);return l.set(n,{...o,disabled:r}),{...t,droppable:{...t.droppable,containers:l}}}case si.UnregisterDroppable:{const{id:n,key:i}=e,r=t.droppable.containers.get(n);if(!r||i!==r.key)return t;const o=new Fh(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function tX(t){let{disabled:e}=t;const{active:n,activatorEvent:i,draggableNodes:r}=x.useContext(qO),o=L0(i),l=L0(n==null?void 0:n.id);return x.useEffect(()=>{if(!e&&!i&&o&&l!=null){if(!NO(o)||document.activeElement===o.target)return;const u=r.get(l);if(!u)return;const{activatorNode:h,node:f}=u;if(!h.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[h.current,f.current]){if(!p)continue;const y=GY(p);if(y){y.focus();break}}})}},[i,e,r,l,o]),null}function nX(t,e){let{transform:n,...i}=e;return t!=null&&t.length?t.reduce((r,o)=>o({transform:r,...i}),n):n}function iX(t){return x.useMemo(()=>({draggable:{...Qm.draggable,...t==null?void 0:t.draggable},droppable:{...Qm.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Qm.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function sX(t){let{activeNode:e,measure:n,initialRect:i,config:r=!0}=t;const o=x.useRef(!1),{x:l,y:u}=typeof r=="boolean"?{x:r,y:r}:r;so(()=>{if(!l&&!u||!e){o.current=!1;return}if(o.current||!i)return;const f=e==null?void 0:e.node.current;if(!f||f.isConnected===!1)return;const p=n(f),y=MO(p,i);if(l||(y.x=0),u||(y.y=0),o.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const _=PO(f);_&&_.scrollBy({top:y.y,left:y.x})}},[e,l,u,i,n])}const rX=x.createContext({...Ls,scaleX:1,scaleY:1});var La;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(La||(La={}));const aX=x.memo(function(e){var n,i,r,o;let{id:l,accessibility:u,autoScroll:h=!0,children:f,sensors:p=YQ,collisionDetection:y=cQ,measuring:_,modifiers:E,...S}=e;const R=x.useReducer(eX,void 0,JQ),[I,P]=R,[F,O]=XY(),[q,G]=x.useState(La.Uninitialized),Y=q===La.Initialized,{draggable:{active:L,nodes:C,translate:M},droppable:{containers:k}}=I,j=L!=null?C.get(L):null,B=x.useRef({initial:null,translated:null}),V=x.useMemo(()=>{var Fe;return L!=null?{id:L,data:(Fe=j==null?void 0:j.data)!=null?Fe:QQ,rect:B}:null},[L,j]),ve=x.useRef(null),[we,J]=x.useState(null),[te,ue]=x.useState(null),be=CO(S,Object.values(S)),ie=hw("DndDescribedBy",l),ye=x.useMemo(()=>k.getEnabled(),[k]),me=iX(_),{droppableRects:de,measureDroppableContainers:qe,measuringScheduled:ct}=jQ(ye,{dragging:Y,dependencies:[M.x,M.y],config:me.droppable}),rt=LQ(C,L),Vt=x.useMemo(()=>te?V0(te):null,[te]),Ae=Ke(),Ve=UQ(rt,me.draggable.measure);sX({activeNode:L!=null?C.get(L):null,config:Ae.layoutShiftCompensation,initialRect:Ve,measure:me.draggable.measure});const Re=G1(rt,me.draggable.measure,Ve),je=G1(rt?rt.parentElement:null),Ee=x.useRef({activatorEvent:null,active:null,activeNode:rt,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_e=k.getNodeFor((n=Ee.current.over)==null?void 0:n.id),ut=WQ({measure:me.dragOverlay.measure}),jt=(i=ut.nodeRef.current)!=null?i:rt,Nn=Y?(r=ut.rect)!=null?r:Re:null,bt=!!(ut.nodeRef.current&&ut.rect),zn=zQ(bt?null:Re),gn=zO(jt?Mi(jt):null),en=qQ(Y?_e??rt:null),Tn=$Q(en),Ei=nX(E,{transform:{x:M.x-zn.x,y:M.y-zn.y,scaleX:1,scaleY:1},activatorEvent:te,active:V,activeNodeRect:Re,containerNodeRect:je,draggingNodeRect:Nn,over:Ee.current.over,overlayNodeRect:ut.rect,scrollableAncestors:en,scrollableAncestorRects:Tn,windowRect:gn}),Pi=Vt?Cc(Vt,M):null,js=HQ(en),mr=K1(js),Ft=K1(js,[Re]),Ye=Cc(Ei,mr),sn=Nn?dQ(Nn,Ei):null,Bt=V&&sn?y({active:V,collisionRect:sn,droppableRects:de,droppableContainers:ye,pointerCoordinates:Pi}):null,bs=aQ(Bt,"id"),[wi,Qi]=x.useState(null),Es=bt?Ei:Cc(Ei,Ft),K=uQ(Es,(o=wi==null?void 0:wi.rect)!=null?o:null,Re),le=x.useRef(null),Ie=x.useCallback((Fe,wt)=>{let{sensor:Ce,options:cn}=wt;if(ve.current==null)return;const We=C.get(ve.current);if(!We)return;const Oe=Fe.nativeEvent,et=new Ce({active:ve.current,activeNode:We,event:Oe,options:cn,context:Ee,onAbort(Te){if(!C.get(Te))return;const{onDragAbort:at}=be.current,zt={id:Te};at==null||at(zt),F({type:"onDragAbort",event:zt})},onPending(Te,Ze,at,zt){if(!C.get(Te))return;const{onDragPending:Xi}=be.current,Sn={id:Te,constraint:Ze,initialCoordinates:at,offset:zt};Xi==null||Xi(Sn),F({type:"onDragPending",event:Sn})},onStart(Te){const Ze=ve.current;if(Ze==null)return;const at=C.get(Ze);if(!at)return;const{onDragStart:zt}=be.current,Oi={activatorEvent:Oe,active:{id:Ze,data:at.data,rect:B}};dh.unstable_batchedUpdates(()=>{zt==null||zt(Oi),G(La.Initializing),P({type:si.DragStart,initialCoordinates:Te,active:Ze}),F({type:"onDragStart",event:Oi}),J(le.current),ue(Oe)})},onMove(Te){P({type:si.DragMove,coordinates:Te})},onEnd:At(si.DragEnd),onCancel:At(si.DragCancel)});le.current=et;function At(Te){return async function(){const{active:at,collisions:zt,over:Oi,scrollAdjustedTranslate:Xi}=Ee.current;let Sn=null;if(at&&Xi){const{cancelDrop:Zi}=be.current;Sn={activatorEvent:Oe,active:at,collisions:zt,delta:Xi,over:Oi},Te===si.DragEnd&&typeof Zi=="function"&&await Promise.resolve(Zi(Sn))&&(Te=si.DragCancel)}ve.current=null,dh.unstable_batchedUpdates(()=>{P({type:Te}),G(La.Uninitialized),Qi(null),J(null),ue(null),le.current=null;const Zi=Te===si.DragEnd?"onDragEnd":"onDragCancel";if(Sn){const ki=be.current[Zi];ki==null||ki(Sn),F({type:Zi,event:Sn})}})}}},[C]),Ue=x.useCallback((Fe,wt)=>(Ce,cn)=>{const We=Ce.nativeEvent,Oe=C.get(cn);if(ve.current!==null||!Oe||We.dndKit||We.defaultPrevented)return;const et={active:Oe};Fe(Ce,wt.options,et)===!0&&(We.dndKit={capturedBy:wt.sensor},ve.current=cn,Ie(Ce,wt))},[C,Ie]),ht=VQ(p,Ue);GQ(p),so(()=>{Re&&q===La.Initializing&&G(La.Initialized)},[Re,q]),x.useEffect(()=>{const{onDragMove:Fe}=be.current,{active:wt,activatorEvent:Ce,collisions:cn,over:We}=Ee.current;if(!wt||!Ce)return;const Oe={active:wt,activatorEvent:Ce,collisions:cn,delta:{x:Ye.x,y:Ye.y},over:We};dh.unstable_batchedUpdates(()=>{Fe==null||Fe(Oe),F({type:"onDragMove",event:Oe})})},[Ye.x,Ye.y]),x.useEffect(()=>{const{active:Fe,activatorEvent:wt,collisions:Ce,droppableContainers:cn,scrollAdjustedTranslate:We}=Ee.current;if(!Fe||ve.current==null||!wt||!We)return;const{onDragOver:Oe}=be.current,et=cn.get(bs),At=et&&et.rect.current?{id:et.id,rect:et.rect.current,data:et.data,disabled:et.disabled}:null,Te={active:Fe,activatorEvent:wt,collisions:Ce,delta:{x:We.x,y:We.y},over:At};dh.unstable_batchedUpdates(()=>{Qi(At),Oe==null||Oe(Te),F({type:"onDragOver",event:Te})})},[bs]),so(()=>{Ee.current={activatorEvent:te,active:V,activeNode:rt,collisionRect:sn,collisions:Bt,droppableRects:de,draggableNodes:C,draggingNode:jt,draggingNodeRect:Nn,droppableContainers:k,over:wi,scrollableAncestors:en,scrollAdjustedTranslate:Ye},B.current={initial:Nn,translated:sn}},[V,rt,Bt,sn,C,jt,Nn,de,k,wi,en,Ye]),PQ({...Ae,delta:M,draggingRect:sn,pointerCoordinates:Pi,scrollableAncestors:en,scrollableAncestorRects:Tn});const Et=x.useMemo(()=>({active:V,activeNode:rt,activeNodeRect:Re,activatorEvent:te,collisions:Bt,containerNodeRect:je,dragOverlay:ut,draggableNodes:C,droppableContainers:k,droppableRects:de,over:wi,measureDroppableContainers:qe,scrollableAncestors:en,scrollableAncestorRects:Tn,measuringConfiguration:me,measuringScheduled:ct,windowRect:gn}),[V,rt,Re,te,Bt,je,ut,C,k,de,wi,qe,en,Tn,me,ct,gn]),Ge=x.useMemo(()=>({activatorEvent:te,activators:ht,active:V,activeNodeRect:Re,ariaDescribedById:{draggable:ie},dispatch:P,draggableNodes:C,over:wi,measureDroppableContainers:qe}),[te,ht,V,Re,P,ie,C,wi,qe]);return gt.createElement(DO.Provider,{value:O},gt.createElement(qO.Provider,{value:Ge},gt.createElement(HO.Provider,{value:Et},gt.createElement(rX.Provider,{value:K},f)),gt.createElement(tX,{disabled:(u==null?void 0:u.restoreFocus)===!1})),gt.createElement(eQ,{...u,hiddenTextDescribedById:ie}));function Ke(){const Fe=(we==null?void 0:we.autoScrollEnabled)===!1,wt=typeof h=="object"?h.enabled===!1:h===!1,Ce=Y&&!Fe&&!wt;return typeof h=="object"?{...h,enabled:Ce}:{enabled:Ce}}});function oX(){return x.useContext(HO)}function GO(t,e,n){const i=t.slice();return i.splice(n<0?i.length+n:n,0,i.splice(e,1)[0]),i}function lX(t,e){return t.reduce((n,i,r)=>{const o=e.get(i);return o&&(n[r]=o),n},Array(t.length))}function cX(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function uX(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const $O=t=>{let{rects:e,activeIndex:n,overIndex:i,index:r}=t;const o=GO(e,i,n),l=e[r],u=o[r];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},Nm={scaleX:1,scaleY:1},hX=t=>{var e;let{activeIndex:n,activeNodeRect:i,index:r,rects:o,overIndex:l}=t;const u=(e=o[n])!=null?e:i;if(!u)return null;if(r===n){const f=o[l];return f?{x:0,y:n<l?f.top+f.height-(u.top+u.height):f.top-u.top,...Nm}:null}const h=dX(o,r,n);return r>n&&r<=l?{x:0,y:-u.height-h,...Nm}:r<n&&r>=l?{x:0,y:u.height+h,...Nm}:{x:0,y:0,...Nm}};function dX(t,e,n){const i=t[e],r=t[e-1],o=t[e+1];return i?n<e?r?i.top-(r.top+r.height):o?o.top-(i.top+i.height):0:o?o.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const KO="Sortable",fX=gt.createContext({activeIndex:-1,containerId:KO,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:$O,disabled:{draggable:!1,droppable:!1}});function mX(t){let{children:e,id:n,items:i,strategy:r=$O,disabled:o=!1}=t;const{active:l,dragOverlay:u,droppableRects:h,over:f,measureDroppableContainers:p}=oX(),y=hw(KO,n),_=u.rect!==null,E=x.useMemo(()=>i.map(Y=>typeof Y=="object"&&"id"in Y?Y.id:Y),[i]),S=l!=null,R=l?E.indexOf(l.id):-1,I=f?E.indexOf(f.id):-1,P=x.useRef(E),F=!cX(E,P.current),O=I!==-1&&R===-1||F,q=uX(o);so(()=>{F&&S&&p(E)},[F,E,S,p]),x.useEffect(()=>{P.current=E},[E]);const G=x.useMemo(()=>({activeIndex:R,containerId:y,disabled:q,disableTransforms:O,items:E,overIndex:I,useDragOverlay:_,sortedRects:lX(E,h),strategy:r}),[R,y,q.draggable,q.droppable,O,E,I,h,_,r]);return gt.createElement(fX.Provider,{value:G},e)}St.Down,St.Right,St.Up,St.Left;Z1.register(tI,J1,eI);const Y1=t=>t.trim().toLowerCase(),pX=()=>{const t=fg(),e=gN(),n=hl(),[i,r]=x.useState(null),[o,l]=x.useState([]),[u,h]=x.useState([]),[f,p]=x.useState([]),[y,_]=x.useState([]),[E,S]=x.useState(""),[R,I]=x.useState("analytics"),[P,F]=x.useState(!1),[O,q]=x.useState(null),[G,Y]=x.useState("weekly"),[L,C]=x.useState([]),[M,k]=x.useState({}),[j,B]=x.useState(0),[V,ve]=x.useState(0),[we,J]=x.useState(!1),[te,ue]=x.useState(null),[be,ie]=x.useState(null),[ye,me]=x.useState(new Date),[de,qe]=x.useState([]),[ct,rt]=x.useState(!1),[Vt,Ae]=x.useState(!1),[Ve,Re]=x.useState([]),[je,Ee]=x.useState([]),[_e,ut]=x.useState(window.innerWidth>=768),[jt,Nn]=x.useState(window.innerWidth<768);x.useEffect(()=>{const K=()=>{Nn(window.innerWidth<768)};return window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),x.useEffect(()=>(jt&&_e?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[jt,_e]);const bt=x.useRef(new Map),zn=x.useRef(new Set),gn=x.useRef(0);x.useEffect(()=>{const K=hb(e,le=>{le?r(le):n("/login")});return()=>K()},[e,n]),x.useEffect(()=>{if(!i)return;console.log("User in Admin:",i);const K=bh(mn(t,"drivers"),Ge=>{const Ke=Ge.docs.map(Ce=>({id:Ce.id,...Ce.data()}));console.log(" Firestore snapshot received - Total drivers:",Ge.docs.length),console.log(" All drivers data:",Ke.map(Ce=>({id:Ce.id,name:Ce.name,email:Ce.email,verified:Ce.verified,createdAt:Ce.createdAt})));const Fe=Ke.filter(Ce=>Ce.verified===!0),wt=Ke.filter(Ce=>Ce.verified===!1);if(console.log(" Verified drivers:",Fe.length,Fe.map(Ce=>({id:Ce.id,name:Ce.name,verified:Ce.verified}))),console.log(" Pending drivers:",wt.length,wt.map(Ce=>({id:Ce.id,name:Ce.name,verified:Ce.verified}))),l(Fe),h(wt),wt.length>gn.current){const Ce=wt.length-gn.current;console.log(" New pending requests detected:",Ce),Be(`New pending registration request${Ce>1?"s":""} (${Ce})`)}gn.current=wt.length},Ge=>{console.error(" Error fetching drivers:",Ge),Be.error("Error fetching drivers: "+Ge.message)}),le=Fr(mn(t,"queues"),vh("joinedAt","asc")),Ie=bh(le,async Ge=>{const Ke=Ge.docs.map(We=>({id:We.id,...We.data()}));p(Ke);const Fe=new Set(Ke.map(We=>We.driverId)),wt=zn.current,Ce=Array.from(wt).filter(We=>!Fe.has(We)),cn=Array.from(Fe);for(const We of Ce){const Oe=bt.current.get(We);Oe&&clearTimeout(Oe);const et=$e(t,"drivers",We),At=await Nd(et);if(At.exists()&&At.data().status==="offline")continue;try{await Kt(et,{status:"in ride",leftAt:Hi()},{merge:!0})}catch(Ze){Be.error("Failed to update driver status to Left the queue (In Ride): "+Ze.message)}const Te=setTimeout(async()=>{try{await Kt(et,{status:"offline"},{merge:!0}),Be.success(`Driver ${We} status changed to Offline after 1 minute of leaving queue.`)}catch(Ze){Be.error("Failed to update driver status to Offline: "+Ze.message)}bt.current.delete(We)},6e4);bt.current.set(We,Te)}for(const We of cn){const Oe=bt.current.get(We);Oe&&(clearTimeout(Oe),bt.current.delete(We));const et=$e(t,"drivers",We);try{await Kt(et,{status:"waiting"},{merge:!0})}catch(At){Be.error("Failed to update driver status to In Queue: "+At.message)}}zn.current=Fe},Ge=>{Be.error("Error fetching queue: "+Ge.message)}),Ue=Fr(mn(t,"ride_logs"),Ko("status","!=","completed")),ht=bh(Ue,Ge=>{const Ke=Ge.docs.map(Fe=>({id:Fe.id,...Fe.data()}));Re(Ke)},Ge=>{console.error("Error fetching active rides:",Ge)}),Et=bh(Fr(mn(t,"adminAccessLogs"),vh("timestamp","desc")),Ge=>{_(Ge.docs.map(Ke=>({id:Ke.id,...Ke.data()})))},Ge=>{Be.error("Error fetching logs: "+Ge.message)});return()=>{K(),Ie(),ht(),Et(),bt.current.forEach(Ge=>clearTimeout(Ge)),bt.current.clear()}},[t,i]);const en=nQ(tQ(pw)),Tn=async K=>{const{active:le,over:Ie}=K;if(!Ie||le.id===Ie.id)return;const Ue=f.findIndex(Ke=>Ke.driverId===le.id),ht=f.findIndex(Ke=>Ke.driverId===Ie.id);if(Ue===-1||ht===-1)return;const Et=GO(f,Ue,ht);p(Et);const Ge=cB(t);Et.forEach((Ke,Fe)=>{const wt=$e(t,"queues",Ke.driverId);Ge.update(wt,{order:Fe})});try{await Ge.commit(),Be.success("Queue reordered successfully")}catch(Ke){Be.error("Failed to reorder queue: "+Ke.message)}},Ei=async K=>{try{await qr($e(t,"drivers",K)),Be.success("Driver deleted");const le=o.find(Ie=>Ie.id===K);await Kt($e(mn(t,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Deleted driver: ${le==null?void 0:le.name} (${le==null?void 0:le.plate})`,timestamp:Hi()})}catch{Be.error("Error deleting driver")}},Pi=async K=>{try{await HU(e,K),Be.success("Password reset email sent"),await Kt($e(mn(t,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Sent password reset email to: ${K}`,timestamp:Hi()})}catch{Be.error("Error sending reset email")}},js=async K=>{try{await Kt($e(t,"queues",K.id),{driverId:K.id,name:K.name,plateNumber:K.plate,joinedAt:Hi(),order:f.length}),Be.success(`${K.name} added to queue`),await Kt($e(mn(t,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Added driver to queue: ${K.name} (${K.plate})`,timestamp:Hi()})}catch(le){Be.error("Failed to add to queue: "+le.message)}},mr=async K=>{try{await qr($e(t,"queues",K)),Be.success("Driver removed from queue");const le=o.find(Ie=>Ie.id===K);await Kt($e(mn(t,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Removed driver from queue: ${le==null?void 0:le.name} (${le==null?void 0:le.plate})`,timestamp:Hi()})}catch(le){Be.error("Failed to remove from queue: "+le.message)}},Ft=o.filter(K=>{var le,Ie;return((le=K.name)==null?void 0:le.toLowerCase().includes(E.toLowerCase()))||((Ie=K.plate)==null?void 0:Ie.toLowerCase().includes(E.toLowerCase()))}),Ye=K=>{const le=o.find(Ie=>Ie.id===K);return le?le.status==="waiting"?"In Queue":le.status==="in ride"?"Left the queue (In Ride)":(le.status==="offline","Offline"):"Offline"},sn=async()=>{try{const K=e.currentUser;if(K){const le=$e(t,"queues",K.uid);try{await qr(le)}catch{}const Ie=$e(t,"drivers",K.uid);await Kt(Ie,{status:"offline"},{merge:!0})}await op(e),Be.success("Logged out"),n("/login")}catch{Be.error("Logout failed")}},Bt=K=>K?new Date(K*1e3).toLocaleString():"No date",bs=async()=>{try{const K=Fr(mn(t,"ride_logs"),vh("timestamp","desc")),Ie=(await ed(K)).docs.map(Oe=>({id:Oe.id,...Oe.data()}));console.log("Fetched ride_logs:",Ie);const Ue=new Date;let ht,Et=[];if(G==="custom"&&te&&be)Et=Ie.filter(Oe=>{var At,Te;const et=(At=Oe.startedAt)!=null&&At.toDate?Oe.startedAt.toDate():new Date(((Te=Oe.startedAt)==null?void 0:Te.seconds)*1e3);return et>=te&&et<=be});else{switch(G){case"daily":ht=new Date(Ue.getTime()-24*60*60*1e3);break;case"weekly":ht=new Date(Ue.getTime()-7*24*60*60*1e3);break;case"monthly":ht=new Date(Ue.getFullYear(),Ue.getMonth()-1,Ue.getDate());break;case"annually":ht=new Date(Ue.getFullYear()-1,Ue.getMonth(),Ue.getDate());break;default:ht=new Date(Ue.getTime()-7*24*60*60*1e3)}Et=Ie.filter(Oe=>{var At,Te;return((At=Oe.startedAt)!=null&&At.toDate?Oe.startedAt.toDate():new Date(((Te=Oe.startedAt)==null?void 0:Te.seconds)*1e3))>=ht})}const Ge={};let Ke=0,Fe=0;o.forEach(Oe=>{const et=Et.filter(Ze=>Ze.driverId===Oe.id),At=et.reduce((Ze,at)=>{const Oi=(at.dropoffName||"").trim(),Xi={};Object.entries(dd).forEach(([Zi,ki])=>{Xi[Y1(Zi)]=ki});const Sn=Xi[Y1(Oi)]||0;return Ze+Sn},0),Te=et.length;Ke+=At,Fe+=Te,Ge[Oe.id]=[{label:"Rides",earnings:Te,rides:Te},{label:"Earnings",earnings:At,rides:Te}]});const wt=Et.filter(Oe=>Oe.status==="completed").length,cn=[...o.map((Oe,et)=>{var at,zt;const At=Ge[Oe.id];if(!At)return null;const Te=((at=At[1])==null?void 0:at.earnings)||0,Ze=((zt=At[0])==null?void 0:zt.rides)||0;return{label:Oe.name,earnings:Te,rides:Ze}}).filter(Boolean)].sort((Oe,et)=>et.earnings-Oe.earnings);C(cn);const We=cn.map((Oe,et)=>`hsl(${cn.length>1?120-et/(cn.length-1)*120:120}, 70%, 50%)`);Ee(We),k(Ge),B(Ke),ve(Fe)}catch(K){Be.error("Failed to fetch analytics: "+K.message)}},wi=async()=>{Ae(!0);try{const K=Fr(mn(t,"ride_logs"),vh("startedAt","desc")),Ie=(await ed(K)).docs.map(Ue=>({id:Ue.id,...Ue.data()}));qe(Ie),rt(!0)}catch(K){Be.error("Failed to fetch destination history: "+K.message)}finally{Ae(!1)}};x.useEffect(()=>{R==="analytics"&&i&&bs()},[R,G,i,ye]);const Qi=(K,le)=>{ue(K),ie(le),Y("custom"),J(!1),bs()},Es=()=>{Y("weekly"),ue(null),ie(null),J(!1),bs()};return w.jsxs("div",{className:"min-h-screen bg-gray-100",children:[w.jsx("div",{className:`fixed top-0 left-0 h-full bg-gray-100 text-gray-900 transition-all duration-300 overflow-hidden overscroll-none z-10 ${_e?"w-full md:w-64":"w-0"}`,children:w.jsxs("div",{className:"p-4 h-full flex flex-col",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-xl font-bold",children:"Admin Panel"}),w.jsx("button",{onClick:()=>ut(!1),className:"p-1 hover:bg-gray-200 rounded",children:""})]}),w.jsx("nav",{className:"space-y-2 flex-1 overflow-hidden",children:[{type:"analytics",label:"Analytics",icon:n8},{type:"drivers",label:"Drivers",icon:S8},{type:"queue",label:"Queue",icon:g8},{type:"status",label:"Status",icon:e8},{type:"logs",label:"Logs",icon:l8},{type:"history",label:"History",icon:d8},{type:"pending",label:"Pending",icon:a8}].map(({type:K,label:le,icon:Ie})=>w.jsxs("button",{onClick:()=>I(K),className:`w-full text-left px-3 py-2 rounded flex items-center gap-2 ${R===K?"bg-blue-600 text-white":"hover:bg-gray-200"}`,children:[w.jsx(Ie,{size:18}),le,K==="pending"&&u.length>0&&w.jsx("span",{className:"ml-auto bg-red-600 text-xs rounded-full px-1.5",children:u.length})]},K))}),w.jsx("div",{className:"mt-auto",children:w.jsxs("button",{onClick:sn,className:"w-full px-3 py-2 rounded bg-red-600 hover:bg-red-700 text-white flex items-center gap-2",children:[w.jsx(b8,{size:18}),"Logout"]})})]})}),w.jsxs("div",{className:`p-4 text-gray-900 ${_e?"md:ml-64":""} ${jt&&_e?"overflow-hidden":""}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("button",{onClick:()=>ut(!_e),className:"p-2 bg-gray-200 rounded hover:bg-gray-300",children:""})}),w.jsx("span",{className:"text-lg text-gray-600",children:new Date().toLocaleDateString("en-US",{month:"long"})+": "+new Date().getDate()+", "+new Date().getFullYear()})]}),R==="drivers"&&w.jsxs(w.Fragment,{children:[w.jsx("input",{type:"text",placeholder:"Search by name or plate",value:E,onChange:K=>S(K.target.value),className:"p-2 w-full text-black rounded mb-4"}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"bg-gray-50 text-left",children:[w.jsx("th",{className:"p-2",children:"Name"}),w.jsx("th",{children:"Plate"}),w.jsx("th",{children:"Status"}),w.jsx("th",{children:"Email"}),w.jsx("th",{className:"text-right pr-4",children:"Actions"})]})}),w.jsx("tbody",{children:Ft.map(K=>w.jsxs("tr",{className:"border-t border-gray-300",children:[w.jsx("td",{className:"p-2",children:K.name}),w.jsx("td",{children:K.plate}),w.jsx("td",{children:Ye(K.id)}),w.jsx("td",{children:K.email}),w.jsxs("td",{className:"space-x-2 text-right pr-4",children:[w.jsx("button",{onClick:()=>{q(K),F(!0)},className:"text-blue-400",children:"Edit"}),w.jsx("button",{onClick:()=>Ei(K.id),className:"text-red-400",children:"Delete"}),w.jsx("button",{onClick:()=>Pi(K.email),className:"text-purple-400",children:"Reset"}),f.some(le=>le.driverId===K.id)?w.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to remove ${K.name} from the queue?`)&&mr(K.id)},className:"text-red-400",children:"Remove from Queue"}):w.jsx("button",{onClick:()=>js(K),className:"text-green-400",children:"Add to Queue"})]})]},K.id))})]})})]}),R==="queue"&&w.jsxs("div",{className:"bg-white p-4 rounded mt-4 border border-gray-300 shadow-sm",children:[w.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Driver Queue"}),w.jsx(aX,{sensors:en,collisionDetection:oQ,onDragEnd:Tn,children:w.jsx(mX,{items:f.map(K=>K.driverId),strategy:hX,children:w.jsx("ul",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:f.map(K=>{const le=o.find(Ue=>Ue.id===K.driverId),Ie=Ye(K.driverId);return w.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded cursor-move border border-gray-200",children:[w.jsxs("span",{children:[(le==null?void 0:le.name)??K.name," (",(le==null?void 0:le.plate)??K.plate,")"]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:`text-sm font-medium ${Ie==="In Queue"?"text-green-600":Ie==="Left the queue (In Ride)"?"text-yellow-600":"text-red-600"}`,children:Ie}),w.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to remove ${K.name} from the queue?`)&&mr(K.driverId)},className:"text-red-600",children:"Remove"})]})]},K.driverId)})})})})]}),R==="status"&&w.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[w.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-900",children:"Driver Status"}),w.jsxs("div",{className:"mb-6",children:[w.jsx("h3",{className:"text-md font-semibold mb-2 text-green-600",children:"In Queue"}),w.jsx("ul",{className:"space-y-2",children:o.filter(K=>K.status==="waiting").sort((K,le)=>{var ht,Et,Ge,Ke;const Ie=((Et=(ht=f.find(Fe=>Fe.driverId===K.id))==null?void 0:ht.joinedAt)==null?void 0:Et.seconds)||0,Ue=((Ke=(Ge=f.find(Fe=>Fe.driverId===le.id))==null?void 0:Ge.joinedAt)==null?void 0:Ke.seconds)||0;return Ie-Ue}).map(K=>w.jsx("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200",children:w.jsxs("span",{children:[K.name," (",K.plate,") -"," ",w.jsx("span",{className:"font-semibold text-green-600",children:"In Queue"})]})},K.id))})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("h3",{className:"text-md font-semibold mb-2 text-yellow-600",children:"In Ride"}),w.jsx("ul",{className:"space-y-2",children:o.filter(K=>K.status==="in ride").sort((K,le)=>{var ht,Et;const Ie=((ht=K.leftAt)==null?void 0:ht.seconds)||0,Ue=((Et=le.leftAt)==null?void 0:Et.seconds)||0;return Ie-Ue}).map(K=>{var Ue;const le=K.selectedDestination||"Unknown",Ie=Bt((Ue=K.leftAt)==null?void 0:Ue.seconds);return w.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200",children:[w.jsxs("span",{children:[K.name," (",K.plate,") -"," ",w.jsxs("span",{className:"font-semibold text-yellow-600",children:["In route to ",le]})]}),w.jsx("span",{className:"text-sm text-gray-500",children:Ie})]},K.id)})})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-md font-semibold mb-2 text-red-600",children:"Offline"}),w.jsx("ul",{className:"space-y-2",children:o.filter(K=>K.status==="offline").sort((K,le)=>K.name.localeCompare(le.name)).map(K=>w.jsx("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200",children:w.jsxs("span",{children:[K.name," (",K.plate,") -"," ",w.jsx("span",{className:"font-semibold text-red-600",children:"Offline"})]})},K.id))})]})]}),R==="logs"&&w.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[w.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Admin Activity Logs"}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"bg-gray-50 text-left",children:[w.jsx("th",{className:"p-2",children:"Actions"}),w.jsx("th",{className:"p-2",children:"Date and Time"})]})}),w.jsx("tbody",{children:y.map(K=>{var le;return w.jsxs("tr",{className:"border-t border-gray-300",children:[w.jsxs("td",{className:"p-2",children:[w.jsx("strong",{children:K.email}),": ",K.action]}),w.jsx("td",{className:"p-2",children:(le=K.timestamp)!=null&&le.seconds?Bt(K.timestamp.seconds):"No time"})]},K.id)})})]})})]}),R==="history"&&w.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[w.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Driver History"}),w.jsx("button",{onClick:wi,disabled:Vt,className:"mb-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:Vt?"Loading...":"View Destination History"}),w.jsx("div",{className:"overflow-y-auto max-h-[400px] space-y-2",children:o.map(K=>{var le;return w.jsx("div",{className:"border-b border-gray-300 py-1",children:w.jsxs("p",{className:"text-sm text-gray-900",children:[w.jsx("strong",{children:K.name}),"  ",K.plate,"  Registered on:"," ",Bt((le=K.createdAt)==null?void 0:le.seconds)]})},K.id)})}),ct&&w.jsxs("div",{className:"mt-4",children:[w.jsx("h3",{className:"text-md font-semibold mb-2 text-gray-900",children:"Destination History (Chronological)"}),de.length===0?w.jsx("p",{className:"text-gray-500",children:"No rides found."}):w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden border border-gray-300",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"bg-gray-50 text-left",children:[w.jsx("th",{className:"p-2",children:"Driver Name"}),w.jsx("th",{children:"Plate Number"}),w.jsx("th",{children:"Destination"}),w.jsx("th",{children:"Date and Time"})]})}),w.jsx("tbody",{children:de.map(K=>{var Ue,ht;const le=o.find(Et=>Et.id===K.driverId),Ie=(Ue=K.startedAt)!=null&&Ue.toDate?K.startedAt.toDate():new Date(((ht=K.startedAt)==null?void 0:ht.seconds)*1e3);return w.jsxs("tr",{className:"border-t border-gray-300",children:[w.jsx("td",{className:"p-2 text-gray-900",children:(le==null?void 0:le.name)||"Unknown Driver"}),w.jsx("td",{className:"text-gray-900",children:(le==null?void 0:le.plate)||"N/A"}),w.jsx("td",{className:"text-gray-900",children:K.dropoffName}),w.jsx("td",{className:"text-gray-900",children:Ie.toLocaleString()})]},K.id)})})]})})]})]}),R==="pending"&&w.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[w.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Pending Registration Requests"}),u.length===0?w.jsx("p",{className:"text-gray-500",children:"No pending requests."}):w.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden border border-gray-300",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"bg-gray-50 text-left",children:[w.jsx("th",{className:"p-2",children:"Name"}),w.jsx("th",{children:"Plate"}),w.jsx("th",{children:"Email"}),w.jsx("th",{children:"Phone"}),w.jsx("th",{children:"Status"}),w.jsx("th",{className:"text-right pr-4",children:"Actions"})]})}),w.jsx("tbody",{children:u.map(K=>w.jsxs("tr",{className:"border-t border-gray-300",children:[w.jsx("td",{className:"p-2 text-gray-900",children:K.name}),w.jsx("td",{className:"text-gray-900",children:K.plate}),w.jsx("td",{className:"text-gray-900",children:K.email}),w.jsx("td",{className:"text-gray-900",children:K.phone||"N/A"}),w.jsx("td",{className:"text-gray-900",children:"Pending"}),w.jsxs("td",{className:"space-x-2 text-right pr-4",children:[w.jsx("button",{onClick:async()=>{try{await Kt($e(t,"drivers",K.id),{verified:!0},{merge:!0}),Be.success(`Verified ${K.name}`),await Kt($e(mn(t,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Approved driver registration: ${K.name} (${K.plate})`,timestamp:Hi()})}catch(le){Be.error("Failed to verify: "+le.message)}},className:"text-green-600",children:"Approve"}),w.jsx("button",{onClick:async()=>{try{await qr($e(t,"drivers",K.id)),Be.success(`Rejected and deleted ${K.name}`),await Kt($e(mn(t,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Rejected driver registration: ${K.name} (${K.plate})`,timestamp:Hi()})}catch(le){Be.error("Failed to delete: "+le.message)}},className:"text-red-600",children:"Reject"})]})]},K.id))})]})]}),R==="analytics"&&w.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[w.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-900",children:"Analytics Dashboard"}),w.jsxs("div",{className:"flex gap-2 mb-6",children:[["daily","weekly","monthly","annually"].map(K=>w.jsx("button",{onClick:()=>Y(K),className:`px-4 py-2 rounded ${G===K?"bg-blue-600":"bg-gray-200"}`,children:K.charAt(0).toUpperCase()+K.slice(1)},K)),w.jsx("button",{onClick:()=>J(!0),className:`px-4 py-2 rounded ${G==="custom"?"bg-blue-600":"bg-gray-200"}`,children:"Custom"})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[w.jsxs("div",{className:"bg-white p-4 rounded border border-gray-300",children:[w.jsx("h3",{className:"text-md font-semibold mb-2 text-gray-900",children:"Overall Statistics"}),L.length>0&&w.jsx(RL,{data:{labels:L.map(K=>K.label),datasets:[{data:L.map(K=>K.earnings),backgroundColor:je,borderColor:je,borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:K=>`${K.label}: ${K.parsed}`}}}}}),w.jsxs("div",{className:"mt-4 text-sm font-bold",children:[w.jsxs("p",{children:[w.jsx("span",{className:"text-gray-900",children:"Total Rides:"})," ",V]}),w.jsxs("p",{children:[w.jsx("span",{className:"text-gray-900",children:"Total Earnings:"})," ",j]})]})]}),w.jsxs("div",{className:"bg-white p-4 rounded border border-gray-300",children:[w.jsx("h3",{className:"text-md font-semibold mb-2 text-gray-900",children:"Driver Performance"}),w.jsxs("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:[[...o].sort((K,le)=>{var ht,Et,Ge,Ke;const Ie=((Et=(ht=M[K.id])==null?void 0:ht[1])==null?void 0:Et.earnings)||0;return(((Ke=(Ge=M[le.id])==null?void 0:Ge[1])==null?void 0:Ke.earnings)||0)-Ie}).map((K,le,Ie)=>{var Et,Ge;const Ue=M[K.id];if(!Ue||Ue.length===0)return null;const ht=Ie.length>1?120-le/(Ie.length-1)*120:120;return w.jsxs("div",{className:"p-3 rounded font-medium mb-2",style:{backgroundColor:`hsl(${ht}, 70%, 50%)`},children:[w.jsxs("h4",{className:"font-medium mb-2 text-white",children:[K.name," (",K.plate,")"]}),w.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[w.jsx("div",{children:w.jsxs("span",{className:"text-white",children:["Rides: ",((Et=Ue[0])==null?void 0:Et.rides)||0]})}),w.jsx("div",{children:w.jsxs("span",{className:"text-white",children:["Earnings: ",((Ge=Ue[1])==null?void 0:Ge.earnings)||0]})})]})]},K.id)}),w.jsxs("div",{className:"bg-gray-50 p-3 rounded font-bold border-t border-gray-300",children:[w.jsx("h4",{className:"mb-2 text-gray-900",children:"Total for All Drivers"}),w.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-900",children:"Total Rides:"})," ",V]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-900",children:"Total Earnings:"})," ",j]})]})]})]})]})]})]}),P&&O&&w.jsx(FY,{driver:O,onClose:()=>F(!1),onSaveSuccess:()=>F(!1),user:i}),we&&w.jsx(xO,{isOpen:we,onClose:()=>J(!1),onApply:Qi,onClear:Es})]})]})},gX=()=>w.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-gray-900 bg-gray-100",children:[w.jsx("h1",{className:"text-6xl font-bold mb-4",children:"404"}),w.jsx("p",{className:"text-lg mb-6",children:"Page not found"}),w.jsx("a",{href:"/home",className:"text-blue-400 underline",children:"Go back to Home"})]}),w_="agduwaadmin@gmail.com",yX=()=>{const{user:t,loading:e}=Hd(),n=hl();x.useEffect(()=>{var i;if(!e){const r=((i=t==null?void 0:t.email)==null?void 0:i.toLowerCase())===(w_==null?void 0:w_.toLowerCase());(!t||!r)&&n("/home")}},[t,e,n])},vX="agduwaadmin@gmail.com",_X=({children:t})=>{var i;const{loading:e,user:n}=Hd();return yX(),e?w.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-900 text-white",children:[w.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-white border-t-transparent rounded-full"}),w.jsx("span",{className:"ml-3",children:"Checking access..."})]}):!n||((i=n.email)==null?void 0:i.toLowerCase())!==vX.toLowerCase()?w.jsx(Dm,{to:"/",replace:!0}):w.jsx(w.Fragment,{children:t})},T_="agduwaadmin@gmail.com".trim().toLowerCase(),bX=()=>{var E;const[t,e]=x.useState(null),[n,i]=x.useState(null),[r,o]=x.useState(!0),[l,u]=x.useState(!1),[h,f]=x.useState("loading"),p=fg();if(x.useEffect(()=>{const S=hb(Gi,async R=>{var I;if(R){e(R);const P=((I=R.email)==null?void 0:I.trim().toLowerCase())||"";console.log("ADMIN_EMAIL:",T_),console.log("Logged in user email:",P);const F=P===T_;if(console.log("Is admin user:",F),F){try{await Hm(mn(p,"adminAccessLogs"),{email:R.email,uid:R.uid,accessedAt:Hi()})}catch(O){console.error("Error logging admin access:",O)}u(!0),i(!0),setTimeout(()=>{u(!1)},2e3),localStorage.setItem("driver",JSON.stringify({id:R.uid,email:R.email,verified:!0}))}else try{const O=await Nd($e(p,"drivers",R.uid));if(O.exists()){const q=O.data();q.verified?(u(!0),i(!0),setTimeout(()=>{u(!1)},2e3),localStorage.setItem("driver",JSON.stringify({id:R.uid,email:R.email,...q}))):(await Gi.signOut(),e(null),i(!1),Fn.error("Your account is not verified by admin yet. Please wait for approval."),localStorage.removeItem("driver"))}else await Gi.signOut(),e(null),i(!1),Fn.error("No profile found for this account."),localStorage.removeItem("driver")}catch(O){console.error("Error checking verification:",O),await Gi.signOut(),e(null),i(!1),Fn.error("Error verifying account."),localStorage.removeItem("driver")}}else e(null),i(!1),localStorage.removeItem("driver");o(!1)});return()=>S()},[p]),r)return w.jsxs("div",{className:"h-screen bg-white relative",children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:`
      .loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .car {
        animation: speeder 0.4s linear infinite;
        width: 900px;
        height: 900px;
      }
      @media (max-width: 768px) {
        .car {
          width: 300px;
          height: 300px;
        }
      }
      @keyframes speeder {
        0% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        10% {
          transform: translate(-1px, -3px) rotate(-1deg);
        }
        20% {
          transform: translate(-2px, 0px) rotate(1deg);
        }
        30% {
          transform: translate(1px, 2px) rotate(0deg);
        }
        40% {
          transform: translate(1px, -1px) rotate(1deg);
        }
        50% {
          transform: translate(-1px, 3px) rotate(-1deg);
        }
        60% {
          transform: translate(-1px, 1px) rotate(0deg);
        }
        70% {
          transform: translate(3px, 1px) rotate(-1deg);
        }
        80% {
          transform: translate(-2px, -1px) rotate(1deg);
        }
        90% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        100% {
          transform: translate(1px, -2px) rotate(-1deg);
        }
      }
    `}}),w.jsx("div",{className:"loader",children:w.jsx("img",{src:"/img/vecteezy_sports-car-logo-icon-motor-vehicle-silhouette-emblems-auto_.jpg",alt:"car",className:"car"})})]});if(l)return w.jsxs("div",{className:"h-screen bg-white relative",children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:`
      .loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .car {
        animation: speeder 0.4s linear infinite;
        width: 900px;
        height: 900px;
      }
      @media (max-width: 768px) {
        .car {
          width: 300px;
          height: 300px;
        }
      }
      @keyframes speeder {
        0% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        10% {
          transform: translate(-1px, -3px) rotate(-1deg);
        }
        20% {
          transform: translate(-2px, 0px) rotate(1deg);
        }
        30% {
          transform: translate(1px, 2px) rotate(0deg);
        }
        40% {
          transform: translate(1px, -1px) rotate(1deg);
        }
        50% {
          transform: translate(-1px, 3px) rotate(-1deg);
        }
        60% {
          transform: translate(-1px, 1px) rotate(0deg);
        }
        70% {
          transform: translate(3px, 1px) rotate(-1deg);
        }
        80% {
          transform: translate(-2px, -1px) rotate(1deg);
        }
        90% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        100% {
          transform: translate(1px, -2px) rotate(-1deg);
        }
      }
    `}}),w.jsx("div",{className:"loader",children:w.jsx("img",{src:"/img/vecteezy_sports-car-logo-icon-motor-vehicle-silhouette-emblems-auto_.jpg",alt:"car",className:"car"})})]});const y=!!t&&n===!0&&!l,_=((E=t==null?void 0:t.email)==null?void 0:E.trim().toLowerCase())===T_;return w.jsxs(SW,{children:[w.jsx(aw,{position:"top-center"}),w.jsxs(DV,{children:[w.jsx(Rs,{path:"/",element:y?_?w.jsx(Dm,{to:"/admin",replace:!0}):w.jsx(Dm,{to:"/home",replace:!0}):w.jsx(pY,{})}),w.jsx(Rs,{path:"/driver/:driverId",element:w.jsx(LY,{})}),y&&w.jsxs(Rs,{element:w.jsx(kY,{}),children:[w.jsx(Rs,{path:"/home",element:w.jsx(AW,{})}),w.jsx(Rs,{path:"/history",element:w.jsx(bY,{})}),w.jsx(Rs,{path:"/analytics",element:w.jsx(PY,{})}),w.jsx(Rs,{path:"/profile",element:w.jsx(NY,{})})]}),y&&w.jsx(Rs,{path:"/admin",element:w.jsx(_X,{children:w.jsx(pX,{})})}),!y&&w.jsx(Rs,{path:"*",element:w.jsx(Dm,{to:"/"})}),w.jsx(Rs,{path:"*",element:w.jsx(gX,{})})]})]})};LL.createRoot(document.getElementById("root")).render(w.jsx(gt.StrictMode,{children:w.jsx(e4,{children:w.jsxs(_Y,{children:[w.jsx(bX,{}),w.jsx(aw,{position:"top-center",toastOptions:{duration:4e3}})," "]})})}));
