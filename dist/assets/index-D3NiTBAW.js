var rF=Object.defineProperty;var oF=(e,t,n)=>t in e?rF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var kt=(e,t,n)=>oF(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function a_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q0={exports:{}},Ed={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BR;function aF(){if(BR)return Ed;BR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var c in s)c!=="key"&&(r[c]=s[c])}else r=s;return s=r.ref,{$$typeof:e,type:i,key:a,ref:s!==void 0?s:null,props:r}}return Ed.Fragment=t,Ed.jsx=n,Ed.jsxs=n,Ed}var zR;function lF(){return zR||(zR=1,q0.exports=aF()),q0.exports}var S=lF(),$0={exports:{}},le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HR;function cF(){if(HR)return le;HR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=m&&z[m]||z["@@iterator"],typeof z=="function"?z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,E={};function x(z,it,lt){this.props=z,this.context=it,this.refs=E,this.updater=lt||v}x.prototype.isReactComponent={},x.prototype.setState=function(z,it){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,it,"setState")},x.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function C(){}C.prototype=x.prototype;function P(z,it,lt){this.props=z,this.context=it,this.refs=E,this.updater=lt||v}var N=P.prototype=new C;N.constructor=P,T(N,x.prototype),N.isPureReactComponent=!0;var q=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function k(z,it,lt,ct,vt,Nt){return lt=Nt.ref,{$$typeof:e,type:z,key:it,ref:lt!==void 0?lt:null,props:Nt}}function D(z,it){return k(z.type,it,void 0,void 0,void 0,z.props)}function M(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function V(z){var it={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(lt){return it[lt]})}var B=/\/+/g;function $(z,it){return typeof z=="object"&&z!==null&&z.key!=null?V(""+z.key):it.toString(36)}function H(){}function Et(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(H,H):(z.status="pending",z.then(function(it){z.status==="pending"&&(z.status="fulfilled",z.value=it)},function(it){z.status==="pending"&&(z.status="rejected",z.reason=it)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function _t(z,it,lt,ct,vt){var Nt=typeof z;(Nt==="undefined"||Nt==="boolean")&&(z=null);var wt=!1;if(z===null)wt=!0;else switch(Nt){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(z.$$typeof){case e:case t:wt=!0;break;case f:return wt=z._init,_t(wt(z._payload),it,lt,ct,vt)}}if(wt)return vt=vt(z),wt=ct===""?"."+$(z,0):ct,q(vt)?(lt="",wt!=null&&(lt=wt.replace(B,"$&/")+"/"),_t(vt,it,lt,"",function(Ct){return Ct})):vt!=null&&(M(vt)&&(vt=D(vt,lt+(vt.key==null||z&&z.key===vt.key?"":(""+vt.key).replace(B,"$&/")+"/")+wt)),it.push(vt)),1;wt=0;var Bt=ct===""?".":ct+":";if(q(z))for(var Tt=0;Tt<z.length;Tt++)ct=z[Tt],Nt=Bt+$(ct,Tt),wt+=_t(ct,it,lt,Nt,vt);else if(Tt=y(z),typeof Tt=="function")for(z=Tt.call(z),Tt=0;!(ct=z.next()).done;)ct=ct.value,Nt=Bt+$(ct,Tt++),wt+=_t(ct,it,lt,Nt,vt);else if(Nt==="object"){if(typeof z.then=="function")return _t(Et(z),it,lt,ct,vt);throw it=String(z),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return wt}function X(z,it,lt){if(z==null)return z;var ct=[],vt=0;return _t(z,ct,"","",function(Nt){return it.call(lt,Nt,vt++)}),ct}function nt(z){if(z._status===-1){var it=z._result;it=it(),it.then(function(lt){(z._status===0||z._status===-1)&&(z._status=1,z._result=lt)},function(lt){(z._status===0||z._status===-1)&&(z._status=2,z._result=lt)}),z._status===-1&&(z._status=0,z._result=it)}if(z._status===1)return z._result.default;throw z._result}var yt=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function xt(){}return le.Children={map:X,forEach:function(z,it,lt){X(z,function(){it.apply(this,arguments)},lt)},count:function(z){var it=0;return X(z,function(){it++}),it},toArray:function(z){return X(z,function(it){return it})||[]},only:function(z){if(!M(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},le.Component=x,le.Fragment=n,le.Profiler=s,le.PureComponent=P,le.StrictMode=i,le.Suspense=u,le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,le.__COMPILER_RUNTIME={__proto__:null,c:function(z){return F.H.useMemoCache(z)}},le.cache=function(z){return function(){return z.apply(null,arguments)}},le.cloneElement=function(z,it,lt){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ct=T({},z.props),vt=z.key,Nt=void 0;if(it!=null)for(wt in it.ref!==void 0&&(Nt=void 0),it.key!==void 0&&(vt=""+it.key),it)!G.call(it,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&it.ref===void 0||(ct[wt]=it[wt]);var wt=arguments.length-2;if(wt===1)ct.children=lt;else if(1<wt){for(var Bt=Array(wt),Tt=0;Tt<wt;Tt++)Bt[Tt]=arguments[Tt+2];ct.children=Bt}return k(z.type,vt,void 0,void 0,Nt,ct)},le.createContext=function(z){return z={$$typeof:a,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:r,_context:z},z},le.createElement=function(z,it,lt){var ct,vt={},Nt=null;if(it!=null)for(ct in it.key!==void 0&&(Nt=""+it.key),it)G.call(it,ct)&&ct!=="key"&&ct!=="__self"&&ct!=="__source"&&(vt[ct]=it[ct]);var wt=arguments.length-2;if(wt===1)vt.children=lt;else if(1<wt){for(var Bt=Array(wt),Tt=0;Tt<wt;Tt++)Bt[Tt]=arguments[Tt+2];vt.children=Bt}if(z&&z.defaultProps)for(ct in wt=z.defaultProps,wt)vt[ct]===void 0&&(vt[ct]=wt[ct]);return k(z,Nt,void 0,void 0,null,vt)},le.createRef=function(){return{current:null}},le.forwardRef=function(z){return{$$typeof:c,render:z}},le.isValidElement=M,le.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:nt}},le.memo=function(z,it){return{$$typeof:h,type:z,compare:it===void 0?null:it}},le.startTransition=function(z){var it=F.T,lt={};F.T=lt;try{var ct=z(),vt=F.S;vt!==null&&vt(lt,ct),typeof ct=="object"&&ct!==null&&typeof ct.then=="function"&&ct.then(xt,yt)}catch(Nt){yt(Nt)}finally{F.T=it}},le.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},le.use=function(z){return F.H.use(z)},le.useActionState=function(z,it,lt){return F.H.useActionState(z,it,lt)},le.useCallback=function(z,it){return F.H.useCallback(z,it)},le.useContext=function(z){return F.H.useContext(z)},le.useDebugValue=function(){},le.useDeferredValue=function(z,it){return F.H.useDeferredValue(z,it)},le.useEffect=function(z,it,lt){var ct=F.H;if(typeof lt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ct.useEffect(z,it)},le.useId=function(){return F.H.useId()},le.useImperativeHandle=function(z,it,lt){return F.H.useImperativeHandle(z,it,lt)},le.useInsertionEffect=function(z,it){return F.H.useInsertionEffect(z,it)},le.useLayoutEffect=function(z,it){return F.H.useLayoutEffect(z,it)},le.useMemo=function(z,it){return F.H.useMemo(z,it)},le.useOptimistic=function(z,it){return F.H.useOptimistic(z,it)},le.useReducer=function(z,it,lt){return F.H.useReducer(z,it,lt)},le.useRef=function(z){return F.H.useRef(z)},le.useState=function(z){return F.H.useState(z)},le.useSyncExternalStore=function(z,it,lt){return F.H.useSyncExternalStore(z,it,lt)},le.useTransition=function(){return F.H.useTransition()},le.version="19.1.0",le}var qR;function kw(){return qR||(qR=1,$0.exports=cF()),$0.exports}var R=kw();const xe=a_(R);var W0={exports:{}},xd={},G0={exports:{}},Y0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $R;function uF(){return $R||($R=1,function(e){function t(X,nt){var yt=X.length;X.push(nt);t:for(;0<yt;){var xt=yt-1>>>1,z=X[xt];if(0<s(z,nt))X[xt]=nt,X[yt]=z,yt=xt;else break t}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var nt=X[0],yt=X.pop();if(yt!==nt){X[0]=yt;t:for(var xt=0,z=X.length,it=z>>>1;xt<it;){var lt=2*(xt+1)-1,ct=X[lt],vt=lt+1,Nt=X[vt];if(0>s(ct,yt))vt<z&&0>s(Nt,ct)?(X[xt]=Nt,X[vt]=yt,xt=vt):(X[xt]=ct,X[lt]=yt,xt=lt);else if(vt<z&&0>s(Nt,yt))X[xt]=Nt,X[vt]=yt,xt=vt;else break t}}return nt}function s(X,nt){var yt=X.sortIndex-nt.sortIndex;return yt!==0?yt:X.id-nt.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var a=Date,c=a.now();e.unstable_now=function(){return a.now()-c}}var u=[],h=[],f=1,m=null,y=3,v=!1,T=!1,E=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function q(X){for(var nt=n(h);nt!==null;){if(nt.callback===null)i(h);else if(nt.startTime<=X)i(h),nt.sortIndex=nt.expirationTime,t(u,nt);else break;nt=n(h)}}function F(X){if(E=!1,q(X),!T)if(n(u)!==null)T=!0,G||(G=!0,$());else{var nt=n(h);nt!==null&&_t(F,nt.startTime-X)}}var G=!1,k=-1,D=5,M=-1;function V(){return x?!0:!(e.unstable_now()-M<D)}function B(){if(x=!1,G){var X=e.unstable_now();M=X;var nt=!0;try{t:{T=!1,E&&(E=!1,P(k),k=-1),v=!0;var yt=y;try{e:{for(q(X),m=n(u);m!==null&&!(m.expirationTime>X&&V());){var xt=m.callback;if(typeof xt=="function"){m.callback=null,y=m.priorityLevel;var z=xt(m.expirationTime<=X);if(X=e.unstable_now(),typeof z=="function"){m.callback=z,q(X),nt=!0;break e}m===n(u)&&i(u),q(X)}else i(u);m=n(u)}if(m!==null)nt=!0;else{var it=n(h);it!==null&&_t(F,it.startTime-X),nt=!1}}break t}finally{m=null,y=yt,v=!1}nt=void 0}}finally{nt?$():G=!1}}}var $;if(typeof N=="function")$=function(){N(B)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Et=H.port2;H.port1.onmessage=B,$=function(){Et.postMessage(null)}}else $=function(){C(B,0)};function _t(X,nt){k=C(function(){X(e.unstable_now())},nt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(X){switch(y){case 1:case 2:case 3:var nt=3;break;default:nt=y}var yt=y;y=nt;try{return X()}finally{y=yt}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(X,nt){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var yt=y;y=X;try{return nt()}finally{y=yt}},e.unstable_scheduleCallback=function(X,nt,yt){var xt=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?xt+yt:xt):yt=xt,X){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=yt+z,X={id:f++,callback:nt,priorityLevel:X,startTime:yt,expirationTime:z,sortIndex:-1},yt>xt?(X.sortIndex=yt,t(h,X),n(u)===null&&X===n(h)&&(E?(P(k),k=-1):E=!0,_t(F,yt-xt))):(X.sortIndex=z,t(u,X),T||v||(T=!0,G||(G=!0,$()))),X},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(X){var nt=y;return function(){var yt=y;y=nt;try{return X.apply(this,arguments)}finally{y=yt}}}}(Y0)),Y0}var WR;function hF(){return WR||(WR=1,G0.exports=uF()),G0.exports}var K0={exports:{}},Li={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GR;function dF(){if(GR)return Li;GR=1;var e=kw();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(u,h,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:u,containerInfo:h,implementation:f}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Li.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Li.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return r(u,h,null,f)},Li.flushSync=function(u){var h=a.T,f=i.p;try{if(a.T=null,i.p=2,u)return u()}finally{a.T=h,i.p=f,i.d.f()}},Li.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(u,h))},Li.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},Li.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,m=c(f,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?i.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):f==="script"&&i.d.X(u,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Li.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=c(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(u)},Li.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,m=c(f,h.crossOrigin);i.d.L(u,f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Li.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=c(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(u)},Li.requestFormReset=function(u){i.d.r(u)},Li.unstable_batchedUpdates=function(u,h){return u(h)},Li.useFormState=function(u,h,f){return a.H.useFormState(u,h,f)},Li.useFormStatus=function(){return a.H.useHostTransitionStatus()},Li.version="19.1.0",Li}var YR;function UP(){if(YR)return K0.exports;YR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),K0.exports=dF(),K0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KR;function fF(){if(KR)return xd;KR=1;var e=hF(),t=kw(),n=UP();function i(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(r(o)!==o)throw Error(i(188))}function u(o){var l=o.alternate;if(!l){if(l=r(o),l===null)throw Error(i(188));return l!==o?null:o}for(var d=o,p=l;;){var _=d.return;if(_===null)break;var b=_.alternate;if(b===null){if(p=_.return,p!==null){d=p;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===d)return c(_),o;if(b===p)return c(_),l;b=b.sibling}throw Error(i(188))}if(d.return!==p.return)d=_,p=b;else{for(var I=!1,L=_.child;L;){if(L===d){I=!0,d=_,p=b;break}if(L===p){I=!0,p=_,d=b;break}L=L.sibling}if(!I){for(L=b.child;L;){if(L===d){I=!0,d=b,p=_;break}if(L===p){I=!0,p=b,d=_;break}L=L.sibling}if(!I)throw Error(i(189))}}if(d.alternate!==p)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),N=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function $(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var H=Symbol.for("react.client.reference");function Et(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===H?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case x:return"Profiler";case E:return"StrictMode";case F:return"Suspense";case G:return"SuspenseList";case M:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case N:return(o.displayName||"Context")+".Provider";case P:return(o._context.displayName||"Context")+".Consumer";case q:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case k:return l=o.displayName||null,l!==null?l:Et(o.type)||"Memo";case D:l=o._payload,o=o._init;try{return Et(o(l))}catch{}}return null}var _t=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},xt=[],z=-1;function it(o){return{current:o}}function lt(o){0>z||(o.current=xt[z],xt[z]=null,z--)}function ct(o,l){z++,xt[z]=o.current,o.current=l}var vt=it(null),Nt=it(null),wt=it(null),Bt=it(null);function Tt(o,l){switch(ct(wt,l),ct(Nt,o),ct(vt,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?mR(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=mR(l),o=gR(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}lt(vt),ct(vt,o)}function Ct(){lt(vt),lt(Nt),lt(wt)}function It(o){o.memoizedState!==null&&ct(Bt,o);var l=vt.current,d=gR(l,o.type);l!==d&&(ct(Nt,o),ct(vt,d))}function zt(o){Nt.current===o&&(lt(vt),lt(Nt)),Bt.current===o&&(lt(Bt),_d._currentValue=yt)}var Pt=Object.prototype.hasOwnProperty,Mt=e.unstable_scheduleCallback,he=e.unstable_cancelCallback,Oe=e.unstable_shouldYield,Ge=e.unstable_requestPaint,de=e.unstable_now,Hn=e.unstable_getCurrentPriorityLevel,En=e.unstable_ImmediatePriority,Ze=e.unstable_UserBlockingPriority,Ve=e.unstable_NormalPriority,Ii=e.unstable_LowPriority,Qi=e.unstable_IdlePriority,zs=e.log,mr=e.unstable_setDisableYieldValue,Je=null,re=null;function fn(o){if(typeof zs=="function"&&mr(o),re&&typeof re.setStrictMode=="function")try{re.setStrictMode(Je,o)}catch{}}var Ye=Math.clz32?Math.clz32:Di,ls=Math.log,Qn=Math.LN2;function Di(o){return o>>>=0,o===0?32:31-(ls(o)/Qn|0)|0}var Es=256,Z=4194304;function gt(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ft(o,l,d){var p=o.pendingLanes;if(p===0)return 0;var _=0,b=o.suspendedLanes,I=o.pingedLanes;o=o.warmLanes;var L=p&134217727;return L!==0?(p=L&~b,p!==0?_=gt(p):(I&=L,I!==0?_=gt(I):d||(d=L&~o,d!==0&&(_=gt(d))))):(L=p&~b,L!==0?_=gt(L):I!==0?_=gt(I):d||(d=p&~o,d!==0&&(_=gt(d)))),_===0?0:l!==0&&l!==_&&(l&b)===0&&(b=_&-_,d=l&-l,b>=d||b===32&&(d&4194048)!==0)?l:_}function Kt(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function fe(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ke(){var o=Es;return Es<<=1,(Es&4194048)===0&&(Es=256),o}function te(){var o=Z;return Z<<=1,(Z&62914560)===0&&(Z=4194304),o}function ie(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function Gt(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ae(o,l,d,p,_,b){var I=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var L=o.entanglements,W=o.expirationTimes,et=o.hiddenUpdates;for(d=I&~d;0<d;){var ut=31-Ye(d),ft=1<<ut;L[ut]=0,W[ut]=-1;var st=et[ut];if(st!==null)for(et[ut]=null,ut=0;ut<st.length;ut++){var ot=st[ut];ot!==null&&(ot.lane&=-536870913)}d&=~ft}p!==0&&jt(o,p,0),b!==0&&_===0&&o.tag!==0&&(o.suspendedLanes|=b&~(I&~l))}function jt(o,l,d){o.pendingLanes|=l,o.suspendedLanes&=~l;var p=31-Ye(l);o.entangledLanes|=l,o.entanglements[p]=o.entanglements[p]|1073741824|d&4194090}function xn(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var p=31-Ye(d),_=1<<p;_&l|o[p]&l&&(o[p]|=l),d&=~_}}function oe(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ht(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function pe(){var o=nt.p;return o!==0?o:(o=window.event,o===void 0?32:kR(o.type))}function je(o,l){var d=nt.p;try{return nt.p=o,l()}finally{nt.p=d}}var Lt=Math.random().toString(36).slice(2),se="__reactFiber$"+Lt,ye="__reactProps$"+Lt,tn="__reactContainer$"+Lt,Mi="__reactEvents$"+Lt,Ni="__reactListeners$"+Lt,Ln="__reactHandles$"+Lt,Zi="__reactResources$"+Lt,Ji="__reactMarker$"+Lt;function gr(o){delete o[se],delete o[ye],delete o[Mi],delete o[Ni],delete o[Ln]}function Hs(o){var l=o[se];if(l)return l;for(var d=o.parentNode;d;){if(l=d[tn]||d[se]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=bR(o);o!==null;){if(d=o[se])return d;o=bR(o)}return l}o=d,d=o.parentNode}return null}function xs(o){if(o=o[se]||o[tn]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function Ss(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(i(33))}function Zn(o){var l=o[Zi];return l||(l=o[Zi]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ke(o){o[Ji]=!0}var yr=new Set,qs={};function Pi(o,l){As(o,l),As(o+"Capture",l)}function As(o,l){for(qs[o]=l,o=0;o<l.length;o++)yr.add(l[o])}var jc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uc={},$s={};function bi(o){return Pt.call($s,o)?!0:Pt.call(Uc,o)?!1:jc.test(o)?$s[o]=!0:(Uc[o]=!0,!1)}function ts(o,l,d){if(bi(l))if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+d)}}function Jn(o,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+d)}}function an(o,l,d,p){if(p===null)o.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttributeNS(l,d,""+p)}}var Cs,es;function ti(o){if(Cs===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Cs=l&&l[1]||"",es=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cs+o+es}var yo=!1;function _o(o,l){if(!o||yo)return"";yo=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(ot){var st=ot}Reflect.construct(o,[],ft)}else{try{ft.call()}catch(ot){st=ot}o.call(ft.prototype)}}else{try{throw Error()}catch(ot){st=ot}(ft=o())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(ot){if(ot&&st&&typeof ot.stack=="string")return[ot.stack,st.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=p.DetermineComponentFrameRoot(),I=b[0],L=b[1];if(I&&L){var W=I.split(`
`),et=L.split(`
`);for(_=p=0;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;for(;_<et.length&&!et[_].includes("DetermineComponentFrameRoot");)_++;if(p===W.length||_===et.length)for(p=W.length-1,_=et.length-1;1<=p&&0<=_&&W[p]!==et[_];)_--;for(;1<=p&&0<=_;p--,_--)if(W[p]!==et[_]){if(p!==1||_!==1)do if(p--,_--,0>_||W[p]!==et[_]){var ut=`
`+W[p].replace(" at new "," at ");return o.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",o.displayName)),ut}while(1<=p&&0<=_);break}}}finally{yo=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?ti(d):""}function jr(o){switch(o.tag){case 26:case 27:case 5:return ti(o.type);case 16:return ti("Lazy");case 13:return ti("Suspense");case 19:return ti("SuspenseList");case 0:case 15:return _o(o.type,!1);case 11:return _o(o.type.render,!1);case 1:return _o(o.type,!0);case 31:return ti("Activity");default:return""}}function ai(o){try{var l="";do l+=jr(o),o=o.return;while(o);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function qn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function vo(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Al(o){var l=vo(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,b=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return _.call(this)},set:function(I){p=""+I,b.call(this,I)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Ur(o){o._valueTracker||(o._valueTracker=Al(o))}function bo(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),p="";return o&&(p=vo(o)?o.checked?"true":"false":o.value),o=p,o!==d?(l.setValue(o),!0):!1}function Ws(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Gs=/[\n"\\]/g;function In(o){return o.replace(Gs,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Oi(o,l,d,p,_,b,I,L){o.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.type=I:o.removeAttribute("type"),l!=null?I==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+qn(l)):o.value!==""+qn(l)&&(o.value=""+qn(l)):I!=="submit"&&I!=="reset"||o.removeAttribute("value"),l!=null?vr(o,I,qn(l)):d!=null?vr(o,I,qn(d)):p!=null&&o.removeAttribute("value"),_==null&&b!=null&&(o.defaultChecked=!!b),_!=null&&(o.checked=_&&typeof _!="function"&&typeof _!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?o.name=""+qn(L):o.removeAttribute("name")}function _r(o,l,d,p,_,b,I,L){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(o.type=b),l!=null||d!=null){if(!(b!=="submit"&&b!=="reset"||l!=null))return;d=d!=null?""+qn(d):"",l=l!=null?""+qn(l):d,L||l===o.value||(o.value=l),o.defaultValue=l}p=p??_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=L?o.checked:!!p,o.defaultChecked=!!p,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(o.name=I)}function vr(o,l,d){l==="number"&&Ws(o.ownerDocument)===o||o.defaultValue===""+d||(o.defaultValue=""+d)}function br(o,l,d,p){if(o=o.options,l){l={};for(var _=0;_<d.length;_++)l["$"+d[_]]=!0;for(d=0;d<o.length;d++)_=l.hasOwnProperty("$"+o[d].value),o[d].selected!==_&&(o[d].selected=_),_&&p&&(o[d].defaultSelected=!0)}else{for(d=""+qn(d),l=null,_=0;_<o.length;_++){if(o[_].value===d){o[_].selected=!0,p&&(o[_].defaultSelected=!0);return}l!==null||o[_].disabled||(l=o[_])}l!==null&&(l.selected=!0)}}function ze(o,l,d){if(l!=null&&(l=""+qn(l),l!==o.value&&(o.value=l),d==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=d!=null?""+qn(d):""}function O(o,l,d,p){if(l==null){if(p!=null){if(d!=null)throw Error(i(92));if(_t(p)){if(1<p.length)throw Error(i(93));p=p[0]}d=p}d==null&&(d=""),l=d}d=qn(l),o.defaultValue=d,p=o.textContent,p===d&&p!==""&&p!==null&&(o.value=p)}function U(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var Y=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rt(o,l,d){var p=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":p?o.setProperty(l,d):typeof d!="number"||d===0||Y.has(l)?l==="float"?o.cssFloat=d:o[l]=(""+d).trim():o[l]=d+"px"}function mt(o,l,d){if(l!=null&&typeof l!="object")throw Error(i(62));if(o=o.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var _ in l)p=l[_],l.hasOwnProperty(_)&&d[_]!==p&&rt(o,_,p)}else for(var b in l)l.hasOwnProperty(b)&&rt(o,b,l[b])}function At(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ae=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bn(o){return Dn.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var pn=null;function Sn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var To=null,wo=null;function Dh(o){var l=xs(o);if(l&&(o=l.stateNode)){var d=o[ye]||null;t:switch(o=l.stateNode,l.type){case"input":if(Oi(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+In(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var p=d[l];if(p!==o&&p.form===o.form){var _=p[ye]||null;if(!_)throw Error(i(90));Oi(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(l=0;l<d.length;l++)p=d[l],p.form===o.form&&bo(p)}break t;case"textarea":ze(o,d.value,d.defaultValue);break t;case"select":l=d.value,l!=null&&br(o,!!d.multiple,l,!1)}}}var Fr=!1;function Up(o,l,d){if(Fr)return o(l,d);Fr=!0;try{var p=o(l);return p}finally{if(Fr=!1,(To!==null||wo!==null)&&(Nm(),To&&(l=To,o=wo,wo=To=null,Dh(l),o)))for(l=0;l<o.length;l++)Dh(o[l])}}function Cl(o,l){var d=o.stateNode;if(d===null)return null;var p=d[ye]||null;if(p===null)return null;d=p[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break t;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(i(231,l,typeof d));return d}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ys=!1;if(Tr)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){Ys=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{Ys=!1}var Br=null,ma=null,Eo=null;function Mh(){if(Eo)return Eo;var o,l=ma,d=l.length,p,_="value"in Br?Br.value:Br.textContent,b=_.length;for(o=0;o<d&&l[o]===_[o];o++);var I=d-o;for(p=1;p<=I&&l[d-p]===_[b-p];p++);return Eo=_.slice(o,1<p?1-p:void 0)}function zr(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Hr(){return!0}function Nh(){return!1}function li(o){function l(d,p,_,b,I){this._reactName=d,this._targetInst=_,this.type=p,this.nativeEvent=b,this.target=I,this.currentTarget=null;for(var L in o)o.hasOwnProperty(L)&&(d=o[L],this[L]=d?d(b):b[L]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Hr:Nh,this.isPropagationStopped=Nh,this}return f(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),l}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fc=li(He),Il=f({},He,{view:0,detail:0}),Fp=li(Il),Bc,zc,qr,Dl=f({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==qr&&(qr&&o.type==="mousemove"?(Bc=o.screenX-qr.screenX,zc=o.screenY-qr.screenY):zc=Bc=0,qr=o),Bc)},movementY:function(o){return"movementY"in o?o.movementY:zc}}),Ks=li(Dl),Bp=f({},Dl,{dataTransfer:0}),Z_=li(Bp),Ml=f({},Il,{relatedTarget:0}),Hc=li(Ml),Ph=f({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),qc=li(Ph),zp=f({},He,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),$c=li(zp),J_=f({},He,{data:0}),Oh=li(J_),Nl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kh(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=qp[o])?!!l[o]:!1}function Pl(){return kh}var $p=f({},Il,{key:function(o){if(o.key){var l=Nl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=zr(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Hp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pl,charCode:function(o){return o.type==="keypress"?zr(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?zr(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Wc=li($p),Wp=f({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lh=li(Wp),xo=f({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pl}),Gp=li(xo),Yp=f({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kp=li(Yp),Xp=f({},Dl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Gc=li(Xp),ns=f({},He,{newState:0,oldState:0}),Qp=li(ns),Zp=[9,13,27,32],$r=Tr&&"CompositionEvent"in window,g=null;Tr&&"documentMode"in document&&(g=document.documentMode);var w=Tr&&"TextEvent"in window&&!g,A=Tr&&(!$r||g&&8<g&&11>=g),j=" ",J=!1;function at(o,l){switch(o){case"keyup":return Zp.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bt(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Re=!1;function ei(o,l){switch(o){case"compositionend":return bt(l);case"keypress":return l.which!==32?null:(J=!0,j);case"textInput":return o=l.data,o===j&&J?null:o;default:return null}}function Ie(o,l){if(Re)return o==="compositionend"||!$r&&at(o,l)?(o=Mh(),Eo=ma=Br=null,Re=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return A&&l.locale!=="ko"?null:l.data;default:return null}}var ci={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ni(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!ci[o.type]:l==="textarea"}function So(o,l,d,p){To?wo?wo.push(p):wo=[p]:To=p,l=jm(l,"onChange"),0<l.length&&(d=new Fc("onChange","change",null,d,p),o.push({event:d,listeners:l}))}var Ti=null,Wr=null;function Vh(o){uR(o,0)}function Jp(o){var l=Ss(o);if(bo(l))return o}function MS(o,l){if(o==="change")return l}var NS=!1;if(Tr){var tv;if(Tr){var ev="oninput"in document;if(!ev){var PS=document.createElement("div");PS.setAttribute("oninput","return;"),ev=typeof PS.oninput=="function"}tv=ev}else tv=!1;NS=tv&&(!document.documentMode||9<document.documentMode)}function OS(){Ti&&(Ti.detachEvent("onpropertychange",kS),Wr=Ti=null)}function kS(o){if(o.propertyName==="value"&&Jp(Wr)){var l=[];So(l,Wr,o,Sn(o)),Up(Vh,l)}}function kU(o,l,d){o==="focusin"?(OS(),Ti=l,Wr=d,Ti.attachEvent("onpropertychange",kS)):o==="focusout"&&OS()}function LU(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Jp(Wr)}function VU(o,l){if(o==="click")return Jp(l)}function jU(o,l){if(o==="input"||o==="change")return Jp(l)}function UU(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Rs=typeof Object.is=="function"?Object.is:UU;function jh(o,l){if(Rs(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),p=Object.keys(l);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var _=d[p];if(!Pt.call(l,_)||!Rs(o[_],l[_]))return!1}return!0}function LS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function VS(o,l){var d=LS(o);o=0;for(var p;d;){if(d.nodeType===3){if(p=o+d.textContent.length,o<=l&&p>=l)return{node:d,offset:l-o};o=p}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=LS(d)}}function jS(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?jS(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function US(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Ws(o.document);l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=Ws(o.document)}return l}function nv(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var FU=Tr&&"documentMode"in document&&11>=document.documentMode,Yc=null,iv=null,Uh=null,sv=!1;function FS(o,l,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;sv||Yc==null||Yc!==Ws(p)||(p=Yc,"selectionStart"in p&&nv(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Uh&&jh(Uh,p)||(Uh=p,p=jm(iv,"onSelect"),0<p.length&&(l=new Fc("onSelect","select",null,l,d),o.push({event:l,listeners:p}),l.target=Yc)))}function Ol(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var Kc={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionrun:Ol("Transition","TransitionRun"),transitionstart:Ol("Transition","TransitionStart"),transitioncancel:Ol("Transition","TransitionCancel"),transitionend:Ol("Transition","TransitionEnd")},rv={},BS={};Tr&&(BS=document.createElement("div").style,"AnimationEvent"in window||(delete Kc.animationend.animation,delete Kc.animationiteration.animation,delete Kc.animationstart.animation),"TransitionEvent"in window||delete Kc.transitionend.transition);function kl(o){if(rv[o])return rv[o];if(!Kc[o])return o;var l=Kc[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in BS)return rv[o]=l[d];return o}var zS=kl("animationend"),HS=kl("animationiteration"),qS=kl("animationstart"),BU=kl("transitionrun"),zU=kl("transitionstart"),HU=kl("transitioncancel"),$S=kl("transitionend"),WS=new Map,ov="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ov.push("scrollEnd");function wr(o,l){WS.set(o,l),Pi(l,[o])}var GS=new WeakMap;function Xs(o,l){if(typeof o=="object"&&o!==null){var d=GS.get(o);return d!==void 0?d:(l={value:o,source:l,stack:ai(l)},GS.set(o,l),l)}return{value:o,source:l,stack:ai(l)}}var Qs=[],Xc=0,av=0;function tm(){for(var o=Xc,l=av=Xc=0;l<o;){var d=Qs[l];Qs[l++]=null;var p=Qs[l];Qs[l++]=null;var _=Qs[l];Qs[l++]=null;var b=Qs[l];if(Qs[l++]=null,p!==null&&_!==null){var I=p.pending;I===null?_.next=_:(_.next=I.next,I.next=_),p.pending=_}b!==0&&YS(d,_,b)}}function em(o,l,d,p){Qs[Xc++]=o,Qs[Xc++]=l,Qs[Xc++]=d,Qs[Xc++]=p,av|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function lv(o,l,d,p){return em(o,l,d,p),nm(o)}function Qc(o,l){return em(o,null,null,l),nm(o)}function YS(o,l,d){o.lanes|=d;var p=o.alternate;p!==null&&(p.lanes|=d);for(var _=!1,b=o.return;b!==null;)b.childLanes|=d,p=b.alternate,p!==null&&(p.childLanes|=d),b.tag===22&&(o=b.stateNode,o===null||o._visibility&1||(_=!0)),o=b,b=b.return;return o.tag===3?(b=o.stateNode,_&&l!==null&&(_=31-Ye(d),o=b.hiddenUpdates,p=o[_],p===null?o[_]=[l]:p.push(l),l.lane=d|536870912),b):null}function nm(o){if(50<ud)throw ud=0,p0=null,Error(i(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var Zc={};function qU(o,l,d,p){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(o,l,d,p){return new qU(o,l,d,p)}function cv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ao(o,l){var d=o.alternate;return d===null?(d=Is(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&65011712,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function KS(o,l){o.flags&=65011714;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,l=d.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function im(o,l,d,p,_,b){var I=0;if(p=o,typeof o=="function")cv(o)&&(I=1);else if(typeof o=="string")I=W3(o,d,vt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case M:return o=Is(31,d,l,_),o.elementType=M,o.lanes=b,o;case T:return Ll(d.children,_,b,l);case E:I=8,_|=24;break;case x:return o=Is(12,d,l,_|2),o.elementType=x,o.lanes=b,o;case F:return o=Is(13,d,l,_),o.elementType=F,o.lanes=b,o;case G:return o=Is(19,d,l,_),o.elementType=G,o.lanes=b,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:case N:I=10;break t;case P:I=9;break t;case q:I=11;break t;case k:I=14;break t;case D:I=16,p=null;break t}I=29,d=Error(i(130,o===null?"null":typeof o,"")),p=null}return l=Is(I,d,l,_),l.elementType=o,l.type=p,l.lanes=b,l}function Ll(o,l,d,p){return o=Is(7,o,p,l),o.lanes=d,o}function uv(o,l,d){return o=Is(6,o,null,l),o.lanes=d,o}function hv(o,l,d){return l=Is(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var Jc=[],tu=0,sm=null,rm=0,Zs=[],Js=0,Vl=null,Co=1,Ro="";function jl(o,l){Jc[tu++]=rm,Jc[tu++]=sm,sm=o,rm=l}function XS(o,l,d){Zs[Js++]=Co,Zs[Js++]=Ro,Zs[Js++]=Vl,Vl=o;var p=Co;o=Ro;var _=32-Ye(p)-1;p&=~(1<<_),d+=1;var b=32-Ye(l)+_;if(30<b){var I=_-_%5;b=(p&(1<<I)-1).toString(32),p>>=I,_-=I,Co=1<<32-Ye(l)+_|d<<_|p,Ro=b+o}else Co=1<<b|d<<_|p,Ro=o}function dv(o){o.return!==null&&(jl(o,1),XS(o,1,0))}function fv(o){for(;o===sm;)sm=Jc[--tu],Jc[tu]=null,rm=Jc[--tu],Jc[tu]=null;for(;o===Vl;)Vl=Zs[--Js],Zs[Js]=null,Ro=Zs[--Js],Zs[Js]=null,Co=Zs[--Js],Zs[Js]=null}var is=null,Mn=null,Fe=!1,Ul=null,Gr=!1,pv=Error(i(519));function Fl(o){var l=Error(i(418,""));throw zh(Xs(l,o)),pv}function QS(o){var l=o.stateNode,d=o.type,p=o.memoizedProps;switch(l[se]=o,l[ye]=p,d){case"dialog":be("cancel",l),be("close",l);break;case"iframe":case"object":case"embed":be("load",l);break;case"video":case"audio":for(d=0;d<dd.length;d++)be(dd[d],l);break;case"source":be("error",l);break;case"img":case"image":case"link":be("error",l),be("load",l);break;case"details":be("toggle",l);break;case"input":be("invalid",l),_r(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Ur(l);break;case"select":be("invalid",l);break;case"textarea":be("invalid",l),O(l,p.value,p.defaultValue,p.children),Ur(l)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||p.suppressHydrationWarning===!0||pR(l.textContent,d)?(p.popover!=null&&(be("beforetoggle",l),be("toggle",l)),p.onScroll!=null&&be("scroll",l),p.onScrollEnd!=null&&be("scrollend",l),p.onClick!=null&&(l.onclick=Um),l=!0):l=!1,l||Fl(o)}function ZS(o){for(is=o.return;is;)switch(is.tag){case 5:case 13:Gr=!1;return;case 27:case 3:Gr=!0;return;default:is=is.return}}function Fh(o){if(o!==is)return!1;if(!Fe)return ZS(o),Fe=!0,!1;var l=o.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=o.type,d=!(d!=="form"&&d!=="button")||D0(o.type,o.memoizedProps)),d=!d),d&&Mn&&Fl(o),ZS(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));t:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(d=o.data,d==="/$"){if(l===0){Mn=xr(o.nextSibling);break t}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;o=o.nextSibling}Mn=null}}else l===27?(l=Mn,Ma(o.type)?(o=O0,O0=null,Mn=o):Mn=l):Mn=is?xr(o.stateNode.nextSibling):null;return!0}function Bh(){Mn=is=null,Fe=!1}function JS(){var o=Ul;return o!==null&&(hs===null?hs=o:hs.push.apply(hs,o),Ul=null),o}function zh(o){Ul===null?Ul=[o]:Ul.push(o)}var mv=it(null),Bl=null,Io=null;function ga(o,l,d){ct(mv,l._currentValue),l._currentValue=d}function Do(o){o._currentValue=mv.current,lt(mv)}function gv(o,l,d){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===d)break;o=o.return}}function yv(o,l,d,p){var _=o.child;for(_!==null&&(_.return=o);_!==null;){var b=_.dependencies;if(b!==null){var I=_.child;b=b.firstContext;t:for(;b!==null;){var L=b;b=_;for(var W=0;W<l.length;W++)if(L.context===l[W]){b.lanes|=d,L=b.alternate,L!==null&&(L.lanes|=d),gv(b.return,d,o),p||(I=null);break t}b=L.next}}else if(_.tag===18){if(I=_.return,I===null)throw Error(i(341));I.lanes|=d,b=I.alternate,b!==null&&(b.lanes|=d),gv(I,d,o),I=null}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===o){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}}function Hh(o,l,d,p){o=null;for(var _=l,b=!1;_!==null;){if(!b){if((_.flags&524288)!==0)b=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var I=_.alternate;if(I===null)throw Error(i(387));if(I=I.memoizedProps,I!==null){var L=_.type;Rs(_.pendingProps.value,I.value)||(o!==null?o.push(L):o=[L])}}else if(_===Bt.current){if(I=_.alternate,I===null)throw Error(i(387));I.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(o!==null?o.push(_d):o=[_d])}_=_.return}o!==null&&yv(l,o,d,p),l.flags|=262144}function om(o){for(o=o.firstContext;o!==null;){if(!Rs(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function zl(o){Bl=o,Io=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function ki(o){return tA(Bl,o)}function am(o,l){return Bl===null&&zl(o),tA(o,l)}function tA(o,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Io===null){if(o===null)throw Error(i(308));Io=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Io=Io.next=l;return d}var $U=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(d,p){o.push(p)}};this.abort=function(){l.aborted=!0,o.forEach(function(d){return d()})}},WU=e.unstable_scheduleCallback,GU=e.unstable_NormalPriority,ii={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _v(){return{controller:new $U,data:new Map,refCount:0}}function qh(o){o.refCount--,o.refCount===0&&WU(GU,function(){o.controller.abort()})}var $h=null,vv=0,eu=0,nu=null;function YU(o,l){if($h===null){var d=$h=[];vv=0,eu=T0(),nu={status:"pending",value:void 0,then:function(p){d.push(p)}}}return vv++,l.then(eA,eA),l}function eA(){if(--vv===0&&$h!==null){nu!==null&&(nu.status="fulfilled");var o=$h;$h=null,eu=0,nu=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function KU(o,l){var d=[],p={status:"pending",value:null,reason:null,then:function(_){d.push(_)}};return o.then(function(){p.status="fulfilled",p.value=l;for(var _=0;_<d.length;_++)(0,d[_])(l)},function(_){for(p.status="rejected",p.reason=_,_=0;_<d.length;_++)(0,d[_])(void 0)}),p}var nA=X.S;X.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&YU(o,l),nA!==null&&nA(o,l)};var Hl=it(null);function bv(){var o=Hl.current;return o!==null?o:cn.pooledCache}function lm(o,l){l===null?ct(Hl,Hl.current):ct(Hl,l.pool)}function iA(){var o=bv();return o===null?null:{parent:ii._currentValue,pool:o}}var Wh=Error(i(460)),sA=Error(i(474)),cm=Error(i(542)),Tv={then:function(){}};function rA(o){return o=o.status,o==="fulfilled"||o==="rejected"}function um(){}function oA(o,l,d){switch(d=o[d],d===void 0?o.push(l):d!==l&&(l.then(um,um),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,lA(o),o;default:if(typeof l.status=="string")l.then(um,um);else{if(o=cn,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=l,o.status="pending",o.then(function(p){if(l.status==="pending"){var _=l;_.status="fulfilled",_.value=p}},function(p){if(l.status==="pending"){var _=l;_.status="rejected",_.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,lA(o),o}throw Gh=l,Wh}}var Gh=null;function aA(){if(Gh===null)throw Error(i(459));var o=Gh;return Gh=null,o}function lA(o){if(o===Wh||o===cm)throw Error(i(483))}var ya=!1;function wv(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ev(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function _a(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function va(o,l,d){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Xe&2)!==0){var _=p.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),p.pending=l,l=nm(o),YS(o,null,d),l}return em(o,p,l,d),nm(o)}function Yh(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var p=l.lanes;p&=o.pendingLanes,d|=p,l.lanes=d,xn(o,d)}}function xv(o,l){var d=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var _=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var I={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};b===null?_=b=I:b=b.next=I,d=d.next}while(d!==null);b===null?_=b=l:b=b.next=l}else _=b=l;d={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:p.shared,callbacks:p.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}var Sv=!1;function Kh(){if(Sv){var o=nu;if(o!==null)throw o}}function Xh(o,l,d,p){Sv=!1;var _=o.updateQueue;ya=!1;var b=_.firstBaseUpdate,I=_.lastBaseUpdate,L=_.shared.pending;if(L!==null){_.shared.pending=null;var W=L,et=W.next;W.next=null,I===null?b=et:I.next=et,I=W;var ut=o.alternate;ut!==null&&(ut=ut.updateQueue,L=ut.lastBaseUpdate,L!==I&&(L===null?ut.firstBaseUpdate=et:L.next=et,ut.lastBaseUpdate=W))}if(b!==null){var ft=_.baseState;I=0,ut=et=W=null,L=b;do{var st=L.lane&-536870913,ot=st!==L.lane;if(ot?(De&st)===st:(p&st)===st){st!==0&&st===eu&&(Sv=!0),ut!==null&&(ut=ut.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var Xt=o,qt=L;st=l;var sn=d;switch(qt.tag){case 1:if(Xt=qt.payload,typeof Xt=="function"){ft=Xt.call(sn,ft,st);break t}ft=Xt;break t;case 3:Xt.flags=Xt.flags&-65537|128;case 0:if(Xt=qt.payload,st=typeof Xt=="function"?Xt.call(sn,ft,st):Xt,st==null)break t;ft=f({},ft,st);break t;case 2:ya=!0}}st=L.callback,st!==null&&(o.flags|=64,ot&&(o.flags|=8192),ot=_.callbacks,ot===null?_.callbacks=[st]:ot.push(st))}else ot={lane:st,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ut===null?(et=ut=ot,W=ft):ut=ut.next=ot,I|=st;if(L=L.next,L===null){if(L=_.shared.pending,L===null)break;ot=L,L=ot.next,ot.next=null,_.lastBaseUpdate=ot,_.shared.pending=null}}while(!0);ut===null&&(W=ft),_.baseState=W,_.firstBaseUpdate=et,_.lastBaseUpdate=ut,b===null&&(_.shared.lanes=0),Ca|=I,o.lanes=I,o.memoizedState=ft}}function cA(o,l){if(typeof o!="function")throw Error(i(191,o));o.call(l)}function uA(o,l){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)cA(d[o],l)}var iu=it(null),hm=it(0);function hA(o,l){o=Vo,ct(hm,o),ct(iu,l),Vo=o|l.baseLanes}function Av(){ct(hm,Vo),ct(iu,iu.current)}function Cv(){Vo=hm.current,lt(iu),lt(hm)}var ba=0,me=null,en=null,$n=null,dm=!1,su=!1,ql=!1,fm=0,Qh=0,ru=null,XU=0;function Vn(){throw Error(i(321))}function Rv(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!Rs(o[d],l[d]))return!1;return!0}function Iv(o,l,d,p,_,b){return ba=b,me=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,X.H=o===null||o.memoizedState===null?YA:KA,ql=!1,b=d(p,_),ql=!1,su&&(b=fA(l,d,p,_)),dA(o),b}function dA(o){X.H=vm;var l=en!==null&&en.next!==null;if(ba=0,$n=en=me=null,dm=!1,Qh=0,ru=null,l)throw Error(i(300));o===null||ui||(o=o.dependencies,o!==null&&om(o)&&(ui=!0))}function fA(o,l,d,p){me=o;var _=0;do{if(su&&(ru=null),Qh=0,su=!1,25<=_)throw Error(i(301));if(_+=1,$n=en=null,o.updateQueue!=null){var b=o.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}X.H=i3,b=l(d,p)}while(su);return b}function QU(){var o=X.H,l=o.useState()[0];return l=typeof l.then=="function"?Zh(l):l,o=o.useState()[0],(en!==null?en.memoizedState:null)!==o&&(me.flags|=1024),l}function Dv(){var o=fm!==0;return fm=0,o}function Mv(o,l,d){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~d}function Nv(o){if(dm){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}dm=!1}ba=0,$n=en=me=null,su=!1,Qh=fm=0,ru=null}function cs(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?me.memoizedState=$n=o:$n=$n.next=o,$n}function Wn(){if(en===null){var o=me.alternate;o=o!==null?o.memoizedState:null}else o=en.next;var l=$n===null?me.memoizedState:$n.next;if(l!==null)$n=l,en=o;else{if(o===null)throw me.alternate===null?Error(i(467)):Error(i(310));en=o,o={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},$n===null?me.memoizedState=$n=o:$n=$n.next=o}return $n}function Pv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zh(o){var l=Qh;return Qh+=1,ru===null&&(ru=[]),o=oA(ru,o,l),l=me,($n===null?l.memoizedState:$n.next)===null&&(l=l.alternate,X.H=l===null||l.memoizedState===null?YA:KA),o}function pm(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Zh(o);if(o.$$typeof===N)return ki(o)}throw Error(i(438,String(o)))}function Ov(o){var l=null,d=me.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var p=me.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(_){return _.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Pv(),me.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(o),p=0;p<o;p++)d[p]=V;return l.index++,d}function Mo(o,l){return typeof l=="function"?l(o):l}function mm(o){var l=Wn();return kv(l,en,o)}function kv(o,l,d){var p=o.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=d;var _=o.baseQueue,b=p.pending;if(b!==null){if(_!==null){var I=_.next;_.next=b.next,b.next=I}l.baseQueue=_=b,p.pending=null}if(b=o.baseState,_===null)o.memoizedState=b;else{l=_.next;var L=I=null,W=null,et=l,ut=!1;do{var ft=et.lane&-536870913;if(ft!==et.lane?(De&ft)===ft:(ba&ft)===ft){var st=et.revertLane;if(st===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),ft===eu&&(ut=!0);else if((ba&st)===st){et=et.next,st===eu&&(ut=!0);continue}else ft={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},W===null?(L=W=ft,I=b):W=W.next=ft,me.lanes|=st,Ca|=st;ft=et.action,ql&&d(b,ft),b=et.hasEagerState?et.eagerState:d(b,ft)}else st={lane:ft,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},W===null?(L=W=st,I=b):W=W.next=st,me.lanes|=ft,Ca|=ft;et=et.next}while(et!==null&&et!==l);if(W===null?I=b:W.next=L,!Rs(b,o.memoizedState)&&(ui=!0,ut&&(d=nu,d!==null)))throw d;o.memoizedState=b,o.baseState=I,o.baseQueue=W,p.lastRenderedState=b}return _===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function Lv(o){var l=Wn(),d=l.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=o;var p=d.dispatch,_=d.pending,b=l.memoizedState;if(_!==null){d.pending=null;var I=_=_.next;do b=o(b,I.action),I=I.next;while(I!==_);Rs(b,l.memoizedState)||(ui=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),d.lastRenderedState=b}return[b,p]}function pA(o,l,d){var p=me,_=Wn(),b=Fe;if(b){if(d===void 0)throw Error(i(407));d=d()}else d=l();var I=!Rs((en||_).memoizedState,d);I&&(_.memoizedState=d,ui=!0),_=_.queue;var L=yA.bind(null,p,_,o);if(Jh(2048,8,L,[o]),_.getSnapshot!==l||I||$n!==null&&$n.memoizedState.tag&1){if(p.flags|=2048,ou(9,gm(),gA.bind(null,p,_,d,l),null),cn===null)throw Error(i(349));b||(ba&124)!==0||mA(p,l,d)}return d}function mA(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=me.updateQueue,l===null?(l=Pv(),me.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function gA(o,l,d,p){l.value=d,l.getSnapshot=p,_A(l)&&vA(o)}function yA(o,l,d){return d(function(){_A(l)&&vA(o)})}function _A(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!Rs(o,d)}catch{return!0}}function vA(o){var l=Qc(o,2);l!==null&&Os(l,o,2)}function Vv(o){var l=cs();if(typeof o=="function"){var d=o;if(o=d(),ql){fn(!0);try{d()}finally{fn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:o},l}function bA(o,l,d,p){return o.baseState=d,kv(o,en,typeof p=="function"?p:Mo)}function ZU(o,l,d,p,_){if(_m(o))throw Error(i(485));if(o=l.action,o!==null){var b={payload:_,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){b.listeners.push(I)}};X.T!==null?d(!0):b.isTransition=!1,p(b),d=l.pending,d===null?(b.next=l.pending=b,TA(l,b)):(b.next=d.next,l.pending=d.next=b)}}function TA(o,l){var d=l.action,p=l.payload,_=o.state;if(l.isTransition){var b=X.T,I={};X.T=I;try{var L=d(_,p),W=X.S;W!==null&&W(I,L),wA(o,l,L)}catch(et){jv(o,l,et)}finally{X.T=b}}else try{b=d(_,p),wA(o,l,b)}catch(et){jv(o,l,et)}}function wA(o,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){EA(o,l,p)},function(p){return jv(o,l,p)}):EA(o,l,d)}function EA(o,l,d){l.status="fulfilled",l.value=d,xA(l),o.state=d,l=o.pending,l!==null&&(d=l.next,d===l?o.pending=null:(d=d.next,l.next=d,TA(o,d)))}function jv(o,l,d){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=d,xA(l),l=l.next;while(l!==p)}o.action=null}function xA(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function SA(o,l){return l}function AA(o,l){if(Fe){var d=cn.formState;if(d!==null){t:{var p=me;if(Fe){if(Mn){e:{for(var _=Mn,b=Gr;_.nodeType!==8;){if(!b){_=null;break e}if(_=xr(_.nextSibling),_===null){_=null;break e}}b=_.data,_=b==="F!"||b==="F"?_:null}if(_){Mn=xr(_.nextSibling),p=_.data==="F!";break t}}Fl(p)}p=!1}p&&(l=d[0])}}return d=cs(),d.memoizedState=d.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:SA,lastRenderedState:l},d.queue=p,d=$A.bind(null,me,p),p.dispatch=d,p=Vv(!1),b=Hv.bind(null,me,!1,p.queue),p=cs(),_={state:l,dispatch:null,action:o,pending:null},p.queue=_,d=ZU.bind(null,me,_,b,d),_.dispatch=d,p.memoizedState=o,[l,d,!1]}function CA(o){var l=Wn();return RA(l,en,o)}function RA(o,l,d){if(l=kv(o,l,SA)[0],o=mm(Mo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=Zh(l)}catch(I){throw I===Wh?cm:I}else p=l;l=Wn();var _=l.queue,b=_.dispatch;return d!==l.memoizedState&&(me.flags|=2048,ou(9,gm(),JU.bind(null,_,d),null)),[p,b,o]}function JU(o,l){o.action=l}function IA(o){var l=Wn(),d=en;if(d!==null)return RA(l,d,o);Wn(),l=l.memoizedState,d=Wn();var p=d.queue.dispatch;return d.memoizedState=o,[l,p,!1]}function ou(o,l,d,p){return o={tag:o,create:d,deps:p,inst:l,next:null},l=me.updateQueue,l===null&&(l=Pv(),me.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=o.next=o:(p=d.next,d.next=o,o.next=p,l.lastEffect=o),o}function gm(){return{destroy:void 0,resource:void 0}}function DA(){return Wn().memoizedState}function ym(o,l,d,p){var _=cs();p=p===void 0?null:p,me.flags|=o,_.memoizedState=ou(1|l,gm(),d,p)}function Jh(o,l,d,p){var _=Wn();p=p===void 0?null:p;var b=_.memoizedState.inst;en!==null&&p!==null&&Rv(p,en.memoizedState.deps)?_.memoizedState=ou(l,b,d,p):(me.flags|=o,_.memoizedState=ou(1|l,b,d,p))}function MA(o,l){ym(8390656,8,o,l)}function NA(o,l){Jh(2048,8,o,l)}function PA(o,l){return Jh(4,2,o,l)}function OA(o,l){return Jh(4,4,o,l)}function kA(o,l){if(typeof l=="function"){o=o();var d=l(o);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function LA(o,l,d){d=d!=null?d.concat([o]):null,Jh(4,4,kA.bind(null,l,o),d)}function Uv(){}function VA(o,l){var d=Wn();l=l===void 0?null:l;var p=d.memoizedState;return l!==null&&Rv(l,p[1])?p[0]:(d.memoizedState=[o,l],o)}function jA(o,l){var d=Wn();l=l===void 0?null:l;var p=d.memoizedState;if(l!==null&&Rv(l,p[1]))return p[0];if(p=o(),ql){fn(!0);try{o()}finally{fn(!1)}}return d.memoizedState=[p,l],p}function Fv(o,l,d){return d===void 0||(ba&1073741824)!==0?o.memoizedState=l:(o.memoizedState=d,o=BC(),me.lanes|=o,Ca|=o,d)}function UA(o,l,d,p){return Rs(d,l)?d:iu.current!==null?(o=Fv(o,d,p),Rs(o,l)||(ui=!0),o):(ba&42)===0?(ui=!0,o.memoizedState=d):(o=BC(),me.lanes|=o,Ca|=o,l)}function FA(o,l,d,p,_){var b=nt.p;nt.p=b!==0&&8>b?b:8;var I=X.T,L={};X.T=L,Hv(o,!1,l,d);try{var W=_(),et=X.S;if(et!==null&&et(L,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ut=KU(W,p);td(o,l,ut,Ps(o))}else td(o,l,p,Ps(o))}catch(ft){td(o,l,{then:function(){},status:"rejected",reason:ft},Ps())}finally{nt.p=b,X.T=I}}function t3(){}function Bv(o,l,d,p){if(o.tag!==5)throw Error(i(476));var _=BA(o).queue;FA(o,_,l,yt,d===null?t3:function(){return zA(o),d(p)})}function BA(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:yt},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:d},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function zA(o){var l=BA(o).next.queue;td(o,l,{},Ps())}function zv(){return ki(_d)}function HA(){return Wn().memoizedState}function qA(){return Wn().memoizedState}function e3(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var d=Ps();o=_a(d);var p=va(l,o,d);p!==null&&(Os(p,l,d),Yh(p,l,d)),l={cache:_v()},o.payload=l;return}l=l.return}}function n3(o,l,d){var p=Ps();d={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},_m(o)?WA(l,d):(d=lv(o,l,d,p),d!==null&&(Os(d,o,p),GA(d,l,p)))}function $A(o,l,d){var p=Ps();td(o,l,d,p)}function td(o,l,d,p){var _={lane:p,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(_m(o))WA(l,_);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var I=l.lastRenderedState,L=b(I,d);if(_.hasEagerState=!0,_.eagerState=L,Rs(L,I))return em(o,l,_,0),cn===null&&tm(),!1}catch{}finally{}if(d=lv(o,l,_,p),d!==null)return Os(d,o,p),GA(d,l,p),!0}return!1}function Hv(o,l,d,p){if(p={lane:2,revertLane:T0(),action:p,hasEagerState:!1,eagerState:null,next:null},_m(o)){if(l)throw Error(i(479))}else l=lv(o,d,p,2),l!==null&&Os(l,o,2)}function _m(o){var l=o.alternate;return o===me||l!==null&&l===me}function WA(o,l){su=dm=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function GA(o,l,d){if((d&4194048)!==0){var p=l.lanes;p&=o.pendingLanes,d|=p,l.lanes=d,xn(o,d)}}var vm={readContext:ki,use:pm,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useLayoutEffect:Vn,useInsertionEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useSyncExternalStore:Vn,useId:Vn,useHostTransitionStatus:Vn,useFormState:Vn,useActionState:Vn,useOptimistic:Vn,useMemoCache:Vn,useCacheRefresh:Vn},YA={readContext:ki,use:pm,useCallback:function(o,l){return cs().memoizedState=[o,l===void 0?null:l],o},useContext:ki,useEffect:MA,useImperativeHandle:function(o,l,d){d=d!=null?d.concat([o]):null,ym(4194308,4,kA.bind(null,l,o),d)},useLayoutEffect:function(o,l){return ym(4194308,4,o,l)},useInsertionEffect:function(o,l){ym(4,2,o,l)},useMemo:function(o,l){var d=cs();l=l===void 0?null:l;var p=o();if(ql){fn(!0);try{o()}finally{fn(!1)}}return d.memoizedState=[p,l],p},useReducer:function(o,l,d){var p=cs();if(d!==void 0){var _=d(l);if(ql){fn(!0);try{d(l)}finally{fn(!1)}}}else _=l;return p.memoizedState=p.baseState=_,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:_},p.queue=o,o=o.dispatch=n3.bind(null,me,o),[p.memoizedState,o]},useRef:function(o){var l=cs();return o={current:o},l.memoizedState=o},useState:function(o){o=Vv(o);var l=o.queue,d=$A.bind(null,me,l);return l.dispatch=d,[o.memoizedState,d]},useDebugValue:Uv,useDeferredValue:function(o,l){var d=cs();return Fv(d,o,l)},useTransition:function(){var o=Vv(!1);return o=FA.bind(null,me,o.queue,!0,!1),cs().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,d){var p=me,_=cs();if(Fe){if(d===void 0)throw Error(i(407));d=d()}else{if(d=l(),cn===null)throw Error(i(349));(De&124)!==0||mA(p,l,d)}_.memoizedState=d;var b={value:d,getSnapshot:l};return _.queue=b,MA(yA.bind(null,p,b,o),[o]),p.flags|=2048,ou(9,gm(),gA.bind(null,p,b,d,l),null),d},useId:function(){var o=cs(),l=cn.identifierPrefix;if(Fe){var d=Ro,p=Co;d=(p&~(1<<32-Ye(p)-1)).toString(32)+d,l=""+l+"R"+d,d=fm++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=XU++,l=""+l+"r"+d.toString(32)+"";return o.memoizedState=l},useHostTransitionStatus:zv,useFormState:AA,useActionState:AA,useOptimistic:function(o){var l=cs();l.memoizedState=l.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Hv.bind(null,me,!0,d),d.dispatch=l,[o,l]},useMemoCache:Ov,useCacheRefresh:function(){return cs().memoizedState=e3.bind(null,me)}},KA={readContext:ki,use:pm,useCallback:VA,useContext:ki,useEffect:NA,useImperativeHandle:LA,useInsertionEffect:PA,useLayoutEffect:OA,useMemo:jA,useReducer:mm,useRef:DA,useState:function(){return mm(Mo)},useDebugValue:Uv,useDeferredValue:function(o,l){var d=Wn();return UA(d,en.memoizedState,o,l)},useTransition:function(){var o=mm(Mo)[0],l=Wn().memoizedState;return[typeof o=="boolean"?o:Zh(o),l]},useSyncExternalStore:pA,useId:HA,useHostTransitionStatus:zv,useFormState:CA,useActionState:CA,useOptimistic:function(o,l){var d=Wn();return bA(d,en,o,l)},useMemoCache:Ov,useCacheRefresh:qA},i3={readContext:ki,use:pm,useCallback:VA,useContext:ki,useEffect:NA,useImperativeHandle:LA,useInsertionEffect:PA,useLayoutEffect:OA,useMemo:jA,useReducer:Lv,useRef:DA,useState:function(){return Lv(Mo)},useDebugValue:Uv,useDeferredValue:function(o,l){var d=Wn();return en===null?Fv(d,o,l):UA(d,en.memoizedState,o,l)},useTransition:function(){var o=Lv(Mo)[0],l=Wn().memoizedState;return[typeof o=="boolean"?o:Zh(o),l]},useSyncExternalStore:pA,useId:HA,useHostTransitionStatus:zv,useFormState:IA,useActionState:IA,useOptimistic:function(o,l){var d=Wn();return en!==null?bA(d,en,o,l):(d.baseState=o,[o,d.queue.dispatch])},useMemoCache:Ov,useCacheRefresh:qA},au=null,ed=0;function bm(o){var l=ed;return ed+=1,au===null&&(au=[]),oA(au,o,l)}function nd(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Tm(o,l){throw l.$$typeof===m?Error(i(525)):(o=Object.prototype.toString.call(l),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function XA(o){var l=o._init;return l(o._payload)}function QA(o){function l(Q,K){if(o){var tt=Q.deletions;tt===null?(Q.deletions=[K],Q.flags|=16):tt.push(K)}}function d(Q,K){if(!o)return null;for(;K!==null;)l(Q,K),K=K.sibling;return null}function p(Q){for(var K=new Map;Q!==null;)Q.key!==null?K.set(Q.key,Q):K.set(Q.index,Q),Q=Q.sibling;return K}function _(Q,K){return Q=Ao(Q,K),Q.index=0,Q.sibling=null,Q}function b(Q,K,tt){return Q.index=tt,o?(tt=Q.alternate,tt!==null?(tt=tt.index,tt<K?(Q.flags|=67108866,K):tt):(Q.flags|=67108866,K)):(Q.flags|=1048576,K)}function I(Q){return o&&Q.alternate===null&&(Q.flags|=67108866),Q}function L(Q,K,tt,ht){return K===null||K.tag!==6?(K=uv(tt,Q.mode,ht),K.return=Q,K):(K=_(K,tt),K.return=Q,K)}function W(Q,K,tt,ht){var Ot=tt.type;return Ot===T?ut(Q,K,tt.props.children,ht,tt.key):K!==null&&(K.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===D&&XA(Ot)===K.type)?(K=_(K,tt.props),nd(K,tt),K.return=Q,K):(K=im(tt.type,tt.key,tt.props,null,Q.mode,ht),nd(K,tt),K.return=Q,K)}function et(Q,K,tt,ht){return K===null||K.tag!==4||K.stateNode.containerInfo!==tt.containerInfo||K.stateNode.implementation!==tt.implementation?(K=hv(tt,Q.mode,ht),K.return=Q,K):(K=_(K,tt.children||[]),K.return=Q,K)}function ut(Q,K,tt,ht,Ot){return K===null||K.tag!==7?(K=Ll(tt,Q.mode,ht,Ot),K.return=Q,K):(K=_(K,tt),K.return=Q,K)}function ft(Q,K,tt){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=uv(""+K,Q.mode,tt),K.return=Q,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case y:return tt=im(K.type,K.key,K.props,null,Q.mode,tt),nd(tt,K),tt.return=Q,tt;case v:return K=hv(K,Q.mode,tt),K.return=Q,K;case D:var ht=K._init;return K=ht(K._payload),ft(Q,K,tt)}if(_t(K)||$(K))return K=Ll(K,Q.mode,tt,null),K.return=Q,K;if(typeof K.then=="function")return ft(Q,bm(K),tt);if(K.$$typeof===N)return ft(Q,am(Q,K),tt);Tm(Q,K)}return null}function st(Q,K,tt,ht){var Ot=K!==null?K.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Ot!==null?null:L(Q,K,""+tt,ht);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case y:return tt.key===Ot?W(Q,K,tt,ht):null;case v:return tt.key===Ot?et(Q,K,tt,ht):null;case D:return Ot=tt._init,tt=Ot(tt._payload),st(Q,K,tt,ht)}if(_t(tt)||$(tt))return Ot!==null?null:ut(Q,K,tt,ht,null);if(typeof tt.then=="function")return st(Q,K,bm(tt),ht);if(tt.$$typeof===N)return st(Q,K,am(Q,tt),ht);Tm(Q,tt)}return null}function ot(Q,K,tt,ht,Ot){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Q=Q.get(tt)||null,L(K,Q,""+ht,Ot);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case y:return Q=Q.get(ht.key===null?tt:ht.key)||null,W(K,Q,ht,Ot);case v:return Q=Q.get(ht.key===null?tt:ht.key)||null,et(K,Q,ht,Ot);case D:var _e=ht._init;return ht=_e(ht._payload),ot(Q,K,tt,ht,Ot)}if(_t(ht)||$(ht))return Q=Q.get(tt)||null,ut(K,Q,ht,Ot,null);if(typeof ht.then=="function")return ot(Q,K,tt,bm(ht),Ot);if(ht.$$typeof===N)return ot(Q,K,tt,am(K,ht),Ot);Tm(K,ht)}return null}function Xt(Q,K,tt,ht){for(var Ot=null,_e=null,Vt=K,$t=K=0,di=null;Vt!==null&&$t<tt.length;$t++){Vt.index>$t?(di=Vt,Vt=null):di=Vt.sibling;var Ue=st(Q,Vt,tt[$t],ht);if(Ue===null){Vt===null&&(Vt=di);break}o&&Vt&&Ue.alternate===null&&l(Q,Vt),K=b(Ue,K,$t),_e===null?Ot=Ue:_e.sibling=Ue,_e=Ue,Vt=di}if($t===tt.length)return d(Q,Vt),Fe&&jl(Q,$t),Ot;if(Vt===null){for(;$t<tt.length;$t++)Vt=ft(Q,tt[$t],ht),Vt!==null&&(K=b(Vt,K,$t),_e===null?Ot=Vt:_e.sibling=Vt,_e=Vt);return Fe&&jl(Q,$t),Ot}for(Vt=p(Vt);$t<tt.length;$t++)di=ot(Vt,Q,$t,tt[$t],ht),di!==null&&(o&&di.alternate!==null&&Vt.delete(di.key===null?$t:di.key),K=b(di,K,$t),_e===null?Ot=di:_e.sibling=di,_e=di);return o&&Vt.forEach(function(La){return l(Q,La)}),Fe&&jl(Q,$t),Ot}function qt(Q,K,tt,ht){if(tt==null)throw Error(i(151));for(var Ot=null,_e=null,Vt=K,$t=K=0,di=null,Ue=tt.next();Vt!==null&&!Ue.done;$t++,Ue=tt.next()){Vt.index>$t?(di=Vt,Vt=null):di=Vt.sibling;var La=st(Q,Vt,Ue.value,ht);if(La===null){Vt===null&&(Vt=di);break}o&&Vt&&La.alternate===null&&l(Q,Vt),K=b(La,K,$t),_e===null?Ot=La:_e.sibling=La,_e=La,Vt=di}if(Ue.done)return d(Q,Vt),Fe&&jl(Q,$t),Ot;if(Vt===null){for(;!Ue.done;$t++,Ue=tt.next())Ue=ft(Q,Ue.value,ht),Ue!==null&&(K=b(Ue,K,$t),_e===null?Ot=Ue:_e.sibling=Ue,_e=Ue);return Fe&&jl(Q,$t),Ot}for(Vt=p(Vt);!Ue.done;$t++,Ue=tt.next())Ue=ot(Vt,Q,$t,Ue.value,ht),Ue!==null&&(o&&Ue.alternate!==null&&Vt.delete(Ue.key===null?$t:Ue.key),K=b(Ue,K,$t),_e===null?Ot=Ue:_e.sibling=Ue,_e=Ue);return o&&Vt.forEach(function(sF){return l(Q,sF)}),Fe&&jl(Q,$t),Ot}function sn(Q,K,tt,ht){if(typeof tt=="object"&&tt!==null&&tt.type===T&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case y:t:{for(var Ot=tt.key;K!==null;){if(K.key===Ot){if(Ot=tt.type,Ot===T){if(K.tag===7){d(Q,K.sibling),ht=_(K,tt.props.children),ht.return=Q,Q=ht;break t}}else if(K.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===D&&XA(Ot)===K.type){d(Q,K.sibling),ht=_(K,tt.props),nd(ht,tt),ht.return=Q,Q=ht;break t}d(Q,K);break}else l(Q,K);K=K.sibling}tt.type===T?(ht=Ll(tt.props.children,Q.mode,ht,tt.key),ht.return=Q,Q=ht):(ht=im(tt.type,tt.key,tt.props,null,Q.mode,ht),nd(ht,tt),ht.return=Q,Q=ht)}return I(Q);case v:t:{for(Ot=tt.key;K!==null;){if(K.key===Ot)if(K.tag===4&&K.stateNode.containerInfo===tt.containerInfo&&K.stateNode.implementation===tt.implementation){d(Q,K.sibling),ht=_(K,tt.children||[]),ht.return=Q,Q=ht;break t}else{d(Q,K);break}else l(Q,K);K=K.sibling}ht=hv(tt,Q.mode,ht),ht.return=Q,Q=ht}return I(Q);case D:return Ot=tt._init,tt=Ot(tt._payload),sn(Q,K,tt,ht)}if(_t(tt))return Xt(Q,K,tt,ht);if($(tt)){if(Ot=$(tt),typeof Ot!="function")throw Error(i(150));return tt=Ot.call(tt),qt(Q,K,tt,ht)}if(typeof tt.then=="function")return sn(Q,K,bm(tt),ht);if(tt.$$typeof===N)return sn(Q,K,am(Q,tt),ht);Tm(Q,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,K!==null&&K.tag===6?(d(Q,K.sibling),ht=_(K,tt),ht.return=Q,Q=ht):(d(Q,K),ht=uv(tt,Q.mode,ht),ht.return=Q,Q=ht),I(Q)):d(Q,K)}return function(Q,K,tt,ht){try{ed=0;var Ot=sn(Q,K,tt,ht);return au=null,Ot}catch(Vt){if(Vt===Wh||Vt===cm)throw Vt;var _e=Is(29,Vt,null,Q.mode);return _e.lanes=ht,_e.return=Q,_e}finally{}}}var lu=QA(!0),ZA=QA(!1),tr=it(null),Yr=null;function Ta(o){var l=o.alternate;ct(si,si.current&1),ct(tr,o),Yr===null&&(l===null||iu.current!==null||l.memoizedState!==null)&&(Yr=o)}function JA(o){if(o.tag===22){if(ct(si,si.current),ct(tr,o),Yr===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Yr=o)}}else wa()}function wa(){ct(si,si.current),ct(tr,tr.current)}function No(o){lt(tr),Yr===o&&(Yr=null),lt(si)}var si=it(0);function wm(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||P0(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function qv(o,l,d,p){l=o.memoizedState,d=d(p,l),d=d==null?l:f({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var $v={enqueueSetState:function(o,l,d){o=o._reactInternals;var p=Ps(),_=_a(p);_.payload=l,d!=null&&(_.callback=d),l=va(o,_,p),l!==null&&(Os(l,o,p),Yh(l,o,p))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var p=Ps(),_=_a(p);_.tag=1,_.payload=l,d!=null&&(_.callback=d),l=va(o,_,p),l!==null&&(Os(l,o,p),Yh(l,o,p))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=Ps(),p=_a(d);p.tag=2,l!=null&&(p.callback=l),l=va(o,p,d),l!==null&&(Os(l,o,d),Yh(l,o,d))}};function tC(o,l,d,p,_,b,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,b,I):l.prototype&&l.prototype.isPureReactComponent?!jh(d,p)||!jh(_,b):!0}function eC(o,l,d,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,p),l.state!==o&&$v.enqueueReplaceState(l,l.state,null)}function $l(o,l){var d=l;if("ref"in l){d={};for(var p in l)p!=="ref"&&(d[p]=l[p])}if(o=o.defaultProps){d===l&&(d=f({},d));for(var _ in o)d[_]===void 0&&(d[_]=o[_])}return d}var Em=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function nC(o){Em(o)}function iC(o){console.error(o)}function sC(o){Em(o)}function xm(o,l){try{var d=o.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function rC(o,l,d){try{var p=o.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Wv(o,l,d){return d=_a(d),d.tag=3,d.payload={element:null},d.callback=function(){xm(o,l)},d}function oC(o){return o=_a(o),o.tag=3,o}function aC(o,l,d,p){var _=d.type.getDerivedStateFromError;if(typeof _=="function"){var b=p.value;o.payload=function(){return _(b)},o.callback=function(){rC(l,d,p)}}var I=d.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(o.callback=function(){rC(l,d,p),typeof _!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})})}function s3(o,l,d,p,_){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=d.alternate,l!==null&&Hh(l,d,_,!0),d=tr.current,d!==null){switch(d.tag){case 13:return Yr===null?g0():d.alternate===null&&Nn===0&&(Nn=3),d.flags&=-257,d.flags|=65536,d.lanes=_,p===Tv?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([p]):l.add(p),_0(o,p,_)),!1;case 22:return d.flags|=65536,p===Tv?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([p]):d.add(p)),_0(o,p,_)),!1}throw Error(i(435,d.tag))}return _0(o,p,_),g0(),!1}if(Fe)return l=tr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=_,p!==pv&&(o=Error(i(422),{cause:p}),zh(Xs(o,d)))):(p!==pv&&(l=Error(i(423),{cause:p}),zh(Xs(l,d))),o=o.current.alternate,o.flags|=65536,_&=-_,o.lanes|=_,p=Xs(p,d),_=Wv(o.stateNode,p,_),xv(o,_),Nn!==4&&(Nn=2)),!1;var b=Error(i(520),{cause:p});if(b=Xs(b,d),cd===null?cd=[b]:cd.push(b),Nn!==4&&(Nn=2),l===null)return!0;p=Xs(p,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,o=_&-_,d.lanes|=o,o=Wv(d.stateNode,p,o),xv(d,o),!1;case 1:if(l=d.type,b=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ra===null||!Ra.has(b))))return d.flags|=65536,_&=-_,d.lanes|=_,_=oC(_),aC(_,o,d,p),xv(d,_),!1}d=d.return}while(d!==null);return!1}var lC=Error(i(461)),ui=!1;function wi(o,l,d,p){l.child=o===null?ZA(l,null,d,p):lu(l,o.child,d,p)}function cC(o,l,d,p,_){d=d.render;var b=l.ref;if("ref"in p){var I={};for(var L in p)L!=="ref"&&(I[L]=p[L])}else I=p;return zl(l),p=Iv(o,l,d,I,b,_),L=Dv(),o!==null&&!ui?(Mv(o,l,_),Po(o,l,_)):(Fe&&L&&dv(l),l.flags|=1,wi(o,l,p,_),l.child)}function uC(o,l,d,p,_){if(o===null){var b=d.type;return typeof b=="function"&&!cv(b)&&b.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=b,hC(o,l,b,p,_)):(o=im(d.type,null,p,l,l.mode,_),o.ref=l.ref,o.return=l,l.child=o)}if(b=o.child,!t0(o,_)){var I=b.memoizedProps;if(d=d.compare,d=d!==null?d:jh,d(I,p)&&o.ref===l.ref)return Po(o,l,_)}return l.flags|=1,o=Ao(b,p),o.ref=l.ref,o.return=l,l.child=o}function hC(o,l,d,p,_){if(o!==null){var b=o.memoizedProps;if(jh(b,p)&&o.ref===l.ref)if(ui=!1,l.pendingProps=p=b,t0(o,_))(o.flags&131072)!==0&&(ui=!0);else return l.lanes=o.lanes,Po(o,l,_)}return Gv(o,l,d,p,_)}function dC(o,l,d){var p=l.pendingProps,_=p.children,b=o!==null?o.memoizedState:null;if(p.mode==="hidden"){if((l.flags&128)!==0){if(p=b!==null?b.baseLanes|d:d,o!==null){for(_=l.child=o.child,b=0;_!==null;)b=b|_.lanes|_.childLanes,_=_.sibling;l.childLanes=b&~p}else l.childLanes=0,l.child=null;return fC(o,l,p,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&lm(l,b!==null?b.cachePool:null),b!==null?hA(l,b):Av(),JA(l);else return l.lanes=l.childLanes=536870912,fC(o,l,b!==null?b.baseLanes|d:d,d)}else b!==null?(lm(l,b.cachePool),hA(l,b),wa(),l.memoizedState=null):(o!==null&&lm(l,null),Av(),wa());return wi(o,l,_,d),l.child}function fC(o,l,d,p){var _=bv();return _=_===null?null:{parent:ii._currentValue,pool:_},l.memoizedState={baseLanes:d,cachePool:_},o!==null&&lm(l,null),Av(),JA(l),o!==null&&Hh(o,l,p,!0),null}function Sm(o,l){var d=l.ref;if(d===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(o===null||o.ref!==d)&&(l.flags|=4194816)}}function Gv(o,l,d,p,_){return zl(l),d=Iv(o,l,d,p,void 0,_),p=Dv(),o!==null&&!ui?(Mv(o,l,_),Po(o,l,_)):(Fe&&p&&dv(l),l.flags|=1,wi(o,l,d,_),l.child)}function pC(o,l,d,p,_,b){return zl(l),l.updateQueue=null,d=fA(l,p,d,_),dA(o),p=Dv(),o!==null&&!ui?(Mv(o,l,b),Po(o,l,b)):(Fe&&p&&dv(l),l.flags|=1,wi(o,l,d,b),l.child)}function mC(o,l,d,p,_){if(zl(l),l.stateNode===null){var b=Zc,I=d.contextType;typeof I=="object"&&I!==null&&(b=ki(I)),b=new d(p,b),l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=$v,l.stateNode=b,b._reactInternals=l,b=l.stateNode,b.props=p,b.state=l.memoizedState,b.refs={},wv(l),I=d.contextType,b.context=typeof I=="object"&&I!==null?ki(I):Zc,b.state=l.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(qv(l,d,I,p),b.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(I=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),I!==b.state&&$v.enqueueReplaceState(b,b.state,null),Xh(l,p,b,_),Kh(),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(o===null){b=l.stateNode;var L=l.memoizedProps,W=$l(d,L);b.props=W;var et=b.context,ut=d.contextType;I=Zc,typeof ut=="object"&&ut!==null&&(I=ki(ut));var ft=d.getDerivedStateFromProps;ut=typeof ft=="function"||typeof b.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,ut||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(L||et!==I)&&eC(l,b,p,I),ya=!1;var st=l.memoizedState;b.state=st,Xh(l,p,b,_),Kh(),et=l.memoizedState,L||st!==et||ya?(typeof ft=="function"&&(qv(l,d,ft,p),et=l.memoizedState),(W=ya||tC(l,d,W,p,st,et,I))?(ut||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=et),b.props=p,b.state=et,b.context=I,p=W):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{b=l.stateNode,Ev(o,l),I=l.memoizedProps,ut=$l(d,I),b.props=ut,ft=l.pendingProps,st=b.context,et=d.contextType,W=Zc,typeof et=="object"&&et!==null&&(W=ki(et)),L=d.getDerivedStateFromProps,(et=typeof L=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(I!==ft||st!==W)&&eC(l,b,p,W),ya=!1,st=l.memoizedState,b.state=st,Xh(l,p,b,_),Kh();var ot=l.memoizedState;I!==ft||st!==ot||ya||o!==null&&o.dependencies!==null&&om(o.dependencies)?(typeof L=="function"&&(qv(l,d,L,p),ot=l.memoizedState),(ut=ya||tC(l,d,ut,p,st,ot,W)||o!==null&&o.dependencies!==null&&om(o.dependencies))?(et||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(p,ot,W),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(p,ot,W)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||I===o.memoizedProps&&st===o.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&st===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=ot),b.props=p,b.state=ot,b.context=W,p=ut):(typeof b.componentDidUpdate!="function"||I===o.memoizedProps&&st===o.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&st===o.memoizedState||(l.flags|=1024),p=!1)}return b=p,Sm(o,l),p=(l.flags&128)!==0,b||p?(b=l.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:b.render(),l.flags|=1,o!==null&&p?(l.child=lu(l,o.child,null,_),l.child=lu(l,null,d,_)):wi(o,l,d,_),l.memoizedState=b.state,o=l.child):o=Po(o,l,_),o}function gC(o,l,d,p){return Bh(),l.flags|=256,wi(o,l,d,p),l.child}var Yv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kv(o){return{baseLanes:o,cachePool:iA()}}function Xv(o,l,d){return o=o!==null?o.childLanes&~d:0,l&&(o|=er),o}function yC(o,l,d){var p=l.pendingProps,_=!1,b=(l.flags&128)!==0,I;if((I=b)||(I=o!==null&&o.memoizedState===null?!1:(si.current&2)!==0),I&&(_=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,o===null){if(Fe){if(_?Ta(l):wa(),Fe){var L=Mn,W;if(W=L){t:{for(W=L,L=Gr;W.nodeType!==8;){if(!L){L=null;break t}if(W=xr(W.nextSibling),W===null){L=null;break t}}L=W}L!==null?(l.memoizedState={dehydrated:L,treeContext:Vl!==null?{id:Co,overflow:Ro}:null,retryLane:536870912,hydrationErrors:null},W=Is(18,null,null,0),W.stateNode=L,W.return=l,l.child=W,is=l,Mn=null,W=!0):W=!1}W||Fl(l)}if(L=l.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return P0(L)?l.lanes=32:l.lanes=536870912,null;No(l)}return L=p.children,p=p.fallback,_?(wa(),_=l.mode,L=Am({mode:"hidden",children:L},_),p=Ll(p,_,d,null),L.return=l,p.return=l,L.sibling=p,l.child=L,_=l.child,_.memoizedState=Kv(d),_.childLanes=Xv(o,I,d),l.memoizedState=Yv,p):(Ta(l),Qv(l,L))}if(W=o.memoizedState,W!==null&&(L=W.dehydrated,L!==null)){if(b)l.flags&256?(Ta(l),l.flags&=-257,l=Zv(o,l,d)):l.memoizedState!==null?(wa(),l.child=o.child,l.flags|=128,l=null):(wa(),_=p.fallback,L=l.mode,p=Am({mode:"visible",children:p.children},L),_=Ll(_,L,d,null),_.flags|=2,p.return=l,_.return=l,p.sibling=_,l.child=p,lu(l,o.child,null,d),p=l.child,p.memoizedState=Kv(d),p.childLanes=Xv(o,I,d),l.memoizedState=Yv,l=_);else if(Ta(l),P0(L)){if(I=L.nextSibling&&L.nextSibling.dataset,I)var et=I.dgst;I=et,p=Error(i(419)),p.stack="",p.digest=I,zh({value:p,source:null,stack:null}),l=Zv(o,l,d)}else if(ui||Hh(o,l,d,!1),I=(d&o.childLanes)!==0,ui||I){if(I=cn,I!==null&&(p=d&-d,p=(p&42)!==0?1:oe(p),p=(p&(I.suspendedLanes|d))!==0?0:p,p!==0&&p!==W.retryLane))throw W.retryLane=p,Qc(o,p),Os(I,o,p),lC;L.data==="$?"||g0(),l=Zv(o,l,d)}else L.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=W.treeContext,Mn=xr(L.nextSibling),is=l,Fe=!0,Ul=null,Gr=!1,o!==null&&(Zs[Js++]=Co,Zs[Js++]=Ro,Zs[Js++]=Vl,Co=o.id,Ro=o.overflow,Vl=l),l=Qv(l,p.children),l.flags|=4096);return l}return _?(wa(),_=p.fallback,L=l.mode,W=o.child,et=W.sibling,p=Ao(W,{mode:"hidden",children:p.children}),p.subtreeFlags=W.subtreeFlags&65011712,et!==null?_=Ao(et,_):(_=Ll(_,L,d,null),_.flags|=2),_.return=l,p.return=l,p.sibling=_,l.child=p,p=_,_=l.child,L=o.child.memoizedState,L===null?L=Kv(d):(W=L.cachePool,W!==null?(et=ii._currentValue,W=W.parent!==et?{parent:et,pool:et}:W):W=iA(),L={baseLanes:L.baseLanes|d,cachePool:W}),_.memoizedState=L,_.childLanes=Xv(o,I,d),l.memoizedState=Yv,p):(Ta(l),d=o.child,o=d.sibling,d=Ao(d,{mode:"visible",children:p.children}),d.return=l,d.sibling=null,o!==null&&(I=l.deletions,I===null?(l.deletions=[o],l.flags|=16):I.push(o)),l.child=d,l.memoizedState=null,d)}function Qv(o,l){return l=Am({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function Am(o,l){return o=Is(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Zv(o,l,d){return lu(l,o.child,null,d),o=Qv(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function _C(o,l,d){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),gv(o.return,l,d)}function Jv(o,l,d,p,_){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:_}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=d,b.tailMode=_)}function vC(o,l,d){var p=l.pendingProps,_=p.revealOrder,b=p.tail;if(wi(o,l,p.children,d),p=si.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&_C(o,d,l);else if(o.tag===19)_C(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break t;for(;o.sibling===null;){if(o.return===null||o.return===l)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}switch(ct(si,p),_){case"forwards":for(d=l.child,_=null;d!==null;)o=d.alternate,o!==null&&wm(o)===null&&(_=d),d=d.sibling;d=_,d===null?(_=l.child,l.child=null):(_=d.sibling,d.sibling=null),Jv(l,!1,_,d,b);break;case"backwards":for(d=null,_=l.child,l.child=null;_!==null;){if(o=_.alternate,o!==null&&wm(o)===null){l.child=_;break}o=_.sibling,_.sibling=d,d=_,_=o}Jv(l,!0,d,null,b);break;case"together":Jv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Po(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),Ca|=l.lanes,(d&l.childLanes)===0)if(o!==null){if(Hh(o,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(i(153));if(l.child!==null){for(o=l.child,d=Ao(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=Ao(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function t0(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&om(o)))}function r3(o,l,d){switch(l.tag){case 3:Tt(l,l.stateNode.containerInfo),ga(l,ii,o.memoizedState.cache),Bh();break;case 27:case 5:It(l);break;case 4:Tt(l,l.stateNode.containerInfo);break;case 10:ga(l,l.type,l.memoizedProps.value);break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Ta(l),l.flags|=128,null):(d&l.child.childLanes)!==0?yC(o,l,d):(Ta(l),o=Po(o,l,d),o!==null?o.sibling:null);Ta(l);break;case 19:var _=(o.flags&128)!==0;if(p=(d&l.childLanes)!==0,p||(Hh(o,l,d,!1),p=(d&l.childLanes)!==0),_){if(p)return vC(o,l,d);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ct(si,si.current),p)break;return null;case 22:case 23:return l.lanes=0,dC(o,l,d);case 24:ga(l,ii,o.memoizedState.cache)}return Po(o,l,d)}function bC(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps)ui=!0;else{if(!t0(o,d)&&(l.flags&128)===0)return ui=!1,r3(o,l,d);ui=(o.flags&131072)!==0}else ui=!1,Fe&&(l.flags&1048576)!==0&&XS(l,rm,l.index);switch(l.lanes=0,l.tag){case 16:t:{o=l.pendingProps;var p=l.elementType,_=p._init;if(p=_(p._payload),l.type=p,typeof p=="function")cv(p)?(o=$l(p,o),l.tag=1,l=mC(null,l,p,o,d)):(l.tag=0,l=Gv(null,l,p,o,d));else{if(p!=null){if(_=p.$$typeof,_===q){l.tag=11,l=cC(null,l,p,o,d);break t}else if(_===k){l.tag=14,l=uC(null,l,p,o,d);break t}}throw l=Et(p)||p,Error(i(306,l,""))}}return l;case 0:return Gv(o,l,l.type,l.pendingProps,d);case 1:return p=l.type,_=$l(p,l.pendingProps),mC(o,l,p,_,d);case 3:t:{if(Tt(l,l.stateNode.containerInfo),o===null)throw Error(i(387));p=l.pendingProps;var b=l.memoizedState;_=b.element,Ev(o,l),Xh(l,p,null,d);var I=l.memoizedState;if(p=I.cache,ga(l,ii,p),p!==b.cache&&yv(l,[ii],d,!0),Kh(),p=I.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=gC(o,l,p,d);break t}else if(p!==_){_=Xs(Error(i(424)),l),zh(_),l=gC(o,l,p,d);break t}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Mn=xr(o.firstChild),is=l,Fe=!0,Ul=null,Gr=!0,d=ZA(l,null,p,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Bh(),p===_){l=Po(o,l,d);break t}wi(o,l,p,d)}l=l.child}return l;case 26:return Sm(o,l),o===null?(d=xR(l.type,null,l.pendingProps,null))?l.memoizedState=d:Fe||(d=l.type,o=l.pendingProps,p=Fm(wt.current).createElement(d),p[se]=l,p[ye]=o,xi(p,d,o),Ke(p),l.stateNode=p):l.memoizedState=xR(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return It(l),o===null&&Fe&&(p=l.stateNode=TR(l.type,l.pendingProps,wt.current),is=l,Gr=!0,_=Mn,Ma(l.type)?(O0=_,Mn=xr(p.firstChild)):Mn=_),wi(o,l,l.pendingProps.children,d),Sm(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&Fe&&((_=p=Mn)&&(p=P3(p,l.type,l.pendingProps,Gr),p!==null?(l.stateNode=p,is=l,Mn=xr(p.firstChild),Gr=!1,_=!0):_=!1),_||Fl(l)),It(l),_=l.type,b=l.pendingProps,I=o!==null?o.memoizedProps:null,p=b.children,D0(_,b)?p=null:I!==null&&D0(_,I)&&(l.flags|=32),l.memoizedState!==null&&(_=Iv(o,l,QU,null,null,d),_d._currentValue=_),Sm(o,l),wi(o,l,p,d),l.child;case 6:return o===null&&Fe&&((o=d=Mn)&&(d=O3(d,l.pendingProps,Gr),d!==null?(l.stateNode=d,is=l,Mn=null,o=!0):o=!1),o||Fl(l)),null;case 13:return yC(o,l,d);case 4:return Tt(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=lu(l,null,p,d):wi(o,l,p,d),l.child;case 11:return cC(o,l,l.type,l.pendingProps,d);case 7:return wi(o,l,l.pendingProps,d),l.child;case 8:return wi(o,l,l.pendingProps.children,d),l.child;case 12:return wi(o,l,l.pendingProps.children,d),l.child;case 10:return p=l.pendingProps,ga(l,l.type,p.value),wi(o,l,p.children,d),l.child;case 9:return _=l.type._context,p=l.pendingProps.children,zl(l),_=ki(_),p=p(_),l.flags|=1,wi(o,l,p,d),l.child;case 14:return uC(o,l,l.type,l.pendingProps,d);case 15:return hC(o,l,l.type,l.pendingProps,d);case 19:return vC(o,l,d);case 31:return p=l.pendingProps,d=l.mode,p={mode:p.mode,children:p.children},o===null?(d=Am(p,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=Ao(o.child,p),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return dC(o,l,d);case 24:return zl(l),p=ki(ii),o===null?(_=bv(),_===null&&(_=cn,b=_v(),_.pooledCache=b,b.refCount++,b!==null&&(_.pooledCacheLanes|=d),_=b),l.memoizedState={parent:p,cache:_},wv(l),ga(l,ii,_)):((o.lanes&d)!==0&&(Ev(o,l),Xh(l,null,null,d),Kh()),_=o.memoizedState,b=l.memoizedState,_.parent!==p?(_={parent:p,cache:p},l.memoizedState=_,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=_),ga(l,ii,p)):(p=b.cache,ga(l,ii,p),p!==_.cache&&yv(l,[ii],d,!0))),wi(o,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function Oo(o){o.flags|=4}function TC(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!IR(l)){if(l=tr.current,l!==null&&((De&4194048)===De?Yr!==null:(De&62914560)!==De&&(De&536870912)===0||l!==Yr))throw Gh=Tv,sA;o.flags|=8192}}function Cm(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?te():536870912,o.lanes|=l,du|=l)}function id(o,l){if(!Fe)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function An(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,p=0;if(l)for(var _=o.child;_!==null;)d|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)d|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=p,o.childLanes=d,l}function o3(o,l,d){var p=l.pendingProps;switch(fv(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(l),null;case 1:return An(l),null;case 3:return d=l.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Do(ii),Ct(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(Fh(l)?Oo(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,JS())),An(l),null;case 26:return d=l.memoizedState,o===null?(Oo(l),d!==null?(An(l),TC(l,d)):(An(l),l.flags&=-16777217)):d?d!==o.memoizedState?(Oo(l),An(l),TC(l,d)):(An(l),l.flags&=-16777217):(o.memoizedProps!==p&&Oo(l),An(l),l.flags&=-16777217),null;case 27:zt(l),d=wt.current;var _=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==p&&Oo(l);else{if(!p){if(l.stateNode===null)throw Error(i(166));return An(l),null}o=vt.current,Fh(l)?QS(l):(o=TR(_,p,d),l.stateNode=o,Oo(l))}return An(l),null;case 5:if(zt(l),d=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==p&&Oo(l);else{if(!p){if(l.stateNode===null)throw Error(i(166));return An(l),null}if(o=vt.current,Fh(l))QS(l);else{switch(_=Fm(wt.current),o){case 1:o=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:o=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":o=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":o=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":o=_.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?o.multiple=!0:p.size&&(o.size=p.size);break;default:o=typeof p.is=="string"?_.createElement(d,{is:p.is}):_.createElement(d)}}o[se]=l,o[ye]=p;t:for(_=l.child;_!==null;){if(_.tag===5||_.tag===6)o.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===l)break t;for(;_.sibling===null;){if(_.return===null||_.return===l)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}l.stateNode=o;t:switch(xi(o,d,p),d){case"button":case"input":case"select":case"textarea":o=!!p.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Oo(l)}}return An(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==p&&Oo(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(i(166));if(o=wt.current,Fh(l)){if(o=l.stateNode,d=l.memoizedProps,p=null,_=is,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}o[se]=l,o=!!(o.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||pR(o.nodeValue,d)),o||Fl(l)}else o=Fm(o).createTextNode(p),o[se]=l,l.stateNode=o}return An(l),null;case 13:if(p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_=Fh(l),p!==null&&p.dehydrated!==null){if(o===null){if(!_)throw Error(i(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[se]=l}else Bh(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;An(l),_=!1}else _=JS(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=_),_=!0;if(!_)return l.flags&256?(No(l),l):(No(l),null)}if(No(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=p!==null,o=o!==null&&o.memoizedState!==null,d){p=l.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool);var b=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==_&&(p.flags|=2048)}return d!==o&&d&&(l.child.flags|=8192),Cm(l,l.updateQueue),An(l),null;case 4:return Ct(),o===null&&S0(l.stateNode.containerInfo),An(l),null;case 10:return Do(l.type),An(l),null;case 19:if(lt(si),_=l.memoizedState,_===null)return An(l),null;if(p=(l.flags&128)!==0,b=_.rendering,b===null)if(p)id(_,!1);else{if(Nn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(b=wm(o),b!==null){for(l.flags|=128,id(_,!1),o=b.updateQueue,l.updateQueue=o,Cm(l,o),l.subtreeFlags=0,o=d,d=l.child;d!==null;)KS(d,o),d=d.sibling;return ct(si,si.current&1|2),l.child}o=o.sibling}_.tail!==null&&de()>Dm&&(l.flags|=128,p=!0,id(_,!1),l.lanes=4194304)}else{if(!p)if(o=wm(b),o!==null){if(l.flags|=128,p=!0,o=o.updateQueue,l.updateQueue=o,Cm(l,o),id(_,!0),_.tail===null&&_.tailMode==="hidden"&&!b.alternate&&!Fe)return An(l),null}else 2*de()-_.renderingStartTime>Dm&&d!==536870912&&(l.flags|=128,p=!0,id(_,!1),l.lanes=4194304);_.isBackwards?(b.sibling=l.child,l.child=b):(o=_.last,o!==null?o.sibling=b:l.child=b,_.last=b)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=de(),l.sibling=null,o=si.current,ct(si,p?o&1|2:o&1),l):(An(l),null);case 22:case 23:return No(l),Cv(),p=l.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(d&536870912)!==0&&(l.flags&128)===0&&(An(l),l.subtreeFlags&6&&(l.flags|=8192)):An(l),d=l.updateQueue,d!==null&&Cm(l,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048),o!==null&&lt(Hl),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Do(ii),An(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function a3(o,l){switch(fv(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Do(ii),Ct(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return zt(l),null;case 13:if(No(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Bh()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return lt(si),null;case 4:return Ct(),null;case 10:return Do(l.type),null;case 22:case 23:return No(l),Cv(),o!==null&&lt(Hl),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Do(ii),null;case 25:return null;default:return null}}function wC(o,l){switch(fv(l),l.tag){case 3:Do(ii),Ct();break;case 26:case 27:case 5:zt(l);break;case 4:Ct();break;case 13:No(l);break;case 19:lt(si);break;case 10:Do(l.type);break;case 22:case 23:No(l),Cv(),o!==null&&lt(Hl);break;case 24:Do(ii)}}function sd(o,l){try{var d=l.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var _=p.next;d=_;do{if((d.tag&o)===o){p=void 0;var b=d.create,I=d.inst;p=b(),I.destroy=p}d=d.next}while(d!==_)}}catch(L){ln(l,l.return,L)}}function Ea(o,l,d){try{var p=l.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var b=_.next;p=b;do{if((p.tag&o)===o){var I=p.inst,L=I.destroy;if(L!==void 0){I.destroy=void 0,_=l;var W=d,et=L;try{et()}catch(ut){ln(_,W,ut)}}}p=p.next}while(p!==b)}}catch(ut){ln(l,l.return,ut)}}function EC(o){var l=o.updateQueue;if(l!==null){var d=o.stateNode;try{uA(l,d)}catch(p){ln(o,o.return,p)}}}function xC(o,l,d){d.props=$l(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(p){ln(o,l,p)}}function rd(o,l){try{var d=o.ref;if(d!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof d=="function"?o.refCleanup=d(p):d.current=p}}catch(_){ln(o,l,_)}}function Kr(o,l){var d=o.ref,p=o.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(_){ln(o,l,_)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(_){ln(o,l,_)}else d.current=null}function SC(o){var l=o.type,d=o.memoizedProps,p=o.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break t;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(_){ln(o,o.return,_)}}function e0(o,l,d){try{var p=o.stateNode;R3(p,o.type,d,l),p[ye]=l}catch(_){ln(o,o.return,_)}}function AC(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ma(o.type)||o.tag===4}function n0(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||AC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ma(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function i0(o,l,d){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(o,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(o),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Um));else if(p!==4&&(p===27&&Ma(o.type)&&(d=o.stateNode,l=null),o=o.child,o!==null))for(i0(o,l,d),o=o.sibling;o!==null;)i0(o,l,d),o=o.sibling}function Rm(o,l,d){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(p!==4&&(p===27&&Ma(o.type)&&(d=o.stateNode),o=o.child,o!==null))for(Rm(o,l,d),o=o.sibling;o!==null;)Rm(o,l,d),o=o.sibling}function CC(o){var l=o.stateNode,d=o.memoizedProps;try{for(var p=o.type,_=l.attributes;_.length;)l.removeAttributeNode(_[0]);xi(l,p,d),l[se]=o,l[ye]=d}catch(b){ln(o,o.return,b)}}var ko=!1,jn=!1,s0=!1,RC=typeof WeakSet=="function"?WeakSet:Set,hi=null;function l3(o,l){if(o=o.containerInfo,R0=Wm,o=US(o),nv(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else t:{d=(d=o.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var _=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break t}var I=0,L=-1,W=-1,et=0,ut=0,ft=o,st=null;e:for(;;){for(var ot;ft!==d||_!==0&&ft.nodeType!==3||(L=I+_),ft!==b||p!==0&&ft.nodeType!==3||(W=I+p),ft.nodeType===3&&(I+=ft.nodeValue.length),(ot=ft.firstChild)!==null;)st=ft,ft=ot;for(;;){if(ft===o)break e;if(st===d&&++et===_&&(L=I),st===b&&++ut===p&&(W=I),(ot=ft.nextSibling)!==null)break;ft=st,st=ft.parentNode}ft=ot}d=L===-1||W===-1?null:{start:L,end:W}}else d=null}d=d||{start:0,end:0}}else d=null;for(I0={focusedElem:o,selectionRange:d},Wm=!1,hi=l;hi!==null;)if(l=hi,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,hi=o;else for(;hi!==null;){switch(l=hi,b=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&b!==null){o=void 0,d=l,_=b.memoizedProps,b=b.memoizedState,p=d.stateNode;try{var Xt=$l(d.type,_,d.elementType===d.type);o=p.getSnapshotBeforeUpdate(Xt,b),p.__reactInternalSnapshotBeforeUpdate=o}catch(qt){ln(d,d.return,qt)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,d=o.nodeType,d===9)N0(o);else if(d===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":N0(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=l.sibling,o!==null){o.return=l.return,hi=o;break}hi=l.return}}function IC(o,l,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:xa(o,d),p&4&&sd(5,d);break;case 1:if(xa(o,d),p&4)if(o=d.stateNode,l===null)try{o.componentDidMount()}catch(I){ln(d,d.return,I)}else{var _=$l(d.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(_,l,o.__reactInternalSnapshotBeforeUpdate)}catch(I){ln(d,d.return,I)}}p&64&&EC(d),p&512&&rd(d,d.return);break;case 3:if(xa(o,d),p&64&&(o=d.updateQueue,o!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{uA(o,l)}catch(I){ln(d,d.return,I)}}break;case 27:l===null&&p&4&&CC(d);case 26:case 5:xa(o,d),l===null&&p&4&&SC(d),p&512&&rd(d,d.return);break;case 12:xa(o,d);break;case 13:xa(o,d),p&4&&NC(o,d),p&64&&(o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(d=y3.bind(null,d),k3(o,d))));break;case 22:if(p=d.memoizedState!==null||ko,!p){l=l!==null&&l.memoizedState!==null||jn,_=ko;var b=jn;ko=p,(jn=l)&&!b?Sa(o,d,(d.subtreeFlags&8772)!==0):xa(o,d),ko=_,jn=b}break;case 30:break;default:xa(o,d)}}function DC(o){var l=o.alternate;l!==null&&(o.alternate=null,DC(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&gr(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Tn=null,us=!1;function Lo(o,l,d){for(d=d.child;d!==null;)MC(o,l,d),d=d.sibling}function MC(o,l,d){if(re&&typeof re.onCommitFiberUnmount=="function")try{re.onCommitFiberUnmount(Je,d)}catch{}switch(d.tag){case 26:jn||Kr(d,l),Lo(o,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:jn||Kr(d,l);var p=Tn,_=us;Ma(d.type)&&(Tn=d.stateNode,us=!1),Lo(o,l,d),pd(d.stateNode),Tn=p,us=_;break;case 5:jn||Kr(d,l);case 6:if(p=Tn,_=us,Tn=null,Lo(o,l,d),Tn=p,us=_,Tn!==null)if(us)try{(Tn.nodeType===9?Tn.body:Tn.nodeName==="HTML"?Tn.ownerDocument.body:Tn).removeChild(d.stateNode)}catch(b){ln(d,l,b)}else try{Tn.removeChild(d.stateNode)}catch(b){ln(d,l,b)}break;case 18:Tn!==null&&(us?(o=Tn,vR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,d.stateNode),wd(o)):vR(Tn,d.stateNode));break;case 4:p=Tn,_=us,Tn=d.stateNode.containerInfo,us=!0,Lo(o,l,d),Tn=p,us=_;break;case 0:case 11:case 14:case 15:jn||Ea(2,d,l),jn||Ea(4,d,l),Lo(o,l,d);break;case 1:jn||(Kr(d,l),p=d.stateNode,typeof p.componentWillUnmount=="function"&&xC(d,l,p)),Lo(o,l,d);break;case 21:Lo(o,l,d);break;case 22:jn=(p=jn)||d.memoizedState!==null,Lo(o,l,d),jn=p;break;default:Lo(o,l,d)}}function NC(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{wd(o)}catch(d){ln(l,l.return,d)}}function c3(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new RC),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new RC),l;default:throw Error(i(435,o.tag))}}function r0(o,l){var d=c3(o);l.forEach(function(p){var _=_3.bind(null,o,p);d.has(p)||(d.add(p),p.then(_,_))})}function Ds(o,l){var d=l.deletions;if(d!==null)for(var p=0;p<d.length;p++){var _=d[p],b=o,I=l,L=I;t:for(;L!==null;){switch(L.tag){case 27:if(Ma(L.type)){Tn=L.stateNode,us=!1;break t}break;case 5:Tn=L.stateNode,us=!1;break t;case 3:case 4:Tn=L.stateNode.containerInfo,us=!0;break t}L=L.return}if(Tn===null)throw Error(i(160));MC(b,I,_),Tn=null,us=!1,b=_.alternate,b!==null&&(b.return=null),_.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)PC(l,o),l=l.sibling}var Er=null;function PC(o,l){var d=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ds(l,o),Ms(o),p&4&&(Ea(3,o,o.return),sd(3,o),Ea(5,o,o.return));break;case 1:Ds(l,o),Ms(o),p&512&&(jn||d===null||Kr(d,d.return)),p&64&&ko&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var _=Er;if(Ds(l,o),Ms(o),p&512&&(jn||d===null||Kr(d,d.return)),p&4){var b=d!==null?d.memoizedState:null;if(p=o.memoizedState,d===null)if(p===null)if(o.stateNode===null){t:{p=o.type,d=o.memoizedProps,_=_.ownerDocument||_;e:switch(p){case"title":b=_.getElementsByTagName("title")[0],(!b||b[Ji]||b[se]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=_.createElement(p),_.head.insertBefore(b,_.querySelector("head > title"))),xi(b,p,d),b[se]=o,Ke(b),p=b;break t;case"link":var I=CR("link","href",_).get(p+(d.href||""));if(I){for(var L=0;L<I.length;L++)if(b=I[L],b.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&b.getAttribute("rel")===(d.rel==null?null:d.rel)&&b.getAttribute("title")===(d.title==null?null:d.title)&&b.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){I.splice(L,1);break e}}b=_.createElement(p),xi(b,p,d),_.head.appendChild(b);break;case"meta":if(I=CR("meta","content",_).get(p+(d.content||""))){for(L=0;L<I.length;L++)if(b=I[L],b.getAttribute("content")===(d.content==null?null:""+d.content)&&b.getAttribute("name")===(d.name==null?null:d.name)&&b.getAttribute("property")===(d.property==null?null:d.property)&&b.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&b.getAttribute("charset")===(d.charSet==null?null:d.charSet)){I.splice(L,1);break e}}b=_.createElement(p),xi(b,p,d),_.head.appendChild(b);break;default:throw Error(i(468,p))}b[se]=o,Ke(b),p=b}o.stateNode=p}else RR(_,o.type,o.stateNode);else o.stateNode=AR(_,p,o.memoizedProps);else b!==p?(b===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):b.count--,p===null?RR(_,o.type,o.stateNode):AR(_,p,o.memoizedProps)):p===null&&o.stateNode!==null&&e0(o,o.memoizedProps,d.memoizedProps)}break;case 27:Ds(l,o),Ms(o),p&512&&(jn||d===null||Kr(d,d.return)),d!==null&&p&4&&e0(o,o.memoizedProps,d.memoizedProps);break;case 5:if(Ds(l,o),Ms(o),p&512&&(jn||d===null||Kr(d,d.return)),o.flags&32){_=o.stateNode;try{U(_,"")}catch(ot){ln(o,o.return,ot)}}p&4&&o.stateNode!=null&&(_=o.memoizedProps,e0(o,_,d!==null?d.memoizedProps:_)),p&1024&&(s0=!0);break;case 6:if(Ds(l,o),Ms(o),p&4){if(o.stateNode===null)throw Error(i(162));p=o.memoizedProps,d=o.stateNode;try{d.nodeValue=p}catch(ot){ln(o,o.return,ot)}}break;case 3:if(Hm=null,_=Er,Er=Bm(l.containerInfo),Ds(l,o),Er=_,Ms(o),p&4&&d!==null&&d.memoizedState.isDehydrated)try{wd(l.containerInfo)}catch(ot){ln(o,o.return,ot)}s0&&(s0=!1,OC(o));break;case 4:p=Er,Er=Bm(o.stateNode.containerInfo),Ds(l,o),Ms(o),Er=p;break;case 12:Ds(l,o),Ms(o);break;case 13:Ds(l,o),Ms(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(h0=de()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,r0(o,p)));break;case 22:_=o.memoizedState!==null;var W=d!==null&&d.memoizedState!==null,et=ko,ut=jn;if(ko=et||_,jn=ut||W,Ds(l,o),jn=ut,ko=et,Ms(o),p&8192)t:for(l=o.stateNode,l._visibility=_?l._visibility&-2:l._visibility|1,_&&(d===null||W||ko||jn||Wl(o)),d=null,l=o;;){if(l.tag===5||l.tag===26){if(d===null){W=d=l;try{if(b=W.stateNode,_)I=b.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{L=W.stateNode;var ft=W.memoizedProps.style,st=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;L.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(ot){ln(W,W.return,ot)}}}else if(l.tag===6){if(d===null){W=l;try{W.stateNode.nodeValue=_?"":W.memoizedProps}catch(ot){ln(W,W.return,ot)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break t;for(;l.sibling===null;){if(l.return===null||l.return===o)break t;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=o.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,r0(o,d))));break;case 19:Ds(l,o),Ms(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,r0(o,p)));break;case 30:break;case 21:break;default:Ds(l,o),Ms(o)}}function Ms(o){var l=o.flags;if(l&2){try{for(var d,p=o.return;p!==null;){if(AC(p)){d=p;break}p=p.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var _=d.stateNode,b=n0(o);Rm(o,b,_);break;case 5:var I=d.stateNode;d.flags&32&&(U(I,""),d.flags&=-33);var L=n0(o);Rm(o,L,I);break;case 3:case 4:var W=d.stateNode.containerInfo,et=n0(o);i0(o,et,W);break;default:throw Error(i(161))}}catch(ut){ln(o,o.return,ut)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function OC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;OC(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function xa(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)IC(o,l.alternate,l),l=l.sibling}function Wl(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Ea(4,l,l.return),Wl(l);break;case 1:Kr(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&xC(l,l.return,d),Wl(l);break;case 27:pd(l.stateNode);case 26:case 5:Kr(l,l.return),Wl(l);break;case 22:l.memoizedState===null&&Wl(l);break;case 30:Wl(l);break;default:Wl(l)}o=o.sibling}}function Sa(o,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,_=o,b=l,I=b.flags;switch(b.tag){case 0:case 11:case 15:Sa(_,b,d),sd(4,b);break;case 1:if(Sa(_,b,d),p=b,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(et){ln(p,p.return,et)}if(p=b,_=p.updateQueue,_!==null){var L=p.stateNode;try{var W=_.shared.hiddenCallbacks;if(W!==null)for(_.shared.hiddenCallbacks=null,_=0;_<W.length;_++)cA(W[_],L)}catch(et){ln(p,p.return,et)}}d&&I&64&&EC(b),rd(b,b.return);break;case 27:CC(b);case 26:case 5:Sa(_,b,d),d&&p===null&&I&4&&SC(b),rd(b,b.return);break;case 12:Sa(_,b,d);break;case 13:Sa(_,b,d),d&&I&4&&NC(_,b);break;case 22:b.memoizedState===null&&Sa(_,b,d),rd(b,b.return);break;case 30:break;default:Sa(_,b,d)}l=l.sibling}}function o0(o,l){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&qh(d))}function a0(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&qh(o))}function Xr(o,l,d,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)kC(o,l,d,p),l=l.sibling}function kC(o,l,d,p){var _=l.flags;switch(l.tag){case 0:case 11:case 15:Xr(o,l,d,p),_&2048&&sd(9,l);break;case 1:Xr(o,l,d,p);break;case 3:Xr(o,l,d,p),_&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&qh(o)));break;case 12:if(_&2048){Xr(o,l,d,p),o=l.stateNode;try{var b=l.memoizedProps,I=b.id,L=b.onPostCommit;typeof L=="function"&&L(I,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(W){ln(l,l.return,W)}}else Xr(o,l,d,p);break;case 13:Xr(o,l,d,p);break;case 23:break;case 22:b=l.stateNode,I=l.alternate,l.memoizedState!==null?b._visibility&2?Xr(o,l,d,p):od(o,l):b._visibility&2?Xr(o,l,d,p):(b._visibility|=2,cu(o,l,d,p,(l.subtreeFlags&10256)!==0)),_&2048&&o0(I,l);break;case 24:Xr(o,l,d,p),_&2048&&a0(l.alternate,l);break;default:Xr(o,l,d,p)}}function cu(o,l,d,p,_){for(_=_&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var b=o,I=l,L=d,W=p,et=I.flags;switch(I.tag){case 0:case 11:case 15:cu(b,I,L,W,_),sd(8,I);break;case 23:break;case 22:var ut=I.stateNode;I.memoizedState!==null?ut._visibility&2?cu(b,I,L,W,_):od(b,I):(ut._visibility|=2,cu(b,I,L,W,_)),_&&et&2048&&o0(I.alternate,I);break;case 24:cu(b,I,L,W,_),_&&et&2048&&a0(I.alternate,I);break;default:cu(b,I,L,W,_)}l=l.sibling}}function od(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=o,p=l,_=p.flags;switch(p.tag){case 22:od(d,p),_&2048&&o0(p.alternate,p);break;case 24:od(d,p),_&2048&&a0(p.alternate,p);break;default:od(d,p)}l=l.sibling}}var ad=8192;function uu(o){if(o.subtreeFlags&ad)for(o=o.child;o!==null;)LC(o),o=o.sibling}function LC(o){switch(o.tag){case 26:uu(o),o.flags&ad&&o.memoizedState!==null&&Y3(Er,o.memoizedState,o.memoizedProps);break;case 5:uu(o);break;case 3:case 4:var l=Er;Er=Bm(o.stateNode.containerInfo),uu(o),Er=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=ad,ad=16777216,uu(o),ad=l):uu(o));break;default:uu(o)}}function VC(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function ld(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];hi=p,UC(p,o)}VC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)jC(o),o=o.sibling}function jC(o){switch(o.tag){case 0:case 11:case 15:ld(o),o.flags&2048&&Ea(9,o,o.return);break;case 3:ld(o);break;case 12:ld(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Im(o)):ld(o);break;default:ld(o)}}function Im(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];hi=p,UC(p,o)}VC(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Ea(8,l,l.return),Im(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Im(l));break;default:Im(l)}o=o.sibling}}function UC(o,l){for(;hi!==null;){var d=hi;switch(d.tag){case 0:case 11:case 15:Ea(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:qh(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,hi=p;else t:for(d=o;hi!==null;){p=hi;var _=p.sibling,b=p.return;if(DC(p),p===d){hi=null;break t}if(_!==null){_.return=b,hi=_;break t}hi=b}}}var u3={getCacheForType:function(o){var l=ki(ii),d=l.data.get(o);return d===void 0&&(d=o(),l.data.set(o,d)),d}},h3=typeof WeakMap=="function"?WeakMap:Map,Xe=0,cn=null,ve=null,De=0,Qe=0,Ns=null,Aa=!1,hu=!1,l0=!1,Vo=0,Nn=0,Ca=0,Gl=0,c0=0,er=0,du=0,cd=null,hs=null,u0=!1,h0=0,Dm=1/0,Mm=null,Ra=null,Ei=0,Ia=null,fu=null,pu=0,d0=0,f0=null,FC=null,ud=0,p0=null;function Ps(){if((Xe&2)!==0&&De!==0)return De&-De;if(X.T!==null){var o=eu;return o!==0?o:T0()}return pe()}function BC(){er===0&&(er=(De&536870912)===0||Fe?ke():536870912);var o=tr.current;return o!==null&&(o.flags|=32),er}function Os(o,l,d){(o===cn&&(Qe===2||Qe===9)||o.cancelPendingCommit!==null)&&(mu(o,0),Da(o,De,er,!1)),Gt(o,d),((Xe&2)===0||o!==cn)&&(o===cn&&((Xe&2)===0&&(Gl|=d),Nn===4&&Da(o,De,er,!1)),Qr(o))}function zC(o,l,d){if((Xe&6)!==0)throw Error(i(327));var p=!d&&(l&124)===0&&(l&o.expiredLanes)===0||Kt(o,l),_=p?p3(o,l):y0(o,l,!0),b=p;do{if(_===0){hu&&!p&&Da(o,l,0,!1);break}else{if(d=o.current.alternate,b&&!d3(d)){_=y0(o,l,!1),b=!1;continue}if(_===2){if(b=l,o.errorRecoveryDisabledLanes&b)var I=0;else I=o.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;t:{var L=o;_=cd;var W=L.current.memoizedState.isDehydrated;if(W&&(mu(L,I).flags|=256),I=y0(L,I,!1),I!==2){if(l0&&!W){L.errorRecoveryDisabledLanes|=b,Gl|=b,_=4;break t}b=hs,hs=_,b!==null&&(hs===null?hs=b:hs.push.apply(hs,b))}_=I}if(b=!1,_!==2)continue}}if(_===1){mu(o,0),Da(o,l,0,!0);break}t:{switch(p=o,b=_,b){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Da(p,l,er,!Aa);break t;case 2:hs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(_=h0+300-de(),10<_)){if(Da(p,l,er,!Aa),Ft(p,0,!0)!==0)break t;p.timeoutHandle=yR(HC.bind(null,p,d,hs,Mm,u0,l,er,Gl,du,Aa,b,2,-0,0),_);break t}HC(p,d,hs,Mm,u0,l,er,Gl,du,Aa,b,0,-0,0)}}break}while(!0);Qr(o)}function HC(o,l,d,p,_,b,I,L,W,et,ut,ft,st,ot){if(o.timeoutHandle=-1,ft=l.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(yd={stylesheets:null,count:0,unsuspend:G3},LC(l),ft=K3(),ft!==null)){o.cancelPendingCommit=ft(XC.bind(null,o,l,b,d,p,_,I,L,W,ut,1,st,ot)),Da(o,b,I,!et);return}XC(o,l,b,d,p,_,I,L,W)}function d3(o){for(var l=o;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var _=d[p],b=_.getSnapshot;_=_.value;try{if(!Rs(b(),_))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Da(o,l,d,p){l&=~c0,l&=~Gl,o.suspendedLanes|=l,o.pingedLanes&=~l,p&&(o.warmLanes|=l),p=o.expirationTimes;for(var _=l;0<_;){var b=31-Ye(_),I=1<<b;p[b]=-1,_&=~I}d!==0&&jt(o,d,l)}function Nm(){return(Xe&6)===0?(hd(0),!1):!0}function m0(){if(ve!==null){if(Qe===0)var o=ve.return;else o=ve,Io=Bl=null,Nv(o),au=null,ed=0,o=ve;for(;o!==null;)wC(o.alternate,o),o=o.return;ve=null}}function mu(o,l){var d=o.timeoutHandle;d!==-1&&(o.timeoutHandle=-1,D3(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),m0(),cn=o,ve=d=Ao(o.current,null),De=l,Qe=0,Ns=null,Aa=!1,hu=Kt(o,l),l0=!1,du=er=c0=Gl=Ca=Nn=0,hs=cd=null,u0=!1,(l&8)!==0&&(l|=l&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=l;0<p;){var _=31-Ye(p),b=1<<_;l|=o[_],p&=~b}return Vo=l,tm(),d}function qC(o,l){me=null,X.H=vm,l===Wh||l===cm?(l=aA(),Qe=3):l===sA?(l=aA(),Qe=4):Qe=l===lC?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ns=l,ve===null&&(Nn=1,xm(o,Xs(l,o.current)))}function $C(){var o=X.H;return X.H=vm,o===null?vm:o}function WC(){var o=X.A;return X.A=u3,o}function g0(){Nn=4,Aa||(De&4194048)!==De&&tr.current!==null||(hu=!0),(Ca&134217727)===0&&(Gl&134217727)===0||cn===null||Da(cn,De,er,!1)}function y0(o,l,d){var p=Xe;Xe|=2;var _=$C(),b=WC();(cn!==o||De!==l)&&(Mm=null,mu(o,l)),l=!1;var I=Nn;t:do try{if(Qe!==0&&ve!==null){var L=ve,W=Ns;switch(Qe){case 8:m0(),I=6;break t;case 3:case 2:case 9:case 6:tr.current===null&&(l=!0);var et=Qe;if(Qe=0,Ns=null,gu(o,L,W,et),d&&hu){I=0;break t}break;default:et=Qe,Qe=0,Ns=null,gu(o,L,W,et)}}f3(),I=Nn;break}catch(ut){qC(o,ut)}while(!0);return l&&o.shellSuspendCounter++,Io=Bl=null,Xe=p,X.H=_,X.A=b,ve===null&&(cn=null,De=0,tm()),I}function f3(){for(;ve!==null;)GC(ve)}function p3(o,l){var d=Xe;Xe|=2;var p=$C(),_=WC();cn!==o||De!==l?(Mm=null,Dm=de()+500,mu(o,l)):hu=Kt(o,l);t:do try{if(Qe!==0&&ve!==null){l=ve;var b=Ns;e:switch(Qe){case 1:Qe=0,Ns=null,gu(o,l,b,1);break;case 2:case 9:if(rA(b)){Qe=0,Ns=null,YC(l);break}l=function(){Qe!==2&&Qe!==9||cn!==o||(Qe=7),Qr(o)},b.then(l,l);break t;case 3:Qe=7;break t;case 4:Qe=5;break t;case 7:rA(b)?(Qe=0,Ns=null,YC(l)):(Qe=0,Ns=null,gu(o,l,b,7));break;case 5:var I=null;switch(ve.tag){case 26:I=ve.memoizedState;case 5:case 27:var L=ve;if(!I||IR(I)){Qe=0,Ns=null;var W=L.sibling;if(W!==null)ve=W;else{var et=L.return;et!==null?(ve=et,Pm(et)):ve=null}break e}}Qe=0,Ns=null,gu(o,l,b,5);break;case 6:Qe=0,Ns=null,gu(o,l,b,6);break;case 8:m0(),Nn=6;break t;default:throw Error(i(462))}}m3();break}catch(ut){qC(o,ut)}while(!0);return Io=Bl=null,X.H=p,X.A=_,Xe=d,ve!==null?0:(cn=null,De=0,tm(),Nn)}function m3(){for(;ve!==null&&!Oe();)GC(ve)}function GC(o){var l=bC(o.alternate,o,Vo);o.memoizedProps=o.pendingProps,l===null?Pm(o):ve=l}function YC(o){var l=o,d=l.alternate;switch(l.tag){case 15:case 0:l=pC(d,l,l.pendingProps,l.type,void 0,De);break;case 11:l=pC(d,l,l.pendingProps,l.type.render,l.ref,De);break;case 5:Nv(l);default:wC(d,l),l=ve=KS(l,Vo),l=bC(d,l,Vo)}o.memoizedProps=o.pendingProps,l===null?Pm(o):ve=l}function gu(o,l,d,p){Io=Bl=null,Nv(l),au=null,ed=0;var _=l.return;try{if(s3(o,_,l,d,De)){Nn=1,xm(o,Xs(d,o.current)),ve=null;return}}catch(b){if(_!==null)throw ve=_,b;Nn=1,xm(o,Xs(d,o.current)),ve=null;return}l.flags&32768?(Fe||p===1?o=!0:hu||(De&536870912)!==0?o=!1:(Aa=o=!0,(p===2||p===9||p===3||p===6)&&(p=tr.current,p!==null&&p.tag===13&&(p.flags|=16384))),KC(l,o)):Pm(l)}function Pm(o){var l=o;do{if((l.flags&32768)!==0){KC(l,Aa);return}o=l.return;var d=o3(l.alternate,l,Vo);if(d!==null){ve=d;return}if(l=l.sibling,l!==null){ve=l;return}ve=l=o}while(l!==null);Nn===0&&(Nn=5)}function KC(o,l){do{var d=a3(o.alternate,o);if(d!==null){d.flags&=32767,ve=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(o=o.sibling,o!==null)){ve=o;return}ve=o=d}while(o!==null);Nn=6,ve=null}function XC(o,l,d,p,_,b,I,L,W){o.cancelPendingCommit=null;do Om();while(Ei!==0);if((Xe&6)!==0)throw Error(i(327));if(l!==null){if(l===o.current)throw Error(i(177));if(b=l.lanes|l.childLanes,b|=av,Ae(o,d,b,I,L,W),o===cn&&(ve=cn=null,De=0),fu=l,Ia=o,pu=d,d0=b,f0=_,FC=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,v3(Ve,function(){return eR(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=X.T,X.T=null,_=nt.p,nt.p=2,I=Xe,Xe|=4;try{l3(o,l,d)}finally{Xe=I,nt.p=_,X.T=p}}Ei=1,QC(),ZC(),JC()}}function QC(){if(Ei===1){Ei=0;var o=Ia,l=fu,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=X.T,X.T=null;var p=nt.p;nt.p=2;var _=Xe;Xe|=4;try{PC(l,o);var b=I0,I=US(o.containerInfo),L=b.focusedElem,W=b.selectionRange;if(I!==L&&L&&L.ownerDocument&&jS(L.ownerDocument.documentElement,L)){if(W!==null&&nv(L)){var et=W.start,ut=W.end;if(ut===void 0&&(ut=et),"selectionStart"in L)L.selectionStart=et,L.selectionEnd=Math.min(ut,L.value.length);else{var ft=L.ownerDocument||document,st=ft&&ft.defaultView||window;if(st.getSelection){var ot=st.getSelection(),Xt=L.textContent.length,qt=Math.min(W.start,Xt),sn=W.end===void 0?qt:Math.min(W.end,Xt);!ot.extend&&qt>sn&&(I=sn,sn=qt,qt=I);var Q=VS(L,qt),K=VS(L,sn);if(Q&&K&&(ot.rangeCount!==1||ot.anchorNode!==Q.node||ot.anchorOffset!==Q.offset||ot.focusNode!==K.node||ot.focusOffset!==K.offset)){var tt=ft.createRange();tt.setStart(Q.node,Q.offset),ot.removeAllRanges(),qt>sn?(ot.addRange(tt),ot.extend(K.node,K.offset)):(tt.setEnd(K.node,K.offset),ot.addRange(tt))}}}}for(ft=[],ot=L;ot=ot.parentNode;)ot.nodeType===1&&ft.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ft.length;L++){var ht=ft[L];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Wm=!!R0,I0=R0=null}finally{Xe=_,nt.p=p,X.T=d}}o.current=l,Ei=2}}function ZC(){if(Ei===2){Ei=0;var o=Ia,l=fu,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=X.T,X.T=null;var p=nt.p;nt.p=2;var _=Xe;Xe|=4;try{IC(o,l.alternate,l)}finally{Xe=_,nt.p=p,X.T=d}}Ei=3}}function JC(){if(Ei===4||Ei===3){Ei=0,Ge();var o=Ia,l=fu,d=pu,p=FC;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ei=5:(Ei=0,fu=Ia=null,tR(o,o.pendingLanes));var _=o.pendingLanes;if(_===0&&(Ra=null),Ht(d),l=l.stateNode,re&&typeof re.onCommitFiberRoot=="function")try{re.onCommitFiberRoot(Je,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=X.T,_=nt.p,nt.p=2,X.T=null;try{for(var b=o.onRecoverableError,I=0;I<p.length;I++){var L=p[I];b(L.value,{componentStack:L.stack})}}finally{X.T=l,nt.p=_}}(pu&3)!==0&&Om(),Qr(o),_=o.pendingLanes,(d&4194090)!==0&&(_&42)!==0?o===p0?ud++:(ud=0,p0=o):ud=0,hd(0)}}function tR(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,qh(l)))}function Om(o){return QC(),ZC(),JC(),eR()}function eR(){if(Ei!==5)return!1;var o=Ia,l=d0;d0=0;var d=Ht(pu),p=X.T,_=nt.p;try{nt.p=32>d?32:d,X.T=null,d=f0,f0=null;var b=Ia,I=pu;if(Ei=0,fu=Ia=null,pu=0,(Xe&6)!==0)throw Error(i(331));var L=Xe;if(Xe|=4,jC(b.current),kC(b,b.current,I,d),Xe=L,hd(0,!1),re&&typeof re.onPostCommitFiberRoot=="function")try{re.onPostCommitFiberRoot(Je,b)}catch{}return!0}finally{nt.p=_,X.T=p,tR(o,l)}}function nR(o,l,d){l=Xs(d,l),l=Wv(o.stateNode,l,2),o=va(o,l,2),o!==null&&(Gt(o,2),Qr(o))}function ln(o,l,d){if(o.tag===3)nR(o,o,d);else for(;l!==null;){if(l.tag===3){nR(l,o,d);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ra===null||!Ra.has(p))){o=Xs(d,o),d=oC(2),p=va(l,d,2),p!==null&&(aC(d,p,l,o),Gt(p,2),Qr(p));break}}l=l.return}}function _0(o,l,d){var p=o.pingCache;if(p===null){p=o.pingCache=new h3;var _=new Set;p.set(l,_)}else _=p.get(l),_===void 0&&(_=new Set,p.set(l,_));_.has(d)||(l0=!0,_.add(d),o=g3.bind(null,o,l,d),l.then(o,o))}function g3(o,l,d){var p=o.pingCache;p!==null&&p.delete(l),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,cn===o&&(De&d)===d&&(Nn===4||Nn===3&&(De&62914560)===De&&300>de()-h0?(Xe&2)===0&&mu(o,0):c0|=d,du===De&&(du=0)),Qr(o)}function iR(o,l){l===0&&(l=te()),o=Qc(o,l),o!==null&&(Gt(o,l),Qr(o))}function y3(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),iR(o,d)}function _3(o,l){var d=0;switch(o.tag){case 13:var p=o.stateNode,_=o.memoizedState;_!==null&&(d=_.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(l),iR(o,d)}function v3(o,l){return Mt(o,l)}var km=null,yu=null,v0=!1,Lm=!1,b0=!1,Yl=0;function Qr(o){o!==yu&&o.next===null&&(yu===null?km=yu=o:yu=yu.next=o),Lm=!0,v0||(v0=!0,T3())}function hd(o,l){if(!b0&&Lm){b0=!0;do for(var d=!1,p=km;p!==null;){if(o!==0){var _=p.pendingLanes;if(_===0)var b=0;else{var I=p.suspendedLanes,L=p.pingedLanes;b=(1<<31-Ye(42|o)+1)-1,b&=_&~(I&~L),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(d=!0,aR(p,b))}else b=De,b=Ft(p,p===cn?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(b&3)===0||Kt(p,b)||(d=!0,aR(p,b));p=p.next}while(d);b0=!1}}function b3(){sR()}function sR(){Lm=v0=!1;var o=0;Yl!==0&&(I3()&&(o=Yl),Yl=0);for(var l=de(),d=null,p=km;p!==null;){var _=p.next,b=rR(p,l);b===0?(p.next=null,d===null?km=_:d.next=_,_===null&&(yu=d)):(d=p,(o!==0||(b&3)!==0)&&(Lm=!0)),p=_}hd(o)}function rR(o,l){for(var d=o.suspendedLanes,p=o.pingedLanes,_=o.expirationTimes,b=o.pendingLanes&-62914561;0<b;){var I=31-Ye(b),L=1<<I,W=_[I];W===-1?((L&d)===0||(L&p)!==0)&&(_[I]=fe(L,l)):W<=l&&(o.expiredLanes|=L),b&=~L}if(l=cn,d=De,d=Ft(o,o===l?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,d===0||o===l&&(Qe===2||Qe===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&he(p),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||Kt(o,d)){if(l=d&-d,l===o.callbackPriority)return l;switch(p!==null&&he(p),Ht(d)){case 2:case 8:d=Ze;break;case 32:d=Ve;break;case 268435456:d=Qi;break;default:d=Ve}return p=oR.bind(null,o),d=Mt(d,p),o.callbackPriority=l,o.callbackNode=d,l}return p!==null&&p!==null&&he(p),o.callbackPriority=2,o.callbackNode=null,2}function oR(o,l){if(Ei!==0&&Ei!==5)return o.callbackNode=null,o.callbackPriority=0,null;var d=o.callbackNode;if(Om()&&o.callbackNode!==d)return null;var p=De;return p=Ft(o,o===cn?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(zC(o,p,l),rR(o,de()),o.callbackNode!=null&&o.callbackNode===d?oR.bind(null,o):null)}function aR(o,l){if(Om())return null;zC(o,l,!0)}function T3(){M3(function(){(Xe&6)!==0?Mt(En,b3):sR()})}function T0(){return Yl===0&&(Yl=ke()),Yl}function lR(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:bn(""+o)}function cR(o,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,o.id&&d.setAttribute("form",o.id),l.parentNode.insertBefore(d,l),o=new FormData(o),d.parentNode.removeChild(d),o}function w3(o,l,d,p,_){if(l==="submit"&&d&&d.stateNode===_){var b=lR((_[ye]||null).action),I=p.submitter;I&&(l=(l=I[ye]||null)?lR(l.formAction):I.getAttribute("formAction"),l!==null&&(b=l,I=null));var L=new Fc("action","action",null,p,_);o.push({event:L,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Yl!==0){var W=I?cR(_,I):new FormData(_);Bv(d,{pending:!0,data:W,method:_.method,action:b},null,W)}}else typeof b=="function"&&(L.preventDefault(),W=I?cR(_,I):new FormData(_),Bv(d,{pending:!0,data:W,method:_.method,action:b},b,W))},currentTarget:_}]})}}for(var w0=0;w0<ov.length;w0++){var E0=ov[w0],E3=E0.toLowerCase(),x3=E0[0].toUpperCase()+E0.slice(1);wr(E3,"on"+x3)}wr(zS,"onAnimationEnd"),wr(HS,"onAnimationIteration"),wr(qS,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(BU,"onTransitionRun"),wr(zU,"onTransitionStart"),wr(HU,"onTransitionCancel"),wr($S,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dd));function uR(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var p=o[d],_=p.event;p=p.listeners;t:{var b=void 0;if(l)for(var I=p.length-1;0<=I;I--){var L=p[I],W=L.instance,et=L.currentTarget;if(L=L.listener,W!==b&&_.isPropagationStopped())break t;b=L,_.currentTarget=et;try{b(_)}catch(ut){Em(ut)}_.currentTarget=null,b=W}else for(I=0;I<p.length;I++){if(L=p[I],W=L.instance,et=L.currentTarget,L=L.listener,W!==b&&_.isPropagationStopped())break t;b=L,_.currentTarget=et;try{b(_)}catch(ut){Em(ut)}_.currentTarget=null,b=W}}}}function be(o,l){var d=l[Mi];d===void 0&&(d=l[Mi]=new Set);var p=o+"__bubble";d.has(p)||(hR(l,o,2,!1),d.add(p))}function x0(o,l,d){var p=0;l&&(p|=4),hR(d,o,p,l)}var Vm="_reactListening"+Math.random().toString(36).slice(2);function S0(o){if(!o[Vm]){o[Vm]=!0,yr.forEach(function(d){d!=="selectionchange"&&(S3.has(d)||x0(d,!1,o),x0(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Vm]||(l[Vm]=!0,x0("selectionchange",!1,l))}}function hR(o,l,d,p){switch(kR(l)){case 2:var _=Z3;break;case 8:_=J3;break;default:_=U0}d=_.bind(null,l,d,o),_=void 0,!Ys||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),p?_!==void 0?o.addEventListener(l,d,{capture:!0,passive:_}):o.addEventListener(l,d,!0):_!==void 0?o.addEventListener(l,d,{passive:_}):o.addEventListener(l,d,!1)}function A0(o,l,d,p,_){var b=p;if((l&1)===0&&(l&2)===0&&p!==null)t:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var L=p.stateNode.containerInfo;if(L===_)break;if(I===4)for(I=p.return;I!==null;){var W=I.tag;if((W===3||W===4)&&I.stateNode.containerInfo===_)return;I=I.return}for(;L!==null;){if(I=Hs(L),I===null)return;if(W=I.tag,W===5||W===6||W===26||W===27){p=b=I;continue t}L=L.parentNode}}p=p.return}Up(function(){var et=b,ut=Sn(d),ft=[];t:{var st=WS.get(o);if(st!==void 0){var ot=Fc,Xt=o;switch(o){case"keypress":if(zr(d)===0)break t;case"keydown":case"keyup":ot=Wc;break;case"focusin":Xt="focus",ot=Hc;break;case"focusout":Xt="blur",ot=Hc;break;case"beforeblur":case"afterblur":ot=Hc;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Ks;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Z_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Gp;break;case zS:case HS:case qS:ot=qc;break;case $S:ot=Kp;break;case"scroll":case"scrollend":ot=Fp;break;case"wheel":ot=Gc;break;case"copy":case"cut":case"paste":ot=$c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Lh;break;case"toggle":case"beforetoggle":ot=Qp}var qt=(l&4)!==0,sn=!qt&&(o==="scroll"||o==="scrollend"),Q=qt?st!==null?st+"Capture":null:st;qt=[];for(var K=et,tt;K!==null;){var ht=K;if(tt=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||tt===null||Q===null||(ht=Cl(K,Q),ht!=null&&qt.push(fd(K,ht,tt))),sn)break;K=K.return}0<qt.length&&(st=new ot(st,Xt,null,d,ut),ft.push({event:st,listeners:qt}))}}if((l&7)===0){t:{if(st=o==="mouseover"||o==="pointerover",ot=o==="mouseout"||o==="pointerout",st&&d!==pn&&(Xt=d.relatedTarget||d.fromElement)&&(Hs(Xt)||Xt[tn]))break t;if((ot||st)&&(st=ut.window===ut?ut:(st=ut.ownerDocument)?st.defaultView||st.parentWindow:window,ot?(Xt=d.relatedTarget||d.toElement,ot=et,Xt=Xt?Hs(Xt):null,Xt!==null&&(sn=r(Xt),qt=Xt.tag,Xt!==sn||qt!==5&&qt!==27&&qt!==6)&&(Xt=null)):(ot=null,Xt=et),ot!==Xt)){if(qt=Ks,ht="onMouseLeave",Q="onMouseEnter",K="mouse",(o==="pointerout"||o==="pointerover")&&(qt=Lh,ht="onPointerLeave",Q="onPointerEnter",K="pointer"),sn=ot==null?st:Ss(ot),tt=Xt==null?st:Ss(Xt),st=new qt(ht,K+"leave",ot,d,ut),st.target=sn,st.relatedTarget=tt,ht=null,Hs(ut)===et&&(qt=new qt(Q,K+"enter",Xt,d,ut),qt.target=tt,qt.relatedTarget=sn,ht=qt),sn=ht,ot&&Xt)e:{for(qt=ot,Q=Xt,K=0,tt=qt;tt;tt=_u(tt))K++;for(tt=0,ht=Q;ht;ht=_u(ht))tt++;for(;0<K-tt;)qt=_u(qt),K--;for(;0<tt-K;)Q=_u(Q),tt--;for(;K--;){if(qt===Q||Q!==null&&qt===Q.alternate)break e;qt=_u(qt),Q=_u(Q)}qt=null}else qt=null;ot!==null&&dR(ft,st,ot,qt,!1),Xt!==null&&sn!==null&&dR(ft,sn,Xt,qt,!0)}}t:{if(st=et?Ss(et):window,ot=st.nodeName&&st.nodeName.toLowerCase(),ot==="select"||ot==="input"&&st.type==="file")var Ot=MS;else if(ni(st))if(NS)Ot=jU;else{Ot=LU;var _e=kU}else ot=st.nodeName,!ot||ot.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?et&&At(et.elementType)&&(Ot=MS):Ot=VU;if(Ot&&(Ot=Ot(o,et))){So(ft,Ot,d,ut);break t}_e&&_e(o,st,et),o==="focusout"&&et&&st.type==="number"&&et.memoizedProps.value!=null&&vr(st,"number",st.value)}switch(_e=et?Ss(et):window,o){case"focusin":(ni(_e)||_e.contentEditable==="true")&&(Yc=_e,iv=et,Uh=null);break;case"focusout":Uh=iv=Yc=null;break;case"mousedown":sv=!0;break;case"contextmenu":case"mouseup":case"dragend":sv=!1,FS(ft,d,ut);break;case"selectionchange":if(FU)break;case"keydown":case"keyup":FS(ft,d,ut)}var Vt;if($r)t:{switch(o){case"compositionstart":var $t="onCompositionStart";break t;case"compositionend":$t="onCompositionEnd";break t;case"compositionupdate":$t="onCompositionUpdate";break t}$t=void 0}else Re?at(o,d)&&($t="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&($t="onCompositionStart");$t&&(A&&d.locale!=="ko"&&(Re||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&Re&&(Vt=Mh()):(Br=ut,ma="value"in Br?Br.value:Br.textContent,Re=!0)),_e=jm(et,$t),0<_e.length&&($t=new Oh($t,o,null,d,ut),ft.push({event:$t,listeners:_e}),Vt?$t.data=Vt:(Vt=bt(d),Vt!==null&&($t.data=Vt)))),(Vt=w?ei(o,d):Ie(o,d))&&($t=jm(et,"onBeforeInput"),0<$t.length&&(_e=new Oh("onBeforeInput","beforeinput",null,d,ut),ft.push({event:_e,listeners:$t}),_e.data=Vt)),w3(ft,o,et,d,ut)}uR(ft,l)})}function fd(o,l,d){return{instance:o,listener:l,currentTarget:d}}function jm(o,l){for(var d=l+"Capture",p=[];o!==null;){var _=o,b=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||b===null||(_=Cl(o,d),_!=null&&p.unshift(fd(o,_,b)),_=Cl(o,l),_!=null&&p.push(fd(o,_,b))),o.tag===3)return p;o=o.return}return[]}function _u(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function dR(o,l,d,p,_){for(var b=l._reactName,I=[];d!==null&&d!==p;){var L=d,W=L.alternate,et=L.stateNode;if(L=L.tag,W!==null&&W===p)break;L!==5&&L!==26&&L!==27||et===null||(W=et,_?(et=Cl(d,b),et!=null&&I.unshift(fd(d,et,W))):_||(et=Cl(d,b),et!=null&&I.push(fd(d,et,W)))),d=d.return}I.length!==0&&o.push({event:l,listeners:I})}var A3=/\r\n?/g,C3=/\u0000|\uFFFD/g;function fR(o){return(typeof o=="string"?o:""+o).replace(A3,`
`).replace(C3,"")}function pR(o,l){return l=fR(l),fR(o)===l}function Um(){}function nn(o,l,d,p,_,b){switch(d){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||U(o,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&U(o,""+p);break;case"className":Jn(o,"class",p);break;case"tabIndex":Jn(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(o,d,p);break;case"style":mt(o,p,b);break;case"data":if(l!=="object"){Jn(o,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||d!=="href")){o.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(d);break}p=bn(""+p),o.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(d==="formAction"?(l!=="input"&&nn(o,l,"name",_.name,_,null),nn(o,l,"formEncType",_.formEncType,_,null),nn(o,l,"formMethod",_.formMethod,_,null),nn(o,l,"formTarget",_.formTarget,_,null)):(nn(o,l,"encType",_.encType,_,null),nn(o,l,"method",_.method,_,null),nn(o,l,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(d);break}p=bn(""+p),o.setAttribute(d,p);break;case"onClick":p!=null&&(o.onclick=Um);break;case"onScroll":p!=null&&be("scroll",o);break;case"onScrollEnd":p!=null&&be("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(d=p.__html,d!=null){if(_.children!=null)throw Error(i(60));o.innerHTML=d}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}d=bn(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(d,""+p):o.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(d,""):o.removeAttribute(d);break;case"capture":case"download":p===!0?o.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(d,p):o.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(d,p):o.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(d):o.setAttribute(d,p);break;case"popover":be("beforetoggle",o),be("toggle",o),ts(o,"popover",p);break;case"xlinkActuate":an(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":an(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":an(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":an(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":an(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":an(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":an(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":an(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":an(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":ts(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=ae.get(d)||d,ts(o,d,p))}}function C0(o,l,d,p,_,b){switch(d){case"style":mt(o,p,b);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(d=p.__html,d!=null){if(_.children!=null)throw Error(i(60));o.innerHTML=d}}break;case"children":typeof p=="string"?U(o,p):(typeof p=="number"||typeof p=="bigint")&&U(o,""+p);break;case"onScroll":p!=null&&be("scroll",o);break;case"onScrollEnd":p!=null&&be("scrollend",o);break;case"onClick":p!=null&&(o.onclick=Um);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qs.hasOwnProperty(d))t:{if(d[0]==="o"&&d[1]==="n"&&(_=d.endsWith("Capture"),l=d.slice(2,_?d.length-7:void 0),b=o[ye]||null,b=b!=null?b[d]:null,typeof b=="function"&&o.removeEventListener(l,b,_),typeof p=="function")){typeof b!="function"&&b!==null&&(d in o?o[d]=null:o.hasAttribute(d)&&o.removeAttribute(d)),o.addEventListener(l,p,_);break t}d in o?o[d]=p:p===!0?o.setAttribute(d,""):ts(o,d,p)}}}function xi(o,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",o),be("load",o);var p=!1,_=!1,b;for(b in d)if(d.hasOwnProperty(b)){var I=d[b];if(I!=null)switch(b){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:nn(o,l,b,I,d,null)}}_&&nn(o,l,"srcSet",d.srcSet,d,null),p&&nn(o,l,"src",d.src,d,null);return;case"input":be("invalid",o);var L=b=I=_=null,W=null,et=null;for(p in d)if(d.hasOwnProperty(p)){var ut=d[p];if(ut!=null)switch(p){case"name":_=ut;break;case"type":I=ut;break;case"checked":W=ut;break;case"defaultChecked":et=ut;break;case"value":b=ut;break;case"defaultValue":L=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(i(137,l));break;default:nn(o,l,p,ut,d,null)}}_r(o,b,L,W,et,I,_,!1),Ur(o);return;case"select":be("invalid",o),p=I=b=null;for(_ in d)if(d.hasOwnProperty(_)&&(L=d[_],L!=null))switch(_){case"value":b=L;break;case"defaultValue":I=L;break;case"multiple":p=L;default:nn(o,l,_,L,d,null)}l=b,d=I,o.multiple=!!p,l!=null?br(o,!!p,l,!1):d!=null&&br(o,!!p,d,!0);return;case"textarea":be("invalid",o),b=_=p=null;for(I in d)if(d.hasOwnProperty(I)&&(L=d[I],L!=null))switch(I){case"value":p=L;break;case"defaultValue":_=L;break;case"children":b=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(91));break;default:nn(o,l,I,L,d,null)}O(o,p,_,b),Ur(o);return;case"option":for(W in d)if(d.hasOwnProperty(W)&&(p=d[W],p!=null))switch(W){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:nn(o,l,W,p,d,null)}return;case"dialog":be("beforetoggle",o),be("toggle",o),be("cancel",o),be("close",o);break;case"iframe":case"object":be("load",o);break;case"video":case"audio":for(p=0;p<dd.length;p++)be(dd[p],o);break;case"image":be("error",o),be("load",o);break;case"details":be("toggle",o);break;case"embed":case"source":case"link":be("error",o),be("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in d)if(d.hasOwnProperty(et)&&(p=d[et],p!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:nn(o,l,et,p,d,null)}return;default:if(At(l)){for(ut in d)d.hasOwnProperty(ut)&&(p=d[ut],p!==void 0&&C0(o,l,ut,p,d,void 0));return}}for(L in d)d.hasOwnProperty(L)&&(p=d[L],p!=null&&nn(o,l,L,p,d,null))}function R3(o,l,d,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,b=null,I=null,L=null,W=null,et=null,ut=null;for(ot in d){var ft=d[ot];if(d.hasOwnProperty(ot)&&ft!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":W=ft;default:p.hasOwnProperty(ot)||nn(o,l,ot,null,p,ft)}}for(var st in p){var ot=p[st];if(ft=d[st],p.hasOwnProperty(st)&&(ot!=null||ft!=null))switch(st){case"type":b=ot;break;case"name":_=ot;break;case"checked":et=ot;break;case"defaultChecked":ut=ot;break;case"value":I=ot;break;case"defaultValue":L=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,l));break;default:ot!==ft&&nn(o,l,st,ot,p,ft)}}Oi(o,I,L,W,et,ut,b,_);return;case"select":ot=I=L=st=null;for(b in d)if(W=d[b],d.hasOwnProperty(b)&&W!=null)switch(b){case"value":break;case"multiple":ot=W;default:p.hasOwnProperty(b)||nn(o,l,b,null,p,W)}for(_ in p)if(b=p[_],W=d[_],p.hasOwnProperty(_)&&(b!=null||W!=null))switch(_){case"value":st=b;break;case"defaultValue":L=b;break;case"multiple":I=b;default:b!==W&&nn(o,l,_,b,p,W)}l=L,d=I,p=ot,st!=null?br(o,!!d,st,!1):!!p!=!!d&&(l!=null?br(o,!!d,l,!0):br(o,!!d,d?[]:"",!1));return;case"textarea":ot=st=null;for(L in d)if(_=d[L],d.hasOwnProperty(L)&&_!=null&&!p.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:nn(o,l,L,null,p,_)}for(I in p)if(_=p[I],b=d[I],p.hasOwnProperty(I)&&(_!=null||b!=null))switch(I){case"value":st=_;break;case"defaultValue":ot=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==b&&nn(o,l,I,_,p,b)}ze(o,st,ot);return;case"option":for(var Xt in d)if(st=d[Xt],d.hasOwnProperty(Xt)&&st!=null&&!p.hasOwnProperty(Xt))switch(Xt){case"selected":o.selected=!1;break;default:nn(o,l,Xt,null,p,st)}for(W in p)if(st=p[W],ot=d[W],p.hasOwnProperty(W)&&st!==ot&&(st!=null||ot!=null))switch(W){case"selected":o.selected=st&&typeof st!="function"&&typeof st!="symbol";break;default:nn(o,l,W,st,p,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qt in d)st=d[qt],d.hasOwnProperty(qt)&&st!=null&&!p.hasOwnProperty(qt)&&nn(o,l,qt,null,p,st);for(et in p)if(st=p[et],ot=d[et],p.hasOwnProperty(et)&&st!==ot&&(st!=null||ot!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,l));break;default:nn(o,l,et,st,p,ot)}return;default:if(At(l)){for(var sn in d)st=d[sn],d.hasOwnProperty(sn)&&st!==void 0&&!p.hasOwnProperty(sn)&&C0(o,l,sn,void 0,p,st);for(ut in p)st=p[ut],ot=d[ut],!p.hasOwnProperty(ut)||st===ot||st===void 0&&ot===void 0||C0(o,l,ut,st,p,ot);return}}for(var Q in d)st=d[Q],d.hasOwnProperty(Q)&&st!=null&&!p.hasOwnProperty(Q)&&nn(o,l,Q,null,p,st);for(ft in p)st=p[ft],ot=d[ft],!p.hasOwnProperty(ft)||st===ot||st==null&&ot==null||nn(o,l,ft,st,p,ot)}var R0=null,I0=null;function Fm(o){return o.nodeType===9?o:o.ownerDocument}function mR(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gR(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function D0(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var M0=null;function I3(){var o=window.event;return o&&o.type==="popstate"?o===M0?!1:(M0=o,!0):(M0=null,!1)}var yR=typeof setTimeout=="function"?setTimeout:void 0,D3=typeof clearTimeout=="function"?clearTimeout:void 0,_R=typeof Promise=="function"?Promise:void 0,M3=typeof queueMicrotask=="function"?queueMicrotask:typeof _R<"u"?function(o){return _R.resolve(null).then(o).catch(N3)}:yR;function N3(o){setTimeout(function(){throw o})}function Ma(o){return o==="head"}function vR(o,l){var d=l,p=0,_=0;do{var b=d.nextSibling;if(o.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(0<p&&8>p){d=p;var I=o.ownerDocument;if(d&1&&pd(I.documentElement),d&2&&pd(I.body),d&4)for(d=I.head,pd(d),I=d.firstChild;I;){var L=I.nextSibling,W=I.nodeName;I[Ji]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&I.rel.toLowerCase()==="stylesheet"||d.removeChild(I),I=L}}if(_===0){o.removeChild(b),wd(l);return}_--}else d==="$"||d==="$?"||d==="$!"?_++:p=d.charCodeAt(0)-48;else p=0;d=b}while(d);wd(l)}function N0(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":N0(d),gr(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}o.removeChild(d)}}function P3(o,l,d,p){for(;o.nodeType===1;){var _=d;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[Ji])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(b=o.getAttribute("rel"),b==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(b!==_.rel||o.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||o.getAttribute("title")!==(_.title==null?null:_.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(b=o.getAttribute("src"),(b!==(_.src==null?null:_.src)||o.getAttribute("type")!==(_.type==null?null:_.type)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&b&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var b=_.name==null?null:""+_.name;if(_.type==="hidden"&&o.getAttribute("name")===b)return o}else return o;if(o=xr(o.nextSibling),o===null)break}return null}function O3(o,l,d){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!d||(o=xr(o.nextSibling),o===null))return null;return o}function P0(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function k3(o,l){var d=o.ownerDocument;if(o.data!=="$?"||d.readyState==="complete")l();else{var p=function(){l(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function xr(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var O0=null;function bR(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}function TR(o,l,d){switch(l=Fm(d),o){case"html":if(o=l.documentElement,!o)throw Error(i(452));return o;case"head":if(o=l.head,!o)throw Error(i(453));return o;case"body":if(o=l.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function pd(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);gr(o)}var nr=new Map,wR=new Set;function Bm(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var jo=nt.d;nt.d={f:L3,r:V3,D:j3,C:U3,L:F3,m:B3,X:H3,S:z3,M:q3};function L3(){var o=jo.f(),l=Nm();return o||l}function V3(o){var l=xs(o);l!==null&&l.tag===5&&l.type==="form"?zA(l):jo.r(o)}var vu=typeof document>"u"?null:document;function ER(o,l,d){var p=vu;if(p&&typeof l=="string"&&l){var _=In(l);_='link[rel="'+o+'"][href="'+_+'"]',typeof d=="string"&&(_+='[crossorigin="'+d+'"]'),wR.has(_)||(wR.add(_),o={rel:o,crossOrigin:d,href:l},p.querySelector(_)===null&&(l=p.createElement("link"),xi(l,"link",o),Ke(l),p.head.appendChild(l)))}}function j3(o){jo.D(o),ER("dns-prefetch",o,null)}function U3(o,l){jo.C(o,l),ER("preconnect",o,l)}function F3(o,l,d){jo.L(o,l,d);var p=vu;if(p&&o&&l){var _='link[rel="preload"][as="'+In(l)+'"]';l==="image"&&d&&d.imageSrcSet?(_+='[imagesrcset="'+In(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(_+='[imagesizes="'+In(d.imageSizes)+'"]')):_+='[href="'+In(o)+'"]';var b=_;switch(l){case"style":b=bu(o);break;case"script":b=Tu(o)}nr.has(b)||(o=f({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:o,as:l},d),nr.set(b,o),p.querySelector(_)!==null||l==="style"&&p.querySelector(md(b))||l==="script"&&p.querySelector(gd(b))||(l=p.createElement("link"),xi(l,"link",o),Ke(l),p.head.appendChild(l)))}}function B3(o,l){jo.m(o,l);var d=vu;if(d&&o){var p=l&&typeof l.as=="string"?l.as:"script",_='link[rel="modulepreload"][as="'+In(p)+'"][href="'+In(o)+'"]',b=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Tu(o)}if(!nr.has(b)&&(o=f({rel:"modulepreload",href:o},l),nr.set(b,o),d.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(gd(b)))return}p=d.createElement("link"),xi(p,"link",o),Ke(p),d.head.appendChild(p)}}}function z3(o,l,d){jo.S(o,l,d);var p=vu;if(p&&o){var _=Zn(p).hoistableStyles,b=bu(o);l=l||"default";var I=_.get(b);if(!I){var L={loading:0,preload:null};if(I=p.querySelector(md(b)))L.loading=5;else{o=f({rel:"stylesheet",href:o,"data-precedence":l},d),(d=nr.get(b))&&k0(o,d);var W=I=p.createElement("link");Ke(W),xi(W,"link",o),W._p=new Promise(function(et,ut){W.onload=et,W.onerror=ut}),W.addEventListener("load",function(){L.loading|=1}),W.addEventListener("error",function(){L.loading|=2}),L.loading|=4,zm(I,l,p)}I={type:"stylesheet",instance:I,count:1,state:L},_.set(b,I)}}}function H3(o,l){jo.X(o,l);var d=vu;if(d&&o){var p=Zn(d).hoistableScripts,_=Tu(o),b=p.get(_);b||(b=d.querySelector(gd(_)),b||(o=f({src:o,async:!0},l),(l=nr.get(_))&&L0(o,l),b=d.createElement("script"),Ke(b),xi(b,"link",o),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(_,b))}}function q3(o,l){jo.M(o,l);var d=vu;if(d&&o){var p=Zn(d).hoistableScripts,_=Tu(o),b=p.get(_);b||(b=d.querySelector(gd(_)),b||(o=f({src:o,async:!0,type:"module"},l),(l=nr.get(_))&&L0(o,l),b=d.createElement("script"),Ke(b),xi(b,"link",o),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(_,b))}}function xR(o,l,d,p){var _=(_=wt.current)?Bm(_):null;if(!_)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=bu(d.href),d=Zn(_).hoistableStyles,p=d.get(l),p||(p={type:"style",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){o=bu(d.href);var b=Zn(_).hoistableStyles,I=b.get(o);if(I||(_=_.ownerDocument||_,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(o,I),(b=_.querySelector(md(o)))&&!b._p&&(I.instance=b,I.state.loading=5),nr.has(o)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},nr.set(o,d),b||$3(_,o,d,I.state))),l&&p===null)throw Error(i(528,""));return I}if(l&&p!==null)throw Error(i(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Tu(d),d=Zn(_).hoistableScripts,p=d.get(l),p||(p={type:"script",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function bu(o){return'href="'+In(o)+'"'}function md(o){return'link[rel="stylesheet"]['+o+"]"}function SR(o){return f({},o,{"data-precedence":o.precedence,precedence:null})}function $3(o,l,d,p){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=o.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),xi(l,"link",d),Ke(l),o.head.appendChild(l))}function Tu(o){return'[src="'+In(o)+'"]'}function gd(o){return"script[async]"+o}function AR(o,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var p=o.querySelector('style[data-href~="'+In(d.href)+'"]');if(p)return l.instance=p,Ke(p),p;var _=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),Ke(p),xi(p,"style",_),zm(p,d.precedence,o),l.instance=p;case"stylesheet":_=bu(d.href);var b=o.querySelector(md(_));if(b)return l.state.loading|=4,l.instance=b,Ke(b),b;p=SR(d),(_=nr.get(_))&&k0(p,_),b=(o.ownerDocument||o).createElement("link"),Ke(b);var I=b;return I._p=new Promise(function(L,W){I.onload=L,I.onerror=W}),xi(b,"link",p),l.state.loading|=4,zm(b,d.precedence,o),l.instance=b;case"script":return b=Tu(d.src),(_=o.querySelector(gd(b)))?(l.instance=_,Ke(_),_):(p=d,(_=nr.get(b))&&(p=f({},d),L0(p,_)),o=o.ownerDocument||o,_=o.createElement("script"),Ke(_),xi(_,"link",p),o.head.appendChild(_),l.instance=_);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,zm(p,d.precedence,o));return l.instance}function zm(o,l,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,b=_,I=0;I<p.length;I++){var L=p[I];if(L.dataset.precedence===l)b=L;else if(b!==_)break}b?b.parentNode.insertBefore(o,b.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(o,l.firstChild))}function k0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function L0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Hm=null;function CR(o,l,d){if(Hm===null){var p=new Map,_=Hm=new Map;_.set(d,p)}else _=Hm,p=_.get(d),p||(p=new Map,_.set(d,p));if(p.has(o))return p;for(p.set(o,null),d=d.getElementsByTagName(o),_=0;_<d.length;_++){var b=d[_];if(!(b[Ji]||b[se]||o==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var I=b.getAttribute(l)||"";I=o+I;var L=p.get(I);L?L.push(b):p.set(I,[b])}}return p}function RR(o,l,d){o=o.ownerDocument||o,o.head.insertBefore(d,l==="title"?o.querySelector("head > title"):null)}function W3(o,l,d){if(d===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function IR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var yd=null;function G3(){}function Y3(o,l,d){if(yd===null)throw Error(i(475));var p=yd;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var _=bu(d.href),b=o.querySelector(md(_));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(p.count++,p=qm.bind(p),o.then(p,p)),l.state.loading|=4,l.instance=b,Ke(b);return}b=o.ownerDocument||o,d=SR(d),(_=nr.get(_))&&k0(d,_),b=b.createElement("link"),Ke(b);var I=b;I._p=new Promise(function(L,W){I.onload=L,I.onerror=W}),xi(b,"link",d),l.instance=b}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(p.count++,l=qm.bind(p),o.addEventListener("load",l),o.addEventListener("error",l))}}function K3(){if(yd===null)throw Error(i(475));var o=yd;return o.stylesheets&&o.count===0&&V0(o,o.stylesheets),0<o.count?function(l){var d=setTimeout(function(){if(o.stylesheets&&V0(o,o.stylesheets),o.unsuspend){var p=o.unsuspend;o.unsuspend=null,p()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(d)}}:null}function qm(){if(this.count--,this.count===0){if(this.stylesheets)V0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var $m=null;function V0(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,$m=new Map,l.forEach(X3,o),$m=null,qm.call(o))}function X3(o,l){if(!(l.state.loading&4)){var d=$m.get(o);if(d)var p=d.get(null);else{d=new Map,$m.set(o,d);for(var _=o.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<_.length;b++){var I=_[b];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(d.set(I.dataset.precedence,I),p=I)}p&&d.set(null,p)}_=l.instance,I=_.getAttribute("data-precedence"),b=d.get(I)||p,b===p&&d.set(null,_),d.set(I,_),this.count++,p=qm.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),b?b.parentNode.insertBefore(_,b.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(_,o.firstChild)),l.state.loading|=4}}var _d={$$typeof:N,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function Q3(o,l,d,p,_,b,I,L){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ie(0),this.hiddenUpdates=ie(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=b,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function DR(o,l,d,p,_,b,I,L,W,et,ut,ft){return o=new Q3(o,l,d,I,L,W,et,ft),l=1,b===!0&&(l|=24),b=Is(3,null,null,l),o.current=b,b.stateNode=o,l=_v(),l.refCount++,o.pooledCache=l,l.refCount++,b.memoizedState={element:p,isDehydrated:d,cache:l},wv(b),o}function MR(o){return o?(o=Zc,o):Zc}function NR(o,l,d,p,_,b){_=MR(_),p.context===null?p.context=_:p.pendingContext=_,p=_a(l),p.payload={element:d},b=b===void 0?null:b,b!==null&&(p.callback=b),d=va(o,p,l),d!==null&&(Os(d,o,l),Yh(d,o,l))}function PR(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function j0(o,l){PR(o,l),(o=o.alternate)&&PR(o,l)}function OR(o){if(o.tag===13){var l=Qc(o,67108864);l!==null&&Os(l,o,67108864),j0(o,67108864)}}var Wm=!0;function Z3(o,l,d,p){var _=X.T;X.T=null;var b=nt.p;try{nt.p=2,U0(o,l,d,p)}finally{nt.p=b,X.T=_}}function J3(o,l,d,p){var _=X.T;X.T=null;var b=nt.p;try{nt.p=8,U0(o,l,d,p)}finally{nt.p=b,X.T=_}}function U0(o,l,d,p){if(Wm){var _=F0(p);if(_===null)A0(o,l,p,Gm,d),LR(o,p);else if(eF(_,o,l,d,p))p.stopPropagation();else if(LR(o,p),l&4&&-1<tF.indexOf(o)){for(;_!==null;){var b=xs(_);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var I=gt(b.pendingLanes);if(I!==0){var L=b;for(L.pendingLanes|=2,L.entangledLanes|=2;I;){var W=1<<31-Ye(I);L.entanglements[1]|=W,I&=~W}Qr(b),(Xe&6)===0&&(Dm=de()+500,hd(0))}}break;case 13:L=Qc(b,2),L!==null&&Os(L,b,2),Nm(),j0(b,2)}if(b=F0(p),b===null&&A0(o,l,p,Gm,d),b===_)break;_=b}_!==null&&p.stopPropagation()}else A0(o,l,p,null,d)}}function F0(o){return o=Sn(o),B0(o)}var Gm=null;function B0(o){if(Gm=null,o=Hs(o),o!==null){var l=r(o);if(l===null)o=null;else{var d=l.tag;if(d===13){if(o=a(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Gm=o,null}function kR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hn()){case En:return 2;case Ze:return 8;case Ve:case Ii:return 32;case Qi:return 268435456;default:return 32}default:return 32}}var z0=!1,Na=null,Pa=null,Oa=null,vd=new Map,bd=new Map,ka=[],tF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LR(o,l){switch(o){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":vd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":bd.delete(l.pointerId)}}function Td(o,l,d,p,_,b){return o===null||o.nativeEvent!==b?(o={blockedOn:l,domEventName:d,eventSystemFlags:p,nativeEvent:b,targetContainers:[_]},l!==null&&(l=xs(l),l!==null&&OR(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),o)}function eF(o,l,d,p,_){switch(l){case"focusin":return Na=Td(Na,o,l,d,p,_),!0;case"dragenter":return Pa=Td(Pa,o,l,d,p,_),!0;case"mouseover":return Oa=Td(Oa,o,l,d,p,_),!0;case"pointerover":var b=_.pointerId;return vd.set(b,Td(vd.get(b)||null,o,l,d,p,_)),!0;case"gotpointercapture":return b=_.pointerId,bd.set(b,Td(bd.get(b)||null,o,l,d,p,_)),!0}return!1}function VR(o){var l=Hs(o.target);if(l!==null){var d=r(l);if(d!==null){if(l=d.tag,l===13){if(l=a(d),l!==null){o.blockedOn=l,je(o.priority,function(){if(d.tag===13){var p=Ps();p=oe(p);var _=Qc(d,p);_!==null&&Os(_,d,p),j0(d,p)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ym(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=F0(o.nativeEvent);if(d===null){d=o.nativeEvent;var p=new d.constructor(d.type,d);pn=p,d.target.dispatchEvent(p),pn=null}else return l=xs(d),l!==null&&OR(l),o.blockedOn=d,!1;l.shift()}return!0}function jR(o,l,d){Ym(o)&&d.delete(l)}function nF(){z0=!1,Na!==null&&Ym(Na)&&(Na=null),Pa!==null&&Ym(Pa)&&(Pa=null),Oa!==null&&Ym(Oa)&&(Oa=null),vd.forEach(jR),bd.forEach(jR)}function Km(o,l){o.blockedOn===l&&(o.blockedOn=null,z0||(z0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nF)))}var Xm=null;function UR(o){Xm!==o&&(Xm=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Xm===o&&(Xm=null);for(var l=0;l<o.length;l+=3){var d=o[l],p=o[l+1],_=o[l+2];if(typeof p!="function"){if(B0(p||d)===null)continue;break}var b=xs(d);b!==null&&(o.splice(l,3),l-=3,Bv(b,{pending:!0,data:_,method:d.method,action:p},p,_))}}))}function wd(o){function l(W){return Km(W,o)}Na!==null&&Km(Na,o),Pa!==null&&Km(Pa,o),Oa!==null&&Km(Oa,o),vd.forEach(l),bd.forEach(l);for(var d=0;d<ka.length;d++){var p=ka[d];p.blockedOn===o&&(p.blockedOn=null)}for(;0<ka.length&&(d=ka[0],d.blockedOn===null);)VR(d),d.blockedOn===null&&ka.shift();if(d=(o.ownerDocument||o).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var _=d[p],b=d[p+1],I=_[ye]||null;if(typeof b=="function")I||UR(d);else if(I){var L=null;if(b&&b.hasAttribute("formAction")){if(_=b,I=b[ye]||null)L=I.formAction;else if(B0(_)!==null)continue}else L=I.action;typeof L=="function"?d[p+1]=L:(d.splice(p,3),p-=3),UR(d)}}}function H0(o){this._internalRoot=o}Qm.prototype.render=H0.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(i(409));var d=l.current,p=Ps();NR(d,p,o,l,null,null)},Qm.prototype.unmount=H0.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;NR(o.current,2,null,o,null,null),Nm(),l[tn]=null}};function Qm(o){this._internalRoot=o}Qm.prototype.unstable_scheduleHydration=function(o){if(o){var l=pe();o={blockedOn:null,target:o,priority:l};for(var d=0;d<ka.length&&l!==0&&l<ka[d].priority;d++);ka.splice(d,0,o),d===0&&VR(o)}};var FR=t.version;if(FR!=="19.1.0")throw Error(i(527,FR,"19.1.0"));nt.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=u(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var iF={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zm.isDisabled&&Zm.supportsFiber)try{Je=Zm.inject(iF),re=Zm}catch{}}return xd.createRoot=function(o,l){if(!s(o))throw Error(i(299));var d=!1,p="",_=nC,b=iC,I=sC,L=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks)),l=DR(o,1,!1,null,null,d,p,_,b,I,L,null),o[tn]=l.current,S0(o),new H0(l)},xd.hydrateRoot=function(o,l,d){if(!s(o))throw Error(i(299));var p=!1,_="",b=nC,I=iC,L=sC,W=null,et=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onUncaughtError!==void 0&&(b=d.onUncaughtError),d.onCaughtError!==void 0&&(I=d.onCaughtError),d.onRecoverableError!==void 0&&(L=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(W=d.unstable_transitionCallbacks),d.formState!==void 0&&(et=d.formState)),l=DR(o,1,!0,l,d??null,p,_,b,I,L,W,et),l.context=MR(null),d=l.current,p=Ps(),p=oe(p),_=_a(p),_.callback=null,va(d,_,p),d=p,l.current.lanes=d,Gt(l,d),Qr(l),o[tn]=l.current,S0(o),new Qm(l)},xd.version="19.1.0",xd}var XR;function pF(){if(XR)return W0.exports;XR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),W0.exports=fF(),W0.exports}var mF=pF();const gF=a_(mF);var Sd={},QR;function yF(){if(QR)return Sd;QR=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.parse=a,Sd.serialize=h;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,r=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function a(y,v){const T=new r,E=y.length;if(E<2)return T;const x=(v==null?void 0:v.decode)||f;let C=0;do{const P=y.indexOf("=",C);if(P===-1)break;const N=y.indexOf(";",C),q=N===-1?E:N;if(P>q){C=y.lastIndexOf(";",P-1)+1;continue}const F=c(y,C,P),G=u(y,P,F),k=y.slice(F,G);if(T[k]===void 0){let D=c(y,P+1,q),M=u(y,q,D);const V=x(y.slice(D,M));T[k]=V}C=q+1}while(C<E);return T}function c(y,v,T){do{const E=y.charCodeAt(v);if(E!==32&&E!==9)return v}while(++v<T);return T}function u(y,v,T){for(;v>T;){const E=y.charCodeAt(--v);if(E!==32&&E!==9)return v+1}return T}function h(y,v,T){const E=(T==null?void 0:T.encode)||encodeURIComponent;if(!e.test(y))throw new TypeError(`argument name is invalid: ${y}`);const x=E(v);if(!t.test(x))throw new TypeError(`argument val is invalid: ${v}`);let C=y+"="+x;if(!T)return C;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);C+="; Max-Age="+T.maxAge}if(T.domain){if(!n.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);C+="; Domain="+T.domain}if(T.path){if(!i.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);C+="; Path="+T.path}if(T.expires){if(!m(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);C+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(C+="; HttpOnly"),T.secure&&(C+="; Secure"),T.partitioned&&(C+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return C}function f(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return s.call(y)==="[object Date]"}return Sd}yF();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ZR="popstate";function _F(e={}){function t(i,s){let{pathname:r,search:a,hash:c}=i.location;return eT("",{pathname:r,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:Ef(s)}return bF(t,n,null,e)}function wn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Nr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vF(){return Math.random().toString(36).substring(2,10)}function JR(e,t){return{usr:e.state,key:e.key,idx:t}}function eT(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?uh(t):t,state:n,key:t&&t.key||i||vF()}}function Ef({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function uh(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function bF(e,t,n,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,c="POP",u=null,h=f();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function f(){return(a.state||{idx:null}).idx}function m(){c="POP";let x=f(),C=x==null?null:x-h;h=x,u&&u({action:c,location:E.location,delta:C})}function y(x,C){c="PUSH";let P=eT(E.location,x,C);h=f()+1;let N=JR(P,h),q=E.createHref(P);try{a.pushState(N,"",q)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(q)}r&&u&&u({action:c,location:E.location,delta:1})}function v(x,C){c="REPLACE";let P=eT(E.location,x,C);h=f();let N=JR(P,h),q=E.createHref(P);a.replaceState(N,"",q),r&&u&&u({action:c,location:E.location,delta:0})}function T(x){let C=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof x=="string"?x:Ef(x);return P=P.replace(/ $/,"%20"),wn(C,`No window.location.(origin|href) available to create URL for href: ${P}`),new URL(P,C)}let E={get action(){return c},get location(){return e(s,a)},listen(x){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ZR,m),u=x,()=>{s.removeEventListener(ZR,m),u=null}},createHref(x){return t(s,x)},createURL:T,encodeLocation(x){let C=T(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:v,go(x){return a.go(x)}};return E}function FP(e,t,n="/"){return TF(e,t,n,!1)}function TF(e,t,n,i){let s=typeof t=="string"?uh(t):t,r=na(s.pathname||"/",n);if(r==null)return null;let a=BP(e);wF(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let h=PF(r);c=MF(a[u],h,i)}return c}function BP(e,t=[],n=[],i=""){let s=(r,a,c)=>{let u={relativePath:c===void 0?r.path||"":c,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};u.relativePath.startsWith("/")&&(wn(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let h=Qo([i,u.relativePath]),f=n.concat(u);r.children&&r.children.length>0&&(wn(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),BP(r.children,t,f,h)),!(r.path==null&&!r.index)&&t.push({path:h,score:IF(h,r.index),routesMeta:f})};return e.forEach((r,a)=>{var c;if(r.path===""||!((c=r.path)!=null&&c.includes("?")))s(r,a);else for(let u of zP(r.path))s(r,a,u)}),t}function zP(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let a=zP(i.join("/")),c=[];return c.push(...a.map(u=>u===""?r:[r,u].join("/"))),s&&c.push(...a),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function wF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:DF(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var EF=/^:[\w-]+$/,xF=3,SF=2,AF=1,CF=10,RF=-2,t1=e=>e==="*";function IF(e,t){let n=e.split("/"),i=n.length;return n.some(t1)&&(i+=RF),t&&(i+=SF),n.filter(s=>!t1(s)).reduce((s,r)=>s+(EF.test(r)?xF:r===""?AF:CF),i)}function DF(e,t){return e.length===t.length&&e.slice(0,-1).every((i,s)=>i===t[s])?e[e.length-1]-t[t.length-1]:0}function MF(e,t,n=!1){let{routesMeta:i}=e,s={},r="/",a=[];for(let c=0;c<i.length;++c){let u=i[c],h=c===i.length-1,f=r==="/"?t:t.slice(r.length)||"/",m=sy({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),y=u.route;if(!m&&h&&n&&!i[i.length-1].route.index&&(m=sy({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Qo([r,m.pathname]),pathnameBase:VF(Qo([r,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(r=Qo([r,m.pathnameBase]))}return a}function sy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=NF(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:i.reduce((h,{paramName:f,isOptional:m},y)=>{if(f==="*"){let T=c[y]||"";a=r.slice(0,r.length-T.length).replace(/(.)\/+$/,"$1")}const v=c[y];return m&&!v?h[f]=void 0:h[f]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:r,pathnameBase:a,pattern:e}}function NF(e,t=!1,n=!0){Nr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(i.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function PF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Nr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function na(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function OF(e,t="/"){let{pathname:n,search:i="",hash:s=""}=typeof e=="string"?uh(e):e;return{pathname:n?n.startsWith("/")?n:kF(n,t):t,search:jF(i),hash:UF(s)}}function kF(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function X0(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Lw(e){let t=LF(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function Vw(e,t,n,i=!1){let s;typeof e=="string"?s=uh(e):(s={...e},wn(!s.pathname||!s.pathname.includes("?"),X0("?","pathname","search",s)),wn(!s.pathname||!s.pathname.includes("#"),X0("#","pathname","hash",s)),wn(!s.search||!s.search.includes("#"),X0("#","search","hash",s)));let r=e===""||s.pathname==="",a=r?"/":s.pathname,c;if(a==null)c=n;else{let m=t.length-1;if(!i&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;s.pathname=y.join("/")}c=m>=0?t[m]:"/"}let u=OF(s,c),h=a&&a!=="/"&&a.endsWith("/"),f=(r||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}var Qo=e=>e.join("/").replace(/\/\/+/g,"/"),VF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,UF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var HP=["POST","PUT","PATCH","DELETE"];new Set(HP);var BF=["GET",...HP];new Set(BF);var hh=R.createContext(null);hh.displayName="DataRouter";var l_=R.createContext(null);l_.displayName="DataRouterState";var qP=R.createContext({isTransitioning:!1});qP.displayName="ViewTransition";var zF=R.createContext(new Map);zF.displayName="Fetchers";var HF=R.createContext(null);HF.displayName="Await";var Vr=R.createContext(null);Vr.displayName="Navigation";var ip=R.createContext(null);ip.displayName="Location";var fr=R.createContext({outlet:null,matches:[],isDataRoute:!1});fr.displayName="Route";var jw=R.createContext(null);jw.displayName="RouteError";function qF(e,{relative:t}={}){wn(dh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=R.useContext(Vr),{hash:s,pathname:r,search:a}=sp(e,{relative:t}),c=r;return n!=="/"&&(c=r==="/"?n:Qo([n,r])),i.createHref({pathname:c,search:a,hash:s})}function dh(){return R.useContext(ip)!=null}function yl(){return wn(dh(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(ip).location}var $P="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WP(e){R.useContext(Vr).static||R.useLayoutEffect(e)}function Rc(){let{isDataRoute:e}=R.useContext(fr);return e?oB():$F()}function $F(){wn(dh(),"useNavigate() may be used only in the context of a <Router> component.");let e=R.useContext(hh),{basename:t,navigator:n}=R.useContext(Vr),{matches:i}=R.useContext(fr),{pathname:s}=yl(),r=JSON.stringify(Lw(i)),a=R.useRef(!1);return WP(()=>{a.current=!0}),R.useCallback((u,h={})=>{if(Nr(a.current,$P),!a.current)return;if(typeof u=="number"){n.go(u);return}let f=Vw(u,JSON.parse(r),s,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Qo([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,r,s,e])}var WF=R.createContext(null);function GF(e){let t=R.useContext(fr).outlet;return t&&R.createElement(WF.Provider,{value:e},t)}function YF(){let{matches:e}=R.useContext(fr),t=e[e.length-1];return t?t.params:{}}function sp(e,{relative:t}={}){let{matches:n}=R.useContext(fr),{pathname:i}=yl(),s=JSON.stringify(Lw(n));return R.useMemo(()=>Vw(e,JSON.parse(s),i,t==="path"),[e,s,i,t])}function KF(e,t){return GP(e,t)}function GP(e,t,n,i){var P;wn(dh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:r}=R.useContext(Vr),{matches:a}=R.useContext(fr),c=a[a.length-1],u=c?c.params:{},h=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let N=m&&m.path||"";YP(h,!m||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let y=yl(),v;if(t){let N=typeof t=="string"?uh(t):t;wn(f==="/"||((P=N.pathname)==null?void 0:P.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${N.pathname}" was given in the \`location\` prop.`),v=N}else v=y;let T=v.pathname||"/",E=T;if(f!=="/"){let N=f.replace(/^\//,"").split("/");E="/"+T.replace(/^\//,"").split("/").slice(N.length).join("/")}let x=!r&&n&&n.matches&&n.matches.length>0?n.matches:FP(e,{pathname:E});Nr(m||x!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Nr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=tB(x&&x.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Qo([f,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:Qo([f,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,i);return t&&C?R.createElement(ip.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},C):C}function XF(){let e=rB(),t=FF(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:r},"ErrorBoundary")," or"," ",R.createElement("code",{style:r},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:s},n):null,a)}var QF=R.createElement(XF,null),ZF=class extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(fr.Provider,{value:this.props.routeContext},R.createElement(jw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JF({routeContext:e,match:t,children:n}){let i=R.useContext(hh);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(fr.Provider,{value:e},n)}function tB(e,t=[],n=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,r=n==null?void 0:n.errors;if(r!=null){let u=s.findIndex(h=>h.route.id&&(r==null?void 0:r[h.route.id])!==void 0);wn(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,c=-1;if(n)for(let u=0;u<s.length;u++){let h=s[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:m}=n,y=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){a=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,h,f)=>{let m,y=!1,v=null,T=null;n&&(m=r&&h.route.id?r[h.route.id]:void 0,v=h.route.errorElement||QF,a&&(c<0&&f===0?(YP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,T=null):c===f&&(y=!0,T=h.route.hydrateFallbackElement||null)));let E=t.concat(s.slice(0,f+1)),x=()=>{let C;return m?C=v:y?C=T:h.route.Component?C=R.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=u,R.createElement(JF,{match:h,routeContext:{outlet:u,matches:E,isDataRoute:n!=null},children:C})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?R.createElement(ZF,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):x()},null)}function Uw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eB(e){let t=R.useContext(hh);return wn(t,Uw(e)),t}function nB(e){let t=R.useContext(l_);return wn(t,Uw(e)),t}function iB(e){let t=R.useContext(fr);return wn(t,Uw(e)),t}function Fw(e){let t=iB(e),n=t.matches[t.matches.length-1];return wn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function sB(){return Fw("useRouteId")}function rB(){var i;let e=R.useContext(jw),t=nB("useRouteError"),n=Fw("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function oB(){let{router:e}=eB("useNavigate"),t=Fw("useNavigate"),n=R.useRef(!1);return WP(()=>{n.current=!0}),R.useCallback(async(s,r={})=>{Nr(n.current,$P),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...r}))},[e,t])}var e1={};function YP(e,t,n){!t&&!e1[e]&&(e1[e]=!0,Nr(!1,n))}R.memo(aB);function aB({routes:e,future:t,state:n}){return GP(e,void 0,n,t)}function Ng({to:e,replace:t,state:n,relative:i}){wn(dh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=R.useContext(Vr);Nr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=R.useContext(fr),{pathname:a}=yl(),c=Rc(),u=Vw(e,Lw(r),a,i==="path"),h=JSON.stringify(u);return R.useEffect(()=>{c(JSON.parse(h),{replace:t,state:n,relative:i})},[c,h,i,t,n]),null}function lB(e){return GF(e.context)}function Sr(e){wn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cB({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:s,static:r=!1}){wn(!dh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:a,navigator:s,static:r,future:{}}),[a,s,r]);typeof n=="string"&&(n=uh(n));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:y="default"}=n,v=R.useMemo(()=>{let T=na(u,a);return T==null?null:{location:{pathname:T,search:h,hash:f,state:m,key:y},navigationType:i}},[a,u,h,f,m,y,i]);return Nr(v!=null,`<Router basename="${a}"> is not able to match the URL "${u}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:R.createElement(Vr.Provider,{value:c},R.createElement(ip.Provider,{children:t,value:v}))}function uB({children:e,location:t}){return KF(nT(e),t)}function nT(e,t=[]){let n=[];return R.Children.forEach(e,(i,s)=>{if(!R.isValidElement(i))return;let r=[...t,s];if(i.type===R.Fragment){n.push.apply(n,nT(i.props.children,r));return}wn(i.type===Sr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=nT(i.props.children,r)),n.push(a)}),n}var Pg="get",Og="application/x-www-form-urlencoded";function c_(e){return e!=null&&typeof e.tagName=="string"}function hB(e){return c_(e)&&e.tagName.toLowerCase()==="button"}function dB(e){return c_(e)&&e.tagName.toLowerCase()==="form"}function fB(e){return c_(e)&&e.tagName.toLowerCase()==="input"}function pB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mB(e,t){return e.button===0&&(!t||t==="_self")&&!pB(e)}var Jm=null;function gB(){if(Jm===null)try{new FormData(document.createElement("form"),0),Jm=!1}catch{Jm=!0}return Jm}var yB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Q0(e){return e!=null&&!yB.has(e)?(Nr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Og}"`),null):e}function _B(e,t){let n,i,s,r,a;if(dB(e)){let c=e.getAttribute("action");i=c?na(c,t):null,n=e.getAttribute("method")||Pg,s=Q0(e.getAttribute("enctype"))||Og,r=new FormData(e)}else if(hB(e)||fB(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||c.getAttribute("action");if(i=u?na(u,t):null,n=e.getAttribute("formmethod")||c.getAttribute("method")||Pg,s=Q0(e.getAttribute("formenctype"))||Q0(c.getAttribute("enctype"))||Og,r=new FormData(c,e),!gB()){let{name:h,type:f,value:m}=e;if(f==="image"){let y=h?`${h}.`:"";r.append(`${y}x`,"0"),r.append(`${y}y`,"0")}else h&&r.append(h,m)}}else{if(c_(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Pg,i=null,s=Og,a=e}return r&&s==="text/plain"&&(a=r,r=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:r,body:a}}function Bw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function vB(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bB(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function TB(e,t,n){let i=await Promise.all(e.map(async s=>{let r=t.routes[s.route.id];if(r){let a=await vB(r,n);return a.links?a.links():[]}return[]}));return SB(i.flat(1).filter(bB).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function n1(e,t,n,i,s,r){let a=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,c=(u,h)=>{var f;return n[h].pathname!==u.pathname||((f=n[h].route.path)==null?void 0:f.endsWith("*"))&&n[h].params["*"]!==u.params["*"]};return r==="assets"?t.filter((u,h)=>a(u,h)||c(u,h)):r==="data"?t.filter((u,h)=>{var m;let f=i.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(a(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let y=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function wB(e,t,{includeHydrateFallback:n}={}){return EB(e.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function EB(e){return[...new Set(e)]}function xB(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function SB(e,t){let n=new Set;return new Set(t),e.reduce((i,s)=>{let r=JSON.stringify(xB(s));return n.has(r)||(n.add(r),i.push({key:r,link:s})),i},[])}function AB(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&na(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function KP(){let e=R.useContext(hh);return Bw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function CB(){let e=R.useContext(l_);return Bw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var zw=R.createContext(void 0);zw.displayName="FrameworkContext";function XP(){let e=R.useContext(zw);return Bw(e,"You must render this element inside a <HydratedRouter> element"),e}function RB(e,t){let n=R.useContext(zw),[i,s]=R.useState(!1),[r,a]=R.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:f,onTouchStart:m}=t,y=R.useRef(null);R.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let E=C=>{C.forEach(P=>{a(P.isIntersecting)})},x=new IntersectionObserver(E,{threshold:.5});return y.current&&x.observe(y.current),()=>{x.disconnect()}}},[e]),R.useEffect(()=>{if(i){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[i]);let v=()=>{s(!0)},T=()=>{s(!1),a(!1)};return n?e!=="intent"?[r,y,{}]:[r,y,{onFocus:Ad(c,v),onBlur:Ad(u,T),onMouseEnter:Ad(h,v),onMouseLeave:Ad(f,T),onTouchStart:Ad(m,v)}]:[!1,y,{}]}function Ad(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function IB({page:e,...t}){let{router:n}=KP(),i=R.useMemo(()=>FP(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?R.createElement(MB,{page:e,matches:i,...t}):null}function DB(e){let{manifest:t,routeModules:n}=XP(),[i,s]=R.useState([]);return R.useEffect(()=>{let r=!1;return TB(e,t,n).then(a=>{r||s(a)}),()=>{r=!0}},[e,t,n]),i}function MB({page:e,matches:t,...n}){let i=yl(),{manifest:s,routeModules:r}=XP(),{basename:a}=KP(),{loaderData:c,matches:u}=CB(),h=R.useMemo(()=>n1(e,t,u,s,i,"data"),[e,t,u,s,i]),f=R.useMemo(()=>n1(e,t,u,s,i,"assets"),[e,t,u,s,i]),m=R.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let T=new Set,E=!1;if(t.forEach(C=>{var N;let P=s.routes[C.route.id];!P||!P.hasLoader||(!h.some(q=>q.route.id===C.route.id)&&C.route.id in c&&((N=r[C.route.id])!=null&&N.shouldRevalidate)||P.hasClientLoader?E=!0:T.add(C.route.id))}),T.size===0)return[];let x=AB(e,a);return E&&T.size>0&&x.searchParams.set("_routes",t.filter(C=>T.has(C.route.id)).map(C=>C.route.id).join(",")),[x.pathname+x.search]},[a,c,i,s,h,t,e,r]),y=R.useMemo(()=>wB(f,s),[f,s]),v=DB(f);return R.createElement(R.Fragment,null,m.map(T=>R.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),y.map(T=>R.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),v.map(({key:T,link:E})=>R.createElement("link",{key:T,...E})))}function NB(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var QP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QP&&(window.__reactRouterVersion="7.5.0")}catch{}function PB({basename:e,children:t,window:n}){let i=R.useRef();i.current==null&&(i.current=_F({window:n,v5Compat:!0}));let s=i.current,[r,a]=R.useState({action:s.action,location:s.location}),c=R.useCallback(u=>{R.startTransition(()=>a(u))},[a]);return R.useLayoutEffect(()=>s.listen(c),[s,c]),R.createElement(cB,{basename:e,children:t,location:r.location,navigationType:r.action,navigator:s})}var ZP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hw=R.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:s,reloadDocument:r,replace:a,state:c,target:u,to:h,preventScrollReset:f,viewTransition:m,...y},v){let{basename:T}=R.useContext(Vr),E=typeof h=="string"&&ZP.test(h),x,C=!1;if(typeof h=="string"&&E&&(x=h,QP))try{let M=new URL(window.location.href),V=h.startsWith("//")?new URL(M.protocol+h):new URL(h),B=na(V.pathname,T);V.origin===M.origin&&B!=null?h=B+V.search+V.hash:C=!0}catch{Nr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=qF(h,{relative:s}),[N,q,F]=RB(i,y),G=LB(h,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function k(M){t&&t(M),M.defaultPrevented||G(M)}let D=R.createElement("a",{...y,...F,href:x||P,onClick:C||r?t:k,ref:NB(v,q),target:u,"data-discover":!E&&n==="render"?"true":void 0});return N&&!E?R.createElement(R.Fragment,null,D,R.createElement(IB,{page:P})):D});Hw.displayName="Link";var JP=R.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:s=!1,style:r,to:a,viewTransition:c,children:u,...h},f){let m=sp(a,{relative:h.relative}),y=yl(),v=R.useContext(l_),{navigator:T,basename:E}=R.useContext(Vr),x=v!=null&&BB(m)&&c===!0,C=T.encodeLocation?T.encodeLocation(m).pathname:m.pathname,P=y.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(P=P.toLowerCase(),N=N?N.toLowerCase():null,C=C.toLowerCase()),N&&E&&(N=na(N,E)||N);const q=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let F=P===C||!s&&P.startsWith(C)&&P.charAt(q)==="/",G=N!=null&&(N===C||!s&&N.startsWith(C)&&N.charAt(C.length)==="/"),k={isActive:F,isPending:G,isTransitioning:x},D=F?t:void 0,M;typeof i=="function"?M=i(k):M=[i,F?"active":null,G?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let V=typeof r=="function"?r(k):r;return R.createElement(Hw,{...h,"aria-current":D,className:M,ref:f,style:V,to:a,viewTransition:c},typeof u=="function"?u(k):u)});JP.displayName="NavLink";var OB=R.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:s,state:r,method:a=Pg,action:c,onSubmit:u,relative:h,preventScrollReset:f,viewTransition:m,...y},v)=>{let T=UB(),E=FB(c,{relative:h}),x=a.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&ZP.test(c),P=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let q=N.nativeEvent.submitter,F=(q==null?void 0:q.getAttribute("formmethod"))||a;T(q||N.currentTarget,{fetcherKey:t,method:F,navigate:n,replace:s,state:r,relative:h,preventScrollReset:f,viewTransition:m})};return R.createElement("form",{ref:v,method:x,action:E,onSubmit:i?u:P,...y,"data-discover":!C&&e==="render"?"true":void 0})});OB.displayName="Form";function kB(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t2(e){let t=R.useContext(hh);return wn(t,kB(e)),t}function LB(e,{target:t,replace:n,state:i,preventScrollReset:s,relative:r,viewTransition:a}={}){let c=Rc(),u=yl(),h=sp(e,{relative:r});return R.useCallback(f=>{if(mB(f,t)){f.preventDefault();let m=n!==void 0?n:Ef(u)===Ef(h);c(e,{replace:m,state:i,preventScrollReset:s,relative:r,viewTransition:a})}},[u,c,h,n,i,t,e,s,r,a])}var VB=0,jB=()=>`__${String(++VB)}__`;function UB(){let{router:e}=t2("useSubmit"),{basename:t}=R.useContext(Vr),n=sB();return R.useCallback(async(i,s={})=>{let{action:r,method:a,encType:c,formData:u,body:h}=_B(i,t);if(s.navigate===!1){let f=s.fetcherKey||jB();await e.fetch(f,n,s.action||r,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||a,formEncType:s.encType||c,flushSync:s.flushSync})}else await e.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||a,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function FB(e,{relative:t}={}){let{basename:n}=R.useContext(Vr),i=R.useContext(fr);wn(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...sp(e||".",{relative:t})},a=yl();if(e==null){r.search=a.search;let c=new URLSearchParams(r.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();r.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(r.pathname=r.pathname==="/"?n:Qo([n,r.pathname])),Ef(r)}function BB(e,t={}){let n=R.useContext(qP);wn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=t2("useViewTransitionState"),s=sp(e,{relative:t.relative});if(!n.isTransitioning)return!1;let r=na(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=na(n.nextLocation.pathname,i)||n.nextLocation.pathname;return sy(s.pathname,a)!=null||sy(s.pathname,r)!=null}new TextEncoder;var Vd=UP();const zB=()=>{};var i1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St=function(e,t){if(!e)throw fh(t)},fh=function(e){return new Error("Firebase Database ("+e2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},HB=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],a=e[n++],c=e[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],a=s+1<e.length,c=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,f=r>>2,m=(r&3)<<4|c>>4;let y=(c&15)<<2|h>>6,v=h&63;u||(v=64,a||(y=64)),i.push(n[f],n[m],n[y],n[v])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(n2(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):HB(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],c=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||c==null||h==null||m==null)throw new qB;const y=r<<2|c>>4;if(i.push(y),h!==64){const v=c<<4&240|h>>2;if(i.push(v),m!==64){const T=h<<6&192|m;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i2=function(e){const t=n2(e);return qw.encodeByteArray(t,!0)},ry=function(e){return i2(e).replace(/\./g,"")},oy=function(e){try{return qw.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(e){return s2(void 0,e)}function s2(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!WB(n)||(e[n]=s2(e[n],t[n]));return e}function WB(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=()=>GB().__FIREBASE_DEFAULTS__,KB=()=>{if(typeof process>"u"||typeof i1>"u")return;const e=i1.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},XB=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&oy(e[1]);return t&&JSON.parse(t)},u_=()=>{try{return zB()||YB()||KB()||XB()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},r2=e=>{var t,n;return(n=(t=u_())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},$w=e=>{const t=r2(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},o2=()=>{var e;return(e=u_())===null||e===void 0?void 0:e.config},a2=e=>{var t;return(t=u_())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ry(JSON.stringify(n)),ry(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xi())}function QB(){var e;const t=(e=u_())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kw(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function l2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JB(){const e=Xi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function tz(){return e2.NODE_ADMIN===!0}function ez(){return!QB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xw(){try{return typeof indexedDB=="object"}catch{return!1}}function Qw(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}function c2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="FirebaseError";class pr extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=nz,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ic.prototype.create)}}class Ic{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?iz(r,i):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new pr(s,c,i)}}function iz(e,t){return e.replace(sz,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const sz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(e){return JSON.parse(e)}function Ai(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=function(e){let t={},n={},i={},s="";try{const r=e.split(".");t=xf(oy(r[0])||""),n=xf(oy(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:i,signature:s}},rz=function(e){const t=u2(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},oz=function(e){const t=u2(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ku(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function iT(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ay(e,t,n){const i={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=t.call(n,e[s],s,e));return i}function ia(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],a=t[s];if(s1(r)&&s1(a)){if(!ia(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function s1(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function jd(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(r)}}),t}function Ud(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const i=this.W_;if(typeof t=="string")for(let m=0;m<16;m++)i[m]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let m=0;m<16;m++)i[m]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let m=16;m<80;m++){const y=i[m-3]^i[m-8]^i[m-14]^i[m-16];i[m]=(y<<1|y>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],a=this.chain_[2],c=this.chain_[3],u=this.chain_[4],h,f;for(let m=0;m<80;m++){m<40?m<20?(h=c^r&(a^c),f=1518500249):(h=r^a^c,f=1859775393):m<60?(h=r&a|c&(r|a),f=2400959708):(h=r^a^c,f=3395469782);const y=(s<<5|s>>>27)+h+u+f+i[m]&4294967295;u=c,c=a,a=(r<<30|r>>>2)&4294967295,r=s,s=y}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let a=this.inbuf_;for(;s<n;){if(a===0)for(;s<=i;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<n;)if(r[a]=t.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(r),a=0;break}}else for(;s<n;)if(r[a]=t[s],++a,++s,a===this.blockSize){this.compress_(r),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)t[i]=this.chain_[s]>>r&255,++i;return t}}function lz(e,t){const n=new cz(e,t);return n.subscribe.bind(n)}class cz{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");uz(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=Z0),s.error===void 0&&(s.error=Z0),s.complete===void 0&&(s.complete=Z0);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uz(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Z0(){}function hz(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,St(i<e.length,"Surrogate pair missing trail surrogate.");const a=e.charCodeAt(i)-56320;s=65536+(r<<10)+a}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},h_=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=1e3,pz=2,mz=4*60*60*1e3,gz=.5;function r1(e,t=fz,n=pz){const i=t*Math.pow(n,e),s=Math.round(gz*i*(Math.random()-.5)*2);return Math.min(mz,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(e){return e&&e._delegate?e._delegate:e}class Bs{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Ww;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(vz(t))try{this.getOrInitializeService({instanceIdentifier:Jl})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Jl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Jl){return this.instances.has(t)}getOptions(t=Jl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);i===c&&a.resolve(s)}return s}onInit(t,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(t),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&t(a,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_z(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Jl){return this.component?this.component.multipleInstances?t:Jl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _z(e){return e===Jl?void 0:e}function vz(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new yz(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(we||(we={}));const Tz={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},wz=we.INFO,Ez={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},xz=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=Ez[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class rp{constructor(t){this.name=t,this._logLevel=wz,this._logHandler=xz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in we))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Tz[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...t),this._logHandler(this,we.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...t),this._logHandler(this,we.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,we.INFO,...t),this._logHandler(this,we.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,we.WARN,...t),this._logHandler(this,we.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...t),this._logHandler(this,we.ERROR,...t)}}const Sz=(e,t)=>t.some(n=>e instanceof n);let o1,a1;function Az(){return o1||(o1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cz(){return a1||(a1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h2=new WeakMap,sT=new WeakMap,d2=new WeakMap,J0=new WeakMap,Zw=new WeakMap;function Rz(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{n(Za(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&h2.set(n,e)}).catch(()=>{}),Zw.set(t,e),t}function Iz(e){if(sT.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)});sT.set(e,t)}let rT={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return sT.get(e);if(t==="objectStoreNames")return e.objectStoreNames||d2.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Za(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Dz(e){rT=e(rT)}function Mz(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(tb(this),t,...n);return d2.set(i,t.sort?t.sort():[t]),Za(i)}:Cz().includes(e)?function(...t){return e.apply(tb(this),t),Za(h2.get(this))}:function(...t){return Za(e.apply(tb(this),t))}}function Nz(e){return typeof e=="function"?Mz(e):(e instanceof IDBTransaction&&Iz(e),Sz(e,Az())?new Proxy(e,rT):e)}function Za(e){if(e instanceof IDBRequest)return Rz(e);if(J0.has(e))return J0.get(e);const t=Nz(e);return t!==e&&(J0.set(e,t),Zw.set(t,e)),t}const tb=e=>Zw.get(e);function f2(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),c=Za(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Za(a.result),u.oldVersion,u.newVersion,Za(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const Pz=["get","getKey","getAll","getAllKeys","count"],Oz=["put","add","delete","clear"],eb=new Map;function l1(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(eb.get(t))return eb.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=Oz.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Pz.includes(n)))return;const r=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return eb.set(t,r),r}Dz(e=>({...e,get:(t,n,i)=>l1(t,n)||e.get(t,n,i),has:(t,n)=>!!l1(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lz(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Lz(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const oT="@firebase/app",c1="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new rp("@firebase/app"),Vz="@firebase/app-compat",jz="@firebase/analytics-compat",Uz="@firebase/analytics",Fz="@firebase/app-check-compat",Bz="@firebase/app-check",zz="@firebase/auth",Hz="@firebase/auth-compat",qz="@firebase/database",$z="@firebase/data-connect",Wz="@firebase/database-compat",Gz="@firebase/functions",Yz="@firebase/functions-compat",Kz="@firebase/installations",Xz="@firebase/installations-compat",Qz="@firebase/messaging",Zz="@firebase/messaging-compat",Jz="@firebase/performance",t6="@firebase/performance-compat",e6="@firebase/remote-config",n6="@firebase/remote-config-compat",i6="@firebase/storage",s6="@firebase/storage-compat",r6="@firebase/firestore",o6="@firebase/vertexai",a6="@firebase/firestore-compat",l6="firebase",c6="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="[DEFAULT]",u6={[oT]:"fire-core",[Vz]:"fire-core-compat",[Uz]:"fire-analytics",[jz]:"fire-analytics-compat",[Bz]:"fire-app-check",[Fz]:"fire-app-check-compat",[zz]:"fire-auth",[Hz]:"fire-auth-compat",[qz]:"fire-rtdb",[$z]:"fire-data-connect",[Wz]:"fire-rtdb-compat",[Gz]:"fire-fn",[Yz]:"fire-fn-compat",[Kz]:"fire-iid",[Xz]:"fire-iid-compat",[Qz]:"fire-fcm",[Zz]:"fire-fcm-compat",[Jz]:"fire-perf",[t6]:"fire-perf-compat",[e6]:"fire-rc",[n6]:"fire-rc-compat",[i6]:"fire-gcs",[s6]:"fire-gcs-compat",[r6]:"fire-fst",[a6]:"fire-fst-compat",[o6]:"fire-vertex","fire-js":"fire-js",[l6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=new Map,h6=new Map,lT=new Map;function u1(e,t){try{e.container.addComponent(t)}catch(n){sa.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ur(e){const t=e.name;if(lT.has(t))return sa.debug(`There were multiple attempts to register component ${t}.`),!1;lT.set(t,e);for(const n of ly.values())u1(n,e);for(const n of h6.values())u1(n,e);return!0}function da(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ms(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ja=new Ic("app","Firebase",d6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ja.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=c6;function p2(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:aT,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw Ja.create("bad-app-name",{appName:String(s)});if(n||(n=o2()),!n)throw Ja.create("no-options");const r=ly.get(s);if(r){if(ia(n,r.options)&&ia(i,r.config))return r;throw Ja.create("duplicate-app",{appName:s})}const a=new bz(s);for(const u of lT.values())a.addComponent(u);const c=new f6(n,i,a);return ly.set(s,c),c}function op(e=aT){const t=ly.get(e);if(!t&&e===aT&&o2())return p2();if(!t)throw Ja.create("no-app",{appName:e});return t}function Yi(e,t,n){var i;let s=(i=u6[e])!==null&&i!==void 0?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const c=[`Unable to register library "${s}" with version "${t}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&c.push("and"),a&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sa.warn(c.join(" "));return}ur(new Bs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="firebase-heartbeat-database",m6=1,Sf="firebase-heartbeat-store";let nb=null;function m2(){return nb||(nb=f2(p6,m6,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Sf)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ja.create("idb-open",{originalErrorMessage:e.message})})),nb}async function g6(e){try{const n=(await m2()).transaction(Sf),i=await n.objectStore(Sf).get(g2(e));return await n.done,i}catch(t){if(t instanceof pr)sa.warn(t.message);else{const n=Ja.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});sa.warn(n.message)}}}async function h1(e,t){try{const i=(await m2()).transaction(Sf,"readwrite");await i.objectStore(Sf).put(t,g2(e)),await i.done}catch(n){if(n instanceof pr)sa.warn(n.message);else{const i=Ja.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sa.warn(i.message)}}}function g2(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=1024,_6=30;class v6{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new T6(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=d1();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>_6){const a=w6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){sa.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=d1(),{heartbeatsToSend:i,unsentEntries:s}=b6(this._heartbeatsCache.heartbeats),r=ry(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return sa.warn(n),""}}}function d1(){return new Date().toISOString().substring(0,10)}function b6(e,t=y6){const n=[];let i=e.slice();for(const s of e){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),f1(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),f1(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class T6{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xw()?Qw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await g6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return h1(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return h1(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function f1(e){return ry(JSON.stringify({version:2,heartbeats:e})).length}function w6(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(e){ur(new Bs("platform-logger",t=>new kz(t),"PRIVATE")),ur(new Bs("heartbeat",t=>new v6(t),"PRIVATE")),Yi(oT,c1,e),Yi(oT,c1,"esm2017"),Yi("fire-js","")}E6("");function Jw(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function y2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x6=y2,_2=new Ic("auth","Firebase",y2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new rp("@firebase/auth");function S6(e,...t){cy.logLevel<=we.WARN&&cy.warn(`Auth (${_l}): ${e}`,...t)}function kg(e,...t){cy.logLevel<=we.ERROR&&cy.error(`Auth (${_l}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(e,...t){throw tE(e,...t)}function so(e,...t){return tE(e,...t)}function v2(e,t,n){const i=Object.assign(Object.assign({},x6()),{[t]:n});return new Ic("auth","Firebase",i).create(t,{appName:e.name})}function Zo(e){return v2(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tE(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return _2.create(e,...t)}function Yt(e,t,...n){if(!e)throw tE(t,...n)}function Wo(e){const t="INTERNAL ASSERTION FAILED: "+e;throw kg(t),new Error(t)}function ra(e,t){e||Wo(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function A6(){return p1()==="http:"||p1()==="https:"}function p1(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A6()||Kw()||"connection"in navigator)?navigator.onLine:!0}function R6(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t,n){this.shortDelay=t,this.longDelay=n,ra(n>t,"Short delay should be less than long delay!"),this.isMobile=Yw()||l2()}get(){return C6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(e,t){ra(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M6=new ap(3e4,6e4);function fa(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function pa(e,t,n,i,s={}){return T2(e,s,async()=>{let r={},a={};i&&(t==="GET"?a=i:r={body:JSON.stringify(i)});const c=ph(Object.assign({key:e.config.apiKey},a)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const h=Object.assign({method:t,headers:u},r);return ZB()||(h.referrerPolicy="no-referrer"),b2.fetch()(await w2(e,e.config.apiHost,n,c),h)})}async function T2(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},I6),t);try{const s=new P6(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw tg(e,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const c=r.ok?a.errorMessage:a.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw tg(e,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw tg(e,"email-already-in-use",a);if(u==="USER_DISABLED")throw tg(e,"user-disabled",a);const f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw v2(e,f,h);Pr(e,f)}}catch(s){if(s instanceof pr)throw s;Pr(e,"network-request-failed",{message:String(s)})}}async function lp(e,t,n,i,s={}){const r=await pa(e,t,n,i,s);return"mfaPendingCredential"in r&&Pr(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function w2(e,t,n,i){const s=`${t}${n}?${i}`,r=e,a=r.config.emulator?eE(e.config,s):`${e.config.apiScheme}://${s}`;return D6.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function N6(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class P6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(so(this.auth,"network-request-failed")),M6.get())})}}function tg(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=so(e,t,i);return s.customData._tokenResponse=n,s}function m1(e){return e!==void 0&&e.enterprise!==void 0}class O6{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return N6(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function k6(e,t){return pa(e,"GET","/v2/recaptchaConfig",fa(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6(e,t){return pa(e,"POST","/v1/accounts:delete",t)}async function uy(e,t){return pa(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function V6(e,t=!1){const n=dn(e),i=await n.getIdToken(t),s=nE(i);Yt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Jd(ib(s.auth_time)),issuedAtTime:Jd(ib(s.iat)),expirationTime:Jd(ib(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function ib(e){return Number(e)*1e3}function nE(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return kg("JWT malformed, contained fewer than 3 sections"),null;try{const s=oy(n);return s?JSON.parse(s):(kg("Failed to decode base64 JWT payload"),null)}catch(s){return kg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function g1(e){const t=nE(e);return Yt(t,"internal-error"),Yt(typeof t.exp<"u","internal-error"),Yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Af(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof pr&&j6(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function j6({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jd(this.lastLoginAt),this.creationTime=Jd(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hy(e){var t;const n=e.auth,i=await e.getIdToken(),s=await Af(e,uy(n,{idToken:i}));Yt(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const a=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?E2(r.providerUserInfo):[],c=B6(e.providerData,a),u=e.isAnonymous,h=!(e.email&&r.passwordHash)&&!(c!=null&&c.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new uT(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(e,m)}async function F6(e){const t=dn(e);await hy(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function B6(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function E2(e){return e.map(t=>{var{providerId:n}=t,i=Jw(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z6(e,t){const n=await T2(e,{},async()=>{const i=ph({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,a=await w2(e,s,"/v1/token",`key=${r}`),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",b2.fetch()(a,{method:"POST",headers:c,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function H6(e,t){return pa(e,"POST","/v2/accounts:revokeToken",fa(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Yt(t.idToken,"internal-error"),Yt(typeof t.idToken<"u","internal-error"),Yt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):g1(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Yt(t.length!==0,"internal-error");const n=g1(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await z6(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Fu;return i&&(Yt(typeof i=="string","internal-error",{appName:t}),a.refreshToken=i),s&&(Yt(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(Yt(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Fu,this.toJSON())}_performRefresh(){return Wo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(e,t){Yt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Rr{constructor(t){var{uid:n,auth:i,stsTokenManager:s}=t,r=Jw(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new U6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new uT(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Af(this,this.stsTokenManager.getToken(this.auth,t));return Yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return V6(this,t)}reload(){return F6(this)}_assign(t){this!==t&&(Yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Rr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await hy(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ms(this.auth.app))return Promise.reject(Zo(this.auth));const t=await this.getIdToken();return await Af(this,L6(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,s,r,a,c,u,h,f;const m=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,v=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,T=(a=n.photoURL)!==null&&a!==void 0?a:void 0,E=(c=n.tenantId)!==null&&c!==void 0?c:void 0,x=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,C=(h=n.createdAt)!==null&&h!==void 0?h:void 0,P=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:N,emailVerified:q,isAnonymous:F,providerData:G,stsTokenManager:k}=n;Yt(N&&k,t,"internal-error");const D=Fu.fromJSON(this.name,k);Yt(typeof N=="string",t,"internal-error"),Va(m,t.name),Va(y,t.name),Yt(typeof q=="boolean",t,"internal-error"),Yt(typeof F=="boolean",t,"internal-error"),Va(v,t.name),Va(T,t.name),Va(E,t.name),Va(x,t.name),Va(C,t.name),Va(P,t.name);const M=new Rr({uid:N,auth:t,email:y,emailVerified:q,displayName:m,isAnonymous:F,photoURL:T,phoneNumber:v,tenantId:E,stsTokenManager:D,createdAt:C,lastLoginAt:P});return G&&Array.isArray(G)&&(M.providerData=G.map(V=>Object.assign({},V))),x&&(M._redirectEventId=x),M}static async _fromIdTokenResponse(t,n,i=!1){const s=new Fu;s.updateFromServerResponse(n);const r=new Rr({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await hy(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];Yt(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?E2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),c=new Fu;c.updateFromIdToken(i);const u=new Rr({uid:s.localId,auth:t,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new uT(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=new Map;function Go(e){ra(e instanceof Function,"Expected a class definition");let t=y1.get(e);return t?(ra(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,y1.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}x2.type="NONE";const _1=x2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(e,t,n){return`firebase:${e}:${t}:${n}`}class Bu{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Lg(this.userKey,s.apiKey,r),this.fullPersistenceKey=Lg("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await uy(this.auth,{idToken:t}).catch(()=>{});return n?Rr._fromGetAccountInfoResponse(this.auth,n,t):null}return Rr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Bu(Go(_1),t,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||Go(_1);const a=Lg(i,t.config.apiKey,t.name);let c=null;for(const h of n)try{const f=await h._get(a);if(f){let m;if(typeof f=="string"){const y=await uy(t,{idToken:f}).catch(()=>{});if(!y)break;m=await Rr._fromGetAccountInfoResponse(t,y,f)}else m=Rr._fromJSON(t,f);h!==r&&(c=m),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Bu(r,t,i):(r=u[0],c&&await r._set(a,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Bu(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(R2(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(S2(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(D2(t))return"Blackberry";if(M2(t))return"Webos";if(A2(t))return"Safari";if((t.includes("chrome/")||C2(t))&&!t.includes("edge/"))return"Chrome";if(I2(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function S2(e=Xi()){return/firefox\//i.test(e)}function A2(e=Xi()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function C2(e=Xi()){return/crios\//i.test(e)}function R2(e=Xi()){return/iemobile/i.test(e)}function I2(e=Xi()){return/android/i.test(e)}function D2(e=Xi()){return/blackberry/i.test(e)}function M2(e=Xi()){return/webos/i.test(e)}function iE(e=Xi()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function q6(e=Xi()){var t;return iE(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function $6(){return JB()&&document.documentMode===10}function N2(e=Xi()){return iE(e)||I2(e)||M2(e)||D2(e)||/windows phone/i.test(e)||R2(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(e,t=[]){let n;switch(e){case"Browser":n=v1(Xi());break;case"Worker":n=`${v1(Xi())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${_l}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((a,c)=>{try{const u=t(r);a(u)}catch(u){c(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(e,t={}){return pa(e,"GET","/v2/passwordPolicy",fa(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=6;class K6{constructor(t){var n,i,s,r;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:Y6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,i,s,r,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsUppercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b1(this),this.idTokenSubscription=new b1(this),this.beforeStateQueue=new W6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Go(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Bu.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await uy(this,{idToken:t}),i=await Rr._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ms(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(t);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await hy(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=R6()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ms(this.app))return Promise.reject(Zo(this));const n=t?dn(t):null;return n&&Yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ms(this.app)?Promise.reject(Zo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ms(this.app)?Promise.reject(Zo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Go(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await G6(this),n=new K6(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ic("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await H6(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Go(t)||this._popupRedirectResolver;Yt(n,this,"argument-error"),this.redirectPersistenceManager=await Bu.create(this,[Go(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yt(c,this,"internal-error"),c.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=t.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=P2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var t;if(ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&S6(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vl(e){return dn(e)}class b1{constructor(t){this.auth=t,this.observer=null,this.addObserver=lz(n=>this.observer=n)}get next(){return Yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q6(e){d_=e}function O2(e){return d_.loadJS(e)}function Z6(){return d_.recaptchaEnterpriseScript}function J6(){return d_.gapiScript}function t5(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class e5{constructor(){this.enterprise=new n5}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class n5{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const i5="recaptcha-enterprise",k2="NO_RECAPTCHA";class s5{constructor(t){this.type=i5,this.auth=vl(t)}async verify(t="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,c)=>{k6(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new O6(u);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,a(h.siteKey)}}).catch(u=>{c(u)})})}function s(r,a,c){const u=window.grecaptcha;m1(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:t}).then(h=>{a(h)}).catch(()=>{a(k2)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e5().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(c=>{if(!n&&m1(window.grecaptcha))s(c,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Z6();u.length!==0&&(u+=c),O2(u).then(()=>{s(c,r,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function T1(e,t,n,i=!1,s=!1){const r=new s5(e);let a;if(s)a=k2;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const c=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function dy(e,t,n,i,s){var r;if(!((r=e._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await T1(e,t,n,n==="getOobCode");return i(e,a)}else return i(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await T1(e,t,n,n==="getOobCode");return i(e,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(e,t){const n=da(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(ia(r,t??{}))return s;Pr(s,"already-initialized")}return n.initialize({options:t})}function o5(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Go);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function a5(e,t,n){const i=vl(e);Yt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=L2(t),{host:a,port:c}=l5(t),u=c===null?"":`:${c}`,h={url:`${r}//${a}${u}/`},f=Object.freeze({host:a,port:c,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Yt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Yt(ia(h,i.config.emulator)&&ia(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,c5()}function L2(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function l5(e){const t=L2(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:w1(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:w1(a)}}}function w1(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function c5(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Wo("not implemented")}_getIdTokenResponse(t){return Wo("not implemented")}_linkToIdToken(t,n){return Wo("not implemented")}_getReauthenticationResolver(t){return Wo("not implemented")}}async function u5(e,t){return pa(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(e,t){return lp(e,"POST","/v1/accounts:signInWithPassword",fa(e,t))}async function d5(e,t){return pa(e,"POST","/v1/accounts:sendOobCode",fa(e,t))}async function f5(e,t){return d5(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(e,t){return lp(e,"POST","/v1/accounts:signInWithEmailLink",fa(e,t))}async function m5(e,t){return lp(e,"POST","/v1/accounts:signInWithEmailLink",fa(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends sE{constructor(t,n,i,s=null){super("password",i),this._email=t,this._password=n,this._tenantId=s}static _fromEmailAndPassword(t,n){return new Cf(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new Cf(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dy(t,n,"signInWithPassword",h5);case"emailLink":return p5(t,{email:this._email,oobCode:this._password});default:Pr(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dy(t,i,"signUpPassword",u5);case"emailLink":return m5(t,{idToken:n,email:this._email,oobCode:this._password});default:Pr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(e,t){return lp(e,"POST","/v1/accounts:signInWithIdp",fa(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5="http://localhost";class gc extends sE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new gc(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=n,r=Jw(n,["providerId","signInMethod"]);if(!i||!s)return null;const a=new gc(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return zu(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,zu(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,zu(t,n)}buildRequest(){const t={requestUri:g5,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ph(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _5(e){const t=jd(Ud(e)).link,n=t?jd(Ud(t)).deep_link_id:null,i=jd(Ud(e)).deep_link_id;return(i?jd(Ud(i)).link:null)||i||n||t||e}class rE{constructor(t){var n,i,s,r,a,c;const u=jd(Ud(t)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(i=u.oobCode)!==null&&i!==void 0?i:null,m=y5((s=u.mode)!==null&&s!==void 0?s:null);Yt(h&&f&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=f,this.continueUrl=(r=u.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const n=_5(t);try{return new rE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(){this.providerId=mh.PROVIDER_ID}static credential(t,n){return Cf._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=rE.parseLink(n);return Yt(i,"argument-error"),Cf._fromEmailAndCode(t,i.code,i.tenantId)}}mh.PROVIDER_ID="password";mh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends V2{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends cp{constructor(){super("facebook.com")}static credential(t){return gc._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return za.credentialFromTaggedObject(t)}static credentialFromError(t){return za.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return za.credential(t.oauthAccessToken)}catch{return null}}}za.FACEBOOK_SIGN_IN_METHOD="facebook.com";za.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends cp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return gc._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ha.credentialFromTaggedObject(t)}static credentialFromError(t){return Ha.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Ha.credential(n,i)}catch{return null}}}Ha.GOOGLE_SIGN_IN_METHOD="google.com";Ha.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends cp{constructor(){super("github.com")}static credential(t){return gc._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qa.credentialFromTaggedObject(t)}static credentialFromError(t){return qa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qa.credential(t.oauthAccessToken)}catch{return null}}}qa.GITHUB_SIGN_IN_METHOD="github.com";qa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends cp{constructor(){super("twitter.com")}static credential(t,n){return gc._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return $a.credentialFromTaggedObject(t)}static credentialFromError(t){return $a.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return $a.credential(n,i)}catch{return null}}}$a.TWITTER_SIGN_IN_METHOD="twitter.com";$a.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(e,t){return lp(e,"POST","/v1/accounts:signUp",fa(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await Rr._fromIdTokenResponse(t,i,s),a=E1(i);return new yc({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=E1(i);return new yc({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function E1(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends pr{constructor(t,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,fy.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new fy(t,n,i,s)}}function j2(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?fy._fromErrorAndOperation(e,r,t,i):r})}async function b5(e,t,n=!1){const i=await Af(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return yc._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(e,t,n=!1){const{auth:i}=e;if(ms(i.app))return Promise.reject(Zo(i));const s="reauthenticate";try{const r=await Af(e,j2(i,s,t,e),n);Yt(r.idToken,i,"internal-error");const a=nE(r.idToken);Yt(a,i,"internal-error");const{sub:c}=a;return Yt(e.uid===c,i,"user-mismatch"),yc._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Pr(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(e,t,n=!1){if(ms(e.app))return Promise.reject(Zo(e));const i="signIn",s=await j2(e,i,t),r=await yc._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function w5(e,t){return U2(vl(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(e){const t=vl(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function E5(e,t,n){const i=vl(e);await dy(i,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",f5)}async function B2(e,t,n){if(ms(e.app))return Promise.reject(Zo(e));const i=vl(e),a=await dy(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v5).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&F2(e),u}),c=await yc._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}function z2(e,t,n){return ms(e.app)?Promise.reject(Zo(e)):w5(dn(e),mh.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&F2(e),i})}function x5(e,t,n,i){return dn(e).onIdTokenChanged(t,n,i)}function S5(e,t,n){return dn(e).beforeAuthStateChanged(t,n)}function oE(e,t,n,i){return dn(e).onAuthStateChanged(t,n,i)}function py(e){return dn(e).signOut()}const my="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(my,"1"),this.storage.removeItem(my),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=1e3,C5=10;class q2 extends H2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N2(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);$6()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,C5):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},A5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}q2.type="LOCAL";const R5=q2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2 extends H2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}$2.type="SESSION";const W2=$2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new f_(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(a).map(async h=>h(n.origin,r)),u=await I5(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}f_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((c,u)=>{const h=aE("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(f),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),c(y.data.response);break;default:clearTimeout(f),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(){return window}function M5(e){ro().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){return typeof ro().WorkerGlobalScope<"u"&&typeof ro().importScripts=="function"}async function N5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P5(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function O5(){return G2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="firebaseLocalStorageDb",k5=1,gy="firebaseLocalStorage",K2="fbase_key";class up{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function p_(e,t){return e.transaction([gy],t?"readwrite":"readonly").objectStore(gy)}function L5(){const e=indexedDB.deleteDatabase(Y2);return new up(e).toPromise()}function hT(){const e=indexedDB.open(Y2,k5);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(gy,{keyPath:K2})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(gy)?t(i):(i.close(),await L5(),t(await hT()))})})}async function x1(e,t,n){const i=p_(e,!0).put({[K2]:t,value:n});return new up(i).toPromise()}async function V5(e,t){const n=p_(e,!1).get(t),i=await new up(n).toPromise();return i===void 0?null:i.value}function S1(e,t){const n=p_(e,!0).delete(t);return new up(n).toPromise()}const j5=800,U5=3;class X2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hT(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>U5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=f_._getInstance(O5()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await N5(),!this.activeServiceWorker)return;this.sender=new D5(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||P5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await hT();return await x1(t,my,"1"),await S1(t,my),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>x1(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>V5(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>S1(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=p_(s,!1).getAll();return new up(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X2.type="LOCAL";const F5=X2;new ap(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(e,t){return t?Go(t):(Yt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends sE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return zu(t,this._buildIdpRequest())}_linkToIdToken(t,n){return zu(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return zu(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function z5(e){return U2(e.auth,new lE(e),e.bypassAuthState)}function H5(e){const{auth:t,user:n}=e;return Yt(n,t,"internal-error"),T5(n,new lE(e),e.bypassAuthState)}async function q5(e){const{auth:t,user:n}=e;return Yt(n,t,"internal-error"),b5(n,new lE(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:c}=t;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return z5;case"linkViaPopup":case"linkViaRedirect":return q5;case"reauthViaPopup":case"reauthViaRedirect":return H5;default:Pr(this.auth,"internal-error")}}resolve(t){ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=new ap(2e3,1e4);class Du extends Q2{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Du.currentPopupAction&&Du.currentPopupAction.cancel(),Du.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Yt(t,this.auth,"internal-error"),t}async onExecution(){ra(this.filter.length===1,"Popup operations only handle one event");const t=aE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(so(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(so(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Du.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(so(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,$5.get())};t()}}Du.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="pendingRedirect",Vg=new Map;class G5 extends Q2{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Vg.get(this.auth._key());if(!t){try{const i=await Y5(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Vg.set(this.auth._key(),t)}return this.bypassAuthState||Vg.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y5(e,t){const n=Q5(t),i=X5(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function K5(e,t){Vg.set(e._key(),t)}function X5(e){return Go(e._redirectPersistence)}function Q5(e){return Lg(W5,e.config.apiKey,e.name)}async function Z5(e,t,n=!1){if(ms(e.app))return Promise.reject(Zo(e));const i=vl(e),s=B5(i,t),a=await new G5(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=10*60*1e3;class t9{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!e9(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!Z2(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(so(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=J5&&this.cachedEventUids.clear(),this.cachedEventUids.has(A1(t))}saveEventToCache(t){this.cachedEventUids.add(A1(t)),this.lastProcessedEventTime=Date.now()}}function A1(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Z2({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function e9(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z2(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n9(e,t={}){return pa(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s9=/^https?/;async function r9(e){if(e.config.emulator)return;const{authorizedDomains:t}=await n9(e);for(const n of t)try{if(o9(n))return}catch{}Pr(e,"unauthorized-domain")}function o9(e){const t=cT(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!s9.test(n))return!1;if(i9.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=new ap(3e4,6e4);function C1(){const e=ro().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function l9(e){return new Promise((t,n)=>{var i,s,r;function a(){C1(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{C1(),n(so(e,"network-request-failed"))},timeout:a9.get()})}if(!((s=(i=ro().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((r=ro().gapi)===null||r===void 0)&&r.load)a();else{const c=t5("iframefcb");return ro()[c]=()=>{gapi.load?a():n(so(e,"network-request-failed"))},O2(`${J6()}?onload=${c}`).catch(u=>n(u))}}).catch(t=>{throw jg=null,t})}let jg=null;function c9(e){return jg=jg||l9(e),jg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=new ap(5e3,15e3),h9="__/auth/iframe",d9="emulator/auth/iframe",f9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m9(e){const t=e.config;Yt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?eE(t,d9):`https://${e.config.authDomain}/${h9}`,i={apiKey:t.apiKey,appName:e.name,v:_l},s=p9.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${ph(i).slice(1)}`}async function g9(e){const t=await c9(e),n=ro().gapi;return Yt(n,e,"internal-error"),t.open({where:document.body,url:m9(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f9,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=so(e,"network-request-failed"),c=ro().setTimeout(()=>{r(a)},u9.get());function u(){ro().clearTimeout(c),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_9=500,v9=600,b9="_blank",T9="http://localhost";class R1{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w9(e,t,n,i=_9,s=v9){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},y9),{width:i.toString(),height:s.toString(),top:r,left:a}),h=Xi().toLowerCase();n&&(c=C2(h)?b9:n),S2(h)&&(t=t||T9,u.scrollbars="yes");const f=Object.entries(u).reduce((y,[v,T])=>`${y}${v}=${T},`,"");if(q6(h)&&c!=="_self")return E9(t||"",c),new R1(null);const m=window.open(t||"",c,f);Yt(m,e,"popup-blocked");try{m.focus()}catch{}return new R1(m)}function E9(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="__/auth/handler",S9="emulator/auth/handler",A9=encodeURIComponent("fac");async function I1(e,t,n,i,s,r){Yt(e.config.authDomain,e,"auth-domain-config-required"),Yt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:_l,eventId:s};if(t instanceof V2){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",iT(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(t instanceof cp){const f=t.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}e.tenantId&&(a.tid=e.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await e._getAppCheckToken(),h=u?`#${A9}=${encodeURIComponent(u)}`:"";return`${C9(e)}?${ph(c).slice(1)}${h}`}function C9({config:e}){return e.emulator?eE(e,S9):`https://${e.authDomain}/${x9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="webStorageSupport";class R9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=W2,this._completeRedirectFn=Z5,this._overrideRedirectResult=K5}async _openPopup(t,n,i,s){var r;ra((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await I1(t,n,i,cT(),s);return w9(t,a,aE())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await I1(t,n,i,cT(),s);return M5(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(ra(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await g9(t),i=new t9(t);return n.register("authEvent",s=>(Yt(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(sb,{type:sb},s=>{var r;const a=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[sb];a!==void 0&&n(!!a),Pr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r9(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return N2()||A2()||iE()}}const I9=R9;var D1="@firebase/auth",M1="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N9(e){ur(new Bs("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;Yt(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:c,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P2(e)},h=new X6(i,s,r,u);return o5(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),ur(new Bs("auth-internal",t=>{const n=vl(t.getProvider("auth").getImmediate());return(i=>new D9(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yi(D1,M1,M9(e)),Yi(D1,M1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=5*60,O9=a2("authIdTokenMaxAge")||P9;let N1=null;const k9=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>O9)return;const s=n==null?void 0:n.token;N1!==s&&(N1=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function J2(e=op()){const t=da(e,"auth");if(t.isInitialized())return t.getImmediate();const n=r5(e,{popupRedirectResolver:I9,persistence:[F5,R5,W2]}),i=a2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=k9(r.toString());S5(n,a,()=>a(n.currentUser)),x5(n,c=>a(c))}}const s=r2("auth");return s&&a5(n,`http://${s}`),n}function L9(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Q6({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=so("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",L9().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});N9("Browser");var P1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tl,tO;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(k,D){function M(){}M.prototype=D.prototype,k.D=D.prototype,k.prototype=new M,k.prototype.constructor=k,k.C=function(V,B,$){for(var H=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)H[Et-2]=arguments[Et];return D.prototype[B].apply(V,H)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,D,M){M||(M=0);var V=Array(16);if(typeof D=="string")for(var B=0;16>B;++B)V[B]=D.charCodeAt(M++)|D.charCodeAt(M++)<<8|D.charCodeAt(M++)<<16|D.charCodeAt(M++)<<24;else for(B=0;16>B;++B)V[B]=D[M++]|D[M++]<<8|D[M++]<<16|D[M++]<<24;D=k.g[0],M=k.g[1],B=k.g[2];var $=k.g[3],H=D+($^M&(B^$))+V[0]+3614090360&4294967295;D=M+(H<<7&4294967295|H>>>25),H=$+(B^D&(M^B))+V[1]+3905402710&4294967295,$=D+(H<<12&4294967295|H>>>20),H=B+(M^$&(D^M))+V[2]+606105819&4294967295,B=$+(H<<17&4294967295|H>>>15),H=M+(D^B&($^D))+V[3]+3250441966&4294967295,M=B+(H<<22&4294967295|H>>>10),H=D+($^M&(B^$))+V[4]+4118548399&4294967295,D=M+(H<<7&4294967295|H>>>25),H=$+(B^D&(M^B))+V[5]+1200080426&4294967295,$=D+(H<<12&4294967295|H>>>20),H=B+(M^$&(D^M))+V[6]+2821735955&4294967295,B=$+(H<<17&4294967295|H>>>15),H=M+(D^B&($^D))+V[7]+4249261313&4294967295,M=B+(H<<22&4294967295|H>>>10),H=D+($^M&(B^$))+V[8]+1770035416&4294967295,D=M+(H<<7&4294967295|H>>>25),H=$+(B^D&(M^B))+V[9]+2336552879&4294967295,$=D+(H<<12&4294967295|H>>>20),H=B+(M^$&(D^M))+V[10]+4294925233&4294967295,B=$+(H<<17&4294967295|H>>>15),H=M+(D^B&($^D))+V[11]+2304563134&4294967295,M=B+(H<<22&4294967295|H>>>10),H=D+($^M&(B^$))+V[12]+1804603682&4294967295,D=M+(H<<7&4294967295|H>>>25),H=$+(B^D&(M^B))+V[13]+4254626195&4294967295,$=D+(H<<12&4294967295|H>>>20),H=B+(M^$&(D^M))+V[14]+2792965006&4294967295,B=$+(H<<17&4294967295|H>>>15),H=M+(D^B&($^D))+V[15]+1236535329&4294967295,M=B+(H<<22&4294967295|H>>>10),H=D+(B^$&(M^B))+V[1]+4129170786&4294967295,D=M+(H<<5&4294967295|H>>>27),H=$+(M^B&(D^M))+V[6]+3225465664&4294967295,$=D+(H<<9&4294967295|H>>>23),H=B+(D^M&($^D))+V[11]+643717713&4294967295,B=$+(H<<14&4294967295|H>>>18),H=M+($^D&(B^$))+V[0]+3921069994&4294967295,M=B+(H<<20&4294967295|H>>>12),H=D+(B^$&(M^B))+V[5]+3593408605&4294967295,D=M+(H<<5&4294967295|H>>>27),H=$+(M^B&(D^M))+V[10]+38016083&4294967295,$=D+(H<<9&4294967295|H>>>23),H=B+(D^M&($^D))+V[15]+3634488961&4294967295,B=$+(H<<14&4294967295|H>>>18),H=M+($^D&(B^$))+V[4]+3889429448&4294967295,M=B+(H<<20&4294967295|H>>>12),H=D+(B^$&(M^B))+V[9]+568446438&4294967295,D=M+(H<<5&4294967295|H>>>27),H=$+(M^B&(D^M))+V[14]+3275163606&4294967295,$=D+(H<<9&4294967295|H>>>23),H=B+(D^M&($^D))+V[3]+4107603335&4294967295,B=$+(H<<14&4294967295|H>>>18),H=M+($^D&(B^$))+V[8]+1163531501&4294967295,M=B+(H<<20&4294967295|H>>>12),H=D+(B^$&(M^B))+V[13]+2850285829&4294967295,D=M+(H<<5&4294967295|H>>>27),H=$+(M^B&(D^M))+V[2]+4243563512&4294967295,$=D+(H<<9&4294967295|H>>>23),H=B+(D^M&($^D))+V[7]+1735328473&4294967295,B=$+(H<<14&4294967295|H>>>18),H=M+($^D&(B^$))+V[12]+2368359562&4294967295,M=B+(H<<20&4294967295|H>>>12),H=D+(M^B^$)+V[5]+4294588738&4294967295,D=M+(H<<4&4294967295|H>>>28),H=$+(D^M^B)+V[8]+2272392833&4294967295,$=D+(H<<11&4294967295|H>>>21),H=B+($^D^M)+V[11]+1839030562&4294967295,B=$+(H<<16&4294967295|H>>>16),H=M+(B^$^D)+V[14]+4259657740&4294967295,M=B+(H<<23&4294967295|H>>>9),H=D+(M^B^$)+V[1]+2763975236&4294967295,D=M+(H<<4&4294967295|H>>>28),H=$+(D^M^B)+V[4]+1272893353&4294967295,$=D+(H<<11&4294967295|H>>>21),H=B+($^D^M)+V[7]+4139469664&4294967295,B=$+(H<<16&4294967295|H>>>16),H=M+(B^$^D)+V[10]+3200236656&4294967295,M=B+(H<<23&4294967295|H>>>9),H=D+(M^B^$)+V[13]+681279174&4294967295,D=M+(H<<4&4294967295|H>>>28),H=$+(D^M^B)+V[0]+3936430074&4294967295,$=D+(H<<11&4294967295|H>>>21),H=B+($^D^M)+V[3]+3572445317&4294967295,B=$+(H<<16&4294967295|H>>>16),H=M+(B^$^D)+V[6]+76029189&4294967295,M=B+(H<<23&4294967295|H>>>9),H=D+(M^B^$)+V[9]+3654602809&4294967295,D=M+(H<<4&4294967295|H>>>28),H=$+(D^M^B)+V[12]+3873151461&4294967295,$=D+(H<<11&4294967295|H>>>21),H=B+($^D^M)+V[15]+530742520&4294967295,B=$+(H<<16&4294967295|H>>>16),H=M+(B^$^D)+V[2]+3299628645&4294967295,M=B+(H<<23&4294967295|H>>>9),H=D+(B^(M|~$))+V[0]+4096336452&4294967295,D=M+(H<<6&4294967295|H>>>26),H=$+(M^(D|~B))+V[7]+1126891415&4294967295,$=D+(H<<10&4294967295|H>>>22),H=B+(D^($|~M))+V[14]+2878612391&4294967295,B=$+(H<<15&4294967295|H>>>17),H=M+($^(B|~D))+V[5]+4237533241&4294967295,M=B+(H<<21&4294967295|H>>>11),H=D+(B^(M|~$))+V[12]+1700485571&4294967295,D=M+(H<<6&4294967295|H>>>26),H=$+(M^(D|~B))+V[3]+2399980690&4294967295,$=D+(H<<10&4294967295|H>>>22),H=B+(D^($|~M))+V[10]+4293915773&4294967295,B=$+(H<<15&4294967295|H>>>17),H=M+($^(B|~D))+V[1]+2240044497&4294967295,M=B+(H<<21&4294967295|H>>>11),H=D+(B^(M|~$))+V[8]+1873313359&4294967295,D=M+(H<<6&4294967295|H>>>26),H=$+(M^(D|~B))+V[15]+4264355552&4294967295,$=D+(H<<10&4294967295|H>>>22),H=B+(D^($|~M))+V[6]+2734768916&4294967295,B=$+(H<<15&4294967295|H>>>17),H=M+($^(B|~D))+V[13]+1309151649&4294967295,M=B+(H<<21&4294967295|H>>>11),H=D+(B^(M|~$))+V[4]+4149444226&4294967295,D=M+(H<<6&4294967295|H>>>26),H=$+(M^(D|~B))+V[11]+3174756917&4294967295,$=D+(H<<10&4294967295|H>>>22),H=B+(D^($|~M))+V[2]+718787259&4294967295,B=$+(H<<15&4294967295|H>>>17),H=M+($^(B|~D))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+D&4294967295,k.g[1]=k.g[1]+(B+(H<<21&4294967295|H>>>11))&4294967295,k.g[2]=k.g[2]+B&4294967295,k.g[3]=k.g[3]+$&4294967295}i.prototype.u=function(k,D){D===void 0&&(D=k.length);for(var M=D-this.blockSize,V=this.B,B=this.h,$=0;$<D;){if(B==0)for(;$<=M;)s(this,k,$),$+=this.blockSize;if(typeof k=="string"){for(;$<D;)if(V[B++]=k.charCodeAt($++),B==this.blockSize){s(this,V),B=0;break}}else for(;$<D;)if(V[B++]=k[$++],B==this.blockSize){s(this,V),B=0;break}}this.h=B,this.o+=D},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var D=1;D<k.length-8;++D)k[D]=0;var M=8*this.o;for(D=k.length-8;D<k.length;++D)k[D]=M&255,M/=256;for(this.u(k),k=Array(16),D=M=0;4>D;++D)for(var V=0;32>V;V+=8)k[M++]=this.g[D]>>>V&255;return k};function r(k,D){var M=c;return Object.prototype.hasOwnProperty.call(M,k)?M[k]:M[k]=D(k)}function a(k,D){this.h=D;for(var M=[],V=!0,B=k.length-1;0<=B;B--){var $=k[B]|0;V&&$==D||(M[B]=$,V=!1)}this.g=M}var c={};function u(k){return-128<=k&&128>k?r(k,function(D){return new a([D|0],0>D?-1:0)}):new a([k|0],0>k?-1:0)}function h(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return x(h(-k));for(var D=[],M=1,V=0;k>=M;V++)D[V]=k/M|0,M*=4294967296;return new a(D,0)}function f(k,D){if(k.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(k.charAt(0)=="-")return x(f(k.substring(1),D));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=h(Math.pow(D,8)),V=m,B=0;B<k.length;B+=8){var $=Math.min(8,k.length-B),H=parseInt(k.substring(B,B+$),D);8>$?($=h(Math.pow(D,$)),V=V.j($).add(h(H))):(V=V.j(M),V=V.add(h(H)))}return V}var m=u(0),y=u(1),v=u(16777216);e=a.prototype,e.m=function(){if(E(this))return-x(this).m();for(var k=0,D=1,M=0;M<this.g.length;M++){var V=this.i(M);k+=(0<=V?V:4294967296+V)*D,D*=4294967296}return k},e.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T(this))return"0";if(E(this))return"-"+x(this).toString(k);for(var D=h(Math.pow(k,6)),M=this,V="";;){var B=q(M,D).g;M=C(M,B.j(D));var $=((0<M.g.length?M.g[0]:M.h)>>>0).toString(k);if(M=B,T(M))return $+V;for(;6>$.length;)$="0"+$;V=$+V}},e.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function T(k){if(k.h!=0)return!1;for(var D=0;D<k.g.length;D++)if(k.g[D]!=0)return!1;return!0}function E(k){return k.h==-1}e.l=function(k){return k=C(this,k),E(k)?-1:T(k)?0:1};function x(k){for(var D=k.g.length,M=[],V=0;V<D;V++)M[V]=~k.g[V];return new a(M,~k.h).add(y)}e.abs=function(){return E(this)?x(this):this},e.add=function(k){for(var D=Math.max(this.g.length,k.g.length),M=[],V=0,B=0;B<=D;B++){var $=V+(this.i(B)&65535)+(k.i(B)&65535),H=($>>>16)+(this.i(B)>>>16)+(k.i(B)>>>16);V=H>>>16,$&=65535,H&=65535,M[B]=H<<16|$}return new a(M,M[M.length-1]&-2147483648?-1:0)};function C(k,D){return k.add(x(D))}e.j=function(k){if(T(this)||T(k))return m;if(E(this))return E(k)?x(this).j(x(k)):x(x(this).j(k));if(E(k))return x(this.j(x(k)));if(0>this.l(v)&&0>k.l(v))return h(this.m()*k.m());for(var D=this.g.length+k.g.length,M=[],V=0;V<2*D;V++)M[V]=0;for(V=0;V<this.g.length;V++)for(var B=0;B<k.g.length;B++){var $=this.i(V)>>>16,H=this.i(V)&65535,Et=k.i(B)>>>16,_t=k.i(B)&65535;M[2*V+2*B]+=H*_t,P(M,2*V+2*B),M[2*V+2*B+1]+=$*_t,P(M,2*V+2*B+1),M[2*V+2*B+1]+=H*Et,P(M,2*V+2*B+1),M[2*V+2*B+2]+=$*Et,P(M,2*V+2*B+2)}for(V=0;V<D;V++)M[V]=M[2*V+1]<<16|M[2*V];for(V=D;V<2*D;V++)M[V]=0;return new a(M,0)};function P(k,D){for(;(k[D]&65535)!=k[D];)k[D+1]+=k[D]>>>16,k[D]&=65535,D++}function N(k,D){this.g=k,this.h=D}function q(k,D){if(T(D))throw Error("division by zero");if(T(k))return new N(m,m);if(E(k))return D=q(x(k),D),new N(x(D.g),x(D.h));if(E(D))return D=q(k,x(D)),new N(x(D.g),D.h);if(30<k.g.length){if(E(k)||E(D))throw Error("slowDivide_ only works with positive integers.");for(var M=y,V=D;0>=V.l(k);)M=F(M),V=F(V);var B=G(M,1),$=G(V,1);for(V=G(V,2),M=G(M,2);!T(V);){var H=$.add(V);0>=H.l(k)&&(B=B.add(M),$=H),V=G(V,1),M=G(M,1)}return D=C(k,B.j(D)),new N(B,D)}for(B=m;0<=k.l(D);){for(M=Math.max(1,Math.floor(k.m()/D.m())),V=Math.ceil(Math.log(M)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),$=h(M),H=$.j(D);E(H)||0<H.l(k);)M-=V,$=h(M),H=$.j(D);T($)&&($=y),B=B.add($),k=C(k,H)}return new N(B,k)}e.A=function(k){return q(this,k).h},e.and=function(k){for(var D=Math.max(this.g.length,k.g.length),M=[],V=0;V<D;V++)M[V]=this.i(V)&k.i(V);return new a(M,this.h&k.h)},e.or=function(k){for(var D=Math.max(this.g.length,k.g.length),M=[],V=0;V<D;V++)M[V]=this.i(V)|k.i(V);return new a(M,this.h|k.h)},e.xor=function(k){for(var D=Math.max(this.g.length,k.g.length),M=[],V=0;V<D;V++)M[V]=this.i(V)^k.i(V);return new a(M,this.h^k.h)};function F(k){for(var D=k.g.length+1,M=[],V=0;V<D;V++)M[V]=k.i(V)<<1|k.i(V-1)>>>31;return new a(M,k.h)}function G(k,D){var M=D>>5;D%=32;for(var V=k.g.length-M,B=[],$=0;$<V;$++)B[$]=0<D?k.i($+M)>>>D|k.i($+M+1)<<32-D:k.i($+M);return new a(B,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tO=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,tl=a}).apply(typeof P1<"u"?P1:typeof self<"u"?self:typeof window<"u"?window:{});var eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eO,Fd,nO,Ug,dT,iO,sO,rO;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,A){return g==Array.prototype||g==Object.prototype||(g[w]=A.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof eg=="object"&&eg];for(var w=0;w<g.length;++w){var A=g[w];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function s(g,w){if(w)t:{var A=i;g=g.split(".");for(var j=0;j<g.length-1;j++){var J=g[j];if(!(J in A))break t;A=A[J]}g=g[g.length-1],j=A[g],w=w(j),w!=j&&w!=null&&t(A,g,{configurable:!0,writable:!0,value:w})}}function r(g,w){g instanceof String&&(g+="");var A=0,j=!1,J={next:function(){if(!j&&A<g.length){var at=A++;return{value:w(at,g[at]),done:!1}}return j=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}s("Array.prototype.values",function(g){return g||function(){return r(this,function(w,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(g){var w=typeof g;return w=w!="object"?w:g?Array.isArray(g)?"array":w:"null",w=="array"||w=="object"&&typeof g.length=="number"}function h(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function f(g,w,A){return g.call.apply(g.bind,arguments)}function m(g,w,A){if(!g)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,j),g.apply(w,J)}}return function(){return g.apply(w,arguments)}}function y(g,w,A){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,y.apply(null,arguments)}function v(g,w){var A=Array.prototype.slice.call(arguments,1);return function(){var j=A.slice();return j.push.apply(j,arguments),g.apply(this,j)}}function T(g,w){function A(){}A.prototype=w.prototype,g.aa=w.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(j,J,at){for(var bt=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)bt[Re-2]=arguments[Re];return w.prototype[J].apply(j,bt)}}function E(g){const w=g.length;if(0<w){const A=Array(w);for(let j=0;j<w;j++)A[j]=g[j];return A}return[]}function x(g,w){for(let A=1;A<arguments.length;A++){const j=arguments[A];if(u(j)){const J=g.length||0,at=j.length||0;g.length=J+at;for(let bt=0;bt<at;bt++)g[J+bt]=j[bt]}else g.push(j)}}class C{constructor(w,A){this.i=w,this.j=A,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function P(g){return/^[\s\xa0]*$/.test(g)}function N(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function q(g){return q[" "](g),g}q[" "]=function(){};var F=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function G(g,w,A){for(const j in g)w.call(A,g[j],j,g)}function k(g,w){for(const A in g)w.call(void 0,g[A],A,g)}function D(g){const w={};for(const A in g)w[A]=g[A];return w}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,w){let A,j;for(let J=1;J<arguments.length;J++){j=arguments[J];for(A in j)g[A]=j[A];for(let at=0;at<M.length;at++)A=M[at],Object.prototype.hasOwnProperty.call(j,A)&&(g[A]=j[A])}}function B(g){var w=1;g=g.split(":");const A=[];for(;0<w&&g.length;)A.push(g.shift()),w--;return g.length&&A.push(g.join(":")),A}function $(g){c.setTimeout(()=>{throw g},0)}function H(){var g=xt;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class Et{constructor(){this.h=this.g=null}add(w,A){const j=_t.get();j.set(w,A),this.h?this.h.next=j:this.g=j,this.h=j}}var _t=new C(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(w,A){this.h=w,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,yt=!1,xt=new Et,z=()=>{const g=c.Promise.resolve(void 0);nt=()=>{g.then(it)}};var it=()=>{for(var g;g=H();){try{g.h.call(g.g)}catch(A){$(A)}var w=_t;w.j(g),100>w.h&&(w.h++,g.next=w.g,w.g=g)}yt=!1};function lt(){this.s=this.s,this.C=this.C}lt.prototype.s=!1,lt.prototype.ma=function(){this.s||(this.s=!0,this.N())},lt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var vt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};c.addEventListener("test",A,w),c.removeEventListener("test",A,w)}catch{}return g}();function Nt(g,w){if(ct.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,j=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget){if(F){t:{try{q(w.nodeName);var J=!0;break t}catch{}J=!1}J||(w=null)}}else A=="mouseover"?w=g.fromElement:A=="mouseout"&&(w=g.toElement);this.relatedTarget=w,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:wt[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Nt.aa.h.call(this)}}T(Nt,ct);var wt={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Bt="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function Ct(g,w,A,j,J){this.listener=g,this.proxy=null,this.src=w,this.type=A,this.capture=!!j,this.ha=J,this.key=++Tt,this.da=this.fa=!1}function It(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function zt(g){this.src=g,this.g={},this.h=0}zt.prototype.add=function(g,w,A,j,J){var at=g.toString();g=this.g[at],g||(g=this.g[at]=[],this.h++);var bt=Mt(g,w,j,J);return-1<bt?(w=g[bt],A||(w.fa=!1)):(w=new Ct(w,this.src,at,!!j,J),w.fa=A,g.push(w)),w};function Pt(g,w){var A=w.type;if(A in g.g){var j=g.g[A],J=Array.prototype.indexOf.call(j,w,void 0),at;(at=0<=J)&&Array.prototype.splice.call(j,J,1),at&&(It(w),g.g[A].length==0&&(delete g.g[A],g.h--))}}function Mt(g,w,A,j){for(var J=0;J<g.length;++J){var at=g[J];if(!at.da&&at.listener==w&&at.capture==!!A&&at.ha==j)return J}return-1}var he="closure_lm_"+(1e6*Math.random()|0),Oe={};function Ge(g,w,A,j,J){if(Array.isArray(w)){for(var at=0;at<w.length;at++)Ge(g,w[at],A,j,J);return null}return A=mr(A),g&&g[Bt]?g.K(w,A,h(j)?!!j.capture:!1,J):de(g,w,A,!1,j,J)}function de(g,w,A,j,J,at){if(!w)throw Error("Invalid event type");var bt=h(J)?!!J.capture:!!J,Re=Qi(g);if(Re||(g[he]=Re=new zt(g)),A=Re.add(w,A,j,bt,at),A.proxy)return A;if(j=Hn(),A.proxy=j,j.src=g,j.listener=A,g.addEventListener)vt||(J=bt),J===void 0&&(J=!1),g.addEventListener(w.toString(),j,J);else if(g.attachEvent)g.attachEvent(Ve(w.toString()),j);else if(g.addListener&&g.removeListener)g.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Hn(){function g(A){return w.call(g.src,g.listener,A)}const w=Ii;return g}function En(g,w,A,j,J){if(Array.isArray(w))for(var at=0;at<w.length;at++)En(g,w[at],A,j,J);else j=h(j)?!!j.capture:!!j,A=mr(A),g&&g[Bt]?(g=g.i,w=String(w).toString(),w in g.g&&(at=g.g[w],A=Mt(at,A,j,J),-1<A&&(It(at[A]),Array.prototype.splice.call(at,A,1),at.length==0&&(delete g.g[w],g.h--)))):g&&(g=Qi(g))&&(w=g.g[w.toString()],g=-1,w&&(g=Mt(w,A,j,J)),(A=-1<g?w[g]:null)&&Ze(A))}function Ze(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[Bt])Pt(w.i,g);else{var A=g.type,j=g.proxy;w.removeEventListener?w.removeEventListener(A,j,g.capture):w.detachEvent?w.detachEvent(Ve(A),j):w.addListener&&w.removeListener&&w.removeListener(j),(A=Qi(w))?(Pt(A,g),A.h==0&&(A.src=null,w[he]=null)):It(g)}}}function Ve(g){return g in Oe?Oe[g]:Oe[g]="on"+g}function Ii(g,w){if(g.da)g=!0;else{w=new Nt(w,this);var A=g.listener,j=g.ha||g.src;g.fa&&Ze(g),g=A.call(j,w)}return g}function Qi(g){return g=g[he],g instanceof zt?g:null}var zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function mr(g){return typeof g=="function"?g:(g[zs]||(g[zs]=function(w){return g.handleEvent(w)}),g[zs])}function Je(){lt.call(this),this.i=new zt(this),this.M=this,this.F=null}T(Je,lt),Je.prototype[Bt]=!0,Je.prototype.removeEventListener=function(g,w,A,j){En(this,g,w,A,j)};function re(g,w){var A,j=g.F;if(j)for(A=[];j;j=j.F)A.push(j);if(g=g.M,j=w.type||w,typeof w=="string")w=new ct(w,g);else if(w instanceof ct)w.target=w.target||g;else{var J=w;w=new ct(j,g),V(w,J)}if(J=!0,A)for(var at=A.length-1;0<=at;at--){var bt=w.g=A[at];J=fn(bt,j,!0,w)&&J}if(bt=w.g=g,J=fn(bt,j,!0,w)&&J,J=fn(bt,j,!1,w)&&J,A)for(at=0;at<A.length;at++)bt=w.g=A[at],J=fn(bt,j,!1,w)&&J}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var g=this.i,w;for(w in g.g){for(var A=g.g[w],j=0;j<A.length;j++)It(A[j]);delete g.g[w],g.h--}}this.F=null},Je.prototype.K=function(g,w,A,j){return this.i.add(String(g),w,!1,A,j)},Je.prototype.L=function(g,w,A,j){return this.i.add(String(g),w,!0,A,j)};function fn(g,w,A,j){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();for(var J=!0,at=0;at<w.length;++at){var bt=w[at];if(bt&&!bt.da&&bt.capture==A){var Re=bt.listener,ei=bt.ha||bt.src;bt.fa&&Pt(g.i,bt),J=Re.call(ei,j)!==!1&&J}}return J&&!j.defaultPrevented}function Ye(g,w,A){if(typeof g=="function")A&&(g=y(g,A));else if(g&&typeof g.handleEvent=="function")g=y(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:c.setTimeout(g,w||0)}function ls(g){g.g=Ye(()=>{g.g=null,g.i&&(g.i=!1,ls(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class Qn extends lt{constructor(w,A){super(),this.m=w,this.l=A,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:ls(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Di(g){lt.call(this),this.h=g,this.g={}}T(Di,lt);var Es=[];function Z(g){G(g.g,function(w,A){this.g.hasOwnProperty(A)&&Ze(w)},g),g.g={}}Di.prototype.N=function(){Di.aa.N.call(this),Z(this)},Di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=c.JSON.stringify,Ft=c.JSON.parse,Kt=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function fe(){}fe.prototype.h=null;function ke(g){return g.h||(g.h=g.i())}function te(){}var ie={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gt(){ct.call(this,"d")}T(Gt,ct);function Ae(){ct.call(this,"c")}T(Ae,ct);var jt={},xn=null;function oe(){return xn=xn||new Je}jt.La="serverreachability";function Ht(g){ct.call(this,jt.La,g)}T(Ht,ct);function pe(g){const w=oe();re(w,new Ht(w))}jt.STAT_EVENT="statevent";function je(g,w){ct.call(this,jt.STAT_EVENT,g),this.stat=w}T(je,ct);function Lt(g){const w=oe();re(w,new je(w,g))}jt.Ma="timingevent";function se(g,w){ct.call(this,jt.Ma,g),this.size=w}T(se,ct);function ye(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},w)}function tn(){this.g=!0}tn.prototype.xa=function(){this.g=!1};function Mi(g,w,A,j,J,at){g.info(function(){if(g.g)if(at)for(var bt="",Re=at.split("&"),ei=0;ei<Re.length;ei++){var Ie=Re[ei].split("=");if(1<Ie.length){var ci=Ie[0];Ie=Ie[1];var ni=ci.split("_");bt=2<=ni.length&&ni[1]=="type"?bt+(ci+"="+Ie+"&"):bt+(ci+"=redacted&")}}else bt=null;else bt=at;return"XMLHTTP REQ ("+j+") [attempt "+J+"]: "+w+`
`+A+`
`+bt})}function Ni(g,w,A,j,J,at,bt){g.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+J+"]: "+w+`
`+A+`
`+at+" "+bt})}function Ln(g,w,A,j){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+Ji(g,A)+(j?" "+j:"")})}function Zi(g,w){g.info(function(){return"TIMEOUT: "+w})}tn.prototype.info=function(){};function Ji(g,w){if(!g.g)return w;if(!w)return null;try{var A=JSON.parse(w);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var j=A[g];if(!(2>j.length)){var J=j[1];if(Array.isArray(J)&&!(1>J.length)){var at=J[0];if(at!="noop"&&at!="stop"&&at!="close")for(var bt=1;bt<J.length;bt++)J[bt]=""}}}}return gt(A)}catch{return w}}var gr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xs;function Ss(){}T(Ss,fe),Ss.prototype.g=function(){return new XMLHttpRequest},Ss.prototype.i=function(){return{}},xs=new Ss;function Zn(g,w,A,j){this.j=g,this.i=w,this.l=A,this.R=j||1,this.U=new Di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ke}function Ke(){this.i=null,this.g="",this.h=!1}var yr={},qs={};function Pi(g,w,A){g.L=1,g.v=O(Oi(w)),g.m=A,g.P=!0,As(g,null)}function As(g,w){g.F=Date.now(),$s(g),g.A=Oi(g.v);var A=g.A,j=g.R;Array.isArray(j)||(j=[String(j)]),Dh(A.i,"t",j),g.C=0,A=g.j.J,g.h=new Ke,g.g=Kp(g.j,A?w:null,!g.m),0<g.O&&(g.M=new Qn(y(g.Y,g,g.g),g.O)),w=g.U,A=g.g,j=g.ca;var J="readystatechange";Array.isArray(J)||(J&&(Es[0]=J.toString()),J=Es);for(var at=0;at<J.length;at++){var bt=Ge(A,J[at],j||w.handleEvent,!1,w.h||w);if(!bt)break;w.g[bt.key]=bt}w=g.H?D(g.H):{},g.m?(g.u||(g.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,w)):(g.u="GET",g.g.ea(g.A,g.u,null,w)),pe(),Mi(g.i,g.u,g.A,g.l,g.R,g.m)}Zn.prototype.ca=function(g){g=g.target;const w=this.M;w&&Ks(g)==3?w.j():this.Y(g)},Zn.prototype.Y=function(g){try{if(g==this.g)t:{const ni=Ks(this.g);var w=this.g.Ba();const So=this.g.Z();if(!(3>ni)&&(ni!=3||this.g&&(this.h.h||this.g.oa()||Bp(this.g)))){this.J||ni!=4||w==7||(w==8||0>=So?pe(3):pe(2)),ts(this);var A=this.g.Z();this.X=A;e:if(jc(this)){var j=Bp(this.g);g="";var J=j.length,at=Ks(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),Jn(this);var bt="";break e}this.h.i=new c.TextDecoder}for(w=0;w<J;w++)this.h.h=!0,g+=this.h.i.decode(j[w],{stream:!(at&&w==J-1)});j.length=0,this.h.g+=g,this.C=0,bt=this.h.g}else bt=this.g.oa();if(this.o=A==200,Ni(this.i,this.u,this.A,this.l,this.R,ni,A),this.o){if(this.T&&!this.K){e:{if(this.g){var Re,ei=this.g;if((Re=ei.g?ei.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Re)){var Ie=Re;break e}}Ie=null}if(A=Ie)Ln(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cs(this,A);else{this.o=!1,this.s=3,Lt(12),an(this),Jn(this);break t}}if(this.P){A=!0;let Ti;for(;!this.J&&this.C<bt.length;)if(Ti=Uc(this,bt),Ti==qs){ni==4&&(this.s=4,Lt(14),A=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(Ti==yr){this.s=4,Lt(15),Ln(this.i,this.l,bt,"[Invalid Chunk]"),A=!1;break}else Ln(this.i,this.l,Ti,null),Cs(this,Ti);if(jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ni!=4||bt.length!=0||this.h.h||(this.s=1,Lt(16),A=!1),this.o=this.o&&A,!A)Ln(this.i,this.l,bt,"[Invalid Chunked Response]"),an(this),Jn(this);else if(0<bt.length&&!this.W){this.W=!0;var ci=this.j;ci.g==this&&ci.ba&&!ci.M&&(ci.j.info("Great, no buffering proxy detected. Bytes received: "+bt.length),Pl(ci),ci.M=!0,Lt(11))}}else Ln(this.i,this.l,bt,null),Cs(this,bt);ni==4&&an(this),this.o&&!this.J&&(ni==4?Wp(this.j,this):(this.o=!1,$s(this)))}else Z_(this.g),A==400&&0<bt.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),an(this),Jn(this)}}}catch{}finally{}};function jc(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Uc(g,w){var A=g.C,j=w.indexOf(`
`,A);return j==-1?qs:(A=Number(w.substring(A,j)),isNaN(A)?yr:(j+=1,j+A>w.length?qs:(w=w.slice(j,j+A),g.C=j+A,w)))}Zn.prototype.cancel=function(){this.J=!0,an(this)};function $s(g){g.S=Date.now()+g.I,bi(g,g.I)}function bi(g,w){if(g.B!=null)throw Error("WatchDog timer not null");g.B=ye(y(g.ba,g),w)}function ts(g){g.B&&(c.clearTimeout(g.B),g.B=null)}Zn.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Zi(this.i,this.A),this.L!=2&&(pe(),Lt(17)),an(this),this.s=2,Jn(this)):bi(this,this.S-g)};function Jn(g){g.j.G==0||g.J||Wp(g.j,g)}function an(g){ts(g);var w=g.M;w&&typeof w.ma=="function"&&w.ma(),g.M=null,Z(g.U),g.g&&(w=g.g,g.g=null,w.abort(),w.ma())}function Cs(g,w){try{var A=g.j;if(A.G!=0&&(A.g==g||jr(A.h,g))){if(!g.K&&jr(A.h,g)&&A.G==3){try{var j=A.Da.g.parse(w)}catch{j=null}if(Array.isArray(j)&&j.length==3){var J=j;if(J[0]==0){t:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)Wc(A),qc(A);else break t;kh(A),Lt(18)}}else A.za=J[1],0<A.za-A.T&&37500>J[2]&&A.F&&A.v==0&&!A.C&&(A.C=ye(y(A.Za,A),6e3));if(1>=_o(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else xo(A,11)}else if((g.K||A.g==g)&&Wc(A),!P(w))for(J=A.Da.g.parse(w),w=0;w<J.length;w++){let Ie=J[w];if(A.T=Ie[0],Ie=Ie[1],A.G==2)if(Ie[0]=="c"){A.K=Ie[1],A.ia=Ie[2];const ci=Ie[3];ci!=null&&(A.la=ci,A.j.info("VER="+A.la));const ni=Ie[4];ni!=null&&(A.Aa=ni,A.j.info("SVER="+A.Aa));const So=Ie[5];So!=null&&typeof So=="number"&&0<So&&(j=1.5*So,A.L=j,A.j.info("backChannelRequestTimeoutMs_="+j)),j=A;const Ti=g.g;if(Ti){const Wr=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wr){var at=j.h;at.g||Wr.indexOf("spdy")==-1&&Wr.indexOf("quic")==-1&&Wr.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(ai(at,at.h),at.h=null))}if(j.D){const Vh=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Vh&&(j.ya=Vh,ze(j.I,j.D,Vh))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),j=A;var bt=g;if(j.qa=Yp(j,j.J?j.ia:null,j.W),bt.K){qn(j.h,bt);var Re=bt,ei=j.L;ei&&(Re.I=ei),Re.B&&(ts(Re),$s(Re)),j.g=bt}else qp(j);0<A.i.length&&$c(A)}else Ie[0]!="stop"&&Ie[0]!="close"||xo(A,7);else A.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?xo(A,7):Ph(A):Ie[0]!="noop"&&A.l&&A.l.ta(Ie),A.v=0)}}pe(4)}catch{}}var es=class{constructor(g,w){this.g=g,this.map=w}};function ti(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yo(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function _o(g){return g.h?1:g.g?g.g.size:0}function jr(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function ai(g,w){g.g?g.g.add(w):g.h=w}function qn(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}ti.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function vo(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const A of g.g.values())w=w.concat(A.D);return w}return E(g.i)}function Al(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var w=[],A=g.length,j=0;j<A;j++)w.push(g[j]);return w}w=[],A=0;for(j in g)w[A++]=g[j];return w}function Ur(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var w=[];g=g.length;for(var A=0;A<g;A++)w.push(A);return w}w=[],A=0;for(const j in g)w[A++]=j;return w}}}function bo(g,w){if(g.forEach&&typeof g.forEach=="function")g.forEach(w,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,w,void 0);else for(var A=Ur(g),j=Al(g),J=j.length,at=0;at<J;at++)w.call(void 0,j[at],A&&A[at],g)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gs(g,w){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var j=g[A].indexOf("="),J=null;if(0<=j){var at=g[A].substring(0,j);J=g[A].substring(j+1)}else at=g[A];w(at,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function In(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof In){this.h=g.h,_r(this,g.j),this.o=g.o,this.g=g.g,vr(this,g.s),this.l=g.l;var w=g.i,A=new pn;A.i=w.i,w.g&&(A.g=new Map(w.g),A.h=w.h),br(this,A),this.m=g.m}else g&&(w=String(g).match(Ws))?(this.h=!1,_r(this,w[1]||"",!0),this.o=U(w[2]||""),this.g=U(w[3]||"",!0),vr(this,w[4]),this.l=U(w[5]||"",!0),br(this,w[6]||"",!0),this.m=U(w[7]||"")):(this.h=!1,this.i=new pn(null,this.h))}In.prototype.toString=function(){var g=[],w=this.j;w&&g.push(Y(w,mt,!0),":");var A=this.g;return(A||w=="file")&&(g.push("//"),(w=this.o)&&g.push(Y(w,mt,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(Y(A,A.charAt(0)=="/"?ae:At,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",Y(A,bn)),g.join("")};function Oi(g){return new In(g)}function _r(g,w,A){g.j=A?U(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function vr(g,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);g.s=w}else g.s=null}function br(g,w,A){w instanceof pn?(g.i=w,Up(g.i,g.h)):(A||(w=Y(w,Dn)),g.i=new pn(w,g.h))}function ze(g,w,A){g.i.set(w,A)}function O(g){return ze(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function U(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Y(g,w,A){return typeof g=="string"?(g=encodeURI(g).replace(w,rt),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function rt(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var mt=/[#\/\?@]/g,At=/[#\?:]/g,ae=/[#\?]/g,Dn=/[#\?@]/g,bn=/#/g;function pn(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function Sn(g){g.g||(g.g=new Map,g.h=0,g.i&&Gs(g.i,function(w,A){g.add(decodeURIComponent(w.replace(/\+/g," ")),A)}))}e=pn.prototype,e.add=function(g,w){Sn(this),this.i=null,g=Fr(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(w),this.h+=1,this};function To(g,w){Sn(g),w=Fr(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function wo(g,w){return Sn(g),w=Fr(g,w),g.g.has(w)}e.forEach=function(g,w){Sn(this),this.g.forEach(function(A,j){A.forEach(function(J){g.call(w,J,j,this)},this)},this)},e.na=function(){Sn(this);const g=Array.from(this.g.values()),w=Array.from(this.g.keys()),A=[];for(let j=0;j<w.length;j++){const J=g[j];for(let at=0;at<J.length;at++)A.push(w[j])}return A},e.V=function(g){Sn(this);let w=[];if(typeof g=="string")wo(this,g)&&(w=w.concat(this.g.get(Fr(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)w=w.concat(g[A])}return w},e.set=function(g,w){return Sn(this),this.i=null,g=Fr(this,g),wo(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},e.get=function(g,w){return g?(g=this.V(g),0<g.length?String(g[0]):w):w};function Dh(g,w,A){To(g,w),0<A.length&&(g.i=null,g.g.set(Fr(g,w),E(A)),g.h+=A.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(var A=0;A<w.length;A++){var j=w[A];const at=encodeURIComponent(String(j)),bt=this.V(j);for(j=0;j<bt.length;j++){var J=at;bt[j]!==""&&(J+="="+encodeURIComponent(String(bt[j]))),g.push(J)}}return this.i=g.join("&")};function Fr(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function Up(g,w){w&&!g.j&&(Sn(g),g.i=null,g.g.forEach(function(A,j){var J=j.toLowerCase();j!=J&&(To(this,j),Dh(this,J,A))},g)),g.j=w}function Cl(g,w){const A=new tn;if(c.Image){const j=new Image;j.onload=v(Ys,A,"TestLoadImage: loaded",!0,w,j),j.onerror=v(Ys,A,"TestLoadImage: error",!1,w,j),j.onabort=v(Ys,A,"TestLoadImage: abort",!1,w,j),j.ontimeout=v(Ys,A,"TestLoadImage: timeout",!1,w,j),c.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=g}else w(!1)}function Tr(g,w){const A=new tn,j=new AbortController,J=setTimeout(()=>{j.abort(),Ys(A,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:j.signal}).then(at=>{clearTimeout(J),at.ok?Ys(A,"TestPingServer: ok",!0,w):Ys(A,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(J),Ys(A,"TestPingServer: error",!1,w)})}function Ys(g,w,A,j,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),j(A)}catch{}}function Rl(){this.g=new Kt}function Br(g,w,A){const j=A||"";try{bo(g,function(J,at){let bt=J;h(J)&&(bt=gt(J)),w.push(j+at+"="+encodeURIComponent(bt))})}catch(J){throw w.push(j+"type="+encodeURIComponent("_badmap")),J}}function ma(g){this.l=g.Ub||null,this.j=g.eb||!1}T(ma,fe),ma.prototype.g=function(){return new Eo(this.l,this.j)},ma.prototype.i=function(g){return function(){return g}}({});function Eo(g,w){Je.call(this),this.D=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Eo,Je),e=Eo.prototype,e.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=w,this.readyState=1,Hr(this)},e.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(w.body=g),(this.D||c).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},e.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Hr(this)),this.g&&(this.readyState=3,Hr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mh(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mh(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}e.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?zr(this):Hr(this),this.readyState==3&&Mh(this)}},e.Ra=function(g){this.g&&(this.response=this.responseText=g,zr(this))},e.Qa=function(g){this.g&&(this.response=g,zr(this))},e.ga=function(){this.g&&zr(this)};function zr(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Hr(g)}e.setRequestHeader=function(g,w){this.u.append(g,w)},e.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var A=w.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=w.next();return g.join(`\r
`)};function Hr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Nh(g){let w="";return G(g,function(A,j){w+=j,w+=":",w+=A,w+=`\r
`}),w}function li(g,w,A){t:{for(j in A){var j=!1;break t}j=!0}j||(A=Nh(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):ze(g,w,A))}function He(g){Je.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(He,Je);var Fc=/^https?$/i,Il=["POST","PUT"];e=He.prototype,e.Ha=function(g){this.J=g},e.ea=function(g,w,A,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xs.g(),this.v=this.o?ke(this.o):ke(xs),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(at){Fp(this,at);return}if(g=A||"",A=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var J in j)A.set(J,j[J]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const at of j.keys())A.set(at,j.get(at));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(A.keys()).find(at=>at.toLowerCase()=="content-type"),J=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Il,w,void 0))||j||J||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,bt]of A)this.g.setRequestHeader(at,bt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dl(this),this.u=!0,this.g.send(g),this.u=!1}catch(at){Fp(this,at)}};function Fp(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.m=5,Bc(g),qr(g)}function Bc(g){g.A||(g.A=!0,re(g,"complete"),re(g,"error"))}e.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,re(this,"complete"),re(this,"abort"),qr(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qr(this,!0)),He.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zc(this):this.bb())},e.bb=function(){zc(this)};function zc(g){if(g.h&&typeof a<"u"&&(!g.v[1]||Ks(g)!=4||g.Z()!=2)){if(g.u&&Ks(g)==4)Ye(g.Ea,0,g);else if(re(g,"readystatechange"),Ks(g)==4){g.h=!1;try{const bt=g.Z();t:switch(bt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break t;default:w=!1}var A;if(!(A=w)){var j;if(j=bt===0){var J=String(g.D).match(Ws)[1]||null;!J&&c.self&&c.self.location&&(J=c.self.location.protocol.slice(0,-1)),j=!Fc.test(J?J.toLowerCase():"")}A=j}if(A)re(g,"complete"),re(g,"success");else{g.m=6;try{var at=2<Ks(g)?g.g.statusText:""}catch{at=""}g.l=at+" ["+g.Z()+"]",Bc(g)}}finally{qr(g)}}}}function qr(g,w){if(g.g){Dl(g);const A=g.g,j=g.v[0]?()=>{}:null;g.g=null,g.v=null,w||re(g,"ready");try{A.onreadystatechange=j}catch{}}}function Dl(g){g.I&&(c.clearTimeout(g.I),g.I=null)}e.isActive=function(){return!!this.g};function Ks(g){return g.g?g.g.readyState:0}e.Z=function(){try{return 2<Ks(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),Ft(w)}};function Bp(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Z_(g){const w={};g=(g.g&&2<=Ks(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<g.length;j++){if(P(g[j]))continue;var A=B(g[j]);const J=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const at=w[J]||[];w[J]=at,at.push(A)}k(w,function(j){return j.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ml(g,w,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||w}function Hc(g){this.Aa=0,this.i=[],this.j=new tn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ml("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ml("baseRetryDelayMs",5e3,g),this.cb=Ml("retryDelaySeedMs",1e4,g),this.Wa=Ml("forwardChannelMaxRetries",2,g),this.wa=Ml("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new ti(g&&g.concurrentRequestLimit),this.Da=new Rl,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Hc.prototype,e.la=8,e.G=1,e.connect=function(g,w,A,j){Lt(0),this.W=g,this.H=w||{},A&&j!==void 0&&(this.H.OSID=A,this.H.OAID=j),this.F=this.X,this.I=Yp(this,null,this.W),$c(this)};function Ph(g){if(zp(g),g.G==3){var w=g.U++,A=Oi(g.I);if(ze(A,"SID",g.K),ze(A,"RID",w),ze(A,"TYPE","terminate"),Nl(g,A),w=new Zn(g,g.j,w),w.L=2,w.v=O(Oi(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(w.v.toString(),"")}catch{}!A&&c.Image&&(new Image().src=w.v,A=!0),A||(w.g=Kp(w.j,null),w.g.ea(w.v)),w.F=Date.now(),$s(w)}Gp(g)}function qc(g){g.g&&(Pl(g),g.g.cancel(),g.g=null)}function zp(g){qc(g),g.u&&(c.clearTimeout(g.u),g.u=null),Wc(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function $c(g){if(!yo(g.h)&&!g.s){g.s=!0;var w=g.Ga;nt||z(),yt||(nt(),yt=!0),xt.add(w,g),g.B=0}}function J_(g,w){return _o(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=w.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=ye(y(g.Ga,g,w),Lh(g,g.B)),g.B++,!0)}e.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const J=new Zn(this,this.j,g);let at=this.o;if(this.S&&(at?(at=D(at),V(at,this.S)):at=this.S),this.m!==null||this.O||(J.H=at,at=null),this.P)t:{for(var w=0,A=0;A<this.i.length;A++){e:{var j=this.i[A];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break e}j=void 0}if(j===void 0)break;if(w+=j,4096<w){w=A;break t}if(w===4096||A===this.i.length-1){w=A+1;break t}}w=1e3}else w=1e3;w=Hp(this,J,w),A=Oi(this.I),ze(A,"RID",g),ze(A,"CVER",22),this.D&&ze(A,"X-HTTP-Session-Id",this.D),Nl(this,A),at&&(this.O?w="headers="+encodeURIComponent(String(Nh(at)))+"&"+w:this.m&&li(A,this.m,at)),ai(this.h,J),this.Ua&&ze(A,"TYPE","init"),this.P?(ze(A,"$req",w),ze(A,"SID","null"),J.T=!0,Pi(J,A,null)):Pi(J,A,w),this.G=2}}else this.G==3&&(g?Oh(this,g):this.i.length==0||yo(this.h)||Oh(this))};function Oh(g,w){var A;w?A=w.l:A=g.U++;const j=Oi(g.I);ze(j,"SID",g.K),ze(j,"RID",A),ze(j,"AID",g.T),Nl(g,j),g.m&&g.o&&li(j,g.m,g.o),A=new Zn(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),w&&(g.i=w.D.concat(g.i)),w=Hp(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),ai(g.h,A),Pi(A,j,w)}function Nl(g,w){g.H&&G(g.H,function(A,j){ze(w,j,A)}),g.l&&bo({},function(A,j){ze(w,j,A)})}function Hp(g,w,A){A=Math.min(g.i.length,A);var j=g.l?y(g.l.Na,g.l,g):null;t:{var J=g.i;let at=-1;for(;;){const bt=["count="+A];at==-1?0<A?(at=J[0].g,bt.push("ofs="+at)):at=0:bt.push("ofs="+at);let Re=!0;for(let ei=0;ei<A;ei++){let Ie=J[ei].g;const ci=J[ei].map;if(Ie-=at,0>Ie)at=Math.max(0,J[ei].g-100),Re=!1;else try{Br(ci,bt,"req"+Ie+"_")}catch{j&&j(ci)}}if(Re){j=bt.join("&");break t}}}return g=g.i.splice(0,A),w.D=g,j}function qp(g){if(!g.g&&!g.u){g.Y=1;var w=g.Fa;nt||z(),yt||(nt(),yt=!0),xt.add(w,g),g.v=0}}function kh(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=ye(y(g.Fa,g),Lh(g,g.v)),g.v++,!0)}e.Fa=function(){if(this.u=null,$p(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=ye(y(this.ab,this),g)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),qc(this),$p(this))};function Pl(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function $p(g){g.g=new Zn(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var w=Oi(g.qa);ze(w,"RID","rpc"),ze(w,"SID",g.K),ze(w,"AID",g.T),ze(w,"CI",g.F?"0":"1"),!g.F&&g.ja&&ze(w,"TO",g.ja),ze(w,"TYPE","xmlhttp"),Nl(g,w),g.m&&g.o&&li(w,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=O(Oi(w)),A.m=null,A.P=!0,As(A,g)}e.Za=function(){this.C!=null&&(this.C=null,qc(this),kh(this),Lt(19))};function Wc(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Wp(g,w){var A=null;if(g.g==w){Wc(g),Pl(g),g.g=null;var j=2}else if(jr(g.h,w))A=w.D,qn(g.h,w),j=1;else return;if(g.G!=0){if(w.o)if(j==1){A=w.m?w.m.length:0,w=Date.now()-w.F;var J=g.B;j=oe(),re(j,new se(j,A)),$c(g)}else qp(g);else if(J=w.s,J==3||J==0&&0<w.X||!(j==1&&J_(g,w)||j==2&&kh(g)))switch(A&&0<A.length&&(w=g.h,w.i=w.i.concat(A)),J){case 1:xo(g,5);break;case 4:xo(g,10);break;case 3:xo(g,6);break;default:xo(g,2)}}}function Lh(g,w){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*w}function xo(g,w){if(g.j.info("Error code "+w),w==2){var A=y(g.fb,g),j=g.Xa;const J=!j;j=new In(j||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||_r(j,"https"),O(j),J?Cl(j.toString(),A):Tr(j.toString(),A)}else Lt(2);g.G=0,g.l&&g.l.sa(w),Gp(g),zp(g)}e.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Gp(g){if(g.G=0,g.ka=[],g.l){const w=vo(g.h);(w.length!=0||g.i.length!=0)&&(x(g.ka,w),x(g.ka,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.ra()}}function Yp(g,w,A){var j=A instanceof In?Oi(A):new In(A);if(j.g!="")w&&(j.g=w+"."+j.g),vr(j,j.s);else{var J=c.location;j=J.protocol,w=w?w+"."+J.hostname:J.hostname,J=+J.port;var at=new In(null);j&&_r(at,j),w&&(at.g=w),J&&vr(at,J),A&&(at.l=A),j=at}return A=g.D,w=g.ya,A&&w&&ze(j,A,w),ze(j,"VER",g.la),Nl(g,j),j}function Kp(g,w,A){if(w&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Ca&&!g.pa?new He(new ma({eb:A})):new He(g.pa),w.Ha(g.J),w}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xp(){}e=Xp.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Gc(){}Gc.prototype.g=function(g,w){return new ns(g,w)};function ns(g,w){Je.call(this),this.g=new Hc(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(g?g["X-WebChannel-Client-Profile"]=w.va:g={"X-WebChannel-Client-Profile":w.va}),this.g.S=g,(g=w&&w.Sb)&&!P(g)&&(this.g.m=g),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!P(w)&&(this.g.D=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new $r(this)}T(ns,Je),ns.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ns.prototype.close=function(){Ph(this.g)},ns.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=gt(g),g=A);w.i.push(new es(w.Ya++,g)),w.G==3&&$c(w)},ns.prototype.N=function(){this.g.l=null,delete this.j,Ph(this.g),delete this.g,ns.aa.N.call(this)};function Qp(g){Gt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){t:{for(const A in w){g=A;break t}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}T(Qp,Gt);function Zp(){Ae.call(this),this.status=1}T(Zp,Ae);function $r(g){this.g=g}T($r,Xp),$r.prototype.ua=function(){re(this.g,"a")},$r.prototype.ta=function(g){re(this.g,new Qp(g))},$r.prototype.sa=function(g){re(this.g,new Zp)},$r.prototype.ra=function(){re(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,ns.prototype.send=ns.prototype.o,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,rO=function(){return new Gc},sO=function(){return oe()},iO=jt,dT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gr.NO_ERROR=0,gr.TIMEOUT=8,gr.HTTP_ERROR=6,Ug=gr,Hs.COMPLETE="complete",nO=Hs,te.EventType=ie,ie.OPEN="a",ie.CLOSE="b",ie.ERROR="c",ie.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Fd=te,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,eO=He}).apply(typeof eg<"u"?eg:typeof self<"u"?self:typeof window<"u"?window:{});const O1="@firebase/firestore",k1="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fi=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Fi.UNAUTHENTICATED=new Fi(null),Fi.GOOGLE_CREDENTIALS=new Fi("google-credentials-uid"),Fi.FIRST_PARTY=new Fi("first-party-uid"),Fi.MOCK_USER=new Fi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new rp("@firebase/firestore");function Au(){return _c.logLevel}function Dt(e,...t){if(_c.logLevel<=we.DEBUG){const n=t.map(cE);_c.debug(`Firestore (${gh}): ${e}`,...n)}}function oa(e,...t){if(_c.logLevel<=we.ERROR){const n=t.map(cE);_c.error(`Firestore (${gh}): ${e}`,...n)}}function Xu(e,...t){if(_c.logLevel<=we.WARN){const n=t.map(cE);_c.warn(`Firestore (${gh}): ${e}`,...n)}}function cE(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(e="Unexpected state"){const t=`FIRESTORE (${gh}) INTERNAL ASSERTION FAILED: `+e;throw oa(t),new Error(t)}function We(e,t){e||Qt()}function ne(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends pr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class V9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Fi.UNAUTHENTICATED))}shutdown(){}}class j9{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class U9{constructor(t){this.t=t,this.currentUser=Fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){We(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new Jo;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Jo,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Jo)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(Dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string"),new oO(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return We(t===null||typeof t=="string"),new Fi(t)}}class F9{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=Fi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class B9{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new F9(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z9{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ms(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){We(this.o===void 0);const i=r=>{r.error!=null&&Dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.R;return this.R=r.token,Dt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{Dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):Dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new L1(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(We(typeof n.token=="string"),this.R=n.token,new L1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=H9(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function ge(e,t){return e<t?-1:e>t?1:0}function fT(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=e.codePointAt(n),s=t.codePointAt(n);if(i!==s){if(i<128&&s<128)return ge(i,s);{const r=aO(),a=q9(r.encode(V1(e,n)),r.encode(V1(t,n)));return a!==0?a:ge(i,s)}}n+=i>65535?2:1}return ge(e.length,t.length)}function V1(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function q9(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ge(e[n],t[n]);return ge(e.length,t.length)}function Qu(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=-62135596800,U1=1e6;class un{static now(){return un.fromMillis(Date.now())}static fromDate(t){return un.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*U1);return new un(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<j1)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Rt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U1}_compareTo(t){return this.seconds===t.seconds?ge(this.nanoseconds,t.nanoseconds):ge(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-j1;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(t){return new ee(t)}static min(){return new ee(new un(0,0))}static max(){return new ee(new un(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="__name__";class eo{constructor(t,n,i){n===void 0?n=0:n>t.length&&Qt(),i===void 0?i=t.length-n:i>t.length-n&&Qt(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return eo.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof eo?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=eo.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return ge(t.length,n.length)}static compareSegments(t,n){const i=eo.isNumericId(t),s=eo.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?eo.extractNumericId(t).compare(eo.extractNumericId(n)):fT(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return tl.fromString(t.substring(4,t.length-2))}}class _n extends eo{construct(t,n,i){return new _n(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Rt(dt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new _n(n)}static emptyPath(){return new _n([])}}const $9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ci extends eo{construct(t,n,i){return new Ci(t,n,i)}static isValidIdentifier(t){return $9.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ci.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F1}static keyField(){return new Ci([F1])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new Rt(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<t.length;){const c=t[s];if(c==="\\"){if(s+1===t.length)throw new Rt(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Rt(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(i+=c,s++):(r(),s++)}if(r(),a)throw new Rt(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ci(n)}static emptyPath(){return new Ci([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(_n.fromString(t))}static fromName(t){return new Ut(_n.fromString(t).popFirst(5))}static empty(){return new Ut(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_n.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _n.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new _n(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=-1;function W9(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(i===1e9?new un(n+1,0):new un(n,i));return new rl(s,Ut.empty(),t)}function G9(e){return new rl(e.readTime,e.key,Rf)}class rl{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new rl(ee.min(),Ut.empty(),Rf)}static max(){return new rl(ee.max(),Ut.empty(),Rf)}}function Y9(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:ge(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(e){if(e.code!==dt.FAILED_PRECONDITION||e.message!==K9)throw e;Dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new pt((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof pt?n:pt.resolve(n)}catch(n){return pt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):pt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):pt.reject(n)}static resolve(t){return new pt((n,i)=>{n(t)})}static reject(t){return new pt((n,i)=>{i(t)})}static waitFor(t){return new pt((n,i)=>{let s=0,r=0,a=!1;t.forEach(c=>{++s,c.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(t){let n=pt.resolve(!1);for(const i of t)n=n.next(s=>s?pt.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new pt((i,s)=>{const r=t.length,a=new Array(r);let c=0;for(let u=0;u<r;u++){const h=u;n(t[h]).next(f=>{a[h]=f,++c,c===r&&i(a)},f=>s(f))}})}static doWhile(t,n){return new pt((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function Q9(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _h(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}m_.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=-1;function g_(e){return e==null}function yy(e){return e===0&&1/e==-1/0}function Z9(e){return typeof e=="number"&&Number.isInteger(e)&&!yy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="";function J9(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=B1(t)),t=tH(e.get(n),t);return B1(t)}function tH(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case cO:n+="";break;default:n+=r}}return n}function B1(e){return e+cO+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uO(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xn=class pT{constructor(t,n){this.comparator=t,this.root=n||el.EMPTY}insert(t,n){return new pT(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,el.BLACK,null,null))}remove(t){return new pT(this.comparator,this.root.remove(t,this.comparator).copy(null,null,el.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ng(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ng(this.root,t,this.comparator,!1)}getReverseIterator(){return new ng(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ng(this.root,t,this.comparator,!0)}},ng=class{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},el=class Bo{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??Bo.RED,this.left=s??Bo.EMPTY,this.right=r??Bo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new Bo(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Bo.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Bo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Bo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qt();const t=this.left.check();if(t!==this.right.check())throw Qt();return t+(this.isRed()?0:1)}};el.EMPTY=null,el.RED=!0,el.BLACK=!1;el.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt()}get value(){throw Qt()}get color(){throw Qt()}get left(){throw Qt()}get right(){throw Qt()}copy(t,n,i,s,r){return this}insert(t,n,i){return new el(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(t){this.comparator=t,this.data=new Xn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new H1(this.data.getIterator())}getIteratorFrom(t){return new H1(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof oi)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new oi(this.comparator);return n.data=t,n}}class H1{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t){this.fields=t,t.sort(Ci.comparator)}static empty(){return new js([])}unionWith(t){let n=new oi(Ci.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new js(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Qu(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new hO("Invalid base64 string: "+r):r}}(t);return new Ri(n)}static fromUint8Array(t){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(t);return new Ri(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ge(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ri.EMPTY_BYTE_STRING=new Ri("");const eH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ol(e){if(We(!!e),typeof e=="string"){let t=0;const n=eH.exec(e);if(We(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Bn(e.seconds),nanos:Bn(e.nanos)}}function Bn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function al(e){return typeof e=="string"?Ri.fromBase64String(e):Ri.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="server_timestamp",fO="__type__",pO="__previous_value__",mO="__local_write_time__";function hE(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[fO])===null||n===void 0?void 0:n.stringValue)===dO}function y_(e){const t=e.mapValue.fields[pO];return hE(t)?y_(t):t}function If(e){const t=ol(e.mapValue.fields[mO].timestampValue);return new un(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(t,n,i,s,r,a,c,u,h){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}const _y="(default)";class Df{constructor(t,n){this.projectId=t,this.database=n||_y}static empty(){return new Df("","")}get isDefaultDatabase(){return this.database===_y}isEqual(t){return t instanceof Df&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO="__type__",iH="__max__",ig={mapValue:{}},yO="__vector__",vy="value";function ll(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hE(e)?4:rH(e)?9007199254740991:sH(e)?10:11:Qt()}function fo(e,t){if(e===t)return!0;const n=ll(e);if(n!==ll(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return If(e).isEqual(If(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=ol(s.timestampValue),c=ol(r.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return al(s.bytesValue).isEqual(al(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Bn(s.geoPointValue.latitude)===Bn(r.geoPointValue.latitude)&&Bn(s.geoPointValue.longitude)===Bn(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Bn(s.integerValue)===Bn(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Bn(s.doubleValue),c=Bn(r.doubleValue);return a===c?yy(a)===yy(c):isNaN(a)&&isNaN(c)}return!1}(e,t);case 9:return Qu(e.arrayValue.values||[],t.arrayValue.values||[],fo);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},c=r.mapValue.fields||{};if(z1(a)!==z1(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!fo(a[u],c[u])))return!1;return!0}(e,t);default:return Qt()}}function Mf(e,t){return(e.values||[]).find(n=>fo(n,t))!==void 0}function Zu(e,t){if(e===t)return 0;const n=ll(e),i=ll(t);if(n!==i)return ge(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(e.booleanValue,t.booleanValue);case 2:return function(r,a){const c=Bn(r.integerValue||r.doubleValue),u=Bn(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(e,t);case 3:return q1(e.timestampValue,t.timestampValue);case 4:return q1(If(e),If(t));case 5:return fT(e.stringValue,t.stringValue);case 6:return function(r,a){const c=al(r),u=al(a);return c.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(r,a){const c=r.split("/"),u=a.split("/");for(let h=0;h<c.length&&h<u.length;h++){const f=ge(c[h],u[h]);if(f!==0)return f}return ge(c.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,a){const c=ge(Bn(r.latitude),Bn(a.latitude));return c!==0?c:ge(Bn(r.longitude),Bn(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return $1(e.arrayValue,t.arrayValue);case 10:return function(r,a){var c,u,h,f;const m=r.fields||{},y=a.fields||{},v=(c=m[vy])===null||c===void 0?void 0:c.arrayValue,T=(u=y[vy])===null||u===void 0?void 0:u.arrayValue,E=ge(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0);return E!==0?E:$1(v,T)}(e.mapValue,t.mapValue);case 11:return function(r,a){if(r===ig.mapValue&&a===ig.mapValue)return 0;if(r===ig.mapValue)return 1;if(a===ig.mapValue)return-1;const c=r.fields||{},u=Object.keys(c),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const y=fT(u[m],f[m]);if(y!==0)return y;const v=Zu(c[u[m]],h[f[m]]);if(v!==0)return v}return ge(u.length,f.length)}(e.mapValue,t.mapValue);default:throw Qt()}}function q1(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ge(e,t);const n=ol(e),i=ol(t),s=ge(n.seconds,i.seconds);return s!==0?s:ge(n.nanos,i.nanos)}function $1(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Zu(n[s],i[s]);if(r)return r}return ge(n.length,i.length)}function Ju(e){return mT(e)}function mT(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=ol(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return al(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=mT(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${mT(n.fields[a])}`;return s+"}"}(e.mapValue):Qt()}function Fg(e){switch(ll(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=y_(e);return t?16+Fg(t):16;case 5:return 2*e.stringValue.length;case 6:return al(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Fg(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return bl(i.fields,(r,a)=>{s+=r.length+Fg(a)}),s}(e.mapValue);default:throw Qt()}}function W1(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function gT(e){return!!e&&"integerValue"in e}function dE(e){return!!e&&"arrayValue"in e}function G1(e){return!!e&&"nullValue"in e}function Y1(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bg(e){return!!e&&"mapValue"in e}function sH(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[gO])===null||n===void 0?void 0:n.stringValue)===yO}function tf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return bl(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=tf(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tf(e.arrayValue.values[n]);return t}return Object.assign({},e)}function rH(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===iH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(t){this.value=t}static empty(){return new gs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Bg(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=tf(n)}setAll(t){let n=Ci.emptyPath(),i={},s=[];t.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=c.popLast()}a?i[c.lastSegment()]=tf(a):s.push(c.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());Bg(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return fo(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];Bg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){bl(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new gs(tf(this.value))}}function _O(e){const t=[];return bl(e.fields,(n,i)=>{const s=new Ci([n]);if(Bg(i)){const r=_O(i.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)}),new js(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t,n,i,s,r,a,c){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=c}static newInvalidDocument(t){return new zi(t,0,ee.min(),ee.min(),ee.min(),gs.empty(),0)}static newFoundDocument(t,n,i,s){return new zi(t,1,n,ee.min(),i,s,0)}static newNoDocument(t,n){return new zi(t,2,n,ee.min(),ee.min(),gs.empty(),0)}static newUnknownDocument(t,n){return new zi(t,3,n,ee.min(),ee.min(),gs.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=gs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t,n){this.position=t,this.inclusive=n}}function K1(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(r.field.isKeyField()?i=Ut.comparator(Ut.fromName(a.referenceValue),n.key):i=Zu(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function X1(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!fo(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t,n="asc"){this.field=t,this.dir=n}}function oH(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{}class Yn extends vO{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new lH(t,n,i):n==="array-contains"?new hH(t,i):n==="in"?new dH(t,i):n==="not-in"?new fH(t,i):n==="array-contains-any"?new pH(t,i):new Yn(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new cH(t,i):new uH(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zu(n,this.value)):n!==null&&ll(this.value)===ll(n)&&this.matchesComparison(Zu(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Qt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends vO{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new Or(t,n)}matches(t){return bO(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function bO(e){return e.op==="and"}function TO(e){return aH(e)&&bO(e)}function aH(e){for(const t of e.filters)if(t instanceof Or)return!1;return!0}function yT(e){if(e instanceof Yn)return e.field.canonicalString()+e.op.toString()+Ju(e.value);if(TO(e))return e.filters.map(t=>yT(t)).join(",");{const t=e.filters.map(n=>yT(n)).join(",");return`${e.op}(${t})`}}function wO(e,t){return e instanceof Yn?function(i,s){return s instanceof Yn&&i.op===s.op&&i.field.isEqual(s.field)&&fo(i.value,s.value)}(e,t):e instanceof Or?function(i,s){return s instanceof Or&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,c)=>r&&wO(a,s.filters[c]),!0):!1}(e,t):void Qt()}function EO(e){return e instanceof Yn?function(n){return`${n.field.canonicalString()} ${n.op} ${Ju(n.value)}`}(e):e instanceof Or?function(n){return n.op.toString()+" {"+n.getFilters().map(EO).join(" ,")+"}"}(e):"Filter"}class lH extends Yn{constructor(t,n,i){super(t,n,i),this.key=Ut.fromName(i.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class cH extends Yn{constructor(t,n){super(t,"in",n),this.keys=xO("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class uH extends Yn{constructor(t,n){super(t,"not-in",n),this.keys=xO("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function xO(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ut.fromName(i.referenceValue))}class hH extends Yn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return dE(n)&&Mf(n.arrayValue,this.value)}}class dH extends Yn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Mf(this.value.arrayValue,n)}}class fH extends Yn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Mf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Mf(this.value.arrayValue,n)}}class pH extends Yn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!dE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Mf(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(t,n=null,i=[],s=[],r=null,a=null,c=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=c,this.le=null}}function Q1(e,t=null,n=[],i=[],s=null,r=null,a=null){return new mH(e,t,n,i,s,r,a)}function fE(e){const t=ne(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>yT(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),g_(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Ju(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Ju(i)).join(",")),t.le=n}return t.le}function pE(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!oH(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wO(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!X1(e.startAt,t.startAt)&&X1(e.endAt,t.endAt)}function _T(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(t,n=null,i=[],s=[],r=null,a="F",c=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=c,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function gH(e,t,n,i,s,r,a,c){return new vh(e,t,n,i,s,r,a,c)}function __(e){return new vh(e)}function Z1(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function SO(e){return e.collectionGroup!==null}function ef(e){const t=ne(e);if(t.he===null){t.he=[];const n=new Set;for(const r of t.explicitOrderBy)t.he.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new oi(Ci.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.he.push(new Nf(r,i))}),n.has(Ci.keyField().canonicalString())||t.he.push(new Nf(Ci.keyField(),i))}return t.he}function oo(e){const t=ne(e);return t.Pe||(t.Pe=yH(t,ef(e))),t.Pe}function yH(e,t){if(e.limitType==="F")return Q1(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Nf(s.field,r)});const n=e.endAt?new by(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new by(e.startAt.position,e.startAt.inclusive):null;return Q1(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function vT(e,t){const n=e.filters.concat([t]);return new vh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function bT(e,t,n){return new vh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function v_(e,t){return pE(oo(e),oo(t))&&e.limitType===t.limitType}function AO(e){return`${fE(oo(e))}|lt:${e.limitType}`}function Cu(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>EO(s)).join(", ")}]`),g_(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Ju(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Ju(s)).join(",")),`Target(${i})`}(oo(e))}; limitType=${e.limitType})`}function b_(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Ut.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of ef(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(a,c,u){const h=K1(a,c,u);return a.inclusive?h<=0:h<0}(i.startAt,ef(i),s)||i.endAt&&!function(a,c,u){const h=K1(a,c,u);return a.inclusive?h>=0:h>0}(i.endAt,ef(i),s))}(e,t)}function _H(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function CO(e){return(t,n)=>{let i=!1;for(const s of ef(e)){const r=vH(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function vH(e,t,n){const i=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(r,a,c){const u=a.data.field(r),h=c.data.field(r);return u!==null&&h!==null?Zu(u,h):Qt()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Qt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){bl(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return uO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH=new Xn(Ut.comparator);function aa(){return bH}const RO=new Xn(Ut.comparator);function Bd(...e){let t=RO;for(const n of e)t=t.insert(n.key,n);return t}function IO(e){let t=RO;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function rc(){return nf()}function DO(){return nf()}function nf(){return new Dc(e=>e.toString(),(e,t)=>e.isEqual(t))}const TH=new Xn(Ut.comparator),wH=new oi(Ut.comparator);function Se(...e){let t=wH;for(const n of e)t=t.add(n);return t}const EH=new oi(ge);function xH(){return EH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yy(t)?"-0":t}}function MO(e){return{integerValue:""+e}}function SH(e,t){return Z9(t)?MO(t):mE(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this._=void 0}}function AH(e,t,n){return e instanceof Pf?function(s,r){const a={fields:{[fO]:{stringValue:dO},[mO]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&hE(r)&&(r=y_(r)),r&&(a.fields[pO]=r),{mapValue:a}}(n,t):e instanceof Of?PO(e,t):e instanceof kf?OO(e,t):function(s,r){const a=NO(s,r),c=J1(a)+J1(s.Ie);return gT(a)&&gT(s.Ie)?MO(c):mE(s.serializer,c)}(e,t)}function CH(e,t,n){return e instanceof Of?PO(e,t):e instanceof kf?OO(e,t):n}function NO(e,t){return e instanceof Ty?function(i){return gT(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class Pf extends T_{}class Of extends T_{constructor(t){super(),this.elements=t}}function PO(e,t){const n=kO(t);for(const i of e.elements)n.some(s=>fo(s,i))||n.push(i);return{arrayValue:{values:n}}}class kf extends T_{constructor(t){super(),this.elements=t}}function OO(e,t){let n=kO(t);for(const i of e.elements)n=n.filter(s=>!fo(s,i));return{arrayValue:{values:n}}}class Ty extends T_{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function J1(e){return Bn(e.integerValue||e.doubleValue)}function kO(e){return dE(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(t,n){this.field=t,this.transform=n}}function IH(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof Of&&s instanceof Of||i instanceof kf&&s instanceof kf?Qu(i.elements,s.elements,fo):i instanceof Ty&&s instanceof Ty?fo(i.Ie,s.Ie):i instanceof Pf&&s instanceof Pf}(e.transform,t.transform)}class DH{constructor(t,n){this.version=t,this.transformResults=n}}class os{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new os}static exists(t){return new os(void 0,t)}static updateTime(t){return new os(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function zg(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class w_{}function LO(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new E_(e.key,os.none()):new hp(e.key,e.data,os.none());{const n=e.data,i=gs.empty();let s=new oi(Ci.comparator);for(let r of t.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new Tl(e.key,i,new js(s.toArray()),os.none())}}function MH(e,t,n){e instanceof hp?function(s,r,a){const c=s.value.clone(),u=eI(s.fieldTransforms,r,a.transformResults);c.setAll(u),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):e instanceof Tl?function(s,r,a){if(!zg(s.precondition,r))return void r.convertToUnknownDocument(a.version);const c=eI(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(VO(s)),u.setAll(c),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(e,t,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function sf(e,t,n,i){return e instanceof hp?function(r,a,c,u){if(!zg(r.precondition,a))return c;const h=r.value.clone(),f=nI(r.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(e,t,n,i):e instanceof Tl?function(r,a,c,u){if(!zg(r.precondition,a))return c;const h=nI(r.fieldTransforms,u,a),f=a.data;return f.setAll(VO(r)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(e,t,n,i):function(r,a,c){return zg(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(e,t,n)}function NH(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=NO(i.transform,s||null);r!=null&&(n===null&&(n=gs.empty()),n.set(i.field,r))}return n||null}function tI(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Qu(i,s,(r,a)=>IH(r,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hp extends w_{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Tl extends w_{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function VO(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function eI(e,t,n){const i=new Map;We(e.length===n.length);for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,c=t.data.field(r.field);i.set(r.field,CH(a,c,n[s]))}return i}function nI(e,t,n){const i=new Map;for(const s of e){const r=s.transform,a=n.data.field(s.field);i.set(s.field,AH(r,a,t))}return i}class E_ extends w_{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PH extends w_{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&MH(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=sf(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=sf(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=DO();return this.mutations.forEach(s=>{const r=t.get(s.key),a=r.overlayedDocument;let c=this.applyToLocalView(a,r.mutatedFields);c=n.has(s.key)?null:c;const u=LO(a,c);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ee.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Se())}isEqual(t){return this.batchId===t.batchId&&Qu(this.mutations,t.mutations,(n,i)=>tI(n,i))&&Qu(this.baseMutations,t.baseMutations,(n,i)=>tI(n,i))}}class gE{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){We(t.mutations.length===i.length);let s=function(){return TH}();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new gE(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn,Me;function VH(e){switch(e){case dt.OK:return Qt();case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Qt()}}function jO(e){if(e===void 0)return oa("GRPC error has no .code"),dt.UNKNOWN;switch(e){case Gn.OK:return dt.OK;case Gn.CANCELLED:return dt.CANCELLED;case Gn.UNKNOWN:return dt.UNKNOWN;case Gn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case Gn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case Gn.INTERNAL:return dt.INTERNAL;case Gn.UNAVAILABLE:return dt.UNAVAILABLE;case Gn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case Gn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case Gn.NOT_FOUND:return dt.NOT_FOUND;case Gn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case Gn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case Gn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case Gn.ABORTED:return dt.ABORTED;case Gn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case Gn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case Gn.DATA_LOSS:return dt.DATA_LOSS;default:return Qt()}}(Me=Gn||(Gn={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH=new tl([4294967295,4294967295],0);function iI(e){const t=aO().encode(e),n=new tO;return n.update(t),new Uint8Array(n.digest())}function sI(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new tl([n,i],0),new tl([s,r],0)]}class yE{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new zd(`Invalid padding: ${n}`);if(i<0)throw new zd(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new zd(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new zd(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=tl.fromNumber(this.Ee)}Ae(t,n,i){let s=t.add(n.multiply(tl.fromNumber(i)));return s.compare(jH)===1&&(s=new tl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=iI(t),[i,s]=sI(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(i,s,r);if(!this.Re(a))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new yE(r,s,n);return i.forEach(c=>a.insert(c)),a}insert(t){if(this.Ee===0)return;const n=iI(t),[i,s]=sI(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(i,s,r);this.Ve(a)}}Ve(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class zd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,dp.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new x_(ee.min(),s,new Xn(ge),aa(),Se())}}class dp{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new dp(i,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,n,i,s){this.me=t,this.removedTargetIds=n,this.key=i,this.fe=s}}class UO{constructor(t,n){this.targetId=t,this.ge=n}}class FO{constructor(t,n,i=Ri.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class rI{constructor(){this.pe=0,this.ye=oI(),this.we=Ri.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Se(),n=Se(),i=Se();return this.ye.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Qt()}}),new dp(this.we,this.Se,t,n,i)}Me(){this.be=!1,this.ye=oI()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,We(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class UH{constructor(t){this.ke=t,this.qe=new Map,this.Qe=aa(),this.$e=sg(),this.Ue=sg(),this.Ke=new Xn(ge)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const i=this.He(n);switch(t.state){case 0:this.Je(n)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(t.resumeToken));break;default:Qt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((i,s)=>{this.Je(s)&&n(s)})}Ze(t){const n=t.targetId,i=t.ge.count,s=this.Xe(n);if(s){const r=s.target;if(_T(r))if(i===0){const a=new Ut(r.path);this.ze(n,a,zi.newNoDocument(a,ee.min()))}else We(i===1);else{const a=this.et(n);if(a!==i){const c=this.tt(t),u=c?this.nt(c,t,a):1;if(u!==0){this.Ye(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,c;try{a=al(i).toUint8Array()}catch(u){if(u instanceof hO)return Xu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new yE(a,s,r)}catch(u){return Xu(u instanceof zd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ee===0?null:c}nt(t,n,i){return n.ge.count===i-this.st(t,n.targetId)?0:2}st(t,n){const i=this.ke.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.ke.it(),c=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(c)||(this.ze(n,r,null),s++)}),s}ot(t){const n=new Map;this.qe.forEach((r,a)=>{const c=this.Xe(a);if(c){if(r.current&&_T(c.target)){const u=new Ut(c.target.path);this._t(u).has(a)||this.ut(a,u)||this.ze(a,u,zi.newNoDocument(u,t))}r.ve&&(n.set(a,r.Fe()),r.Me())}});let i=Se();this.Ue.forEach((r,a)=>{let c=!0;a.forEachWhile(u=>{const h=this.Xe(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(r))}),this.Qe.forEach((r,a)=>a.setReadTime(t));const s=new x_(t,n,this.Ke,this.Qe,i);return this.Qe=aa(),this.$e=sg(),this.Ue=sg(),this.Ke=new Xn(ge),s}Ge(t,n){if(!this.Je(t))return;const i=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(t))}ze(t,n,i){if(!this.Je(t))return;const s=this.He(t);this.ut(t,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(t)),this.Ue=this.Ue.insert(n,this.ct(n).add(t)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new rI,this.qe.set(t,n)),n}ct(t){let n=this.Ue.get(t);return n||(n=new oi(ge),this.Ue=this.Ue.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new oi(ge),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||Dt("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new rI),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function sg(){return new Xn(Ut.comparator)}function oI(){return new Xn(Ut.comparator)}const FH={asc:"ASCENDING",desc:"DESCENDING"},BH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zH={and:"AND",or:"OR"};class HH{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function TT(e,t){return e.useProto3Json||g_(t)?t:{value:t}}function wy(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function BO(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function qH(e,t){return wy(e,t.toTimestamp())}function ao(e){return We(!!e),ee.fromTimestamp(function(n){const i=ol(n);return new un(i.seconds,i.nanos)}(e))}function _E(e,t){return wT(e,t).canonicalString()}function wT(e,t){const n=function(s){return new _n(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function zO(e){const t=_n.fromString(e);return We(GO(t)),t}function ET(e,t){return _E(e.databaseId,t.path)}function rb(e,t){const n=zO(t);if(n.get(1)!==e.databaseId.projectId)throw new Rt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Rt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(qO(n))}function HO(e,t){return _E(e.databaseId,t)}function $H(e){const t=zO(e);return t.length===4?_n.emptyPath():qO(t)}function xT(e){return new _n(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qO(e){return We(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function aI(e,t,n){return{name:ET(e,t),fields:n.value.mapValue.fields}}function WH(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Qt()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(h,f){return h.useProto3Json?(We(f===void 0||typeof f=="string"),Ri.fromBase64String(f||"")):(We(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ri.fromUint8Array(f||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(h){const f=h.code===void 0?dt.UNKNOWN:jO(h.code);return new Rt(f,h.message||"")}(a);n=new FO(i,s,r,c||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=rb(e,i.document.name),r=ao(i.document.updateTime),a=i.document.createTime?ao(i.document.createTime):ee.min(),c=new gs({mapValue:{fields:i.document.fields}}),u=zi.newFoundDocument(s,r,a,c),h=i.targetIds||[],f=i.removedTargetIds||[];n=new Hg(h,f,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=rb(e,i.document),r=i.readTime?ao(i.readTime):ee.min(),a=zi.newNoDocument(s,r),c=i.removedTargetIds||[];n=new Hg([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=rb(e,i.document),r=i.removedTargetIds||[];n=new Hg([],r,s,null)}else{if(!("filter"in t))return Qt();{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new LH(s,r),c=i.targetId;n=new UO(c,a)}}return n}function GH(e,t){let n;if(t instanceof hp)n={update:aI(e,t.key,t.value)};else if(t instanceof E_)n={delete:ET(e,t.key)};else if(t instanceof Tl)n={update:aI(e,t.key,t.data),updateMask:nq(t.fieldMask)};else{if(!(t instanceof PH))return Qt();n={verify:ET(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,a){const c=a.transform;if(c instanceof Pf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Of)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof kf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ty)return{fieldPath:a.field.canonicalString(),increment:c.Ie};throw Qt()}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:qH(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Qt()}(e,t.precondition)),n}function YH(e,t){return e&&e.length>0?(We(t!==void 0),e.map(n=>function(s,r){let a=s.updateTime?ao(s.updateTime):ao(r);return a.isEqual(ee.min())&&(a=ao(r)),new DH(a,s.transformResults||[])}(n,t))):[]}function KH(e,t){return{documents:[HO(e,t.path)]}}function XH(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=HO(e,s);const r=function(h){if(h.length!==0)return WO(Or.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:Ru(y.field),direction:JH(y.dir)}}(f))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const c=TT(e,t.limit);return c!==null&&(n.structuredQuery.limit=c),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ht:n,parent:s}}function QH(e){let t=$H(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){We(i===1);const f=n.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let r=[];n.where&&(r=function(m){const y=$O(m);return y instanceof Or&&TO(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(y=>function(T){return new Nf(Iu(T.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(m){let y;return y=typeof m=="object"?m.value:m,g_(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,v=m.values||[];return new by(v,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,v=m.values||[];return new by(v,y)}(n.endAt)),gH(t,s,a,r,c,"F",u,h)}function ZH(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function $O(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Iu(n.unaryFilter.field);return Yn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Iu(n.unaryFilter.field);return Yn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Iu(n.unaryFilter.field);return Yn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Iu(n.unaryFilter.field);return Yn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Qt()}}(e):e.fieldFilter!==void 0?function(n){return Yn.create(Iu(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Or.create(n.compositeFilter.filters.map(i=>$O(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Qt()}}(n.compositeFilter.op))}(e):Qt()}function JH(e){return FH[e]}function tq(e){return BH[e]}function eq(e){return zH[e]}function Ru(e){return{fieldPath:e.canonicalString()}}function Iu(e){return Ci.fromServerFormat(e.fieldPath)}function WO(e){return e instanceof Yn?function(n){if(n.op==="=="){if(Y1(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NAN"}};if(G1(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Y1(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NOT_NAN"}};if(G1(n.value))return{unaryFilter:{field:Ru(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ru(n.field),op:tq(n.op),value:n.value}}}(e):e instanceof Or?function(n){const i=n.getFilters().map(s=>WO(s));return i.length===1?i[0]:{compositeFilter:{op:eq(n.op),filters:i}}}(e):Qt()}function nq(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function GO(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t,n,i,s,r=ee.min(),a=ee.min(),c=Ri.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(t){return new Ga(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iq{constructor(t){this.Tt=t}}function sq(e){const t=QH({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?bT(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(){this.Tn=new oq}addToCollectionParentIndex(t,n){return this.Tn.add(n),pt.resolve()}getCollectionParents(t,n){return pt.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return pt.resolve()}deleteFieldIndex(t,n){return pt.resolve()}deleteAllFieldIndexes(t){return pt.resolve()}createTargetIndexes(t,n){return pt.resolve()}getDocumentsMatchingTarget(t,n){return pt.resolve(null)}getIndexType(t,n){return pt.resolve(0)}getFieldIndexes(t,n){return pt.resolve([])}getNextCollectionGroupToUpdate(t){return pt.resolve(null)}getMinOffset(t,n){return pt.resolve(rl.min())}getMinOffsetFromCollectionGroup(t,n){return pt.resolve(rl.min())}updateCollectionGroup(t,n,i){return pt.resolve()}updateIndexEntries(t,n){return pt.resolve()}}class oq{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new oi(_n.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new oi(_n.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YO=41943040;class fs{static withCacheSize(t){return new fs(t,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs.DEFAULT_COLLECTION_PERCENTILE=10,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fs.DEFAULT=new fs(YO,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fs.DISABLED=new fs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new th(0)}static Kn(){return new th(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="LruGarbageCollector",aq=1048576;function uI([e,t],[n,i]){const s=ge(e,n);return s===0?ge(t,i):s}class lq{constructor(t){this.Hn=t,this.buffer=new oi(uI),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();uI(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cq{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Dt(cI,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_h(n)?Dt(cI,"Ignoring IndexedDB error during garbage collection: ",n):await yh(n)}await this.er(3e5)})}}class uq{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return pt.resolve(m_.ae);const i=new lq(n);return this.tr.forEachTarget(t,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(t,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.tr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Dt("LruGarbageCollector","Garbage collection skipped; disabled"),pt.resolve(lI)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lI):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let i,s,r,a,c,u,h;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s))).next(m=>(i=m,c=Date.now(),this.removeTargets(t,i,n))).next(m=>(r=m,u=Date.now(),this.removeOrphanedDocuments(t,i))).next(m=>(h=Date.now(),Au()<=we.DEBUG&&Dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${r} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),pt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:m})))}}function hq(e,t){return new uq(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(){this.changes=new Dc(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,zi.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?pt.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&sf(i.mutation,s,js.empty(),un.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,Se()).next(()=>i))}getLocalViewOfDocuments(t,n,i=Se()){const s=rc();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let a=Bd();return r.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const i=rc();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,Se()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((a,c)=>{n.set(a,c)})})}computeViews(t,n,i,s){let r=aa();const a=nf(),c=function(){return nf()}();return n.forEach((u,h)=>{const f=i.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Tl)?r=r.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),sf(f.mutation,h,f.mutation.getFieldMask(),un.now())):a.set(h.key,js.empty())}),this.recalculateAndSaveOverlays(t,r).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>{var m;return c.set(h,new fq(f,(m=a.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(t,n){const i=nf();let s=new Xn((a,c)=>a-c),r=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=i.get(u)||js.empty();f=c.applyToLocalView(h,f),i.set(u,f);const m=(s.get(c.batchId)||Se()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,f=u.value,m=DO();f.forEach(y=>{if(!r.has(y)){const v=LO(n.get(y),i.get(y));v!==null&&m.set(y,v),r=r.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,m))}return pt.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(a){return Ut.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):SO(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):pt.resolve(rc());let c=Rf,u=r;return a.next(h=>pt.forEach(h,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),r.get(f)?pt.resolve():this.remoteDocumentCache.getEntry(t,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,u,h,Se())).next(f=>({batchId:c,changes:IO(f)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(i=>{let s=Bd();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let a=Bd();return this.indexManager.getCollectionParents(t,r).next(c=>pt.forEach(c,u=>{const h=function(m,y){return new vh(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,i,s).next(f=>{f.forEach((m,y)=>{a=a.insert(m,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,zi.newInvalidDocument(f)))});let c=Bd();return a.forEach((u,h)=>{const f=r.get(u);f!==void 0&&sf(f.mutation,h,js.empty(),un.now()),b_(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return pt.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ao(s.createTime)}}(n)),pt.resolve()}getNamedQuery(t,n){return pt.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:sq(s.bundledQuery),readTime:ao(s.readTime)}}(n)),pt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(){this.overlays=new Xn(Ut.comparator),this.Rr=new Map}getOverlay(t,n){return pt.resolve(this.overlays.get(n))}getOverlays(t,n){const i=rc();return pt.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.Et(t,n,r)}),pt.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Rr.delete(i)),pt.resolve()}getOverlaysForCollection(t,n,i){const s=rc(),r=n.length+1,a=new Ut(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return pt.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Xn((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let f=r.get(h.largestBatchId);f===null&&(f=rc(),r=r.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=rc(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=s)););return pt.resolve(c)}Et(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new kH(n,i));let r=this.Rr.get(n);r===void 0&&(r=Se(),this.Rr.set(n,r)),this.Rr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(){this.sessionToken=Ri.EMPTY_BYTE_STRING}getSessionToken(t){return pt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,pt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.Vr=new oi(pi.mr),this.gr=new oi(pi.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const i=new pi(t,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.wr(new pi(t,n))}Sr(t,n){t.forEach(i=>this.removeReference(i,n))}br(t){const n=new Ut(new _n([])),i=new pi(n,t),s=new pi(n,t+1),r=[];return this.gr.forEachInRange([i,s],a=>{this.wr(a),r.push(a.key)}),r}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new Ut(new _n([])),i=new pi(n,t),s=new pi(n,t+1);let r=Se();return this.gr.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(t){const n=new pi(t,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class pi{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return Ut.comparator(t.key,n.key)||ge(t.Cr,n.Cr)}static pr(t,n){return ge(t.Cr,n.Cr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new oi(pi.mr)}checkEmpty(t){return pt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new OH(r,n,i,s);this.mutationQueue.push(a);for(const c of s)this.Mr=this.Mr.add(new pi(c.key,r)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return pt.resolve(a)}lookupMutationBatch(t,n){return pt.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.Nr(i),r=s<0?0:s;return pt.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return pt.resolve(this.mutationQueue.length===0?uE:this.Fr-1)}getAllMutationBatches(t){return pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new pi(n,0),s=new pi(n,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([i,s],a=>{const c=this.Or(a.Cr);r.push(c)}),pt.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new oi(ge);return n.forEach(s=>{const r=new pi(s,0),a=new pi(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([r,a],c=>{i=i.add(c.Cr)})}),pt.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;Ut.isDocumentKey(r)||(r=r.child(""));const a=new pi(new Ut(r),0);let c=new oi(ge);return this.Mr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Cr)),!0)},a),pt.resolve(this.Br(c))}Br(t){const n=[];return t.forEach(i=>{const s=this.Or(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){We(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return pt.forEach(n.mutations,s=>{const r=new pi(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,n){const i=new pi(n,0),s=this.Mr.firstAfterOrEqual(i);return pt.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,pt.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{constructor(t){this.kr=t,this.docs=function(){return new Xn(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return pt.resolve(i?i.document.mutableCopy():zi.newInvalidDocument(n))}getEntries(t,n){let i=aa();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():zi.newInvalidDocument(s))}),pt.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=aa();const a=n.path,c=new Ut(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Y9(G9(f),i)<=0||(s.has(f.key)||b_(n,f))&&(r=r.insert(f.key,f.mutableCopy()))}return pt.resolve(r)}getAllFromCollectionGroup(t,n,i,s){Qt()}qr(t,n){return pt.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new bq(this)}getSize(t){return pt.resolve(this.size)}}class bq extends dq{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(t,s)):this.Ir.removeEntry(i)}),pt.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(t){this.persistence=t,this.Qr=new Dc(n=>fE(n),pE),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.$r=0,this.Ur=new vE,this.targetCount=0,this.Kr=th.Un()}forEachTarget(t,n){return this.Qr.forEach((i,s)=>n(s)),pt.resolve()}getLastRemoteSnapshotVersion(t){return pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return pt.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),pt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),pt.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Kr=new th(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,pt.resolve()}updateTargetData(t,n){return this.zn(n),pt.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,pt.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.Qr.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Qr.delete(a),r.push(this.removeMatchingKeysForTargetId(t,c.targetId)),s++)}),pt.waitFor(r).next(()=>s)}getTargetCount(t){return pt.resolve(this.targetCount)}getTargetData(t,n){const i=this.Qr.get(n)||null;return pt.resolve(i)}addMatchingKeys(t,n,i){return this.Ur.yr(n,i),pt.resolve()}removeMatchingKeys(t,n,i){this.Ur.Sr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(t,a))}),pt.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Ur.br(n),pt.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Ur.vr(n);return pt.resolve(i)}containsKey(t,n){return pt.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new m_(0),this.zr=!1,this.zr=!0,this.jr=new yq,this.referenceDelegate=t(this),this.Hr=new Tq(this),this.indexManager=new rq,this.remoteDocumentCache=function(s){return new vq(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new iq(n),this.Yr=new mq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new gq,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Wr[t.toKey()];return i||(i=new _q(n,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,i){Dt("MemoryPersistence","Starting transaction:",t);const s=new wq(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(r=>this.referenceDelegate.Xr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}ei(t,n){return pt.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,n)))}}class wq extends X9{constructor(t){super(),this.currentSequenceNumber=t}}class bE{constructor(t){this.persistence=t,this.ti=new vE,this.ni=null}static ri(t){return new bE(t)}get ii(){if(this.ni)return this.ni;throw Qt()}addReference(t,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),pt.resolve()}removeReference(t,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),pt.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),pt.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.ii.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pt.forEach(this.ii,i=>{const s=Ut.fromPath(i);return this.si(t,s).next(r=>{r||n.removeEntry(s,ee.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return pt.or([()=>pt.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class Ey{constructor(t,n){this.persistence=t,this.oi=new Dc(i=>J9(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=hq(this,n)}static ri(t,n){return new Ey(t,n)}Zr(){}Xr(t){return pt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}sr(t){let n=0;return this.rr(t,i=>{n++}).next(()=>n)}rr(t,n){return pt.forEach(this.oi,(i,s)=>this.ar(t,i,s).next(r=>r?pt.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.qr(t,a=>this.ar(t,a,n).next(c=>{c||(i++,r.removeEntry(a,ee.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),pt.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),pt.resolve()}removeReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),pt.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),pt.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Fg(t.data.value)),n}ar(t,n,i){return pt.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.oi.get(n);return pt.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Hi=i,this.Ji=s}static Yi(t,n){let i=Se(),s=Se();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new TE(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return ez()?8:Q9(Xi())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.rs(t,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ss(t,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new Eq;return this._s(t,n,a).next(c=>{if(r.result=c,this.Xi)return this.us(t,n,a,c.size)})}).next(()=>r.result)}us(t,n,i,s){return i.documentReadCount<this.es?(Au()<=we.DEBUG&&Dt("QueryEngine","SDK will not create cache indexes for query:",Cu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),pt.resolve()):(Au()<=we.DEBUG&&Dt("QueryEngine","Query:",Cu(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(Au()<=we.DEBUG&&Dt("QueryEngine","The SDK decides to create cache indexes for query:",Cu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,oo(n))):pt.resolve())}rs(t,n){if(Z1(n))return pt.resolve(null);let i=oo(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bT(n,null,"F"),i=oo(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const a=Se(...r);return this.ns.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,i).next(u=>{const h=this.cs(n,c);return this.ls(n,h,a,u.readTime)?this.rs(t,bT(n,null,"F")):this.hs(t,h,n,u)}))})))}ss(t,n,i,s){return Z1(n)||s.isEqual(ee.min())?pt.resolve(null):this.ns.getDocuments(t,i).next(r=>{const a=this.cs(n,r);return this.ls(n,a,i,s)?pt.resolve(null):(Au()<=we.DEBUG&&Dt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Cu(n)),this.hs(t,a,n,W9(s,Rf)).next(c=>c))})}cs(t,n){let i=new oi(CO(t));return n.forEach((s,r)=>{b_(t,r)&&(i=i.add(r))}),i}ls(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}_s(t,n,i){return Au()<=we.DEBUG&&Dt("QueryEngine","Using full collection scan to execute query:",Cu(n)),this.ns.getDocumentsMatchingQuery(t,n,rl.min(),i)}hs(t,n,i,s){return this.ns.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="LocalStore",Sq=3e8;class Aq{constructor(t,n,i,s){this.persistence=t,this.Ps=n,this.serializer=s,this.Ts=new Xn(ge),this.Is=new Dc(r=>fE(r),pE),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new pq(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function Cq(e,t,n,i){return new Aq(e,t,n,i)}async function XO(e,t){const n=ne(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.As(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],c=[];let u=Se();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of r){c.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Rs:h,removedBatchIds:a,addedBatchIds:c}))})})}function Rq(e,t){const n=ne(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.ds.newChangeBuffer({trackRemovals:!0});return function(c,u,h,f){const m=h.batch,y=m.keys();let v=pt.resolve();return y.forEach(T=>{v=v.next(()=>f.getEntry(u,T)).next(E=>{const x=h.docVersions.get(T);We(x!==null),E.version.compareTo(x)<0&&(m.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),f.addEntry(E)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=Se();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function QO(e){const t=ne(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function Iq(e,t){const n=ne(e),i=t.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const c=[];t.targetChanges.forEach((f,m)=>{const y=s.get(m);if(!y)return;c.push(n.Hr.removeMatchingKeys(r,f.removedDocuments,m).next(()=>n.Hr.addMatchingKeys(r,f.addedDocuments,m)));let v=y.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(m)!==null?v=v.withResumeToken(Ri.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,i)),s=s.insert(m,v),function(E,x,C){return E.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=Sq?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(y,v,f)&&c.push(n.Hr.updateTargetData(r,v))});let u=aa(),h=Se();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(r,f))}),c.push(Dq(r,a,t.documentUpdates).next(f=>{u=f.Vs,h=f.fs})),!i.isEqual(ee.min())){const f=n.Hr.getLastRemoteSnapshotVersion(r).next(m=>n.Hr.setTargetsMetadata(r,r.currentSequenceNumber,i));c.push(f)}return pt.waitFor(c).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ts=s,r))}function Dq(e,t,n){let i=Se(),s=Se();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let a=aa();return n.forEach((c,u)=>{const h=r.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ee.min())?(t.removeEntry(c,u.readTime),a=a.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(c,u)):Dt(wE,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Vs:a,fs:s}})}function Mq(e,t){const n=ne(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=uE),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Nq(e,t){const n=ne(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Hr.getTargetData(i,t).next(r=>r?(s=r,pt.resolve(s)):n.Hr.allocateTargetId(i).next(a=>(s=new Ga(t,a,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(t,i.targetId)),i})}async function ST(e,t,n){const i=ne(e),s=i.Ts.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!_h(a))throw a;Dt(wE,`Failed to update sequence numbers for target ${t}: ${a}`)}i.Ts=i.Ts.remove(t),i.Is.delete(s.target)}function hI(e,t,n){const i=ne(e);let s=ee.min(),r=Se();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const m=ne(u),y=m.Is.get(f);return y!==void 0?pt.resolve(m.Ts.get(y)):m.Hr.getTargetData(h,f)}(i,a,oo(t)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(a,c.targetId).next(u=>{r=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(a,t,n?s:ee.min(),n?r:Se())).next(c=>(Pq(i,_H(t),c),{documents:c,gs:r})))}function Pq(e,t,n){let i=e.Es.get(t)||ee.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Es.set(t,i)}class dI{constructor(){this.activeTargetIds=xH()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Oq{constructor(){this.ho=new dI,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,i){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new dI,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="ConnectivityMonitor";class pI{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Dt(fI,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Dt(fI,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg=null;function AT(){return rg===null?rg=function(){return 268435456+Math.round(2147483648*Math.random())}():rg++,"0x"+rg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="RestConnection",Lq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vq{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===_y?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(t,n,i,s,r){const a=AT(),c=this.bo(t,n.toUriEncodedString());Dt(ob,`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,r),this.vo(t,c,u,i).then(h=>(Dt(ob,`Received RPC '${t}' ${a}: `,h),h),h=>{throw Xu(ob,`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Co(t,n,i,s,r,a){return this.So(t,n,i,s,r)}Do(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}bo(t,n){const i=Lq[t];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="WebChannelConnection";class Uq extends Vq{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,i,s){const r=AT();return new Promise((a,c)=>{const u=new eO;u.setWithCredentials(!0),u.listenOnce(nO.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ug.NO_ERROR:const f=u.getResponseJson();Dt(Vi,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(f)),a(f);break;case Ug.TIMEOUT:Dt(Vi,`RPC '${t}' ${r} timed out`),c(new Rt(dt.DEADLINE_EXCEEDED,"Request time out"));break;case Ug.HTTP_ERROR:const m=u.getStatus();if(Dt(Vi,`RPC '${t}' ${r} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const T=function(x){const C=x.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(C)>=0?C:dt.UNKNOWN}(v.status);c(new Rt(T,v.message))}else c(new Rt(dt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Rt(dt.UNAVAILABLE,"Connection failed."));break;default:Qt()}}finally{Dt(Vi,`RPC '${t}' ${r} completed.`)}});const h=JSON.stringify(s);Dt(Vi,`RPC '${t}' ${r} sending request:`,s),u.send(n,"POST",h,i,15)})}Wo(t,n,i){const s=AT(),r=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=rO(),c=sO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const f=r.join("");Dt(Vi,`Creating RPC '${t}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);let y=!1,v=!1;const T=new jq({Fo:x=>{v?Dt(Vi,`Not sending because RPC '${t}' stream ${s} is closed:`,x):(y||(Dt(Vi,`Opening RPC '${t}' stream ${s} transport.`),m.open(),y=!0),Dt(Vi,`RPC '${t}' stream ${s} sending:`,x),m.send(x))},Mo:()=>m.close()}),E=(x,C,P)=>{x.listen(C,N=>{try{P(N)}catch(q){setTimeout(()=>{throw q},0)}})};return E(m,Fd.EventType.OPEN,()=>{v||(Dt(Vi,`RPC '${t}' stream ${s} transport opened.`),T.Qo())}),E(m,Fd.EventType.CLOSE,()=>{v||(v=!0,Dt(Vi,`RPC '${t}' stream ${s} transport closed`),T.Uo())}),E(m,Fd.EventType.ERROR,x=>{v||(v=!0,Xu(Vi,`RPC '${t}' stream ${s} transport errored:`,x),T.Uo(new Rt(dt.UNAVAILABLE,"The operation could not be completed")))}),E(m,Fd.EventType.MESSAGE,x=>{var C;if(!v){const P=x.data[0];We(!!P);const N=P,q=(N==null?void 0:N.error)||((C=N[0])===null||C===void 0?void 0:C.error);if(q){Dt(Vi,`RPC '${t}' stream ${s} received error:`,q);const F=q.status;let G=function(M){const V=Gn[M];if(V!==void 0)return jO(V)}(F),k=q.message;G===void 0&&(G=dt.INTERNAL,k="Unknown error status: "+F+" with message "+q.message),v=!0,T.Uo(new Rt(G,k)),m.close()}else Dt(Vi,`RPC '${t}' stream ${s} received:`,P),T.Ko(P)}}),E(c,iO.STAT_EVENT,x=>{x.stat===dT.PROXY?Dt(Vi,`RPC '${t}' stream ${s} detected buffering proxy`):x.stat===dT.NOPROXY&&Dt(Vi,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.$o()},0),T}}function ab(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(e){return new HH(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Ti=t,this.timerId=n,this.Go=i,this.zo=s,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-i);s>0&&Dt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="PersistentStream";class JO{constructor(t,n,i,s,r,a,c,u){this.Ti=t,this.n_=i,this.r_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new ZO(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?(oa(n.toString()),oa("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===n&&this.V_(i,s)},i=>{t(()=>{const s=new Rt(dt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(t,n){const i=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Dt(mI,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(Dt(mI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fq extends JO{constructor(t,n,i,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=WH(this.serializer,t),i=function(r){if(!("targetChange"in r))return ee.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?ee.min():a.readTime?ao(a.readTime):ee.min()}(t);return this.listener.p_(n,i)}y_(t){const n={};n.database=xT(this.serializer),n.addTarget=function(r,a){let c;const u=a.target;if(c=_T(u)?{documents:KH(r,u)}:{query:XH(r,u).ht},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=BO(r,a.resumeToken);const h=TT(r,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(ee.min())>0){c.readTime=wy(r,a.snapshotVersion.toTimestamp());const h=TT(r,a.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,t);const i=ZH(this.serializer,t);i&&(n.labels=i),this.I_(n)}w_(t){const n={};n.database=xT(this.serializer),n.removeTarget=t,this.I_(n)}}class Bq extends JO{constructor(t,n,i,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,n){return this.connection.Wo("Write",t,n)}g_(t){return We(!!t.streamToken),this.lastStreamToken=t.streamToken,We(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){We(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const n=YH(t.writeResults,t.commitTime),i=ao(t.commitTime);return this.listener.v_(i,n)}C_(){const t={};t.database=xT(this.serializer),this.I_(t)}b_(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>GH(this.serializer,i))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{}class Hq extends zq{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Rt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.So(t,wT(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Rt(dt.UNKNOWN,r.toString())})}Co(t,n,i,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Co(t,wT(n,i),s,a,c,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Rt(dt.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class qq{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(oa(n),this.N_=!1):Dt("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="RemoteStore";class $q{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To(a=>{i.enqueueAndForget(async()=>{Mc(this)&&(Dt(vc,"Restarting streams for network reachability change."),await async function(u){const h=ne(u);h.W_.add(4),await fp(h),h.j_.set("Unknown"),h.W_.delete(4),await A_(h)}(this))})}),this.j_=new qq(i,s)}}async function A_(e){if(Mc(e))for(const t of e.G_)await t(!0)}async function fp(e){for(const t of e.G_)await t(!1)}function tk(e,t){const n=ne(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),AE(n)?SE(n):bh(n).c_()&&xE(n,t))}function EE(e,t){const n=ne(e),i=bh(n);n.K_.delete(t),i.c_()&&ek(n,t),n.K_.size===0&&(i.c_()?i.P_():Mc(n)&&n.j_.set("Unknown"))}function xE(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ee.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}bh(e).y_(t)}function ek(e,t){e.H_.Ne(t),bh(e).w_(t)}function SE(e){e.H_=new UH({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),bh(e).start(),e.j_.B_()}function AE(e){return Mc(e)&&!bh(e).u_()&&e.K_.size>0}function Mc(e){return ne(e).W_.size===0}function nk(e){e.H_=void 0}async function Wq(e){e.j_.set("Online")}async function Gq(e){e.K_.forEach((t,n)=>{xE(e,t)})}async function Yq(e,t){nk(e),AE(e)?(e.j_.q_(t),SE(e)):e.j_.set("Unknown")}async function Kq(e,t,n){if(e.j_.set("Online"),t instanceof FO&&t.state===2&&t.cause)try{await async function(s,r){const a=r.cause;for(const c of r.targetIds)s.K_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.K_.delete(c),s.H_.removeTarget(c))}(e,t)}catch(i){Dt(vc,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await xy(e,i)}else if(t instanceof Hg?e.H_.We(t):t instanceof UO?e.H_.Ze(t):e.H_.je(t),!n.isEqual(ee.min()))try{const i=await QO(e.localStore);n.compareTo(i)>=0&&await function(r,a){const c=r.H_.ot(a);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=r.K_.get(h);f&&r.K_.set(h,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,h)=>{const f=r.K_.get(u);if(!f)return;r.K_.set(u,f.withResumeToken(Ri.EMPTY_BYTE_STRING,f.snapshotVersion)),ek(r,u);const m=new Ga(f.target,u,h,f.sequenceNumber);xE(r,m)}),r.remoteSyncer.applyRemoteEvent(c)}(e,n)}catch(i){Dt(vc,"Failed to raise snapshot:",i),await xy(e,i)}}async function xy(e,t,n){if(!_h(t))throw t;e.W_.add(1),await fp(e),e.j_.set("Offline"),n||(n=()=>QO(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Dt(vc,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await A_(e)})}function ik(e,t){return t().catch(n=>xy(e,n,t))}async function C_(e){const t=ne(e),n=cl(t);let i=t.U_.length>0?t.U_[t.U_.length-1].batchId:uE;for(;Xq(t);)try{const s=await Mq(t.localStore,i);if(s===null){t.U_.length===0&&n.P_();break}i=s.batchId,Qq(t,s)}catch(s){await xy(t,s)}sk(t)&&rk(t)}function Xq(e){return Mc(e)&&e.U_.length<10}function Qq(e,t){e.U_.push(t);const n=cl(e);n.c_()&&n.S_&&n.b_(t.mutations)}function sk(e){return Mc(e)&&!cl(e).u_()&&e.U_.length>0}function rk(e){cl(e).start()}async function Zq(e){cl(e).C_()}async function Jq(e){const t=cl(e);for(const n of e.U_)t.b_(n.mutations)}async function t8(e,t,n){const i=e.U_.shift(),s=gE.from(i,t,n);await ik(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await C_(e)}async function e8(e,t){t&&cl(e).S_&&await async function(i,s){if(function(a){return VH(a)&&a!==dt.ABORTED}(s.code)){const r=i.U_.shift();cl(i).h_(),await ik(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await C_(i)}}(e,t),sk(e)&&rk(e)}async function gI(e,t){const n=ne(e);n.asyncQueue.verifyOperationInProgress(),Dt(vc,"RemoteStore received new credentials");const i=Mc(n);n.W_.add(3),await fp(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await A_(n)}async function n8(e,t){const n=ne(e);t?(n.W_.delete(2),await A_(n)):t||(n.W_.add(2),await fp(n),n.j_.set("Unknown"))}function bh(e){return e.J_||(e.J_=function(n,i,s){const r=ne(n);return r.M_(),new Fq(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{xo:Wq.bind(null,e),No:Gq.bind(null,e),Lo:Yq.bind(null,e),p_:Kq.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),AE(e)?SE(e):e.j_.set("Unknown")):(await e.J_.stop(),nk(e))})),e.J_}function cl(e){return e.Y_||(e.Y_=function(n,i,s){const r=ne(n);return r.M_(),new Bq(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:Zq.bind(null,e),Lo:e8.bind(null,e),D_:Jq.bind(null,e),v_:t8.bind(null,e)}),e.G_.push(async t=>{t?(e.Y_.h_(),await C_(e)):(await e.Y_.stop(),e.U_.length>0&&(Dt(vc,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))})),e.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const a=Date.now()+i,c=new CE(t,n,a,s,r);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Rt(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function RE(e,t){if(oa("AsyncQueue",`${t}: ${e}`),_h(e))return new Rt(dt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{static emptySet(t){return new Hu(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Ut.comparator(n.key,i.key):(n,i)=>Ut.comparator(n.key,i.key),this.keyedMap=Bd(),this.sortedSet=new Xn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Hu)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Hu;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.Z_=new Xn(Ut.comparator)}track(t){const n=t.doc.key,i=this.Z_.get(n);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(n):t.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Qt():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,i)=>{t.push(i)}),t}}class eh{constructor(t,n,i,s,r,a,c,u,h){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,i,s,r){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new eh(t,n,Hu.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&v_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class s8{constructor(){this.queries=_I(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const s=ne(n),r=s.queries;s.queries=_I(),r.forEach((a,c)=>{for(const u of c.ta)u.onError(i)})})(this,new Rt(dt.ABORTED,"Firestore shutting down"))}}function _I(){return new Dc(e=>AO(e),v_)}async function IE(e,t){const n=ne(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.na()&&t.ra()&&(i=2):(r=new i8,i=t.ra()?0:1);try{switch(i){case 0:r.ea=await n.onListen(s,!0);break;case 1:r.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=RE(a,`Initialization of query '${Cu(t.query)}' failed`);return void t.onError(c)}n.queries.set(s,r),r.ta.push(t),t.sa(n.onlineState),r.ea&&t.oa(r.ea)&&ME(n)}async function DE(e,t){const n=ne(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const a=r.ta.indexOf(t);a>=0&&(r.ta.splice(a,1),r.ta.length===0?s=t.ra()?0:1:!r.na()&&t.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function r8(e,t){const n=ne(e);let i=!1;for(const s of t){const r=s.query,a=n.queries.get(r);if(a){for(const c of a.ta)c.oa(s)&&(i=!0);a.ea=s}}i&&ME(n)}function o8(e,t,n){const i=ne(e),s=i.queries.get(t);if(s)for(const r of s.ta)r.onError(n);i.queries.delete(t)}function ME(e){e.ia.forEach(t=>{t.next()})}var CT,vI;(vI=CT||(CT={}))._a="default",vI.Cache="cache";class NE{constructor(t,n,i){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new eh(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=eh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==CT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(t){this.key=t}}class ak{constructor(t){this.key=t}}class a8{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Se(),this.mutatedKeys=Se(),this.ya=CO(t),this.wa=new Hu(this.ya)}get Sa(){return this.fa}ba(t,n){const i=n?n.Da:new yI,s=n?n.wa:this.wa;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((f,m)=>{const y=s.get(f),v=b_(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let x=!1;y&&v?y.data.isEqual(v.data)?T!==E&&(i.track({type:3,doc:v}),x=!0):this.va(y,v)||(i.track({type:2,doc:v}),x=!0,(u&&this.ya(v,u)>0||h&&this.ya(v,h)<0)&&(c=!0)):!y&&v?(i.track({type:0,doc:v}),x=!0):y&&!v&&(i.track({type:1,doc:y}),x=!0,(u||h)&&(c=!0)),x&&(v?(a=a.add(v),r=E?r.add(f):r.delete(f)):(a=a.delete(f),r=r.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),r=r.delete(f.key),i.track({type:1,doc:f})}return{wa:a,Da:i,ls:c,mutatedKeys:r}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const a=t.Da.X_();a.sort((f,m)=>function(v,T){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt()}};return E(v)-E(T)}(f.type,m.type)||this.ya(f.doc,m.doc)),this.Ca(i),s=s!=null&&s;const c=n&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,h=u!==this.ga;return this.ga=u,a.length!==0||h?{snapshot:new eh(this.query,t.wa,r,a,t.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new yI,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Se(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return t.forEach(i=>{this.pa.has(i)||n.push(new ak(i))}),this.pa.forEach(i=>{t.has(i)||n.push(new ok(i))}),n}Oa(t){this.fa=t.gs,this.pa=Se();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return eh.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const PE="SyncEngine";class l8{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class c8{constructor(t){this.key=t,this.Ba=!1}}class u8{constructor(t,n,i,s,r,a){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Dc(c=>AO(c),v_),this.qa=new Map,this.Qa=new Set,this.$a=new Xn(Ut.comparator),this.Ua=new Map,this.Ka=new vE,this.Wa={},this.Ga=new Map,this.za=th.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function h8(e,t,n=!0){const i=fk(e);let s;const r=i.ka.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Na()):s=await lk(i,t,n,!0),s}async function d8(e,t){const n=fk(e);await lk(n,t,!0,!1)}async function lk(e,t,n,i){const s=await Nq(e.localStore,oo(t)),r=s.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let c;return i&&(c=await f8(e,t,r,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&tk(e.remoteStore,s),c}async function f8(e,t,n,i,s){e.Ha=(m,y,v)=>async function(E,x,C,P){let N=x.view.ba(C);N.ls&&(N=await hI(E.localStore,x.query,!1).then(({documents:k})=>x.view.ba(k,N)));const q=P&&P.targetChanges.get(x.targetId),F=P&&P.targetMismatches.get(x.targetId)!=null,G=x.view.applyChanges(N,E.isPrimaryClient,q,F);return TI(E,x.targetId,G.Ma),G.snapshot}(e,m,y,v);const r=await hI(e.localStore,t,!0),a=new a8(t,r.gs),c=a.ba(r.documents),u=dp.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),h=a.applyChanges(c,e.isPrimaryClient,u);TI(e,n,h.Ma);const f=new l8(t,n,a);return e.ka.set(t,f),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),h.snapshot}async function p8(e,t,n){const i=ne(e),s=i.ka.get(t),r=i.qa.get(s.targetId);if(r.length>1)return i.qa.set(s.targetId,r.filter(a=>!v_(a,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await ST(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&EE(i.remoteStore,s.targetId),RT(i,s.targetId)}).catch(yh)):(RT(i,s.targetId),await ST(i.localStore,s.targetId,!0))}async function m8(e,t){const n=ne(e),i=n.ka.get(t),s=n.qa.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),EE(n.remoteStore,i.targetId))}async function g8(e,t,n){const i=E8(e);try{const s=await function(a,c){const u=ne(a),h=un.now(),f=c.reduce((v,T)=>v.add(T.key),Se());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=aa(),E=Se();return u.ds.getEntries(v,f).next(x=>{T=x,T.forEach((C,P)=>{P.isValidDocument()||(E=E.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,T)).next(x=>{m=x;const C=[];for(const P of c){const N=NH(P,m.get(P.key).overlayedDocument);N!=null&&C.push(new Tl(P.key,N,_O(N.value.mapValue),os.exists(!0)))}return u.mutationQueue.addMutationBatch(v,h,C,c)}).next(x=>{y=x;const C=x.applyToLocalDocumentSet(m,E);return u.documentOverlayCache.saveOverlays(v,x.batchId,C)})}).then(()=>({batchId:y.batchId,changes:IO(m)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let h=a.Wa[a.currentUser.toKey()];h||(h=new Xn(ge)),h=h.insert(c,u),a.Wa[a.currentUser.toKey()]=h}(i,s.batchId,n),await pp(i,s.changes),await C_(i.remoteStore)}catch(s){const r=RE(s,"Failed to persist write");n.reject(r)}}async function ck(e,t){const n=ne(e);try{const i=await Iq(n.localStore,t);t.targetChanges.forEach((s,r)=>{const a=n.Ua.get(r);a&&(We(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?We(a.Ba):s.removedDocuments.size>0&&(We(a.Ba),a.Ba=!1))}),await pp(n,i,t)}catch(i){await yh(i)}}function bI(e,t,n){const i=ne(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.ka.forEach((r,a)=>{const c=a.view.sa(t);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ne(a);u.onlineState=c;let h=!1;u.queries.forEach((f,m)=>{for(const y of m.ta)y.sa(c)&&(h=!0)}),h&&ME(u)}(i.eventManager,t),s.length&&i.La.p_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function y8(e,t,n){const i=ne(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Ua.get(t),r=s&&s.key;if(r){let a=new Xn(Ut.comparator);a=a.insert(r,zi.newNoDocument(r,ee.min()));const c=Se().add(r),u=new x_(ee.min(),new Map,new Xn(ge),a,c);await ck(i,u),i.$a=i.$a.remove(r),i.Ua.delete(t),OE(i)}else await ST(i.localStore,t,!1).then(()=>RT(i,t,n)).catch(yh)}async function _8(e,t){const n=ne(e),i=t.batch.batchId;try{const s=await Rq(n.localStore,t);hk(n,i,null),uk(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await pp(n,s)}catch(s){await yh(s)}}async function v8(e,t,n){const i=ne(e);try{const s=await function(a,c){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next(m=>(We(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(i.localStore,t);hk(i,t,n),uk(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await pp(i,s)}catch(s){await yh(s)}}function uk(e,t){(e.Ga.get(t)||[]).forEach(n=>{n.resolve()}),e.Ga.delete(t)}function hk(e,t,n){const i=ne(e);let s=i.Wa[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Wa[i.currentUser.toKey()]=s}}function RT(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.qa.get(t))e.ka.delete(i),n&&e.La.Ja(i,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach(i=>{e.Ka.containsKey(i)||dk(e,i)})}function dk(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(EE(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),OE(e))}function TI(e,t,n){for(const i of n)i instanceof ok?(e.Ka.addReference(i.key,t),b8(e,i)):i instanceof ak?(Dt(PE,"Document no longer in limbo: "+i.key),e.Ka.removeReference(i.key,t),e.Ka.containsKey(i.key)||dk(e,i.key)):Qt()}function b8(e,t){const n=t.key,i=n.path.canonicalString();e.$a.get(n)||e.Qa.has(i)||(Dt(PE,"New document in limbo: "+n),e.Qa.add(i),OE(e))}function OE(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Ut(_n.fromString(t)),i=e.za.next();e.Ua.set(i,new c8(n)),e.$a=e.$a.insert(n,i),tk(e.remoteStore,new Ga(oo(__(n.path)),i,"TargetPurposeLimboResolution",m_.ae))}}async function pp(e,t,n){const i=ne(e),s=[],r=[],a=[];i.ka.isEmpty()||(i.ka.forEach((c,u)=>{a.push(i.Ha(u,t,n).then(h=>{var f;if((h||n)&&i.isPrimaryClient){const m=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=TE.Yi(u.targetId,h);r.push(m)}}))}),await Promise.all(a),i.La.p_(s),await async function(u,h){const f=ne(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>pt.forEach(h,y=>pt.forEach(y.Hi,v=>f.persistence.referenceDelegate.addReference(m,y.targetId,v)).next(()=>pt.forEach(y.Ji,v=>f.persistence.referenceDelegate.removeReference(m,y.targetId,v)))))}catch(m){if(!_h(m))throw m;Dt(wE,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const v=f.Ts.get(y),T=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(T);f.Ts=f.Ts.insert(y,E)}}}(i.localStore,r))}async function T8(e,t){const n=ne(e);if(!n.currentUser.isEqual(t)){Dt(PE,"User change. New user:",t.toKey());const i=await XO(n.localStore,t);n.currentUser=t,function(r,a){r.Ga.forEach(c=>{c.forEach(u=>{u.reject(new Rt(dt.CANCELLED,a))})}),r.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await pp(n,i.Rs)}}function w8(e,t){const n=ne(e),i=n.Ua.get(t);if(i&&i.Ba)return Se().add(i.key);{let s=Se();const r=n.qa.get(t);if(!r)return s;for(const a of r){const c=n.ka.get(a);s=s.unionWith(c.view.Sa)}return s}}function fk(e){const t=ne(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ck.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=w8.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=y8.bind(null,t),t.La.p_=r8.bind(null,t.eventManager),t.La.Ja=o8.bind(null,t.eventManager),t}function E8(e){const t=ne(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_8.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=v8.bind(null,t),t}class Sy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=S_(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return Cq(this.persistence,new xq,t.initialUser,this.serializer)}Xa(t){return new KO(bE.ri,this.serializer)}Za(t){return new Oq}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sy.provider={build:()=>new Sy};class x8 extends Sy{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){We(this.persistence.referenceDelegate instanceof Ey);const i=this.persistence.referenceDelegate.garbageCollector;return new cq(i,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?fs.withCacheSize(this.cacheSizeBytes):fs.DEFAULT;return new KO(i=>Ey.ri(i,n),this.serializer)}}class IT{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=T8.bind(null,this.syncEngine),await n8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new s8}()}createDatastore(t){const n=S_(t.databaseInfo.databaseId),i=function(r){return new Uq(r)}(t.databaseInfo);return function(r,a,c,u){return new Hq(r,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,a,c){return new $q(i,s,r,a,c)}(this.localStore,this.datastore,t.asyncQueue,n=>bI(this.syncEngine,n,0),function(){return pI.D()?new pI:new kq}())}createSyncEngine(t,n){return function(s,r,a,c,u,h,f){const m=new u8(s,r,a,c,u,h);return f&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=ne(s);Dt(vc,"RemoteStore shutting down."),r.W_.add(5),await fp(r),r.z_.shutdown(),r.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}IT.provider={build:()=>new IT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):oa("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="FirestoreClient";class S8{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Fi.UNAUTHENTICATED,this.clientId=lO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{Dt(ul,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Dt(ul,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=RE(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function lb(e,t){e.asyncQueue.verifyOperationInProgress(),Dt(ul,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await XO(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function wI(e,t){e.asyncQueue.verifyOperationInProgress();const n=await A8(e);Dt(ul,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>gI(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>gI(t.remoteStore,s)),e._onlineComponents=t}async function A8(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Dt(ul,"Using user provided OfflineComponentProvider");try{await lb(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===dt.FAILED_PRECONDITION||s.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xu("Error using user provided cache. Falling back to memory cache: "+n),await lb(e,new Sy)}}else Dt(ul,"Using default OfflineComponentProvider"),await lb(e,new x8(void 0));return e._offlineComponents}async function pk(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Dt(ul,"Using user provided OnlineComponentProvider"),await wI(e,e._uninitializedComponentsProvider._online)):(Dt(ul,"Using default OnlineComponentProvider"),await wI(e,new IT))),e._onlineComponents}function C8(e){return pk(e).then(t=>t.syncEngine)}async function Ay(e){const t=await pk(e),n=t.eventManager;return n.onListen=h8.bind(null,t.syncEngine),n.onUnlisten=p8.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=d8.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=m8.bind(null,t.syncEngine),n}function R8(e,t,n={}){const i=new Jo;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,c,u,h){const f=new kE({next:y=>{f.su(),a.enqueueAndForget(()=>DE(r,m));const v=y.docs.has(c);!v&&y.fromCache?h.reject(new Rt(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&u&&u.source==="server"?h.reject(new Rt(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new NE(__(c.path),f,{includeMetadataChanges:!0,Ta:!0});return IE(r,m)}(await Ay(e),e.asyncQueue,t,n,i)),i.promise}function I8(e,t,n={}){const i=new Jo;return e.asyncQueue.enqueueAndForget(async()=>function(r,a,c,u,h){const f=new kE({next:y=>{f.su(),a.enqueueAndForget(()=>DE(r,m)),y.fromCache&&u.source==="server"?h.reject(new Rt(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new NE(c,f,{includeMetadataChanges:!0,Ta:!0});return IE(r,m)}(await Ay(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(e,t,n){if(!n)throw new Rt(dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function D8(e,t,n,i){if(t===!0&&i===!0)throw new Rt(dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function xI(e){if(!Ut.isDocumentKey(e))throw new Rt(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function SI(e){if(Ut.isDocumentKey(e))throw new Rt(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function R_(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Qt()}function as(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Rt(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=R_(e);throw new Rt(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="firestore.googleapis.com",AI=!0;class CI{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Rt(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yk,this.ssl=AI}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:AI;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=YO;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<aq)throw new Rt(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}D8("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mk((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Rt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Rt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Rt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class I_{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Rt(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Rt(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CI(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new V9;switch(i.type){case"firstParty":return new B9(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Rt(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=EI.get(n);i&&(Dt("ComponentProvider","Removing Datastore"),EI.delete(n),i.terminate())}(this),Promise.resolve()}}function M8(e,t,n,i={}){var s;const r=(e=as(e,I_))._getSettings(),a=Object.assign(Object.assign({},r),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;r.host!==yk&&r.host!==c&&Xu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},r),{host:c,ssl:!1,emulatorOptions:i});if(!ia(u,a)&&(e._setSettings(u),i.mockUserToken)){let h,f;if(typeof i.mockUserToken=="string")h=i.mockUserToken,f=Fi.MOCK_USER;else{h=Gw(i.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Rt(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Fi(m)}e._authCredentials=new j9(new oO(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new wl(this.firestore,t,this._query)}}class Ki{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nl(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ki(this.firestore,t,this._key)}}class nl extends wl{constructor(t,n,i){super(t,n,__(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ki(this.firestore,null,new Ut(t))}withConverter(t){return new nl(this.firestore,t,this._path)}}function Fn(e,t,...n){if(e=dn(e),gk("collection","path",t),e instanceof I_){const i=_n.fromString(t,...n);return SI(i),new nl(e,null,i)}{if(!(e instanceof Ki||e instanceof nl))throw new Rt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_n.fromString(t,...n));return SI(i),new nl(e.firestore,null,i)}}function ce(e,t,...n){if(e=dn(e),arguments.length===1&&(t=lO.newId()),gk("doc","path",t),e instanceof I_){const i=_n.fromString(t,...n);return xI(i),new Ki(e,null,new Ut(i))}{if(!(e instanceof Ki||e instanceof nl))throw new Rt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_n.fromString(t,...n));return xI(i),new Ki(e.firestore,e instanceof nl?e.converter:null,new Ut(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="AsyncQueue";class II{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new ZO(this,"async_queue_retry"),this.Su=()=>{const i=ab();i&&Dt(RI,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const n=ab();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=ab();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Jo;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!_h(t))throw t;Dt(RI,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw oa("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(t,n,i){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const s=CE.createAndSchedule(this,t,n,i,r=>this.Fu(r));return this.fu.push(s),s}Du(){this.gu&&Qt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}function DI(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}class po extends I_{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new II,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new II(t),this._firestoreClient=void 0,await t}}}function D_(e,t){const n=typeof e=="object"?e:op(),i=typeof e=="string"?e:_y,s=da(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=$w("firestore");r&&M8(s,...r)}return s}function mp(e){if(e._terminated)throw new Rt(dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||N8(e),e._firestoreClient}function N8(e){var t,n,i;const s=e._freezeSettings(),r=function(c,u,h,f){return new nH(c,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,mk(f.experimentalLongPollingOptions),f.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new S8(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nh(Ri.fromBase64String(t))}catch(n){throw new Rt(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new nh(Ri.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Rt(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ci(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Rt(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Rt(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ge(this._lat,t._lat)||ge(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=/^__.*__$/;class O8{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Tl(t,this.data,this.fieldMask,n,this.fieldTransforms):new hp(t,this.data,n,this.fieldTransforms)}}class _k{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Tl(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function vk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt()}}class jE{constructor(t,n,i,s,r,a){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new jE(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ku({path:i,Qu:!1});return s.$u(t),s}Uu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Cy(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(vk(this.Lu)&&P8.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class k8{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||S_(t)}ju(t,n,i,s=!1){return new jE({Lu:t,methodName:n,zu:i,path:Ci.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yp(e){const t=e._freezeSettings(),n=S_(e._databaseId);return new k8(e._databaseId,!!t.ignoreUndefinedProperties,n)}function UE(e,t,n,i,s,r={}){const a=e.ju(r.merge||r.mergeFields?2:0,t,n,s);BE("Data must be an object, but it was:",a,i);const c=wk(i,a);let u,h;if(r.merge)u=new js(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const f=[];for(const m of r.mergeFields){const y=DT(t,m,n);if(!a.contains(y))throw new Rt(dt.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);xk(f,y)||f.push(y)}u=new js(f),h=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=a.fieldTransforms;return new O8(new gs(c),u,h)}class N_ extends M_{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof N_}}class FE extends M_{_toFieldTransform(t){return new RH(t.path,new Pf)}isEqual(t){return t instanceof FE}}function bk(e,t,n,i){const s=e.ju(1,t,n);BE("Data must be an object, but it was:",s,i);const r=[],a=gs.empty();bl(i,(u,h)=>{const f=zE(t,u,n);h=dn(h);const m=s.Uu(f);if(h instanceof N_)r.push(f);else{const y=_p(h,m);y!=null&&(r.push(f),a.set(f,y))}});const c=new js(r);return new _k(a,c,s.fieldTransforms)}function Tk(e,t,n,i,s,r){const a=e.ju(1,t,n),c=[DT(t,i,n)],u=[s];if(r.length%2!=0)throw new Rt(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<r.length;y+=2)c.push(DT(t,r[y])),u.push(r[y+1]);const h=[],f=gs.empty();for(let y=c.length-1;y>=0;--y)if(!xk(h,c[y])){const v=c[y];let T=u[y];T=dn(T);const E=a.Uu(v);if(T instanceof N_)h.push(v);else{const x=_p(T,E);x!=null&&(h.push(v),f.set(v,x))}}const m=new js(h);return new _k(f,m,a.fieldTransforms)}function L8(e,t,n,i=!1){return _p(n,e.ju(i?4:3,t))}function _p(e,t){if(Ek(e=dn(e)))return BE("Unsupported field value:",t,e),wk(e,t);if(e instanceof M_)return function(i,s){if(!vk(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const c of i){let u=_p(c,s.Ku(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return SH(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=un.fromDate(i);return{timestampValue:wy(s.serializer,r)}}if(i instanceof un){const r=new un(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wy(s.serializer,r)}}if(i instanceof LE)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof nh)return{bytesValue:BO(s.serializer,i._byteString)};if(i instanceof Ki){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:_E(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof VE)return function(a,c){return{mapValue:{fields:{[gO]:{stringValue:yO},[vy]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Wu("VectorValues must only contain numeric values.");return mE(c.serializer,h)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${R_(i)}`)}(e,t)}function wk(e,t){const n={};return uO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bl(e,(i,s)=>{const r=_p(s,t.qu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function Ek(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof un||e instanceof LE||e instanceof nh||e instanceof Ki||e instanceof M_||e instanceof VE)}function BE(e,t,n){if(!Ek(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=R_(n);throw i==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+i)}}function DT(e,t,n){if((t=dn(t))instanceof gp)return t._internalPath;if(typeof t=="string")return zE(e,t);throw Cy("Field path arguments must be of type string or ",e,!1,void 0,n)}const V8=new RegExp("[~\\*/\\[\\]]");function zE(e,t,n){if(t.search(V8)>=0)throw Cy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new gp(...t.split("."))._internalPath}catch{throw Cy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Cy(e,t,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let c=`Function ${t}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new Rt(dt.INVALID_ARGUMENT,c+e+u)}function xk(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new j8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(P_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class j8 extends Sk{data(){return super.data()}}function P_(e,t){return typeof t=="string"?zE(e,t):t instanceof gp?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Rt(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HE{}class Ck extends HE{}function $o(e,t,...n){let i=[];t instanceof HE&&i.push(t),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof qE).length,c=r.filter(u=>u instanceof O_).length;if(a>1||a>0&&c>0)throw new Rt(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class O_ extends Ck{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new O_(t,n,i)}_apply(t){const n=this._parse(t);return Rk(t._query,n),new wl(t.firestore,t.converter,vT(t._query,n))}_parse(t){const n=yp(t.firestore);return function(r,a,c,u,h,f,m){let y;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Rt(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){NI(m,f);const T=[];for(const E of m)T.push(MI(u,r,E));y={arrayValue:{values:T}}}else y=MI(u,r,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||NI(m,f),y=L8(c,a,m,f==="in"||f==="not-in");return Yn.create(h,f,y)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function sc(e,t,n){const i=t,s=P_("where",e);return O_._create(s,i,n)}class qE extends HE{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new qE(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Or.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let a=s;const c=r.getFlattenedFilters();for(const u of c)Rk(a,u),a=vT(a,u)}(t._query,n),new wl(t.firestore,t.converter,vT(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $E extends Ck{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new $E(t,n)}_apply(t){const n=function(s,r,a){if(s.startAt!==null)throw new Rt(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Rt(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nf(r,a)}(t._query,this._field,this._direction);return new wl(t.firestore,t.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new vh(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function Hd(e,t="asc"){const n=t,i=P_("orderBy",e);return $E._create(i,n)}function MI(e,t,n){if(typeof(n=dn(n))=="string"){if(n==="")throw new Rt(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SO(t)&&n.indexOf("/")!==-1)throw new Rt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(_n.fromString(n));if(!Ut.isDocumentKey(i))throw new Rt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return W1(e,new Ut(i))}if(n instanceof Ki)return W1(e,n._key);throw new Rt(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${R_(n)}.`)}function NI(e,t){if(!Array.isArray(e)||e.length===0)throw new Rt(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Rk(e,t){const n=function(s,r){for(const a of s)for(const c of a.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Rt(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Rt(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class U8{convertValue(t,n="none"){switch(ll(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Bn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(al(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Qt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return bl(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var n,i,s;const r=(s=(i=(n=t.fields)===null||n===void 0?void 0:n[vy].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>Bn(a.doubleValue));return new VE(r)}convertGeoPoint(t){return new LE(Bn(t.latitude),Bn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=y_(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(If(t));default:return null}}convertTimestamp(t){const n=ol(t);return new un(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=_n.fromString(t);We(GO(i));const s=new Df(i.get(1),i.get(3)),r=new Ut(i.popFirst(5));return s.isEqual(n)||oa(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ik extends Sk{constructor(t,n,i,s,r,a){super(t,n,i,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new qg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(P_("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class qg extends Ik{data(t={}){return super.data(t)}}class Dk{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new qd(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new qg(this._firestore,this._userDataWriter,i.key,i,new qd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Rt(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new qg(s._firestore,s._userDataWriter,c.doc.key,c.doc,new qd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>r||c.type!==3).map(c=>{const u=new qg(s._firestore,s._userDataWriter,c.doc.key,c.doc,new qd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:F8(c.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function F8(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(e){e=as(e,Ki);const t=as(e.firestore,po);return R8(mp(t),e._key).then(n=>Nk(t,e,n))}class GE extends U8{constructor(t){super(),this.firestore=t}convertBytes(t){return new nh(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ki(this.firestore,null,n)}}function Lf(e){e=as(e,wl);const t=as(e.firestore,po),n=mp(t),i=new GE(t);return Ak(e._query),I8(n,e._query).then(s=>new Dk(t,i,e,s))}function mn(e,t,n){e=as(e,Ki);const i=as(e.firestore,po),s=WE(e.converter,t,n);return bp(i,[UE(yp(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,os.none())])}function Mk(e,t,n,...i){e=as(e,Ki);const s=as(e.firestore,po),r=yp(s);let a;return a=typeof(t=dn(t))=="string"||t instanceof gp?Tk(r,"updateDoc",e._key,t,n,i):bk(r,"updateDoc",e._key,t),bp(s,[a.toMutation(e._key,os.exists(!0))])}function Yo(e){return bp(as(e.firestore,po),[new E_(e._key,os.none())])}function $g(e,t){const n=as(e.firestore,po),i=ce(e),s=WE(e.converter,t);return bp(n,[UE(yp(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,os.exists(!1))]).then(()=>i)}function $d(e,...t){var n,i,s;e=dn(e);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||DI(t[a])||(r=t[a],a++);const c={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(DI(t[a])){const m=t[a];t[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),t[a+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),t[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,h,f;if(e instanceof Ki)h=as(e.firestore,po),f=__(e._key.path),u={next:m=>{t[a]&&t[a](Nk(h,e,m))},error:t[a+1],complete:t[a+2]};else{const m=as(e,wl);h=as(m.firestore,po),f=m._query;const y=new GE(h);u={next:v=>{t[a]&&t[a](new Dk(h,y,m,v))},error:t[a+1],complete:t[a+2]},Ak(e._query)}return function(y,v,T,E){const x=new kE(E),C=new NE(v,x,T);return y.asyncQueue.enqueueAndForget(async()=>IE(await Ay(y),C)),()=>{x.su(),y.asyncQueue.enqueueAndForget(async()=>DE(await Ay(y),C))}}(mp(h),f,c,u)}function bp(e,t){return function(i,s){const r=new Jo;return i.asyncQueue.enqueueAndForget(async()=>g8(await C8(i),s,r)),r.promise}(mp(e),t)}function Nk(e,t,n){const i=n.docs.get(t._key),s=new GE(e);return new Ik(e,s,t._key,i,new qd(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yp(t)}set(t,n,i){this._verifyNotCommitted();const s=cb(t,this._firestore),r=WE(s.converter,n,i),a=UE(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,os.none())),this}update(t,n,i,...s){this._verifyNotCommitted();const r=cb(t,this._firestore);let a;return a=typeof(n=dn(n))=="string"||n instanceof gp?Tk(this._dataReader,"WriteBatch.update",r._key,n,i,s):bk(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(a.toMutation(r._key,os.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=cb(t,this._firestore);return this._mutations=this._mutations.concat(new E_(n._key,os.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rt(dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cb(e,t){if((e=dn(e)).firestore!==t)throw new Rt(dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Ls(){return new FE("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(e){return mp(e=as(e,po)),new B8(e,t=>bp(e,t))}(function(t,n=!0){(function(s){gh=s})(_l),ur(new Bs("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),c=new po(new U9(i.getProvider("auth-internal")),new z9(a,i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Rt(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Df(h.options.projectId,f)}(a,s),a);return r=Object.assign({useFetchStreams:n},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),Yi(O1,k1,t),Yi(O1,k1,"esm2017")})();var H8="firebase",q8="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yi(H8,q8,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="firebasestorage.googleapis.com",$8="storageBucket",W8=2*60*1e3,G8=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends pr{constructor(t,n,i=0){super(ub(t),`Firebase Storage: ${n} (${ub(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,go.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return ub(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mo;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mo||(mo={}));function ub(e){return"storage/"+e}function Y8(){const e="An unknown error occurred, please check the error payload for server response.";return new go(mo.UNKNOWN,e)}function K8(){return new go(mo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function X8(){return new go(mo.CANCELED,"User canceled the upload/download.")}function Q8(e){return new go(mo.INVALID_URL,"Invalid URL '"+e+"'.")}function Z8(e){return new go(mo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function PI(e){return new go(mo.INVALID_ARGUMENT,e)}function Ok(){return new go(mo.APP_DELETED,"The Firebase app was deleted.")}function J8(e){return new go(mo.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Ir.makeFromUrl(t,n)}catch{return new Ir(t,"")}if(i.path==="")return i;throw Z8(t)}static makeFromUrl(t,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function h(q){q.path_=decodeURIComponent(q.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${f}/b/${s}/o${y}`,"i"),T={bucket:1,path:3},E=n===Pk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",C=new RegExp(`^https?://${E}/${s}/${x}`,"i"),N=[{regex:c,indices:u,postModify:r},{regex:v,indices:T,postModify:h},{regex:C,indices:{bucket:1,path:2},postModify:h}];for(let q=0;q<N.length;q++){const F=N[q],G=F.regex.exec(t);if(G){const k=G[F.indices.bucket];let D=G[F.indices.path];D||(D=""),i=new Ir(k,D),F.postModify(i);break}}if(i==null)throw Q8(t);return i}}class t7{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(e,t,n){let i=1,s=null,r=null,a=!1,c=0;function u(){return c===2}let h=!1;function f(...x){h||(h=!0,t.apply(null,x))}function m(x){s=setTimeout(()=>{s=null,e(v,u())},x)}function y(){r&&clearTimeout(r)}function v(x,...C){if(h){y();return}if(x){y(),f.call(null,x,...C);return}if(u()||a){y(),f.call(null,x,...C);return}i<64&&(i*=2);let N;c===1?(c=2,N=0):N=(i+Math.random())*1e3,m(N)}let T=!1;function E(x){T||(T=!0,y(),!h&&(s!==null?(x||(c=2),clearTimeout(s),m(0)):x||(c=1)))}return m(0),r=setTimeout(()=>{a=!0,E(!0)},n),E}function n7(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(e){return e!==void 0}function OI(e,t,n,i){if(i<t)throw PI(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw PI(`Invalid value for '${e}'. Expected ${n} or less.`)}function s7(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const s=t(i)+"="+t(e[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ry;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Ry||(Ry={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r7(e,t){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(t,n,i,s,r,a,c,u,h,f,m,y=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){const t=(i,s)=>{if(s){i(!1,new og(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const a=c=>{const u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&r.addUploadProgressListener(a),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(a),this.pendingConnection_=null;const c=r.getErrorCode()===Ry.NO_ERROR,u=r.getStatus();if(!c||r7(u,this.additionalRetryCodes_)&&this.retry){const f=r.getErrorCode()===Ry.ABORT;i(!1,new og(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;i(!0,new og(h,r))})},n=(i,s)=>{const r=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());i7(u)?r(u):r()}catch(u){a(u)}else if(c!==null){const u=Y8();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?Ok():X8();a(u)}else{const u=K8();a(u)}};this.canceled_?n(!1,new og(!1,null,!0)):this.backoffId_=e7(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&n7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class og{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function a7(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function l7(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function c7(e,t){t&&(e["X-Firebase-GMPID"]=t)}function u7(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function h7(e,t,n,i,s,r,a=!0){const c=s7(e.urlParams),u=e.url+c,h=Object.assign({},e.headers);return c7(h,t),a7(h,n),l7(h,r),u7(h,i),new o7(u,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function f7(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t,n){this._service=t,n instanceof Ir?this._location=n:this._location=Ir.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Iy(t,n)}get root(){const t=new Ir(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return f7(this._location.path)}get storage(){return this._service}get parent(){const t=d7(this._location.path);if(t===null)return null;const n=new Ir(this._location.bucket,t);return new Iy(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw J8(t)}}function kI(e,t){const n=t==null?void 0:t[$8];return n==null?null:Ir.makeFromBucketSpec(n,e)}function p7(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=i;s&&(e._overrideAuthToken=typeof s=="string"?s:Gw(s,e.app.options.projectId))}class m7{constructor(t,n,i,s,r){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=Pk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=W8,this._maxUploadRetryTime=G8,this._requests=new Set,s!=null?this._bucket=Ir.makeFromBucketSpec(s,this._host):this._bucket=kI(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ir.makeFromBucketSpec(this._url,t):this._bucket=kI(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){OI("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){OI("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Iy(this,t)}_makeRequest(t,n,i,s,r=!0){if(this._deleted)return new t7(Ok());{const a=h7(t,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,s).getPromise()}}const LI="@firebase/storage",VI="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="storage";function g7(e=op(),t){e=dn(e);const i=da(e,kk).getImmediate({identifier:t}),s=$w("storage");return s&&y7(i,...s),i}function y7(e,t,n,i={}){p7(e,t,n,i)}function _7(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new m7(n,i,s,t,_l)}function v7(){ur(new Bs(kk,_7,"PUBLIC").setMultipleInstances(!0)),Yi(LI,VI,""),Yi(LI,VI,"esm2017")}v7();var jI={};const UI="@firebase/database",FI="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lk="";function b7(e){Lk=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ai(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:xf(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return ha(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new T7(t)}}catch{}return new w7},oc=Vk("localStorage"),E7=Vk("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new rp("@firebase/database"),x7=function(){let e=1;return function(){return e++}}(),jk=function(e){const t=dz(e),n=new az;n.update(t);const i=n.digest();return qw.encodeByteArray(i)},Tp=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=Tp.apply(null,i):typeof i=="object"?t+=Ai(i):t+=i,t+=" "}return t};let rf=null,BI=!0;const S7=function(e,t){St(!0,"Can't turn on custom loggers persistently."),qu.logLevel=we.VERBOSE,rf=qu.log.bind(qu)},Hi=function(...e){if(BI===!0&&(BI=!1,rf===null&&E7.get("logging_enabled")===!0&&S7()),rf){const t=Tp.apply(null,e);rf(t)}},wp=function(e){return function(...t){Hi(e,...t)}},MT=function(...e){const t="FIREBASE INTERNAL ERROR: "+Tp(...e);qu.error(t)},la=function(...e){const t=`FIREBASE FATAL ERROR: ${Tp(...e)}`;throw qu.error(t),new Error(t)},Us=function(...e){const t="FIREBASE WARNING: "+Tp(...e);qu.warn(t)},A7=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Uk=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},C7=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ih="[MIN_NAME]",bc="[MAX_NAME]",Th=function(e,t){if(e===t)return 0;if(e===ih||t===bc)return-1;if(t===ih||e===bc)return 1;{const n=zI(e),i=zI(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},R7=function(e,t){return e===t?0:e<t?-1:1},Cd=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ai(t))},YE=function(e){if(typeof e!="object"||e===null)return Ai(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=Ai(t[i]),n+=":",n+=YE(e[t[i]]);return n+="}",n},Fk=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function hr(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Bk=function(e){St(!Uk(e),"Invalid JSON number");const t=11,n=52,i=(1<<t-1)-1;let s,r,a,c,u;e===0?(r=0,a=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),i),r=c+i,a=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(r=0,a=Math.round(e/Math.pow(2,1-i-n))));const h=[];for(u=n;u;u-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(u=t;u;u-=1)h.push(r%2?1:0),r=Math.floor(r/2);h.push(s?1:0),h.reverse();const f=h.join("");let m="";for(u=0;u<64;u+=8){let y=parseInt(f.substr(u,8),2).toString(16);y.length===1&&(y="0"+y),m=m+y}return m.toLowerCase()},I7=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},D7=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},M7=new RegExp("^-?(0*)\\d{1,10}$"),N7=-2147483648,P7=2147483647,zI=function(e){if(M7.test(e)){const t=Number(e);if(t>=N7&&t<=P7)return t}return null},Ep=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Us("Exception was thrown by user callback.",n),t},Math.floor(0))}},O7=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},of=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,ms(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Us(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Us(t)}}class Wg{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Wg.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="5",zk="v",Hk="s",qk="r",$k="f",Wk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gk="ls",Yk="p",NT="ac",Kk="websocket",Xk="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(t,n,i,s,r=!1,a="",c=!1,u=!1,h=null){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=h,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=oc.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&oc.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function V7(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function Zk(e,t,n){St(typeof t=="string","typeof type must == string"),St(typeof n=="object","typeof params must == object");let i;if(t===Kk)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===Xk)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);V7(e)&&(n.ns=e.namespace);const s=[];return hr(n,(r,a)=>{s.push(r+"="+a)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(){this.counters_={}}incrementCounter(t,n=1){ha(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return $B(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={},db={};function XE(e){const t=e.toString();return hb[t]||(hb[t]=new j7),hb[t]}function U7(e,t){const n=e.toString();return db[n]||(db[n]=t()),db[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Ep(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="start",B7="close",z7="pLPCommand",H7="pRTLPCB",Jk="id",tL="pw",eL="ser",q7="cb",$7="seg",W7="ts",G7="d",Y7="dframe",nL=1870,iL=30,K7=nL-iL,X7=25e3,Q7=3e4;class Mu{constructor(t,n,i,s,r,a,c){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wp(t),this.stats_=XE(n),this.urlFn=u=>(this.appCheckToken&&(u[NT]=this.appCheckToken),Zk(n,Xk,u))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new F7(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Q7)),C7(()=>{if(this.isClosed_)return;this.scriptTagHolder=new QE((...r)=>{const[a,c,u,h,f]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===HI)this.id=c,this.password=u;else if(a===B7)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...r)=>{const[a,c]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);const i={};i[HI]="t",i[eL]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[q7]=this.scriptTagHolder.uniqueCallbackIdentifier),i[zk]=KE,this.transportSessionId&&(i[Hk]=this.transportSessionId),this.lastSessionId&&(i[Gk]=this.lastSessionId),this.applicationId&&(i[Yk]=this.applicationId),this.appCheckToken&&(i[NT]=this.appCheckToken),typeof location<"u"&&location.hostname&&Wk.test(location.hostname)&&(i[qk]=$k);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mu.forceAllow_=!0}static forceDisallow(){Mu.forceDisallow_=!0}static isAvailable(){return Mu.forceAllow_?!0:!Mu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!I7()&&!D7()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Ai(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=i2(n),s=Fk(i,K7);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[Y7]="t",i[Jk]=t,i[tL]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Ai(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class QE{constructor(t,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=x7(),window[z7+this.uniqueCallbackIdentifier]=t,window[H7+this.uniqueCallbackIdentifier]=n,this.myIFrame=QE.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){Hi("frame writing exception"),c.stack&&Hi(c.stack),Hi(c)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Hi("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Jk]=this.myID,t[tL]=this.myPW,t[eL]=this.currentSerial;let n=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+iL+i.length<=nL;){const a=this.pendingSegs.shift();i=i+"&"+$7+s+"="+a.seg+"&"+W7+s+"="+a.ts+"&"+G7+s+"="+a.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(X7)),r=()=>{clearTimeout(s),i()};this.addTag(t,r)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Hi("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=16384,J7=45e3;let Dy=null;typeof MozWebSocket<"u"?Dy=MozWebSocket:typeof WebSocket<"u"&&(Dy=WebSocket);class Cr{constructor(t,n,i,s,r,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wp(this.connId),this.stats_=XE(n),this.connURL=Cr.connectionURL_(n,a,c,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,i,s,r){const a={};return a[zk]=KE,typeof location<"u"&&location.hostname&&Wk.test(location.hostname)&&(a[qk]=$k),n&&(a[Hk]=n),i&&(a[Gk]=i),s&&(a[NT]=s),r&&(a[Yk]=r),Zk(t,Kk,a)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,oc.set("previous_websocket_failure",!0);try{let i;tz(),this.mySock=new Dy(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Cr.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Dy!==null&&!Cr.forceDisallow_}static previouslyFailed(){return oc.isInMemoryStorage||oc.get("previous_websocket_failure")===!0}markConnectionHealthy(){oc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=xf(n);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(St(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const n=Ai(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Fk(n,Z7);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(J7))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Cr.responsesRequiredToBeHealthy=2;Cr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{static get ALL_TRANSPORTS(){return[Mu,Cr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=Cr&&Cr.isAvailable();let i=n&&!Cr.previouslyFailed();if(t.webSocketOnly&&(n||Us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Cr];else{const s=this.transports_=[];for(const r of Vf.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);Vf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Vf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=6e4,e$=5e3,n$=10*1024,i$=100*1024,fb="t",qI="d",s$="s",$I="r",r$="e",WI="o",GI="a",YI="n",KI="p",o$="h";class a${constructor(t,n,i,s,r,a,c,u,h,f){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=u,this.onKill_=h,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wp("c:"+this.id+":"),this.transportManager_=new Vf(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=of(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>i$?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>n$?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(fb in t){const n=t[fb];n===GI?this.upgradeIfSecondaryHealthy_():n===$I?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===WI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Cd("t",t),i=Cd("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:KI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:GI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:YI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Cd("t",t),i=Cd("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Cd(fb,t);if(qI in t){const i=t[qI];if(n===o$){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===YI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===s$?this.onConnectionShutdown_(i):n===$I?this.onReset_(i):n===r$?MT("Server Error: "+i):n===WI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):MT("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),KE!==i&&Us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),of(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(t$))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):of(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(e$))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:KI,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(oc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{put(t,n,i,s){}merge(t,n,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(t){this.allowedEvents_=t,this.listeners_={},St(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});const s=this.getInitialEvent(t);s&&n.apply(i,s)}off(t,n,i){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(t){St(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My extends rL{static getInstance(){return new My}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Yw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return St(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=32,QI=768;class vn{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function on(){return new vn("")}function Ne(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function hl(e){return e.pieces_.length-e.pieceNum_}function yn(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new vn(e.pieces_,t)}function oL(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function l$(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function aL(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function lL(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new vn(t,0)}function _i(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof vn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new vn(n,0)}function Ce(e){return e.pieceNum_>=e.pieces_.length}function ar(e,t){const n=Ne(e),i=Ne(t);if(n===null)return t;if(n===i)return ar(yn(e),yn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function cL(e,t){if(hl(e)!==hl(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Dr(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(hl(e)>hl(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class c${constructor(t,n){this.errorPrefix_=n,this.parts_=aL(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=h_(this.parts_[i]);uL(this)}}function u$(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=h_(t),uL(e)}function h$(e){const t=e.parts_.pop();e.byteLength_-=h_(t),e.parts_.length>0&&(e.byteLength_-=1)}function uL(e){if(e.byteLength_>QI)throw new Error(e.errorPrefix_+"has a key path longer than "+QI+" bytes ("+e.byteLength_+").");if(e.parts_.length>XI)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+XI+") or object contains a cycle "+tc(e))}function tc(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE extends rL{static getInstance(){return new ZE}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return St(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=1e3,d$=60*5*1e3,ZI=30*1e3,f$=1.3,p$=3e4,m$="server_kill",JI=3;class ta extends sL{constructor(t,n,i,s,r,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=ta.nextPersistentConnectionId_++,this.log_=wp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rd,this.maxReconnectDelay_=d$,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ZE.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&My.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,i){const s=++this.requestNumber_,r={r:s,a:t,b:n};this.log_(Ai(r)),St(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const n=new Ww,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const c=a.d;a.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(t,n,i,s){this.initConnection_();const r=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+r),this.listens.has(a)||this.listens.set(a,new Map),St(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),St(!this.listens.get(a).has(r),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:t,tag:i};this.listens.get(a).set(r,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(t){const n=t.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},a="q";t.tag&&(r.q=n._queryObject,r.t=t.tag),r.h=t.hashFn(),this.sendRequest(a,r,c=>{const u=c.d,h=c.s;ta.warnOnListenWarnings_(u,n),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),h!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(h,u))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&ha(t,"w")){const i=Ku(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();Us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||oz(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ZI)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=rz(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,a=s.d||"error";this.authToken_===t&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,i=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(t,n){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),St(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,n)}sendUnlisten_(t,n,i,s){this.log_("Unlisten on "+t+" for "+n);const r={p:t},a="n";s&&(r.q=i,r.t=s),this.sendRequest(a,r)}onDisconnectPut(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:i})}onDisconnectMerge(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:i})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,n,i,s){this.putInternal("p",t,n,i,s)}merge(t,n,i,s){this.putInternal("m",t,n,i,s)}putInternal(t,n,i,s,r){this.initConnection_();const a={p:n,d:i};r!==void 0&&(a.h=r),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ai(t));const n=t.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):MT("Unrecognized action received from server: "+Ai(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){St(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>p$&&(this.reconnectDelay_=Rd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*f$)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+ta.nextConnectionId_++,r=this.lastSessionId;let a=!1,c=null;const u=function(){c?c.close():(a=!0,i())},h=function(m){St(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:u,sendRequest:h};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,y]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,c=new a$(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,i,v=>{Us(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(m$)},r))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Us(m),u())}}}interrupt(t){Hi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Hi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],iT(this.interruptReasons_)&&(this.reconnectDelay_=Rd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let i;n?i=n.map(r=>YE(r)).join("$"):i="default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,n){const i=new vn(t).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,n){Hi("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=JI&&(this.reconnectDelay_=ZI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){Hi("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=JI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+Lk.replace(/\./g,"-")]=1,Yw()?t["framework.cordova"]=1:l2()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=My.getInstance().currentlyOnline();return iT(this.interruptReasons_)&&t}}ta.nextPersistentConnectionId_=0;ta.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Pe(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const i=new Pe(ih,t),s=new Pe(ih,n);return this.compare(i,s)!==0}minPost(){return Pe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag;class hL extends k_{static get __EMPTY_NODE(){return ag}static set __EMPTY_NODE(t){ag=t}compare(t,n){return Th(t.name,n.name)}isDefinedOn(t){throw fh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Pe.MIN}maxPost(){return new Pe(bc,ag)}makePost(t,n){return St(typeof t=="string","KeyIndex indexValue must always be a string."),new Pe(t,ag)}toString(){return".key"}}const $u=new hL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let a=1;for(;!t.isEmpty();)if(t=t,a=n?i(t.key,n):1,s&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class mi{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??mi.RED,this.left=s??_s.EMPTY_NODE,this.right=r??_s.EMPTY_NODE}copy(t,n,i,s,r){return new mi(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return _s.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let i,s;if(i=this,n(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(t,i.key)===0){if(i.right.isEmpty())return _s.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}mi.RED=!0;mi.BLACK=!1;class g${copy(t,n,i,s,r){return this}insert(t,n,i){return new mi(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class _s{constructor(t,n=_s.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new _s(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,mi.BLACK,null,null))}remove(t){return new _s(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,mi.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new lg(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new lg(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new lg(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new lg(this.root_,null,this.comparator_,!0,t)}}_s.EMPTY_NODE=new g$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y$(e,t){return Th(e.name,t.name)}function JE(e,t){return Th(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PT;function _$(e){PT=e}const dL=function(e){return typeof e=="number"?"number:"+Bk(e):"string:"+e},fL=function(e){if(e.isLeafNode()){const t=e.val();St(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ha(t,".sv"),"Priority must be a string or number.")}else St(e===PT||e.isEmpty(),"priority of unexpected type.");St(e===PT||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tD;class fi{static set __childrenNodeConstructor(t){tD=t}static get __childrenNodeConstructor(){return tD}constructor(t,n=fi.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,St(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fL(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new fi(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:fi.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ce(t)?this:Ne(t)===".priority"?this.priorityNode_:fi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:fi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const i=Ne(t);return i===null?n:n.isEmpty()&&i!==".priority"?this:(St(i!==".priority"||hl(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,fi.__childrenNodeConstructor.EMPTY_NODE.updateChild(yn(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dL(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=Bk(this.value_):t+=this.value_,this.lazyHash_=jk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===fi.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof fi.__childrenNodeConstructor?-1:(St(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,i=typeof this.value_,s=fi.VALUE_TYPE_ORDER.indexOf(n),r=fi.VALUE_TYPE_ORDER.indexOf(i);return St(s>=0,"Unknown leaf type: "+n),St(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}fi.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pL,mL;function v$(e){pL=e}function b$(e){mL=e}class T$ extends k_{compare(t,n){const i=t.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?Th(t.name,n.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Pe.MIN}maxPost(){return new Pe(bc,new fi("[PRIORITY-POST]",mL))}makePost(t,n){const i=pL(t);return new Pe(n,new fi("[PRIORITY-POST]",i))}toString(){return".priority"}}const $i=new T$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$=Math.log(2);class E${constructor(t){const n=r=>parseInt(Math.log(r)/w$,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Ny=function(e,t,n,i){e.sort(t);const s=function(u,h){const f=h-u;let m,y;if(f===0)return null;if(f===1)return m=e[u],y=n?n(m):m,new mi(y,m.node,mi.BLACK,null,null);{const v=parseInt(f/2,10)+u,T=s(u,v),E=s(v+1,h);return m=e[v],y=n?n(m):m,new mi(y,m.node,mi.BLACK,T,E)}},r=function(u){let h=null,f=null,m=e.length;const y=function(T,E){const x=m-T,C=m;m-=T;const P=s(x+1,C),N=e[x],q=n?n(N):N;v(new mi(q,N.node,E,null,P))},v=function(T){h?(h.left=T,h=T):(f=T,h=T)};for(let T=0;T<u.count;++T){const E=u.nextBitIsOne(),x=Math.pow(2,u.count-(T+1));E?y(x,mi.BLACK):(y(x,mi.BLACK),y(x,mi.RED))}return f},a=new E$(e.length),c=r(a);return new _s(i||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pb;const wu={};class Ko{static get Default(){return St(wu&&$i,"ChildrenNode.ts has not been loaded"),pb=pb||new Ko({".priority":wu},{".priority":$i}),pb}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=Ku(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof _s?n:null}hasIndex(t){return ha(this.indexSet_,t.toString())}addIndex(t,n){St(t!==$u,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(Pe.Wrap);let a=r.getNext();for(;a;)s=s||t.isDefinedOn(a.node),i.push(a),a=r.getNext();let c;s?c=Ny(i,t.getCompare()):c=wu;const u=t.toString(),h=Object.assign({},this.indexSet_);h[u]=t;const f=Object.assign({},this.indexes_);return f[u]=c,new Ko(f,h)}addToIndexes(t,n){const i=ay(this.indexes_,(s,r)=>{const a=Ku(this.indexSet_,r);if(St(a,"Missing index implementation for "+r),s===wu)if(a.isDefinedOn(t.node)){const c=[],u=n.getIterator(Pe.Wrap);let h=u.getNext();for(;h;)h.name!==t.name&&c.push(h),h=u.getNext();return c.push(t),Ny(c,a.getCompare())}else return wu;else{const c=n.get(t.name);let u=s;return c&&(u=u.remove(new Pe(t.name,c))),u.insert(t,t.node)}});return new Ko(i,this.indexSet_)}removeFromIndexes(t,n){const i=ay(this.indexes_,s=>{if(s===wu)return s;{const r=n.get(t.name);return r?s.remove(new Pe(t.name,r)):s}});return new Ko(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id;class qe{static get EMPTY_NODE(){return Id||(Id=new qe(new _s(JE),null,Ko.Default))}constructor(t,n,i){this.children_=t,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&fL(this.priorityNode_),this.children_.isEmpty()&&St(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Id}updatePriority(t){return this.children_.isEmpty()?this:new qe(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?Id:n}}getChild(t){const n=Ne(t);return n===null?this:this.getImmediateChild(n).getChild(yn(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(St(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const i=new Pe(t,n);let s,r;n.isEmpty()?(s=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,n),r=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Id:this.priorityNode_;return new qe(s,a,r)}}updateChild(t,n){const i=Ne(t);if(i===null)return n;{St(Ne(t)!==".priority"||hl(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(yn(t),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild($i,(a,c)=>{n[a]=c.val(t),i++,r&&qe.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):r=!1}),!t&&r&&s<2*i){const a=[];for(const c in n)a[c]=n[c];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+dL(this.getPriority().val())+":"),this.forEachChild($i,(n,i)=>{const s=i.hash();s!==""&&(t+=":"+n+":"+s)}),this.lazyHash_=t===""?"":jk(t)}return this.lazyHash_}getPredecessorChildName(t,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new Pe(t,n));return r?r.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Pe(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Pe(n,this.children_.get(n)):null}forEachChild(t,n){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Pe.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Pe.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,t)>0;)s.getNext(),r=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===xp?-1:0}withIndex(t){if(t===$u||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new qe(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===$u||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator($i),s=n.getIterator($i);let r=i.getNext(),a=s.getNext();for(;r&&a;){if(r.name!==a.name||!r.node.equals(a.node))return!1;r=i.getNext(),a=s.getNext()}return r===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===$u?null:this.indexMap_.get(t.toString())}}qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class x$ extends qe{constructor(){super(new _s(JE),qe.EMPTY_NODE,Ko.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return qe.EMPTY_NODE}isEmpty(){return!1}}const xp=new x$;Object.defineProperties(Pe,{MIN:{value:new Pe(ih,qe.EMPTY_NODE)},MAX:{value:new Pe(bc,xp)}});hL.__EMPTY_NODE=qe.EMPTY_NODE;fi.__childrenNodeConstructor=qe;_$(xp);b$(xp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$=!0;function qi(e,t=null){if(e===null)return qe.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),St(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new fi(n,qi(t))}if(!(e instanceof Array)&&S$){const n=[];let i=!1;if(hr(e,(a,c)=>{if(a.substring(0,1)!=="."){const u=qi(c);u.isEmpty()||(i=i||!u.getPriority().isEmpty(),n.push(new Pe(a,u)))}}),n.length===0)return qe.EMPTY_NODE;const r=Ny(n,y$,a=>a.name,JE);if(i){const a=Ny(n,$i.getCompare());return new qe(r,qi(t),new Ko({".priority":a},{".priority":$i}))}else return new qe(r,qi(t),Ko.Default)}else{let n=qe.EMPTY_NODE;return hr(e,(i,s)=>{if(ha(e,i)&&i.substring(0,1)!=="."){const r=qi(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(qi(t))}}v$(qi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A$ extends k_{constructor(t){super(),this.indexPath_=t,St(!Ce(t)&&Ne(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const i=this.extractChild(t.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?Th(t.name,n.name):r}makePost(t,n){const i=qi(t),s=qe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Pe(n,s)}maxPost(){const t=qe.EMPTY_NODE.updateChild(this.indexPath_,xp);return new Pe(bc,t)}toString(){return aL(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C$ extends k_{compare(t,n){const i=t.node.compareTo(n.node);return i===0?Th(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Pe.MIN}maxPost(){return Pe.MAX}makePost(t,n){const i=qi(t);return new Pe(n,i)}toString(){return".value"}}const R$=new C$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(e){return{type:"value",snapshotNode:e}}function D$(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function M$(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function eD(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function N$(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$i}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return St(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return St(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ih}hasEnd(){return this.endSet_}getIndexEndValue(){return St(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return St(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return St(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$i}copy(){const t=new tx;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function nD(e){const t={};if(e.isDefault())return t;let n;if(e.index_===$i?n="$priority":e.index_===R$?n="$value":e.index_===$u?n="$key":(St(e.index_ instanceof A$,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ai(n),e.startSet_){const i=e.startAfterSet_?"startAfter":"startAt";t[i]=Ai(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+Ai(e.indexStartName_))}if(e.endSet_){const i=e.endBeforeSet_?"endBefore":"endAt";t[i]=Ai(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+Ai(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function iD(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==$i&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py extends sL{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(St(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=wp("p:rest:"),this.listens_={}}listen(t,n,i,s){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const a=Py.getListenId_(t,i),c={};this.listens_[a]=c;const u=nD(t._queryParams);this.restRequest_(r+".json",u,(h,f)=>{let m=f;if(h===404&&(m=null,h=null),h===null&&this.onDataUpdate_(r,m,!1,i),Ku(this.listens_,a)===c){let y;h?h===401?y="permission_denied":y="rest_error:"+h:y="ok",s(y,null)}})}unlisten(t,n){const i=Py.getListenId_(t,n);delete this.listens_[i]}get(t){const n=nD(t._queryParams),i=t._path.toString(),s=new Ww;return this.restRequest_(i+".json",n,(r,a)=>{let c=a;r===404&&(c=null,r=null),r===null?(this.onDataUpdate_(i,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+ph(n);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&c.readyState===4){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=xf(c.responseText)}catch{Us("Failed to parse JSON response for "+a+": "+c.responseText)}i(null,u)}else c.status!==401&&c.status!==404&&Us("Got unsuccessful REST response for "+a+" Status: "+c.status),i(c.status);i=null}},c.open("GET",a,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(){this.rootNode_=qe.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(){return{value:null,children:new Map}}function gL(e,t,n){if(Ce(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const i=Ne(t);e.children.has(i)||e.children.set(i,Oy());const s=e.children.get(i);t=yn(t),gL(s,t,n)}}function OT(e,t,n){e.value!==null?n(t,e.value):O$(e,(i,s)=>{const r=new vn(t.toString()+"/"+i);OT(s,r,n)})}function O$(e,t){e.children.forEach((n,i)=>{t(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&hr(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=10*1e3,L$=30*1e3,V$=5*60*1e3;class j${constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new k$(t);const i=sD+(L$-sD)*Math.random();of(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),n={};let i=!1;hr(t,(s,r)=>{r>0&&ha(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),of(this.reportStats_.bind(this),Math.floor(Math.random()*2*V$))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var io;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(io||(io={}));function yL(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _L(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vL(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=io.ACK_USER_WRITE,this.source=yL()}operationForChild(t){if(Ce(this.path)){if(this.affectedTree.value!=null)return St(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new vn(t));return new ky(on(),n,this.revert)}}else return St(Ne(this.path)===t,"operationForChild called for unrelated child."),new ky(yn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=io.OVERWRITE}operationForChild(t){return Ce(this.path)?new Tc(this.source,on(),this.snap.getImmediateChild(t)):new Tc(this.source,yn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=io.MERGE}operationForChild(t){if(Ce(this.path)){const n=this.children.subtree(new vn(t));return n.isEmpty()?null:n.value?new Tc(this.source,on(),n.value):new jf(this.source,on(),n)}else return St(Ne(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new jf(this.source,yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Ce(t))return this.isFullyInitialized()&&!this.filtered_;const n=Ne(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function U$(e,t,n,i){const s=[],r=[];return t.forEach(a=>{a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&r.push(N$(a.childName,a.snapshotNode))}),Dd(e,s,"child_removed",t,i,n),Dd(e,s,"child_added",t,i,n),Dd(e,s,"child_moved",r,i,n),Dd(e,s,"child_changed",t,i,n),Dd(e,s,"value",t,i,n),s}function Dd(e,t,n,i,s,r){const a=i.filter(c=>c.type===n);a.sort((c,u)=>B$(e,c,u)),a.forEach(c=>{const u=F$(e,c,r);s.forEach(h=>{h.respondsTo(c.type)&&t.push(h.createEvent(u,e.query_))})})}function F$(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function B$(e,t,n){if(t.childName==null||n.childName==null)throw fh("Should only compare child_ events.");const i=new Pe(t.childName,t.snapshotNode),s=new Pe(n.childName,n.snapshotNode);return e.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(e,t){return{eventCache:e,serverCache:t}}function af(e,t,n,i){return bL(new ex(t,n,i),e.serverCache)}function TL(e,t,n,i){return bL(e.eventCache,new ex(t,n,i))}function kT(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function wc(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mb;const z$=()=>(mb||(mb=new _s(R7)),mb);class gn{static fromObject(t){let n=new gn(null);return hr(t,(i,s)=>{n=n.set(new vn(i),s)}),n}constructor(t,n=z$()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:on(),value:this.value};if(Ce(t))return null;{const i=Ne(t),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(yn(t),n);return r!=null?{path:_i(new vn(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Ce(t))return this;{const n=Ne(t),i=this.children.get(n);return i!==null?i.subtree(yn(t)):new gn(null)}}set(t,n){if(Ce(t))return new gn(n,this.children);{const i=Ne(t),r=(this.children.get(i)||new gn(null)).set(yn(t),n),a=this.children.insert(i,r);return new gn(this.value,a)}}remove(t){if(Ce(t))return this.children.isEmpty()?new gn(null):new gn(null,this.children);{const n=Ne(t),i=this.children.get(n);if(i){const s=i.remove(yn(t));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new gn(null):new gn(this.value,r)}else return this}}get(t){if(Ce(t))return this.value;{const n=Ne(t),i=this.children.get(n);return i?i.get(yn(t)):null}}setTree(t,n){if(Ce(t))return n;{const i=Ne(t),r=(this.children.get(i)||new gn(null)).setTree(yn(t),n);let a;return r.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,r),new gn(this.value,a)}}fold(t){return this.fold_(on(),t)}fold_(t,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(_i(t,s),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,on(),n)}findOnPath_(t,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(Ce(t))return null;{const r=Ne(t),a=this.children.get(r);return a?a.findOnPath_(yn(t),_i(n,r),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,on(),n)}foreachOnPath_(t,n,i){if(Ce(t))return this;{this.value&&i(n,this.value);const s=Ne(t),r=this.children.get(s);return r?r.foreachOnPath_(yn(t),_i(n,s),i):new gn(null)}}foreach(t){this.foreach_(on(),t)}foreach_(t,n){this.children.inorderTraversal((i,s)=>{s.foreach_(_i(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t){this.writeTree_=t}static empty(){return new Mr(new gn(null))}}function lf(e,t,n){if(Ce(t))return new Mr(new gn(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){const s=i.path;let r=i.value;const a=ar(s,t);return r=r.updateChild(a,n),new Mr(e.writeTree_.set(s,r))}else{const s=new gn(n),r=e.writeTree_.setTree(t,s);return new Mr(r)}}}function rD(e,t,n){let i=e;return hr(n,(s,r)=>{i=lf(i,_i(t,s),r)}),i}function oD(e,t){if(Ce(t))return Mr.empty();{const n=e.writeTree_.setTree(t,new gn(null));return new Mr(n)}}function LT(e,t){return Nc(e,t)!=null}function Nc(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(ar(n.path,t)):null}function aD(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild($i,(i,s)=>{t.push(new Pe(i,s))}):e.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new Pe(i,s.value))}),t}function il(e,t){if(Ce(t))return e;{const n=Nc(e,t);return n!=null?new Mr(new gn(n)):new Mr(e.writeTree_.subtree(t))}}function VT(e){return e.writeTree_.isEmpty()}function sh(e,t){return wL(on(),e.writeTree_,t)}function wL(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((s,r)=>{s===".priority"?(St(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=wL(_i(e,s),r,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(_i(e,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(e,t){return RL(t,e)}function H$(e,t,n,i,s){St(i>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=lf(e.visibleWrites,t,n)),e.lastWriteId=i}function q$(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}function $$(e,t){const n=e.allWrites.findIndex(c=>c.writeId===t);St(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,r=!1,a=e.allWrites.length-1;for(;s&&a>=0;){const c=e.allWrites[a];c.visible&&(a>=n&&W$(c,i.path)?s=!1:Dr(i.path,c.path)&&(r=!0)),a--}if(s){if(r)return G$(e),!0;if(i.snap)e.visibleWrites=oD(e.visibleWrites,i.path);else{const c=i.children;hr(c,u=>{e.visibleWrites=oD(e.visibleWrites,_i(i.path,u))})}return!0}else return!1}function W$(e,t){if(e.snap)return Dr(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Dr(_i(e.path,n),t))return!0;return!1}function G$(e){e.visibleWrites=xL(e.allWrites,Y$,on()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Y$(e){return e.visible}function xL(e,t,n){let i=Mr.empty();for(let s=0;s<e.length;++s){const r=e[s];if(t(r)){const a=r.path;let c;if(r.snap)Dr(n,a)?(c=ar(n,a),i=lf(i,c,r.snap)):Dr(a,n)&&(c=ar(a,n),i=lf(i,on(),r.snap.getChild(c)));else if(r.children){if(Dr(n,a))c=ar(n,a),i=rD(i,c,r.children);else if(Dr(a,n))if(c=ar(a,n),Ce(c))i=rD(i,on(),r.children);else{const u=Ku(r.children,Ne(c));if(u){const h=u.getChild(yn(c));i=lf(i,on(),h)}}}else throw fh("WriteRecord should have .snap or .children")}}return i}function SL(e,t,n,i,s){if(!i&&!s){const r=Nc(e.visibleWrites,t);if(r!=null)return r;{const a=il(e.visibleWrites,t);if(VT(a))return n;if(n==null&&!LT(a,on()))return null;{const c=n||qe.EMPTY_NODE;return sh(a,c)}}}else{const r=il(e.visibleWrites,t);if(!s&&VT(r))return n;if(!s&&n==null&&!LT(r,on()))return null;{const a=function(h){return(h.visible||s)&&(!i||!~i.indexOf(h.writeId))&&(Dr(h.path,t)||Dr(t,h.path))},c=xL(e.allWrites,a,t),u=n||qe.EMPTY_NODE;return sh(c,u)}}}function K$(e,t,n){let i=qe.EMPTY_NODE;const s=Nc(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild($i,(r,a)=>{i=i.updateImmediateChild(r,a)}),i;if(n){const r=il(e.visibleWrites,t);return n.forEachChild($i,(a,c)=>{const u=sh(il(r,new vn(a)),c);i=i.updateImmediateChild(a,u)}),aD(r).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{const r=il(e.visibleWrites,t);return aD(r).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function X$(e,t,n,i,s){St(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=_i(t,n);if(LT(e.visibleWrites,r))return null;{const a=il(e.visibleWrites,r);return VT(a)?s.getChild(n):sh(a,s.getChild(n))}}function Q$(e,t,n,i){const s=_i(t,n),r=Nc(e.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const a=il(e.visibleWrites,s);return sh(a,i.getNode().getImmediateChild(n))}else return null}function Z$(e,t){return Nc(e.visibleWrites,t)}function J$(e,t,n,i,s,r,a){let c;const u=il(e.visibleWrites,t),h=Nc(u,on());if(h!=null)c=h;else if(n!=null)c=sh(u,n);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){const f=[],m=a.getCompare(),y=r?c.getReverseIteratorFrom(i,a):c.getIteratorFrom(i,a);let v=y.getNext();for(;v&&f.length<s;)m(v,i)!==0&&f.push(v),v=y.getNext();return f}else return[]}function tW(){return{visibleWrites:Mr.empty(),allWrites:[],lastWriteId:-1}}function jT(e,t,n,i){return SL(e.writeTree,e.treePath,t,n,i)}function AL(e,t){return K$(e.writeTree,e.treePath,t)}function lD(e,t,n,i){return X$(e.writeTree,e.treePath,t,n,i)}function Ly(e,t){return Z$(e.writeTree,_i(e.treePath,t))}function eW(e,t,n,i,s,r){return J$(e.writeTree,e.treePath,t,n,i,s,r)}function nx(e,t,n){return Q$(e.writeTree,e.treePath,t,n)}function CL(e,t){return RL(_i(e.treePath,t),e.writeTree)}function RL(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,i=t.childName;St(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),St(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,eD(i,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,M$(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,D$(i,t.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,eD(i,t.snapshotNode,s.oldSnap));else throw fh("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}}const IL=new iW;class ix{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new ex(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nx(this.writes_,t,i)}}getChildAfterChild(t,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:wc(this.viewCache_),r=eW(this.writes_,s,n,1,i,t);return r.length===0?null:r[0]}}function sW(e,t){St(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),St(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function rW(e,t,n,i,s){const r=new nW;let a,c;if(n.type===io.OVERWRITE){const h=n;h.source.fromUser?a=UT(e,t,h.path,h.snap,i,s,r):(St(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.serverCache.isFiltered()&&!Ce(h.path),a=Vy(e,t,h.path,h.snap,i,s,c,r))}else if(n.type===io.MERGE){const h=n;h.source.fromUser?a=aW(e,t,h.path,h.children,i,s,r):(St(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.serverCache.isFiltered(),a=FT(e,t,h.path,h.children,i,s,c,r))}else if(n.type===io.ACK_USER_WRITE){const h=n;h.revert?a=uW(e,t,h.path,i,s,r):a=lW(e,t,h.path,h.affectedTree,i,s,r)}else if(n.type===io.LISTEN_COMPLETE)a=cW(e,t,n.path,i,r);else throw fh("Unknown operation type: "+n.type);const u=r.getChanges();return oW(t,a,u),{viewCache:a,changes:u}}function oW(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=kT(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(I$(kT(t)))}}function DL(e,t,n,i,s,r){const a=t.eventCache;if(Ly(i,n)!=null)return t;{let c,u;if(Ce(n))if(St(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const h=wc(t),f=h instanceof qe?h:qe.EMPTY_NODE,m=AL(i,f);c=e.filter.updateFullNode(t.eventCache.getNode(),m,r)}else{const h=jT(i,wc(t));c=e.filter.updateFullNode(t.eventCache.getNode(),h,r)}else{const h=Ne(n);if(h===".priority"){St(hl(n)===1,"Can't have a priority with additional path components");const f=a.getNode();u=t.serverCache.getNode();const m=lD(i,n,f,u);m!=null?c=e.filter.updatePriority(f,m):c=a.getNode()}else{const f=yn(n);let m;if(a.isCompleteForChild(h)){u=t.serverCache.getNode();const y=lD(i,n,a.getNode(),u);y!=null?m=a.getNode().getImmediateChild(h).updateChild(f,y):m=a.getNode().getImmediateChild(h)}else m=nx(i,h,t.serverCache);m!=null?c=e.filter.updateChild(a.getNode(),h,m,f,s,r):c=a.getNode()}}return af(t,c,a.isFullyInitialized()||Ce(n),e.filter.filtersNodes())}}function Vy(e,t,n,i,s,r,a,c){const u=t.serverCache;let h;const f=a?e.filter:e.filter.getIndexedFilter();if(Ce(n))h=f.updateFullNode(u.getNode(),i,null);else if(f.filtersNodes()&&!u.isFiltered()){const v=u.getNode().updateChild(n,i);h=f.updateFullNode(u.getNode(),v,null)}else{const v=Ne(n);if(!u.isCompleteForPath(n)&&hl(n)>1)return t;const T=yn(n),x=u.getNode().getImmediateChild(v).updateChild(T,i);v===".priority"?h=f.updatePriority(u.getNode(),x):h=f.updateChild(u.getNode(),v,x,T,IL,null)}const m=TL(t,h,u.isFullyInitialized()||Ce(n),f.filtersNodes()),y=new ix(s,m,r);return DL(e,m,n,s,y,c)}function UT(e,t,n,i,s,r,a){const c=t.eventCache;let u,h;const f=new ix(s,t,r);if(Ce(n))h=e.filter.updateFullNode(t.eventCache.getNode(),i,a),u=af(t,h,!0,e.filter.filtersNodes());else{const m=Ne(n);if(m===".priority")h=e.filter.updatePriority(t.eventCache.getNode(),i),u=af(t,h,c.isFullyInitialized(),c.isFiltered());else{const y=yn(n),v=c.getNode().getImmediateChild(m);let T;if(Ce(y))T=i;else{const E=f.getCompleteChild(m);E!=null?oL(y)===".priority"&&E.getChild(lL(y)).isEmpty()?T=E:T=E.updateChild(y,i):T=qe.EMPTY_NODE}if(v.equals(T))u=t;else{const E=e.filter.updateChild(c.getNode(),m,T,y,f,a);u=af(t,E,c.isFullyInitialized(),e.filter.filtersNodes())}}}return u}function cD(e,t){return e.eventCache.isCompleteForChild(t)}function aW(e,t,n,i,s,r,a){let c=t;return i.foreach((u,h)=>{const f=_i(n,u);cD(t,Ne(f))&&(c=UT(e,c,f,h,s,r,a))}),i.foreach((u,h)=>{const f=_i(n,u);cD(t,Ne(f))||(c=UT(e,c,f,h,s,r,a))}),c}function uD(e,t,n){return n.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function FT(e,t,n,i,s,r,a,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let u=t,h;Ce(n)?h=i:h=new gn(null).setTree(n,i);const f=t.serverCache.getNode();return h.children.inorderTraversal((m,y)=>{if(f.hasChild(m)){const v=t.serverCache.getNode().getImmediateChild(m),T=uD(e,v,y);u=Vy(e,u,new vn(m),T,s,r,a,c)}}),h.children.inorderTraversal((m,y)=>{const v=!t.serverCache.isCompleteForChild(m)&&y.value===null;if(!f.hasChild(m)&&!v){const T=t.serverCache.getNode().getImmediateChild(m),E=uD(e,T,y);u=Vy(e,u,new vn(m),E,s,r,a,c)}}),u}function lW(e,t,n,i,s,r,a){if(Ly(s,n)!=null)return t;const c=t.serverCache.isFiltered(),u=t.serverCache;if(i.value!=null){if(Ce(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Vy(e,t,n,u.getNode().getChild(n),s,r,c,a);if(Ce(n)){let h=new gn(null);return u.getNode().forEachChild($u,(f,m)=>{h=h.set(new vn(f),m)}),FT(e,t,n,h,s,r,c,a)}else return t}else{let h=new gn(null);return i.foreach((f,m)=>{const y=_i(n,f);u.isCompleteForPath(y)&&(h=h.set(f,u.getNode().getChild(y)))}),FT(e,t,n,h,s,r,c,a)}}function cW(e,t,n,i,s){const r=t.serverCache,a=TL(t,r.getNode(),r.isFullyInitialized()||Ce(n),r.isFiltered());return DL(e,a,n,i,IL,s)}function uW(e,t,n,i,s,r){let a;if(Ly(i,n)!=null)return t;{const c=new ix(i,t,s),u=t.eventCache.getNode();let h;if(Ce(n)||Ne(n)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=jT(i,wc(t));else{const m=t.serverCache.getNode();St(m instanceof qe,"serverChildren would be complete if leaf node"),f=AL(i,m)}f=f,h=e.filter.updateFullNode(u,f,r)}else{const f=Ne(n);let m=nx(i,f,t.serverCache);m==null&&t.serverCache.isCompleteForChild(f)&&(m=u.getImmediateChild(f)),m!=null?h=e.filter.updateChild(u,f,m,yn(n),c,r):t.eventCache.getNode().hasChild(f)?h=e.filter.updateChild(u,f,qe.EMPTY_NODE,yn(n),c,r):h=u,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=jT(i,wc(t)),a.isLeafNode()&&(h=e.filter.updateFullNode(h,a,r)))}return a=t.serverCache.isFullyInitialized()||Ly(i,on())!=null,af(t,h,a,e.filter.filtersNodes())}}function hW(e,t){const n=wc(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ce(t)&&!n.getImmediateChild(Ne(t)).isEmpty())?n.getChild(t):null}function hD(e,t,n,i){t.type===io.MERGE&&t.source.queryId!==null&&(St(wc(e.viewCache_),"We should always have a full cache before handling merges"),St(kT(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,r=rW(e.processor_,s,t,n,i);return sW(e.processor_,r.viewCache),St(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,dW(e,r.changes,r.viewCache.eventCache.getNode())}function dW(e,t,n,i){const s=e.eventRegistrations_;return U$(e.eventGenerator_,t,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dD;function fW(e){St(!dD,"__referenceConstructor has already been defined"),dD=e}function sx(e,t,n,i){const s=t.source.queryId;if(s!==null){const r=e.views.get(s);return St(r!=null,"SyncTree gave us an op for an invalid query."),hD(r,t,n,i)}else{let r=[];for(const a of e.views.values())r=r.concat(hD(a,t,n,i));return r}}function rx(e,t){let n=null;for(const i of e.views.values())n=n||hW(i,t);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fD;function pW(e){St(!fD,"__referenceConstructor has already been defined"),fD=e}class pD{constructor(t){this.listenProvider_=t,this.syncPointTree_=new gn(null),this.pendingWriteTree_=tW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mW(e,t,n,i,s){return H$(e.pendingWriteTree_,t,n,i,s),s?V_(e,new Tc(yL(),t,n)):[]}function Nu(e,t,n=!1){const i=q$(e.pendingWriteTree_,t);if($$(e.pendingWriteTree_,t)){let r=new gn(null);return i.snap!=null?r=r.set(on(),!0):hr(i.children,a=>{r=r.set(new vn(a),!0)}),V_(e,new ky(i.path,r,n))}else return[]}function L_(e,t,n){return V_(e,new Tc(_L(),t,n))}function gW(e,t,n){const i=gn.fromObject(n);return V_(e,new jf(_L(),t,i))}function yW(e,t,n,i){const s=OL(e,i);if(s!=null){const r=kL(s),a=r.path,c=r.queryId,u=ar(a,t),h=new Tc(vL(c),u,n);return LL(e,a,h)}else return[]}function _W(e,t,n,i){const s=OL(e,i);if(s){const r=kL(s),a=r.path,c=r.queryId,u=ar(a,t),h=gn.fromObject(n),f=new jf(vL(c),u,h);return LL(e,a,f)}else return[]}function ML(e,t,n){const s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(a,c)=>{const u=ar(a,t),h=rx(c,u);if(h)return h});return SL(s,t,r,n,!0)}function V_(e,t){return NL(t,e.syncPointTree_,null,EL(e.pendingWriteTree_,on()))}function NL(e,t,n,i){if(Ce(e.path))return PL(e,t,n,i);{const s=t.get(on());n==null&&s!=null&&(n=rx(s,on()));let r=[];const a=Ne(e.path),c=e.operationForChild(a),u=t.children.get(a);if(u&&c){const h=n?n.getImmediateChild(a):null,f=CL(i,a);r=r.concat(NL(c,u,h,f))}return s&&(r=r.concat(sx(s,e,i,n))),r}}function PL(e,t,n,i){const s=t.get(on());n==null&&s!=null&&(n=rx(s,on()));let r=[];return t.children.inorderTraversal((a,c)=>{const u=n?n.getImmediateChild(a):null,h=CL(i,a),f=e.operationForChild(a);f&&(r=r.concat(PL(f,c,u,h)))}),s&&(r=r.concat(sx(s,e,i,n))),r}function OL(e,t){return e.tagToQueryMap.get(t)}function kL(e){const t=e.indexOf("$");return St(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new vn(e.substr(0,t))}}function LL(e,t,n){const i=e.syncPointTree_.get(t);St(i,"Missing sync point for query tag that we're tracking");const s=EL(e.pendingWriteTree_,t);return sx(i,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new ox(n)}node(){return this.node_}}class ax{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=_i(this.path_,t);return new ax(this.syncTree_,n)}node(){return ML(this.syncTree_,this.path_)}}const vW=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},mD=function(e,t,n){if(!e||typeof e!="object")return e;if(St(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return bW(e[".sv"],t,n);if(typeof e[".sv"]=="object")return TW(e[".sv"],t);St(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},bW=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:St(!1,"Unexpected server value: "+e)}},TW=function(e,t,n){e.hasOwnProperty("increment")||St(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;typeof i!="number"&&St(!1,"Unexpected increment value: "+i);const s=t.node();if(St(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const a=s.getValue();return typeof a!="number"?i:a+i},wW=function(e,t,n,i){return lx(t,new ax(n,e),i)},EW=function(e,t,n){return lx(e,new ox(t),n)};function lx(e,t,n){const i=e.getPriority().val(),s=mD(i,t.getImmediateChild(".priority"),n);let r;if(e.isLeafNode()){const a=e,c=mD(a.getValue(),t,n);return c!==a.getValue()||s!==a.getPriority().val()?new fi(c,qi(s)):e}else{const a=e;return r=a,s!==a.getPriority().val()&&(r=r.updatePriority(new fi(s))),a.forEachChild($i,(c,u)=>{const h=lx(u,t.getImmediateChild(c),n);h!==u&&(r=r.updateImmediateChild(c,h))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}}function ux(e,t){let n=t instanceof vn?t:new vn(t),i=e,s=Ne(n);for(;s!==null;){const r=Ku(i.node.children,s)||{children:{},childCount:0};i=new cx(s,i,r),n=yn(n),s=Ne(n)}return i}function wh(e){return e.node.value}function VL(e,t){e.node.value=t,BT(e)}function jL(e){return e.node.childCount>0}function xW(e){return wh(e)===void 0&&!jL(e)}function j_(e,t){hr(e.node.children,(n,i)=>{t(new cx(n,e,i))})}function UL(e,t,n,i){n&&t(e),j_(e,s=>{UL(s,t,!0)})}function SW(e,t,n){let i=e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function Sp(e){return new vn(e.parent===null?e.name:Sp(e.parent)+"/"+e.name)}function BT(e){e.parent!==null&&AW(e.parent,e.name,e)}function AW(e,t,n){const i=xW(n),s=ha(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,BT(e)):!i&&!s&&(e.node.children[t]=n.node,e.node.childCount++,BT(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW=/[\[\].#$\/\u0000-\u001F\u007F]/,RW=/[\[\].#$\u0000-\u001F\u007F]/,gb=10*1024*1024,FL=function(e){return typeof e=="string"&&e.length!==0&&!CW.test(e)},IW=function(e){return typeof e=="string"&&e.length!==0&&!RW.test(e)},DW=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),IW(e)},BL=function(e,t,n){const i=n instanceof vn?new c$(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+tc(i));if(typeof t=="function")throw new Error(e+"contains a function "+tc(i)+" with contents = "+t.toString());if(Uk(t))throw new Error(e+"contains "+t.toString()+" "+tc(i));if(typeof t=="string"&&t.length>gb/3&&h_(t)>gb)throw new Error(e+"contains a string greater than "+gb+" utf8 bytes "+tc(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,r=!1;if(hr(t,(a,c)=>{if(a===".value")s=!0;else if(a!==".priority"&&a!==".sv"&&(r=!0,!FL(a)))throw new Error(e+" contains an invalid key ("+a+") "+tc(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);u$(i,a),BL(e,c,i),h$(i)}),s&&r)throw new Error(e+' contains ".value" child '+tc(i)+" in addition to actual children.")}},MW=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!FL(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!DW(n))throw new Error(hz(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function PW(e,t){let n=null;for(let i=0;i<t.length;i++){const s=t[i],r=s.getPath();n!==null&&!cL(r,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function Pc(e,t,n){PW(e,n),OW(e,i=>Dr(i,t)||Dr(t,i))}function OW(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const s=e.eventLists_[i];if(s){const r=s.path;t(r)?(kW(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function kW(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const i=n.getEventRunner();rf&&Hi("event: "+n.toString()),Ep(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LW="repo_interrupt",VW=25;class jW{constructor(t,n,i,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oy(),this.transactionQueueTree_=new cx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function UW(e,t,n){if(e.stats_=XE(e.repoInfo_),e.forceRestClient_||O7())e.server_=new Py(e.repoInfo_,(i,s,r,a)=>{gD(e,i,s,r,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>yD(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ai(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new ta(e.repoInfo_,t,(i,s,r,a)=>{gD(e,i,s,r,a)},i=>{yD(e,i)},i=>{BW(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=U7(e.repoInfo_,()=>new j$(e.stats_,e.server_)),e.infoData_=new P$,e.infoSyncTree_=new pD({startListening:(i,s,r,a)=>{let c=[];const u=e.infoData_.getNode(i._path);return u.isEmpty()||(c=L_(e.infoSyncTree_,i._path,u),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),hx(e,"connected",!1),e.serverSyncTree_=new pD({startListening:(i,s,r,a)=>(e.server_.listen(i,r,s,(c,u)=>{const h=a(c,u);Pc(e.eventQueue_,i._path,h)}),[]),stopListening:(i,s)=>{e.server_.unlisten(i,s)}})}function FW(e){const n=e.infoData_.getNode(new vn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function zL(e){return vW({timestamp:FW(e)})}function gD(e,t,n,i,s){e.dataUpdateCount++;const r=new vn(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(s)if(i){const u=ay(n,h=>qi(h));a=_W(e.serverSyncTree_,r,u,s)}else{const u=qi(n);a=yW(e.serverSyncTree_,r,u,s)}else if(i){const u=ay(n,h=>qi(h));a=gW(e.serverSyncTree_,r,u)}else{const u=qi(n);a=L_(e.serverSyncTree_,r,u)}let c=r;a.length>0&&(c=fx(e,r)),Pc(e.eventQueue_,c,a)}function yD(e,t){hx(e,"connected",t),t===!1&&HW(e)}function BW(e,t){hr(t,(n,i)=>{hx(e,n,i)})}function hx(e,t,n){const i=new vn("/.info/"+t),s=qi(n);e.infoData_.updateSnapshot(i,s);const r=L_(e.infoSyncTree_,i,s);Pc(e.eventQueue_,i,r)}function zW(e){return e.nextWriteId_++}function HW(e){HL(e,"onDisconnectEvents");const t=zL(e),n=Oy();OT(e.onDisconnect_,on(),(s,r)=>{const a=wW(s,r,e.serverSyncTree_,t);gL(n,s,a)});let i=[];OT(n,on(),(s,r)=>{i=i.concat(L_(e.serverSyncTree_,s,r));const a=GW(e,s);fx(e,a)}),e.onDisconnect_=Oy(),Pc(e.eventQueue_,on(),i)}function qW(e){e.persistentConnection_&&e.persistentConnection_.interrupt(LW)}function HL(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Hi(n,...t)}function qL(e,t,n){return ML(e.serverSyncTree_,t,n)||qe.EMPTY_NODE}function dx(e,t=e.transactionQueueTree_){if(t||U_(e,t),wh(t)){const n=WL(e,t);St(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&$W(e,Sp(t),n)}else jL(t)&&j_(t,n=>{dx(e,n)})}function $W(e,t,n){const i=n.map(h=>h.currentWriteId),s=qL(e,t,i);let r=s;const a=s.hash();for(let h=0;h<n.length;h++){const f=n[h];St(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const m=ar(t,f.path);r=r.updateChild(m,f.currentOutputSnapshotRaw)}const c=r.val(!0),u=t;e.server_.put(u.toString(),c,h=>{HL(e,"transaction put response",{path:u.toString(),status:h});let f=[];if(h==="ok"){const m=[];for(let y=0;y<n.length;y++)n[y].status=2,f=f.concat(Nu(e.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&m.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();U_(e,ux(e.transactionQueueTree_,t)),dx(e,e.transactionQueueTree_),Pc(e.eventQueue_,t,f);for(let y=0;y<m.length;y++)Ep(m[y])}else{if(h==="datastale")for(let m=0;m<n.length;m++)n[m].status===3?n[m].status=4:n[m].status=0;else{Us("transaction at "+u.toString()+" failed: "+h);for(let m=0;m<n.length;m++)n[m].status=4,n[m].abortReason=h}fx(e,t)}},a)}function fx(e,t){const n=$L(e,t),i=Sp(n),s=WL(e,n);return WW(e,s,i),i}function WW(e,t,n){if(t.length===0)return;const i=[];let s=[];const a=t.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<t.length;c++){const u=t[c],h=ar(n,u.path);let f=!1,m;if(St(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,m=u.abortReason,s=s.concat(Nu(e.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=VW)f=!0,m="maxretry",s=s.concat(Nu(e.serverSyncTree_,u.currentWriteId,!0));else{const y=qL(e,u.path,a);u.currentInputSnapshot=y;const v=t[c].update(y.val());if(v!==void 0){BL("transaction failed: Data returned ",v,u.path);let T=qi(v);typeof v=="object"&&v!=null&&ha(v,".priority")||(T=T.updatePriority(y.getPriority()));const x=u.currentWriteId,C=zL(e),P=EW(T,y,C);u.currentOutputSnapshotRaw=T,u.currentOutputSnapshotResolved=P,u.currentWriteId=zW(e),a.splice(a.indexOf(x),1),s=s.concat(mW(e.serverSyncTree_,u.path,P,u.currentWriteId,u.applyLocally)),s=s.concat(Nu(e.serverSyncTree_,x,!0))}else f=!0,m="nodata",s=s.concat(Nu(e.serverSyncTree_,u.currentWriteId,!0))}Pc(e.eventQueue_,n,s),s=[],f&&(t[c].status=2,function(y){setTimeout(y,Math.floor(0))}(t[c].unwatcher),t[c].onComplete&&(m==="nodata"?i.push(()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot)):i.push(()=>t[c].onComplete(new Error(m),!1,null))))}U_(e,e.transactionQueueTree_);for(let c=0;c<i.length;c++)Ep(i[c]);dx(e,e.transactionQueueTree_)}function $L(e,t){let n,i=e.transactionQueueTree_;for(n=Ne(t);n!==null&&wh(i)===void 0;)i=ux(i,n),t=yn(t),n=Ne(t);return i}function WL(e,t){const n=[];return GL(e,t,n),n.sort((i,s)=>i.order-s.order),n}function GL(e,t,n){const i=wh(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);j_(t,s=>{GL(e,s,n)})}function U_(e,t){const n=wh(t);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,VL(t,n.length>0?n:void 0)}j_(t,i=>{U_(e,i)})}function GW(e,t){const n=Sp($L(e,t)),i=ux(e.transactionQueueTree_,t);return SW(i,s=>{yb(e,s)}),yb(e,i),UL(i,s=>{yb(e,s)}),n}function yb(e,t){const n=wh(t);if(n){const i=[];let s=[],r=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(St(r===a-1,"All SENT items should be at beginning of queue."),r=a,n[a].status=3,n[a].abortReason="set"):(St(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),s=s.concat(Nu(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&i.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));r===-1?VL(t,void 0):n.length=r+1,Pc(e.eventQueue_,Sp(t),s);for(let a=0;a<i.length;a++)Ep(i[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function KW(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Us(`Invalid query segment '${n}' in query '${e}'`)}return t}const _D=function(e,t){const n=XW(e),i=n.namespace;n.domain==="firebase.com"&&la(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&la("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||A7();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Qk(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new vn(n.pathString)}},XW=function(e){let t="",n="",i="",s="",r="",a=!0,c="https",u=443;if(typeof e=="string"){let h=e.indexOf("//");h>=0&&(c=e.substring(0,h-1),e=e.substring(h+2));let f=e.indexOf("/");f===-1&&(f=e.length);let m=e.indexOf("?");m===-1&&(m=e.length),t=e.substring(0,Math.min(f,m)),f<m&&(s=YW(e.substring(f,m)));const y=KW(e.substring(Math.min(e.length,m)));h=t.indexOf(":"),h>=0?(a=c==="https"||c==="wss",u=parseInt(t.substring(h+1),10)):h=t.length;const v=t.slice(0,h);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const T=t.indexOf(".");i=t.substring(0,T).toLowerCase(),n=t.substring(T+1),r=i}"ns"in y&&(r=y.ns)}return{host:t,port:u,domain:n,subdomain:i,secure:a,scheme:c,pathString:s,namespace:r}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t,n,i,s){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return Ce(this._path)?null:oL(this._path)}get ref(){return new Eh(this._repo,this._path)}get _queryIdentifier(){const t=iD(this._queryParams),n=YE(t);return n==="{}"?"default":n}get _queryObject(){return iD(this._queryParams)}isEqual(t){if(t=dn(t),!(t instanceof px))return!1;const n=this._repo===t._repo,i=cL(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+l$(this._path)}}class Eh extends px{constructor(t,n){super(t,n,new tx,!1)}get parent(){const t=lL(this._path);return t===null?null:new Eh(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}fW(Eh);pW(Eh);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QW="FIREBASE_DATABASE_EMULATOR_HOST",zT={};let ZW=!1;function JW(e,t,n,i){e.repoInfo_=new Qk(t,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(e.authTokenProvider_=i)}function tG(e,t,n,i,s){let r=i||e.options.databaseURL;r===void 0&&(e.options.projectId||la("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a=_D(r,s),c=a.repoInfo,u;typeof process<"u"&&jI&&(u=jI[QW]),u?(r=`http://${u}?ns=${c.namespace}`,a=_D(r,s),c=a.repoInfo):a.repoInfo.secure;const h=new L7(e.name,e.options,t);MW("Invalid Firebase Database URL",a),Ce(a.path)||la("Database URL must point to the root of a Firebase Database (not including a child path).");const f=nG(c,e,h,new k7(e,n));return new iG(f,e)}function eG(e,t){const n=zT[t];(!n||n[e.key]!==e)&&la(`Database ${t}(${e.repoInfo_}) has already been deleted.`),qW(e),delete n[e.key]}function nG(e,t,n,i){let s=zT[t.name];s||(s={},zT[t.name]=s);let r=s[e.toURLString()];return r&&la("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new jW(e,ZW,n,i),s[e.toURLString()]=r,r}class iG{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(UW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Eh(this._repo,on())),this._rootInternal}_delete(){return this._rootInternal!==null&&(eG(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&la("Cannot call "+t+" on a deleted database.")}}function sG(e=op(),t){const n=da(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const i=$w("database");i&&rG(n,...i)}return n}function rG(e,t,n,i={}){e=dn(e),e._checkNotDeleted("useEmulator");const s=`${t}:${n}`,r=e._repoInternal;if(e._instanceStarted){if(s===e._repoInternal.repoInfo_.host&&ia(i,r.repoInfo_.emulatorOptions))return;la("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&la('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Wg(Wg.OWNER);else if(i.mockUserToken){const c=typeof i.mockUserToken=="string"?i.mockUserToken:Gw(i.mockUserToken,e.app.options.projectId);a=new Wg(c)}JW(r,s,i,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oG(e){b7(_l),ur(new Bs("database",(t,{instanceIdentifier:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return tG(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),Yi(UI,FI,e),Yi(UI,FI,"esm2017")}ta.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};ta.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};oG();const YL="@firebase/installations",mx="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=1e4,XL=`w:${mx}`,QL="FIS_v2",aG="https://firebaseinstallations.googleapis.com/v1",lG=60*60*1e3,cG="installations",uG="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hG={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ec=new Ic(cG,uG,hG);function ZL(e){return e instanceof pr&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL({projectId:e}){return`${aG}/projects/${e}/installations`}function tV(e){return{token:e.token,requestStatus:2,expiresIn:fG(e.expiresIn),creationTime:Date.now()}}async function eV(e,t){const i=(await t.json()).error;return Ec.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function nV({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function dG(e,{refreshToken:t}){const n=nV(e);return n.append("Authorization",pG(t)),n}async function iV(e){const t=await e();return t.status>=500&&t.status<600?e():t}function fG(e){return Number(e.replace("s","000"))}function pG(e){return`${QL} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mG({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=JL(e),s=nV(e),r=t.getImmediate({optional:!0});if(r){const h=await r.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={fid:n,authVersion:QL,appId:e.appId,sdkVersion:XL},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await iV(()=>fetch(i,c));if(u.ok){const h=await u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:tV(h.authToken)}}else throw await eV("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG=/^[cdef][\w-]{21}$/,HT="";function _G(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=vG(e);return yG.test(n)?n:HT}catch{return HT}}function vG(e){return gG(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=new Map;function oV(e,t){const n=F_(e);aV(n,t),bG(n,t)}function aV(e,t){const n=rV.get(e);if(n)for(const i of n)i(t)}function bG(e,t){const n=TG();n&&n.postMessage({key:e,fid:t}),wG()}let ac=null;function TG(){return!ac&&"BroadcastChannel"in self&&(ac=new BroadcastChannel("[Firebase] FID Change"),ac.onmessage=e=>{aV(e.data.key,e.data.fid)}),ac}function wG(){rV.size===0&&ac&&(ac.close(),ac=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EG="firebase-installations-database",xG=1,xc="firebase-installations-store";let _b=null;function gx(){return _b||(_b=f2(EG,xG,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(xc)}}})),_b}async function jy(e,t){const n=F_(e),s=(await gx()).transaction(xc,"readwrite"),r=s.objectStore(xc),a=await r.get(n);return await r.put(t,n),await s.done,(!a||a.fid!==t.fid)&&oV(e,t.fid),t}async function lV(e){const t=F_(e),i=(await gx()).transaction(xc,"readwrite");await i.objectStore(xc).delete(t),await i.done}async function B_(e,t){const n=F_(e),s=(await gx()).transaction(xc,"readwrite"),r=s.objectStore(xc),a=await r.get(n),c=t(a);return c===void 0?await r.delete(n):await r.put(c,n),await s.done,c&&(!a||a.fid!==c.fid)&&oV(e,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(e){let t;const n=await B_(e.appConfig,i=>{const s=SG(i),r=AG(e,s);return t=r.registrationPromise,r.installationEntry});return n.fid===HT?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function SG(e){const t=e||{fid:_G(),registrationStatus:0};return cV(t)}function AG(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ec.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=CG(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:RG(e)}:{installationEntry:t}}async function CG(e,t){try{const n=await mG(e,t);return jy(e.appConfig,n)}catch(n){throw ZL(n)&&n.customData.serverCode===409?await lV(e.appConfig):await jy(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function RG(e){let t=await vD(e.appConfig);for(;t.registrationStatus===1;)await sV(100),t=await vD(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await yx(e);return i||n}return t}function vD(e){return B_(e,t=>{if(!t)throw Ec.create("installation-not-found");return cV(t)})}function cV(e){return IG(e)?{fid:e.fid,registrationStatus:0}:e}function IG(e){return e.registrationStatus===1&&e.registrationTime+KL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DG({appConfig:e,heartbeatServiceProvider:t},n){const i=MG(e,n),s=dG(e,n),r=t.getImmediate({optional:!0});if(r){const h=await r.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const a={installation:{sdkVersion:XL,appId:e.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await iV(()=>fetch(i,c));if(u.ok){const h=await u.json();return tV(h)}else throw await eV("Generate Auth Token",u)}function MG(e,{fid:t}){return`${JL(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(e,t=!1){let n;const i=await B_(e.appConfig,r=>{if(!uV(r))throw Ec.create("not-registered");const a=r.authToken;if(!t&&OG(a))return r;if(a.requestStatus===1)return n=NG(e,t),r;{if(!navigator.onLine)throw Ec.create("app-offline");const c=LG(r);return n=PG(e,c),c}});return n?await n:i.authToken}async function NG(e,t){let n=await bD(e.appConfig);for(;n.authToken.requestStatus===1;)await sV(100),n=await bD(e.appConfig);const i=n.authToken;return i.requestStatus===0?_x(e,t):i}function bD(e){return B_(e,t=>{if(!uV(t))throw Ec.create("not-registered");const n=t.authToken;return VG(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function PG(e,t){try{const n=await DG(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await jy(e.appConfig,i),n}catch(n){if(ZL(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await lV(e.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await jy(e.appConfig,i)}throw n}}function uV(e){return e!==void 0&&e.registrationStatus===2}function OG(e){return e.requestStatus===2&&!kG(e)}function kG(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+lG}function LG(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function VG(e){return e.requestStatus===1&&e.requestTime+KL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jG(e){const t=e,{installationEntry:n,registrationPromise:i}=await yx(t);return i?i.catch(console.error):_x(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UG(e,t=!1){const n=e;return await FG(n),(await _x(n,t)).token}async function FG(e){const{registrationPromise:t}=await yx(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BG(e){if(!e||!e.options)throw vb("App Configuration");if(!e.name)throw vb("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw vb(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function vb(e){return Ec.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV="installations",zG="installations-internal",HG=e=>{const t=e.getProvider("app").getImmediate(),n=BG(t),i=da(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},qG=e=>{const t=e.getProvider("app").getImmediate(),n=da(t,hV).getImmediate();return{getId:()=>jG(n),getToken:s=>UG(n,s)}};function $G(){ur(new Bs(hV,HG,"PUBLIC")),ur(new Bs(zG,qG,"PRIVATE"))}$G();Yi(YL,mx);Yi(YL,mx,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="analytics",WG="firebase_id",GG="origin",YG=60*1e3,KG="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new rp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XG={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Fs=new Ic("analytics","Analytics",XG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QG(e){if(!e.startsWith(vx)){const t=Fs.create("invalid-gtag-resource",{gtagURL:e});return bs.warn(t.message),""}return e}function dV(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function ZG(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function JG(e,t){const n=ZG("firebase-js-sdk-policy",{createScriptURL:QG}),i=document.createElement("script"),s=`${vx}?l=${e}&id=${t}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function tY(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function eY(e,t,n,i,s,r){const a=i[s];try{if(a)await t[a];else{const u=(await dV(n)).find(h=>h.measurementId===s);u&&await t[u.appId]}}catch(c){bs.error(c)}e("config",s,r)}async function nY(e,t,n,i,s){try{let r=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await dV(n);for(const u of a){const h=c.find(m=>m.measurementId===u),f=h&&t[h.appId];if(f)r.push(f);else{r=[];break}}}r.length===0&&(r=Object.values(t)),await Promise.all(r),e("event",i,s||{})}catch(r){bs.error(r)}}function iY(e,t,n,i){async function s(r,...a){try{if(r==="event"){const[c,u]=a;await nY(e,t,n,c,u)}else if(r==="config"){const[c,u]=a;await eY(e,t,n,i,c,u)}else if(r==="consent"){const[c,u]=a;e("consent",c,u)}else if(r==="get"){const[c,u,h]=a;e("get",c,u,h)}else if(r==="set"){const[c]=a;e("set",c)}else e(r,...a)}catch(c){bs.error(c)}}return s}function sY(e,t,n,i,s){let r=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=iY(r,e,t,n),{gtagCore:r,wrappedGtag:window[s]}}function rY(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(vx)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oY=30,aY=1e3;class lY{constructor(t={},n=aY){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const fV=new lY;function cY(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function uY(e){var t;const{appId:n,apiKey:i}=e,s={method:"GET",headers:cY(i)},r=KG.replace("{app-id}",n),a=await fetch(r,s);if(a.status!==200&&a.status!==304){let c="";try{const u=await a.json();!((t=u.error)===null||t===void 0)&&t.message&&(c=u.error.message)}catch{}throw Fs.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function hY(e,t=fV,n){const{appId:i,apiKey:s,measurementId:r}=e.options;if(!i)throw Fs.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw Fs.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new pY;return setTimeout(async()=>{c.abort()},YG),pV({appId:i,apiKey:s,measurementId:r},a,c,t)}async function pV(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=fV){var r;const{appId:a,measurementId:c}=e;try{await dY(i,t)}catch(u){if(c)return bs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw u}try{const u=await uY(e);return s.deleteThrottleMetadata(a),u}catch(u){const h=u;if(!fY(h)){if(s.deleteThrottleMetadata(a),c)return bs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:c};throw u}const f=Number((r=h==null?void 0:h.customData)===null||r===void 0?void 0:r.httpStatus)===503?r1(n,s.intervalMillis,oY):r1(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,m),bs.debug(`Calling attemptFetch again in ${f} millis`),pV(e,m,i,s)}}function dY(e,t){return new Promise((n,i)=>{const s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(r),i(Fs.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function fY(e){if(!(e instanceof pr)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class pY{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function mY(e,t,n,i,s){if(s&&s.global){e("event",n,i);return}else{const r=await t,a=Object.assign(Object.assign({},i),{send_to:r});e("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gY(){if(Xw())try{await Qw()}catch(e){return bs.warn(Fs.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return bs.warn(Fs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function yY(e,t,n,i,s,r,a){var c;const u=hY(e);u.then(v=>{n[v.measurementId]=v.appId,e.options.measurementId&&v.measurementId!==e.options.measurementId&&bs.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>bs.error(v)),t.push(u);const h=gY().then(v=>{if(v)return i.getId()}),[f,m]=await Promise.all([u,h]);rY(r)||JG(r,f.measurementId),s("js",new Date);const y=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return y[GG]="firebase",y.update=!0,m!=null&&(y[WG]=m),s("config",f.measurementId,y),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{constructor(t){this.app=t}_delete(){return delete cf[this.app.options.appId],Promise.resolve()}}let cf={},TD=[];const wD={};let bb="dataLayer",vY="gtag",ED,mV,xD=!1;function bY(){const e=[];if(Kw()&&e.push("This is a browser extension environment."),c2()||e.push("Cookies are not available."),e.length>0){const t=e.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=Fs.create("invalid-analytics-context",{errorInfo:t});bs.warn(n.message)}}function TY(e,t,n){bY();const i=e.options.appId;if(!i)throw Fs.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)bs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Fs.create("no-api-key");if(cf[i]!=null)throw Fs.create("already-exists",{id:i});if(!xD){tY(bb);const{wrappedGtag:r,gtagCore:a}=sY(cf,TD,wD,bb,vY);mV=r,ED=a,xD=!0}return cf[i]=yY(e,TD,wD,t,ED,bb,n),new _Y(e)}function wY(e=op()){e=dn(e);const t=da(e,Uy);return t.isInitialized()?t.getImmediate():EY(e)}function EY(e,t={}){const n=da(e,Uy);if(n.isInitialized()){const s=n.getImmediate();if(ia(t,n.getOptions()))return s;throw Fs.create("already-initialized")}return n.initialize({options:t})}async function xY(){if(Kw()||!c2()||!Xw())return!1;try{return await Qw()}catch{return!1}}function SY(e,t,n,i){e=dn(e),mY(mV,cf[e.app.options.appId],t,n,i).catch(s=>bs.error(s))}const SD="@firebase/analytics",AD="0.10.12";function AY(){ur(new Bs(Uy,(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return TY(i,s,n)},"PUBLIC")),ur(new Bs("analytics-internal",e,"PRIVATE")),Yi(SD,AD),Yi(SD,AD,"esm2017");function e(t){try{const n=t.getProvider(Uy).getImmediate();return{logEvent:(i,s,r)=>SY(n,i,s,r)}}catch(n){throw Fs.create("interop-component-reg-failed",{reason:n})}}}AY();console.log(" FIREBASE API KEY:","AIzaSyAjF3oLNRGFwh_BUYA4qF55zl0qw4dprwI");const CY={apiKey:"AIzaSyAjF3oLNRGFwh_BUYA4qF55zl0qw4dprwI",authDomain:"agduwaqueue.firebaseapp.com",databaseURL:"https://agduwaqueue-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"agduwaqueue",storageBucket:"agduwaqueue.appspot.com",messagingSenderId:"242220098930",appId:"1:242220098930:web:4b5332473f339ca1be69eb",measurementId:"G-2CQ56KNPDZ"},Ap=p2(CY),rn=D_(Ap),Vs=J2(Ap);g7(Ap);sG(Ap);xY().then(e=>{e&&wY(Ap)});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IY=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),CD=e=>{const t=IY(e);return t.charAt(0).toUpperCase()+t.slice(1)},gV=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:a,...c},u)=>R.createElement("svg",{ref:u,...DY,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:gV("lucide",s),...c},[...a.map(([h,f])=>R.createElement(h,f)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=(e,t)=>{const n=R.forwardRef(({className:i,...s},r)=>R.createElement(MY,{ref:r,iconNode:t,className:gV(`lucide-${RY(CD(e))}`,`lucide-${e}`,i),...s}));return n.displayName=CD(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],PY=Ts("activity",NY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],kY=Ts("chart-column",OY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],VY=Ts("chart-no-axes-column",LY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],UY=Ts("circle-alert",jY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],BY=Ts("file-text",FY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],HY=Ts("funnel",zY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],$Y=Ts("history",qY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],GY=Ts("house",WY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],KY=Ts("list-ordered",YY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],QY=Ts("list",XY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],JY=Ts("log-out",ZY);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],eK=Ts("user",tK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],iK=Ts("users",nK);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rK=Ts("x",sK),bx=R.createContext({});function Tx(e){const t=R.useRef(null);return t.current===null&&(t.current=e()),t.current}const wx=typeof window<"u",yV=wx?R.useLayoutEffect:R.useEffect,z_=R.createContext(null),Ex=R.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class oK extends R.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=i instanceof HTMLElement&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function aK({children:e,isPresent:t,anchorX:n}){const i=R.useId(),s=R.useRef(null),r=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=R.useContext(Ex);return R.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:f,right:m}=r.current;if(t||!s.current||!c||!u)return;const y=n==="left"?`left: ${f}`:`right: ${m}`;s.current.dataset.motionPopId=i;const v=document.createElement("style");return a&&(v.nonce=a),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.removeChild(v)}},[t]),S.jsx(oK,{isPresent:t,childRef:s,sizeRef:r,children:R.cloneElement(e,{ref:s})})}const lK=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:a,anchorX:c})=>{const u=Tx(cK),h=R.useId(),f=R.useCallback(y=>{u.set(y,!0);for(const v of u.values())if(!v)return;i&&i()},[u,i]),m=R.useMemo(()=>({id:h,initial:t,isPresent:n,custom:s,onExitComplete:f,register:y=>(u.set(y,!1),()=>u.delete(y))}),r?[Math.random(),f]:[n,f]);return R.useMemo(()=>{u.forEach((y,v)=>u.set(v,!1))},[n]),R.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(e=S.jsx(aK,{isPresent:n,anchorX:c,children:e})),S.jsx(z_.Provider,{value:m,children:e})};function cK(){return new Map}function _V(e=!0){const t=R.useContext(z_);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=t,r=R.useId();R.useEffect(()=>{if(e)return s(r)},[e]);const a=R.useCallback(()=>e&&i&&i(r),[r,i,e]);return!n&&i?[!1,a]:[!0]}const cg=e=>e.key||"";function RD(e){const t=[];return R.Children.forEach(e,n=>{R.isValidElement(n)&&t.push(n)}),t}const qT=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:a=!1,anchorX:c="left"})=>{const[u,h]=_V(a),f=R.useMemo(()=>RD(e),[e]),m=a&&!u?[]:f.map(cg),y=R.useRef(!0),v=R.useRef(f),T=Tx(()=>new Map),[E,x]=R.useState(f),[C,P]=R.useState(f);yV(()=>{y.current=!1,v.current=f;for(let F=0;F<C.length;F++){const G=cg(C[F]);m.includes(G)?T.delete(G):T.get(G)!==!0&&T.set(G,!1)}},[C,m.length,m.join("-")]);const N=[];if(f!==E){let F=[...f];for(let G=0;G<C.length;G++){const k=C[G],D=cg(k);m.includes(D)||(F.splice(G,0,k),N.push(k))}return r==="wait"&&N.length&&(F=N),P(RD(F)),x(f),null}const{forceRender:q}=R.useContext(bx);return S.jsx(S.Fragment,{children:C.map(F=>{const G=cg(F),k=a&&!u?!1:f===C||m.includes(G),D=()=>{if(T.has(G))T.set(G,!0);else return;let M=!0;T.forEach(V=>{V||(M=!1)}),M&&(q==null||q(),P(v.current),a&&(h==null||h()),i&&i())};return S.jsx(lK,{isPresent:k,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:r,onExitComplete:k?void 0:D,anchorX:c,children:F},G)})})};function xx(e,t){e.indexOf(t)===-1&&e.push(t)}function Sx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let vV=()=>{};const uK={useManualTiming:!1};function Ax(e){let t;return()=>(t===void 0&&(t=e()),t)}const lr=e=>e,Uf=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class Cx{constructor(){this.subscriptions=[]}add(t){return xx(this.subscriptions,t),()=>Sx(this.subscriptions,t)}notify(t,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,i);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lo=e=>e*1e3,co=e=>e/1e3;function bV(e,t){return t?e*(1e3/t):0}const hK=Ax(()=>window.ScrollTimeline!==void 0);class dK{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=n}attachTimeline(t,n){const i=this.animations.map(s=>{if(hK()&&s.attachTimeline)return s.attachTimeline(t);if(typeof n=="function")return n(s)});return()=>{i.forEach((s,r)=>{s&&s(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class fK extends dK{then(t,n){return this.finished.finally(t).then(()=>{})}}const ID={value:null},Rx=e=>Array.isArray(e)&&typeof e[0]=="number",pK={};function mK(e,t){const n=Ax(e);return()=>pK[t]??n()}const Ff=mK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),TV=(e,t,n=10)=>{let i="";const s=Math.max(Math.round(t/n),2);for(let r=0;r<s;r++)i+=e(r/(s-1))+", ";return`linear(${i.substring(0,i.length-2)})`},Wd=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,$T={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wd([0,.65,.55,1]),circOut:Wd([.55,0,1,.45]),backIn:Wd([.31,.01,.66,-.59]),backOut:Wd([.33,1.53,.69,.99])};function wV(e,t){if(e)return typeof e=="function"&&Ff()?TV(e,t):Rx(e)?Wd(e):Array.isArray(e)?e.map(n=>wV(n,t)||$T.easeOut):$T[e]}function gK(e,t,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:c="easeInOut",times:u}={},h=void 0){const f={[t]:n};u&&(f.offset=u);const m=wV(c,s);return Array.isArray(m)&&(f.easing=m),e.animate(f,{delay:i,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal",pseudoElement:h})}function Ix(e){return typeof e=="function"&&"applyToOptions"in e}function Dx(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Fy=2e4;function Mx(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Fy;)t+=n,i=e.next(t);return t>=Fy?1/0:t}function yK(e,t=100,n){const i=n({...e,keyframes:[0,t]}),s=Math.min(Mx(i),Fy);return{type:"keyframes",ease:r=>i.next(s*r).value/t,duration:co(s)}}function EV(e){return!!(typeof e=="function"&&Ff()||!e||typeof e=="string"&&(e in $T||Ff())||Rx(e)||Array.isArray(e)&&e.every(EV))}function DD(e,t){e.timeline=t,e.onfinish=null}const ug=["read","resolveKeyframes","update","preRender","render","postRender"];function _K(e,t){let n=new Set,i=new Set,s=!1,r=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},u=0;function h(m){a.has(m)&&(f.schedule(m),e()),u++,m(c)}const f={schedule:(m,y=!1,v=!1)=>{const E=v&&s?n:i;return y&&a.add(m),E.has(m)||E.add(m),m},cancel:m=>{i.delete(m),a.delete(m)},process:m=>{if(c=m,s){r=!0;return}s=!0,[n,i]=[i,n],n.forEach(h),t&&ID.value&&ID.value.frameloop[t].push(u),u=0,n.clear(),s=!1,r&&(r=!1,f.process(m))}};return f}const vK=40;function xV(e,t){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=ug.reduce((C,P)=>(C[P]=_K(r,t?P:void 0),C),{}),{read:c,resolveKeyframes:u,update:h,preRender:f,render:m,postRender:y}=a,v=()=>{const C=performance.now();n=!1,s.delta=i?1e3/60:Math.max(Math.min(C-s.timestamp,vK),1),s.timestamp=C,s.isProcessing=!0,c.process(s),u.process(s),h.process(s),f.process(s),m.process(s),y.process(s),s.isProcessing=!1,n&&t&&(i=!1,e(v))},T=()=>{n=!0,i=!0,s.isProcessing||e(v)};return{schedule:ug.reduce((C,P)=>{const N=a[P];return C[P]=(q,F=!1,G=!1)=>(n||T(),N.schedule(q,F,G)),C},{}),cancel:C=>{for(let P=0;P<ug.length;P++)a[ug[P]].cancel(C)},state:s,steps:a}}const{schedule:hn,cancel:dl,state:Si,steps:Tb}=xV(typeof requestAnimationFrame<"u"?requestAnimationFrame:lr,!0),{schedule:Nx}=xV(queueMicrotask,!1);let Gg;function bK(){Gg=void 0}const uo={now:()=>(Gg===void 0&&uo.set(Si.isProcessing||uK.useManualTiming?Si.timestamp:performance.now()),Gg),set:e=>{Gg=e,queueMicrotask(bK)}},Ar={x:!1,y:!1};function SV(){return Ar.x||Ar.y}function TK(e){return e==="x"||e==="y"?Ar[e]?null:(Ar[e]=!0,()=>{Ar[e]=!1}):Ar.x||Ar.y?null:(Ar.x=Ar.y=!0,()=>{Ar.x=Ar.y=!1})}function wK(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function AV(e,t){const n=wK(e),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[n,s,()=>i.abort()]}function MD(e){return!(e.pointerType==="touch"||SV())}function EK(e,t,n={}){const[i,s,r]=AV(e,n),a=c=>{if(!MD(c))return;const{target:u}=c,h=t(u,c);if(typeof h!="function"||!u)return;const f=m=>{MD(m)&&(h(m),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,s)};return i.forEach(c=>{c.addEventListener("pointerenter",a,s)}),r}const CV=(e,t)=>t?e===t?!0:CV(e,t.parentElement):!1,Px=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,xK=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function SK(e){return xK.has(e.tagName)||e.tabIndex!==-1}const Gd=new WeakSet;function ND(e){return t=>{t.key==="Enter"&&e(t)}}function wb(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const AK=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=ND(()=>{if(Gd.has(n))return;wb(n,"down");const s=ND(()=>{wb(n,"up")}),r=()=>wb(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",r,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function PD(e){return Px(e)&&!SV()}function CK(e,t,n={}){const[i,s,r]=AV(e,n),a=c=>{const u=c.currentTarget;if(!PD(c)||Gd.has(u))return;Gd.add(u);const h=t(u,c),f=(v,T)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),!(!PD(v)||!Gd.has(u))&&(Gd.delete(u),typeof h=="function"&&h(v,{success:T}))},m=v=>{f(v,u===window||u===document||n.useGlobalTarget||CV(u,v.target))},y=v=>{f(v,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",y,s)};return i.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",a,s),c instanceof HTMLElement&&(c.addEventListener("focus",h=>AK(h,s)),!SK(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}const OD=30,RK=e=>!isNaN(parseFloat(e));class IK{constructor(t,n={}){this.version="12.6.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{const r=uo.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=uo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=RK(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Cx);const i=this.events[t].add(n);return t==="change"?()=>{i(),hn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=uo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>OD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,OD);return bV(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bf(e,t){return new IK(e,t)}const RV=R.createContext({strict:!1}),kD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rh={};for(const e in kD)rh[e]={isEnabled:t=>kD[e].some(n=>!!t[n])};function DK(e){for(const t in e)rh[t]={...rh[t],...e[t]}}const MK=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function By(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||MK.has(e)}let IV=e=>!By(e);function NK(e){e&&(IV=t=>t.startsWith("on")?!By(t):e(t))}try{NK(require("@emotion/is-prop-valid").default)}catch{}function PK(e,t,n){const i={};for(const s in e)s==="values"&&typeof e.values=="object"||(IV(s)||n===!0&&By(s)||!t&&!By(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}function OK(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...i)=>e(...i);return new Proxy(n,{get:(i,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const H_=R.createContext({});function q_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function zf(e){return typeof e=="string"||Array.isArray(e)}const Ox=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kx=["initial",...Ox];function $_(e){return q_(e.animate)||kx.some(t=>zf(e[t]))}function DV(e){return!!($_(e)||e.variants)}function kK(e,t){if($_(e)){const{initial:n,animate:i}=e;return{initial:n===!1||zf(n)?n:void 0,animate:zf(i)?i:void 0}}return e.inherit!==!1?t:{}}function LK(e){const{initial:t,animate:n}=kK(e,R.useContext(H_));return R.useMemo(()=>({initial:t,animate:n}),[LD(t),LD(n)])}function LD(e){return Array.isArray(e)?e.join(" "):e}const VK=Symbol.for("motionComponentSymbol");function Pu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function jK(e,t,n){return R.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Pu(n)&&(n.current=i))},[t])}const Lx=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),UK="framerAppearId",MV="data-"+Lx(UK),NV=R.createContext({});function FK(e,t,n,i,s){var E,x;const{visualElement:r}=R.useContext(H_),a=R.useContext(RV),c=R.useContext(z_),u=R.useContext(Ex).reducedMotion,h=R.useRef(null);i=i||a.renderer,!h.current&&i&&(h.current=i(e,{visualState:t,parent:r,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,m=R.useContext(NV);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&BK(h.current,n,s,m);const y=R.useRef(!1);R.useInsertionEffect(()=>{f&&y.current&&f.update(n,c)});const v=n[MV],T=R.useRef(!!v&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,v))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,v)));return yV(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Nx.render(f.render),T.current&&f.animationState&&f.animationState.animateChanges())}),R.useEffect(()=>{f&&(!T.current&&f.animationState&&f.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,v)}),T.current=!1))}),f}function BK(e,t,n,i){const{layoutId:s,layout:r,drag:a,dragConstraints:c,layoutScroll:u,layoutRoot:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:PV(e.parent)),e.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||c&&Pu(c),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,layoutScroll:u,layoutRoot:h})}function PV(e){if(e)return e.options.allowProjection!==!1?e.projection:PV(e.parent)}function zK({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:s}){e&&DK(e);function r(c,u){let h;const f={...R.useContext(Ex),...c,layoutId:HK(c)},{isStatic:m}=f,y=LK(c),v=i(c,m);if(!m&&wx){qK();const T=$K(f);h=T.MeasureLayout,y.visualElement=FK(s,v,f,t,T.ProjectionNode)}return S.jsxs(H_.Provider,{value:y,children:[h&&y.visualElement?S.jsx(h,{visualElement:y.visualElement,...f}):null,n(s,c,jK(v,y.visualElement,u),v,m,y.visualElement)]})}r.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=R.forwardRef(r);return a[VK]=s,a}function HK({layoutId:e}){const t=R.useContext(bx).id;return t&&e!==void 0?t+"-"+e:e}function qK(e,t){R.useContext(RV).strict}function $K(e){const{drag:t,layout:n}=rh;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const OV=e=>t=>typeof t=="string"&&t.startsWith(e),Vx=OV("--"),WK=OV("var(--"),jx=e=>WK(e)?GK.test(e.split("/*")[0].trim()):!1,GK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Hf={};function YK(e){for(const t in e)Hf[t]=e[t],Vx(t)&&(Hf[t].isCSSVariable=!0)}const xh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Oc=new Set(xh);function kV(e,{layout:t,layoutId:n}){return Oc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Hf[e]||e==="opacity")}const Wi=e=>!!(e&&e.getVelocity),LV=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ca=(e,t,n)=>n>t?t:n<e?e:n,Sh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},qf={...Sh,transform:e=>ca(0,1,e)},hg={...Sh,default:1},Cp=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ua=Cp("deg"),ho=Cp("%"),Wt=Cp("px"),KK=Cp("vh"),XK=Cp("vw"),VD={...ho,parse:e=>ho.parse(e)/100,transform:e=>ho.transform(e*100)},QK={borderWidth:Wt,borderTopWidth:Wt,borderRightWidth:Wt,borderBottomWidth:Wt,borderLeftWidth:Wt,borderRadius:Wt,radius:Wt,borderTopLeftRadius:Wt,borderTopRightRadius:Wt,borderBottomRightRadius:Wt,borderBottomLeftRadius:Wt,width:Wt,maxWidth:Wt,height:Wt,maxHeight:Wt,top:Wt,right:Wt,bottom:Wt,left:Wt,padding:Wt,paddingTop:Wt,paddingRight:Wt,paddingBottom:Wt,paddingLeft:Wt,margin:Wt,marginTop:Wt,marginRight:Wt,marginBottom:Wt,marginLeft:Wt,backgroundPositionX:Wt,backgroundPositionY:Wt},ZK={rotate:Ua,rotateX:Ua,rotateY:Ua,rotateZ:Ua,scale:hg,scaleX:hg,scaleY:hg,scaleZ:hg,skew:Ua,skewX:Ua,skewY:Ua,distance:Wt,translateX:Wt,translateY:Wt,translateZ:Wt,x:Wt,y:Wt,z:Wt,perspective:Wt,transformPerspective:Wt,opacity:qf,originX:VD,originY:VD,originZ:Wt},jD={...Sh,transform:Math.round},Ux={...QK,...ZK,zIndex:jD,size:Wt,fillOpacity:qf,strokeOpacity:qf,numOctaves:jD},JK={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tX=xh.length;function eX(e,t,n){let i="",s=!0;for(let r=0;r<tX;r++){const a=xh[r],c=e[a];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(a.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=LV(c,Ux[a]);if(!u){s=!1;const f=JK[a]||a;i+=`${f}(${h}) `}n&&(t[a]=h)}}return i=i.trim(),n?i=n(t,s?"":i):s&&(i="none"),i}function Fx(e,t,n){const{style:i,vars:s,transformOrigin:r}=e;let a=!1,c=!1;for(const u in t){const h=t[u];if(Oc.has(u)){a=!0;continue}else if(Vx(u)){s[u]=h;continue}else{const f=LV(h,Ux[u]);u.startsWith("origin")?(c=!0,r[u]=f):i[u]=f}}if(t.transform||(a||n?i.transform=eX(t,e.transform,n):i.transform&&(i.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:f=0}=r;i.transformOrigin=`${u} ${h} ${f}`}}const Bx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function VV(e,t,n){for(const i in t)!Wi(t[i])&&!kV(i,n)&&(e[i]=t[i])}function nX({transformTemplate:e},t){return R.useMemo(()=>{const n=Bx();return Fx(n,t,e),Object.assign({},n.vars,n.style)},[t])}function iX(e,t){const n=e.style||{},i={};return VV(i,n,e),Object.assign(i,nX(e,t)),i}function sX(e,t){const n={},i=iX(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const rX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zx(e){return typeof e!="string"||e.includes("-")?!1:!!(rX.indexOf(e)>-1||/[A-Z]/u.test(e))}const oX={offset:"stroke-dashoffset",array:"stroke-dasharray"},aX={offset:"strokeDashoffset",array:"strokeDasharray"};function lX(e,t,n=1,i=0,s=!0){e.pathLength=1;const r=s?oX:aX;e[r.offset]=Wt.transform(-i);const a=Wt.transform(t),c=Wt.transform(n);e[r.array]=`${a} ${c}`}function UD(e,t,n){return typeof e=="string"?e:Wt.transform(t+n*e)}function cX(e,t,n){const i=UD(t,e.x,e.width),s=UD(n,e.y,e.height);return`${i} ${s}`}function Hx(e,{attrX:t,attrY:n,attrScale:i,originX:s,originY:r,pathLength:a,pathSpacing:c=1,pathOffset:u=0,...h},f,m){if(Fx(e,h,m),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:y,style:v,dimensions:T}=e;y.transform&&(T&&(v.transform=y.transform),delete y.transform),T&&(s!==void 0||r!==void 0||v.transform)&&(v.transformOrigin=cX(T,s!==void 0?s:.5,r!==void 0?r:.5)),t!==void 0&&(y.x=t),n!==void 0&&(y.y=n),i!==void 0&&(y.scale=i),a!==void 0&&lX(y,a,c,u,!1)}const jV=()=>({...Bx(),attrs:{}}),qx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function uX(e,t,n,i){const s=R.useMemo(()=>{const r=jV();return Hx(r,t,qx(i),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};VV(r,e.style,e),s.style={...r,...s.style}}return s}function hX(e=!1){return(n,i,s,{latestValues:r},a)=>{const u=(zx(n)?uX:sX)(i,r,a,n),h=PK(i,typeof n=="string",e),f=n!==R.Fragment?{...h,...u,ref:s}:{},{children:m}=i,y=R.useMemo(()=>Wi(m)?m.get():m,[m]);return R.createElement(n,{...f,children:y})}}function FD(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function $x(e,t,n,i){if(typeof t=="function"){const[s,r]=FD(i);t=t(n!==void 0?n:e.custom,s,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,r]=FD(i);t=t(n!==void 0?n:e.custom,s,r)}return t}const WT=e=>Array.isArray(e),dX=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),fX=e=>WT(e)?e[e.length-1]||0:e;function Yg(e){const t=Wi(e)?e.get():e;return dX(t)?t.toValue():t}function pX({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},i,s,r){const a={latestValues:mX(i,s,r,e),renderState:t()};return n&&(a.onMount=c=>n({props:i,current:c,...a}),a.onUpdate=c=>n(c)),a}const UV=e=>(t,n)=>{const i=R.useContext(H_),s=R.useContext(z_),r=()=>pX(e,t,i,s);return n?r():Tx(r)};function mX(e,t,n,i){const s={},r=i(e,{});for(const y in r)s[y]=Yg(r[y]);let{initial:a,animate:c}=e;const u=$_(e),h=DV(e);t&&h&&!u&&e.inherit!==!1&&(a===void 0&&(a=t.initial),c===void 0&&(c=t.animate));let f=n?n.initial===!1:!1;f=f||a===!1;const m=f?c:a;if(m&&typeof m!="boolean"&&!q_(m)){const y=Array.isArray(m)?m:[m];for(let v=0;v<y.length;v++){const T=$x(e,y[v]);if(T){const{transitionEnd:E,transition:x,...C}=T;for(const P in C){let N=C[P];if(Array.isArray(N)){const q=f?N.length-1:0;N=N[q]}N!==null&&(s[P]=N)}for(const P in E)s[P]=E[P]}}}return s}function Wx(e,t,n){var r;const{style:i}=e,s={};for(const a in i)(Wi(i[a])||t.style&&Wi(t.style[a])||kV(a,e)||((r=n==null?void 0:n.getValue(a))==null?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const gX={useVisualState:UV({scrapeMotionValuesFromProps:Wx,createRenderState:Bx})};function FV(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function BV(e,{style:t,vars:n},i,s){Object.assign(e.style,t,s&&s.getProjectionStyles(i));for(const r in n)e.style.setProperty(r,n[r])}const zV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HV(e,t,n,i){BV(e,t,void 0,i);for(const s in t.attrs)e.setAttribute(zV.has(s)?s:Lx(s),t.attrs[s])}function qV(e,t,n){const i=Wx(e,t,n);for(const s in e)if(Wi(e[s])||Wi(t[s])){const r=xh.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=e[s]}return i}const BD=["x","y","width","height","cx","cy","r"],yX={useVisualState:UV({scrapeMotionValuesFromProps:qV,createRenderState:jV,onUpdate:({props:e,prevProps:t,current:n,renderState:i,latestValues:s})=>{if(!n)return;let r=!!e.drag;if(!r){for(const c in s)if(Oc.has(c)){r=!0;break}}if(!r)return;let a=!t;if(t)for(let c=0;c<BD.length;c++){const u=BD[c];e[u]!==t[u]&&(a=!0)}a&&hn.read(()=>{FV(n,i),hn.render(()=>{Hx(i,s,qx(n.tagName),e.transformTemplate),HV(n,i)})})}})};function _X(e,t){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...zx(i)?yX:gX,preloadedFeatures:e,useRender:hX(s),createVisualElement:t,Component:i};return zK(a)}}function $f(e,t,n){const i=e.getProps();return $x(i,t,n!==void 0?n:i.custom,e)}const $V=new Set(["width","height","top","left","right","bottom",...xh]);function vX(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Bf(n))}function bX(e,t){const n=$f(e,t);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const a in r){const c=fX(r[a]);vX(e,a,c)}}function TX(e){return!!(Wi(e)&&e.add)}function GT(e,t){const n=e.getValue("willChange");if(TX(n))return n.add(t)}function WV(e){return e.props[MV]}const GV=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,wX=1e-7,EX=12;function xX(e,t,n,i,s){let r,a,c=0;do a=t+(n-t)/2,r=GV(a,i,s)-e,r>0?n=a:t=a;while(Math.abs(r)>wX&&++c<EX);return a}function Rp(e,t,n,i){if(e===t&&n===i)return lr;const s=r=>xX(r,0,1,e,n);return r=>r===0||r===1?r:GV(s(r),t,i)}const YV=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,KV=e=>t=>1-e(1-t),XV=Rp(.33,1.53,.69,.99),Gx=KV(XV),QV=YV(Gx),ZV=e=>(e*=2)<1?.5*Gx(e):.5*(2-Math.pow(2,-10*(e-1))),Yx=e=>1-Math.sin(Math.acos(e)),JV=KV(Yx),tj=YV(Yx),ej=e=>/^0[^.\s]+$/u.test(e);function SX(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||ej(e):!0}const uf=e=>Math.round(e*1e5)/1e5,Kx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function AX(e){return e==null}const CX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Xx=(e,t)=>n=>!!(typeof n=="string"&&CX.test(n)&&n.startsWith(e)||t&&!AX(n)&&Object.prototype.hasOwnProperty.call(n,t)),nj=(e,t,n)=>i=>{if(typeof i!="string")return i;const[s,r,a,c]=i.match(Kx);return{[e]:parseFloat(s),[t]:parseFloat(r),[n]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},RX=e=>ca(0,255,e),Eb={...Sh,transform:e=>Math.round(RX(e))},lc={test:Xx("rgb","red"),parse:nj("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+Eb.transform(e)+", "+Eb.transform(t)+", "+Eb.transform(n)+", "+uf(qf.transform(i))+")"};function IX(e){let t="",n="",i="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const YT={test:Xx("#"),parse:IX,transform:lc.transform},Ou={test:Xx("hsl","hue"),parse:nj("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+ho.transform(uf(t))+", "+ho.transform(uf(n))+", "+uf(qf.transform(i))+")"},Ui={test:e=>lc.test(e)||YT.test(e)||Ou.test(e),parse:e=>lc.test(e)?lc.parse(e):Ou.test(e)?Ou.parse(e):YT.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?lc.transform(e):Ou.transform(e)},DX=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function MX(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Kx))==null?void 0:t.length)||0)+(((n=e.match(DX))==null?void 0:n.length)||0)>0}const ij="number",sj="color",NX="var",PX="var(",zD="${}",OX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wf(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const c=t.replace(OX,u=>(Ui.test(u)?(i.color.push(r),s.push(sj),n.push(Ui.parse(u))):u.startsWith(PX)?(i.var.push(r),s.push(NX),n.push(u)):(i.number.push(r),s.push(ij),n.push(parseFloat(u))),++r,zD)).split(zD);return{values:n,split:c,indexes:i,types:s}}function rj(e){return Wf(e).values}function oj(e){const{split:t,types:n}=Wf(e),i=t.length;return s=>{let r="";for(let a=0;a<i;a++)if(r+=t[a],s[a]!==void 0){const c=n[a];c===ij?r+=uf(s[a]):c===sj?r+=Ui.transform(s[a]):r+=s[a]}return r}}const kX=e=>typeof e=="number"?0:e;function LX(e){const t=rj(e);return oj(e)(t.map(kX))}const fl={test:MX,parse:rj,createTransformer:oj,getAnimatableNone:LX},VX=new Set(["brightness","contrast","saturate","opacity"]);function jX(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Kx)||[];if(!i)return e;const s=n.replace(i,"");let r=VX.has(t)?1:0;return i!==n&&(r*=100),t+"("+r+s+")"}const UX=/\b([a-z-]*)\(.*?\)/gu,KT={...fl,getAnimatableNone:e=>{const t=e.match(UX);return t?t.map(jX).join(" "):e}},FX={...Ux,color:Ui,backgroundColor:Ui,outlineColor:Ui,fill:Ui,stroke:Ui,borderColor:Ui,borderTopColor:Ui,borderRightColor:Ui,borderBottomColor:Ui,borderLeftColor:Ui,filter:KT,WebkitFilter:KT},aj=e=>FX[e];function lj(e,t){let n=aj(e);return n!==KT&&(n=fl),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const BX=new Set(["auto","none","0"]);function zX(e,t,n){let i=0,s;for(;i<e.length&&!s;){const r=e[i];typeof r=="string"&&!BX.has(r)&&Wf(r).values.length&&(s=e[i]),i++}if(s&&n)for(const r of t)e[r]=lj(n,s)}const cc=e=>e*180/Math.PI,XT=e=>{const t=cc(Math.atan2(e[1],e[0]));return QT(t)},HX={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:XT,rotateZ:XT,skewX:e=>cc(Math.atan(e[1])),skewY:e=>cc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},QT=e=>(e=e%360,e<0&&(e+=360),e),HD=XT,qD=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),$D=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),qX={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:qD,scaleY:$D,scale:e=>(qD(e)+$D(e))/2,rotateX:e=>QT(cc(Math.atan2(e[6],e[5]))),rotateY:e=>QT(cc(Math.atan2(-e[2],e[0]))),rotateZ:HD,rotate:HD,skewX:e=>cc(Math.atan(e[4])),skewY:e=>cc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function WD(e){return e.includes("scale")?1:0}function ZT(e,t){if(!e||e==="none")return WD(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=qX,s=n;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=HX,s=c}if(!s)return WD(t);const r=i[t],a=s[1].split(",").map(WX);return typeof r=="function"?r(a):a[r]}const $X=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return ZT(n,t)};function WX(e){return parseFloat(e.trim())}const GD=e=>e===Sh||e===Wt,GX=new Set(["x","y","z"]),YX=xh.filter(e=>!GX.has(e));function KX(e){const t=[];return YX.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const oh={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ZT(t,"x"),y:(e,{transform:t})=>ZT(t,"y")};oh.translateX=oh.x;oh.translateY=oh.y;const dc=new Set;let JT=!1,tw=!1;function cj(){if(tw){const e=Array.from(dc).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const s=KX(i);s.length&&(n.set(i,s),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([r,a])=>{var c;(c=i.getValue(r))==null||c.set(a)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}tw=!1,JT=!1,dc.forEach(e=>e.complete()),dc.clear()}function uj(){dc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(tw=!0)})}function XX(){uj(),cj()}class Qx{constructor(t,n,i,s,r,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(dc.add(this),JT||(JT=!0,hn.read(uj),hn.resolveKeyframes(cj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:s}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const a=s==null?void 0:s.get(),c=t[t.length-1];if(a!==void 0)t[0]=a;else if(i&&n){const u=i.readValue(n,c);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=c),s&&a===void 0&&s.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),dc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,dc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const hj=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),QX=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZX(e){const t=QX.exec(e);if(!t)return[,];const[,n,i,s]=t;return[`--${n??i}`,s]}function dj(e,t,n=1){const[i,s]=ZX(e);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const a=r.trim();return hj(a)?parseFloat(a):a}return jx(s)?dj(s,t,n+1):s}const fj=e=>t=>t.test(e),JX={test:e=>e==="auto",parse:e=>e},pj=[Sh,Wt,ho,Ua,XK,KK,JX],YD=e=>pj.find(fj(e));class mj extends Qx{constructor(t,n,i,s,r){super(t,n,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let h=t[u];if(typeof h=="string"&&(h=h.trim(),jx(h))){const f=dj(h,n.current);f!==void 0&&(t[u]=f),u===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!$V.has(i)||t.length!==2)return;const[s,r]=t,a=YD(s),c=YD(r);if(a!==c)if(GD(a)&&GD(c))for(let u=0;u<t.length;u++){const h=t[u];typeof h=="string"&&(t[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let s=0;s<t.length;s++)SX(t[s])&&i.push(s);i.length&&zX(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oh[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var c;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,a=i[r];i[r]=oh[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([u,h])=>{t.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const KD=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(fl.test(e)||e==="0")&&!e.startsWith("url("));function tQ(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function eQ(e,t,n,i){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],a=KD(s,t),c=KD(r,t);return!a||!c?!1:tQ(e)||(n==="spring"||Ix(n))&&i}const nQ=e=>e!==null;function W_(e,{repeat:t,repeatType:n="loop"},i){const s=e.filter(nQ),r=t&&n!=="loop"&&t%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const iQ=40;class gj{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=uo.now(),this.options={autoplay:t,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:a,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>iQ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&XX(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=uo.now(),this.hasAttemptedResolve=!0;const{name:i,type:s,velocity:r,delay:a,onComplete:c,onUpdate:u,isGenerator:h}=this.options;if(!h&&!eQ(t,i,s,r))if(a)this.options.duration=0;else{u&&u(W_(t,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const f=this.initPlayback(t,n);f!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Cn=(e,t,n)=>e+(t-e)*n;function xb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function sQ({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let s=0,r=0,a=0;if(!t)s=r=a=n;else{const c=n<.5?n*(1+t):n+t-n*t,u=2*n-c;s=xb(u,c,e+1/3),r=xb(u,c,e),a=xb(u,c,e-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:i}}function zy(e,t){return n=>n>0?t:e}const Sb=(e,t,n)=>{const i=e*e,s=n*(t*t-i)+i;return s<0?0:Math.sqrt(s)},rQ=[YT,lc,Ou],oQ=e=>rQ.find(t=>t.test(e));function XD(e){const t=oQ(e);if(!t)return!1;let n=t.parse(e);return t===Ou&&(n=sQ(n)),n}const QD=(e,t)=>{const n=XD(e),i=XD(t);if(!n||!i)return zy(e,t);const s={...n};return r=>(s.red=Sb(n.red,i.red,r),s.green=Sb(n.green,i.green,r),s.blue=Sb(n.blue,i.blue,r),s.alpha=Cn(n.alpha,i.alpha,r),lc.transform(s))},aQ=(e,t)=>n=>t(e(n)),Ip=(...e)=>e.reduce(aQ),ew=new Set(["none","hidden"]);function lQ(e,t){return ew.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function cQ(e,t){return n=>Cn(e,t,n)}function Zx(e){return typeof e=="number"?cQ:typeof e=="string"?jx(e)?zy:Ui.test(e)?QD:dQ:Array.isArray(e)?yj:typeof e=="object"?Ui.test(e)?QD:uQ:zy}function yj(e,t){const n=[...e],i=n.length,s=e.map((r,a)=>Zx(r)(r,t[a]));return r=>{for(let a=0;a<i;a++)n[a]=s[a](r);return n}}function uQ(e,t){const n={...e,...t},i={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(i[s]=Zx(e[s])(e[s],t[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function hQ(e,t){const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],a=e.indexes[r][i[r]],c=e.values[a]??0;n[s]=c,i[r]++}return n}const dQ=(e,t)=>{const n=fl.createTransformer(t),i=Wf(e),s=Wf(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?ew.has(e)&&!s.values.length||ew.has(t)&&!i.values.length?lQ(e,t):Ip(yj(hQ(i,s),s.values),n):zy(e,t)};function _j(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Cn(e,t,n):Zx(e)(e,t)}const fQ=5;function vj(e,t,n){const i=Math.max(t-fQ,0);return bV(n-e(i),t-i)}const On={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ZD=.001;function pQ({duration:e=On.duration,bounce:t=On.bounce,velocity:n=On.velocity,mass:i=On.mass}){let s,r,a=1-t;a=ca(On.minDamping,On.maxDamping,a),e=ca(On.minDuration,On.maxDuration,co(e)),a<1?(s=h=>{const f=h*a,m=f*e,y=f-n,v=nw(h,a),T=Math.exp(-m);return ZD-y/v*T},r=h=>{const m=h*a*e,y=m*n+n,v=Math.pow(a,2)*Math.pow(h,2)*e,T=Math.exp(-m),E=nw(Math.pow(h,2),a);return(-s(h)+ZD>0?-1:1)*((y-v)*T)/E}):(s=h=>{const f=Math.exp(-h*e),m=(h-n)*e+1;return-.001+f*m},r=h=>{const f=Math.exp(-h*e),m=(n-h)*(e*e);return f*m});const c=5/e,u=gQ(s,r,c);if(e=lo(e),isNaN(u))return{stiffness:On.stiffness,damping:On.damping,duration:e};{const h=Math.pow(u,2)*i;return{stiffness:h,damping:a*2*Math.sqrt(i*h),duration:e}}}const mQ=12;function gQ(e,t,n){let i=n;for(let s=1;s<mQ;s++)i=i-e(i)/t(i);return i}function nw(e,t){return e*Math.sqrt(1-t*t)}const yQ=["duration","bounce"],_Q=["stiffness","damping","mass"];function JD(e,t){return t.some(n=>e[n]!==void 0)}function vQ(e){let t={velocity:On.velocity,stiffness:On.stiffness,damping:On.damping,mass:On.mass,isResolvedFromDuration:!1,...e};if(!JD(e,_Q)&&JD(e,yQ))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,r=2*ca(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:On.mass,stiffness:s,damping:r}}else{const n=pQ(e);t={...t,...n,mass:On.mass},t.isResolvedFromDuration=!0}return t}function Hy(e=On.visualDuration,t=On.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],c={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:m,velocity:y,isResolvedFromDuration:v}=vQ({...n,velocity:-co(n.velocity||0)}),T=y||0,E=h/(2*Math.sqrt(u*f)),x=a-r,C=co(Math.sqrt(u/f)),P=Math.abs(x)<5;i||(i=P?On.restSpeed.granular:On.restSpeed.default),s||(s=P?On.restDelta.granular:On.restDelta.default);let N;if(E<1){const F=nw(C,E);N=G=>{const k=Math.exp(-E*C*G);return a-k*((T+E*C*x)/F*Math.sin(F*G)+x*Math.cos(F*G))}}else if(E===1)N=F=>a-Math.exp(-C*F)*(x+(T+C*x)*F);else{const F=C*Math.sqrt(E*E-1);N=G=>{const k=Math.exp(-E*C*G),D=Math.min(F*G,300);return a-k*((T+E*C*x)*Math.sinh(D)+F*x*Math.cosh(D))/F}}const q={calculatedDuration:v&&m||null,next:F=>{const G=N(F);if(v)c.done=F>=m;else{let k=0;E<1&&(k=F===0?lo(T):vj(N,F,G));const D=Math.abs(k)<=i,M=Math.abs(a-G)<=s;c.done=D&&M}return c.value=c.done?a:G,c},toString:()=>{const F=Math.min(Mx(q),Fy),G=TV(k=>q.next(F*k).value,F,30);return F+"ms "+G},toTransition:()=>{}};return q}Hy.applyToOptions=e=>{const t=yK(e,100,Hy);return e.ease=Ff()?t.ease:"easeOut",e.duration=lo(t.duration),e.type="keyframes",e};function tM({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:c,max:u,restDelta:h=.5,restSpeed:f}){const m=e[0],y={done:!1,value:m},v=D=>c!==void 0&&D<c||u!==void 0&&D>u,T=D=>c===void 0?u:u===void 0||Math.abs(c-D)<Math.abs(u-D)?c:u;let E=n*t;const x=m+E,C=a===void 0?x:a(x);C!==x&&(E=C-m);const P=D=>-E*Math.exp(-D/i),N=D=>C+P(D),q=D=>{const M=P(D),V=N(D);y.done=Math.abs(M)<=h,y.value=y.done?C:V};let F,G;const k=D=>{v(y.value)&&(F=D,G=Hy({keyframes:[y.value,T(y.value)],velocity:vj(N,D,y.value),damping:s,stiffness:r,restDelta:h,restSpeed:f}))};return k(0),{calculatedDuration:null,next:D=>{let M=!1;return!G&&F===void 0&&(M=!0,q(D),k(D)),F!==void 0&&D>=F?G.next(D-F):(!M&&q(D),y)}}}const bQ=Rp(.42,0,1,1),TQ=Rp(0,0,.58,1),bj=Rp(.42,0,.58,1),wQ=e=>Array.isArray(e)&&typeof e[0]!="number",EQ={linear:lr,easeIn:bQ,easeInOut:bj,easeOut:TQ,circIn:Yx,circInOut:tj,circOut:JV,backIn:Gx,backInOut:QV,backOut:XV,anticipate:ZV},eM=e=>{if(Rx(e)){vV(e.length===4);const[t,n,i,s]=e;return Rp(t,n,i,s)}else if(typeof e=="string")return EQ[e];return e};function xQ(e,t,n){const i=[],s=n||_j,r=e.length-1;for(let a=0;a<r;a++){let c=s(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||lr:t;c=Ip(u,c)}i.push(c)}return i}function SQ(e,t,{clamp:n=!0,ease:i,mixer:s}={}){const r=e.length;if(vV(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=xQ(t,i,s),u=c.length,h=f=>{if(a&&f<e[0])return t[0];let m=0;if(u>1)for(;m<e.length-2&&!(f<e[m+1]);m++);const y=Uf(e[m],e[m+1],f);return c[m](y)};return n?f=>h(ca(e[0],e[r-1],f)):h}function AQ(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const s=Uf(0,t,i);e.push(Cn(n,1,s))}}function CQ(e){const t=[0];return AQ(t,e.length-1),t}function RQ(e,t){return e.map(n=>n*t)}function IQ(e,t){return e.map(()=>t||bj).splice(0,e.length-1)}function qy({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const s=wQ(i)?i.map(eM):eM(i),r={done:!1,value:t[0]},a=RQ(n&&n.length===t.length?n:CQ(t),e),c=SQ(a,t,{ease:Array.isArray(s)?s:IQ(t,s)});return{calculatedDuration:e,next:u=>(r.value=c(u),r.done=u>=e,r)}}const DQ=e=>{const t=({timestamp:n})=>e(n);return{start:()=>hn.update(t,!0),stop:()=>dl(t),now:()=>Si.isProcessing?Si.timestamp:uo.now()}},MQ={decay:tM,inertia:tM,tween:qy,keyframes:qy,spring:Hy},NQ=e=>e/100;class Jx extends gj{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:i,element:s,keyframes:r}=this.options,a=(s==null?void 0:s.KeyframeResolver)||Qx,c=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new a(r,c,n,i,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=this.options,c=Ix(n)?n:MQ[n]||qy;let u,h;c!==qy&&typeof t[0]!="number"&&(u=Ip(NQ,_j(t[0],t[1])),t=[0,100]);const f=c({...this.options,keyframes:t});r==="mirror"&&(h=c({...this.options,keyframes:[...t].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=Mx(f));const{calculatedDuration:m}=f,y=m+s,v=y*(i+1)-s;return{generator:f,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:m,resolvedDuration:y,totalDuration:v}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:i}=this;if(!i){const{keyframes:D}=this.options;return{done:!0,value:D[D.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:a,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:h,totalDuration:f,resolvedDuration:m}=i;if(this.startTime===null)return r.next(0);const{delay:y,repeat:v,repeatType:T,repeatDelay:E,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-f/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const C=this.currentTime-y*(this.speed>=0?1:-1),P=this.speed>=0?C<0:C>f;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let N=this.currentTime,q=r;if(v){const D=Math.min(this.currentTime,f)/m;let M=Math.floor(D),V=D%1;!V&&D>=1&&(V=1),V===1&&M--,M=Math.min(M,v+1),!!(M%2)&&(T==="reverse"?(V=1-V,E&&(V-=E/m)):T==="mirror"&&(q=a)),N=ca(0,1,V)*m}const F=P?{done:!1,value:u[0]}:q.next(N);c&&(F.value=c(F.value));let{done:G}=F;!P&&h!==null&&(G=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return k&&s!==void 0&&(F.value=W_(u,this.options,s)),x&&x(F.value),k&&this.finish(),F}get duration(){const{resolved:t}=this;return t?co(t.calculatedDuration):0}get time(){return co(this.currentTime)}set time(t){t=lo(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=co(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=DQ,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}get finished(){return this.currentFinishedPromise}}const PQ=new Set(["opacity","clipPath","filter","transform"]),OQ=Ax(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$y=10,kQ=2e4;function LQ(e){return Ix(e.type)||e.type==="spring"||!EV(e.ease)}function VQ(e,t){const n=new Jx({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:e[0]};const s=[];let r=0;for(;!i.done&&r<kQ;)i=n.sample(r),s.push(i.value),r+=$y;return{times:void 0,keyframes:s,duration:r-$y,ease:"linear"}}const Tj={anticipate:ZV,backInOut:QV,circInOut:tj};function jQ(e){return e in Tj}class nM extends gj{constructor(t){super(t);const{name:n,motionValue:i,element:s,keyframes:r}=this.options;this.resolver=new mj(r,(a,c)=>this.onKeyframesResolved(a,c),n,i,s),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:i=300,times:s,ease:r,type:a,motionValue:c,name:u,startTime:h}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof r=="string"&&Ff()&&jQ(r)&&(r=Tj[r]),LQ(this.options)){const{onComplete:m,onUpdate:y,motionValue:v,element:T,...E}=this.options,x=VQ(t,E);t=x.keyframes,t.length===1&&(t[1]=t[0]),i=x.duration,s=x.times,r=x.ease,a="keyframes"}const f=gK(c.owner.current,u,t,{...this.options,duration:i,times:s,ease:r});return f.startTime=h??this.calcStartTime(),this.pendingTimeline?(DD(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:m}=this.options;c.set(W_(t,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:s,type:a,ease:r,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return co(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return co(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=lo(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return lr;const{animation:i}=n;DD(i,t)}return lr}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:i,duration:s,type:r,ease:a,times:c}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:f,onComplete:m,element:y,...v}=this.options,T=new Jx({...v,keyframes:i,duration:s,type:r,ease:a,times:c,isGenerator:!0}),E=lo(this.time);h.setWithVelocity(T.sample(E-$y).value,T.sample(E).value,$y)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:i,repeatDelay:s,repeatType:r,damping:a,type:c}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=n.owner.getProps();return OQ()&&i&&PQ.has(i)&&(i!=="transform"||!h)&&!u&&!s&&r!=="mirror"&&a!==0&&c!=="inertia"}}const UQ={type:"spring",stiffness:500,damping:25,restSpeed:10},FQ=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),BQ={type:"keyframes",duration:.8},zQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HQ=(e,{keyframes:t})=>t.length>2?BQ:Oc.has(e)?e.startsWith("scale")?FQ(t[1]):UQ:zQ;function qQ({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:c,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const tS=(e,t,n,i={},s,r)=>a=>{const c=Dx(i,e)||{},u=c.delay||i.delay||0;let{elapsed:h=0}=i;h=h-lo(u);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:y=>{t.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:r?void 0:s};qQ(c)||(f={...f,...HQ(e,f)}),f.duration&&(f.duration=lo(f.duration)),f.repeatDelay&&(f.repeatDelay=lo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(m=!0)),f.allowFlatten=!c.type&&!c.ease,m&&!r&&t.get()!==void 0){const y=W_(f.keyframes,c);if(y!==void 0)return hn.update(()=>{f.onUpdate(y),f.onComplete()}),new fK([])}return!r&&nM.supports(f)?new nM(f):new Jx(f)};function $Q({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function wj(e,t,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:a,...c}=t;i&&(r=i);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const f in c){const m=e.getValue(f,e.latestValues[f]??null),y=c[f];if(y===void 0||h&&$Q(h,f))continue;const v={delay:n,...Dx(r||{},f)};let T=!1;if(window.MotionHandoffAnimation){const x=WV(e);if(x){const C=window.MotionHandoffAnimation(x,f,hn);C!==null&&(v.startTime=C,T=!0)}}GT(e,f),m.start(tS(f,m,y,e.shouldReduceMotion&&$V.has(f)?{type:!1}:v,e,T));const E=m.animation;E&&u.push(E)}return a&&Promise.all(u).then(()=>{hn.update(()=>{a&&bX(e,a)})}),u}function iw(e,t,n={}){var u;const i=$f(e,t,n.type==="exit"?(u=e.presenceContext)==null?void 0:u.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(wj(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:y}=s;return WQ(e,t,f+h,m,y,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,f]=c==="beforeChildren"?[r,a]:[a,r];return h().then(()=>f())}else return Promise.all([r(),a(n.delay)])}function WQ(e,t,n=0,i=0,s=1,r){const a=[],c=(e.variantChildren.size-1)*i,u=s===1?(h=0)=>h*i:(h=0)=>c-h*i;return Array.from(e.variantChildren).sort(GQ).forEach((h,f)=>{h.notify("AnimationStart",t),a.push(iw(h,t,{...r,delay:n+u(f)}).then(()=>h.notify("AnimationComplete",t)))}),Promise.all(a)}function GQ(e,t){return e.sortNodePosition(t)}function YQ(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>iw(e,r,n));i=Promise.all(s)}else if(typeof t=="string")i=iw(e,t,n);else{const s=typeof t=="function"?$f(e,t,n.custom):t;i=Promise.all(wj(e,s,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function Ej(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const KQ=kx.length;function xj(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?xj(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<KQ;n++){const i=kx[n],s=e.props[i];(zf(s)||s===!1)&&(t[i]=s)}return t}const XQ=[...Ox].reverse(),QQ=Ox.length;function ZQ(e){return t=>Promise.all(t.map(({animation:n,options:i})=>YQ(e,n,i)))}function JQ(e){let t=ZQ(e),n=iM(),i=!0;const s=u=>(h,f)=>{var y;const m=$f(e,f,u==="exit"?(y=e.presenceContext)==null?void 0:y.custom:void 0);if(m){const{transition:v,transitionEnd:T,...E}=m;h={...h,...E,...T}}return h};function r(u){t=u(e)}function a(u){const{props:h}=e,f=xj(e.parent)||{},m=[],y=new Set;let v={},T=1/0;for(let x=0;x<QQ;x++){const C=XQ[x],P=n[C],N=h[C]!==void 0?h[C]:f[C],q=zf(N),F=C===u?P.isActive:null;F===!1&&(T=x);let G=N===f[C]&&N!==h[C]&&q;if(G&&i&&e.manuallyAnimateOnMount&&(G=!1),P.protectedKeys={...v},!P.isActive&&F===null||!N&&!P.prevProp||q_(N)||typeof N=="boolean")continue;const k=tZ(P.prevProp,N);let D=k||C===u&&P.isActive&&!G&&q||x>T&&q,M=!1;const V=Array.isArray(N)?N:[N];let B=V.reduce(s(C),{});F===!1&&(B={});const{prevResolvedValues:$={}}=P,H={...$,...B},Et=nt=>{D=!0,y.has(nt)&&(M=!0,y.delete(nt)),P.needsAnimating[nt]=!0;const yt=e.getValue(nt);yt&&(yt.liveStyle=!1)};for(const nt in H){const yt=B[nt],xt=$[nt];if(v.hasOwnProperty(nt))continue;let z=!1;WT(yt)&&WT(xt)?z=!Ej(yt,xt):z=yt!==xt,z?yt!=null?Et(nt):y.add(nt):yt!==void 0&&y.has(nt)?Et(nt):P.protectedKeys[nt]=!0}P.prevProp=N,P.prevResolvedValues=B,P.isActive&&(v={...v,...B}),i&&e.blockInitialAnimation&&(D=!1),D&&(!(G&&k)||M)&&m.push(...V.map(nt=>({animation:nt,options:{type:C}})))}if(y.size){const x={};if(typeof h.initial!="boolean"){const C=$f(e,Array.isArray(h.initial)?h.initial[0]:h.initial);C&&C.transition&&(x.transition=C.transition)}y.forEach(C=>{const P=e.getBaseTarget(C),N=e.getValue(C);N&&(N.liveStyle=!0),x[C]=P??null}),m.push({animation:x})}let E=!!m.length;return i&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(E=!1),i=!1,E?t(m):Promise.resolve()}function c(u,h){var m;if(n[u].isActive===h)return Promise.resolve();(m=e.variantChildren)==null||m.forEach(y=>{var v;return(v=y.animationState)==null?void 0:v.setActive(u,h)}),n[u].isActive=h;const f=a(u);for(const y in n)n[y].protectedKeys={};return f}return{animateChanges:a,setActive:c,setAnimateFunction:r,getState:()=>n,reset:()=>{n=iM(),i=!0}}}function tZ(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Ej(t,e):!1}function Kl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iM(){return{animate:Kl(!0),whileInView:Kl(),whileHover:Kl(),whileTap:Kl(),whileDrag:Kl(),whileFocus:Kl(),exit:Kl()}}class El{constructor(t){this.isMounted=!1,this.node=t}update(){}}class eZ extends El{constructor(t){super(t),t.animationState||(t.animationState=JQ(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();q_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let nZ=0;class iZ extends El{constructor(){super(...arguments),this.id=nZ++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const sZ={animation:{Feature:eZ},exit:{Feature:iZ}};function Gf(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function Dp(e){return{point:{x:e.pageX,y:e.pageY}}}const rZ=e=>t=>Px(t)&&e(t,Dp(t));function hf(e,t,n,i){return Gf(e,t,rZ(n),i)}function Sj({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function oZ({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function aZ(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const Aj=1e-4,lZ=1-Aj,cZ=1+Aj,Cj=.01,uZ=0-Cj,hZ=0+Cj;function rs(e){return e.max-e.min}function dZ(e,t,n){return Math.abs(e-t)<=n}function sM(e,t,n,i=.5){e.origin=i,e.originPoint=Cn(t.min,t.max,e.origin),e.scale=rs(n)/rs(t),e.translate=Cn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=lZ&&e.scale<=cZ||isNaN(e.scale))&&(e.scale=1),(e.translate>=uZ&&e.translate<=hZ||isNaN(e.translate))&&(e.translate=0)}function df(e,t,n,i){sM(e.x,t.x,n.x,i?i.originX:void 0),sM(e.y,t.y,n.y,i?i.originY:void 0)}function rM(e,t,n){e.min=n.min+t.min,e.max=e.min+rs(t)}function fZ(e,t,n){rM(e.x,t.x,n.x),rM(e.y,t.y,n.y)}function oM(e,t,n){e.min=t.min-n.min,e.max=e.min+rs(t)}function ff(e,t,n){oM(e.x,t.x,n.x),oM(e.y,t.y,n.y)}const aM=()=>({translate:0,scale:1,origin:0,originPoint:0}),ku=()=>({x:aM(),y:aM()}),lM=()=>({min:0,max:0}),Un=()=>({x:lM(),y:lM()});function rr(e){return[e("x"),e("y")]}function Ab(e){return e===void 0||e===1}function sw({scale:e,scaleX:t,scaleY:n}){return!Ab(e)||!Ab(t)||!Ab(n)}function ec(e){return sw(e)||Rj(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Rj(e){return cM(e.x)||cM(e.y)}function cM(e){return e&&e!=="0%"}function Wy(e,t,n){const i=e-n,s=t*i;return n+s}function uM(e,t,n,i,s){return s!==void 0&&(e=Wy(e,s,i)),Wy(e,n,i)+t}function rw(e,t=0,n=1,i,s){e.min=uM(e.min,t,n,i,s),e.max=uM(e.max,t,n,i,s)}function Ij(e,{x:t,y:n}){rw(e.x,t.translate,t.scale,t.originPoint),rw(e.y,n.translate,n.scale,n.originPoint)}const hM=.999999999999,dM=1.0000000000001;function pZ(e,t,n,i=!1){const s=n.length;if(!s)return;t.x=t.y=1;let r,a;for(let c=0;c<s;c++){r=n[c],a=r.projectionDelta;const{visualElement:u}=r.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Vu(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Ij(e,a)),i&&ec(r.latestValues)&&Vu(e,r.latestValues))}t.x<dM&&t.x>hM&&(t.x=1),t.y<dM&&t.y>hM&&(t.y=1)}function Lu(e,t){e.min=e.min+t,e.max=e.max+t}function fM(e,t,n,i,s=.5){const r=Cn(e.min,e.max,s);rw(e,t,n,r,i)}function Vu(e,t){fM(e.x,t.x,t.scaleX,t.scale,t.originX),fM(e.y,t.y,t.scaleY,t.scale,t.originY)}function Dj(e,t){return Sj(aZ(e.getBoundingClientRect(),t))}function mZ(e,t,n){const i=Dj(e,n),{scroll:s}=t;return s&&(Lu(i.x,s.offset.x),Lu(i.y,s.offset.y)),i}const Mj=({current:e})=>e?e.ownerDocument.defaultView:null,pM=(e,t)=>Math.abs(e-t);function gZ(e,t){const n=pM(e.x,t.x),i=pM(e.y,t.y);return Math.sqrt(n**2+i**2)}class Nj{constructor(t,n,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Rb(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=gZ(m.offset,{x:0,y:0})>=3;if(!y&&!v)return;const{point:T}=m,{timestamp:E}=Si;this.history.push({...T,timestamp:E});const{onStart:x,onMove:C}=this.handlers;y||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Cb(y,this.transformPagePoint),hn.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:v,onSessionEnd:T,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Rb(m.type==="pointercancel"?this.lastMoveEventInfo:Cb(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,x),T&&T(m,x)},!Px(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.contextWindow=s||window;const a=Dp(t),c=Cb(a,this.transformPagePoint),{point:u}=c,{timestamp:h}=Si;this.history=[{...u,timestamp:h}];const{onSessionStart:f}=n;f&&f(t,Rb(c,this.history)),this.removeListeners=Ip(hf(this.contextWindow,"pointermove",this.handlePointerMove),hf(this.contextWindow,"pointerup",this.handlePointerUp),hf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),dl(this.updatePoint)}}function Cb(e,t){return t?{point:t(e.point)}:e}function mM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Rb({point:e},t){return{point:e,delta:mM(e,Pj(t)),offset:mM(e,yZ(t)),velocity:_Z(t,.1)}}function yZ(e){return e[0]}function Pj(e){return e[e.length-1]}function _Z(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const s=Pj(e);for(;n>=0&&(i=e[n],!(s.timestamp-i.timestamp>lo(t)));)n--;if(!i)return{x:0,y:0};const r=co(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function vZ(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?Cn(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?Cn(n,e,i.max):Math.min(e,n)),e}function gM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function bZ(e,{top:t,left:n,bottom:i,right:s}){return{x:gM(e.x,n,s),y:gM(e.y,t,i)}}function yM(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function TZ(e,t){return{x:yM(e.x,t.x),y:yM(e.y,t.y)}}function wZ(e,t){let n=.5;const i=rs(e),s=rs(t);return s>i?n=Uf(t.min,t.max-i,e.min):i>s&&(n=Uf(e.min,e.max-s,t.min)),ca(0,1,n)}function EZ(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const ow=.35;function xZ(e=ow){return e===!1?e=0:e===!0&&(e=ow),{x:_M(e,"left","right"),y:_M(e,"top","bottom")}}function _M(e,t,n){return{min:vM(e,t),max:vM(e,n)}}function vM(e,t){return typeof e=="number"?e:e[t]||0}const SZ=new WeakMap;class AZ{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Un(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Dp(f).point)},r=(f,m)=>{const{drag:y,dragPropagation:v,onDragStart:T}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TK(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rr(x=>{let C=this.getAxisMotionValue(x).get()||0;if(ho.test(C)){const{projection:P}=this.visualElement;if(P&&P.layout){const N=P.layout.layoutBox[x];N&&(C=rs(N)*(parseFloat(C)/100))}}this.originPoint[x]=C}),T&&hn.postRender(()=>T(f,m)),GT(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(f,m)=>{const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:T,onDrag:E}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:x}=m;if(v&&this.currentDirection===null){this.currentDirection=CZ(x),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",m.point,x),this.updateAxis("y",m.point,x),this.visualElement.render(),E&&E(f,m)},c=(f,m)=>this.stop(f,m),u=()=>rr(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Nj(t,{onSessionStart:s,onStart:r,onMove:a,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:Mj(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&hn.postRender(()=>r(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:s}=this.getProps();if(!i||!dg(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let a=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(a=vZ(a,this.constraints[t],this.elastic[t])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&Pu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=bZ(i.layoutBox,t):this.constraints=!1,this.elastic=xZ(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&rr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=EZ(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Pu(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=mZ(i,s.root,this.visualElement.getTransformPagePoint());let a=TZ(s.layout.layoutBox,r);if(n){const c=n(oZ(a));this.hasMutatedConstraints=!!c,c&&(a=Sj(c))}return a}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=rr(f=>{if(!dg(f,n,this.currentDirection))return;let m=u&&u[f]||{};a&&(m={min:0,max:0});const y=s?200:1e6,v=s?40:1e7,T={type:"inertia",velocity:i?t[f]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(f,T)});return Promise.all(h).then(c)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return GT(this.visualElement,t),i.start(tS(t,i,0,n,this.visualElement,!1))}stopAnimation(){rr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){rr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){rr(n=>{const{drag:i}=this.getProps();if(!dg(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:c}=s.layout.layoutBox[n];r.set(t[n]-Cn(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Pu(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};rr(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const u=c.get();s[a]=wZ({min:u,max:u},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),rr(a=>{if(!dg(a,t,null))return;const c=this.getAxisMotionValue(a),{min:u,max:h}=this.constraints[a];c.set(Cn(u,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;SZ.set(this.visualElement,this);const t=this.visualElement.current,n=hf(t,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();Pu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),hn.read(i);const a=Gf(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(rr(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())});return()=>{a(),n(),r(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=ow,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:c}}}function dg(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function CZ(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class RZ extends El{constructor(t){super(t),this.removeGroupControls=lr,this.removeListeners=lr,this.controls=new AZ(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const bM=e=>(t,n)=>{e&&hn.postRender(()=>e(t,n))};class IZ extends El{constructor(){super(...arguments),this.removePointerDownListener=lr}onPointerDown(t){this.session=new Nj(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Mj(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:bM(t),onStart:bM(n),onMove:i,onEnd:(r,a)=>{delete this.session,s&&hn.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=hf(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Kg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function TM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Md={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Wt.test(e))e=parseFloat(e);else return e;const n=TM(e,t.target.x),i=TM(e,t.target.y);return`${n}% ${i}%`}},DZ={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,s=fl.parse(e);if(s.length>5)return i;const r=fl.createTransformer(e),a=typeof s[0]!="number"?1:0,c=n.x.scale*t.x,u=n.y.scale*t.y;s[0+a]/=c,s[1+a]/=u;const h=Cn(c,u,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),r(s)}};class MZ extends R.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;YK(NZ),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Kg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,a=i.projection;return a&&(a.isPresent=r,s||t.layoutDependency!==n||n===void 0||t.isPresent!==r?a.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?a.promote():a.relegate()||hn.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Nx.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Oj(e){const[t,n]=_V(),i=R.useContext(bx);return S.jsx(MZ,{...e,layoutGroup:i,switchLayoutGroup:R.useContext(NV),isPresent:t,safeToRemove:n})}const NZ={borderRadius:{...Md,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Md,borderTopRightRadius:Md,borderBottomLeftRadius:Md,borderBottomRightRadius:Md,boxShadow:DZ};function PZ(e,t,n){const i=Wi(e)?e:Bf(e);return i.start(tS("",i,t,n)),i.animation}function OZ(e){return e instanceof SVGElement&&e.tagName!=="svg"}const kZ=(e,t)=>e.depth-t.depth;class LZ{constructor(){this.children=[],this.isDirty=!1}add(t){xx(this.children,t),this.isDirty=!0}remove(t){Sx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(kZ),this.isDirty=!1,this.children.forEach(t)}}function VZ(e,t){const n=uo.now(),i=({timestamp:s})=>{const r=s-n;r>=t&&(dl(i),e(r-t))};return hn.read(i,!0),()=>dl(i)}const kj=["TopLeft","TopRight","BottomLeft","BottomRight"],jZ=kj.length,wM=e=>typeof e=="string"?parseFloat(e):e,EM=e=>typeof e=="number"||Wt.test(e);function UZ(e,t,n,i,s,r){s?(e.opacity=Cn(0,n.opacity!==void 0?n.opacity:1,FZ(i)),e.opacityExit=Cn(t.opacity!==void 0?t.opacity:1,0,BZ(i))):r&&(e.opacity=Cn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<jZ;a++){const c=`border${kj[a]}Radius`;let u=xM(t,c),h=xM(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||EM(u)===EM(h)?(e[c]=Math.max(Cn(wM(u),wM(h),i),0),(ho.test(h)||ho.test(u))&&(e[c]+="%")):e[c]=h}(t.rotate||n.rotate)&&(e.rotate=Cn(t.rotate||0,n.rotate||0,i))}function xM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const FZ=Lj(0,.5,JV),BZ=Lj(.5,.95,lr);function Lj(e,t,n){return i=>i<e?0:i>t?1:n(Uf(e,t,i))}function SM(e,t){e.min=t.min,e.max=t.max}function ir(e,t){SM(e.x,t.x),SM(e.y,t.y)}function AM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function CM(e,t,n,i,s){return e-=t,e=Wy(e,1/n,i),s!==void 0&&(e=Wy(e,1/s,i)),e}function zZ(e,t=0,n=1,i=.5,s,r=e,a=e){if(ho.test(t)&&(t=parseFloat(t),t=Cn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let c=Cn(r.min,r.max,i);e===r&&(c-=t),e.min=CM(e.min,t,n,c,s),e.max=CM(e.max,t,n,c,s)}function RM(e,t,[n,i,s],r,a){zZ(e,t[n],t[i],t[s],t.scale,r,a)}const HZ=["x","scaleX","originX"],qZ=["y","scaleY","originY"];function IM(e,t,n,i){RM(e.x,t,HZ,n?n.x:void 0,i?i.x:void 0),RM(e.y,t,qZ,n?n.y:void 0,i?i.y:void 0)}function DM(e){return e.translate===0&&e.scale===1}function Vj(e){return DM(e.x)&&DM(e.y)}function MM(e,t){return e.min===t.min&&e.max===t.max}function $Z(e,t){return MM(e.x,t.x)&&MM(e.y,t.y)}function NM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function jj(e,t){return NM(e.x,t.x)&&NM(e.y,t.y)}function PM(e){return rs(e.x)/rs(e.y)}function OM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class WZ{constructor(){this.members=[]}add(t){xx(this.members,t),t.scheduleRender()}remove(t){if(Sx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GZ(e,t,n){let i="";const s=e.x.translate/t.x,r=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:m,rotateY:y,skewX:v,skewY:T}=n;h&&(i=`perspective(${h}px) ${i}`),f&&(i+=`rotate(${f}deg) `),m&&(i+=`rotateX(${m}deg) `),y&&(i+=`rotateY(${y}deg) `),v&&(i+=`skewX(${v}deg) `),T&&(i+=`skewY(${T}deg) `)}const c=e.x.scale*t.x,u=e.y.scale*t.y;return(c!==1||u!==1)&&(i+=`scale(${c}, ${u})`),i||"none"}const Ib=["","X","Y","Z"],YZ={visibility:"hidden"},kM=1e3;let KZ=0;function Db(e,t,n,i){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function Uj(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=WV(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",hn,!(s||r))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&Uj(i)}function Fj({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},c=t==null?void 0:t()){this.id=KZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ZZ),this.nodes.forEach(iJ),this.nodes.forEach(sJ),this.nodes.forEach(JZ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new LZ)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Cx),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=OZ(a),this.instance=a;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(h||u)&&(this.isLayoutDirty=!0),e){let m;const y=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=VZ(y,250),Kg.hasAnimatedSinceResize&&(Kg.hasAnimatedSinceResize=!1,this.nodes.forEach(VM))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||f.getDefaultTransition()||cJ,{onLayoutAnimationStart:x,onLayoutAnimationComplete:C}=f.getProps(),P=!this.targetLayout||!jj(this.targetLayout,T),N=!y&&v;if(this.options.layoutRoot||this.resumeFrom||N||y&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,N);const q={...Dx(E,"layout"),onPlay:x,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(q.delay=0,q.type=!1),this.startAnimation(q)}else y||VM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,dl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rJ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Uj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(LM);return}this.isUpdating||this.nodes.forEach(eJ),this.isUpdating=!1,this.nodes.forEach(nJ),this.nodes.forEach(XZ),this.nodes.forEach(QZ),this.clearAllSnapshots();const c=uo.now();Si.delta=ca(0,1e3/60,c-Si.timestamp),Si.timestamp=c,Si.isProcessing=!0,Tb.update.process(Si),Tb.preRender.process(Si),Tb.render.process(Si),Si.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Nx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tJ),this.sharedNodes.forEach(oJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!rs(this.snapshot.measuredBox.x)&&!rs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Un(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Vj(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;a&&(c||ec(this.latestValues)||f)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),uJ(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:a}=this.options;if(!a)return Un();const c=a.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(hJ))){const{scroll:f}=this.root;f&&(Lu(c.x,f.offset.x),Lu(c.y,f.offset.y))}return c}removeElementScroll(a){var u;const c=Un();if(ir(c,a),(u=this.scroll)!=null&&u.wasRoot)return c;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:m,options:y}=f;f!==this.root&&m&&y.layoutScroll&&(m.wasRoot&&ir(c,a),Lu(c.x,m.offset.x),Lu(c.y,m.offset.y))}return c}applyTransform(a,c=!1){const u=Un();ir(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Vu(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ec(f.latestValues)&&Vu(u,f.latestValues)}return ec(this.latestValues)&&Vu(u,this.latestValues),u}removeTransform(a){const c=Un();ir(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!ec(h.latestValues))continue;sw(h.latestValues)&&h.updateSnapshot();const f=Un(),m=h.measurePageBox();ir(f,m),IM(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return ec(this.latestValues)&&IM(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Si.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var y;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=Si.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Un(),this.relativeTargetOrigin=Un(),ff(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),ir(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Un(),this.targetWithTransforms=Un()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ir(this.target,this.layout.layoutBox),Ij(this.target,this.targetDelta)):ir(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Un(),this.relativeTargetOrigin=Un(),ff(this.relativeTargetOrigin,this.target,v.target),ir(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||sw(this.parent.latestValues)||Rj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var T;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Si.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;ir(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;pZ(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Un());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(AM(this.prevProjectionDelta.x,this.projectionDelta.x),AM(this.prevProjectionDelta.y,this.projectionDelta.y)),df(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!OM(this.projectionDelta.x,this.prevProjectionDelta.x)||!OM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ku(),this.projectionDelta=ku(),this.projectionDeltaWithTransform=ku()}setAnimationOrigin(a,c=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},m=ku();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=Un(),v=u?u.source:void 0,T=this.layout?this.layout.source:void 0,E=v!==T,x=this.getStack(),C=!x||x.members.length<=1,P=!!(E&&!C&&this.options.crossfade===!0&&!this.path.some(lJ));this.animationProgress=0;let N;this.mixTargetDelta=q=>{const F=q/1e3;jM(m.x,a.x,F),jM(m.y,a.y,F),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ff(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aJ(this.relativeTarget,this.relativeTargetOrigin,y,F),N&&$Z(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Un()),ir(N,this.relativeTarget)),E&&(this.animationValues=f,UZ(f,h,this.latestValues,F,P,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(dl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hn.update(()=>{Kg.hasAnimatedSinceResize=!0,this.currentAnimation=PZ(0,kM,{...a,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:f}=a;if(!(!c||!u||!h)){if(this!==a&&this.layout&&h&&Bj(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Un();const m=rs(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+m;const y=rs(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+y}ir(c,u),Vu(c,f),df(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new WZ),this.sharedNodes.get(a).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var c;const{layoutId:a}=this.options;return a?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:a}=this.options;return a?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&Db("z",a,h,this.animationValues);for(let f=0;f<Ib.length;f++)Db(`rotate${Ib[f]}`,a,h,this.animationValues),Db(`skew${Ib[f]}`,a,h,this.animationValues);a.render();for(const f in h)a.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return YZ;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Yg(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Yg(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ec(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=GZ(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?c.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Hf){if(f[v]===void 0)continue;const{correct:T,applyTo:E,isCSSVariable:x}=Hf[v],C=c.transform==="none"?f[v]:T(f[v],h);if(E){const P=E.length;for(let N=0;N<P;N++)c[E[N]]=C}else x?this.options.visualElement.renderState.vars[v]=C:c[v]=C}return this.options.layoutId&&(c.pointerEvents=h===this?Yg(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(LM),this.root.sharedNodes.clear()}}}function XZ(e){e.updateLayout()}function QZ(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=e.layout,{animationType:r}=e.options,a=t.source!==e.layout.source;r==="size"?rr(m=>{const y=a?t.measuredBox[m]:t.layoutBox[m],v=rs(y);y.min=i[m].min,y.max=y.min+v}):Bj(r,t.layoutBox,i)&&rr(m=>{const y=a?t.measuredBox[m]:t.layoutBox[m],v=rs(i[m]);y.max=y.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+v)});const c=ku();df(c,i,t.layoutBox);const u=ku();a?df(u,e.applyTransform(s,!0),t.measuredBox):df(u,i,t.layoutBox);const h=!Vj(c);let f=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:y,layout:v}=m;if(y&&v){const T=Un();ff(T,t.layoutBox,y.layoutBox);const E=Un();ff(E,i,v.layoutBox),jj(T,E)||(f=!0),m.options.layoutRoot&&(e.relativeTarget=E,e.relativeTargetOrigin=T,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function ZZ(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function JZ(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tJ(e){e.clearSnapshot()}function LM(e){e.clearMeasurements()}function eJ(e){e.isLayoutDirty=!1}function nJ(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function VM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function iJ(e){e.resolveTargetDelta()}function sJ(e){e.calcProjection()}function rJ(e){e.resetSkewAndRotation()}function oJ(e){e.removeLeadSnapshot()}function jM(e,t,n){e.translate=Cn(t.translate,0,n),e.scale=Cn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function UM(e,t,n,i){e.min=Cn(t.min,n.min,i),e.max=Cn(t.max,n.max,i)}function aJ(e,t,n,i){UM(e.x,t.x,n.x,i),UM(e.y,t.y,n.y,i)}function lJ(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const cJ={duration:.45,ease:[.4,0,.1,1]},FM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),BM=FM("applewebkit/")&&!FM("chrome/")?Math.round:lr;function zM(e){e.min=BM(e.min),e.max=BM(e.max)}function uJ(e){zM(e.x),zM(e.y)}function Bj(e,t,n){return e==="position"||e==="preserve-aspect"&&!dZ(PM(t),PM(n),.2)}function hJ(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const dJ=Fj({attachResizeListener:(e,t)=>Gf(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Mb={current:void 0},zj=Fj({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Mb.current){const e=new dJ({});e.mount(window),e.setOptions({layoutScroll:!0}),Mb.current=e}return Mb.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),fJ={pan:{Feature:IZ},drag:{Feature:RZ,ProjectionNode:zj,MeasureLayout:Oj}};function HM(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,r=i[s];r&&hn.postRender(()=>r(t,Dp(t)))}class pJ extends El{mount(){const{current:t}=this.node;t&&(this.unmount=EK(t,(n,i)=>(HM(this.node,i,"Start"),s=>HM(this.node,s,"End"))))}unmount(){}}class mJ extends El{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ip(Gf(this.node.current,"focus",()=>this.onFocus()),Gf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qM(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),r=i[s];r&&hn.postRender(()=>r(t,Dp(t)))}class gJ extends El{mount(){const{current:t}=this.node;t&&(this.unmount=CK(t,(n,i)=>(qM(this.node,i,"Start"),(s,{success:r})=>qM(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const aw=new WeakMap,Nb=new WeakMap,yJ=e=>{const t=aw.get(e.target);t&&t(e)},_J=e=>{e.forEach(yJ)};function vJ({root:e,...t}){const n=e||document;Nb.has(n)||Nb.set(n,{});const i=Nb.get(n),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(_J,{root:e,...t})),i[s]}function bJ(e,t,n){const i=vJ(t);return aw.set(e,n),i.observe(e),()=>{aw.delete(e),i.unobserve(e)}}const TJ={some:0,all:1};class wJ extends El{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=t,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:TJ[s]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,r&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),y=h?f:m;y&&y(u)};return bJ(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(EJ(t,n))&&this.startObserver()}unmount(){}}function EJ({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const xJ={inView:{Feature:wJ},tap:{Feature:gJ},focus:{Feature:mJ},hover:{Feature:pJ}},SJ={layout:{ProjectionNode:zj,MeasureLayout:Oj}},lw={current:null},Hj={current:!1};function AJ(){if(Hj.current=!0,!!wx)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>lw.current=e.matches;e.addListener(t),t()}else lw.current=!1}const CJ=[...pj,Ui,fl],RJ=e=>CJ.find(fj(e)),IJ=new WeakMap;function DJ(e,t,n){for(const i in t){const s=t[i],r=n[i];if(Wi(s))e.addValue(i,s);else if(Wi(r))e.addValue(i,Bf(s,{owner:e}));else if(r!==s)if(e.hasValue(i)){const a=e.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(i);e.addValue(i,Bf(a!==void 0?a:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const $M=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class MJ{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=uo.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,hn.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:f}=a;this.onUpdate=f,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=$_(n),this.isVariantNode=DV(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in y){const T=y[v];u[v]!==void 0&&Wi(T)&&T.set(u[v],!1)}}mount(t){this.current=t,IJ.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Hj.current||AJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),dl(this.notifyUpdate),dl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Oc.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&hn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),r(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in rh){const n=rh[t];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Un()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<$M.length;i++){const s=$M[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=t[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=DJ(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Bf(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(hj(i)||ej(i))?i=parseFloat(i):!RJ(i)&&fl.test(n)&&(i=lj(t,n)),this.setBaseTarget(t,Wi(i)?i.get():i)),Wi(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=$x(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);a&&(i=a[t])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Wi(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Cx),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class qj extends MJ{constructor(){super(...arguments),this.KeyframeResolver=mj}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Wi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function NJ(e){return window.getComputedStyle(e)}class PJ extends qj{constructor(){super(...arguments),this.type="html",this.renderInstance=BV}readValueFromInstance(t,n){if(Oc.has(n))return $X(t,n);{const i=NJ(t),s=(Vx(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Dj(t,n)}build(t,n,i){Fx(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return Wx(t,n,i)}}class OJ extends qj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Un,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&FV(this.current,this.renderState)}}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Oc.has(n)){const i=aj(n);return i&&i.default||0}return n=zV.has(n)?n:Lx(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return qV(t,n,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&hn.postRender(this.updateDimensions)}build(t,n,i){Hx(t,n,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,i,s){HV(t,n,i,s)}mount(t){this.isSVGTag=qx(t.tagName),super.mount(t)}}const kJ=(e,t)=>zx(e)?new OJ(t):new PJ(t,{allowProjection:e!==R.Fragment}),LJ=_X({...sZ,...xJ,...fJ,...SJ},kJ),nc=OK(LJ),Yf={Debeng:100,"Cadian (Linos Res.- Coop)":130,"Cadian (Kimhaf- Molitos)":150,Tuangan:170,Awa:250,"Pi-ket":300,"Topdac ES":400,Bangawan:480,Besil:500,Polis:600,Tolmod:800,Wagi:900,Shekdan:1e3,"Batu ILI PS":1500,Pual:350,Nalseb:600,Poblacion:600,Sowe:700,Maguey:1200,Pasdong:1700,Catingel:120,Pareg:140,"Kinaong (Baldinos Res)":150,Bileng:170,Cato:250,Balat:350,Segib:400,"Caliking Proper":300,Conet:350,Kesbong:350,Pokit:600,"KM 28":100,"Usap to Saddle":120,Wingian:140,"Siko Curve":150,"Atiws Res.":170,"Saw Mill":200,"KM.24":200,Galilea:220,"KM.22 (Bilis Junction)":250,Bilis:600,"KM.21 (Cagui-ing Elem.)":250,"Labey Junction to coruz junction":300,Acop:600,Tomay:700,"Camp Dangwa":800,"KM.5":1e3,Baguio:1500,"KM.31":100,"KM.32 (Food way-paasin)":130,Tolding:200,Menac:250,"KM.34":150,Japasan:160,"KM.35 (Amcay to Moltio)":170,"KM.36":200,"KM.37":220,"KM.38":250,"Bet-Ang":250,Apunan:300,"Aduyanan ES":300,"Sapuan Junction to Abiangan Brgy Hall":300,Gueweng:350,Lebten:400,Labban:400,Bokao:600,Bonglo:600,Sayangan:700,Abatan:3800,Antabeng:250,Patapat:300,Japa:320,Palutan:250,"Menios Res.":320,"Guzman, Rudy Res.":350,"Japa ES":350,Coop:350,"Talite Junction":500,Ketneg:800,"Tag-Ulo":1e3};function $j(e,t,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties={},i.geometry=e,i}function VJ(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!WM(e[0])||!WM(e[1]))throw new Error("coordinates must contain numbers");return $j({type:"Point",coordinates:e},t,n)}function jJ(e,t,n={}){for(const s of e){if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(s[s.length-1].length!==s[0].length)throw new Error("First and last Position are not equivalent.");for(let r=0;r<s[s.length-1].length;r++)if(s[s.length-1][r]!==s[0][r])throw new Error("First and last Position are not equivalent.")}return $j({type:"Polygon",coordinates:e},t,n)}function WM(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}const ea=11102230246251565e-32,ji=134217729,UJ=(3+8*ea)*ea;function Pb(e,t,n,i,s){let r,a,c,u,h=t[0],f=i[0],m=0,y=0;f>h==f>-h?(r=h,h=t[++m]):(r=f,f=i[++y]);let v=0;if(m<e&&y<n)for(f>h==f>-h?(a=h+r,c=r-(a-h),h=t[++m]):(a=f+r,c=r-(a-f),f=i[++y]),r=a,c!==0&&(s[v++]=c);m<e&&y<n;)f>h==f>-h?(a=r+h,u=a-r,c=r-(a-u)+(h-u),h=t[++m]):(a=r+f,u=a-r,c=r-(a-u)+(f-u),f=i[++y]),r=a,c!==0&&(s[v++]=c);for(;m<e;)a=r+h,u=a-r,c=r-(a-u)+(h-u),h=t[++m],r=a,c!==0&&(s[v++]=c);for(;y<n;)a=r+f,u=a-r,c=r-(a-u)+(f-u),f=i[++y],r=a,c!==0&&(s[v++]=c);return(r!==0||v===0)&&(s[v++]=r),v}function FJ(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Mp(e){return new Float64Array(e)}const BJ=(3+16*ea)*ea,zJ=(2+12*ea)*ea,HJ=(9+64*ea)*ea*ea,Eu=Mp(4),GM=Mp(8),YM=Mp(12),KM=Mp(16),ss=Mp(4);function qJ(e,t,n,i,s,r,a){let c,u,h,f,m,y,v,T,E,x,C,P,N,q,F,G,k,D;const M=e-s,V=n-s,B=t-r,$=i-r;q=M*$,y=ji*M,v=y-(y-M),T=M-v,y=ji*$,E=y-(y-$),x=$-E,F=T*x-(q-v*E-T*E-v*x),G=B*V,y=ji*B,v=y-(y-B),T=B-v,y=ji*V,E=y-(y-V),x=V-E,k=T*x-(G-v*E-T*E-v*x),C=F-k,m=F-C,Eu[0]=F-(C+m)+(m-k),P=q+C,m=P-q,N=q-(P-m)+(C-m),C=N-G,m=N-C,Eu[1]=N-(C+m)+(m-G),D=P+C,m=D-P,Eu[2]=P-(D-m)+(C-m),Eu[3]=D;let H=FJ(4,Eu),Et=zJ*a;if(H>=Et||-H>=Et||(m=e-M,c=e-(M+m)+(m-s),m=n-V,h=n-(V+m)+(m-s),m=t-B,u=t-(B+m)+(m-r),m=i-$,f=i-($+m)+(m-r),c===0&&u===0&&h===0&&f===0)||(Et=HJ*a+UJ*Math.abs(H),H+=M*f+$*c-(B*h+V*u),H>=Et||-H>=Et))return H;q=c*$,y=ji*c,v=y-(y-c),T=c-v,y=ji*$,E=y-(y-$),x=$-E,F=T*x-(q-v*E-T*E-v*x),G=u*V,y=ji*u,v=y-(y-u),T=u-v,y=ji*V,E=y-(y-V),x=V-E,k=T*x-(G-v*E-T*E-v*x),C=F-k,m=F-C,ss[0]=F-(C+m)+(m-k),P=q+C,m=P-q,N=q-(P-m)+(C-m),C=N-G,m=N-C,ss[1]=N-(C+m)+(m-G),D=P+C,m=D-P,ss[2]=P-(D-m)+(C-m),ss[3]=D;const _t=Pb(4,Eu,4,ss,GM);q=M*f,y=ji*M,v=y-(y-M),T=M-v,y=ji*f,E=y-(y-f),x=f-E,F=T*x-(q-v*E-T*E-v*x),G=B*h,y=ji*B,v=y-(y-B),T=B-v,y=ji*h,E=y-(y-h),x=h-E,k=T*x-(G-v*E-T*E-v*x),C=F-k,m=F-C,ss[0]=F-(C+m)+(m-k),P=q+C,m=P-q,N=q-(P-m)+(C-m),C=N-G,m=N-C,ss[1]=N-(C+m)+(m-G),D=P+C,m=D-P,ss[2]=P-(D-m)+(C-m),ss[3]=D;const X=Pb(_t,GM,4,ss,YM);q=c*f,y=ji*c,v=y-(y-c),T=c-v,y=ji*f,E=y-(y-f),x=f-E,F=T*x-(q-v*E-T*E-v*x),G=u*h,y=ji*u,v=y-(y-u),T=u-v,y=ji*h,E=y-(y-h),x=h-E,k=T*x-(G-v*E-T*E-v*x),C=F-k,m=F-C,ss[0]=F-(C+m)+(m-k),P=q+C,m=P-q,N=q-(P-m)+(C-m),C=N-G,m=N-C,ss[1]=N-(C+m)+(m-G),D=P+C,m=D-P,ss[2]=P-(D-m)+(C-m),ss[3]=D;const nt=Pb(X,YM,4,ss,KM);return KM[nt-1]}function $J(e,t,n,i,s,r){const a=(t-r)*(n-s),c=(e-s)*(i-r),u=a-c,h=Math.abs(a+c);return Math.abs(u)>=BJ*h?u:-qJ(e,t,n,i,s,r,h)}function WJ(e,t){var n,i,s=0,r,a,c,u,h,f,m,y=e[0],v=e[1],T=t.length;for(n=0;n<T;n++){i=0;var E=t[n],x=E.length-1;if(f=E[0],f[0]!==E[x][0]&&f[1]!==E[x][1])throw new Error("First and last coordinates in a ring must be the same");for(a=f[0]-y,c=f[1]-v,i;i<x;i++){if(m=E[i+1],u=m[0]-y,h=m[1]-v,c===0&&h===0){if(u<=0&&a>=0||a<=0&&u>=0)return 0}else if(h>=0&&c<=0||h<=0&&c>=0){if(r=$J(a,u,c,h,0,0),r===0)return 0;(r>0&&h>0&&c<=0||r<0&&h<=0&&c>0)&&s++}f=m,c=h,a=u}}return s%2!==0}function GJ(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function YJ(e){return e.type==="Feature"?e.geometry:e}function KJ(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const i=GJ(e),s=YJ(t),r=s.type,a=t.bbox;let c=s.coordinates;if(a&&XJ(i,a)===!1)return!1;r==="Polygon"&&(c=[c]);let u=!1;for(var h=0;h<c.length;++h){const f=WJ(i,c[h]);if(f===0)return!n.ignoreBoundary;f&&(u=!0)}return u}function XJ(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}var QJ=KJ;const ZJ=jJ([[[120.8042,16.6955],[120.8042,16.6965],[120.8052,16.6965],[120.8052,16.6955],[120.8042,16.6955]]]);function JJ(e){return QJ(VJ(e),ZJ)}function ttt(){const[e,t]=R.useState(null),[n,i]=R.useState(!1),[s,r]=R.useState(null);return R.useEffect(()=>{if(!navigator.geolocation){r("Geolocation not supported.");return}const a=navigator.geolocation.watchPosition(c=>{const{latitude:u,longitude:h}=c.coords;t({latitude:u,longitude:h}),i(JJ([h,u])),r(null)},()=>{r("Location access denied.")},{enableHighAccuracy:!0,maximumAge:1e4,timeout:5e3});return()=>navigator.geolocation.clearWatch(a)},[]),{coords:e,insideParadahan:n,error:s}}const ett=5,Wj=R.createContext(void 0),ntt=()=>{const e=R.useContext(Wj);if(!e)throw new Error("useRide must be used within a RideProvider");return e},itt=({children:e})=>{const[t,n]=R.useState(null),[i,s]=R.useState(!1),[r,a]=R.useState(!1),[c,u]=R.useState(()=>typeof window<"u"?localStorage.getItem("hasJoinedQueue")==="true":!1),[h,f]=R.useState([]),[m,y]=R.useState(null),[v,T]=R.useState(null),[E,x]=R.useState(!1),[C,P]=R.useState(null),[N,q]=R.useState(null),[F,G]=R.useState("--:--"),[k,D]=R.useState("Offline"),[M,V]=R.useState(null),[B,$]=R.useState(!1),[H,Et]=R.useState(null),[_t,X]=R.useState(0),[nt,yt]=R.useState(null),[xt,z]=R.useState(""),{coords:it,insideParadahan:lt,error:ct}=ttt();R.useEffect(()=>{const Tt=localStorage.getItem("driver");Tt&&n(JSON.parse(Tt))},[]),R.useEffect(()=>{localStorage.setItem("hasJoinedQueue",c?"true":"false")},[c]),R.useEffect(()=>{const Tt=localStorage.getItem("unsyncedRide");if(Tt&&lt){const Ct=JSON.parse(Tt);$g(Fn(rn,"ride_logs"),Ct).then(()=>localStorage.removeItem("unsyncedRide")).catch(It=>console.error("Sync failed:",It))}},[lt]),R.useEffect(()=>{lt&&!r?s(!0):!lt&&!E&&s(!1)},[lt,r,E]),R.useEffect(()=>{D(i?E?"In Ride":"Waiting":"Offline")},[i,E]),R.useEffect(()=>{(async()=>{if(t&&i&&lt&&!c&&!r){const Ct=ce(rn,"queues",t.id),It=ce(rn,"drivers",t.id);try{const zt=un.now();if(await mn(Ct,{driverId:t.id,plateNumber:t.plate,joinedAt:zt}),await mn(It,{status:"waiting"},{merge:!0}),T(zt),u(!0),nt){const Pt=Math.round((zt.toMillis()-nt.startedAt.getTime())/6e4),Mt={...nt,travelTimeMinutes:Pt};try{await $g(Fn(rn,"ride_logs"),Mt),yt(null)}catch(he){console.error("Failed to log ride:",he),localStorage.setItem("unsyncedRide",JSON.stringify(Mt)),yt(null)}}}catch(zt){console.error("Failed to join queue:",zt),z(" Failed to join queue. Retrying..."),setTimeout(()=>z(""),3e3)}}})()},[lt,it,t,c,r,i,nt]),R.useEffect(()=>{(async()=>{if(t&&c&&!lt&&it){const Ct=ce(rn,"drivers",t.id);try{if(await Yo(ce(rn,"queues",t.id)),await mn(Ct,{status:"in ride",leftAt:un.now()},{merge:!0}),u(!1),y(null),f([]),T(null),z(" You left the paradahan. Ride starting..."),setTimeout(()=>z(""),4e3),$(!0),q({lat:it.latitude,lng:it.longitude}),H){const zt=Math.round((new Date().getTime()-H.getTime())/6e4);X(zt>0?zt:0)}}catch(It){console.error("Failed to remove from queue:",It),z(" Failed to update queue on exit. Please check connection."),setTimeout(()=>z(""),4e3)}}})()},[lt,t,c,it,H]),R.useEffect(()=>{(async()=>{if(E&&lt&&it&&C&&B){const Ct=new Date,It={lat:it.latitude,lng:it.longitude},zt=M?Yf[M]:0,Pt=_t,Mt={driverId:t==null?void 0:t.id,plateNumber:t==null?void 0:t.plate,startedAt:C,endedAt:Ct,travelTimeMinutes:Math.round((Ct.getTime()-C.getTime())/6e4),pickupLocation:N,dropoffLocation:It,dropoffName:M,waitTimeMinutes:Pt,estimatedEarnings:zt,timestamp:un.now(),queuePosition:m??null};yt(Mt),Et(Ct),x(!1),P(null),q(null),V(null),$(!1),T(null),X(0),z(` Ride completed at ${M}  ${zt}`),setTimeout(()=>z(""),5e3)}})()},[lt,it,C,M,B,m,t,_t,N]),R.useEffect(()=>{const Tt=$o(Fn(rn,"queues"),Hd("joinedAt")),Ct=$d(Tt,It=>{const zt=It.docs.map(Mt=>Mt.data());f(zt);const Pt=zt.findIndex(Mt=>Mt.driverId===(t==null?void 0:t.id));if(E||!c)y(null),T(null);else if(Pt>=0){y(Pt+1);const Mt=zt[Pt];Mt.joinedAt?T(Mt.joinedAt):T(null)}else y(null),T(null)});return()=>Ct()},[t,E,c]),R.useEffect(()=>{let Tt=null,Ct=m?m*ett*60:0;const It=()=>{if(Ct>0){const zt=Math.floor(Ct/60),Pt=Ct%60;G(`${String(zt).padStart(2,"0")}:${String(Pt).padStart(2,"0")}`),Ct-=1}else G("00:00"),Tt&&clearInterval(Tt)};return m&&!E?(It(),Tt=setInterval(It,1e3)):G("--:--"),()=>{Tt&&clearInterval(Tt)}},[m,E]);const Bt={driver:t,isOnline:i,manualOffline:r,hasJoined:c,queue:h,position:m,driverJoinedAt:v,rideStarted:E,rideStartTime:C,pickupLocation:N,countdown:F,rideStatus:k,selectedDestination:M,hasExitedParadahan:B,lastReturnTime:H,currentWaitTimeMinutes:_t,pendingRideLog:nt,coords:it,insideParadahan:lt,gpsError:ct,toastMsg:xt,setSelectedDestination:V,handleGoOffline:async()=>{if(!t)return;const Tt=ce(rn,"drivers",t.id);try{await Yo(ce(rn,"queues",t.id)),await mn(Tt,{status:"offline"},{merge:!0}),u(!1),y(null),f([]),T(null),a(!0),s(!1),z(" You are now offline."),setTimeout(()=>z(""),3e3)}catch(Ct){console.error("Failed to go offline:",Ct),z(" Failed to go offline. Please try again."),setTimeout(()=>z(""),3e3)}},handleGoOnlineAgain:async()=>{if(!(!t||!it))if(a(!1),s(!0),!lt)z(" To join the queue, you must be inside the paradahan."),setTimeout(()=>z(""),4e3);else{const Tt=ce(rn,"queues",t.id);try{const Ct=un.now();if(await mn(Tt,{driverId:t.id,plateNumber:t.plate,joinedAt:Ct}),T(Ct),u(!0),nt){const It=Math.round((Ct.toMillis()-nt.startedAt.getTime())/6e4),zt={...nt,travelTimeMinutes:It};try{await $g(Fn(rn,"ride_logs"),zt),yt(null)}catch(Pt){console.error("Failed to log ride:",Pt),localStorage.setItem("unsyncedRide",JSON.stringify(zt)),yt(null)}}}catch(Ct){console.error("Failed to join queue:",Ct),z(" Failed to join queue. Please try again."),setTimeout(()=>z(""),3e3)}}},handleStartRide:async()=>{if(!M){z(" Please select a destination first."),setTimeout(()=>z(""),3e3);return}if(!it){z(" Location not available. Please try again."),setTimeout(()=>z(""),3e3);return}try{t&&await Yo(ce(rn,"queues",t.id));const Tt=new Date;if(u(!1),x(!0),P(Tt),v){const Ct=Math.round((Tt.getTime()-v.toMillis())/6e4);X(Ct>0?Ct:0)}else X(0);if(t){const Ct=ce(rn,"drivers",t.id);await mn(Ct,{selectedDestination:M},{merge:!0})}z(" Ride started! Please exit paradahan to begin trip."),setTimeout(()=>z(""),3e3)}catch(Tt){console.error("Failed to start ride:",Tt),z(" Failed to start ride. Please try again."),setTimeout(()=>z(""),3e3)}},setToastMsg:z};return S.jsx(Wj.Provider,{value:Bt,children:e})},stt=()=>{Rc();const{driver:e,isOnline:t,hasJoined:n,queue:i,position:s,rideStarted:r,countdown:a,rideStatus:c,selectedDestination:u,setSelectedDestination:h,handleGoOffline:f,handleGoOnlineAgain:m,handleStartRide:y,setToastMsg:v,coords:T,insideParadahan:E,gpsError:x,toastMsg:C}=ntt();return S.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 text-gray-900",children:S.jsx("div",{className:"max-w-7xl mx-auto",children:S.jsxs("div",{className:"flex flex-col items-center justify-start min-h-screen relative",children:[S.jsxs("div",{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-lg animate-fade-in",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("h2",{className:"text-xl font-bold animate-slide-down",children:["Welcome, ",(e==null?void 0:e.name)??"Driver"]}),t?S.jsx("button",{onClick:f,className:"px-4 py-2 text-sm rounded-full font-semibold bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg transition-all duration-300 transform hover:scale-105",children:"Go Offline"}):S.jsx("button",{onClick:m,className:"px-4 py-2 text-sm rounded-full font-semibold bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg transition-all duration-300 transform hover:scale-105",children:"Go Online"})]}),S.jsx("hr",{className:"border-gray-300 mb-6"}),S.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6",children:[S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg animate-slide-up",children:[S.jsx("p",{className:"text-sm font-bold mb-2",children:" Ride Status:"}),S.jsx("p",{className:`text-lg font-semibold ${c==="In Ride"?"text-blue-600":c==="Waiting"?"text-green-600":"text-red-600"}`,children:c})]}),S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg animate-slide-up",style:{animationDelay:"0.1s"},children:[S.jsxs("p",{className:"text-sm font-bold mb-2",children:[" ",S.jsx("span",{className:"font-semibold",children:"Location Status:"})]}),S.jsx("p",{className:`text-lg font-semibold ${E?"text-green-600":"text-red-600"}`,children:x?` ${x}`:E?"Inside Paradahan":"Outside Paradahan"})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-6 animate-fade-in-left",children:[S.jsx("p",{className:"text-lg font-semibold mb-3",children:"Vehicle Information"}),S.jsxs("div",{className:"space-y-2",children:[S.jsxs("p",{className:"flex justify-between",children:[S.jsx("span",{className:"font-medium",children:"Plate Number:"}),S.jsx("span",{className:"text-gray-700",children:e==null?void 0:e.plate})]}),S.jsxs("p",{className:"flex justify-between",children:[S.jsx("span",{className:"font-medium",children:"Vehicle:"}),S.jsx("span",{className:"text-gray-700",children:e==null?void 0:e.vehicle})]})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-6 animate-fade-in-right",children:[S.jsx("p",{className:"text-lg font-semibold mb-3",children:" Destination:"}),S.jsxs("select",{className:"w-full p-3 rounded-lg bg-gray-50 text-gray-900 border border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 transition-all",value:u||"",onChange:P=>h(P.target.value),children:[S.jsx("option",{value:"",children:"Select Destination"}),Object.keys(Yf).map(P=>S.jsx("option",{value:P,children:P},P))]})]}),n&&!r&&S.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-6 animate-fade-in-up",children:[S.jsx("p",{className:"text-lg font-semibold mb-4",children:" Queue Status"}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("p",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"font-medium",children:"Your position:"}),S.jsx("span",{className:"text-xl font-bold text-yellow-600",children:s??"N/A"})]}),S.jsxs("p",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"font-medium",children:" Estimated Wait:"}),S.jsx("span",{className:"text-xl font-bold text-blue-600",children:a})]}),s===1&&S.jsx("div",{className:"text-green-600 font-bold text-center p-3 bg-green-50 rounded-lg animate-pulse",children:" Its your turn! Get ready for a ride."}),S.jsxs("div",{className:"mt-4",children:[S.jsx("p",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Current Queue:"}),S.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:S.jsx(qT,{children:i.map((P,N)=>S.jsxs(nc.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`text-sm px-3 py-2 rounded-lg shadow-sm ${P.driverId===(e==null?void 0:e.id)?"bg-yellow-100 text-gray-900 border border-yellow-300":"bg-gray-100 text-gray-900"}`,children:[N+1,". ",P.plateNumber]},P.driverId))})})]})]})]}),s===1&&!r&&S.jsx("button",{onClick:y,disabled:!u,className:"w-full py-3 px-6 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl font-semibold shadow-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:"Start Ride"})]}),C&&S.jsxs("div",{className:"absolute top-4 right-4 bg-blue-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-2 animate-fade-in text-sm z-50",children:[C,S.jsx("button",{onClick:()=>v(""),className:"hover:bg-blue-700 rounded-full p-1 transition-colors",children:S.jsx(rK,{size:16})})]})]})})})};let rtt={data:""},ott=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||rtt,att=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ltt=/\/\*[^]*?\*\/|  +/g,XM=/\n+/g,Wa=(e,t)=>{let n="",i="",s="";for(let r in e){let a=e[r];r[0]=="@"?r[1]=="i"?n=r+" "+a+";":i+=r[1]=="f"?Wa(a,r):r+"{"+Wa(a,r[1]=="k"?"":t)+"}":typeof a=="object"?i+=Wa(a,t?t.replace(/([^,])+/g,c=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):r):a!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Wa.p?Wa.p(r,a):r+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+i},Uo={},Gj=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Gj(e[n]);return t}return e},ctt=(e,t,n,i,s)=>{let r=Gj(e),a=Uo[r]||(Uo[r]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(r));if(!Uo[a]){let u=r!==e?e:(h=>{let f,m,y=[{}];for(;f=att.exec(h.replace(ltt,""));)f[4]?y.shift():f[3]?(m=f[3].replace(XM," ").trim(),y.unshift(y[0][m]=y[0][m]||{})):y[0][f[1]]=f[2].replace(XM," ").trim();return y[0]})(e);Uo[a]=Wa(s?{["@keyframes "+a]:u}:u,n?"":"."+a)}let c=n&&Uo.g?Uo.g:null;return n&&(Uo.g=Uo[a]),((u,h,f,m)=>{m?h.data=h.data.replace(m,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(Uo[a],t,i,c),a},utt=(e,t,n)=>e.reduce((i,s,r)=>{let a=t[r];if(a&&a.call){let c=a(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;a=u?"."+u:c&&typeof c=="object"?c.props?"":Wa(c,""):c===!1?"":c}return i+s+(a??"")},"");function G_(e){let t=this||{},n=e.call?e(t.p):e;return ctt(n.unshift?n.raw?utt(n,[].slice.call(arguments,1),t.p):n.reduce((i,s)=>Object.assign(i,s&&s.call?s(t.p):s),{}):n,ott(t.target),t.g,t.o,t.k)}let Yj,cw,uw;G_.bind({g:1});let ua=G_.bind({k:1});function htt(e,t,n,i){Wa.p=t,Yj=e,cw=n,uw=i}function xl(e,t){let n=this||{};return function(){let i=arguments;function s(r,a){let c=Object.assign({},r),u=c.className||s.className;n.p=Object.assign({theme:cw&&cw()},c),n.o=/ *go\d+/.test(u),c.className=G_.apply(n,i)+(u?" "+u:"");let h=e;return e[0]&&(h=c.as||e,delete c.as),uw&&h[0]&&uw(c),Yj(h,c)}return s}}var dtt=e=>typeof e=="function",Gy=(e,t)=>dtt(e)?e(t):e,ftt=(()=>{let e=0;return()=>(++e).toString()})(),Kj=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ptt=20,Xj=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,ptt)};case 1:return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case 2:let{toast:n}=t;return Xj(e,{type:e.toasts.find(r=>r.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(r=>r.id===i||i===void 0?{...r,dismissed:!0,visible:!1}:r)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+s}))}}},Xg=[],uc={toasts:[],pausedAt:void 0},kc=e=>{uc=Xj(uc,e),Xg.forEach(t=>{t(uc)})},mtt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},gtt=(e={})=>{let[t,n]=R.useState(uc),i=R.useRef(uc);R.useEffect(()=>(i.current!==uc&&n(uc),Xg.push(n),()=>{let r=Xg.indexOf(n);r>-1&&Xg.splice(r,1)}),[]);let s=t.toasts.map(r=>{var a,c,u;return{...e,...e[r.type],...r,removeDelay:r.removeDelay||((a=e[r.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:r.duration||((c=e[r.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||mtt[r.type],style:{...e.style,...(u=e[r.type])==null?void 0:u.style,...r.style}}});return{...t,toasts:s}},ytt=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||ftt()}),Np=e=>(t,n)=>{let i=ytt(t,e,n);return kc({type:2,toast:i}),i.id},yi=(e,t)=>Np("blank")(e,t);yi.error=Np("error");yi.success=Np("success");yi.loading=Np("loading");yi.custom=Np("custom");yi.dismiss=e=>{kc({type:3,toastId:e})};yi.remove=e=>kc({type:4,toastId:e});yi.promise=(e,t,n)=>{let i=yi.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let r=t.success?Gy(t.success,s):void 0;return r?yi.success(r,{id:i,...n,...n==null?void 0:n.success}):yi.dismiss(i),s}).catch(s=>{let r=t.error?Gy(t.error,s):void 0;r?yi.error(r,{id:i,...n,...n==null?void 0:n.error}):yi.dismiss(i)}),e};var _tt=(e,t)=>{kc({type:1,toast:{id:e,height:t}})},vtt=()=>{kc({type:5,time:Date.now()})},pf=new Map,btt=1e3,Ttt=(e,t=btt)=>{if(pf.has(e))return;let n=setTimeout(()=>{pf.delete(e),kc({type:4,toastId:e})},t);pf.set(e,n)},wtt=e=>{let{toasts:t,pausedAt:n}=gtt(e);R.useEffect(()=>{if(n)return;let r=Date.now(),a=t.map(c=>{if(c.duration===1/0)return;let u=(c.duration||0)+c.pauseDuration-(r-c.createdAt);if(u<0){c.visible&&yi.dismiss(c.id);return}return setTimeout(()=>yi.dismiss(c.id),u)});return()=>{a.forEach(c=>c&&clearTimeout(c))}},[t,n]);let i=R.useCallback(()=>{n&&kc({type:6,time:Date.now()})},[n]),s=R.useCallback((r,a)=>{let{reverseOrder:c=!1,gutter:u=8,defaultPosition:h}=a||{},f=t.filter(v=>(v.position||h)===(r.position||h)&&v.height),m=f.findIndex(v=>v.id===r.id),y=f.filter((v,T)=>T<m&&v.visible).length;return f.filter(v=>v.visible).slice(...c?[y+1]:[0,y]).reduce((v,T)=>v+(T.height||0)+u,0)},[t]);return R.useEffect(()=>{t.forEach(r=>{if(r.dismissed)Ttt(r.id,r.removeDelay);else{let a=pf.get(r.id);a&&(clearTimeout(a),pf.delete(r.id))}})},[t]),{toasts:t,handlers:{updateHeight:_tt,startPause:vtt,endPause:i,calculateOffset:s}}},Ett=ua`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,xtt=ua`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Stt=ua`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Att=xl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ett} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${xtt} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Stt} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ctt=ua`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Rtt=xl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Ctt} 1s linear infinite;
`,Itt=ua`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Dtt=ua`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Mtt=xl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Itt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Dtt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ntt=xl("div")`
  position: absolute;
`,Ptt=xl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ott=ua`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ktt=xl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ott} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ltt=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?R.createElement(ktt,null,t):t:n==="blank"?null:R.createElement(Ptt,null,R.createElement(Rtt,{...i}),n!=="loading"&&R.createElement(Ntt,null,n==="error"?R.createElement(Att,{...i}):R.createElement(Mtt,{...i})))},Vtt=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,jtt=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Utt="0%{opacity:0;} 100%{opacity:1;}",Ftt="0%{opacity:1;} 100%{opacity:0;}",Btt=xl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ztt=xl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Htt=(e,t)=>{let n=e.includes("top")?1:-1,[i,s]=Kj()?[Utt,Ftt]:[Vtt(n),jtt(n)];return{animation:t?`${ua(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ua(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},qtt=R.memo(({toast:e,position:t,style:n,children:i})=>{let s=e.height?Htt(e.position||t||"top-center",e.visible):{opacity:0},r=R.createElement(Ltt,{toast:e}),a=R.createElement(ztt,{...e.ariaProps},Gy(e.message,e));return R.createElement(Btt,{className:e.className,style:{...s,...n,...e.style}},typeof i=="function"?i({icon:r,message:a}):R.createElement(R.Fragment,null,r,a))});htt(R.createElement);var $tt=({id:e,className:t,style:n,onHeightUpdate:i,children:s})=>{let r=R.useCallback(a=>{if(a){let c=()=>{let u=a.getBoundingClientRect().height;i(e,u)};c(),new MutationObserver(c).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return R.createElement("div",{ref:r,className:t,style:n},s)},Wtt=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Kj()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...s}},Gtt=G_`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,fg=16,eS=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:s,containerStyle:r,containerClassName:a})=>{let{toasts:c,handlers:u}=wtt(n);return R.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:fg,left:fg,right:fg,bottom:fg,pointerEvents:"none",...r},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(h=>{let f=h.position||t,m=u.calculateOffset(h,{reverseOrder:e,gutter:i,defaultPosition:t}),y=Wtt(f,m);return R.createElement($tt,{id:h.id,key:h.id,onHeightUpdate:u.updateHeight,className:h.visible?Gtt:"",style:y},h.type==="custom"?Gy(h.message,h):s?s(h):R.createElement(qtt,{toast:h,position:f}))}))},Jt=yi;const QM=["agduwaadmin@gmail.com"],Ytt=()=>{const[e,t]=R.useState(""),[n,i]=R.useState(""),[s,r]=R.useState(""),[a,c]=R.useState(""),[u,h]=R.useState(""),[f,m]=R.useState(""),[y,v]=R.useState(""),[T,E]=R.useState(""),[x,C]=R.useState(!1),[P,N]=R.useState(!1),[q,F]=R.useState(!1),G=Rc(),k=V=>V.length<6?(r("Password must contain at least 6 characters"),!1):(r(""),!0),D=V=>/^\d{11}$/.test(V)?(E(""),!0):(E("Phone number must contain 11 digits"),!1),M=async()=>{if(!e||!n||x&&(!a||!u||!f||!y)){Jt.error("Please fill all fields.");return}if(k(n)&&!(x&&!D(y))){N(!0);try{let V;if(x){V=await B2(Vs,e,n);const B=V.user.uid,$=QM.some(Et=>Et.toLowerCase()===e.toLowerCase()),H={id:B,name:a,plate:u,vehicle:f,email:e,phone:y,status:"offline",age:"",contact:y,image:null,paymentMethod:"GCash",paymentNumber:"",createdAt:Ls(),verified:$};await mn(ce(rn,"drivers",B),H),console.log(" Driver document created:",{uid:B,name:a,email:e,verified:H.verified,createdAt:H.createdAt}),$?(localStorage.setItem("driver",JSON.stringify(H)),Jt.success("Registered successfully as Admin!"),setTimeout(()=>G("/admin"),1e3)):(Jt.success("Your account has been created! Please wait for admin approval."),Jt.success("You can only log in when the admin approves your account."),t(""),i(""),c(""),h(""),m(""),v(""),C(!1))}else{V=await z2(Vs,e,n);const B=V.user.uid;if(QM.some(nt=>nt.toLowerCase()===e.toLowerCase())){const nt={id:B,name:"Admin",plate:"",vehicle:"",email:e,phone:"",status:"offline",age:"",contact:y||"",image:null,paymentMethod:"GCash",paymentNumber:"",createdAt:Ls(),verified:!0};localStorage.setItem("driver",JSON.stringify(nt)),Jt.success("Welcome, Admin!"),setTimeout(()=>G("/admin"),1e3),N(!1);return}const H=ce(rn,"drivers",B),Et=await vp(H);if(!Et.exists()){Jt.error("No profile found for this account."),await py(Vs),N(!1);return}const X={...Et.data(),id:B};if(!X.verified){Jt.error("Your account is not verified by admin yet. Please wait for approval."),await py(Vs),N(!1);return}localStorage.setItem("driver",JSON.stringify(X)),Jt.success("Welcome back!"),setTimeout(()=>G("/home"),1e3)}}catch(V){switch(console.error(V.code),V.code){case"auth/user-not-found":Jt.error("Account not found.");break;case"auth/wrong-password":Jt.error("Incorrect password.");break;case"auth/email-already-in-use":Jt.error("Email already in use.");break;case"auth/invalid-email":Jt.error("Invalid email.");break;default:Jt.error("Authentication failed.")}}finally{N(!1)}}};return S.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-gray-900 p-4",children:[S.jsx(eS,{position:"top-center"}),S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md border border-gray-200",children:[S.jsx("h1",{className:"text-2xl font-bold mb-2 text-center text-gray-900",children:x?"Sign Up":"Login"}),S.jsx("input",{type:"email",placeholder:"Email",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:e,onChange:V=>t(V.target.value),autoComplete:"email"}),S.jsxs("div",{className:"relative mb-3",children:[S.jsx("input",{type:q?"text":"password",placeholder:"Password",className:"w-full p-2 bg-gray-200 rounded border border-gray-300 pr-10 text-gray-900",value:n,onChange:V=>{i(V.target.value),k(V.target.value)},autoComplete:x?"new-password":"current-password"}),S.jsx("button",{onClick:()=>F(!q),className:"absolute right-2 top-2 text-sm text-gray-600 hover:text-gray-900",type:"button","aria-label":q?"Hide password":"Show password",children:q?"Hide":"Show"})]}),s&&S.jsx("p",{className:"text-red-500 text-sm mb-3",children:s}),x&&S.jsxs(S.Fragment,{children:[S.jsx("input",{type:"text",placeholder:"Full Name",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:a,onChange:V=>c(V.target.value),autoComplete:"name"}),S.jsx("input",{type:"text",placeholder:"Plate Number",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:u,onChange:V=>h(V.target.value)}),S.jsx("input",{type:"text",placeholder:"Vehicle",className:"w-full p-2 mb-3 bg-gray-200 rounded border border-gray-300 text-gray-900",value:f,onChange:V=>m(V.target.value)}),S.jsxs("div",{className:"mb-3",children:[S.jsx("input",{type:"text",placeholder:"Phone Number (e.g., 09123456789)",className:"flex-1 p-2 bg-gray-200 rounded border border-gray-300 text-gray-900",value:y,onChange:V=>{v(V.target.value),D(V.target.value)},autoComplete:"tel"}),T&&S.jsx("p",{className:"text-red-500 text-sm mt-1",children:T})]})]}),S.jsx("button",{onClick:M,disabled:P,className:`w-full py-2 px-4 mt-2 rounded font-semibold ${P?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} text-white`,type:"button",children:P?"Processing...":x?"Create Account":"Login"}),S.jsxs("p",{className:"text-sm text-center text-gray-600 mt-4",children:[x?"Already have an account?":"Don't have an account?"," ",S.jsx("button",{onClick:()=>C(!x),className:"text-blue-600 hover:underline",type:"button",children:x?"Login here":"Register"})]})]})]})},Ktt=({log:e})=>S.jsxs("div",{className:"bg-white p-4 rounded-lg mb-4 shadow-md",children:[S.jsx("p",{className:"text-lg font-semibold mb-1",children:e.dropoffName}),S.jsxs("p",{className:"text-gray-400 text-sm mb-2",children:["Ended at: ",e.endedAt.toLocaleString()]}),S.jsxs("p",{className:"mb-1",children:["Distance: ",e.travelTimeMinutes>0?(e.travelTimeMinutes*(25/60)).toFixed(2):0," km  Duration: ",e.travelTimeMinutes," mins"]}),S.jsxs("p",{className:"font-semibold mt-2",children:["Earnings: ",e.estimatedEarnings]})]}),Xtt=({isOpen:e,onClose:t,onApply:n,onClear:i,startDate:s,setStartDate:r,endDate:a,setEndDate:c,dropoffLocation:u,setDropoffLocation:h,minFare:f,setMinFare:m})=>e?S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:S.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-xl w-full max-w-md shadow-lg border border-gray-300",children:[S.jsx("h2",{className:"text-xl font-bold mb-4",children:"Filter Rides"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{const y=new Date,v=new Date(y.getFullYear(),y.getMonth(),y.getDate());r(v),c(y)},children:"Today"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{const y=new Date,v=new Date(y);v.setDate(y.getDate()-7),r(v),c(y)},children:"Last 7 Days"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{const y=new Date,v=new Date(y.getFullYear(),y.getMonth(),1);r(v),c(y)},children:"This Month"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300 text-gray-900",onClick:()=>{r(null),c(null)},children:"All Time"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Start Date"}),S.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:s?s.toISOString().split("T")[0]:"",onChange:y=>r(y.target.value?new Date(y.target.value):null)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"End Date"}),S.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:a?a.toISOString().split("T")[0]:"",onChange:y=>c(y.target.value?new Date(y.target.value):null)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Dropoff Location"}),S.jsx("input",{type:"text",placeholder:"e.g., La Trinidad",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:u,onChange:y=>h(y.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Minimum Fare ()"}),S.jsx("input",{type:"number",placeholder:"e.g., 50",className:"w-full px-3 py-2 rounded bg-gray-50 border border-gray-300 text-gray-900",value:f??"",onChange:y=>m(y.target.value?parseFloat(y.target.value):null)})]})]}),S.jsxs("div",{className:"flex justify-between mt-6",children:[S.jsx("button",{onClick:i,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Clear"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:t,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Cancel"}),S.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Apply"})]})]})]})}):null;function Qtt({children:e,className:t,...n}){return S.jsx("button",{className:`bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition ${t}`,...n,children:e})}const Qj=R.createContext(null),Ztt=({children:e})=>{const[t,n]=R.useState(null),[i,s]=R.useState(!0);R.useEffect(()=>{const u=oE(Vs,h=>{n(h),s(!1)});return()=>u()},[]);const r=async(u,h)=>{await z2(Vs,u,h)},a=async(u,h,f)=>{const y=(await B2(Vs,u,h)).user.uid,v=["agduwaadmin@gmail.com"].some(E=>E.toLowerCase()===u.toLowerCase()),T=ce(rn,"drivers",y);await mn(T,{id:y,name:(f==null?void 0:f.name)||u.split("@")[0]||"New Driver",plate:(f==null?void 0:f.plate)||"",vehicle:(f==null?void 0:f.vehicle)||"",email:u,phone:(f==null?void 0:f.phone)||"",status:"offline",age:"",contact:(f==null?void 0:f.phone)||"",image:null,paymentMethod:"GCash",paymentNumber:"",createdAt:Ls(),verified:v})},c=async()=>{const u=Vs.currentUser;if(u){const h=ce(rn,"queues",u.uid);try{await Yo(h)}catch{}const f=ce(rn,"drivers",u.uid);await mn(f,{status:"offline"},{merge:!0})}await py(Vs),n(null)};return S.jsx(Qj.Provider,{value:{user:t,loading:i,login:r,signUp:a,logout:c},children:e})},Pp=()=>{const e=R.useContext(Qj);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};function Jtt(){const[e,t]=R.useState([]),[n,i]=R.useState([]),[s,r]=R.useState(!1),[a,c]=R.useState(null),[u,h]=R.useState(null),[f,m]=R.useState(""),[y,v]=R.useState(""),[T,E]=R.useState(null),{user:x}=Pp(),C=async()=>{try{if(!x)return;const q=Fn(rn,"ride_logs"),F=$o(q,sc("driverId","==",x.uid)),G=await Lf(F);console.log("Fetched snapshot:",G);const k=G.docs.map(D=>{const M=D.data();return{id:D.id,driverId:M.driverId,dropoffLocation:M.dropoffLocation,dropoffName:M.dropoffName,endedAt:M.endedAt.toDate(),estimatedEarnings:M.estimatedEarnings,pickupLocation:M.pickupLocation,plateNumber:M.plateNumber,startedAt:M.startedAt.toDate(),travelTimeMinutes:M.travelTimeMinutes,waitTimeMinutes:M.waitTimeMinutes}});console.log("Parsed ride logs:",k),k.sort((D,M)=>M.endedAt.getTime()-D.endedAt.getTime()),t(k),i(k)}catch(q){console.error("Failed to fetch ride logs:",q)}};R.useEffect(()=>{C()},[x]);const P=async()=>{let q=[...e];if(a&&(q=q.filter(F=>F.endedAt>=a)),u&&(q=q.filter(F=>F.endedAt<=u)),f){const F=f.toLowerCase();q=q.filter(G=>`${G.pickupLocation.lat}, ${G.pickupLocation.lng}`.toLowerCase().includes(F))}if(y){const F=y.toLowerCase();q=q.filter(G=>G.dropoffName.toLowerCase().includes(F))}T!==null?(q=q.filter(F=>F.estimatedEarnings>=T),q.sort((F,G)=>Math.abs(F.estimatedEarnings-T)-Math.abs(G.estimatedEarnings-T))):q.sort((F,G)=>G.endedAt.getTime()-F.endedAt.getTime()),i(q),r(!1)},N=()=>{c(null),h(null),m(""),v(""),E(null);const q=[...e].sort((F,G)=>G.endedAt.getTime()-F.endedAt.getTime());i(q),r(!1)};return S.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 text-gray-900",children:S.jsx("div",{className:"max-w-7xl mx-auto",children:S.jsxs("div",{className:"max-w-2xl mx-auto min-h-screen",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold animate-fade-in",children:"Ride History"}),S.jsxs(Qtt,{onClick:()=>r(!0),className:"gap-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg transition-all duration-300 transform hover:scale-105",children:[S.jsx(HY,{className:"w-4 h-4"})," Filter"]})]}),n.length===0?S.jsx("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center animate-fade-in-up",children:S.jsx("p",{className:"text-gray-500 text-lg",children:"No rides found."})}):S.jsx("div",{className:"space-y-4 animate-fade-in-up",style:{animationDelay:"0.2s"},children:n.map((q,F)=>S.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${F*.1}s`},children:S.jsx(Ktt,{log:q})},q.id))}),S.jsx(Xtt,{isOpen:s,onClose:()=>r(!1),onApply:P,onClear:N,startDate:a,setStartDate:c,endDate:u,setEndDate:h,dropoffLocation:y,setDropoffLocation:v,minFare:T,setMinFare:E})]})})})}var tet=Object.defineProperty,Yy=Object.getOwnPropertySymbols,Zj=Object.prototype.hasOwnProperty,Jj=Object.prototype.propertyIsEnumerable,ZM=(e,t,n)=>t in e?tet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hw=(e,t)=>{for(var n in t||(t={}))Zj.call(t,n)&&ZM(e,n,t[n]);if(Yy)for(var n of Yy(t))Jj.call(t,n)&&ZM(e,n,t[n]);return e},dw=(e,t)=>{var n={};for(var i in e)Zj.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&Yy)for(var i of Yy(e))t.indexOf(i)<0&&Jj.call(e,i)&&(n[i]=e[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Sc;(e=>{const t=class Te{constructor(u,h,f,m){if(this.version=u,this.errorCorrectionLevel=h,this.modules=[],this.isFunction=[],u<Te.MIN_VERSION||u>Te.MAX_VERSION)throw new RangeError("Version value out of range");if(m<-1||m>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let y=[];for(let T=0;T<this.size;T++)y.push(!1);for(let T=0;T<this.size;T++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(f);if(this.drawCodewords(v),m==-1){let T=1e9;for(let E=0;E<8;E++){this.applyMask(E),this.drawFormatBits(E);const x=this.getPenaltyScore();x<T&&(m=E,T=x),this.applyMask(E)}}s(0<=m&&m<=7),this.mask=m,this.applyMask(m),this.drawFormatBits(m),this.isFunction=[]}static encodeText(u,h){const f=e.QrSegment.makeSegments(u);return Te.encodeSegments(f,h)}static encodeBinary(u,h){const f=e.QrSegment.makeBytes(u);return Te.encodeSegments([f],h)}static encodeSegments(u,h,f=1,m=40,y=-1,v=!0){if(!(Te.MIN_VERSION<=f&&f<=m&&m<=Te.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let T,E;for(T=f;;T++){const N=Te.getNumDataCodewords(T,h)*8,q=a.getTotalBits(u,T);if(q<=N){E=q;break}if(T>=m)throw new RangeError("Data too long")}for(const N of[Te.Ecc.MEDIUM,Te.Ecc.QUARTILE,Te.Ecc.HIGH])v&&E<=Te.getNumDataCodewords(T,N)*8&&(h=N);let x=[];for(const N of u){n(N.mode.modeBits,4,x),n(N.numChars,N.mode.numCharCountBits(T),x);for(const q of N.getData())x.push(q)}s(x.length==E);const C=Te.getNumDataCodewords(T,h)*8;s(x.length<=C),n(0,Math.min(4,C-x.length),x),n(0,(8-x.length%8)%8,x),s(x.length%8==0);for(let N=236;x.length<C;N^=253)n(N,8,x);let P=[];for(;P.length*8<x.length;)P.push(0);return x.forEach((N,q)=>P[q>>>3]|=N<<7-(q&7)),new Te(T,h,P,y)}getModule(u,h){return 0<=u&&u<this.size&&0<=h&&h<this.size&&this.modules[h][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),h=u.length;for(let f=0;f<h;f++)for(let m=0;m<h;m++)f==0&&m==0||f==0&&m==h-1||f==h-1&&m==0||this.drawAlignmentPattern(u[f],u[m]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const h=this.errorCorrectionLevel.formatBits<<3|u;let f=h;for(let y=0;y<10;y++)f=f<<1^(f>>>9)*1335;const m=(h<<10|f)^21522;s(m>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,i(m,y));this.setFunctionModule(8,7,i(m,6)),this.setFunctionModule(8,8,i(m,7)),this.setFunctionModule(7,8,i(m,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,i(m,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,i(m,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,i(m,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let f=0;f<12;f++)u=u<<1^(u>>>11)*7973;const h=this.version<<12|u;s(h>>>18==0);for(let f=0;f<18;f++){const m=i(h,f),y=this.size-11+f%3,v=Math.floor(f/3);this.setFunctionModule(y,v,m),this.setFunctionModule(v,y,m)}}drawFinderPattern(u,h){for(let f=-4;f<=4;f++)for(let m=-4;m<=4;m++){const y=Math.max(Math.abs(m),Math.abs(f)),v=u+m,T=h+f;0<=v&&v<this.size&&0<=T&&T<this.size&&this.setFunctionModule(v,T,y!=2&&y!=4)}}drawAlignmentPattern(u,h){for(let f=-2;f<=2;f++)for(let m=-2;m<=2;m++)this.setFunctionModule(u+m,h+f,Math.max(Math.abs(m),Math.abs(f))!=1)}setFunctionModule(u,h,f){this.modules[h][u]=f,this.isFunction[h][u]=!0}addEccAndInterleave(u){const h=this.version,f=this.errorCorrectionLevel;if(u.length!=Te.getNumDataCodewords(h,f))throw new RangeError("Invalid argument");const m=Te.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][h],y=Te.ECC_CODEWORDS_PER_BLOCK[f.ordinal][h],v=Math.floor(Te.getNumRawDataModules(h)/8),T=m-v%m,E=Math.floor(v/m);let x=[];const C=Te.reedSolomonComputeDivisor(y);for(let N=0,q=0;N<m;N++){let F=u.slice(q,q+E-y+(N<T?0:1));q+=F.length;const G=Te.reedSolomonComputeRemainder(F,C);N<T&&F.push(0),x.push(F.concat(G))}let P=[];for(let N=0;N<x[0].length;N++)x.forEach((q,F)=>{(N!=E-y||F>=T)&&P.push(q[N])});return s(P.length==v),P}drawCodewords(u){if(u.length!=Math.floor(Te.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let h=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let m=0;m<this.size;m++)for(let y=0;y<2;y++){const v=f-y,E=(f+1&2)==0?this.size-1-m:m;!this.isFunction[E][v]&&h<u.length*8&&(this.modules[E][v]=i(u[h>>>3],7-(h&7)),h++)}}s(h==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let h=0;h<this.size;h++)for(let f=0;f<this.size;f++){let m;switch(u){case 0:m=(f+h)%2==0;break;case 1:m=h%2==0;break;case 2:m=f%3==0;break;case 3:m=(f+h)%3==0;break;case 4:m=(Math.floor(f/3)+Math.floor(h/2))%2==0;break;case 5:m=f*h%2+f*h%3==0;break;case 6:m=(f*h%2+f*h%3)%2==0;break;case 7:m=((f+h)%2+f*h%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[h][f]&&m&&(this.modules[h][f]=!this.modules[h][f])}}getPenaltyScore(){let u=0;for(let y=0;y<this.size;y++){let v=!1,T=0,E=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[y][x]==v?(T++,T==5?u+=Te.PENALTY_N1:T>5&&u++):(this.finderPenaltyAddHistory(T,E),v||(u+=this.finderPenaltyCountPatterns(E)*Te.PENALTY_N3),v=this.modules[y][x],T=1);u+=this.finderPenaltyTerminateAndCount(v,T,E)*Te.PENALTY_N3}for(let y=0;y<this.size;y++){let v=!1,T=0,E=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[x][y]==v?(T++,T==5?u+=Te.PENALTY_N1:T>5&&u++):(this.finderPenaltyAddHistory(T,E),v||(u+=this.finderPenaltyCountPatterns(E)*Te.PENALTY_N3),v=this.modules[x][y],T=1);u+=this.finderPenaltyTerminateAndCount(v,T,E)*Te.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let v=0;v<this.size-1;v++){const T=this.modules[y][v];T==this.modules[y][v+1]&&T==this.modules[y+1][v]&&T==this.modules[y+1][v+1]&&(u+=Te.PENALTY_N2)}let h=0;for(const y of this.modules)h=y.reduce((v,T)=>v+(T?1:0),h);const f=this.size*this.size,m=Math.ceil(Math.abs(h*20-f*10)/f)-1;return s(0<=m&&m<=9),u+=m*Te.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,h=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let f=[6];for(let m=this.size-7;f.length<u;m-=h)f.splice(1,0,m);return f}}static getNumRawDataModules(u){if(u<Te.MIN_VERSION||u>Te.MAX_VERSION)throw new RangeError("Version number out of range");let h=(16*u+128)*u+64;if(u>=2){const f=Math.floor(u/7)+2;h-=(25*f-10)*f-55,u>=7&&(h-=36)}return s(208<=h&&h<=29648),h}static getNumDataCodewords(u,h){return Math.floor(Te.getNumRawDataModules(u)/8)-Te.ECC_CODEWORDS_PER_BLOCK[h.ordinal][u]*Te.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let h=[];for(let m=0;m<u-1;m++)h.push(0);h.push(1);let f=1;for(let m=0;m<u;m++){for(let y=0;y<h.length;y++)h[y]=Te.reedSolomonMultiply(h[y],f),y+1<h.length&&(h[y]^=h[y+1]);f=Te.reedSolomonMultiply(f,2)}return h}static reedSolomonComputeRemainder(u,h){let f=h.map(m=>0);for(const m of u){const y=m^f.shift();f.push(0),h.forEach((v,T)=>f[T]^=Te.reedSolomonMultiply(v,y))}return f}static reedSolomonMultiply(u,h){if(u>>>8||h>>>8)throw new RangeError("Byte out of range");let f=0;for(let m=7;m>=0;m--)f=f<<1^(f>>>7)*285,f^=(h>>>m&1)*u;return s(f>>>8==0),f}finderPenaltyCountPatterns(u){const h=u[1];s(h<=this.size*3);const f=h>0&&u[2]==h&&u[3]==h*3&&u[4]==h&&u[5]==h;return(f&&u[0]>=h*4&&u[6]>=h?1:0)+(f&&u[6]>=h*4&&u[0]>=h?1:0)}finderPenaltyTerminateAndCount(u,h,f){return u&&(this.finderPenaltyAddHistory(h,f),h=0),h+=this.size,this.finderPenaltyAddHistory(h,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(u,h){h[0]==0&&(u+=this.size),h.pop(),h.unshift(u)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(c,u,h){if(u<0||u>31||c>>>u)throw new RangeError("Value out of range");for(let f=u-1;f>=0;f--)h.push(c>>>f&1)}function i(c,u){return(c>>>u&1)!=0}function s(c){if(!c)throw new Error("Assertion error")}const r=class Pn{constructor(u,h,f){if(this.mode=u,this.numChars=h,this.bitData=f,h<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(u){let h=[];for(const f of u)n(f,8,h);return new Pn(Pn.Mode.BYTE,u.length,h)}static makeNumeric(u){if(!Pn.isNumeric(u))throw new RangeError("String contains non-numeric characters");let h=[];for(let f=0;f<u.length;){const m=Math.min(u.length-f,3);n(parseInt(u.substring(f,f+m),10),m*3+1,h),f+=m}return new Pn(Pn.Mode.NUMERIC,u.length,h)}static makeAlphanumeric(u){if(!Pn.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let h=[],f;for(f=0;f+2<=u.length;f+=2){let m=Pn.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f))*45;m+=Pn.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f+1)),n(m,11,h)}return f<u.length&&n(Pn.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f)),6,h),new Pn(Pn.Mode.ALPHANUMERIC,u.length,h)}static makeSegments(u){return u==""?[]:Pn.isNumeric(u)?[Pn.makeNumeric(u)]:Pn.isAlphanumeric(u)?[Pn.makeAlphanumeric(u)]:[Pn.makeBytes(Pn.toUtf8ByteArray(u))]}static makeEci(u){let h=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)n(u,8,h);else if(u<16384)n(2,2,h),n(u,14,h);else if(u<1e6)n(6,3,h),n(u,21,h);else throw new RangeError("ECI assignment value out of range");return new Pn(Pn.Mode.ECI,0,h)}static isNumeric(u){return Pn.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return Pn.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,h){let f=0;for(const m of u){const y=m.mode.numCharCountBits(h);if(m.numChars>=1<<y)return 1/0;f+=4+y+m.bitData.length}return f}static toUtf8ByteArray(u){u=encodeURI(u);let h=[];for(let f=0;f<u.length;f++)u.charAt(f)!="%"?h.push(u.charCodeAt(f)):(h.push(parseInt(u.substring(f+1,f+3),16)),f+=2);return h}};r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=r;e.QrSegment=r})(Sc||(Sc={}));(e=>{(t=>{const n=class{constructor(s,r){this.ordinal=s,this.formatBits=r}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Sc||(Sc={}));(e=>{(t=>{const n=class{constructor(s,r){this.modeBits=s,this.numBitsCharCount=r}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Sc||(Sc={}));var ju=Sc;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var eet={L:ju.QrCode.Ecc.LOW,M:ju.QrCode.Ecc.MEDIUM,Q:ju.QrCode.Ecc.QUARTILE,H:ju.QrCode.Ecc.HIGH},t4=128,e4="L",n4="#FFFFFF",i4="#000000",s4=!1,r4=1,net=4,iet=0,set=.1;function o4(e,t=0){const n=[];return e.forEach(function(i,s){let r=null;i.forEach(function(a,c){if(!a&&r!==null){n.push(`M${r+t} ${s+t}h${c-r}v1H${r+t}z`),r=null;return}if(c===i.length-1){if(!a)return;r===null?n.push(`M${c+t},${s+t} h1v1H${c+t}z`):n.push(`M${r+t},${s+t} h${c+1-r}v1H${r+t}z`);return}a&&r===null&&(r=c)})}),n.join("")}function a4(e,t){return e.slice().map((n,i)=>i<t.y||i>=t.y+t.h?n:n.map((s,r)=>r<t.x||r>=t.x+t.w?s:!1))}function ret(e,t,n,i){if(i==null)return null;const s=e.length+n*2,r=Math.floor(t*set),a=s/t,c=(i.width||r)*a,u=(i.height||r)*a,h=i.x==null?e.length/2-c/2:i.x*a,f=i.y==null?e.length/2-u/2:i.y*a,m=i.opacity==null?1:i.opacity;let y=null;if(i.excavate){let T=Math.floor(h),E=Math.floor(f),x=Math.ceil(c+h-T),C=Math.ceil(u+f-E);y={x:T,y:E,w:x,h:C}}const v=i.crossOrigin;return{x:h,y:f,h:u,w:c,excavation:y,opacity:m,crossOrigin:v}}function oet(e,t){return t!=null?Math.max(Math.floor(t),0):e?net:iet}function l4({value:e,level:t,minVersion:n,includeMargin:i,marginSize:s,imageSettings:r,size:a,boostLevel:c}){let u=xe.useMemo(()=>{const T=(Array.isArray(e)?e:[e]).reduce((E,x)=>(E.push(...ju.QrSegment.makeSegments(x)),E),[]);return ju.QrCode.encodeSegments(T,eet[t],n,void 0,void 0,c)},[e,t,n,c]);const{cells:h,margin:f,numCells:m,calculatedImageSettings:y}=xe.useMemo(()=>{let v=u.getModules();const T=oet(i,s),E=v.length+T*2,x=ret(v,a,T,r);return{cells:v,margin:T,numCells:E,calculatedImageSettings:x}},[u,a,r,i,s]);return{qrcode:u,margin:f,cells:h,numCells:m,calculatedImageSettings:y}}var aet=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),cet=xe.forwardRef(function(t,n){const i=t,{value:s,size:r=t4,level:a=e4,bgColor:c=n4,fgColor:u=i4,includeMargin:h=s4,minVersion:f=r4,boostLevel:m,marginSize:y,imageSettings:v}=i,E=dw(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:x}=E,C=dw(E,["style"]),P=v==null?void 0:v.src,N=xe.useRef(null),q=xe.useRef(null),F=xe.useCallback(Et=>{N.current=Et,typeof n=="function"?n(Et):n&&(n.current=Et)},[n]),[G,k]=xe.useState(!1),{margin:D,cells:M,numCells:V,calculatedImageSettings:B}=l4({value:s,level:a,minVersion:f,boostLevel:m,includeMargin:h,marginSize:y,imageSettings:v,size:r});xe.useEffect(()=>{if(N.current!=null){const Et=N.current,_t=Et.getContext("2d");if(!_t)return;let X=M;const nt=q.current,yt=B!=null&&nt!==null&&nt.complete&&nt.naturalHeight!==0&&nt.naturalWidth!==0;yt&&B.excavation!=null&&(X=a4(M,B.excavation));const xt=window.devicePixelRatio||1;Et.height=Et.width=r*xt;const z=r/V*xt;_t.scale(z,z),_t.fillStyle=c,_t.fillRect(0,0,V,V),_t.fillStyle=u,aet?_t.fill(new Path2D(o4(X,D))):M.forEach(function(it,lt){it.forEach(function(ct,vt){ct&&_t.fillRect(vt+D,lt+D,1,1)})}),B&&(_t.globalAlpha=B.opacity),yt&&_t.drawImage(nt,B.x+D,B.y+D,B.w,B.h)}}),xe.useEffect(()=>{k(!1)},[P]);const $=hw({height:r,width:r},x);let H=null;return P!=null&&(H=xe.createElement("img",{src:P,key:P,style:{display:"none"},onLoad:()=>{k(!0)},ref:q,crossOrigin:B==null?void 0:B.crossOrigin})),xe.createElement(xe.Fragment,null,xe.createElement("canvas",hw({style:$,height:r,width:r,ref:F,role:"img"},C)),H)});cet.displayName="QRCodeCanvas";var nS=xe.forwardRef(function(t,n){const i=t,{value:s,size:r=t4,level:a=e4,bgColor:c=n4,fgColor:u=i4,includeMargin:h=s4,minVersion:f=r4,boostLevel:m,title:y,marginSize:v,imageSettings:T}=i,E=dw(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:x,cells:C,numCells:P,calculatedImageSettings:N}=l4({value:s,level:a,minVersion:f,boostLevel:m,includeMargin:h,marginSize:v,imageSettings:T,size:r});let q=C,F=null;T!=null&&N!=null&&(N.excavation!=null&&(q=a4(C,N.excavation)),F=xe.createElement("image",{href:T.src,height:N.h,width:N.w,x:N.x+x,y:N.y+x,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const G=o4(q,x);return xe.createElement("svg",hw({height:r,width:r,viewBox:`0 0 ${P} ${P}`,ref:n,role:"img"},E),!!y&&xe.createElement("title",null,y),xe.createElement("path",{fill:c,d:`M0,0 h${P}v${P}H0z`,shapeRendering:"crispEdges"}),xe.createElement("path",{fill:u,d:G,shapeRendering:"crispEdges"}),F)});nS.displayName="QRCodeSVG";const uet=()=>{const e=Rc(),{user:t,logout:n}=Pp(),[i,s]=R.useState(()=>{const $=localStorage.getItem("driver");return $?JSON.parse($):null}),[r,a]=R.useState(!1),[c,u]=R.useState(""),[h,f]=R.useState(""),[m,y]=R.useState(""),[v,T]=R.useState(null),[E,x]=R.useState(!1),[C,P]=R.useState("GCash"),[N,q]=R.useState(""),[F,G]=R.useState(!1);R.useEffect(()=>{if(!t){e("/login");return}(async()=>{const H=ce(rn,"drivers",t.uid),Et=await vp(H);if(Et.exists()){const _t=Et.data();s(_t),u(_t.status||"Offline"),f(_t.age||""),y(_t.contact||""),T(_t.image||null),P(_t.paymentMethod||"GCash"),q(_t.paymentNumber||"");const X=ce(rn,"publicProfiles",t.uid);await mn(X,_t)}})()},[t,e]);const k=async()=>{G(!0),setTimeout(async()=>{if(!t)return;const $=ce(rn,"queues",t.uid);try{await Yo($)}catch{}const H=ce(rn,"drivers",t.uid);await mn(H,{status:"offline"},{merge:!0}),await(n==null?void 0:n()),localStorage.removeItem("driver"),Jt.success("Logout successful!"),e("/login")},500)},D=async()=>{if(!t)return;const $={...i,status:c,age:h,contact:m,image:v,paymentMethod:C,paymentNumber:N},H=ce(rn,"drivers",t.uid);await Mk(H,$);const Et=ce(rn,"publicProfiles",t.uid);await mn(Et,$),s($),a(!1),Jt.success("Profile updated!")},M=$=>{var Et;const H=(Et=$.target.files)==null?void 0:Et[0];if(H){const _t=new FileReader;_t.onloadend=()=>{T(_t.result)},_t.readAsDataURL(H)}},V=()=>{u($=>$==="Online"?"Offline":"Online")};if(!i)return null;const B=`${window.location.origin}/driver/${t==null?void 0:t.uid}`;return S.jsx("div",{className:"flex justify-center p-4 bg-gray-100 min-h-screen text-gray-900",children:S.jsx(qT,{children:!F&&S.jsxs(nc.div,{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:40},transition:{duration:.4},children:[S.jsxs("div",{className:"flex flex-col items-center mb-4 relative",children:[S.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 mb-2 cursor-pointer border-2 border-gray-900 hover:scale-105 transition-transform",onClick:()=>v&&x(!0),children:v?S.jsx("img",{src:v,alt:"Driver",className:"w-full h-full object-cover"}):S.jsx("div",{className:"text-gray-400 text-sm flex items-center justify-center h-full",children:"No Image"})}),r&&S.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"text-xs text-gray-400 mb-2"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsxs("div",{children:[S.jsx("strong",{children:"Name:"})," ",i.name]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Plate:"})," ",i.plate]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Vehicle:"})," ",i.vehicle]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Status:"})," ",r?S.jsxs("div",{className:"flex items-center",children:[S.jsx("span",{className:`inline-block w-10 h-6 rounded-full ${c==="Online"?"bg-green-500":"bg-red-500"} cursor-pointer`,onClick:V,children:S.jsx("span",{className:`block w-4 h-4 bg-white rounded-full transition-transform ${c==="Online"?"translate-x-4":""}`})}),S.jsx("span",{className:"ml-2 text-sm",children:c})]}):c]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Age:"})," ",r?S.jsx("input",{value:h,onChange:$=>f($.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full"}):h]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Contact:"})," ",r?S.jsx("input",{value:m,onChange:$=>y($.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full"}):m]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Payment Method:"})," ",r?S.jsxs("select",{value:C,onChange:$=>P($.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full",children:[S.jsx("option",{value:"GCash",children:"GCash"}),S.jsx("option",{value:"PayMaya",children:"PayMaya"})]}):C]}),S.jsxs("div",{children:[S.jsxs("strong",{children:[C," Number:"]})," ",r?S.jsx("input",{value:N,onChange:$=>q($.target.value),className:"bg-gray-200 rounded p-1 ml-2 w-full"}):N||"N/A"]})]}),S.jsxs("div",{className:"text-center mt-6",children:[S.jsx("h2",{className:"font-bold text-sm mb-2",children:"Your Driver QR Code"}),S.jsx("div",{className:"bg-white p-4 rounded-lg w-fit mx-auto",children:S.jsx(nS,{value:B,size:150})}),S.jsx("p",{className:"text-xs mt-2 text-gray-400 break-all",children:B})]}),S.jsxs("div",{className:"flex justify-between mt-6",children:[r?S.jsx(nc.button,{onClick:D,whileTap:{scale:.95},className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-sm w-full mr-2",children:"Save"}):S.jsx(nc.button,{onClick:()=>a(!0),whileTap:{scale:.95},className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm w-full mr-2",children:"Edit Profile"}),S.jsx(nc.button,{onClick:k,whileTap:{scale:.9},className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-sm w-full ml-2",children:"Logout"})]}),S.jsx(qT,{children:E&&S.jsx(nc.div,{className:"fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>x(!1),children:S.jsx(nc.img,{src:v||"",alt:"Zoomed Profile",className:"max-w-[90%] max-h-[90%] rounded-lg shadow-lg",initial:{scale:.8},animate:{scale:1},exit:{scale:.8},transition:{duration:.3}})})})]},"profileCard")})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Op(e){return e+.5|0}const Ya=(e,t,n)=>Math.max(Math.min(e,n),t);function Yd(e){return Ya(Op(e*2.55),0,255)}function sl(e){return Ya(Op(e*255),0,255)}function qo(e){return Ya(Op(e/2.55)/100,0,1)}function JM(e){return Ya(Op(e*100),0,100)}const sr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fw=[..."0123456789ABCDEF"],het=e=>fw[e&15],det=e=>fw[(e&240)>>4]+fw[e&15],pg=e=>(e&240)>>4===(e&15),fet=e=>pg(e.r)&&pg(e.g)&&pg(e.b)&&pg(e.a);function pet(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&sr[e[1]]*17,g:255&sr[e[2]]*17,b:255&sr[e[3]]*17,a:t===5?sr[e[4]]*17:255}:(t===7||t===9)&&(n={r:sr[e[1]]<<4|sr[e[2]],g:sr[e[3]]<<4|sr[e[4]],b:sr[e[5]]<<4|sr[e[6]],a:t===9?sr[e[7]]<<4|sr[e[8]]:255})),n}const met=(e,t)=>e<255?t(e):"";function get(e){var t=fet(e)?het:det;return e?"#"+t(e.r)+t(e.g)+t(e.b)+met(e.a,t):void 0}const yet=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function c4(e,t,n){const i=t*Math.min(n,1-n),s=(r,a=(r+e/30)%12)=>n-i*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function _et(e,t,n){const i=(s,r=(s+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function vet(e,t,n){const i=c4(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function bet(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}function iS(e){const n=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(n,i,s),a=Math.min(n,i,s),c=(r+a)/2;let u,h,f;return r!==a&&(f=r-a,h=c>.5?f/(2-r-a):f/(r+a),u=bet(n,i,s,f,r),u=u*60+.5),[u|0,h||0,c]}function sS(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(sl)}function rS(e,t,n){return sS(c4,e,t,n)}function Tet(e,t,n){return sS(vet,e,t,n)}function wet(e,t,n){return sS(_et,e,t,n)}function u4(e){return(e%360+360)%360}function Eet(e){const t=yet.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Yd(+t[5]):sl(+t[5]));const s=u4(+t[2]),r=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?i=Tet(s,r,a):t[1]==="hsv"?i=wet(s,r,a):i=rS(s,r,a),{r:i[0],g:i[1],b:i[2],a:n}}function xet(e,t){var n=iS(e);n[0]=u4(n[0]+t),n=rS(n),e.r=n[0],e.g=n[1],e.b=n[2]}function Aet(e){if(!e)return;const t=iS(e),n=t[0],i=JM(t[1]),s=JM(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${qo(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const tN={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},eN={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Cet(){const e={},t=Object.keys(eN),n=Object.keys(tN);let i,s,r,a,c;for(i=0;i<t.length;i++){for(a=c=t[i],s=0;s<n.length;s++)r=n[s],c=c.replace(r,tN[r]);r=parseInt(eN[a],16),e[c]=[r>>16&255,r>>8&255,r&255]}return e}let mg;function Ret(e){mg||(mg=Cet(),mg.transparent=[0,0,0,0]);const t=mg[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Iet=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Det(e){const t=Iet.exec(e);let n=255,i,s,r;if(t){if(t[7]!==i){const a=+t[7];n=t[8]?Yd(a):Ya(a*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Yd(i):Ya(i,0,255)),s=255&(t[4]?Yd(s):Ya(s,0,255)),r=255&(t[6]?Yd(r):Ya(r,0,255)),{r:i,g:s,b:r,a:n}}}function Met(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${qo(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Ob=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,xu=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Net(e,t,n){const i=xu(qo(e.r)),s=xu(qo(e.g)),r=xu(qo(e.b));return{r:sl(Ob(i+n*(xu(qo(t.r))-i))),g:sl(Ob(s+n*(xu(qo(t.g))-s))),b:sl(Ob(r+n*(xu(qo(t.b))-r))),a:e.a+n*(t.a-e.a)}}function gg(e,t,n){if(e){let i=iS(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=rS(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function h4(e,t){return e&&Object.assign(t||{},e)}function nN(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=sl(e[3]))):(t=h4(e,{r:0,g:0,b:0,a:1}),t.a=sl(t.a)),t}function Pet(e){return e.charAt(0)==="r"?Det(e):Eet(e)}class Kf{constructor(t){if(t instanceof Kf)return t;const n=typeof t;let i;n==="object"?i=nN(t):n==="string"&&(i=pet(t)||Ret(t)||Pet(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=h4(this._rgb);return t&&(t.a=qo(t.a)),t}set rgb(t){this._rgb=nN(t)}rgbString(){return this._valid?Met(this._rgb):void 0}hexString(){return this._valid?get(this._rgb):void 0}hslString(){return this._valid?Aet(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,s=t.rgb;let r;const a=n===r?.5:n,c=2*a-1,u=i.a-s.a,h=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;r=1-h,i.r=255&h*i.r+r*s.r+.5,i.g=255&h*i.g+r*s.g+.5,i.b=255&h*i.b+r*s.b+.5,i.a=a*i.a+(1-a)*s.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=Net(this._rgb,t._rgb,n)),this}clone(){return new Kf(this.rgb)}alpha(t){return this._rgb.a=sl(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Op(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return gg(this._rgb,2,t),this}darken(t){return gg(this._rgb,2,-t),this}saturate(t){return gg(this._rgb,1,t),this}desaturate(t){return gg(this._rgb,1,-t),this}rotate(t){return xet(this._rgb,t),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Fo(){}const Oet=(()=>{let e=0;return()=>e++})();function $e(e){return e==null}function vi(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Le(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function dr(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Zr(e,t){return dr(e)?e:t}function ue(e,t){return typeof e>"u"?t:e}const ket=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,d4=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Zt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Ee(e,t,n,i){let s,r,a;if(vi(e))for(r=e.length,s=0;s<r;s++)t.call(n,e[s],s);else if(Le(e))for(a=Object.keys(e),r=a.length,s=0;s<r;s++)t.call(n,e[a[s]],a[s])}function Ky(e,t){let n,i,s,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],r=t[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Xy(e){if(vi(e))return e.map(Xy);if(Le(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=Xy(e[n[s]]);return t}return e}function f4(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Let(e,t,n,i){if(!f4(e))return;const s=t[e],r=n[e];Le(s)&&Le(r)?Xf(s,r,i):t[e]=Xy(r)}function Xf(e,t,n){const i=vi(t)?t:[t],s=i.length;if(!Le(e))return e;n=n||{};const r=n.merger||Let;let a;for(let c=0;c<s;++c){if(a=i[c],!Le(a))continue;const u=Object.keys(a);for(let h=0,f=u.length;h<f;++h)r(u[h],e,a,n)}return e}function mf(e,t){return Xf(e,t,{merger:Vet})}function Vet(e,t,n){if(!f4(e))return;const i=t[e],s=n[e];Le(i)&&Le(s)?mf(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Xy(s))}const iN={"":e=>e,x:e=>e.x,y:e=>e.y};function jet(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Uet(e){const t=jet(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function Ac(e,t){return(iN[t]||(iN[t]=Uet(t)))(e)}function oS(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Qf=e=>typeof e<"u",pl=e=>typeof e=="function",sN=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Fet(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Kn=Math.PI,kn=2*Kn,Bet=kn+Kn,Qy=Number.POSITIVE_INFINITY,zet=Kn/180,ri=Kn/2,Xl=Kn/4,rN=Kn*2/3,p4=Math.log10,cr=Math.sign;function fc(e,t,n){return Math.abs(e-t)<n}function oN(e){const t=Math.round(e);e=fc(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(p4(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Het(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((s,r)=>s-r).pop(),t}function qet(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Zf(e){return!qet(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function $et(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Wet(e,t,n){let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Xo(e){return e*(Kn/180)}function Get(e){return e*(180/Kn)}function aN(e){if(!dr(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function m4(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Kn&&(r+=kn),{angle:r,distance:s}}function pw(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Yet(e,t){return(e-t+Bet)%kn-Kn}function Fa(e){return(e%kn+kn)%kn}function Jf(e,t,n,i){const s=Fa(e),r=Fa(t),a=Fa(n),c=Fa(r-s),u=Fa(a-s),h=Fa(s-r),f=Fa(s-a);return s===r||s===a||i&&r===a||c>u&&h<f}function Gi(e,t,n){return Math.max(t,Math.min(n,e))}function Ket(e){return Gi(e,-32768,32767)}function Ka(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function aS(e,t,n){n=n||(a=>e[a]<t);let i=e.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const hc=(e,t,n,i)=>aS(e,n,i?s=>{const r=e[s][t];return r<n||r===n&&e[s+1][t]===n}:s=>e[s][t]<n),Xet=(e,t,n)=>aS(e,n,i=>e[i][t]>=n);function Qet(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)i++;for(;s>i&&e[s-1]>n;)s--;return i>0||s<e.length?e.slice(i,s):e}const g4=["push","pop","shift","splice","unshift"];function Zet(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),g4.forEach(n=>{const i="_onData"+oS(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const a=s.apply(this,r);return e._chartjs.listeners.forEach(c=>{typeof c[i]=="function"&&c[i](...r)}),a}})})}function lN(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(g4.forEach(r=>{delete e[r]}),delete e._chartjs)}function y4(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const _4=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function v4(e,t){let n=[],i=!1;return function(...s){n=s,i||(i=!0,_4.call(window,()=>{i=!1,e.apply(t,n)}))}}function Jet(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const b4=e=>e==="start"?"left":e==="end"?"right":"center",ks=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,tnt=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function ent(e,t,n){const i=t.length;let s=0,r=i;if(e._sorted){const{iScale:a,vScale:c,_parsed:u}=e,h=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,f=a.axis,{min:m,max:y,minDefined:v,maxDefined:T}=a.getUserBounds();if(v){if(s=Math.min(hc(u,f,m).lo,n?i:hc(t,f,a.getPixelForValue(m)).lo),h){const E=u.slice(0,s+1).reverse().findIndex(x=>!$e(x[c.axis]));s-=Math.max(0,E)}s=Gi(s,0,i-1)}if(T){let E=Math.max(hc(u,a.axis,y,!0).hi+1,n?0:hc(t,f,a.getPixelForValue(y),!0).hi+1);if(h){const x=u.slice(E-1).findIndex(C=>!$e(C[c.axis]));E+=Math.max(0,x)}r=Gi(E,s,i)-s}else r=i-s}return{start:s,count:r}}function nnt(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const yg=e=>e===0||e===1,cN=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*kn/n)),uN=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*kn/n)+1,gf={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ri)+1,easeOutSine:e=>Math.sin(e*ri),easeInOutSine:e=>-.5*(Math.cos(Kn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>yg(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>yg(e)?e:cN(e,.075,.3),easeOutElastic:e=>yg(e)?e:uN(e,.075,.3),easeInOutElastic(e){return yg(e)?e:e<.5?.5*cN(e*2,.1125,.45):.5+.5*uN(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-gf.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?gf.easeInBounce(e*2)*.5:gf.easeOutBounce(e*2-1)*.5+.5};function lS(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function hN(e){return lS(e)?e:new Kf(e)}function kb(e){return lS(e)?e:new Kf(e).saturate(.5).darken(.1).hexString()}const int=["x","y","borderWidth","radius","tension"],snt=["color","borderColor","backgroundColor"];function rnt(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:snt},numbers:{type:"number",properties:int}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ont(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const dN=new Map;function ant(e,t){t=t||{};const n=e+JSON.stringify(t);let i=dN.get(n);return i||(i=new Intl.NumberFormat(e,t),dN.set(n,i)),i}function cS(e,t,n){return ant(t,n).format(e)}const lnt={values(e){return vi(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let s,r=e;if(n.length>1){const h=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(h<1e-4||h>1e15)&&(s="scientific"),r=cnt(e,n)}const a=p4(Math.abs(r)),c=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:s,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),cS(e,i,u)}};function cnt(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var T4={formatters:lnt};function unt(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:T4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Cc=Object.create(null),mw=Object.create(null);function yf(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];e=e[r]||(e[r]=Object.create(null))}return e}function Lb(e,t,n){return typeof t=="string"?Xf(yf(e,t),n):Xf(yf(e,""),t)}class hnt{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>kb(s.backgroundColor),this.hoverBorderColor=(i,s)=>kb(s.borderColor),this.hoverColor=(i,s)=>kb(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Lb(this,t,n)}get(t){return yf(this,t)}describe(t,n){return Lb(mw,t,n)}override(t,n){return Lb(Cc,t,n)}route(t,n,i,s){const r=yf(this,t),a=yf(this,i),c="_"+n;Object.defineProperties(r,{[c]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[c],h=a[s];return Le(u)?Object.assign({},h,u):ue(u,h)},set(u){this[c]=u}}})}apply(t){t.forEach(n=>n(this))}}var zn=new hnt({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[rnt,ont,unt]);function dnt(e){return!e||$e(e.size)||$e(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function fN(e,t,n,i,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,n.push(s)),r>i&&(i=r),i}function Ql(e,t,n){const i=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function pN(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function gw(e,t,n,i){w4(e,t,n,i,null)}function w4(e,t,n,i,s){let r,a,c,u,h,f,m,y;const v=t.pointStyle,T=t.rotation,E=t.radius;let x=(T||0)*zet;if(v&&typeof v=="object"&&(r=v.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(x),e.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),e.restore();return}if(!(isNaN(E)||E<=0)){switch(e.beginPath(),v){default:s?e.ellipse(n,i,s/2,E,0,0,kn):e.arc(n,i,E,0,kn),e.closePath();break;case"triangle":f=s?s/2:E,e.moveTo(n+Math.sin(x)*f,i-Math.cos(x)*E),x+=rN,e.lineTo(n+Math.sin(x)*f,i-Math.cos(x)*E),x+=rN,e.lineTo(n+Math.sin(x)*f,i-Math.cos(x)*E),e.closePath();break;case"rectRounded":h=E*.516,u=E-h,a=Math.cos(x+Xl)*u,m=Math.cos(x+Xl)*(s?s/2-h:u),c=Math.sin(x+Xl)*u,y=Math.sin(x+Xl)*(s?s/2-h:u),e.arc(n-m,i-c,h,x-Kn,x-ri),e.arc(n+y,i-a,h,x-ri,x),e.arc(n+m,i+c,h,x,x+ri),e.arc(n-y,i+a,h,x+ri,x+Kn),e.closePath();break;case"rect":if(!T){u=Math.SQRT1_2*E,f=s?s/2:u,e.rect(n-f,i-u,2*f,2*u);break}x+=Xl;case"rectRot":m=Math.cos(x)*(s?s/2:E),a=Math.cos(x)*E,c=Math.sin(x)*E,y=Math.sin(x)*(s?s/2:E),e.moveTo(n-m,i-c),e.lineTo(n+y,i-a),e.lineTo(n+m,i+c),e.lineTo(n-y,i+a),e.closePath();break;case"crossRot":x+=Xl;case"cross":m=Math.cos(x)*(s?s/2:E),a=Math.cos(x)*E,c=Math.sin(x)*E,y=Math.sin(x)*(s?s/2:E),e.moveTo(n-m,i-c),e.lineTo(n+m,i+c),e.moveTo(n+y,i-a),e.lineTo(n-y,i+a);break;case"star":m=Math.cos(x)*(s?s/2:E),a=Math.cos(x)*E,c=Math.sin(x)*E,y=Math.sin(x)*(s?s/2:E),e.moveTo(n-m,i-c),e.lineTo(n+m,i+c),e.moveTo(n+y,i-a),e.lineTo(n-y,i+a),x+=Xl,m=Math.cos(x)*(s?s/2:E),a=Math.cos(x)*E,c=Math.sin(x)*E,y=Math.sin(x)*(s?s/2:E),e.moveTo(n-m,i-c),e.lineTo(n+m,i+c),e.moveTo(n+y,i-a),e.lineTo(n-y,i+a);break;case"line":a=s?s/2:Math.cos(x)*E,c=Math.sin(x)*E,e.moveTo(n-a,i-c),e.lineTo(n+a,i+c);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(x)*(s?s/2:E),i+Math.sin(x)*E);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function ah(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function uS(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function hS(e){e.restore()}function fnt(e,t,n,i,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else s==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function pnt(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function mnt(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),$e(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function gnt(e,t,n,i,s){if(s.strikethrough||s.underline){const r=e.measureText(i),a=t-r.actualBoundingBoxLeft,c=t+r.actualBoundingBoxRight,u=n-r.actualBoundingBoxAscent,h=n+r.actualBoundingBoxDescent,f=s.strikethrough?(u+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,f),e.lineTo(c,f),e.stroke()}}function ynt(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Zy(e,t,n,i,s,r={}){const a=vi(t)?t:[t],c=r.strokeWidth>0&&r.strokeColor!=="";let u,h;for(e.save(),e.font=s.string,mnt(e,r),u=0;u<a.length;++u)h=a[u],r.backdrop&&ynt(e,r.backdrop),c&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),$e(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(h,n,i,r.maxWidth)),e.fillText(h,n,i,r.maxWidth),gnt(e,n,i,h,r),i+=Number(s.lineHeight);e.restore()}function Jy(e,t){const{x:n,y:i,w:s,h:r,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*Kn,Kn,!0),e.lineTo(n,i+r-a.bottomLeft),e.arc(n+a.bottomLeft,i+r-a.bottomLeft,a.bottomLeft,Kn,ri,!0),e.lineTo(n+s-a.bottomRight,i+r),e.arc(n+s-a.bottomRight,i+r-a.bottomRight,a.bottomRight,ri,0,!0),e.lineTo(n+s,i+a.topRight),e.arc(n+s-a.topRight,i+a.topRight,a.topRight,0,-ri,!0),e.lineTo(n+a.topLeft,i)}const _nt=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,vnt=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bnt(e,t){const n=(""+e).match(_nt);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Tnt=e=>+e||0;function dS(e,t){const n={},i=Le(t),s=i?Object.keys(t):t,r=Le(e)?i?a=>ue(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of s)n[a]=Tnt(r(a));return n}function E4(e){return dS(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Wu(e){return dS(e,["topLeft","topRight","bottomLeft","bottomRight"])}function kr(e){const t=E4(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function vs(e,t){e=e||{},t=t||zn.font;let n=ue(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=ue(e.style,t.style);i&&!(""+i).match(vnt)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ue(e.family,t.family),lineHeight:bnt(ue(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:ue(e.weight,t.weight),string:""};return s.string=dnt(s),s}function _g(e,t,n,i){let s,r,a;for(s=0,r=e.length;s<r;++s)if(a=e[s],a!==void 0&&a!==void 0)return a}function wnt(e,t,n){const{min:i,max:s}=e,r=d4(t,(s-i)/2),a=(c,u)=>n&&c===0?0:c+u;return{min:a(i,-Math.abs(r)),max:a(s,r)}}function Lc(e,t){return Object.assign(Object.create(e),t)}function fS(e,t=[""],n,i,s=()=>e[0]){const r=n||e;typeof i>"u"&&(i=C4("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:i,_getTarget:s,override:c=>fS([c,...e],t,r,i)};return new Proxy(a,{deleteProperty(c,u){return delete c[u],delete c._keys,delete e[0][u],!0},get(c,u){return S4(c,u,()=>Dnt(u,t,e,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(c,u){return gN(c).includes(u)},ownKeys(c){return gN(c)},set(c,u,h){const f=c._storage||(c._storage=s());return c[u]=f[u]=h,delete c._keys,!0}})}function lh(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:x4(e,i),setContext:r=>lh(e,r,n,i),override:r=>lh(e.override(r),t,n,i)};return new Proxy(s,{deleteProperty(r,a){return delete r[a],delete e[a],!0},get(r,a,c){return S4(r,a,()=>xnt(r,a,c))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(r,a,c){return e[a]=c,delete r[a],!0}})}function x4(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:pl(n)?n:()=>n,isIndexable:pl(i)?i:()=>i}}const Ent=(e,t)=>e?e+oS(t):t,pS=(e,t)=>Le(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function S4(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function xnt(e,t,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:a}=e;let c=i[t];return pl(c)&&a.isScriptable(t)&&(c=Snt(t,c,e,n)),vi(c)&&c.length&&(c=Ant(t,c,e,a.isIndexable)),pS(t,c)&&(c=lh(c,s,r&&r[t],a)),c}function Snt(e,t,n,i){const{_proxy:s,_context:r,_subProxy:a,_stack:c}=n;if(c.has(e))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+e);c.add(e);let u=t(r,a||i);return c.delete(e),pS(e,u)&&(u=mS(s._scopes,s,e,u)),u}function Ant(e,t,n,i){const{_proxy:s,_context:r,_subProxy:a,_descriptors:c}=n;if(typeof r.index<"u"&&i(e))return t[r.index%t.length];if(Le(t[0])){const u=t,h=s._scopes.filter(f=>f!==u);t=[];for(const f of u){const m=mS(h,s,e,f);t.push(lh(m,r,a&&a[e],c))}}return t}function A4(e,t,n){return pl(e)?e(t,n):e}const Cnt=(e,t)=>e===!0?t:typeof e=="string"?Ac(t,e):void 0;function Rnt(e,t,n,i,s){for(const r of t){const a=Cnt(n,r);if(a){e.add(a);const c=A4(a._fallback,n,s);if(typeof c<"u"&&c!==n&&c!==i)return c}else if(a===!1&&typeof i<"u"&&n!==i)return null}return!1}function mS(e,t,n,i){const s=t._rootScopes,r=A4(t._fallback,n,i),a=[...e,...s],c=new Set;c.add(i);let u=mN(c,a,n,r||n,i);return u===null||typeof r<"u"&&r!==n&&(u=mN(c,a,r,u,i),u===null)?!1:fS(Array.from(c),[""],s,r,()=>Int(t,n,i))}function mN(e,t,n,i,s){for(;n;)n=Rnt(e,t,n,i,s);return n}function Int(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];return vi(s)&&Le(n)?n:s||{}}function Dnt(e,t,n,i){let s;for(const r of t)if(s=C4(Ent(r,e),n),typeof s<"u")return pS(e,s)?mS(n,i,e,s):s}function C4(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function gN(e){let t=e._keys;return t||(t=e._keys=Mnt(e._scopes)),t}function Mnt(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const Nnt=Number.EPSILON||1e-14,ch=(e,t)=>t<e.length&&!e[t].skip&&e[t],R4=e=>e==="x"?"y":"x";function Pnt(e,t,n,i){const s=e.skip?t:e,r=t,a=n.skip?t:n,c=pw(r,s),u=pw(a,r);let h=c/(c+u),f=u/(c+u);h=isNaN(h)?0:h,f=isNaN(f)?0:f;const m=i*h,y=i*f;return{previous:{x:r.x-m*(a.x-s.x),y:r.y-m*(a.y-s.y)},next:{x:r.x+y*(a.x-s.x),y:r.y+y*(a.y-s.y)}}}function Ont(e,t,n){const i=e.length;let s,r,a,c,u,h=ch(e,0);for(let f=0;f<i-1;++f)if(u=h,h=ch(e,f+1),!(!u||!h)){if(fc(t[f],0,Nnt)){n[f]=n[f+1]=0;continue}s=n[f]/t[f],r=n[f+1]/t[f],c=Math.pow(s,2)+Math.pow(r,2),!(c<=9)&&(a=3/Math.sqrt(c),n[f]=s*a*t[f],n[f+1]=r*a*t[f])}}function knt(e,t,n="x"){const i=R4(n),s=e.length;let r,a,c,u=ch(e,0);for(let h=0;h<s;++h){if(a=c,c=u,u=ch(e,h+1),!c)continue;const f=c[n],m=c[i];a&&(r=(f-a[n])/3,c[`cp1${n}`]=f-r,c[`cp1${i}`]=m-r*t[h]),u&&(r=(u[n]-f)/3,c[`cp2${n}`]=f+r,c[`cp2${i}`]=m+r*t[h])}}function Lnt(e,t="x"){const n=R4(t),i=e.length,s=Array(i).fill(0),r=Array(i);let a,c,u,h=ch(e,0);for(a=0;a<i;++a)if(c=u,u=h,h=ch(e,a+1),!!u){if(h){const f=h[t]-u[t];s[a]=f!==0?(h[n]-u[n])/f:0}r[a]=c?h?cr(s[a-1])!==cr(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}Ont(e,s,r),knt(e,r,t)}function vg(e,t,n){return Math.max(Math.min(e,n),t)}function Vnt(e,t){let n,i,s,r,a,c=ah(e[0],t);for(n=0,i=e.length;n<i;++n)a=r,r=c,c=n<i-1&&ah(e[n+1],t),r&&(s=e[n],a&&(s.cp1x=vg(s.cp1x,t.left,t.right),s.cp1y=vg(s.cp1y,t.top,t.bottom)),c&&(s.cp2x=vg(s.cp2x,t.left,t.right),s.cp2y=vg(s.cp2y,t.top,t.bottom)))}function jnt(e,t,n,i,s){let r,a,c,u;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")Lnt(e,s);else{let h=i?e[e.length-1]:e[0];for(r=0,a=e.length;r<a;++r)c=e[r],u=Pnt(h,c,e[Math.min(r+1,a-(i?0:1))%a],t.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,h=c}t.capBezierPoints&&Vnt(e,n)}function gS(){return typeof window<"u"&&typeof document<"u"}function yS(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function t_(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Y_=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Unt(e,t){return Y_(e).getPropertyValue(t)}const Fnt=["top","right","bottom","left"];function pc(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=Fnt[s];i[r]=parseFloat(e[t+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Bnt=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function znt(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:r}=i;let a=!1,c,u;if(Bnt(s,r,e.target))c=s,u=r;else{const h=t.getBoundingClientRect();c=i.clientX-h.left,u=i.clientY-h.top,a=!0}return{x:c,y:u,box:a}}function no(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=Y_(n),r=s.boxSizing==="border-box",a=pc(s,"padding"),c=pc(s,"border","width"),{x:u,y:h,box:f}=znt(e,n),m=a.left+(f&&c.left),y=a.top+(f&&c.top);let{width:v,height:T}=t;return r&&(v-=a.width+c.width,T-=a.height+c.height),{x:Math.round((u-m)/v*n.width/i),y:Math.round((h-y)/T*n.height/i)}}function Hnt(e,t,n){let i,s;if(t===void 0||n===void 0){const r=e&&yS(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const a=r.getBoundingClientRect(),c=Y_(r),u=pc(c,"border","width"),h=pc(c,"padding");t=a.width-h.width-u.width,n=a.height-h.height-u.height,i=t_(c.maxWidth,r,"clientWidth"),s=t_(c.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:i||Qy,maxHeight:s||Qy}}const bg=e=>Math.round(e*10)/10;function qnt(e,t,n,i){const s=Y_(e),r=pc(s,"margin"),a=t_(s.maxWidth,e,"clientWidth")||Qy,c=t_(s.maxHeight,e,"clientHeight")||Qy,u=Hnt(e,t,n);let{width:h,height:f}=u;if(s.boxSizing==="content-box"){const y=pc(s,"border","width"),v=pc(s,"padding");h-=v.width+y.width,f-=v.height+y.height}return h=Math.max(0,h-r.width),f=Math.max(0,i?h/i:f-r.height),h=bg(Math.min(h,a,u.maxWidth)),f=bg(Math.min(f,c,u.maxHeight)),h&&!f&&(f=bg(h/2)),(t!==void 0||n!==void 0)&&i&&u.height&&f>u.height&&(f=u.height,h=bg(Math.floor(f*i))),{width:h,height:f}}function yN(e,t,n){const i=t||1,s=Math.floor(e.height*i),r=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||a.height!==s||a.width!==r?(e.currentDevicePixelRatio=i,a.height=s,a.width=r,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const $nt=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};gS()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function _N(e,t){const n=Unt(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ic(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Wnt(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function Gnt(e,t,n,i){const s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},a=ic(e,s,n),c=ic(s,r,n),u=ic(r,t,n),h=ic(a,c,n),f=ic(c,u,n);return ic(h,f,n)}const Ynt=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Knt=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Gu(e,t,n){return e?Ynt(t,n):Knt()}function I4(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function D4(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function M4(e){return e==="angle"?{between:Jf,compare:Yet,normalize:Fa}:{between:Ka,compare:(t,n)=>t-n,normalize:t=>t}}function vN({start:e,end:t,count:n,loop:i,style:s}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:s}}function Xnt(e,t,n){const{property:i,start:s,end:r}=n,{between:a,normalize:c}=M4(i),u=t.length;let{start:h,end:f,loop:m}=e,y,v;if(m){for(h+=u,f+=u,y=0,v=u;y<v&&a(c(t[h%u][i]),s,r);++y)h--,f--;h%=u,f%=u}return f<h&&(f+=u),{start:h,end:f,loop:m,style:e.style}}function Qnt(e,t,n){if(!n)return[e];const{property:i,start:s,end:r}=n,a=t.length,{compare:c,between:u,normalize:h}=M4(i),{start:f,end:m,loop:y,style:v}=Xnt(e,t,n),T=[];let E=!1,x=null,C,P,N;const q=()=>u(s,N,C)&&c(s,N)!==0,F=()=>c(r,C)===0||u(r,N,C),G=()=>E||q(),k=()=>!E||F();for(let D=f,M=f;D<=m;++D)P=t[D%a],!P.skip&&(C=h(P[i]),C!==N&&(E=u(C,s,r),x===null&&G()&&(x=c(C,s)===0?D:M),x!==null&&k()&&(T.push(vN({start:x,end:D,loop:y,count:a,style:v})),x=null),M=D,N=C));return x!==null&&T.push(vN({start:x,end:m,loop:y,count:a,style:v})),T}function Znt(e,t){const n=[],i=e.segments;for(let s=0;s<i.length;s++){const r=Qnt(i[s],e.points,t);r.length&&n.push(...r)}return n}function Jnt(e,t,n,i){let s=0,r=t-1;if(n&&!i)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}function tit(e,t,n,i){const s=e.length,r=[];let a=t,c=e[t],u;for(u=t+1;u<=n;++u){const h=e[u%s];h.skip||h.stop?c.skip||(i=!1,r.push({start:t%s,end:(u-1)%s,loop:i}),t=a=h.stop?u:null):(a=u,c.skip&&(t=u)),c=h}return a!==null&&r.push({start:t%s,end:a%s,loop:i}),r}function eit(e,t){const n=e.points,i=e.options.spanGaps,s=n.length;if(!s)return[];const r=!!e._loop,{start:a,end:c}=Jnt(n,s,r,i);if(i===!0)return bN(e,[{start:a,end:c,loop:r}],n,t);const u=c<a?c+s:c,h=!!e._fullLoop&&a===0&&c===s-1;return bN(e,tit(n,a,u,h),n,t)}function bN(e,t,n,i){return!i||!i.setContext||!n?t:nit(e,t,n,i)}function nit(e,t,n,i){const s=e._chart.getContext(),r=TN(e.options),{_datasetIndex:a,options:{spanGaps:c}}=e,u=n.length,h=[];let f=r,m=t[0].start,y=m;function v(T,E,x,C){const P=c?-1:1;if(T!==E){for(T+=u;n[T%u].skip;)T-=P;for(;n[E%u].skip;)E+=P;T%u!==E%u&&(h.push({start:T%u,end:E%u,loop:x,style:C}),f=C,m=E%u)}}for(const T of t){m=c?m:T.start;let E=n[m%u],x;for(y=m+1;y<=T.end;y++){const C=n[y%u];x=TN(i.setContext(Lc(s,{type:"segment",p0:E,p1:C,p0DataIndex:(y-1)%u,p1DataIndex:y%u,datasetIndex:a}))),iit(x,f)&&v(m,y-1,T.loop,f),E=C,f=x}m<y-1&&v(m,y-1,T.loop,f)}return h}function TN(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function iit(e,t){if(!t)return!1;const n=[],i=function(s,r){return lS(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class sit{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,s){const r=n.listeners[s],a=n.duration;r.forEach(c=>c({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(i-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=_4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let a=r.length-1,c=!1,u;for(;a>=0;--a)u=r[a],u._active?(u._total>i.duration&&(i.duration=u._total),u.tick(t),c=!0):(r[a]=r[r.length-1],r.pop());c&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var zo=new sit;const wN="transparent",rit={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=hN(e||wN),s=i.valid&&hN(t||wN);return s&&s.valid?s.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class oit{constructor(t,n,i,s){const r=n[i];s=_g([t.to,s,r,t.from]);const a=_g([t.from,r,s]);this._active=!0,this._fn=t.fn||rit[t.type||typeof a],this._easing=gf[t.easing]||gf.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,a=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=_g([t.to,n,s,t.from]),this._from=_g([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,s=this._prop,r=this._from,a=this._loop,c=this._to;let u;if(this._active=r!==c&&(a||n<i),!this._active){this._target[s]=c,this._notify(!0);return}if(n<0){this._target[s]=r;return}u=n/i%2,u=a&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[s]=this._fn(r,c,u)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class N4{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Le(t))return;const n=Object.keys(zn.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!Le(r))return;const a={};for(const c of n)a[c]=r[c];(vi(r.properties)&&r.properties||[s]).forEach(c=>{(c===s||!i.has(c))&&i.set(c,a)})})}_animateOptions(t,n){const i=n.options,s=lit(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&ait(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,n){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),a=Object.keys(n),c=Date.now();let u;for(u=a.length-1;u>=0;--u){const h=a[u];if(h.charAt(0)==="$")continue;if(h==="options"){s.push(...this._animateOptions(t,n));continue}const f=n[h];let m=r[h];const y=i.get(h);if(m)if(y&&m.active()){m.update(y,f,c);continue}else m.cancel();if(!y||!y.duration){t[h]=f;continue}r[h]=m=new oit(y,t,h,f),s.push(m)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return zo.add(this._chart,i),!0}}function ait(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=e[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function lit(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function EN(e,t){const n=e&&e.options||{},i=n.reverse,s=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function cit(e,t,n){if(n===!1)return!1;const i=EN(e,n),s=EN(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function uit(e){let t,n,i,s;return Le(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:e===!1}}function P4(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function xN(e,t,n,i={}){const s=e.keys,r=i.mode==="single";let a,c,u,h;if(t===null)return;let f=!1;for(a=0,c=s.length;a<c;++a){if(u=+s[a],u===n){if(f=!0,i.all)continue;break}h=e.values[u],dr(h)&&(r||t===0||cr(t)===cr(h))&&(t+=h)}return!f&&!i.all?0:t}function hit(e,t){const{iScale:n,vScale:i}=t,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",a=Object.keys(e),c=new Array(a.length);let u,h,f;for(u=0,h=a.length;u<h;++u)f=a[u],c[u]={[s]:f,[r]:e[f]};return c}function Vb(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function dit(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function fit(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function pit(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function SN(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=e[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function AN(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:r,vScale:a,index:c}=i,u=r.axis,h=a.axis,f=dit(r,a,i),m=t.length;let y;for(let v=0;v<m;++v){const T=t[v],{[u]:E,[h]:x}=T,C=T._stacks||(T._stacks={});y=C[h]=pit(s,f,E),y[c]=x,y._top=SN(y,a,!0,i.type),y._bottom=SN(y,a,!1,i.type);const P=y._visualValues||(y._visualValues={});P[c]=x}}function jb(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function mit(e,t){return Lc(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function git(e,t,n){return Lc(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Nd(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const Ub=e=>e==="reset"||e==="none",CN=(e,t)=>t?e:Object.assign({},e),yit=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:P4(n,!0),values:null};class mc{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Vb(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Nd(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(m,y,v,T)=>m==="x"?y:m==="r"?T:v,r=n.xAxisID=ue(i.xAxisID,jb(t,"x")),a=n.yAxisID=ue(i.yAxisID,jb(t,"y")),c=n.rAxisID=ue(i.rAxisID,jb(t,"r")),u=n.indexAxis,h=n.iAxisID=s(u,r,a,c),f=n.vAxisID=s(u,a,r,c);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&lN(this._data,this),t._stacked&&Nd(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Le(n)){const s=this._cachedMeta;this._data=hit(n,s)}else if(i!==n){if(i){lN(i,this);const s=this._cachedMeta;Nd(s),s._parsed=[]}n&&Object.isExtensible(n)&&Zet(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=Vb(n.vScale,n),n.stack!==i.stack&&(s=!0,Nd(n),n.stack=i.stack),this._resyncElements(t),(s||r!==n._stacked)&&(AN(this,n._parsed),n._stacked=Vb(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:a}=i,c=r.axis;let u=t===0&&n===s.length?!0:i._sorted,h=t>0&&i._parsed[t-1],f,m,y;if(this._parsing===!1)i._parsed=s,i._sorted=!0,y=s;else{vi(s[t])?y=this.parseArrayData(i,s,t,n):Le(s[t])?y=this.parseObjectData(i,s,t,n):y=this.parsePrimitiveData(i,s,t,n);const v=()=>m[c]===null||h&&m[c]<h[c];for(f=0;f<n;++f)i._parsed[f+t]=m=y[f],u&&(v()&&(u=!1),h=m);i._sorted=u}a&&AN(this,y)}parsePrimitiveData(t,n,i,s){const{iScale:r,vScale:a}=t,c=r.axis,u=a.axis,h=r.getLabels(),f=r===a,m=new Array(s);let y,v,T;for(y=0,v=s;y<v;++y)T=y+i,m[y]={[c]:f||r.parse(h[T],T),[u]:a.parse(n[T],T)};return m}parseArrayData(t,n,i,s){const{xScale:r,yScale:a}=t,c=new Array(s);let u,h,f,m;for(u=0,h=s;u<h;++u)f=u+i,m=n[f],c[u]={x:r.parse(m[0],f),y:a.parse(m[1],f)};return c}parseObjectData(t,n,i,s){const{xScale:r,yScale:a}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=new Array(s);let f,m,y,v;for(f=0,m=s;f<m;++f)y=f+i,v=n[y],h[f]={x:r.parse(Ac(v,c),y),y:a.parse(Ac(v,u),y)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const s=this.chart,r=this._cachedMeta,a=n[t.axis],c={keys:P4(s,!0),values:n._stacks[t.axis]._visualValues};return xN(c,a,r.index,{mode:i})}updateRangeFromParsed(t,n,i,s){const r=i[n.axis];let a=r===null?NaN:r;const c=s&&i._stacks[n.axis];s&&c&&(s.values=c,a=xN(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,a=s.length,c=this._getOtherScale(t),u=yit(n,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:m}=fit(c);let y,v;function T(){v=s[y];const E=v[c.axis];return!dr(v[t.axis])||f>E||m<E}for(y=0;y<a&&!(!T()&&(this.updateRangeFromParsed(h,t,v,u),r));++y);if(r){for(y=a-1;y>=0;--y)if(!T()){this.updateRangeFromParsed(h,t,v,u);break}}return h}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let s,r,a;for(s=0,r=n.length;s<r;++s)a=n[s][t.axis],dr(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=uit(ue(this.options.clip,cit(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,a=[],c=this._drawStart||0,u=this._drawCount||s.length-c,h=this.options.drawActiveElementsOnTop;let f;for(i.dataset&&i.dataset.draw(t,r,c,u),f=c;f<c+u;++f){const m=s[f];m.hidden||(m.active&&h?a.push(m):m.draw(t,r))}for(f=0;f<a.length;++f)a[f].draw(t,r)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];r=a.$context||(a.$context=git(this.getContext(),t,a)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=mit(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const s=n==="active",r=this._cachedDataOpts,a=t+"-"+n,c=r[a],u=this.enableOptionSharing&&Qf(i);if(c)return CN(c,u);const h=this.chart.config,f=h.datasetElementScopeKeys(this._type,t),m=s?[`${t}Hover`,"hover",t,""]:[t,""],y=h.getOptionScopes(this.getDataset(),f),v=Object.keys(zn.elements[t]),T=()=>this.getContext(i,s,n),E=h.resolveNamedOptions(y,v,T,m);return E.$shared&&(E.$shared=u,r[a]=Object.freeze(CN(E,u))),E}_resolveAnimations(t,n,i){const s=this.chart,r=this._cachedDataOpts,a=`animation-${n}`,c=r[a];if(c)return c;let u;if(s.options.animation!==!1){const f=this.chart.config,m=f.datasetAnimationScopeKeys(this._type,n),y=f.getOptionScopes(this.getDataset(),m);u=f.createResolver(y,this.getContext(t,i,n))}const h=new N4(s,u&&u.animations);return u&&u._cacheable&&(r[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Ub(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),s=this._sharedOptions,r=this.getSharedOptions(i),a=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:a}}updateElement(t,n,i,s){Ub(s)?Object.assign(t,i):this._resolveAnimations(n,s).update(t,i)}updateSharedOptions(t,n,i){t&&!Ub(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,s){t.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[c,u,h]of this._syncList)this[c](u,h);this._syncList=[];const s=i.length,r=n.length,a=Math.min(r,s);a&&this.parse(0,a),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,n,i=!0){const s=this._cachedMeta,r=s.data,a=t+n;let c;const u=h=>{for(h.length+=n,c=h.length-1;c>=a;c--)h[c]=h[c-n]};for(u(r),c=t;c<a;++c)r[c]=new this.dataElementType;this._parsing&&u(s._parsed),this.parse(t,n),i&&this.updateElements(r,t,n,"reset")}updateElements(t,n,i,s){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,n);i._stacked&&Nd(i,s)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,s]=t;this[n](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}kt(mc,"defaults",{}),kt(mc,"datasetElementType",null),kt(mc,"dataElementType",null);function _it(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=y4(i.sort((s,r)=>s-r))}return e._cache.$bar}function vit(e){const t=e.iScale,n=_it(t,e.type);let i=t._length,s,r,a,c;const u=()=>{a===32767||a===-32768||(Qf(c)&&(i=Math.min(i,Math.abs(a-c)||i)),c=a)};for(s=0,r=n.length;s<r;++s)a=t.getPixelForValue(n[s]),u();for(c=void 0,s=0,r=t.ticks.length;s<r;++s)a=t.getPixelForTick(s),u();return i}function bit(e,t,n,i){const s=n.barThickness;let r,a;return $e(s)?(r=t.min*n.categoryPercentage,a=n.barPercentage):(r=s*i,a=1),{chunk:r/i,ratio:a,start:t.pixels[e]-r/2}}function Tit(e,t,n,i){const s=t.pixels,r=s[e];let a=e>0?s[e-1]:null,c=e<s.length-1?s[e+1]:null;const u=n.categoryPercentage;a===null&&(a=r-(c===null?t.end-t.start:c-r)),c===null&&(c=r+r-a);const h=r-(r-Math.min(a,c))/2*u;return{chunk:Math.abs(c-a)/2*u/i,ratio:n.barPercentage,start:h}}function wit(e,t,n,i){const s=n.parse(e[0],i),r=n.parse(e[1],i),a=Math.min(s,r),c=Math.max(s,r);let u=a,h=c;Math.abs(a)>Math.abs(c)&&(u=c,h=a),t[n.axis]=h,t._custom={barStart:u,barEnd:h,start:s,end:r,min:a,max:c}}function O4(e,t,n,i){return vi(e)?wit(e,t,n,i):t[n.axis]=n.parse(e,i),t}function RN(e,t,n,i){const s=e.iScale,r=e.vScale,a=s.getLabels(),c=s===r,u=[];let h,f,m,y;for(h=n,f=n+i;h<f;++h)y=t[h],m={},m[s.axis]=c||s.parse(a[h],h),u.push(O4(y,m,r,h));return u}function Fb(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Eit(e,t,n){return e!==0?cr(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function xit(e){let t,n,i,s,r;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:t,top:s,bottom:r}}function Sit(e,t,n,i){let s=t.borderSkipped;const r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:c,reverse:u,top:h,bottom:f}=xit(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?s=h:(n._bottom||0)===i?s=f:(r[IN(f,a,c,u)]=!0,s=h)),r[IN(s,a,c,u)]=!0,e.borderSkipped=r}function IN(e,t,n,i){return i?(e=Ait(e,t,n),e=DN(e,n,t)):e=DN(e,t,n),e}function Ait(e,t,n){return e===t?n:e===n?t:e}function DN(e,t,n){return e==="start"?t:e==="end"?n:e}function Cit(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Qg extends mc{parsePrimitiveData(t,n,i,s){return RN(t,n,i,s)}parseArrayData(t,n,i,s){return RN(t,n,i,s)}parseObjectData(t,n,i,s){const{iScale:r,vScale:a}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=r.axis==="x"?c:u,f=a.axis==="x"?c:u,m=[];let y,v,T,E;for(y=i,v=i+s;y<v;++y)E=n[y],T={},T[r.axis]=r.parse(Ac(E,h),y),m.push(O4(Ac(E,f),T,a,y));return m}updateRangeFromParsed(t,n,i,s){super.updateRangeFromParsed(t,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(t),a=r._custom,c=Fb(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,s){const r=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,u=c.getBasePixel(),h=c.isHorizontal(),f=this._getRuler(),{sharedOptions:m,includeOptions:y}=this._getSharedOptions(n,s);for(let v=n;v<n+i;v++){const T=this.getParsed(v),E=r||$e(T[c.axis])?{base:u,head:u}:this._calculateBarValuePixels(v),x=this._calculateBarIndexPixels(v,f),C=(T._stacks||{})[c.axis],P={horizontal:h,base:E.base,enableBorderRadius:!C||Fb(T._custom)||a===C._top||a===C._bottom,x:h?E.head:x.center,y:h?x.center:E.head,height:h?x.size:Math.abs(E.size),width:h?Math.abs(E.size):x.size};y&&(P.options=m||this.resolveDataElementOptions(v,t[v].active?"active":s));const N=P.options||t[v].options;Sit(P,N,C,a),Cit(P,N,f.ratio),this.updateElement(t[v],v,P,s)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),r=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(n),u=c&&c[i.axis],h=f=>{const m=f._parsed.find(v=>v[i.axis]===u),y=m&&m[f.vScale.axis];if($e(y)||isNaN(y))return!0};for(const f of s)if(!(n!==void 0&&h(f))&&((r===!1||a.indexOf(f.stack)===-1||r===void 0&&f.stack===void 0)&&a.push(f.stack),f.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,i){const s=this._getStacks(t,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,a;for(r=0,a=n.data.length;r<a;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const c=t.barThickness;return{min:c||vit(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:r,minBarLength:a}}=this,c=r||0,u=this.getParsed(t),h=u._custom,f=Fb(h);let m=u[n.axis],y=0,v=i?this.applyStack(n,u,i):m,T,E;v!==m&&(y=v-m,v=m),f&&(m=h.barStart,v=h.barEnd-h.barStart,m!==0&&cr(m)!==cr(h.barEnd)&&(y=0),y+=m);const x=!$e(r)&&!f?r:y;let C=n.getPixelForValue(x);if(this.chart.getDataVisibility(t)?T=n.getPixelForValue(y+v):T=C,E=T-C,Math.abs(E)<a){E=Eit(E,n,c)*a,m===c&&(C-=E/2);const P=n.getPixelForDecimal(0),N=n.getPixelForDecimal(1),q=Math.min(P,N),F=Math.max(P,N);C=Math.max(Math.min(C,F),q),T=C+E,i&&!f&&(u._stacks[n.axis]._visualValues[s]=n.getValueForPixel(T)-n.getValueForPixel(C))}if(C===n.getPixelForValue(c)){const P=cr(E)*n.getLineWidthForValue(c)/2;C+=P,E-=P}return{size:E,base:C,head:T,center:T+E/2}}_calculateBarIndexPixels(t,n){const i=n.scale,s=this.options,r=s.skipNull,a=ue(s.maxBarThickness,1/0);let c,u;if(n.grouped){const h=r?this._getStackCount(t):n.stackCount,f=s.barThickness==="flex"?Tit(t,n,s,h):bit(t,n,s,h),m=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);c=f.start+f.chunk*m+f.chunk/2,u=Math.min(a,f.chunk*f.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),u=Math.min(a,n.min*n.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}kt(Qg,"id","bar"),kt(Qg,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),kt(Qg,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Rit(e,t,n){let i=1,s=1,r=0,a=0;if(t<kn){const c=e,u=c+t,h=Math.cos(c),f=Math.sin(c),m=Math.cos(u),y=Math.sin(u),v=(N,q,F)=>Jf(N,c,u,!0)?1:Math.max(q,q*n,F,F*n),T=(N,q,F)=>Jf(N,c,u,!0)?-1:Math.min(q,q*n,F,F*n),E=v(0,h,m),x=v(ri,f,y),C=T(Kn,h,m),P=T(Kn+ri,f,y);i=(E-C)/2,s=(x-P)/2,r=-(E+C)/2,a=-(x+P)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:a}}class Kd extends mc{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=u=>+i[u];if(Le(i[t])){const{key:u="value"}=this._parsing;r=h=>+Ac(i[h],u)}let a,c;for(a=t,c=t+n;a<c;++a)s._parsed[a]=r(a)}}_getRotation(){return Xo(this.options.rotation-90)}_getCircumference(){return Xo(this.options.circumference)}_getRotationExtents(){let t=kn,n=-kn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),a=s._getCircumference();t=Math.min(t,r),n=Math.max(n,r+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,r=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),u=Math.min(ket(this.options.cutout,c),1),h=this._getRingWeight(this.index),{circumference:f,rotation:m}=this._getRotationExtents(),{ratioX:y,ratioY:v,offsetX:T,offsetY:E}=Rit(m,f,u),x=(i.width-a)/y,C=(i.height-a)/v,P=Math.max(Math.min(x,C)/2,0),N=d4(this.options.radius,P),q=Math.max(N*u,0),F=(N-q)/this._getVisibleDatasetWeightTotal();this.offsetX=T*N,this.offsetY=E*N,s.total=this.calculateTotal(),this.outerRadius=N-F*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-F*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/kn)}updateElements(t,n,i,s){const r=s==="reset",a=this.chart,c=a.chartArea,h=a.options.animation,f=(c.left+c.right)/2,m=(c.top+c.bottom)/2,y=r&&h.animateScale,v=y?0:this.innerRadius,T=y?0:this.outerRadius,{sharedOptions:E,includeOptions:x}=this._getSharedOptions(n,s);let C=this._getRotation(),P;for(P=0;P<n;++P)C+=this._circumference(P,r);for(P=n;P<n+i;++P){const N=this._circumference(P,r),q=t[P],F={x:f+this.offsetX,y:m+this.offsetY,startAngle:C,endAngle:C+N,circumference:N,outerRadius:T,innerRadius:v};x&&(F.options=E||this.resolveDataElementOptions(P,q.active?"active":s)),C+=N,this.updateElement(q,P,F,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,s;for(s=0;s<n.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?kn*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=cS(n._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const i=this.chart;let s,r,a,c,u;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),t=a.data,c=a.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)u=c.resolveDataElementOptions(s),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,s=t.length;i<s;++i){const r=this.resolveDataElementOptions(i);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(ue(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}kt(Kd,"id","doughnut"),kt(Kd,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),kt(Kd,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),kt(Kd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return n.labels.map((r,a)=>{const u=t.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:s,lineWidth:u.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class Zg extends mc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,a=this.chart._animationsDisabled;let{start:c,count:u}=ent(n,s,a);this._drawStart=c,this._drawCount=u,nnt(n)&&(c=0,u=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:h},t),this.updateElements(s,c,u,t)}updateElements(t,n,i,s){const r=s==="reset",{iScale:a,vScale:c,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(n,s),y=a.axis,v=c.axis,{spanGaps:T,segment:E}=this.options,x=Zf(T)?T:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||r||s==="none",P=n+i,N=t.length;let q=n>0&&this.getParsed(n-1);for(let F=0;F<N;++F){const G=t[F],k=C?G:{};if(F<n||F>=P){k.skip=!0;continue}const D=this.getParsed(F),M=$e(D[v]),V=k[y]=a.getPixelForValue(D[y],F),B=k[v]=r||M?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,D,u):D[v],F);k.skip=isNaN(V)||isNaN(B)||M,k.stop=F>0&&Math.abs(D[y]-q[y])>x,E&&(k.parsed=D,k.raw=h.data[F]),m&&(k.options=f||this.resolveDataElementOptions(F,G.active?"active":s)),C||this.updateElement(G,F,k,s),q=D}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}kt(Zg,"id","line"),kt(Zg,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),kt(Zg,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class yw extends Kd{}kt(yw,"id","pie"),kt(yw,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Zl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _S{constructor(t){kt(this,"options");this.options=t||{}}static override(t){Object.assign(_S.prototype,t)}init(){}formats(){return Zl()}parse(){return Zl()}format(){return Zl()}add(){return Zl()}diff(){return Zl()}startOf(){return Zl()}endOf(){return Zl()}}var Iit={_date:_S};function Dit(e,t,n,i){const{controller:s,data:r,_sorted:a}=e,c=s._cachedMeta.iScale,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&a&&r.length){const h=c._reversePixels?Xet:hc;if(i){if(s._sharedOptions){const f=r[0],m=typeof f.getRange=="function"&&f.getRange(t);if(m){const y=h(r,t,n-m),v=h(r,t,n+m);return{lo:y.lo,hi:v.hi}}}}else{const f=h(r,t,n);if(u){const{vScale:m}=s._cachedMeta,{_parsed:y}=e,v=y.slice(0,f.lo+1).reverse().findIndex(E=>!$e(E[m.axis]));f.lo-=Math.max(0,v);const T=y.slice(f.hi).findIndex(E=>!$e(E[m.axis]));f.hi+=Math.max(0,T)}return f}}return{lo:0,hi:r.length-1}}function K_(e,t,n,i,s){const r=e.getSortedVisibleDatasetMetas(),a=n[t];for(let c=0,u=r.length;c<u;++c){const{index:h,data:f}=r[c],{lo:m,hi:y}=Dit(r[c],t,a,s);for(let v=m;v<=y;++v){const T=f[v];T.skip||i(T,h,v)}}}function Mit(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,a=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function Bb(e,t,n,i,s){const r=[];return!s&&!e.isPointInArea(t)||K_(e,n,t,function(c,u,h){!s&&!ah(c,e.chartArea,0)||c.inRange(t.x,t.y,i)&&r.push({element:c,datasetIndex:u,index:h})},!0),r}function Nit(e,t,n,i){let s=[];function r(a,c,u){const{startAngle:h,endAngle:f}=a.getProps(["startAngle","endAngle"],i),{angle:m}=m4(a,{x:t.x,y:t.y});Jf(m,h,f)&&s.push({element:a,datasetIndex:c,index:u})}return K_(e,n,t,r),s}function Pit(e,t,n,i,s,r){let a=[];const c=Mit(n);let u=Number.POSITIVE_INFINITY;function h(f,m,y){const v=f.inRange(t.x,t.y,s);if(i&&!v)return;const T=f.getCenterPoint(s);if(!(!!r||e.isPointInArea(T))&&!v)return;const x=c(t,T);x<u?(a=[{element:f,datasetIndex:m,index:y}],u=x):x===u&&a.push({element:f,datasetIndex:m,index:y})}return K_(e,n,t,h),a}function zb(e,t,n,i,s,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!i?Nit(e,t,n,s):Pit(e,t,n,i,s,r)}function MN(e,t,n,i,s){const r=[],a=n==="x"?"inXRange":"inYRange";let c=!1;return K_(e,n,t,(u,h,f)=>{u[a]&&u[a](t[n],s)&&(r.push({element:u,datasetIndex:h,index:f}),c=c||u.inRange(t.x,t.y,s))}),i&&!c?[]:r}var Oit={modes:{index(e,t,n,i){const s=no(t,e),r=n.axis||"x",a=n.includeInvisible||!1,c=n.intersect?Bb(e,s,r,i,a):zb(e,s,r,!1,i,a),u=[];return c.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const f=c[0].index,m=h.data[f];m&&!m.skip&&u.push({element:m,datasetIndex:h.index,index:f})}),u):[]},dataset(e,t,n,i){const s=no(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;let c=n.intersect?Bb(e,s,r,i,a):zb(e,s,r,!1,i,a);if(c.length>0){const u=c[0].datasetIndex,h=e.getDatasetMeta(u).data;c=[];for(let f=0;f<h.length;++f)c.push({element:h[f],datasetIndex:u,index:f})}return c},point(e,t,n,i){const s=no(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;return Bb(e,s,r,i,a)},nearest(e,t,n,i){const s=no(t,e),r=n.axis||"xy",a=n.includeInvisible||!1;return zb(e,s,r,n.intersect,i,a)},x(e,t,n,i){const s=no(t,e);return MN(e,s,"x",n.intersect,i)},y(e,t,n,i){const s=no(t,e);return MN(e,s,"y",n.intersect,i)}}};const k4=["left","top","right","bottom"];function Pd(e,t){return e.filter(n=>n.pos===t)}function NN(e,t){return e.filter(n=>k4.indexOf(n.pos)===-1&&n.box.axis===t)}function Od(e,t){return e.sort((n,i)=>{const s=t?i:n,r=t?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function kit(e){const t=[];let n,i,s,r,a,c;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],{position:r,options:{stack:a,stackWeight:c=1}}=s,t.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&r+a,stackWeight:c});return t}function Lit(e){const t={};for(const n of e){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!k4.includes(s))continue;const a=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return t}function Vit(e,t){const n=Lit(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,a,c;for(r=0,a=e.length;r<a;++r){c=e[r];const{fullSize:u}=c.box,h=n[c.stack],f=h&&c.stackWeight/h.weight;c.horizontal?(c.width=f?f*i:u&&t.availableWidth,c.height=s):(c.width=i,c.height=f?f*s:u&&t.availableHeight)}return n}function jit(e){const t=kit(e),n=Od(t.filter(h=>h.box.fullSize),!0),i=Od(Pd(t,"left"),!0),s=Od(Pd(t,"right")),r=Od(Pd(t,"top"),!0),a=Od(Pd(t,"bottom")),c=NN(t,"x"),u=NN(t,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(u).concat(a).concat(c),chartArea:Pd(t,"chartArea"),vertical:i.concat(s).concat(u),horizontal:r.concat(a).concat(c)}}function PN(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function L4(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Uit(e,t,n,i){const{pos:s,box:r}=n,a=e.maxPadding;if(!Le(s)){n.size&&(e[s]-=n.size);const m=i[n.stack]||{size:0,count:1};m.size=Math.max(m.size,n.horizontal?r.height:r.width),n.size=m.size/m.count,e[s]+=n.size}r.getPadding&&L4(a,r.getPadding());const c=Math.max(0,t.outerWidth-PN(a,e,"left","right")),u=Math.max(0,t.outerHeight-PN(a,e,"top","bottom")),h=c!==e.w,f=u!==e.h;return e.w=c,e.h=u,n.horizontal?{same:h,other:f}:{same:f,other:h}}function Fit(e){const t=e.maxPadding;function n(i){const s=Math.max(t[i]-e[i],0);return e[i]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Bit(e,t){const n=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{r[a]=Math.max(t[a],n[a])}),r}return i(e?["left","right"]:["top","bottom"])}function Xd(e,t,n,i){const s=[];let r,a,c,u,h,f;for(r=0,a=e.length,h=0;r<a;++r){c=e[r],u=c.box,u.update(c.width||t.w,c.height||t.h,Bit(c.horizontal,t));const{same:m,other:y}=Uit(t,n,c,i);h|=m&&s.length,f=f||y,u.fullSize||s.push(c)}return h&&Xd(s,t,n,i)||f}function Tg(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function ON(e,t,n,i){const s=n.padding;let{x:r,y:a}=t;for(const c of e){const u=c.box,h=i[c.stack]||{placed:0,weight:1},f=c.stackWeight/h.weight||1;if(c.horizontal){const m=t.w*f,y=h.size||u.height;Qf(h.start)&&(a=h.start),u.fullSize?Tg(u,s.left,a,n.outerWidth-s.right-s.left,y):Tg(u,t.left+h.placed,a,m,y),h.start=a,h.placed+=m,a=u.bottom}else{const m=t.h*f,y=h.size||u.width;Qf(h.start)&&(r=h.start),u.fullSize?Tg(u,r,s.top,y,n.outerHeight-s.bottom-s.top):Tg(u,r,t.top+h.placed,y,m),h.start=r,h.placed+=m,r=u.right}}t.x=r,t.y=a}var Xa={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=kr(e.options.layout.padding),r=Math.max(t-s.width,0),a=Math.max(n-s.height,0),c=jit(e.boxes),u=c.vertical,h=c.horizontal;Ee(e.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const f=u.reduce((E,x)=>x.box.options&&x.box.options.display===!1?E:E+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/f,hBoxMaxHeight:a/2}),y=Object.assign({},s);L4(y,kr(i));const v=Object.assign({maxPadding:y,w:r,h:a,x:s.left,y:s.top},s),T=Vit(u.concat(h),m);Xd(c.fullSize,v,m,T),Xd(u,v,m,T),Xd(h,v,m,T)&&Xd(u,v,m,T),Fit(v),ON(c.leftAndTop,v,m,T),v.x+=v.w,v.y+=v.h,ON(c.rightAndBottom,v,m,T),e.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Ee(c.chartArea,E=>{const x=E.box;Object.assign(x,e.chartArea),x.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class V4{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,s){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(t){return!0}updateConfig(t){}}class zit extends V4{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Jg="$chartjs",Hit={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kN=e=>e===null||e==="";function qit(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[Jg]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",kN(s)){const r=_N(e,"width");r!==void 0&&(e.width=r)}if(kN(i))if(e.style.height==="")e.height=e.width/(t||2);else{const r=_N(e,"height");r!==void 0&&(e.height=r)}return e}const j4=$nt?{passive:!0}:!1;function $it(e,t,n){e&&e.addEventListener(t,n,j4)}function Wit(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,j4)}function Git(e,t){const n=Hit[e.type]||e.type,{x:i,y:s}=no(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:s!==void 0?s:null}}function e_(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Yit(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let a=!1;for(const c of r)a=a||e_(c.addedNodes,i),a=a&&!e_(c.removedNodes,i);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Kit(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let a=!1;for(const c of r)a=a||e_(c.removedNodes,i),a=a&&!e_(c.addedNodes,i);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const tp=new Map;let LN=0;function U4(){const e=window.devicePixelRatio;e!==LN&&(LN=e,tp.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Xit(e,t){tp.size||window.addEventListener("resize",U4),tp.set(e,t)}function Qit(e){tp.delete(e),tp.size||window.removeEventListener("resize",U4)}function Zit(e,t,n){const i=e.canvas,s=i&&yS(i);if(!s)return;const r=v4((c,u)=>{const h=s.clientWidth;n(c,u),h<s.clientWidth&&n()},window),a=new ResizeObserver(c=>{const u=c[0],h=u.contentRect.width,f=u.contentRect.height;h===0&&f===0||r(h,f)});return a.observe(s),Xit(e,r),a}function Hb(e,t,n){n&&n.disconnect(),t==="resize"&&Qit(e)}function Jit(e,t,n){const i=e.canvas,s=v4(r=>{e.ctx!==null&&n(Git(r,e))},e);return $it(i,t,s),s}class tst extends V4{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(qit(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[Jg])return!1;const i=n[Jg].initial;["height","width"].forEach(r=>{const a=i[r];$e(a)?n.removeAttribute(r):n.setAttribute(r,a)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Jg],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),a={attach:Yit,detach:Kit,resize:Zit}[n]||Jit;s[n]=a(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),s=i[n];if(!s)return;({attach:Hb,detach:Hb,resize:Hb}[n]||Wit)(t,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,s){return qnt(t,n,i,s)}isAttached(t){const n=t&&yS(t);return!!(n&&n.isConnected)}}function est(e){return!gS()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?zit:tst}var Mg;let Sl=(Mg=class{constructor(){kt(this,"x");kt(this,"y");kt(this,"active",!1);kt(this,"options");kt(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return Zf(this.x)&&Zf(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},kt(Mg,"defaults",{}),kt(Mg,"defaultRoutes"),Mg);function nst(e,t){const n=e.options.ticks,i=ist(e),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?rst(t):[],a=r.length,c=r[0],u=r[a-1],h=[];if(a>s)return ost(t,h,r,a/s),h;const f=sst(r,t,s);if(a>0){let m,y;const v=a>1?Math.round((u-c)/(a-1)):null;for(wg(t,h,f,$e(v)?0:c-v,c),m=0,y=a-1;m<y;m++)wg(t,h,f,r[m],r[m+1]);return wg(t,h,f,u,$e(v)?t.length:u+v),h}return wg(t,h,f),h}function ist(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}function sst(e,t,n){const i=ast(e),s=t.length/n;if(!i)return Math.max(s,1);const r=Het(i);for(let a=0,c=r.length-1;a<c;a++){const u=r[a];if(u>s)return u}return Math.max(s,1)}function rst(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function ost(e,t,n,i){let s=0,r=n[0],a;for(i=Math.ceil(i),a=0;a<e.length;a++)a===r&&(t.push(e[a]),s++,r=n[s*i])}function wg(e,t,n,i,s){const r=ue(i,0),a=Math.min(ue(s,e.length),e.length);let c=0,u,h,f;for(n=Math.ceil(n),s&&(u=s-i,n=u/Math.floor(u/n)),f=r;f<0;)c++,f=Math.round(r+c*n);for(h=Math.max(r,0);h<a;h++)h===f&&(t.push(e[h]),c++,f=Math.round(r+c*n))}function ast(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const lst=e=>e==="left"?"right":e==="right"?"left":e,VN=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,jN=(e,t)=>Math.min(t||e,e);function UN(e,t){const n=[],i=e.length/t,s=e.length;let r=0;for(;r<s;r+=i)n.push(e[Math.floor(r)]);return n}function cst(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),r=e._startPixel,a=e._endPixel,c=1e-6;let u=e.getPixelForTick(s),h;if(!(n&&(i===1?h=Math.max(u-r,a-u):t===0?h=(e.getPixelForTick(1)-u)/2:h=(u-e.getPixelForTick(s-1))/2,u+=s<t?h:-h,u<r-c||u>a+c)))return u}function ust(e,t){Ee(e,n=>{const i=n.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function kd(e){return e.drawTicks?e.tickLength:0}function FN(e,t){if(!e.display)return 0;const n=vs(e.font,t),i=kr(e.padding);return(vi(e.text)?e.text.length:1)*n.lineHeight+i.height}function hst(e,t){return Lc(e,{scale:t,type:"scale"})}function dst(e,t,n){return Lc(e,{tick:n,index:t,type:"tick"})}function fst(e,t,n){let i=b4(e);return(n&&t!=="right"||!n&&t==="right")&&(i=lst(i)),i}function pst(e,t,n,i){const{top:s,left:r,bottom:a,right:c,chart:u}=e,{chartArea:h,scales:f}=u;let m=0,y,v,T;const E=a-s,x=c-r;if(e.isHorizontal()){if(v=ks(i,r,c),Le(n)){const C=Object.keys(n)[0],P=n[C];T=f[C].getPixelForValue(P)+E-t}else n==="center"?T=(h.bottom+h.top)/2+E-t:T=VN(e,n,t);y=c-r}else{if(Le(n)){const C=Object.keys(n)[0],P=n[C];v=f[C].getPixelForValue(P)-x+t}else n==="center"?v=(h.left+h.right)/2-x+t:v=VN(e,n,t);T=ks(i,a,s),m=n==="left"?-ri:ri}return{titleX:v,titleY:T,maxWidth:y,rotation:m}}class Ah extends Sl{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return t=Zr(t,Number.POSITIVE_INFINITY),n=Zr(n,Number.NEGATIVE_INFINITY),i=Zr(i,Number.POSITIVE_INFINITY),s=Zr(s,Number.NEGATIVE_INFINITY),{min:Zr(t,i),max:Zr(n,s),minDefined:dr(t),maxDefined:dr(n)}}getMinMax(t){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),a;if(s&&r)return{min:n,max:i};const c=this.getMatchingVisibleMetas();for(let u=0,h=c.length;u<h;++u)a=c[u].controller.getMinMax(this,t),s||(n=Math.min(n,a.min)),r||(i=Math.max(i,a.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:Zr(n,Zr(i,n)),max:Zr(i,Zr(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zt(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:s,grace:r,ticks:a}=this.options,c=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=wnt(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?UN(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=nst(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zt(this.options.afterUpdate,[this])}beforeSetDimensions(){Zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Zt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=Zt(n.callback,[r.value,i,t],this)}afterTickToLabelConversion(){Zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=jN(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let a=s,c,u,h;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const f=this._getLabelSizes(),m=f.widest.width,y=f.highest.height,v=Gi(this.chart.width-m,0,this.maxWidth);c=t.offset?this.maxWidth/i:v/(i-1),m+6>c&&(c=v/(i-(t.offset?.5:1)),u=this.maxHeight-kd(t.grid)-n.padding-FN(t.title,this.chart.options.font),h=Math.sqrt(m*m+y*y),a=Get(Math.min(Math.asin(Gi((f.highest.height+6)/c,-1,1)),Math.asin(Gi(u/h,-1,1))-Math.asin(Gi(y/h,-1,1)))),a=Math.max(s,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){Zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,a=this._isVisible(),c=this.isHorizontal();if(a){const u=FN(s,n.options.font);if(c?(t.width=this.maxWidth,t.height=kd(r)+u):(t.height=this.maxHeight,t.width=kd(r)+u),i.display&&this.ticks.length){const{first:h,last:f,widest:m,highest:y}=this._getLabelSizes(),v=i.padding*2,T=Xo(this.labelRotation),E=Math.cos(T),x=Math.sin(T);if(c){const C=i.mirror?0:x*m.width+E*y.height;t.height=Math.min(this.maxHeight,t.height+C+v)}else{const C=i.mirror?0:E*m.width+x*y.height;t.width=Math.min(this.maxWidth,t.width+C+v)}this._calculatePadding(h,f,x,E)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,s){const{ticks:{align:r,padding:a},position:c}=this.options,u=this.labelRotation!==0,h=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,v=0;u?h?(y=s*t.width,v=i*n.height):(y=i*t.height,v=s*n.width):r==="start"?v=n.width:r==="end"?y=t.width:r!=="inner"&&(y=t.width/2,v=n.width/2),this.paddingLeft=Math.max((y-f+a)*this.width/(this.width-f),0),this.paddingRight=Math.max((v-m+a)*this.width/(this.width-m),0)}else{let f=n.height/2,m=t.height/2;r==="start"?(f=0,m=t.height):r==="end"&&(f=n.height,m=0),this.paddingTop=f+a,this.paddingBottom=m+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)$e(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=UN(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:s,_longestTextCache:r}=this,a=[],c=[],u=Math.floor(n/jN(n,i));let h=0,f=0,m,y,v,T,E,x,C,P,N,q,F;for(m=0;m<n;m+=u){if(T=t[m].label,E=this._resolveTickFontOptions(m),s.font=x=E.string,C=r[x]=r[x]||{data:{},gc:[]},P=E.lineHeight,N=q=0,!$e(T)&&!vi(T))N=fN(s,C.data,C.gc,N,T),q=P;else if(vi(T))for(y=0,v=T.length;y<v;++y)F=T[y],!$e(F)&&!vi(F)&&(N=fN(s,C.data,C.gc,N,F),q+=P);a.push(N),c.push(q),h=Math.max(N,h),f=Math.max(q,f)}ust(r,n);const G=a.indexOf(h),k=c.indexOf(f),D=M=>({width:a[M]||0,height:c[M]||0});return{first:D(0),last:D(n-1),widest:D(G),highest:D(k),widths:a,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return Ket(this._alignToPixels?Ql(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=dst(this.getContext(),t,i))}return this.$context||(this.$context=hst(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Xo(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),a=t.autoSkipPadding||0,c=r?r.widest.width+a:0,u=r?r.highest.height+a:0;return this.isHorizontal()?u*i>c*s?c/i:u/s:u*s<c*i?u/i:c/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:a,border:c}=s,u=r.offset,h=this.isHorizontal(),m=this.ticks.length+(u?1:0),y=kd(r),v=[],T=c.setContext(this.getContext()),E=T.display?T.width:0,x=E/2,C=function(X){return Ql(i,X,E)};let P,N,q,F,G,k,D,M,V,B,$,H;if(a==="top")P=C(this.bottom),k=this.bottom-y,M=P-x,B=C(t.top)+x,H=t.bottom;else if(a==="bottom")P=C(this.top),B=t.top,H=C(t.bottom)-x,k=P+x,M=this.top+y;else if(a==="left")P=C(this.right),G=this.right-y,D=P-x,V=C(t.left)+x,$=t.right;else if(a==="right")P=C(this.left),V=t.left,$=C(t.right)-x,G=P+x,D=this.left+y;else if(n==="x"){if(a==="center")P=C((t.top+t.bottom)/2+.5);else if(Le(a)){const X=Object.keys(a)[0],nt=a[X];P=C(this.chart.scales[X].getPixelForValue(nt))}B=t.top,H=t.bottom,k=P+x,M=k+y}else if(n==="y"){if(a==="center")P=C((t.left+t.right)/2);else if(Le(a)){const X=Object.keys(a)[0],nt=a[X];P=C(this.chart.scales[X].getPixelForValue(nt))}G=P-x,D=G-y,V=t.left,$=t.right}const Et=ue(s.ticks.maxTicksLimit,m),_t=Math.max(1,Math.ceil(m/Et));for(N=0;N<m;N+=_t){const X=this.getContext(N),nt=r.setContext(X),yt=c.setContext(X),xt=nt.lineWidth,z=nt.color,it=yt.dash||[],lt=yt.dashOffset,ct=nt.tickWidth,vt=nt.tickColor,Nt=nt.tickBorderDash||[],wt=nt.tickBorderDashOffset;q=cst(this,N,u),q!==void 0&&(F=Ql(i,q,xt),h?G=D=V=$=F:k=M=B=H=F,v.push({tx1:G,ty1:k,tx2:D,ty2:M,x1:V,y1:B,x2:$,y2:H,width:xt,color:z,borderDash:it,borderDashOffset:lt,tickWidth:ct,tickColor:vt,tickBorderDash:Nt,tickBorderDashOffset:wt}))}return this._ticksLength=m,this._borderValue=P,v}_computeLabelItems(t){const n=this.axis,i=this.options,{position:s,ticks:r}=i,a=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:h,padding:f,mirror:m}=r,y=kd(i.grid),v=y+f,T=m?-f:v,E=-Xo(this.labelRotation),x=[];let C,P,N,q,F,G,k,D,M,V,B,$,H="middle";if(s==="top")G=this.bottom-T,k=this._getXAxisLabelAlignment();else if(s==="bottom")G=this.top+T,k=this._getXAxisLabelAlignment();else if(s==="left"){const _t=this._getYAxisLabelAlignment(y);k=_t.textAlign,F=_t.x}else if(s==="right"){const _t=this._getYAxisLabelAlignment(y);k=_t.textAlign,F=_t.x}else if(n==="x"){if(s==="center")G=(t.top+t.bottom)/2+v;else if(Le(s)){const _t=Object.keys(s)[0],X=s[_t];G=this.chart.scales[_t].getPixelForValue(X)+v}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")F=(t.left+t.right)/2-v;else if(Le(s)){const _t=Object.keys(s)[0],X=s[_t];F=this.chart.scales[_t].getPixelForValue(X)}k=this._getYAxisLabelAlignment(y).textAlign}n==="y"&&(u==="start"?H="top":u==="end"&&(H="bottom"));const Et=this._getLabelSizes();for(C=0,P=c.length;C<P;++C){N=c[C],q=N.label;const _t=r.setContext(this.getContext(C));D=this.getPixelForTick(C)+r.labelOffset,M=this._resolveTickFontOptions(C),V=M.lineHeight,B=vi(q)?q.length:1;const X=B/2,nt=_t.color,yt=_t.textStrokeColor,xt=_t.textStrokeWidth;let z=k;a?(F=D,k==="inner"&&(C===P-1?z=this.options.reverse?"left":"right":C===0?z=this.options.reverse?"right":"left":z="center"),s==="top"?h==="near"||E!==0?$=-B*V+V/2:h==="center"?$=-Et.highest.height/2-X*V+V:$=-Et.highest.height+V/2:h==="near"||E!==0?$=V/2:h==="center"?$=Et.highest.height/2-X*V:$=Et.highest.height-B*V,m&&($*=-1),E!==0&&!_t.showLabelBackdrop&&(F+=V/2*Math.sin(E))):(G=D,$=(1-B)*V/2);let it;if(_t.showLabelBackdrop){const lt=kr(_t.backdropPadding),ct=Et.heights[C],vt=Et.widths[C];let Nt=$-lt.top,wt=0-lt.left;switch(H){case"middle":Nt-=ct/2;break;case"bottom":Nt-=ct;break}switch(k){case"center":wt-=vt/2;break;case"right":wt-=vt;break;case"inner":C===P-1?wt-=vt:C>0&&(wt-=vt/2);break}it={left:wt,top:Nt,width:vt+lt.width,height:ct+lt.height,color:_t.backdropColor}}x.push({label:q,font:M,textOffset:$,options:{rotation:E,color:nt,strokeColor:yt,strokeWidth:xt,textAlign:z,textBaseline:H,translation:[F,G],backdrop:it}})}return x}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Xo(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,a=this._getLabelSizes(),c=t+r,u=a.widest.width;let h,f;return n==="left"?s?(f=this.right+r,i==="near"?h="left":i==="center"?(h="center",f+=u/2):(h="right",f+=u)):(f=this.right-c,i==="near"?h="right":i==="center"?(h="center",f-=u/2):(h="left",f=this.left)):n==="right"?s?(f=this.left+r,i==="near"?h="right":i==="center"?(h="center",f-=u/2):(h="left",f-=u)):(f=this.left+c,i==="near"?h="left":i==="center"?(h="center",f+=u/2):(h="right",f=this.right)):h="right",{textAlign:h,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:s,width:r,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,s,r,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,a;const c=(u,h,f)=>{!f.width||!f.color||(i.save(),i.lineWidth=f.width,i.strokeStyle=f.color,i.setLineDash(f.borderDash||[]),i.lineDashOffset=f.borderDashOffset,i.beginPath(),i.moveTo(u.x,u.y),i.lineTo(h.x,h.y),i.stroke(),i.restore())};if(n.display)for(r=0,a=s.length;r<a;++r){const u=s[r];n.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),a=i.display?r.width:0;if(!a)return;const c=s.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,f,m,y;this.isHorizontal()?(h=Ql(t,this.left,a)-a/2,f=Ql(t,this.right,c)+c/2,m=y=u):(m=Ql(t,this.top,a)-a/2,y=Ql(t,this.bottom,c)+c/2,h=f=u),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(h,m),n.lineTo(f,y),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&uS(i,s);const r=this.getLabelItems(t);for(const a of r){const c=a.options,u=a.font,h=a.label,f=a.textOffset;Zy(i,h,0,f,u,c)}s&&hS(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=vs(i.font),a=kr(i.padding),c=i.align;let u=r.lineHeight/2;n==="bottom"||n==="center"||Le(n)?(u+=a.bottom,vi(i.text)&&(u+=r.lineHeight*(i.text.length-1))):u+=a.top;const{titleX:h,titleY:f,maxWidth:m,rotation:y}=pst(this,u,n,c);Zy(t,i.text,0,0,r,{color:i.color,maxWidth:m,rotation:y,textAlign:fst(c,n,s),textBaseline:"middle",translation:[h,f]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=ue(t.grid&&t.grid.z,-1),s=ue(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ah.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,a;for(r=0,a=n.length;r<a;++r){const c=n[r];c[i]===this.id&&(!t||c.type===t)&&s.push(c)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return vs(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Eg{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;yst(n)&&(i=this.register(n));const s=this.items,r=t.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,mst(t,a,i),this.override&&zn.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,s=this.scope;i in n&&delete n[i],s&&i in zn[s]&&(delete zn[s][i],this.override&&delete Cc[i])}}function mst(e,t,n){const i=Xf(Object.create(null),[n?zn.get(n):{},zn.get(t),e.defaults]);zn.set(t,i),e.defaultRoutes&&gst(t,e.defaultRoutes),e.descriptors&&zn.describe(t,e.descriptors)}function gst(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),r=[e].concat(i).join("."),a=t[n].split("."),c=a.pop(),u=a.join(".");zn.route(r,s,u,c)})}function yst(e){return"id"in e&&"defaults"in e}class _st{constructor(){this.controllers=new Eg(mc,"datasets",!0),this.elements=new Eg(Sl,"elements"),this.plugins=new Eg(Object,"plugins"),this.scales=new Eg(Ah,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):Ee(s,a=>{const c=i||this._getRegistryForType(a);this._exec(t,c,a)})})}_exec(t,n,i){const s=oS(t);Zt(i["before"+s],[],i),n[t](i),Zt(i["after"+s],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var to=new _st;class vst{constructor(){this._init=[]}notify(t,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),a=this._notify(r,t,n,i);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,i,s){s=s||{};for(const r of t){const a=r.plugin,c=a[i],u=[n,s,r.options];if(Zt(c,u,a)===!1&&s.cancelable)return!1}return!0}invalidate(){$e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,s=ue(i.options&&i.options.plugins,{}),r=bst(i);return s===!1&&!n?[]:wst(t,r,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,s=(r,a)=>r.filter(c=>!a.some(u=>c.plugin.id===u.plugin.id));this._notify(s(n,i),t,"stop"),this._notify(s(i,n),t,"start")}}function bst(e){const t={},n=[],i=Object.keys(to.plugins.items);for(let r=0;r<i.length;r++)n.push(to.getPlugin(i[r]));const s=e.plugins||[];for(let r=0;r<s.length;r++){const a=s[r];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function Tst(e,t){return!t&&e===!1?null:e===!0?{}:e}function wst(e,{plugins:t,localIds:n},i,s){const r=[],a=e.getContext();for(const c of t){const u=c.id,h=Tst(i[u],s);h!==null&&r.push({plugin:c,options:Est(e.config,{plugin:c,local:n[u]},h,a)})}return r}function Est(e,{plugin:t,local:n},i,s){const r=e.pluginScopeKeys(t),a=e.getOptionScopes(i,r);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _w(e,t){const n=zn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function xst(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Sst(e,t){return e===t?"_index_":"_value_"}function BN(e){if(e==="x"||e==="y"||e==="r")return e}function Ast(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function vw(e,...t){if(BN(e))return e;for(const n of t){const i=n.axis||Ast(n.position)||e.length>1&&BN(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function zN(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Cst(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return zN(e,"x",n[0])||zN(e,"y",n[0])}return{}}function Rst(e,t){const n=Cc[e.type]||{scales:{}},i=t.scales||{},s=_w(e.type,t),r=Object.create(null);return Object.keys(i).forEach(a=>{const c=i[a];if(!Le(c))return console.error(`Invalid scale configuration for scale: ${a}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=vw(a,c,Cst(a,e),zn.scales[c.type]),h=Sst(u,s),f=n.scales||{};r[a]=mf(Object.create(null),[{axis:u},c,f[u],f[h]])}),e.data.datasets.forEach(a=>{const c=a.type||e.type,u=a.indexAxis||_w(c,t),f=(Cc[c]||{}).scales||{};Object.keys(f).forEach(m=>{const y=xst(m,u),v=a[y+"AxisID"]||y;r[v]=r[v]||Object.create(null),mf(r[v],[{axis:y},i[v],f[m]])})}),Object.keys(r).forEach(a=>{const c=r[a];mf(c,[zn.scales[c.type],zn.scale])}),r}function F4(e){const t=e.options||(e.options={});t.plugins=ue(t.plugins,{}),t.scales=Rst(e,t)}function B4(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Ist(e){return e=e||{},e.data=B4(e.data),F4(e),e}const HN=new Map,z4=new Set;function xg(e,t){let n=HN.get(e);return n||(n=t(),HN.set(e,n),z4.add(n)),n}const Ld=(e,t,n)=>{const i=Ac(t,n);i!==void 0&&e.add(i)};class Dst{constructor(t){this._config=Ist(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=B4(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),F4(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return xg(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return xg(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return xg(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return xg(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let s=i.get(t);return(!s||n)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,n,i){const{options:s,type:r}=this,a=this._cachedScopes(t,i),c=a.get(n);if(c)return c;const u=new Set;n.forEach(f=>{t&&(u.add(t),f.forEach(m=>Ld(u,t,m))),f.forEach(m=>Ld(u,s,m)),f.forEach(m=>Ld(u,Cc[r]||{},m)),f.forEach(m=>Ld(u,zn,m)),f.forEach(m=>Ld(u,mw,m))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),z4.has(n)&&a.set(n,h),h}chartOptionScopes(){const{options:t,type:n}=this;return[t,Cc[n]||{},zn.datasets[n]||{},{type:n},zn,mw]}resolveNamedOptions(t,n,i,s=[""]){const r={$shared:!0},{resolver:a,subPrefixes:c}=qN(this._resolverCache,t,s);let u=a;if(Nst(a,n)){r.$shared=!1,i=pl(i)?i():i;const h=this.createResolver(t,i,c);u=lh(a,i,h)}for(const h of n)r[h]=u[h];return r}createResolver(t,n,i=[""],s){const{resolver:r}=qN(this._resolverCache,t,i);return Le(n)?lh(r,n,void 0,s):r}}function qN(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let r=i.get(s);return r||(r={resolver:fS(t,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},i.set(s,r)),r}const Mst=e=>Le(e)&&Object.getOwnPropertyNames(e).some(t=>pl(e[t]));function Nst(e,t){const{isScriptable:n,isIndexable:i}=x4(e);for(const s of t){const r=n(s),a=i(s),c=(a||r)&&e[s];if(r&&(pl(c)||Mst(c))||a&&vi(c))return!0}return!1}var Pst="4.4.8";const Ost=["top","bottom","left","right","chartArea"];function $N(e,t){return e==="top"||e==="bottom"||Ost.indexOf(e)===-1&&t==="x"}function WN(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function GN(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Zt(n&&n.onComplete,[e],t)}function kst(e){const t=e.chart,n=t.options.animation;Zt(n&&n.onProgress,[e],t)}function H4(e){return gS()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ty={},YN=e=>{const t=H4(e);return Object.values(ty).filter(n=>n.canvas===t).pop()};function Lst(e,t,n){const i=Object.keys(e);for(const s of i){const r=+s;if(r>=t){const a=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=a)}}}function Vst(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}function Sg(e,t,n){return e.options.clip?e[n]:t[n]}function jst(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Sg(n,t,"left"),right:Sg(n,t,"right"),top:Sg(i,t,"top"),bottom:Sg(i,t,"bottom")}:t}var ja;let kp=(ja=class{static register(...t){to.add(...t),KN()}static unregister(...t){to.remove(...t),KN()}constructor(t,n){const i=this.config=new Dst(n),s=H4(t),r=YN(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||est(s)),this.platform.updateConfig(i);const c=this.platform.acquireContext(s,a.aspectRatio),u=c&&c.canvas,h=u&&u.height,f=u&&u.width;if(this.id=Oet(),this.ctx=c,this.canvas=u,this.width=f,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new vst,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Jet(m=>this.update(m),a.resizeDelay||0),this._dataChanges=[],ty[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}zo.listen(this,"complete",GN),zo.listen(this,"progress",kst),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return $e(t)?n&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return to}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yN(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return pN(this.canvas,this.ctx),this}stop(){return zo.stop(this),this}resize(t,n){zo.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,n,r),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,yN(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),Zt(i.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ee(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{});let r=[];n&&(r=r.concat(Object.keys(n).map(a=>{const c=n[a],u=vw(a,c),h=u==="r",f=u==="x";return{options:c,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),Ee(r,a=>{const c=a.options,u=c.id,h=vw(u,c),f=ue(c.type,a.dtype);(c.position===void 0||$N(c.position,h)!==$N(a.dposition))&&(c.position=a.dposition),s[u]=!0;let m=null;if(u in i&&i[u].type===f)m=i[u];else{const y=to.getScale(f);m=new y({id:u,type:f,ctx:this.ctx,chart:this}),i[m.id]=m}m.init(c,t)}),Ee(s,(a,c)=>{a||delete i[c]}),Ee(i,a=>{Xa.configure(this,a,a.options),Xa.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(WN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let a=this.getDatasetMeta(i);const c=r.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=r.indexAxis||_w(c,this.options),a.order=r.order||0,a.index=i,a.label=""+r.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const u=to.getController(c),{datasetElementType:h,dataElementType:f}=zn.datasets[c];Object.assign(u,{dataElementType:to.getElement(f),datasetElementType:h&&to.getElement(h)}),a.controller=new u(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Ee(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,f=this.data.datasets.length;h<f;h++){const{controller:m}=this.getDatasetMeta(h),y=!s&&r.indexOf(m)===-1;m.buildOrUpdateElements(y),a=Math.max(+m.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||Ee(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(WN("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Ee(this.scales,t=>{Xa.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!sN(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const a=i==="_removeElements"?-r:r;Lst(t,s,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(t.filter(a=>a[0]===r).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!sN(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xa.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ee(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,pl(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zo.has(this)?this.attached&&!zo.running(this)&&zo.start(this):(this.draw(),GN({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const a=n[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i=t._clip,s=!i.disabled,r=jst(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&uS(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),t.controller.draw(),s&&hS(n),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return ah(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,s){const r=Oit.modes[n];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Lc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),a=r.controller._resolveAnimations(void 0,s);Qf(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(r,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),zo.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),pN(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete ty[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(r,a)=>{n.addEventListener(this,r,a),t[r]=a},s=(r,a,c)=>{r.offsetX=a,r.offsetY=c,this._eventHandler(r)};Ee(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(u,h)=>{n.addEventListener(this,u,h),t[u]=h},s=(u,h)=>{t[u]&&(n.removeEventListener(this,u,h),delete t[u])},r=(u,h)=>{this.canvas&&this.resize(u,h)};let a;const c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",r),i("detach",a)};a=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",c)},n.isAttached(this.canvas)?c():a()}unbindEvents(){Ee(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Ee(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const s=i?"set":"remove";let r,a,c,u;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),c=0,u=t.length;c<u;++c){a=t[c];const h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:r,index:a})=>{const c=this.getDatasetMeta(r);if(!c)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:c.data[a],index:a}});!Ky(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const s=this.options.hover,r=(u,h)=>u.filter(f=>!h.some(m=>f.datasetIndex===m.datasetIndex&&f.index===m.index)),a=r(n,t),c=i?t:r(t,n);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:s=[],options:r}=this,a=n,c=this._getActiveElements(t,s,i,a),u=Fet(t),h=Vst(t,this._lastEvent,i,u);i&&(this._lastEvent=null,Zt(r.onHover,[t,c,this],this),u&&Zt(r.onClick,[t,c,this],this));const f=!Ky(c,s);return(f||n)&&(this._active=c,this._updateHoverStyles(c,s,n)),this._lastEvent=h,f}_getActiveElements(t,n,i,s){if(t.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},kt(ja,"defaults",zn),kt(ja,"instances",ty),kt(ja,"overrides",Cc),kt(ja,"registry",to),kt(ja,"version",Pst),kt(ja,"getChart",YN),ja);function KN(){return Ee(kp.instances,e=>e._plugins.invalidate())}function Ust(e,t,n){const{startAngle:i,pixelMargin:s,x:r,y:a,outerRadius:c,innerRadius:u}=t;let h=s/c;e.beginPath(),e.arc(r,a,c,i-h,n+h),u>s?(h=s/u,e.arc(r,a,u,n+h,i-h,!0)):e.arc(r,a,s,n+ri,i-ri),e.closePath(),e.clip()}function Fst(e){return dS(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Bst(e,t,n,i){const s=Fst(e.options.borderRadius),r=(n-t)/2,a=Math.min(r,i*t/2),c=u=>{const h=(n-Math.min(r,u))*i/2;return Gi(u,0,Math.min(r,h))};return{outerStart:c(s.outerStart),outerEnd:c(s.outerEnd),innerStart:Gi(s.innerStart,0,a),innerEnd:Gi(s.innerEnd,0,a)}}function Su(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function n_(e,t,n,i,s,r){const{x:a,y:c,startAngle:u,pixelMargin:h,innerRadius:f}=t,m=Math.max(t.outerRadius+i+n-h,0),y=f>0?f+i+n+h:0;let v=0;const T=s-u;if(i){const _t=f>0?f-i:0,X=m>0?m-i:0,nt=(_t+X)/2,yt=nt!==0?T*nt/(nt+i):T;v=(T-yt)/2}const E=Math.max(.001,T*m-n/Kn)/m,x=(T-E)/2,C=u+x+v,P=s-x-v,{outerStart:N,outerEnd:q,innerStart:F,innerEnd:G}=Bst(t,y,m,P-C),k=m-N,D=m-q,M=C+N/k,V=P-q/D,B=y+F,$=y+G,H=C+F/B,Et=P-G/$;if(e.beginPath(),r){const _t=(M+V)/2;if(e.arc(a,c,m,M,_t),e.arc(a,c,m,_t,V),q>0){const xt=Su(D,V,a,c);e.arc(xt.x,xt.y,q,V,P+ri)}const X=Su($,P,a,c);if(e.lineTo(X.x,X.y),G>0){const xt=Su($,Et,a,c);e.arc(xt.x,xt.y,G,P+ri,Et+Math.PI)}const nt=(P-G/y+(C+F/y))/2;if(e.arc(a,c,y,P-G/y,nt,!0),e.arc(a,c,y,nt,C+F/y,!0),F>0){const xt=Su(B,H,a,c);e.arc(xt.x,xt.y,F,H+Math.PI,C-ri)}const yt=Su(k,C,a,c);if(e.lineTo(yt.x,yt.y),N>0){const xt=Su(k,M,a,c);e.arc(xt.x,xt.y,N,C-ri,M)}}else{e.moveTo(a,c);const _t=Math.cos(M)*m+a,X=Math.sin(M)*m+c;e.lineTo(_t,X);const nt=Math.cos(V)*m+a,yt=Math.sin(V)*m+c;e.lineTo(nt,yt)}e.closePath()}function zst(e,t,n,i,s){const{fullCircles:r,startAngle:a,circumference:c}=t;let u=t.endAngle;if(r){n_(e,t,n,i,u,s);for(let h=0;h<r;++h)e.fill();isNaN(c)||(u=a+(c%kn||kn))}return n_(e,t,n,i,u,s),e.fill(),u}function Hst(e,t,n,i,s){const{fullCircles:r,startAngle:a,circumference:c,options:u}=t,{borderWidth:h,borderJoinStyle:f,borderDash:m,borderDashOffset:y}=u,v=u.borderAlign==="inner";if(!h)return;e.setLineDash(m||[]),e.lineDashOffset=y,v?(e.lineWidth=h*2,e.lineJoin=f||"round"):(e.lineWidth=h,e.lineJoin=f||"bevel");let T=t.endAngle;if(r){n_(e,t,n,i,T,s);for(let E=0;E<r;++E)e.stroke();isNaN(c)||(T=a+(c%kn||kn))}v&&Ust(e,t,T),r||(n_(e,t,n,i,T,s),e.stroke())}class Uu extends Sl{constructor(n){super();kt(this,"circumference");kt(this,"endAngle");kt(this,"fullCircles");kt(this,"innerRadius");kt(this,"outerRadius");kt(this,"pixelMargin");kt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.getProps(["x","y"],s),{angle:a,distance:c}=m4(r,{x:n,y:i}),{startAngle:u,endAngle:h,innerRadius:f,outerRadius:m,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),v=(this.options.spacing+this.options.borderWidth)/2,T=ue(y,h-u),E=Jf(a,u,h)&&u!==h,x=T>=kn||E,C=Ka(c,f+v,m+v);return x&&C}getCenterPoint(n){const{x:i,y:s,startAngle:r,endAngle:a,innerRadius:c,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:h,spacing:f}=this.options,m=(r+a)/2,y=(c+u+f+h)/2;return{x:i+Math.cos(m)*y,y:s+Math.sin(m)*y}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:s}=this,r=(i.offset||0)/4,a=(i.spacing||0)/2,c=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>kn?Math.floor(s/kn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const u=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(u)*r,Math.sin(u)*r);const h=1-Math.sin(Math.min(Kn,s||0)),f=r*h;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,zst(n,this,f,a,c),Hst(n,this,f,a,c),n.restore()}}kt(Uu,"id","arc"),kt(Uu,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),kt(Uu,"defaultRoutes",{backgroundColor:"backgroundColor"}),kt(Uu,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function q4(e,t,n=t){e.lineCap=ue(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ue(n.borderDash,t.borderDash)),e.lineDashOffset=ue(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ue(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ue(n.borderWidth,t.borderWidth),e.strokeStyle=ue(n.borderColor,t.borderColor)}function qst(e,t,n){e.lineTo(n.x,n.y)}function $st(e){return e.stepped?fnt:e.tension||e.cubicInterpolationMode==="monotone"?pnt:qst}function $4(e,t,n={}){const i=e.length,{start:s=0,end:r=i-1}=n,{start:a,end:c}=t,u=Math.max(s,a),h=Math.min(r,c),f=s<a&&r<a||s>c&&r>c;return{count:i,start:u,loop:t.loop,ilen:h<u&&!f?i+h-u:h-u}}function Wst(e,t,n,i){const{points:s,options:r}=t,{count:a,start:c,loop:u,ilen:h}=$4(s,n,i),f=$st(r);let{move:m=!0,reverse:y}=i||{},v,T,E;for(v=0;v<=h;++v)T=s[(c+(y?h-v:v))%a],!T.skip&&(m?(e.moveTo(T.x,T.y),m=!1):f(e,E,T,y,r.stepped),E=T);return u&&(T=s[(c+(y?h:0))%a],f(e,E,T,y,r.stepped)),!!u}function Gst(e,t,n,i){const s=t.points,{count:r,start:a,ilen:c}=$4(s,n,i),{move:u=!0,reverse:h}=i||{};let f=0,m=0,y,v,T,E,x,C;const P=q=>(a+(h?c-q:q))%r,N=()=>{E!==x&&(e.lineTo(f,x),e.lineTo(f,E),e.lineTo(f,C))};for(u&&(v=s[P(0)],e.moveTo(v.x,v.y)),y=0;y<=c;++y){if(v=s[P(y)],v.skip)continue;const q=v.x,F=v.y,G=q|0;G===T?(F<E?E=F:F>x&&(x=F),f=(m*f+q)/++m):(N(),e.lineTo(q,F),T=G,m=0,E=x=F),C=F}N()}function bw(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?Gst:Wst}function Yst(e){return e.stepped?Wnt:e.tension||e.cubicInterpolationMode==="monotone"?Gnt:ic}function Kst(e,t,n,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,i)&&s.closePath()),q4(e,t.options),e.stroke(s)}function Xst(e,t,n,i){const{segments:s,options:r}=t,a=bw(t);for(const c of s)q4(e,r,c.style),e.beginPath(),a(e,t,c,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const Qst=typeof Path2D=="function";function Zst(e,t,n,i){Qst&&!t.options.segment?Kst(e,t,n,i):Xst(e,t,n,i)}class Qd extends Sl{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;jnt(this._points,i,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=eit(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,s=t[n],r=this.points,a=Znt(this,{property:n,start:s,end:s});if(!a.length)return;const c=[],u=Yst(i);let h,f;for(h=0,f=a.length;h<f;++h){const{start:m,end:y}=a[h],v=r[m],T=r[y];if(v===T){c.push(v);continue}const E=Math.abs((s-v[n])/(T[n]-v[n])),x=u(v,T,E,i.stepped);x[n]=t[n],c.push(x)}return c.length===1?c[0]:c}pathSegment(t,n,i){return bw(this)(t,this,n,i)}path(t,n,i){const s=this.segments,r=bw(this);let a=this._loop;n=n||0,i=i||this.points.length-n;for(const c of s)a&=r(t,this,c,{start:n,end:n+i-1});return!!a}draw(t,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),Zst(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}kt(Qd,"id","line"),kt(Qd,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),kt(Qd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),kt(Qd,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function XN(e,t,n,i){const s=e.options,{[n]:r}=e.getProps([n],i);return Math.abs(t-r)<s.radius+s.hitRadius}class ey extends Sl{constructor(n){super();kt(this,"parsed");kt(this,"skip");kt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:a,y:c}=this.getProps(["x","y"],s);return Math.pow(n-a,2)+Math.pow(i-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return XN(this,n,"x",i)}inYRange(n,i){return XN(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!ah(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,gw(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}kt(ey,"id","point"),kt(ey,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),kt(ey,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function W4(e,t){const{x:n,y:i,base:s,width:r,height:a}=e.getProps(["x","y","base","width","height"],t);let c,u,h,f,m;return e.horizontal?(m=a/2,c=Math.min(n,s),u=Math.max(n,s),h=i-m,f=i+m):(m=r/2,c=n-m,u=n+m,h=Math.min(i,s),f=Math.max(i,s)),{left:c,top:h,right:u,bottom:f}}function Qa(e,t,n,i){return e?0:Gi(t,n,i)}function Jst(e,t,n){const i=e.options.borderWidth,s=e.borderSkipped,r=E4(i);return{t:Qa(s.top,r.top,0,n),r:Qa(s.right,r.right,0,t),b:Qa(s.bottom,r.bottom,0,n),l:Qa(s.left,r.left,0,t)}}function trt(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=Wu(s),a=Math.min(t,n),c=e.borderSkipped,u=i||Le(s);return{topLeft:Qa(!u||c.top||c.left,r.topLeft,0,a),topRight:Qa(!u||c.top||c.right,r.topRight,0,a),bottomLeft:Qa(!u||c.bottom||c.left,r.bottomLeft,0,a),bottomRight:Qa(!u||c.bottom||c.right,r.bottomRight,0,a)}}function ert(e){const t=W4(e),n=t.right-t.left,i=t.bottom-t.top,s=Jst(e,n/2,i/2),r=trt(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function qb(e,t,n,i){const s=t===null,r=n===null,c=e&&!(s&&r)&&W4(e,i);return c&&(s||Ka(t,c.left,c.right))&&(r||Ka(n,c.top,c.bottom))}function nrt(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function irt(e,t){e.rect(t.x,t.y,t.w,t.h)}function $b(e,t,n={}){const i=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+i,y:e.y+s,w:e.w+r,h:e.h+a,radius:e.radius}}class ny extends Sl{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:a}=ert(this),c=nrt(a.radius)?Jy:irt;t.save(),(a.w!==r.w||a.h!==r.h)&&(t.beginPath(),c(t,$b(a,n,r)),t.clip(),c(t,$b(r,-n,a)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),c(t,$b(r,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,i){return qb(this,t,n,i)}inXRange(t,n){return qb(this,t,null,n)}inYRange(t,n){return qb(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}kt(ny,"id","bar"),kt(ny,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),kt(ny,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const QN=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},srt=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class ZN extends Sl{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Zt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=vs(i.font),r=s.size,a=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=QN(i,r);let h,f;n.font=s.string,this.isHorizontal()?(h=this.maxWidth,f=this._fitRows(a,r,c,u)+10):(f=this.maxHeight,h=this._fitCols(a,s,c,u)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(f,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,s){const{ctx:r,maxWidth:a,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],f=s+c;let m=t;r.textAlign="left",r.textBaseline="middle";let y=-1,v=-f;return this.legendItems.forEach((T,E)=>{const x=i+n/2+r.measureText(T.text).width;(E===0||h[h.length-1]+x+2*c>a)&&(m+=f,h[h.length-(E>0?0:1)]=0,v+=f,y++),u[E]={left:0,top:v,row:y,width:x,height:s},h[h.length-1]+=x+c}),m}_fitCols(t,n,i,s){const{ctx:r,maxHeight:a,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],f=a-t;let m=c,y=0,v=0,T=0,E=0;return this.legendItems.forEach((x,C)=>{const{itemWidth:P,itemHeight:N}=rrt(i,n,r,x,s);C>0&&v+N+2*c>f&&(m+=y+c,h.push({width:y,height:v}),T+=y+c,E++,y=v=0),u[C]={left:T,top:v,col:E,width:P,height:N},y=Math.max(y,P),v+=N+c}),m+=y,h.push({width:y,height:v}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,a=Gu(r,this.left,this.width);if(this.isHorizontal()){let c=0,u=ks(i,this.left+s,this.right-this.lineWidths[c]);for(const h of n)c!==h.row&&(c=h.row,u=ks(i,this.left+s,this.right-this.lineWidths[c])),h.top+=this.top+t+s,h.left=a.leftForLtr(a.x(u),h.width),u+=h.width+s}else{let c=0,u=ks(i,this.top+t+s,this.bottom-this.columnSizes[c].height);for(const h of n)h.col!==c&&(c=h.col,u=ks(i,this.top+t+s,this.bottom-this.columnSizes[c].height)),h.top=u,h.left+=this.left+s,h.left=a.leftForLtr(a.x(h.left),h.width),u+=h.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;uS(t,this),this._draw(),hS(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:a}=t,c=zn.color,u=Gu(t.rtl,this.left,this.width),h=vs(a.font),{padding:f}=a,m=h.size,y=m/2;let v;this.drawTitle(),s.textAlign=u.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:T,boxHeight:E,itemHeight:x}=QN(a,m),C=function(G,k,D){if(isNaN(T)||T<=0||isNaN(E)||E<0)return;s.save();const M=ue(D.lineWidth,1);if(s.fillStyle=ue(D.fillStyle,c),s.lineCap=ue(D.lineCap,"butt"),s.lineDashOffset=ue(D.lineDashOffset,0),s.lineJoin=ue(D.lineJoin,"miter"),s.lineWidth=M,s.strokeStyle=ue(D.strokeStyle,c),s.setLineDash(ue(D.lineDash,[])),a.usePointStyle){const V={radius:E*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:M},B=u.xPlus(G,T/2),$=k+y;w4(s,V,B,$,a.pointStyleWidth&&T)}else{const V=k+Math.max((m-E)/2,0),B=u.leftForLtr(G,T),$=Wu(D.borderRadius);s.beginPath(),Object.values($).some(H=>H!==0)?Jy(s,{x:B,y:V,w:T,h:E,radius:$}):s.rect(B,V,T,E),s.fill(),M!==0&&s.stroke()}s.restore()},P=function(G,k,D){Zy(s,D.text,G,k+x/2,h,{strikethrough:D.hidden,textAlign:u.textAlign(D.textAlign)})},N=this.isHorizontal(),q=this._computeTitleHeight();N?v={x:ks(r,this.left+f,this.right-i[0]),y:this.top+f+q,line:0}:v={x:this.left+f,y:ks(r,this.top+q+f,this.bottom-n[0].height),line:0},I4(this.ctx,t.textDirection);const F=x+f;this.legendItems.forEach((G,k)=>{s.strokeStyle=G.fontColor,s.fillStyle=G.fontColor;const D=s.measureText(G.text).width,M=u.textAlign(G.textAlign||(G.textAlign=a.textAlign)),V=T+y+D;let B=v.x,$=v.y;u.setWidth(this.width),N?k>0&&B+V+f>this.right&&($=v.y+=F,v.line++,B=v.x=ks(r,this.left+f,this.right-i[v.line])):k>0&&$+F>this.bottom&&(B=v.x=B+n[v.line].width+f,v.line++,$=v.y=ks(r,this.top+q+f,this.bottom-n[v.line].height));const H=u.x(B);if(C(H,$,G),B=tnt(M,B+T+y,N?B+V:this.right,t.rtl),P(u.x(B),$,G),N)v.x+=V+f;else if(typeof G.text!="string"){const Et=h.lineHeight;v.y+=G4(G,Et)+f}else v.y+=F}),D4(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=vs(n.font),s=kr(n.padding);if(!n.display)return;const r=Gu(t.rtl,this.left,this.width),a=this.ctx,c=n.position,u=i.size/2,h=s.top+u;let f,m=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),f=this.top+h,m=ks(t.align,m,this.right-y);else{const T=this.columnSizes.reduce((E,x)=>Math.max(E,x.height),0);f=h+ks(t.align,this.top,this.bottom-T-t.labels.padding-this._computeTitleHeight())}const v=ks(c,m,m+y);a.textAlign=r.textAlign(b4(c)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=i.string,Zy(a,n.text,v,f,i)}_computeTitleHeight(){const t=this.options.title,n=vs(t.font),i=kr(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,s,r;if(Ka(t,this.left,this.right)&&Ka(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Ka(t,s.left,s.left+s.width)&&Ka(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!lrt(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=srt(s,i);s&&!r&&Zt(n.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&Zt(n.onHover,[t,i,this],this)}else i&&Zt(n.onClick,[t,i,this],this)}}function rrt(e,t,n,i,s){const r=ort(i,e,t,n),a=art(s,i,t.lineHeight);return{itemWidth:r,itemHeight:a}}function ort(e,t,n,i){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,a)=>r.length>a.length?r:a)),t+n.size/2+i.measureText(s).width}function art(e,t,n){let i=e;return typeof t.text!="string"&&(i=G4(t,n)),i}function G4(e,t){const n=e.text?e.text.length:0;return t*n}function lrt(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Y4={id:"legend",_element:ZN,start(e,t,n){const i=e.legend=new ZN({ctx:e.ctx,options:n,chart:e});Xa.configure(e,i,n),Xa.addBox(e,i)},stop(e){Xa.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Xa.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:a,borderRadius:c}}=e.legend.options;return e._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(n?0:void 0),f=kr(h.borderWidth);return{text:t[u.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:s||h.textAlign,borderRadius:a&&(c||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Zd={average(e){if(!e.length)return!1;let t,n,i=new Set,s=0,r=0;for(t=0,n=e.length;t<n;++t){const c=e[t].element;if(c&&c.hasValue()){const u=c.tooltipPosition();i.add(u.x),s+=u.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((c,u)=>c+u)/i.size,y:s/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,a,c;for(r=0,a=e.length;r<a;++r){const u=e[r].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),f=pw(t,h);f<s&&(s=f,c=u)}}if(c){const u=c.tooltipPosition();n=u.x,i=u.y}return{x:n,y:i}}};function Jr(e,t){return t&&(vi(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ho(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function crt(e,t){const{element:n,datasetIndex:i,index:s}=t,r=e.getDatasetMeta(i).controller,{label:a,value:c}=r.getLabelAndValue(s);return{chart:e,label:a,parsed:r.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:c,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function JN(e,t){const n=e.chart.ctx,{body:i,footer:s,title:r}=e,{boxWidth:a,boxHeight:c}=t,u=vs(t.bodyFont),h=vs(t.titleFont),f=vs(t.footerFont),m=r.length,y=s.length,v=i.length,T=kr(t.padding);let E=T.height,x=0,C=i.reduce((q,F)=>q+F.before.length+F.lines.length+F.after.length,0);if(C+=e.beforeBody.length+e.afterBody.length,m&&(E+=m*h.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),C){const q=t.displayColors?Math.max(c,u.lineHeight):u.lineHeight;E+=v*q+(C-v)*u.lineHeight+(C-1)*t.bodySpacing}y&&(E+=t.footerMarginTop+y*f.lineHeight+(y-1)*t.footerSpacing);let P=0;const N=function(q){x=Math.max(x,n.measureText(q).width+P)};return n.save(),n.font=h.string,Ee(e.title,N),n.font=u.string,Ee(e.beforeBody.concat(e.afterBody),N),P=t.displayColors?a+2+t.boxPadding:0,Ee(i,q=>{Ee(q.before,N),Ee(q.lines,N),Ee(q.after,N)}),P=0,n.font=f.string,Ee(e.footer,N),n.restore(),x+=T.width,{width:x,height:E}}function urt(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function hrt(e,t,n,i){const{x:s,width:r}=i,a=n.caretSize+n.caretPadding;if(e==="left"&&s+r+a>t.width||e==="right"&&s-r-a<0)return!0}function drt(e,t,n,i){const{x:s,width:r}=n,{width:a,chartArea:{left:c,right:u}}=e;let h="center";return i==="center"?h=s<=(c+u)/2?"left":"right":s<=r/2?h="left":s>=a-r/2&&(h="right"),hrt(h,e,t,n)&&(h="center"),h}function tP(e,t,n){const i=n.yAlign||t.yAlign||urt(e,n);return{xAlign:n.xAlign||t.xAlign||drt(e,t,n,i),yAlign:i}}function frt(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function prt(e,t,n){let{y:i,height:s}=e;return t==="top"?i+=n:t==="bottom"?i-=s+n:i-=s/2,i}function eP(e,t,n,i){const{caretSize:s,caretPadding:r,cornerRadius:a}=e,{xAlign:c,yAlign:u}=n,h=s+r,{topLeft:f,topRight:m,bottomLeft:y,bottomRight:v}=Wu(a);let T=frt(t,c);const E=prt(t,u,h);return u==="center"?c==="left"?T+=h:c==="right"&&(T-=h):c==="left"?T-=Math.max(f,y)+s:c==="right"&&(T+=Math.max(m,v)+s),{x:Gi(T,0,i.width-t.width),y:Gi(E,0,i.height-t.height)}}function Ag(e,t,n){const i=kr(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function nP(e){return Jr([],Ho(e))}function mrt(e,t,n){return Lc(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function iP(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const K4={beforeTitle:Fo,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Fo,beforeBody:Fo,beforeLabel:Fo,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return $e(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Fo,afterBody:Fo,beforeFooter:Fo,footer:Fo,afterFooter:Fo};function ds(e,t,n,i){const s=e[t].call(n,i);return typeof s>"u"?K4[t].call(n,i):s}class Tw extends Sl{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new N4(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=mrt(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,s=ds(i,"beforeTitle",this,t),r=ds(i,"title",this,t),a=ds(i,"afterTitle",this,t);let c=[];return c=Jr(c,Ho(s)),c=Jr(c,Ho(r)),c=Jr(c,Ho(a)),c}getBeforeBody(t,n){return nP(ds(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,s=[];return Ee(t,r=>{const a={before:[],lines:[],after:[]},c=iP(i,r);Jr(a.before,Ho(ds(c,"beforeLabel",this,r))),Jr(a.lines,ds(c,"label",this,r)),Jr(a.after,Ho(ds(c,"afterLabel",this,r))),s.push(a)}),s}getAfterBody(t,n){return nP(ds(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,s=ds(i,"beforeFooter",this,t),r=ds(i,"footer",this,t),a=ds(i,"afterFooter",this,t);let c=[];return c=Jr(c,Ho(s)),c=Jr(c,Ho(r)),c=Jr(c,Ho(a)),c}_createItems(t){const n=this._active,i=this.chart.data,s=[],r=[],a=[];let c=[],u,h;for(u=0,h=n.length;u<h;++u)c.push(crt(this.chart,n[u]));return t.filter&&(c=c.filter((f,m,y)=>t.filter(f,m,y,i))),t.itemSort&&(c=c.sort((f,m)=>t.itemSort(f,m,i))),Ee(c,f=>{const m=iP(t.callbacks,f);s.push(ds(m,"labelColor",this,f)),r.push(ds(m,"labelPointStyle",this,f)),a.push(ds(m,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=c,c}update(t,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,a=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const c=Zd[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const u=this._size=JN(this,i),h=Object.assign({},c,u),f=tP(this.chart,i,h),m=eP(i,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,r={opacity:1,x:m.x,y:m.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,s){const r=this.getCaretPosition(t,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=Wu(c),{x:y,y:v}=t,{width:T,height:E}=n;let x,C,P,N,q,F;return r==="center"?(q=v+E/2,s==="left"?(x=y,C=x-a,N=q+a,F=q-a):(x=y+T,C=x+a,N=q-a,F=q+a),P=x):(s==="left"?C=y+Math.max(u,f)+a:s==="right"?C=y+T-Math.max(h,m)-a:C=this.caretX,r==="top"?(N=v,q=N-a,x=C-a,P=C+a):(N=v+E,q=N+a,x=C+a,P=C-a),F=N),{x1:x,x2:C,x3:P,y1:N,y2:q,y3:F}}drawTitle(t,n,i){const s=this.title,r=s.length;let a,c,u;if(r){const h=Gu(i.rtl,this.x,this.width);for(t.x=Ag(this,i.titleAlign,i),n.textAlign=h.textAlign(i.titleAlign),n.textBaseline="middle",a=vs(i.titleFont),c=i.titleSpacing,n.fillStyle=i.titleColor,n.font=a.string,u=0;u<r;++u)n.fillText(s[u],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,u+1===r&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,n,i,s,r){const a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:u,boxWidth:h}=r,f=vs(r.bodyFont),m=Ag(this,"left",r),y=s.x(m),v=u<f.lineHeight?(f.lineHeight-u)/2:0,T=n.y+v;if(r.usePointStyle){const E={radius:Math.min(h,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},x=s.leftForLtr(y,h)+h/2,C=T+u/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,gw(t,E,x,C),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,gw(t,E,x,C)}else{t.lineWidth=Le(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const E=s.leftForLtr(y,h),x=s.leftForLtr(s.xPlus(y,1),h-2),C=Wu(a.borderRadius);Object.values(C).some(P=>P!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Jy(t,{x:E,y:T,w:h,h:u,radius:C}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Jy(t,{x,y:T+1,w:h-2,h:u-2,radius:C}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(E,T,h,u),t.strokeRect(E,T,h,u),t.fillStyle=a.backgroundColor,t.fillRect(x,T+1,h-2,u-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:a,displayColors:c,boxHeight:u,boxWidth:h,boxPadding:f}=i,m=vs(i.bodyFont);let y=m.lineHeight,v=0;const T=Gu(i.rtl,this.x,this.width),E=function(D){n.fillText(D,T.x(t.x+v),t.y+y/2),t.y+=y+r},x=T.textAlign(a);let C,P,N,q,F,G,k;for(n.textAlign=a,n.textBaseline="middle",n.font=m.string,t.x=Ag(this,x,i),n.fillStyle=i.bodyColor,Ee(this.beforeBody,E),v=c&&x!=="right"?a==="center"?h/2+f:h+2+f:0,q=0,G=s.length;q<G;++q){for(C=s[q],P=this.labelTextColors[q],n.fillStyle=P,Ee(C.before,E),N=C.lines,c&&N.length&&(this._drawColorBox(n,t,q,T,i),y=Math.max(m.lineHeight,u)),F=0,k=N.length;F<k;++F)E(N[F]),y=m.lineHeight;Ee(C.after,E)}v=0,y=m.lineHeight,Ee(this.afterBody,E),t.y-=r}drawFooter(t,n,i){const s=this.footer,r=s.length;let a,c;if(r){const u=Gu(i.rtl,this.x,this.width);for(t.x=Ag(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=u.textAlign(i.footerAlign),n.textBaseline="middle",a=vs(i.footerFont),n.fillStyle=i.footerColor,n.font=a.string,c=0;c<r;++c)n.fillText(s[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,n,i,s){const{xAlign:r,yAlign:a}=this,{x:c,y:u}=t,{width:h,height:f}=i,{topLeft:m,topRight:y,bottomLeft:v,bottomRight:T}=Wu(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(c+m,u),a==="top"&&this.drawCaret(t,n,i,s),n.lineTo(c+h-y,u),n.quadraticCurveTo(c+h,u,c+h,u+y),a==="center"&&r==="right"&&this.drawCaret(t,n,i,s),n.lineTo(c+h,u+f-T),n.quadraticCurveTo(c+h,u+f,c+h-T,u+f),a==="bottom"&&this.drawCaret(t,n,i,s),n.lineTo(c+v,u+f),n.quadraticCurveTo(c,u+f,c,u+f-v),a==="center"&&r==="left"&&this.drawCaret(t,n,i,s),n.lineTo(c,u+m),n.quadraticCurveTo(c,u,c+m,u),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const a=Zd[t.position].call(this,this._active,this._eventPosition);if(!a)return;const c=this._size=JN(this,t),u=Object.assign({},a,this._size),h=tP(n,t,u),f=eP(t,u,h,n);(s._to!==f.x||r._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=kr(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,n),I4(t,n.textDirection),r.y+=a.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),D4(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,s=t.map(({datasetIndex:c,index:u})=>{const h=this.chart.getDatasetMeta(c);if(!h)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:h.data[u],index:u}}),r=!Ky(i,s),a=this._positionChanged(s,n);(r||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],a=this._getActiveElements(t,r,n,i),c=this._positionChanged(a,t),u=n||!Ky(a,r)||c;return u&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),u}_getActiveElements(t,n,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:i,caretY:s,options:r}=this,a=Zd[r.position].call(this,t,n);return a!==!1&&(i!==a.x||s!==a.y)}}kt(Tw,"positioners",Zd);var X4={id:"tooltip",_element:Tw,positioners:Zd,afterInit(e,t,n){n&&(e.tooltip=new Tw({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:K4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const grt=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function yrt(e,t,n,i){const s=e.indexOf(t);if(s===-1)return grt(e,t,n,i);const r=e.lastIndexOf(t);return s!==r?n:s}const _rt=(e,t)=>e===null?null:Gi(Math.round(e),0,t);function sP(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ww extends Ah{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if($e(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:yrt(i,t,ue(n,t),this._addedLabels),_rt(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=n;a++)s.push({value:a});return s}getLabelForValue(t){return sP.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}kt(ww,"id","category"),kt(ww,"defaults",{ticks:{callback:sP}});function vrt(e,t){const n=[],{bounds:s,step:r,min:a,max:c,precision:u,count:h,maxTicks:f,maxDigits:m,includeBounds:y}=e,v=r||1,T=f-1,{min:E,max:x}=t,C=!$e(a),P=!$e(c),N=!$e(h),q=(x-E)/(m+1);let F=oN((x-E)/T/v)*v,G,k,D,M;if(F<1e-14&&!C&&!P)return[{value:E},{value:x}];M=Math.ceil(x/F)-Math.floor(E/F),M>T&&(F=oN(M*F/T/v)*v),$e(u)||(G=Math.pow(10,u),F=Math.ceil(F*G)/G),s==="ticks"?(k=Math.floor(E/F)*F,D=Math.ceil(x/F)*F):(k=E,D=x),C&&P&&r&&$et((c-a)/r,F/1e3)?(M=Math.round(Math.min((c-a)/F,f)),F=(c-a)/M,k=a,D=c):N?(k=C?a:k,D=P?c:D,M=h-1,F=(D-k)/M):(M=(D-k)/F,fc(M,Math.round(M),F/1e3)?M=Math.round(M):M=Math.ceil(M));const V=Math.max(aN(F),aN(k));G=Math.pow(10,$e(u)?V:u),k=Math.round(k*G)/G,D=Math.round(D*G)/G;let B=0;for(C&&(y&&k!==a?(n.push({value:a}),k<a&&B++,fc(Math.round((k+B*F)*G)/G,a,rP(a,q,e))&&B++):k<a&&B++);B<M;++B){const $=Math.round((k+B*F)*G)/G;if(P&&$>c)break;n.push({value:$})}return P&&y&&D!==c?n.length&&fc(n[n.length-1].value,c,rP(c,q,e))?n[n.length-1].value=c:n.push({value:c}):(!P||D===c)&&n.push({value:D}),n}function rP(e,t,{horizontal:n,minRotation:i}){const s=Xo(i),r=(n?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/r,a)}class brt extends Ah{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return $e(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const a=u=>s=n?s:u,c=u=>r=i?r:u;if(t){const u=cr(s),h=cr(r);u<0&&h<0?c(0):u>0&&h>0&&a(0)}if(s===r){let u=r===0?1:Math.abs(r*.05);c(r+u),t||a(s-u)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,a=vrt(s,r);return t.bounds==="ticks"&&Wet(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-n)/Math.max(t.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return cS(t,this.chart.options.locale,this.options.ticks.format)}}class Ew extends brt{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=dr(t)?t:0,this.max=dr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=Xo(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}kt(Ew,"id","linear"),kt(Ew,"defaults",{ticks:{callback:T4.formatters.numeric}});const X_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ys=Object.keys(X_);function oP(e,t){return e-t}function aP(e,t){if($e(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:r}=e._parseOpts;let a=t;return typeof i=="function"&&(a=i(a)),dr(a)||(a=typeof i=="string"?n.parse(a,i):n.parse(a)),a===null?null:(s&&(a=s==="week"&&(Zf(r)||r===!0)?n.startOf(a,"isoWeek",r):n.startOf(a,s)),+a)}function lP(e,t,n,i){const s=ys.length;for(let r=ys.indexOf(e);r<s-1;++r){const a=X_[ys[r]],c=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(c*a.size))<=i)return ys[r]}return ys[s-1]}function Trt(e,t,n,i,s){for(let r=ys.length-1;r>=ys.indexOf(n);r--){const a=ys[r];if(X_[a].common&&e._adapter.diff(s,i,a)>=t-1)return a}return ys[n?ys.indexOf(n):0]}function wrt(e){for(let t=ys.indexOf(e)+1,n=ys.length;t<n;++t)if(X_[ys[t]].common)return ys[t]}function cP(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:s}=aS(n,t),r=n[i]>=t?n[i]:n[s];e[r]=!0}}function Ert(e,t,n,i){const s=e._adapter,r=+s.startOf(t[0].value,i),a=t[t.length-1].value;let c,u;for(c=r;c<=a;c=+s.add(c,1,i))u=n[c],u>=0&&(t[u].major=!0);return t}function uP(e,t,n){const i=[],s={},r=t.length;let a,c;for(a=0;a<r;++a)c=t[a],s[c]=a,i.push({value:c,major:!1});return r===0||!n?i:Ert(e,i,s,n)}class i_ extends Ah{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),s=this._adapter=new Iit._date(t.adapters.date);s.init(n),mf(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:aP(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:a,maxDefined:c}=this.getUserBounds();function u(h){!a&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!c&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!a||!c)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),s=dr(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=dr(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,a=this.max,c=Qet(s,r,a);return this._unit=n.unit||(i.autoSkip?lP(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):Trt(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:wrt(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),uP(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=Gi(n,0,a),i=Gi(i,0,a),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,a=r.unit||lP(r.minUnit,n,i,this._getLabelCapacity(n)),c=ue(s.ticks.stepSize,1),u=a==="week"?r.isoWeekday:!1,h=Zf(u)||u===!0,f={};let m=n,y,v;if(h&&(m=+t.startOf(m,"isoWeek",u)),m=+t.startOf(m,h?"day":a),t.diff(i,n,a)>1e5*c)throw new Error(n+" and "+i+" are too far apart with stepSize of "+c+" "+a);const T=s.ticks.source==="data"&&this.getDataTimestamps();for(y=m,v=0;y<i;y=+t.add(y,c,a),v++)cP(f,y,T);return(y===i||s.bounds==="ticks"||v===1)&&cP(f,y,T),Object.keys(f).sort(oP).map(E=>+E)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,r=this._unit,a=n||s[r];return this._adapter.format(t,a)}_tickFormatFunction(t,n,i,s){const r=this.options,a=r.ticks.callback;if(a)return Zt(a,[t,n,i],this);const c=r.time.displayFormats,u=this._unit,h=this._majorUnit,f=u&&c[u],m=h&&c[h],y=i[n],v=h&&m&&y&&y.major;return this._adapter.format(t,s||(v?m:f))}generateTickLabels(t){let n,i,s;for(n=0,i=t.length;n<i;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,s=Xo(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*r+c*a,h:i*a+c*r}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(t,0,uP(this,[t],this._majorUnit),s),a=this._getLabelSize(r),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)t.push(aP(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return y4(t.sort(oP))}}kt(i_,"id","time"),kt(i_,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Cg(e,t,n){let i=0,s=e.length-1,r,a,c,u;n?(t>=e[i].pos&&t<=e[s].pos&&({lo:i,hi:s}=hc(e,"pos",t)),{pos:r,time:c}=e[i],{pos:a,time:u}=e[s]):(t>=e[i].time&&t<=e[s].time&&({lo:i,hi:s}=hc(e,"time",t)),{time:r,pos:c}=e[i],{time:a,pos:u}=e[s]);const h=a-r;return h?c+(u-c)*(t-r)/h:c}class hP extends i_{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Cg(n,this.min),this._tableRange=Cg(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,s=[],r=[];let a,c,u,h,f;for(a=0,c=t.length;a<c;++a)h=t[a],h>=n&&h<=i&&s.push(h);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(a=0,c=s.length;a<c;++a)f=s[a+1],u=s[a-1],h=s[a],Math.round((f+u)/2)!==h&&r.push({time:h,pos:a/(c-1)});return r}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Cg(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return Cg(this._table,i*this._tableRange+this._minPos,!0)}}kt(hP,"id","timeseries"),kt(hP,"defaults",i_.defaults);const Q4="label";function dP(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function xrt(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function Z4(e,t){e.labels=t}function J4(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Q4;const i=[];e.datasets=t.map(s=>{const r=e.datasets.find(a=>a[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function Srt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q4;const n={labels:[],datasets:[]};return Z4(n,e.labels),J4(n,e.datasets,t),n}function Art(e,t){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:a,data:c,options:u,plugins:h=[],fallbackContent:f,updateMode:m,...y}=e,v=R.useRef(null),T=R.useRef(null),E=()=>{v.current&&(T.current=new kp(v.current,{type:a,data:Srt(c,r),options:u&&{...u},plugins:h}),dP(t,T.current))},x=()=>{dP(t,null),T.current&&(T.current.destroy(),T.current=null)};return R.useEffect(()=>{!s&&T.current&&u&&xrt(T.current,u)},[s,u]),R.useEffect(()=>{!s&&T.current&&Z4(T.current.config.data,c.labels)},[s,c.labels]),R.useEffect(()=>{!s&&T.current&&c.datasets&&J4(T.current.config.data,c.datasets,r)},[s,c.datasets]),R.useEffect(()=>{T.current&&(s?(x(),setTimeout(E)):T.current.update(m))},[s,u,c.labels,c.datasets,m]),R.useEffect(()=>{T.current&&(x(),setTimeout(E))},[a]),R.useEffect(()=>(E(),()=>x()),[]),xe.createElement("canvas",{ref:v,role:"img",height:n,width:i,...y},f)}const Crt=R.forwardRef(Art);function vS(e,t){return kp.register(t),R.forwardRef((n,i)=>xe.createElement(Crt,{...n,ref:i,type:e}))}const Rrt=vS("line",Zg),Irt=vS("bar",Qg),Drt=vS("pie",yw);var Wb={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var fP;function Mrt(){return fP||(fP=1,function(e){(function(t,n,i,s){var r=["","webkit","Moz","MS","ms","o"],a=n.createElement("div"),c="function",u=Math.round,h=Math.abs,f=Date.now;function m(O,U,Y){return setTimeout(N(O,Y),U)}function y(O,U,Y){return Array.isArray(O)?(v(O,Y[U],Y),!0):!1}function v(O,U,Y){var rt;if(O)if(O.forEach)O.forEach(U,Y);else if(O.length!==s)for(rt=0;rt<O.length;)U.call(Y,O[rt],rt,O),rt++;else for(rt in O)O.hasOwnProperty(rt)&&U.call(Y,O[rt],rt,O)}function T(O,U,Y){var rt="DEPRECATED METHOD: "+U+`
`+Y+` AT 
`;return function(){var mt=new Error("get-stack-trace"),At=mt&&mt.stack?mt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ae=t.console&&(t.console.warn||t.console.log);return ae&&ae.call(t.console,rt,At),O.apply(this,arguments)}}var E;typeof Object.assign!="function"?E=function(U){if(U===s||U===null)throw new TypeError("Cannot convert undefined or null to object");for(var Y=Object(U),rt=1;rt<arguments.length;rt++){var mt=arguments[rt];if(mt!==s&&mt!==null)for(var At in mt)mt.hasOwnProperty(At)&&(Y[At]=mt[At])}return Y}:E=Object.assign;var x=T(function(U,Y,rt){for(var mt=Object.keys(Y),At=0;At<mt.length;)(!rt||rt&&U[mt[At]]===s)&&(U[mt[At]]=Y[mt[At]]),At++;return U},"extend","Use `assign`."),C=T(function(U,Y){return x(U,Y,!0)},"merge","Use `assign`.");function P(O,U,Y){var rt=U.prototype,mt;mt=O.prototype=Object.create(rt),mt.constructor=O,mt._super=rt,Y&&E(mt,Y)}function N(O,U){return function(){return O.apply(U,arguments)}}function q(O,U){return typeof O==c?O.apply(U&&U[0]||s,U):O}function F(O,U){return O===s?U:O}function G(O,U,Y){v(V(U),function(rt){O.addEventListener(rt,Y,!1)})}function k(O,U,Y){v(V(U),function(rt){O.removeEventListener(rt,Y,!1)})}function D(O,U){for(;O;){if(O==U)return!0;O=O.parentNode}return!1}function M(O,U){return O.indexOf(U)>-1}function V(O){return O.trim().split(/\s+/g)}function B(O,U,Y){if(O.indexOf&&!Y)return O.indexOf(U);for(var rt=0;rt<O.length;){if(Y&&O[rt][Y]==U||!Y&&O[rt]===U)return rt;rt++}return-1}function $(O){return Array.prototype.slice.call(O,0)}function H(O,U,Y){for(var rt=[],mt=[],At=0;At<O.length;){var ae=O[At][U];B(mt,ae)<0&&rt.push(O[At]),mt[At]=ae,At++}return rt=rt.sort(function(bn,pn){return bn[U]>pn[U]}),rt}function Et(O,U){for(var Y,rt,mt=U[0].toUpperCase()+U.slice(1),At=0;At<r.length;){if(Y=r[At],rt=Y?Y+mt:U,rt in O)return rt;At++}return s}var _t=1;function X(){return _t++}function nt(O){var U=O.ownerDocument||O;return U.defaultView||U.parentWindow||t}var yt=/mobile|tablet|ip(ad|hone|od)|android/i,xt="ontouchstart"in t,z=Et(t,"PointerEvent")!==s,it=xt&&yt.test(navigator.userAgent),lt="touch",ct="pen",vt="mouse",Nt="kinect",wt=25,Bt=1,Tt=2,Ct=4,It=8,zt=1,Pt=2,Mt=4,he=8,Oe=16,Ge=Pt|Mt,de=he|Oe,Hn=Ge|de,En=["x","y"],Ze=["clientX","clientY"];function Ve(O,U){var Y=this;this.manager=O,this.callback=U,this.element=O.element,this.target=O.options.inputTarget,this.domHandler=function(rt){q(O.options.enable,[O])&&Y.handler(rt)},this.init()}Ve.prototype={handler:function(){},init:function(){this.evEl&&G(this.element,this.evEl,this.domHandler),this.evTarget&&G(this.target,this.evTarget,this.domHandler),this.evWin&&G(nt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(nt(this.element),this.evWin,this.domHandler)}};function Ii(O){var U,Y=O.options.inputClass;return Y?U=Y:z?U=Ae:it?U=se:xt?U=Ni:U=fe,new U(O,Qi)}function Qi(O,U,Y){var rt=Y.pointers.length,mt=Y.changedPointers.length,At=U&Bt&&rt-mt===0,ae=U&(Ct|It)&&rt-mt===0;Y.isFirst=!!At,Y.isFinal=!!ae,At&&(O.session={}),Y.eventType=U,zs(O,Y),O.emit("hammer.input",Y),O.recognize(Y),O.session.prevInput=Y}function zs(O,U){var Y=O.session,rt=U.pointers,mt=rt.length;Y.firstInput||(Y.firstInput=re(U)),mt>1&&!Y.firstMultiple?Y.firstMultiple=re(U):mt===1&&(Y.firstMultiple=!1);var At=Y.firstInput,ae=Y.firstMultiple,Dn=ae?ae.center:At.center,bn=U.center=fn(rt);U.timeStamp=f(),U.deltaTime=U.timeStamp-At.timeStamp,U.angle=Di(Dn,bn),U.distance=Qn(Dn,bn),mr(Y,U),U.offsetDirection=ls(U.deltaX,U.deltaY);var pn=Ye(U.deltaTime,U.deltaX,U.deltaY);U.overallVelocityX=pn.x,U.overallVelocityY=pn.y,U.overallVelocity=h(pn.x)>h(pn.y)?pn.x:pn.y,U.scale=ae?Z(ae.pointers,rt):1,U.rotation=ae?Es(ae.pointers,rt):0,U.maxPointers=Y.prevInput?U.pointers.length>Y.prevInput.maxPointers?U.pointers.length:Y.prevInput.maxPointers:U.pointers.length,Je(Y,U);var Sn=O.element;D(U.srcEvent.target,Sn)&&(Sn=U.srcEvent.target),U.target=Sn}function mr(O,U){var Y=U.center,rt=O.offsetDelta||{},mt=O.prevDelta||{},At=O.prevInput||{};(U.eventType===Bt||At.eventType===Ct)&&(mt=O.prevDelta={x:At.deltaX||0,y:At.deltaY||0},rt=O.offsetDelta={x:Y.x,y:Y.y}),U.deltaX=mt.x+(Y.x-rt.x),U.deltaY=mt.y+(Y.y-rt.y)}function Je(O,U){var Y=O.lastInterval||U,rt=U.timeStamp-Y.timeStamp,mt,At,ae,Dn;if(U.eventType!=It&&(rt>wt||Y.velocity===s)){var bn=U.deltaX-Y.deltaX,pn=U.deltaY-Y.deltaY,Sn=Ye(rt,bn,pn);At=Sn.x,ae=Sn.y,mt=h(Sn.x)>h(Sn.y)?Sn.x:Sn.y,Dn=ls(bn,pn),O.lastInterval=U}else mt=Y.velocity,At=Y.velocityX,ae=Y.velocityY,Dn=Y.direction;U.velocity=mt,U.velocityX=At,U.velocityY=ae,U.direction=Dn}function re(O){for(var U=[],Y=0;Y<O.pointers.length;)U[Y]={clientX:u(O.pointers[Y].clientX),clientY:u(O.pointers[Y].clientY)},Y++;return{timeStamp:f(),pointers:U,center:fn(U),deltaX:O.deltaX,deltaY:O.deltaY}}function fn(O){var U=O.length;if(U===1)return{x:u(O[0].clientX),y:u(O[0].clientY)};for(var Y=0,rt=0,mt=0;mt<U;)Y+=O[mt].clientX,rt+=O[mt].clientY,mt++;return{x:u(Y/U),y:u(rt/U)}}function Ye(O,U,Y){return{x:U/O||0,y:Y/O||0}}function ls(O,U){return O===U?zt:h(O)>=h(U)?O<0?Pt:Mt:U<0?he:Oe}function Qn(O,U,Y){Y||(Y=En);var rt=U[Y[0]]-O[Y[0]],mt=U[Y[1]]-O[Y[1]];return Math.sqrt(rt*rt+mt*mt)}function Di(O,U,Y){Y||(Y=En);var rt=U[Y[0]]-O[Y[0]],mt=U[Y[1]]-O[Y[1]];return Math.atan2(mt,rt)*180/Math.PI}function Es(O,U){return Di(U[1],U[0],Ze)+Di(O[1],O[0],Ze)}function Z(O,U){return Qn(U[0],U[1],Ze)/Qn(O[0],O[1],Ze)}var gt={mousedown:Bt,mousemove:Tt,mouseup:Ct},Ft="mousedown",Kt="mousemove mouseup";function fe(){this.evEl=Ft,this.evWin=Kt,this.pressed=!1,Ve.apply(this,arguments)}P(fe,Ve,{handler:function(U){var Y=gt[U.type];Y&Bt&&U.button===0&&(this.pressed=!0),Y&Tt&&U.which!==1&&(Y=Ct),this.pressed&&(Y&Ct&&(this.pressed=!1),this.callback(this.manager,Y,{pointers:[U],changedPointers:[U],pointerType:vt,srcEvent:U}))}});var ke={pointerdown:Bt,pointermove:Tt,pointerup:Ct,pointercancel:It,pointerout:It},te={2:lt,3:ct,4:vt,5:Nt},ie="pointerdown",Gt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(ie="MSPointerDown",Gt="MSPointerMove MSPointerUp MSPointerCancel");function Ae(){this.evEl=ie,this.evWin=Gt,Ve.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}P(Ae,Ve,{handler:function(U){var Y=this.store,rt=!1,mt=U.type.toLowerCase().replace("ms",""),At=ke[mt],ae=te[U.pointerType]||U.pointerType,Dn=ae==lt,bn=B(Y,U.pointerId,"pointerId");At&Bt&&(U.button===0||Dn)?bn<0&&(Y.push(U),bn=Y.length-1):At&(Ct|It)&&(rt=!0),!(bn<0)&&(Y[bn]=U,this.callback(this.manager,At,{pointers:Y,changedPointers:[U],pointerType:ae,srcEvent:U}),rt&&Y.splice(bn,1))}});var jt={touchstart:Bt,touchmove:Tt,touchend:Ct,touchcancel:It},xn="touchstart",oe="touchstart touchmove touchend touchcancel";function Ht(){this.evTarget=xn,this.evWin=oe,this.started=!1,Ve.apply(this,arguments)}P(Ht,Ve,{handler:function(U){var Y=jt[U.type];if(Y===Bt&&(this.started=!0),!!this.started){var rt=pe.call(this,U,Y);Y&(Ct|It)&&rt[0].length-rt[1].length===0&&(this.started=!1),this.callback(this.manager,Y,{pointers:rt[0],changedPointers:rt[1],pointerType:lt,srcEvent:U})}}});function pe(O,U){var Y=$(O.touches),rt=$(O.changedTouches);return U&(Ct|It)&&(Y=H(Y.concat(rt),"identifier")),[Y,rt]}var je={touchstart:Bt,touchmove:Tt,touchend:Ct,touchcancel:It},Lt="touchstart touchmove touchend touchcancel";function se(){this.evTarget=Lt,this.targetIds={},Ve.apply(this,arguments)}P(se,Ve,{handler:function(U){var Y=je[U.type],rt=ye.call(this,U,Y);rt&&this.callback(this.manager,Y,{pointers:rt[0],changedPointers:rt[1],pointerType:lt,srcEvent:U})}});function ye(O,U){var Y=$(O.touches),rt=this.targetIds;if(U&(Bt|Tt)&&Y.length===1)return rt[Y[0].identifier]=!0,[Y,Y];var mt,At,ae=$(O.changedTouches),Dn=[],bn=this.target;if(At=Y.filter(function(pn){return D(pn.target,bn)}),U===Bt)for(mt=0;mt<At.length;)rt[At[mt].identifier]=!0,mt++;for(mt=0;mt<ae.length;)rt[ae[mt].identifier]&&Dn.push(ae[mt]),U&(Ct|It)&&delete rt[ae[mt].identifier],mt++;if(Dn.length)return[H(At.concat(Dn),"identifier"),Dn]}var tn=2500,Mi=25;function Ni(){Ve.apply(this,arguments);var O=N(this.handler,this);this.touch=new se(this.manager,O),this.mouse=new fe(this.manager,O),this.primaryTouch=null,this.lastTouches=[]}P(Ni,Ve,{handler:function(U,Y,rt){var mt=rt.pointerType==lt,At=rt.pointerType==vt;if(!(At&&rt.sourceCapabilities&&rt.sourceCapabilities.firesTouchEvents)){if(mt)Ln.call(this,Y,rt);else if(At&&Ji.call(this,rt))return;this.callback(U,Y,rt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ln(O,U){O&Bt?(this.primaryTouch=U.changedPointers[0].identifier,Zi.call(this,U)):O&(Ct|It)&&Zi.call(this,U)}function Zi(O){var U=O.changedPointers[0];if(U.identifier===this.primaryTouch){var Y={x:U.clientX,y:U.clientY};this.lastTouches.push(Y);var rt=this.lastTouches,mt=function(){var At=rt.indexOf(Y);At>-1&&rt.splice(At,1)};setTimeout(mt,tn)}}function Ji(O){for(var U=O.srcEvent.clientX,Y=O.srcEvent.clientY,rt=0;rt<this.lastTouches.length;rt++){var mt=this.lastTouches[rt],At=Math.abs(U-mt.x),ae=Math.abs(Y-mt.y);if(At<=Mi&&ae<=Mi)return!0}return!1}var gr=Et(a.style,"touchAction"),Hs=gr!==s,xs="compute",Ss="auto",Zn="manipulation",Ke="none",yr="pan-x",qs="pan-y",Pi=Uc();function As(O,U){this.manager=O,this.set(U)}As.prototype={set:function(O){O==xs&&(O=this.compute()),Hs&&this.manager.element.style&&Pi[O]&&(this.manager.element.style[gr]=O),this.actions=O.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var O=[];return v(this.manager.recognizers,function(U){q(U.options.enable,[U])&&(O=O.concat(U.getTouchAction()))}),jc(O.join(" "))},preventDefaults:function(O){var U=O.srcEvent,Y=O.offsetDirection;if(this.manager.session.prevented){U.preventDefault();return}var rt=this.actions,mt=M(rt,Ke)&&!Pi[Ke],At=M(rt,qs)&&!Pi[qs],ae=M(rt,yr)&&!Pi[yr];if(mt){var Dn=O.pointers.length===1,bn=O.distance<2,pn=O.deltaTime<250;if(Dn&&bn&&pn)return}if(!(ae&&At)&&(mt||At&&Y&Ge||ae&&Y&de))return this.preventSrc(U)},preventSrc:function(O){this.manager.session.prevented=!0,O.preventDefault()}};function jc(O){if(M(O,Ke))return Ke;var U=M(O,yr),Y=M(O,qs);return U&&Y?Ke:U||Y?U?yr:qs:M(O,Zn)?Zn:Ss}function Uc(){if(!Hs)return!1;var O={},U=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Y){O[Y]=U?t.CSS.supports("touch-action",Y):!0}),O}var $s=1,bi=2,ts=4,Jn=8,an=Jn,Cs=16,es=32;function ti(O){this.options=E({},this.defaults,O||{}),this.id=X(),this.manager=null,this.options.enable=F(this.options.enable,!0),this.state=$s,this.simultaneous={},this.requireFail=[]}ti.prototype={defaults:{},set:function(O){return E(this.options,O),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(O){if(y(O,"recognizeWith",this))return this;var U=this.simultaneous;return O=jr(O,this),U[O.id]||(U[O.id]=O,O.recognizeWith(this)),this},dropRecognizeWith:function(O){return y(O,"dropRecognizeWith",this)?this:(O=jr(O,this),delete this.simultaneous[O.id],this)},requireFailure:function(O){if(y(O,"requireFailure",this))return this;var U=this.requireFail;return O=jr(O,this),B(U,O)===-1&&(U.push(O),O.requireFailure(this)),this},dropRequireFailure:function(O){if(y(O,"dropRequireFailure",this))return this;O=jr(O,this);var U=B(this.requireFail,O);return U>-1&&this.requireFail.splice(U,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(O){return!!this.simultaneous[O.id]},emit:function(O){var U=this,Y=this.state;function rt(mt){U.manager.emit(mt,O)}Y<Jn&&rt(U.options.event+yo(Y)),rt(U.options.event),O.additionalEvent&&rt(O.additionalEvent),Y>=Jn&&rt(U.options.event+yo(Y))},tryEmit:function(O){if(this.canEmit())return this.emit(O);this.state=es},canEmit:function(){for(var O=0;O<this.requireFail.length;){if(!(this.requireFail[O].state&(es|$s)))return!1;O++}return!0},recognize:function(O){var U=E({},O);if(!q(this.options.enable,[this,U])){this.reset(),this.state=es;return}this.state&(an|Cs|es)&&(this.state=$s),this.state=this.process(U),this.state&(bi|ts|Jn|Cs)&&this.tryEmit(U)},process:function(O){},getTouchAction:function(){},reset:function(){}};function yo(O){return O&Cs?"cancel":O&Jn?"end":O&ts?"move":O&bi?"start":""}function _o(O){return O==Oe?"down":O==he?"up":O==Pt?"left":O==Mt?"right":""}function jr(O,U){var Y=U.manager;return Y?Y.get(O):O}function ai(){ti.apply(this,arguments)}P(ai,ti,{defaults:{pointers:1},attrTest:function(O){var U=this.options.pointers;return U===0||O.pointers.length===U},process:function(O){var U=this.state,Y=O.eventType,rt=U&(bi|ts),mt=this.attrTest(O);return rt&&(Y&It||!mt)?U|Cs:rt||mt?Y&Ct?U|Jn:U&bi?U|ts:bi:es}});function qn(){ai.apply(this,arguments),this.pX=null,this.pY=null}P(qn,ai,{defaults:{event:"pan",threshold:10,pointers:1,direction:Hn},getTouchAction:function(){var O=this.options.direction,U=[];return O&Ge&&U.push(qs),O&de&&U.push(yr),U},directionTest:function(O){var U=this.options,Y=!0,rt=O.distance,mt=O.direction,At=O.deltaX,ae=O.deltaY;return mt&U.direction||(U.direction&Ge?(mt=At===0?zt:At<0?Pt:Mt,Y=At!=this.pX,rt=Math.abs(O.deltaX)):(mt=ae===0?zt:ae<0?he:Oe,Y=ae!=this.pY,rt=Math.abs(O.deltaY))),O.direction=mt,Y&&rt>U.threshold&&mt&U.direction},attrTest:function(O){return ai.prototype.attrTest.call(this,O)&&(this.state&bi||!(this.state&bi)&&this.directionTest(O))},emit:function(O){this.pX=O.deltaX,this.pY=O.deltaY;var U=_o(O.direction);U&&(O.additionalEvent=this.options.event+U),this._super.emit.call(this,O)}});function vo(){ai.apply(this,arguments)}P(vo,ai,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ke]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.scale-1)>this.options.threshold||this.state&bi)},emit:function(O){if(O.scale!==1){var U=O.scale<1?"in":"out";O.additionalEvent=this.options.event+U}this._super.emit.call(this,O)}});function Al(){ti.apply(this,arguments),this._timer=null,this._input=null}P(Al,ti,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ss]},process:function(O){var U=this.options,Y=O.pointers.length===U.pointers,rt=O.distance<U.threshold,mt=O.deltaTime>U.time;if(this._input=O,!rt||!Y||O.eventType&(Ct|It)&&!mt)this.reset();else if(O.eventType&Bt)this.reset(),this._timer=m(function(){this.state=an,this.tryEmit()},U.time,this);else if(O.eventType&Ct)return an;return es},reset:function(){clearTimeout(this._timer)},emit:function(O){this.state===an&&(O&&O.eventType&Ct?this.manager.emit(this.options.event+"up",O):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}});function Ur(){ai.apply(this,arguments)}P(Ur,ai,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ke]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.rotation)>this.options.threshold||this.state&bi)}});function bo(){ai.apply(this,arguments)}P(bo,ai,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ge|de,pointers:1},getTouchAction:function(){return qn.prototype.getTouchAction.call(this)},attrTest:function(O){var U=this.options.direction,Y;return U&(Ge|de)?Y=O.overallVelocity:U&Ge?Y=O.overallVelocityX:U&de&&(Y=O.overallVelocityY),this._super.attrTest.call(this,O)&&U&O.offsetDirection&&O.distance>this.options.threshold&&O.maxPointers==this.options.pointers&&h(Y)>this.options.velocity&&O.eventType&Ct},emit:function(O){var U=_o(O.offsetDirection);U&&this.manager.emit(this.options.event+U,O),this.manager.emit(this.options.event,O)}});function Ws(){ti.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}P(Ws,ti,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Zn]},process:function(O){var U=this.options,Y=O.pointers.length===U.pointers,rt=O.distance<U.threshold,mt=O.deltaTime<U.time;if(this.reset(),O.eventType&Bt&&this.count===0)return this.failTimeout();if(rt&&mt&&Y){if(O.eventType!=Ct)return this.failTimeout();var At=this.pTime?O.timeStamp-this.pTime<U.interval:!0,ae=!this.pCenter||Qn(this.pCenter,O.center)<U.posThreshold;this.pTime=O.timeStamp,this.pCenter=O.center,!ae||!At?this.count=1:this.count+=1,this._input=O;var Dn=this.count%U.taps;if(Dn===0)return this.hasRequireFailures()?(this._timer=m(function(){this.state=an,this.tryEmit()},U.interval,this),bi):an}return es},failTimeout:function(){return this._timer=m(function(){this.state=es},this.options.interval,this),es},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==an&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Gs(O,U){return U=U||{},U.recognizers=F(U.recognizers,Gs.defaults.preset),new _r(O,U)}Gs.VERSION="2.0.7",Gs.defaults={domEvents:!1,touchAction:xs,enable:!0,inputTarget:null,inputClass:null,preset:[[Ur,{enable:!1}],[vo,{enable:!1},["rotate"]],[bo,{direction:Ge}],[qn,{direction:Ge},["swipe"]],[Ws],[Ws,{event:"doubletap",taps:2},["tap"]],[Al]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var In=1,Oi=2;function _r(O,U){this.options=E({},Gs.defaults,U||{}),this.options.inputTarget=this.options.inputTarget||O,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=O,this.input=Ii(this),this.touchAction=new As(this,this.options.touchAction),vr(this,!0),v(this.options.recognizers,function(Y){var rt=this.add(new Y[0](Y[1]));Y[2]&&rt.recognizeWith(Y[2]),Y[3]&&rt.requireFailure(Y[3])},this)}_r.prototype={set:function(O){return E(this.options,O),O.touchAction&&this.touchAction.update(),O.inputTarget&&(this.input.destroy(),this.input.target=O.inputTarget,this.input.init()),this},stop:function(O){this.session.stopped=O?Oi:In},recognize:function(O){var U=this.session;if(!U.stopped){this.touchAction.preventDefaults(O);var Y,rt=this.recognizers,mt=U.curRecognizer;(!mt||mt&&mt.state&an)&&(mt=U.curRecognizer=null);for(var At=0;At<rt.length;)Y=rt[At],U.stopped!==Oi&&(!mt||Y==mt||Y.canRecognizeWith(mt))?Y.recognize(O):Y.reset(),!mt&&Y.state&(bi|ts|Jn)&&(mt=U.curRecognizer=Y),At++}},get:function(O){if(O instanceof ti)return O;for(var U=this.recognizers,Y=0;Y<U.length;Y++)if(U[Y].options.event==O)return U[Y];return null},add:function(O){if(y(O,"add",this))return this;var U=this.get(O.options.event);return U&&this.remove(U),this.recognizers.push(O),O.manager=this,this.touchAction.update(),O},remove:function(O){if(y(O,"remove",this))return this;if(O=this.get(O),O){var U=this.recognizers,Y=B(U,O);Y!==-1&&(U.splice(Y,1),this.touchAction.update())}return this},on:function(O,U){if(O!==s&&U!==s){var Y=this.handlers;return v(V(O),function(rt){Y[rt]=Y[rt]||[],Y[rt].push(U)}),this}},off:function(O,U){if(O!==s){var Y=this.handlers;return v(V(O),function(rt){U?Y[rt]&&Y[rt].splice(B(Y[rt],U),1):delete Y[rt]}),this}},emit:function(O,U){this.options.domEvents&&br(O,U);var Y=this.handlers[O]&&this.handlers[O].slice();if(!(!Y||!Y.length)){U.type=O,U.preventDefault=function(){U.srcEvent.preventDefault()};for(var rt=0;rt<Y.length;)Y[rt](U),rt++}},destroy:function(){this.element&&vr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function vr(O,U){var Y=O.element;if(Y.style){var rt;v(O.options.cssProps,function(mt,At){rt=Et(Y.style,At),U?(O.oldCssProps[rt]=Y.style[rt],Y.style[rt]=mt):Y.style[rt]=O.oldCssProps[rt]||""}),U||(O.oldCssProps={})}}function br(O,U){var Y=n.createEvent("Event");Y.initEvent(O,!0,!0),Y.gesture=U,U.target.dispatchEvent(Y)}E(Gs,{INPUT_START:Bt,INPUT_MOVE:Tt,INPUT_END:Ct,INPUT_CANCEL:It,STATE_POSSIBLE:$s,STATE_BEGAN:bi,STATE_CHANGED:ts,STATE_ENDED:Jn,STATE_RECOGNIZED:an,STATE_CANCELLED:Cs,STATE_FAILED:es,DIRECTION_NONE:zt,DIRECTION_LEFT:Pt,DIRECTION_RIGHT:Mt,DIRECTION_UP:he,DIRECTION_DOWN:Oe,DIRECTION_HORIZONTAL:Ge,DIRECTION_VERTICAL:de,DIRECTION_ALL:Hn,Manager:_r,Input:Ve,TouchAction:As,TouchInput:se,MouseInput:fe,PointerEventInput:Ae,TouchMouseInput:Ni,SingleTouchInput:Ht,Recognizer:ti,AttrRecognizer:ai,Tap:Ws,Pan:qn,Swipe:bo,Pinch:vo,Rotate:Ur,Press:Al,on:G,off:k,each:v,merge:C,extend:x,assign:E,inherit:P,bindFn:N,prefixed:Et});var ze=typeof t<"u"?t:typeof self<"u"?self:{};ze.Hammer=Gs,e.exports?e.exports=Gs:t[i]=Gs})(window,document,"Hammer")}(Wb)),Wb.exports}var Nrt=Mrt();const _f=a_(Nrt);/*!
* chartjs-plugin-zoom v2.2.0
* https://www.chartjs.org/chartjs-plugin-zoom/2.2.0/
 * (c) 2016-2024 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const ep=e=>e&&e.enabled&&e.modifierKey,tU=(e,t)=>e&&t[e+"Key"],bS=(e,t)=>e&&!t[e+"Key"];function ml(e,t,n){return e===void 0?!0:typeof e=="string"?e.indexOf(t)!==-1:typeof e=="function"?e({chart:n}).indexOf(t)!==-1:!1}function Gb(e,t){return typeof e=="function"&&(e=e({chart:t})),typeof e=="string"?{x:e.indexOf("x")!==-1,y:e.indexOf("y")!==-1}:{x:!1,y:!1}}function Prt(e,t){let n;return function(){return clearTimeout(n),n=setTimeout(e,t),t}}function Ort({x:e,y:t},n){const i=n.scales,s=Object.keys(i);for(let r=0;r<s.length;r++){const a=i[s[r]];if(t>=a.top&&t<=a.bottom&&e>=a.left&&e<=a.right)return a}return null}function eU(e,t,n){const{mode:i="xy",scaleMode:s,overScaleMode:r}=e||{},a=Ort(t,n),c=Gb(i,n),u=Gb(s,n);if(r){const f=Gb(r,n);for(const m of["x","y"])f[m]&&(u[m]=c[m],c[m]=!1)}if(a&&u[a.axis])return[a];const h=[];return Ee(n.scales,function(f){c[f.axis]&&h.push(f)}),h}const xw=new WeakMap;function Rn(e){let t=xw.get(e);return t||(t={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},xw.set(e,t)),t}function krt(e){xw.delete(e)}function nU(e,t,n,i){const s=Math.max(0,Math.min(1,(e-t)/n||0)),r=1-s;return{min:i*s,max:i*r}}function iU(e,t){const n=e.isHorizontal()?t.x:t.y;return e.getValueForPixel(n)}function sU(e,t,n){const i=e.max-e.min,s=i*(t-1),r=iU(e,n);return nU(r,e.min,i,s)}function Lrt(e,t,n){const i=iU(e,n);if(i===void 0)return{min:e.min,max:e.max};const s=Math.log10(e.min),r=Math.log10(e.max),a=Math.log10(i),c=r-s,u=c*(t-1),h=nU(a,s,c,u);return{min:Math.pow(10,s+h.min),max:Math.pow(10,r-h.max)}}function Vrt(e,t){return t&&(t[e.id]||t[e.axis])||{}}function pP(e,t,n,i,s){let r=n[i];if(r==="original"){const a=e.originalScaleLimits[t.id][i];r=ue(a.options,a.scale)}return ue(r,s)}function jrt(e,t,n){const i=e.getValueForPixel(t),s=e.getValueForPixel(n);return{min:Math.min(i,s),max:Math.max(i,s)}}function Urt(e,{min:t,max:n,minLimit:i,maxLimit:s},r){const a=(e-n+t)/2;t-=a,n+=a;const c=r.min.options??r.min.scale,u=r.max.options??r.max.scale,h=e/1e6;return fc(t,c,h)&&(t=c),fc(n,u,h)&&(n=u),t<i?(t=i,n=Math.min(i+e,s)):n>s&&(n=s,t=Math.max(s-e,i)),{min:t,max:n}}function Vc(e,{min:t,max:n},i,s=!1){const r=Rn(e.chart),{options:a}=e,c=Vrt(e,i),{minRange:u=0}=c,h=pP(r,e,c,"min",-1/0),f=pP(r,e,c,"max",1/0);if(s==="pan"&&(t<h||n>f))return!0;const m=e.max-e.min,y=s?Math.max(n-t,u):m;if(s&&y===u&&m<=u)return!0;const v=Urt(y,{min:t,max:n,minLimit:h,maxLimit:f},r.originalScaleLimits[e.id]);return a.min=v.min,a.max=v.max,r.updatedScaleLimits[e.id]=v,e.parse(v.min)!==e.min||e.parse(v.max)!==e.max}function Frt(e,t,n,i){const s=sU(e,t,n),r={min:e.min+s.min,max:e.max-s.max};return Vc(e,r,i,!0)}function Brt(e,t,n,i){const s=Lrt(e,t,n);return Vc(e,s,i,!0)}function zrt(e,t,n,i){Vc(e,jrt(e,t,n),i,!0)}const mP=e=>e===0||isNaN(e)?0:e<0?Math.min(Math.round(e),-1):Math.max(Math.round(e),1);function Hrt(e){const n=e.getLabels().length-1;e.min>0&&(e.min-=1),e.max<n&&(e.max+=1)}function qrt(e,t,n,i){const s=sU(e,t,n);e.min===e.max&&t<1&&Hrt(e);const r={min:e.min+mP(s.min),max:e.max-mP(s.max)};return Vc(e,r,i,!0)}function $rt(e){return e.isHorizontal()?e.width:e.height}function Wrt(e,t,n){const s=e.getLabels().length-1;let{min:r,max:a}=e;const c=Math.max(a-r,1),u=Math.round($rt(e)/Math.max(c,10)),h=Math.round(Math.abs(t/u));let f;return t<-u?(a=Math.min(a+h,s),r=c===1?a:a-c,f=a===s):t>u&&(r=Math.max(0,r-h),a=c===1?r:r+c,f=r===0),Vc(e,{min:r,max:a},n)||f}const Grt={second:500,minute:30*1e3,hour:30*60*1e3,day:12*60*60*1e3,week:3.5*24*60*60*1e3,month:15*24*60*60*1e3,quarter:60*24*60*60*1e3,year:182*24*60*60*1e3};function rU(e,t,n,i=!1){const{min:s,max:r,options:a}=e,c=a.time&&a.time.round,u=Grt[c]||0,h=e.getValueForPixel(e.getPixelForValue(s+u)-t),f=e.getValueForPixel(e.getPixelForValue(r+u)-t);return isNaN(h)||isNaN(f)?!0:Vc(e,{min:h,max:f},n,i?"pan":!1)}function gP(e,t,n){return rU(e,t,n,!0)}const Sw={category:qrt,default:Frt,logarithmic:Brt},Aw={default:zrt},Cw={category:Wrt,default:rU,logarithmic:gP,timeseries:gP};function Yrt(e,t,n){const{id:i,options:{min:s,max:r}}=e;if(!t[i]||!n[i])return!0;const a=n[i];return a.min!==s||a.max!==r}function yP(e,t){Ee(e,(n,i)=>{t[i]||delete e[i]})}function Ch(e,t){const{scales:n}=e,{originalScaleLimits:i,updatedScaleLimits:s}=t;return Ee(n,function(r){Yrt(r,i,s)&&(i[r.id]={min:{scale:r.min,options:r.options.min},max:{scale:r.max,options:r.options.max}})}),yP(i,n),yP(s,n),i}function _P(e,t,n,i){const s=Sw[e.type]||Sw.default;Zt(s,[e,t,n,i])}function vP(e,t,n,i){const s=Aw[e.type]||Aw.default;Zt(s,[e,t,n,i])}function Krt(e){const t=e.chartArea;return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function TS(e,t,n="none",i="api"){const{x:s=1,y:r=1,focalPoint:a=Krt(e)}=typeof t=="number"?{x:t,y:t}:t,c=Rn(e),{options:{limits:u,zoom:h}}=c;Ch(e,c);const f=s!==1,m=r!==1,y=eU(h,a,e);Ee(y||e.scales,function(v){v.isHorizontal()&&f?_P(v,s,a,u):!v.isHorizontal()&&m&&_P(v,r,a,u)}),e.update(n),Zt(h.onZoom,[{chart:e,trigger:i}])}function oU(e,t,n,i="none",s="api"){const r=Rn(e),{options:{limits:a,zoom:c}}=r,{mode:u="xy"}=c;Ch(e,r);const h=ml(u,"x",e),f=ml(u,"y",e);Ee(e.scales,function(m){m.isHorizontal()&&h?vP(m,t.x,n.x,a):!m.isHorizontal()&&f&&vP(m,t.y,n.y,a)}),e.update(i),Zt(c.onZoom,[{chart:e,trigger:s}])}function Xrt(e,t,n,i="none",s="api"){var c;const r=Rn(e);Ch(e,r);const a=e.scales[t];Vc(a,n,void 0,!0),e.update(i),Zt((c=r.options.zoom)==null?void 0:c.onZoom,[{chart:e,trigger:s}])}function Qrt(e,t="default"){const n=Rn(e),i=Ch(e,n);Ee(e.scales,function(s){const r=s.options;i[s.id]?(r.min=i[s.id].min.options,r.max=i[s.id].max.options):(delete r.min,delete r.max),delete n.updatedScaleLimits[s.id]}),e.update(t),Zt(n.options.zoom.onZoomComplete,[{chart:e}])}function Zrt(e,t){const n=e.originalScaleLimits[t];if(!n)return;const{min:i,max:s}=n;return ue(s.options,s.scale)-ue(i.options,i.scale)}function Jrt(e){const t=Rn(e);let n=1,i=1;return Ee(e.scales,function(s){const r=Zrt(t,s.id);if(r){const a=Math.round(r/(s.max-s.min)*100)/100;n=Math.min(n,a),i=Math.max(i,a)}}),n<1?n:i}function bP(e,t,n,i){const{panDelta:s}=i,r=s[e.id]||0;cr(r)===cr(t)&&(t+=r);const a=Cw[e.type]||Cw.default;Zt(a,[e,t,n])?s[e.id]=0:s[e.id]=t}function aU(e,t,n,i="none"){const{x:s=0,y:r=0}=typeof t=="number"?{x:t,y:t}:t,a=Rn(e),{options:{pan:c,limits:u}}=a,{onPan:h}=c||{};Ch(e,a);const f=s!==0,m=r!==0;Ee(n||e.scales,function(y){y.isHorizontal()&&f?bP(y,s,u,a):!y.isHorizontal()&&m&&bP(y,r,u,a)}),e.update(i),Zt(h,[{chart:e}])}function lU(e){const t=Rn(e);Ch(e,t);const n={};for(const i of Object.keys(e.scales)){const{min:s,max:r}=t.originalScaleLimits[i]||{min:{},max:{}};n[i]={min:s.scale,max:r.scale}}return n}function tot(e){const t=Rn(e),n={};for(const i of Object.keys(e.scales))n[i]=t.updatedScaleLimits[i];return n}function eot(e){const t=lU(e);for(const n of Object.keys(e.scales)){const{min:i,max:s}=t[n];if(i!==void 0&&e.scales[n].min!==i||s!==void 0&&e.scales[n].max!==s)return!0}return!1}function TP(e){const t=Rn(e);return t.panning||t.dragging}const wP=(e,t,n)=>Math.min(n,Math.max(t,e));function ps(e,t){const{handlers:n}=Rn(e),i=n[t];i&&i.target&&(i.target.removeEventListener(t,i),delete n[t])}function vf(e,t,n,i){const{handlers:s,options:r}=Rn(e),a=s[n];if(a&&a.target===t)return;ps(e,n),s[n]=u=>i(e,u,r),s[n].target=t;const c=n==="wheel"?!1:void 0;t.addEventListener(n,s[n],{passive:c})}function not(e,t){const n=Rn(e);n.dragStart&&(n.dragging=!0,n.dragEnd=t,e.update("none"))}function iot(e,t){const n=Rn(e);!n.dragStart||t.key!=="Escape"||(ps(e,"keydown"),n.dragging=!1,n.dragStart=n.dragEnd=null,e.update("none"))}function Rw(e,t){if(e.target!==t.canvas){const n=t.canvas.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}return no(e,t)}function cU(e,t,n){const{onZoomStart:i,onZoomRejected:s}=n;if(i){const r=Rw(t,e);if(Zt(i,[{chart:e,event:t,point:r}])===!1)return Zt(s,[{chart:e,event:t}]),!1}}function sot(e,t){if(e.legend){const r=no(t,e);if(ah(r,e.legend))return}const n=Rn(e),{pan:i,zoom:s={}}=n.options;if(t.button!==0||tU(ep(i),t)||bS(ep(s.drag),t))return Zt(s.onZoomRejected,[{chart:e,event:t}]);cU(e,t,s)!==!1&&(n.dragStart=t,vf(e,e.canvas.ownerDocument,"mousemove",not),vf(e,window.document,"keydown",iot))}function rot({begin:e,end:t},n){let i=t.x-e.x,s=t.y-e.y;const r=Math.abs(i/s);r>n?i=Math.sign(i)*Math.abs(s*n):r<n&&(s=Math.sign(s)*Math.abs(i/n)),t.x=e.x+i,t.y=e.y+s}function EP(e,t,n,{min:i,max:s,prop:r}){e[i]=wP(Math.min(n.begin[r],n.end[r]),t[i],t[s]),e[s]=wP(Math.max(n.begin[r],n.end[r]),t[i],t[s])}function oot(e,t,n){const i={begin:Rw(t.dragStart,e),end:Rw(t.dragEnd,e)};if(n){const s=e.chartArea.width/e.chartArea.height;rot(i,s)}return i}function uU(e,t,n,i){const s=ml(t,"x",e),r=ml(t,"y",e),{top:a,left:c,right:u,bottom:h,width:f,height:m}=e.chartArea,y={top:a,left:c,right:u,bottom:h},v=oot(e,n,i&&s&&r);s&&EP(y,e.chartArea,v,{min:"left",max:"right",prop:"x"}),r&&EP(y,e.chartArea,v,{min:"top",max:"bottom",prop:"y"});const T=y.right-y.left,E=y.bottom-y.top;return{...y,width:T,height:E,zoomX:s&&T?1+(f-T)/f:1,zoomY:r&&E?1+(m-E)/m:1}}function aot(e,t){const n=Rn(e);if(!n.dragStart)return;ps(e,"mousemove");const{mode:i,onZoomComplete:s,drag:{threshold:r=0,maintainAspectRatio:a}}=n.options.zoom,c=uU(e,i,{dragStart:n.dragStart,dragEnd:t},a),u=ml(i,"x",e)?c.width:0,h=ml(i,"y",e)?c.height:0,f=Math.sqrt(u*u+h*h);if(n.dragStart=n.dragEnd=null,f<=r){n.dragging=!1,e.update("none");return}oU(e,{x:c.left,y:c.top},{x:c.right,y:c.bottom},"zoom","drag"),n.dragging=!1,n.filterNextClick=!0,Zt(s,[{chart:e}])}function lot(e,t,n){if(bS(ep(n.wheel),t)){Zt(n.onZoomRejected,[{chart:e,event:t}]);return}if(cU(e,t,n)!==!1&&(t.cancelable&&t.preventDefault(),t.deltaY!==void 0))return!0}function cot(e,t){const{handlers:{onZoomComplete:n},options:{zoom:i}}=Rn(e);if(!lot(e,t,i))return;const s=t.target.getBoundingClientRect(),r=i.wheel.speed,a=t.deltaY>=0?2-1/(1-r):1+r,c={x:a,y:a,focalPoint:{x:t.clientX-s.left,y:t.clientY-s.top}};TS(e,c,"zoom","wheel"),Zt(n,[{chart:e}])}function uot(e,t,n,i){n&&(Rn(e).handlers[t]=Prt(()=>Zt(n,[{chart:e}]),i))}function hot(e,t){const n=e.canvas,{wheel:i,drag:s,onZoomComplete:r}=t.zoom;i.enabled?(vf(e,n,"wheel",cot),uot(e,"onZoomComplete",r,250)):ps(e,"wheel"),s.enabled?(vf(e,n,"mousedown",sot),vf(e,n.ownerDocument,"mouseup",aot)):(ps(e,"mousedown"),ps(e,"mousemove"),ps(e,"mouseup"),ps(e,"keydown"))}function dot(e){ps(e,"mousedown"),ps(e,"mousemove"),ps(e,"mouseup"),ps(e,"wheel"),ps(e,"click"),ps(e,"keydown")}function fot(e,t){return function(n,i){const{pan:s,zoom:r={}}=t.options;if(!s||!s.enabled)return!1;const a=i&&i.srcEvent;return a&&!t.panning&&i.pointerType==="mouse"&&(bS(ep(s),a)||tU(ep(r.drag),a))?(Zt(s.onPanRejected,[{chart:e,event:i}]),!1):!0}}function pot(e,t){const n=Math.abs(e.clientX-t.clientX),i=Math.abs(e.clientY-t.clientY),s=n/i;let r,a;return s>.3&&s<1.7?r=a=!0:n>i?r=!0:a=!0,{x:r,y:a}}function hU(e,t,n){if(t.scale){const{center:i,pointers:s}=n,r=1/t.scale*n.scale,a=n.target.getBoundingClientRect(),c=pot(s[0],s[1]),u=t.options.zoom.mode,h={x:c.x&&ml(u,"x",e)?r:1,y:c.y&&ml(u,"y",e)?r:1,focalPoint:{x:i.x-a.left,y:i.y-a.top}};TS(e,h,"zoom","pinch"),t.scale=n.scale}}function mot(e,t,n){if(t.options.zoom.pinch.enabled){const i=no(n,e);Zt(t.options.zoom.onZoomStart,[{chart:e,event:n,point:i}])===!1?(t.scale=null,Zt(t.options.zoom.onZoomRejected,[{chart:e,event:n}])):t.scale=1}}function got(e,t,n){t.scale&&(hU(e,t,n),t.scale=null,Zt(t.options.zoom.onZoomComplete,[{chart:e}]))}function dU(e,t,n){const i=t.delta;i&&(t.panning=!0,aU(e,{x:n.deltaX-i.x,y:n.deltaY-i.y},t.panScales),t.delta={x:n.deltaX,y:n.deltaY})}function yot(e,t,n){const{enabled:i,onPanStart:s,onPanRejected:r}=t.options.pan;if(!i)return;const a=n.target.getBoundingClientRect(),c={x:n.center.x-a.left,y:n.center.y-a.top};if(Zt(s,[{chart:e,event:n,point:c}])===!1)return Zt(r,[{chart:e,event:n}]);t.panScales=eU(t.options.pan,c,e),t.delta={x:0,y:0},dU(e,t,n)}function _ot(e,t){t.delta=null,t.panning&&(t.panning=!1,t.filterNextClick=!0,Zt(t.options.pan.onPanComplete,[{chart:e}]))}const Iw=new WeakMap;function xP(e,t){const n=Rn(e),i=e.canvas,{pan:s,zoom:r}=t,a=new _f.Manager(i);r&&r.pinch.enabled&&(a.add(new _f.Pinch),a.on("pinchstart",c=>mot(e,n,c)),a.on("pinch",c=>hU(e,n,c)),a.on("pinchend",c=>got(e,n,c))),s&&s.enabled&&(a.add(new _f.Pan({threshold:s.threshold,enable:fot(e,n)})),a.on("panstart",c=>yot(e,n,c)),a.on("panmove",c=>dU(e,n,c)),a.on("panend",()=>_ot(e,n))),Iw.set(e,a)}function SP(e){const t=Iw.get(e);t&&(t.remove("pinchstart"),t.remove("pinch"),t.remove("pinchend"),t.remove("panstart"),t.remove("pan"),t.remove("panend"),t.destroy(),Iw.delete(e))}function vot(e,t){var a,c,u,h;const{pan:n,zoom:i}=e,{pan:s,zoom:r}=t;return((c=(a=i==null?void 0:i.zoom)==null?void 0:a.pinch)==null?void 0:c.enabled)!==((h=(u=r==null?void 0:r.zoom)==null?void 0:u.pinch)==null?void 0:h.enabled)||(n==null?void 0:n.enabled)!==(s==null?void 0:s.enabled)||(n==null?void 0:n.threshold)!==(s==null?void 0:s.threshold)}var bot="2.2.0";function Rg(e,t,n){const i=n.zoom.drag,{dragStart:s,dragEnd:r}=Rn(e);if(i.drawTime!==t||!r)return;const{left:a,top:c,width:u,height:h}=uU(e,n.zoom.mode,{dragStart:s,dragEnd:r},i.maintainAspectRatio),f=e.ctx;f.save(),f.beginPath(),f.fillStyle=i.backgroundColor||"rgba(225,225,225,0.3)",f.fillRect(a,c,u,h),i.borderWidth>0&&(f.lineWidth=i.borderWidth,f.strokeStyle=i.borderColor||"rgba(225,225,225)",f.strokeRect(a,c,u,h)),f.restore()}var Tot={id:"zoom",version:bot,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(e,t,n){const i=Rn(e);i.options=n,Object.prototype.hasOwnProperty.call(n.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(n.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(n.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),_f&&xP(e,n),e.pan=(s,r,a)=>aU(e,s,r,a),e.zoom=(s,r)=>TS(e,s,r),e.zoomRect=(s,r,a)=>oU(e,s,r,a),e.zoomScale=(s,r,a)=>Xrt(e,s,r,a),e.resetZoom=s=>Qrt(e,s),e.getZoomLevel=()=>Jrt(e),e.getInitialScaleBounds=()=>lU(e),e.getZoomedScaleBounds=()=>tot(e),e.isZoomedOrPanned=()=>eot(e),e.isZoomingOrPanning=()=>TP(e)},beforeEvent(e,{event:t}){if(TP(e))return!1;if(t.type==="click"||t.type==="mouseup"){const n=Rn(e);if(n.filterNextClick)return n.filterNextClick=!1,!1}},beforeUpdate:function(e,t,n){const i=Rn(e),s=i.options;i.options=n,vot(s,n)&&(SP(e),xP(e,n)),hot(e,n)},beforeDatasetsDraw(e,t,n){Rg(e,"beforeDatasetsDraw",n)},afterDatasetsDraw(e,t,n){Rg(e,"afterDatasetsDraw",n)},beforeDraw(e,t,n){Rg(e,"beforeDraw",n)},afterDraw(e,t,n){Rg(e,"afterDraw",n)},stop:function(e){dot(e),_f&&SP(e),krt(e)},panFunctions:Cw,zoomFunctions:Sw,zoomRectFunctions:Aw};const fU=({isOpen:e,onClose:t,onApply:n,onClear:i})=>{const[s,r]=R.useState(null),[a,c]=R.useState(null),[u,h]=R.useState(null),[f,m]=R.useState(null);if(!e)return null;const y=new Date().getFullYear(),v=Array.from({length:10},(T,E)=>y-E);return S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:S.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-xl w-full max-w-md shadow-lg border border-gray-300",children:[S.jsx("h2",{className:"text-xl font-bold mb-4",children:"Filter Analytics"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{const T=new Date,E=new Date(T.getFullYear(),T.getMonth(),T.getDate());r(E),c(T),h(null),m(null)},children:"Today"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{const T=new Date,E=new Date(T);E.setDate(T.getDate()-7),r(E),c(T),h(null),m(null)},children:"Last 7 Days"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{const T=new Date,E=new Date(T.getFullYear(),T.getMonth(),1);r(E),c(T),h(null),m(null)},children:"This Month"}),S.jsx("button",{className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",onClick:()=>{r(null),c(null),h(null),m(null)},children:"All Time"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Start Date"}),S.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:s?s.toISOString().split("T")[0]:"",onChange:T=>r(T.target.value?new Date(T.target.value):null)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"End Date"}),S.jsx("input",{type:"date",className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:a?a.toISOString().split("T")[0]:"",onChange:T=>c(T.target.value?new Date(T.target.value):null)})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Month"}),S.jsxs("select",{className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:u??"",onChange:T=>h(T.target.value?parseInt(T.target.value):null),children:[S.jsx("option",{value:"",children:"Select Month"}),Array.from({length:12},(T,E)=>S.jsx("option",{value:E,children:new Date(0,E).toLocaleString("default",{month:"long"})},E))]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm mb-1 text-gray-900",children:"Year"}),S.jsxs("select",{className:"w-full px-3 py-2 rounded bg-white border border-gray-300",value:f??"",onChange:T=>m(T.target.value?parseInt(T.target.value):null),children:[S.jsx("option",{value:"",children:"Select Year"}),v.map(T=>S.jsx("option",{value:T,children:T},T))]})]})]}),S.jsxs("div",{className:"flex justify-between mt-6",children:[S.jsx("button",{onClick:()=>{r(null),c(null),h(null),m(null),i&&i()},className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Clear"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:t,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",children:"Cancel"}),S.jsx("button",{onClick:()=>{let T=s,E=a;u!==null&&f!==null&&(T=new Date(f,u,1),E=new Date(f,u+1,0)),n(T,E)},className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded",children:"Apply"})]})]})]})})};kp.register(ny,ww,Ew,X4,Y4,Uu,ey,Qd,Tot);const wot="cdbb40b30135e8397fe914b98c469d44",Eot=e=>(e=e.toLowerCase(),e.includes("rain")?"":e.includes("cloud")?"":e.includes("clear")?"":e.includes("storm")?"":e.includes("snow")?"":e.includes("fog")||e.includes("mist")?"":""),Ig=e=>e.trim().toLowerCase(),xot=()=>{const{user:e}=Pp(),[t,n]=R.useState([]),[i,s]=R.useState(0),[r,a]=R.useState(0),[c,u]=R.useState(0),[h,f]=R.useState({}),[m,y]=R.useState(""),[v,T]=R.useState(!1),[E,x]=R.useState([]),[C,P]=R.useState("weekly"),[N,q]=R.useState([]),[F,G]=R.useState(!1),[k,D]=R.useState(null),[M,V]=R.useState(null),[B,$]=R.useState(null),[H,Et]=R.useState(null),[_t,X]=R.useState(!1),nt=R.useCallback(()=>{navigator.geolocation.getCurrentPosition(async({coords:z})=>{try{const ct=(await(await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${z.latitude}&lon=${z.longitude}&units=metric&appid=${wot}`)).json()).list.filter((vt,Nt)=>Nt%8===0).slice(0,7).map(vt=>{const Nt=new Date(vt.dt_txt),wt=vt.weather[0].description,Bt=Eot(wt);return!m&&(wt.includes("rain")||wt.includes("storm"))&&y(" Expect rain  rides may increase!"),{date:Nt.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),temp:vt.main.temp,description:wt,icon:Bt}});n(ct)}catch(it){console.error("Weather fetch error:",it)}},z=>{console.error("Failed to get location for weather:",z)})},[m]),yt=R.useCallback(async()=>{if(e){T(!0);try{const z=new Date;z.setHours(0,0,0,0);const it=new Date(z);it.setDate(z.getDate()-6);const lt=$o(Fn(rn,"ride_logs"),sc("driverId","==",e.uid),sc("timestamp",">=",un.fromDate(it))),ct=await Lf(lt);let vt=0,Nt=0,wt=0,Bt={},Tt={};for(let zt=0;zt<7;zt++){const Pt=new Date(it.getTime()+zt*864e5),Mt=Pt.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});Tt[Mt]={earnings:0,rides:0,date:Pt}}let Ct=0,It=0;ct.forEach(zt=>{var En,Ze,Ve;const Pt=zt.data(),Mt=(En=Pt.timestamp)==null?void 0:En.toDate();if(!Mt)return;const Oe=(Pt.dropoffName||"").trim(),Ge={};Object.entries(Yf).forEach(([Ii,Qi])=>{Ge[Ig(Ii)]=Qi});const de=Ge[Ig(Oe)]||0;vt+=de,Mt>=z&&Mt<new Date(z.getTime()+864e5)&&(Ct+=de,It++),typeof Pt.waitTimeMinutes=="number"&&Pt.waitTimeMinutes>=0&&(Nt+=Pt.waitTimeMinutes,wt++);const Hn=Mt.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});Tt[Hn]&&(Tt[Hn]={earnings:(((Ze=Tt[Hn])==null?void 0:Ze.earnings)||0)+de,rides:(((Ve=Tt[Hn])==null?void 0:Ve.rides)||0)+1,date:Tt[Hn].date}),Oe&&(Bt[Oe]||(Bt[Oe]={count:0,earnings:0}),Bt[Oe].count+=1,Bt[Oe].earnings+=de)}),a(It),u(Ct),s(wt?Math.round(Nt/wt):0),f(Bt),x(Object.entries(Tt).reverse().map(([zt,Pt])=>({date:Pt.date.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),earnings:Pt.earnings||0,rides:Pt.rides||0})))}catch(z){console.error("Error loading analytics:",z)}T(!1)}},[e]),xt=R.useCallback(async(z,it,lt)=>{if(e)try{let ct,vt;const Nt=new Date;if(Nt.setHours(0,0,0,0),it&&lt)ct=new Date(it),ct.setHours(0,0,0,0),vt=new Date(lt),vt.setHours(23,59,59,999);else{const Pt=z==="annually"?365:z==="monthly"?30:7;ct=new Date(Nt),ct.setDate(Nt.getDate()-(Pt-1)),vt=new Date(Nt),vt.setHours(23,59,59,999)}const wt=$o(Fn(rn,"ride_logs"),sc("driverId","==",e.uid),sc("timestamp",">=",un.fromDate(ct)),sc("timestamp","<=",un.fromDate(vt))),Bt=await Lf(wt);let Tt={};const Ct=Math.ceil((vt.getTime()-ct.getTime())/(1e3*60*60*24))+1;for(let Pt=0;Pt<Ct;Pt++){const Mt=new Date(ct.getTime()+Pt*864e5),he=Mt.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});Tt[he]={earnings:0,rides:0,date:Mt}}Bt.forEach(Pt=>{var Ze;const Mt=Pt.data(),he=(Ze=Mt.timestamp)==null?void 0:Ze.toDate();if(!he)return;const Ge=(Mt.dropoffName||"").trim(),de={};Object.entries(Yf).forEach(([Ve,Ii])=>{de[Ig(Ve)]=Ii});const Hn=de[Ig(Ge)]||0,En=he.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});Tt[En]&&(Tt[En].earnings+=Hn,Tt[En].rides+=1)});let It={};it&&lt?Object.entries(Tt).forEach(([Pt,Mt])=>{It[Pt]=Mt}):z==="weekly"?Object.entries(Tt).forEach(([Pt,Mt])=>{It[Pt]=Mt}):z==="monthly"?Object.entries(Tt).forEach(([Pt,Mt])=>{const he=new Date(Mt.date);he.setDate(Mt.date.getDate()-Mt.date.getDay());const Oe=he.toLocaleDateString(void 0,{month:"short",day:"numeric"});It[Oe]||(It[Oe]={earnings:0,rides:0}),It[Oe].earnings+=Mt.earnings,It[Oe].rides+=Mt.rides}):z==="annually"&&Object.entries(Tt).forEach(([Pt,Mt])=>{const he=Mt.date.toLocaleDateString(void 0,{month:"short",year:"numeric"});It[he]||(It[he]={earnings:0,rides:0}),It[he].earnings+=Mt.earnings,It[he].rides+=Mt.rides});const zt=Object.entries(It).map(([Pt,Mt])=>({label:Pt,earnings:Mt.earnings,rides:Mt.rides}));q(zt)}catch(ct){console.error("Error loading pie analytics:",ct)}},[e]);return R.useEffect(()=>{e&&(nt(),yt(),xt(C))},[e,nt,yt,xt,C]),R.useEffect(()=>{e&&xt(C)},[C,xt,e]),S.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4 text-gray-900",children:S.jsxs("div",{className:"max-w-7xl mx-auto",children:[S.jsx("h1",{className:"text-3xl font-bold mb-6 text-center animate-fade-in",children:" Analytics Dashboard"}),m&&S.jsx("div",{className:"bg-yellow-200 p-4 rounded-lg mb-6 shadow-lg animate-slide-down",children:m}),t.length>0&&S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-7 gap-4 mb-8 animate-fade-in-up",children:t.map((z,it)=>S.jsxs("div",{className:"bg-white p-4 rounded-xl flex flex-col items-center shadow-lg hover:shadow-xl transition-shadow duration-300",children:[S.jsx("p",{className:"text-sm font-medium text-gray-700",children:z.date}),S.jsx("div",{className:"text-4xl my-2",children:z.icon}),S.jsxs("p",{className:"font-bold text-lg",children:[z.temp.toFixed(1),"C"]}),S.jsx("p",{className:"text-xs capitalize text-center text-gray-600",children:z.description})]},it))}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-slide-up",children:[S.jsx("div",{className:"text-4xl mb-2",children:""}),S.jsx("p",{className:"font-semibold text-xl mb-1",children:"Avg Wait Time"}),S.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[i," mins"]}),S.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"(Based on queued wait times recorded)"})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-slide-up",style:{animationDelay:"0.1s"},children:[S.jsx("div",{className:"text-4xl mb-2",children:""}),S.jsx("p",{className:"font-semibold text-xl mb-1",children:"Rides Today"}),S.jsx("p",{className:"text-3xl font-bold text-green-600",children:r}),S.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["as of ",new Date().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})]})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center animate-slide-up",style:{animationDelay:"0.2s"},children:[S.jsx("div",{className:"text-4xl mb-2",children:""}),S.jsx("p",{className:"font-semibold text-xl mb-1",children:"Total Earnings"}),S.jsxs("p",{className:"text-3xl font-bold text-yellow-600",children:["",c.toFixed(2)]}),S.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["as of ",new Date().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg animate-fade-in-left",children:[S.jsx("h2",{className:"font-semibold text-xl mb-4",children:" Top Drop-offs"}),Object.entries(h).length?S.jsx("ul",{className:"space-y-2",children:Object.entries(h).sort(([,z],[,it])=>it.earnings-z.earnings).slice(0,5).map(([z,it],lt)=>S.jsxs("li",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[S.jsx("span",{className:"font-medium",children:z}),S.jsxs("span",{className:"text-sm text-gray-600",children:[it.count," ride",it.count>1?"s":"",", ",it.earnings.toFixed(2)]})]},lt))}):S.jsx("p",{className:"text-gray-500",children:"No drop-offs recorded yet."})]}),S.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg flex items-center justify-center animate-fade-in-right",children:S.jsx("button",{onClick:()=>{yt(),nt(),xt(C)},disabled:v,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 text-white px-8 py-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105",children:v?" Refreshing...":" Refresh Data"})})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg mb-8 animate-fade-in-up",children:[S.jsx("h2",{className:"text-xl font-semibold mb-6",children:" 7-Day Ride & Earnings Trend"}),S.jsx("div",{className:"h-80",children:S.jsx(Irt,{data:{labels:E.map(z=>z.date),datasets:[{label:"Rides",data:E.map(z=>z.rides),backgroundColor:"#3b82f6",borderRadius:6},{label:"Earnings ()",data:E.map(z=>z.earnings),backgroundColor:"#10b981",borderRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:1500,easing:"easeOutCubic"},scales:{y:{beginAtZero:!0,ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{tooltip:{callbacks:{label:z=>`${z.dataset.label||"Unknown"}: ${z.parsed.y}`}},legend:{labels:{color:"#374151"}}}}})})]}),S.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg animate-fade-in-up",style:{animationDelay:"0.3s"},children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[S.jsx("h2",{className:"text-xl font-semibold mb-4 sm:mb-0",children:" Ride & Earnings Breakdown"}),S.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.jsx("button",{onClick:()=>{G(!0)},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${_t?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Filter"}),S.jsx("button",{onClick:()=>{P("weekly"),X(!1),xt("weekly")},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${C==="weekly"&&!_t?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Weekly"}),S.jsx("button",{onClick:()=>{P("monthly"),X(!1),xt("monthly")},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${C==="monthly"&&!_t?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Monthly"}),S.jsx("button",{onClick:()=>{P("annually"),X(!1),xt("annually")},className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${C==="annually"&&!_t?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Annually"})]})]}),S.jsx("div",{className:"h-96",children:S.jsx(Rrt,{data:{labels:N.map(z=>z.label),datasets:[{label:"Earnings ()",data:N.map(z=>z.earnings),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"#10b981",pointBorderColor:"#10b981"},{label:"Rides",data:N.map(z=>z.rides),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"#3b82f6",pointBorderColor:"#3b82f6"}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:1500,easing:"easeOutCubic"},scales:{y:{beginAtZero:!0,ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:"#374151"},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{tooltip:{callbacks:{label:z=>{const it=z.dataset.label||"Unknown",lt=z.parsed.y;return`${it}: ${lt}`}}},legend:{labels:{color:"#374151"}},zoom:{zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"x"},pan:{enabled:!0,mode:"x"}}}}})})]}),F&&S.jsx(fU,{isOpen:F,onClose:()=>G(!1),onApply:(z,it)=>{D(z),V(it),X(!0),xt("weekly",z,it),G(!1)}})]})})},Sot=()=>{const e=[{to:"/home",icon:GY,label:"Home"},{to:"/analytics",icon:VY,label:"Analytics"},{to:"/history",icon:QY,label:"History"},{to:"/profile",icon:eK,label:"Profile"}];return S.jsx("nav",{className:`fixed bottom-0 left-0 w-full h-16 z-50 border-t backdrop-blur-sm\r
    bg-white/80 text-black border-gray-200\r
    dark:bg-[#0D111C]/95 dark:text-white dark:border-[#1c2230]\r
    flex justify-around items-center transition-colors duration-300`,children:e.map(({to:t,icon:n,label:i})=>S.jsxs(JP,{to:t,className:({isActive:s})=>`flex flex-col items-center justify-center text-xs font-medium transition-colors duration-200
            ${s?"text-blue-600":"text-gray-500"}`,children:[S.jsx(n,{size:20}),S.jsx("span",{children:i})]},t))})},Aot=()=>S.jsxs("div",{className:"min-h-screen bg-white text-black transition-colors duration-500 pb-16",children:[S.jsx("header",{className:"sticky top-0 z-40 bg-white px-4 pt-4 pb-2 flex justify-between items-center shadow-sm",children:S.jsx("h1",{className:"text-lg font-bold",children:"AGDUWA Drivers"})}),S.jsx("main",{className:"p-4",children:S.jsx(lB,{})}),S.jsx(Sot,{})]}),Cot=()=>{const{driverId:e}=YF(),[t,n]=R.useState(null),[i,s]=R.useState(!0);if(R.useEffect(()=>{(async()=>{if(!e){s(!1);return}try{const c=ce(rn,"publicProfiles",e),u=await vp(c);u.exists()?n(u.data()):n(null)}catch(c){console.error("Error fetching driver:",c),n(null)}s(!1)})()},[e]),i)return S.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-900 text-white p-4",children:S.jsx("p",{children:"Loading driver profile..."})});if(!t)return S.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen bg-gray-100 text-gray-900 p-4",children:[S.jsx("p",{className:"mb-4",children:"Driver profile not found."}),S.jsx(Hw,{to:"/",className:"text-blue-500 hover:underline",children:"Return to Home"})]});const r=`${window.location.origin}/driver/${e}`;return S.jsx("div",{className:"flex justify-center p-4 bg-gray-100 min-h-screen text-gray-900",children:S.jsxs("div",{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-md",children:[S.jsx("div",{className:"flex justify-center mb-6",children:S.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden bg-gray-200 border-2 border-gray-900",children:t.image?S.jsx("img",{src:t.image,alt:`${t.name} profile`,className:"w-full h-full object-cover"}):S.jsx("div",{className:"text-gray-400 text-sm flex items-center justify-center h-full",children:"No Image"})})}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{children:[S.jsx("strong",{children:"Name:"})," ",t.name||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Plate:"})," ",t.plate||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Vehicle:"})," ",t.vehicle||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Status:"})," ",S.jsx("span",{className:`px-2 py-1 rounded text-sm font-semibold ${t.status==="Online"?"bg-green-600 text-green-100":"bg-red-600 text-red-100"}`,children:t.status||"Offline"})]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Age:"})," ",t.age||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Contact:"})," ",t.contact||"N/A"]}),S.jsxs("div",{children:[S.jsx("strong",{children:"Payment Method:"})," ",t.paymentMethod||"N/A"]}),S.jsxs("div",{children:[S.jsxs("strong",{children:[t.paymentMethod||"Payment"," Number:"]})," ",t.paymentNumber||"N/A"]})]}),S.jsxs("div",{className:"text-center mt-8",children:[S.jsx("h2",{className:"font-bold text-sm mb-2",children:"Driver QR Code"}),S.jsx("div",{className:"bg-white p-4 rounded-lg w-fit mx-auto",children:S.jsx(nS,{value:r,size:150})}),S.jsx("p",{className:"text-xs mt-2 text-gray-400 break-all",children:r})]})]})})};var Yb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var AP;function Rot(){return AP||(AP=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(r=s(r,i(c)))}return r}function i(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return n.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var a="";for(var c in r)t.call(r,c)&&r[c]&&(a=s(a,c));return a}function s(r,a){return a?r?r+" "+a:r+a:r}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(Yb)),Yb.exports}var Iot=Rot();const Dot=a_(Iot),Mot=({driver:e,onClose:t,onSaveSuccess:n,user:i})=>{const s=D_(),[r,a]=R.useState(!1),[c,u]=R.useState({name:e.name||"",plate:e.plate||"",status:e.status||"offline",contact:e.phone||"",age:e.age||"",paymentNumber:e.paymentNumber||""}),[h,f]=R.useState(!1);R.useEffect(()=>{setTimeout(()=>a(!0),10)},[]);const m=()=>{const{name:T,plate:E,contact:x,age:C}=c;if(!T||!E||!x||!C)return Jt.error("Please fill in all required fields"),!1;if(!/^[0-9]{10,13}$/.test(x))return Jt.error("Enter a valid contact number"),!1;const N=parseInt(C);return isNaN(N)||N<18||N>100?(Jt.error("Enter a valid age (18100)"),!1):!0},y=async()=>{if(m())try{f(!0),await Mk(ce(s,"drivers",e.id),{name:c.name,plate:c.plate,status:c.status,phone:c.contact,age:parseInt(c.age),paymentNumber:c.paymentNumber}),Jt.success("Driver updated"),await mn(ce(Fn(s,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Edited driver: ${e.name} (${e.plate})`,timestamp:Ls()}),n(),v()}catch(T){console.error(T),Jt.error("Update failed")}finally{f(!1)}},v=()=>{a(!1),setTimeout(()=>t(),250)};return S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:S.jsxs("div",{className:Dot("bg-white p-6 rounded-lg max-w-md w-full transform transition-all duration-300 border border-gray-300 shadow-lg",{"scale-100 opacity-100":r,"scale-95 opacity-0":!r}),children:[S.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Edit Driver"}),S.jsxs("div",{className:"space-y-3",children:[S.jsx("input",{type:"text",placeholder:"Name",value:c.name,onChange:T=>u({...c,name:T.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsx("input",{type:"text",placeholder:"Plate",value:c.plate,onChange:T=>u({...c,plate:T.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsx("input",{type:"text",placeholder:"Contact",value:c.contact,onChange:T=>u({...c,contact:T.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsx("input",{type:"number",placeholder:"Age",value:c.age,onChange:T=>u({...c,age:T.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsx("input",{type:"text",placeholder:"Payment Number",value:c.paymentNumber,onChange:T=>u({...c,paymentNumber:T.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900"}),S.jsxs("select",{value:c.status,onChange:T=>u({...c,status:T.target.value}),className:"w-full p-2 rounded bg-gray-50 border border-gray-300 text-gray-900",children:[S.jsx("option",{value:"offline",children:"Offline"}),S.jsx("option",{value:"online",children:"Online"})]})]}),S.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[S.jsx("button",{onClick:v,className:"bg-gray-200 hover:bg-gray-300 text-gray-900 px-4 py-2 rounded",disabled:h,children:"Cancel"}),S.jsx("button",{onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",disabled:h,children:h?"Saving...":"Save"})]})]})})},Q_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Rh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function wS(e){return"nodeType"in e}function ws(e){var t,n;return e?Rh(e)?e:wS(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function ES(e){const{Document:t}=ws(e);return e instanceof t}function Lp(e){return Rh(e)?!1:e instanceof ws(e).HTMLElement}function pU(e){return e instanceof ws(e).SVGElement}function Ih(e){return e?Rh(e)?e.document:wS(e)?ES(e)?e:Lp(e)||pU(e)?e.ownerDocument:document:document:document}const gl=Q_?R.useLayoutEffect:R.useEffect;function xS(e){const t=R.useRef(e);return gl(()=>{t.current=e}),R.useCallback(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t.current==null?void 0:t.current(...i)},[])}function Not(){const e=R.useRef(null),t=R.useCallback((i,s)=>{e.current=setInterval(i,s)},[]),n=R.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function mU(e,t){t===void 0&&(t=[e]);const n=R.useRef(e);return gl(()=>{n.current!==e&&(n.current=e)},t),n}function Vp(e,t){const n=R.useRef();return R.useMemo(()=>{const i=e(n.current);return n.current=i,i},[...t])}function Pot(e){const t=xS(e),n=R.useRef(null),i=R.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,i]}function Dw(e){const t=R.useRef();return R.useEffect(()=>{t.current=e},[e]),t.current}let Kb={};function SS(e,t){return R.useMemo(()=>{if(t)return t;const n=Kb[e]==null?0:Kb[e]+1;return Kb[e]=n,e+"-"+n},[e,t])}function gU(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.reduce((r,a)=>{const c=Object.entries(a);for(const[u,h]of c){const f=r[u];f!=null&&(r[u]=f+e*h)}return r},{...t})}}const Yu=gU(1),s_=gU(-1);function Oot(e){return"clientX"in e&&"clientY"in e}function yU(e){if(!e)return!1;const{KeyboardEvent:t}=ws(e.target);return t&&e instanceof t}function kot(e){if(!e)return!1;const{TouchEvent:t}=ws(e.target);return t&&e instanceof t}function Mw(e){if(kot(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Oot(e)?{x:e.clientX,y:e.clientY}:null}const CP="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Lot(e){return e.matches(CP)?e:e.querySelector(CP)}const Vot={display:"none"};function jot(e){let{id:t,value:n}=e;return xe.createElement("div",{id:t,style:Vot},n)}function Uot(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return xe.createElement("div",{id:t,style:s,role:"status","aria-live":i,"aria-atomic":!0},n)}function Fot(){const[e,t]=R.useState("");return{announce:R.useCallback(i=>{i!=null&&t(i)},[]),announcement:e}}const _U=R.createContext(null);function Bot(e){const t=R.useContext(_U);R.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function zot(){const[e]=R.useState(()=>new Set),t=R.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[R.useCallback(i=>{let{type:s,event:r}=i;e.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,r)})},[e]),t]}const Hot={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qot={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function $ot(e){let{announcements:t=qot,container:n,hiddenTextDescribedById:i,screenReaderInstructions:s=Hot}=e;const{announce:r,announcement:a}=Fot(),c=SS("DndLiveRegion"),[u,h]=R.useState(!1);if(R.useEffect(()=>{h(!0)},[]),Bot(R.useMemo(()=>({onDragStart(m){let{active:y}=m;r(t.onDragStart({active:y}))},onDragMove(m){let{active:y,over:v}=m;t.onDragMove&&r(t.onDragMove({active:y,over:v}))},onDragOver(m){let{active:y,over:v}=m;r(t.onDragOver({active:y,over:v}))},onDragEnd(m){let{active:y,over:v}=m;r(t.onDragEnd({active:y,over:v}))},onDragCancel(m){let{active:y,over:v}=m;r(t.onDragCancel({active:y,over:v}))}}),[r,t])),!u)return null;const f=xe.createElement(xe.Fragment,null,xe.createElement(jot,{id:i,value:s.draggable}),xe.createElement(Uot,{id:c,announcement:a}));return n?Vd.createPortal(f,n):f}var Bi;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Bi||(Bi={}));function r_(){}function Wot(e,t){return R.useMemo(()=>({sensor:e,options:{}}),[e,t])}function Got(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>[...t].filter(i=>i!=null),[...t])}const Lr=Object.freeze({x:0,y:0});function Yot(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Kot(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return n-i}function Xot(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return i-n}function Qot(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function RP(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Zot=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const s=RP(t,t.left,t.top),r=[];for(const a of i){const{id:c}=a,u=n.get(c);if(u){const h=Yot(RP(u),s);r.push({id:c,data:{droppableContainer:a,value:h}})}}return r.sort(Kot)};function Jot(e,t){const n=Math.max(t.top,e.top),i=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),r=Math.min(t.top+t.height,e.top+e.height),a=s-i,c=r-n;if(i<s&&n<r){const u=t.width*t.height,h=e.width*e.height,f=a*c,m=f/(u+h-f);return Number(m.toFixed(4))}return 0}const tat=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const s=[];for(const r of i){const{id:a}=r,c=n.get(a);if(c){const u=Jot(c,t);u>0&&s.push({id:a,data:{droppableContainer:r,value:u}})}}return s.sort(Xot)};function eat(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function vU(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Lr}function nat(e){return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return s.reduce((a,c)=>({...a,top:a.top+e*c.y,bottom:a.bottom+e*c.y,left:a.left+e*c.x,right:a.right+e*c.x}),{...n})}}const iat=nat(1);function sat(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function rat(e,t,n){const i=sat(t);if(!i)return e;const{scaleX:s,scaleY:r,x:a,y:c}=i,u=e.left-a-(1-s)*parseFloat(n),h=e.top-c-(1-r)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?e.width/s:e.width,m=r?e.height/r:e.height;return{width:f,height:m,top:h,right:u+f,bottom:h+m,left:u}}const oat={ignoreTransform:!1};function jp(e,t){t===void 0&&(t=oat);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:f}=ws(e).getComputedStyle(e);h&&(n=rat(n,h,f))}const{top:i,left:s,width:r,height:a,bottom:c,right:u}=n;return{top:i,left:s,width:r,height:a,bottom:c,right:u}}function IP(e){return jp(e,{ignoreTransform:!0})}function aat(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function lat(e,t){return t===void 0&&(t=ws(e).getComputedStyle(e)),t.position==="fixed"}function cat(e,t){t===void 0&&(t=ws(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const r=t[s];return typeof r=="string"?n.test(r):!1})}function AS(e,t){const n=[];function i(s){if(t!=null&&n.length>=t||!s)return n;if(ES(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Lp(s)||pU(s)||n.includes(s))return n;const r=ws(e).getComputedStyle(s);return s!==e&&cat(s,r)&&n.push(s),lat(s,r)?n:i(s.parentNode)}return e?i(e):n}function bU(e){const[t]=AS(e,1);return t??null}function Xb(e){return!Q_||!e?null:Rh(e)?e:wS(e)?ES(e)||e===Ih(e).scrollingElement?window:Lp(e)?e:null:null}function TU(e){return Rh(e)?e.scrollX:e.scrollLeft}function wU(e){return Rh(e)?e.scrollY:e.scrollTop}function Nw(e){return{x:TU(e),y:wU(e)}}var gi;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(gi||(gi={}));function EU(e){return!Q_||!e?!1:e===document.scrollingElement}function xU(e){const t={x:0,y:0},n=EU(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,r=e.scrollLeft<=t.x,a=e.scrollTop>=i.y,c=e.scrollLeft>=i.x;return{isTop:s,isLeft:r,isBottom:a,isRight:c,maxScroll:i,minScroll:t}}const uat={x:.2,y:.2};function hat(e,t,n,i,s){let{top:r,left:a,right:c,bottom:u}=n;i===void 0&&(i=10),s===void 0&&(s=uat);const{isTop:h,isBottom:f,isLeft:m,isRight:y}=xU(e),v={x:0,y:0},T={x:0,y:0},E={height:t.height*s.y,width:t.width*s.x};return!h&&r<=t.top+E.height?(v.y=gi.Backward,T.y=i*Math.abs((t.top+E.height-r)/E.height)):!f&&u>=t.bottom-E.height&&(v.y=gi.Forward,T.y=i*Math.abs((t.bottom-E.height-u)/E.height)),!y&&c>=t.right-E.width?(v.x=gi.Forward,T.x=i*Math.abs((t.right-E.width-c)/E.width)):!m&&a<=t.left+E.width&&(v.x=gi.Backward,T.x=i*Math.abs((t.left+E.width-a)/E.width)),{direction:v,speed:T}}function dat(e){if(e===document.scrollingElement){const{innerWidth:r,innerHeight:a}=window;return{top:0,left:0,right:r,bottom:a,width:r,height:a}}const{top:t,left:n,right:i,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:s,width:e.clientWidth,height:e.clientHeight}}function SU(e){return e.reduce((t,n)=>Yu(t,Nw(n)),Lr)}function fat(e){return e.reduce((t,n)=>t+TU(n),0)}function pat(e){return e.reduce((t,n)=>t+wU(n),0)}function mat(e,t){if(t===void 0&&(t=jp),!e)return;const{top:n,left:i,bottom:s,right:r}=t(e);bU(e)&&(s<=0||r<=0||n>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const gat=[["x",["left","right"],fat],["y",["top","bottom"],pat]];class CS{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=AS(n),s=SU(i);this.rect={...t},this.width=t.width,this.height=t.height;for(const[r,a,c]of gat)for(const u of a)Object.defineProperty(this,u,{get:()=>{const h=c(i),f=s[r]-h;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bf{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=t}add(t,n,i){var s;(s=this.target)==null||s.addEventListener(t,n,i),this.listeners.push([t,n,i])}}function yat(e){const{EventTarget:t}=ws(e);return e instanceof t?e:Ih(e)}function Qb(e,t){const n=Math.abs(e.x),i=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t?i>t.y:!1}var or;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(or||(or={}));function DP(e){e.preventDefault()}function _at(e){e.stopPropagation()}var Be;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Be||(Be={}));const AU={start:[Be.Space,Be.Enter],cancel:[Be.Esc],end:[Be.Space,Be.Enter,Be.Tab]},vat=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Be.Right:return{...n,x:n.x+25};case Be.Left:return{...n,x:n.x-25};case Be.Down:return{...n,y:n.y+25};case Be.Up:return{...n,y:n.y-25}}};class CU{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new bf(Ih(n)),this.windowListeners=new bf(ws(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(or.Resize,this.handleCancel),this.windowListeners.add(or.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(or.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,i=t.node.current;i&&mat(i),n(Lr)}handleKeyDown(t){if(yU(t)){const{active:n,context:i,options:s}=this.props,{keyboardCodes:r=AU,coordinateGetter:a=vat,scrollBehavior:c="smooth"}=s,{code:u}=t;if(r.end.includes(u)){this.handleEnd(t);return}if(r.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:h}=i.current,f=h?{x:h.left,y:h.top}:Lr;this.referenceCoordinates||(this.referenceCoordinates=f);const m=a(t,{active:n,context:i.current,currentCoordinates:f});if(m){const y=s_(m,f),v={x:0,y:0},{scrollableAncestors:T}=i.current;for(const E of T){const x=t.code,{isTop:C,isRight:P,isLeft:N,isBottom:q,maxScroll:F,minScroll:G}=xU(E),k=dat(E),D={x:Math.min(x===Be.Right?k.right-k.width/2:k.right,Math.max(x===Be.Right?k.left:k.left+k.width/2,m.x)),y:Math.min(x===Be.Down?k.bottom-k.height/2:k.bottom,Math.max(x===Be.Down?k.top:k.top+k.height/2,m.y))},M=x===Be.Right&&!P||x===Be.Left&&!N,V=x===Be.Down&&!q||x===Be.Up&&!C;if(M&&D.x!==m.x){const B=E.scrollLeft+y.x,$=x===Be.Right&&B<=F.x||x===Be.Left&&B>=G.x;if($&&!y.y){E.scrollTo({left:B,behavior:c});return}$?v.x=E.scrollLeft-B:v.x=x===Be.Right?E.scrollLeft-F.x:E.scrollLeft-G.x,v.x&&E.scrollBy({left:-v.x,behavior:c});break}else if(V&&D.y!==m.y){const B=E.scrollTop+y.y,$=x===Be.Down&&B<=F.y||x===Be.Up&&B>=G.y;if($&&!y.x){E.scrollTo({top:B,behavior:c});return}$?v.y=E.scrollTop-B:v.y=x===Be.Down?E.scrollTop-F.y:E.scrollTop-G.y,v.y&&E.scrollBy({top:-v.y,behavior:c});break}}this.handleMove(t,Yu(s_(m,this.referenceCoordinates),v))}}}handleMove(t,n){const{onMove:i}=this.props;t.preventDefault(),i(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}CU.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:i=AU,onActivation:s}=t,{active:r}=n;const{code:a}=e.nativeEvent;if(i.start.includes(a)){const c=r.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function MP(e){return!!(e&&"distance"in e)}function NP(e){return!!(e&&"delay"in e)}class RS{constructor(t,n,i){var s;i===void 0&&(i=yat(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:r}=t,{target:a}=r;this.props=t,this.events=n,this.document=Ih(a),this.documentListeners=new bf(this.document),this.listeners=new bf(i),this.windowListeners=new bf(ws(a)),this.initialCoordinates=(s=Mw(r))!=null?s:Lr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(or.Resize,this.handleCancel),this.windowListeners.add(or.DragStart,DP),this.windowListeners.add(or.VisibilityChange,this.handleCancel),this.windowListeners.add(or.ContextMenu,DP),this.documentListeners.add(or.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(NP(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(MP(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:i,onPending:s}=this.props;s(i,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(or.Click,_at,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(or.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:i,initialCoordinates:s,props:r}=this,{onMove:a,options:{activationConstraint:c}}=r;if(!s)return;const u=(n=Mw(t))!=null?n:Lr,h=s_(s,u);if(!i&&c){if(MP(c)){if(c.tolerance!=null&&Qb(h,c.tolerance))return this.handleCancel();if(Qb(h,c.distance))return this.handleStart()}if(NP(c)&&Qb(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Be.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const bat={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class IS extends RS{constructor(t){const{event:n}=t,i=Ih(n.target);super(t,bat,i)}}IS.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return!n.isPrimary||n.button!==0?!1:(i==null||i({event:n}),!0)}}];const Tat={move:{name:"mousemove"},end:{name:"mouseup"}};var Pw;(function(e){e[e.RightClick=2]="RightClick"})(Pw||(Pw={}));class wat extends RS{constructor(t){super(t,Tat,Ih(t.event.target))}}wat.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return n.button===Pw.RightClick?!1:(i==null||i({event:n}),!0)}}];const Zb={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Eat extends RS{constructor(t){super(t,Zb)}static setup(){return window.addEventListener(Zb.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Zb.move.name,t)};function t(){}}}Eat.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;const{touches:s}=n;return s.length>1?!1:(i==null||i({event:n}),!0)}}];var Tf;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Tf||(Tf={}));var o_;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(o_||(o_={}));function xat(e){let{acceleration:t,activator:n=Tf.Pointer,canScroll:i,draggingRect:s,enabled:r,interval:a=5,order:c=o_.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:f,delta:m,threshold:y}=e;const v=Aat({delta:m,disabled:!r}),[T,E]=Not(),x=R.useRef({x:0,y:0}),C=R.useRef({x:0,y:0}),P=R.useMemo(()=>{switch(n){case Tf.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Tf.DraggableRect:return s}},[n,s,u]),N=R.useRef(null),q=R.useCallback(()=>{const G=N.current;if(!G)return;const k=x.current.x*C.current.x,D=x.current.y*C.current.y;G.scrollBy(k,D)},[]),F=R.useMemo(()=>c===o_.TreeOrder?[...h].reverse():h,[c,h]);R.useEffect(()=>{if(!r||!h.length||!P){E();return}for(const G of F){if((i==null?void 0:i(G))===!1)continue;const k=h.indexOf(G),D=f[k];if(!D)continue;const{direction:M,speed:V}=hat(G,D,P,t,y);for(const B of["x","y"])v[B][M[B]]||(V[B]=0,M[B]=0);if(V.x>0||V.y>0){E(),N.current=G,T(q,a),x.current=V,C.current=M;return}}x.current={x:0,y:0},C.current={x:0,y:0},E()},[t,q,i,E,r,a,JSON.stringify(P),JSON.stringify(v),T,h,F,f,JSON.stringify(y)])}const Sat={x:{[gi.Backward]:!1,[gi.Forward]:!1},y:{[gi.Backward]:!1,[gi.Forward]:!1}};function Aat(e){let{delta:t,disabled:n}=e;const i=Dw(t);return Vp(s=>{if(n||!i||!s)return Sat;const r={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[gi.Backward]:s.x[gi.Backward]||r.x===-1,[gi.Forward]:s.x[gi.Forward]||r.x===1},y:{[gi.Backward]:s.y[gi.Backward]||r.y===-1,[gi.Forward]:s.y[gi.Forward]||r.y===1}}},[n,t,i])}function Cat(e,t){const n=t!=null?e.get(t):void 0,i=n?n.node.current:null;return Vp(s=>{var r;return t==null?null:(r=i??s)!=null?r:null},[i,t])}function Rat(e,t){return R.useMemo(()=>e.reduce((n,i)=>{const{sensor:s}=i,r=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,i)}));return[...n,...r]},[]),[e,t])}var np;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(np||(np={}));var Ow;(function(e){e.Optimized="optimized"})(Ow||(Ow={}));const PP=new Map;function Iat(e,t){let{dragging:n,dependencies:i,config:s}=t;const[r,a]=R.useState(null),{frequency:c,measure:u,strategy:h}=s,f=R.useRef(e),m=x(),y=mU(m),v=R.useCallback(function(C){C===void 0&&(C=[]),!y.current&&a(P=>P===null?C:P.concat(C.filter(N=>!P.includes(N))))},[y]),T=R.useRef(null),E=Vp(C=>{if(m&&!n)return PP;if(!C||C===PP||f.current!==e||r!=null){const P=new Map;for(let N of e){if(!N)continue;if(r&&r.length>0&&!r.includes(N.id)&&N.rect.current){P.set(N.id,N.rect.current);continue}const q=N.node.current,F=q?new CS(u(q),q):null;N.rect.current=F,F&&P.set(N.id,F)}return P}return C},[e,r,n,m,u]);return R.useEffect(()=>{f.current=e},[e]),R.useEffect(()=>{m||v()},[n,m]),R.useEffect(()=>{r&&r.length>0&&a(null)},[JSON.stringify(r)]),R.useEffect(()=>{m||typeof c!="number"||T.current!==null||(T.current=setTimeout(()=>{v(),T.current=null},c))},[c,m,v,...i]),{droppableRects:E,measureDroppableContainers:v,measuringScheduled:r!=null};function x(){switch(h){case np.Always:return!1;case np.BeforeDragging:return n;default:return!n}}}function RU(e,t){return Vp(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Dat(e,t){return RU(e,t)}function Mat(e){let{callback:t,disabled:n}=e;const i=xS(t),s=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:r}=window;return new r(i)},[i,n]);return R.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function DS(e){let{callback:t,disabled:n}=e;const i=xS(t),s=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:r}=window;return new r(i)},[n]);return R.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Nat(e){return new CS(jp(e),e)}function OP(e,t,n){t===void 0&&(t=Nat);const[i,s]=R.useState(null);function r(){s(u=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=u??n)!=null?h:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const a=Mat({callback(u){if(e)for(const h of u){const{type:f,target:m}=h;if(f==="childList"&&m instanceof HTMLElement&&m.contains(e)){r();break}}}}),c=DS({callback:r});return gl(()=>{r(),e?(c==null||c.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[e]),i}function Pat(e){const t=RU(e);return vU(e,t)}const kP=[];function Oat(e){const t=R.useRef(e),n=Vp(i=>e?i&&i!==kP&&e&&t.current&&e.parentNode===t.current.parentNode?i:AS(e):kP,[e]);return R.useEffect(()=>{t.current=e},[e]),n}function kat(e){const[t,n]=R.useState(null),i=R.useRef(e),s=R.useCallback(r=>{const a=Xb(r.target);a&&n(c=>c?(c.set(a,Nw(a)),new Map(c)):null)},[]);return R.useEffect(()=>{const r=i.current;if(e!==r){a(r);const c=e.map(u=>{const h=Xb(u);return h?(h.addEventListener("scroll",s,{passive:!0}),[h,Nw(h)]):null}).filter(u=>u!=null);n(c.length?new Map(c):null),i.current=e}return()=>{a(e),a(r)};function a(c){c.forEach(u=>{const h=Xb(u);h==null||h.removeEventListener("scroll",s)})}},[s,e]),R.useMemo(()=>e.length?t?Array.from(t.values()).reduce((r,a)=>Yu(r,a),Lr):SU(e):Lr,[e,t])}function LP(e,t){t===void 0&&(t=[]);const n=R.useRef(null);return R.useEffect(()=>{n.current=null},t),R.useEffect(()=>{const i=e!==Lr;i&&!n.current&&(n.current=e),!i&&n.current&&(n.current=null)},[e]),n.current?s_(e,n.current):Lr}function Lat(e){R.useEffect(()=>{if(!Q_)return;const t=e.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function IU(e){return R.useMemo(()=>e?aat(e):null,[e])}const VP=[];function Vat(e,t){t===void 0&&(t=jp);const[n]=e,i=IU(n?ws(n):null),[s,r]=R.useState(VP);function a(){r(()=>e.length?e.map(u=>EU(u)?i:new CS(t(u),u)):VP)}const c=DS({callback:a});return gl(()=>{c==null||c.disconnect(),a(),e.forEach(u=>c==null?void 0:c.observe(u))},[e]),s}function jat(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Lp(t)?t:e}function Uat(e){let{measure:t}=e;const[n,i]=R.useState(null),s=R.useCallback(h=>{for(const{target:f}of h)if(Lp(f)){i(m=>{const y=t(f);return m?{...m,width:y.width,height:y.height}:y});break}},[t]),r=DS({callback:s}),a=R.useCallback(h=>{const f=jat(h);r==null||r.disconnect(),f&&(r==null||r.observe(f)),i(f?t(f):null)},[t,r]),[c,u]=Pot(a);return R.useMemo(()=>({nodeRef:c,rect:n,setRef:u}),[n,c,u])}const Fat=[{sensor:IS,options:{}},{sensor:CU,options:{}}],Bat={current:{}},iy={draggable:{measure:IP},droppable:{measure:IP,strategy:np.WhileDragging,frequency:Ow.Optimized},dragOverlay:{measure:jp}};class wf extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,i;return(n=(i=this.get(t))==null?void 0:i.node.current)!=null?n:void 0}}const zat={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:r_},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:iy,measureDroppableContainers:r_,windowRect:null,measuringScheduled:!1},Hat={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:r_,draggableNodes:new Map,over:null,measureDroppableContainers:r_},DU=R.createContext(Hat),MU=R.createContext(zat);function qat(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wf}}}function $at(e,t){switch(t.type){case Bi.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Bi.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Bi.DragEnd:case Bi.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Bi.RegisterDroppable:{const{element:n}=t,{id:i}=n,s=new wf(e.droppable.containers);return s.set(i,n),{...e,droppable:{...e.droppable,containers:s}}}case Bi.SetDroppableDisabled:{const{id:n,key:i,disabled:s}=t,r=e.droppable.containers.get(n);if(!r||i!==r.key)return e;const a=new wf(e.droppable.containers);return a.set(n,{...r,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Bi.UnregisterDroppable:{const{id:n,key:i}=t,s=e.droppable.containers.get(n);if(!s||i!==s.key)return e;const r=new wf(e.droppable.containers);return r.delete(n),{...e,droppable:{...e.droppable,containers:r}}}default:return e}}function Wat(e){let{disabled:t}=e;const{active:n,activatorEvent:i,draggableNodes:s}=R.useContext(DU),r=Dw(i),a=Dw(n==null?void 0:n.id);return R.useEffect(()=>{if(!t&&!i&&r&&a!=null){if(!yU(r)||document.activeElement===r.target)return;const c=s.get(a);if(!c)return;const{activatorNode:u,node:h}=c;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[u.current,h.current]){if(!f)continue;const m=Lot(f);if(m){m.focus();break}}})}},[i,t,s,a,r]),null}function Gat(e,t){let{transform:n,...i}=t;return e!=null&&e.length?e.reduce((s,r)=>r({transform:s,...i}),n):n}function Yat(e){return R.useMemo(()=>({draggable:{...iy.draggable,...e==null?void 0:e.draggable},droppable:{...iy.droppable,...e==null?void 0:e.droppable},dragOverlay:{...iy.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Kat(e){let{activeNode:t,measure:n,initialRect:i,config:s=!0}=e;const r=R.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;gl(()=>{if(!a&&!c||!t){r.current=!1;return}if(r.current||!i)return;const h=t==null?void 0:t.node.current;if(!h||h.isConnected===!1)return;const f=n(h),m=vU(f,i);if(a||(m.x=0),c||(m.y=0),r.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=bU(h);y&&y.scrollBy({top:m.y,left:m.x})}},[t,a,c,i,n])}const Xat=R.createContext({...Lr,scaleX:1,scaleY:1});var Ba;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ba||(Ba={}));const Qat=R.memo(function(t){var n,i,s,r;let{id:a,accessibility:c,autoScroll:u=!0,children:h,sensors:f=Fat,collisionDetection:m=tat,measuring:y,modifiers:v,...T}=t;const E=R.useReducer($at,void 0,qat),[x,C]=E,[P,N]=zot(),[q,F]=R.useState(Ba.Uninitialized),G=q===Ba.Initialized,{draggable:{active:k,nodes:D,translate:M},droppable:{containers:V}}=x,B=k!=null?D.get(k):null,$=R.useRef({initial:null,translated:null}),H=R.useMemo(()=>{var Gt;return k!=null?{id:k,data:(Gt=B==null?void 0:B.data)!=null?Gt:Bat,rect:$}:null},[k,B]),Et=R.useRef(null),[_t,X]=R.useState(null),[nt,yt]=R.useState(null),xt=mU(T,Object.values(T)),z=SS("DndDescribedBy",a),it=R.useMemo(()=>V.getEnabled(),[V]),lt=Yat(y),{droppableRects:ct,measureDroppableContainers:vt,measuringScheduled:Nt}=Iat(it,{dragging:G,dependencies:[M.x,M.y],config:lt.droppable}),wt=Cat(D,k),Bt=R.useMemo(()=>nt?Mw(nt):null,[nt]),Tt=ie(),Ct=Dat(wt,lt.draggable.measure);Kat({activeNode:k!=null?D.get(k):null,config:Tt.layoutShiftCompensation,initialRect:Ct,measure:lt.draggable.measure});const It=OP(wt,lt.draggable.measure,Ct),zt=OP(wt?wt.parentElement:null),Pt=R.useRef({activatorEvent:null,active:null,activeNode:wt,collisionRect:null,collisions:null,droppableRects:ct,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Mt=V.getNodeFor((n=Pt.current.over)==null?void 0:n.id),he=Uat({measure:lt.dragOverlay.measure}),Oe=(i=he.nodeRef.current)!=null?i:wt,Ge=G?(s=he.rect)!=null?s:It:null,de=!!(he.nodeRef.current&&he.rect),Hn=Pat(de?null:It),En=IU(Oe?ws(Oe):null),Ze=Oat(G?Mt??wt:null),Ve=Vat(Ze),Ii=Gat(v,{transform:{x:M.x-Hn.x,y:M.y-Hn.y,scaleX:1,scaleY:1},activatorEvent:nt,active:H,activeNodeRect:It,containerNodeRect:zt,draggingNodeRect:Ge,over:Pt.current.over,overlayNodeRect:he.rect,scrollableAncestors:Ze,scrollableAncestorRects:Ve,windowRect:En}),Qi=Bt?Yu(Bt,M):null,zs=kat(Ze),mr=LP(zs),Je=LP(zs,[It]),re=Yu(Ii,mr),fn=Ge?iat(Ge,Ii):null,Ye=H&&fn?m({active:H,collisionRect:fn,droppableRects:ct,droppableContainers:it,pointerCoordinates:Qi}):null,ls=Qot(Ye,"id"),[Qn,Di]=R.useState(null),Es=de?Ii:Yu(Ii,Je),Z=eat(Es,(r=Qn==null?void 0:Qn.rect)!=null?r:null,It),gt=R.useRef(null),Ft=R.useCallback((Gt,Ae)=>{let{sensor:jt,options:xn}=Ae;if(Et.current==null)return;const oe=D.get(Et.current);if(!oe)return;const Ht=Gt.nativeEvent,pe=new jt({active:Et.current,activeNode:oe,event:Ht,options:xn,context:Pt,onAbort(Lt){if(!D.get(Lt))return;const{onDragAbort:ye}=xt.current,tn={id:Lt};ye==null||ye(tn),P({type:"onDragAbort",event:tn})},onPending(Lt,se,ye,tn){if(!D.get(Lt))return;const{onDragPending:Ni}=xt.current,Ln={id:Lt,constraint:se,initialCoordinates:ye,offset:tn};Ni==null||Ni(Ln),P({type:"onDragPending",event:Ln})},onStart(Lt){const se=Et.current;if(se==null)return;const ye=D.get(se);if(!ye)return;const{onDragStart:tn}=xt.current,Mi={activatorEvent:Ht,active:{id:se,data:ye.data,rect:$}};Vd.unstable_batchedUpdates(()=>{tn==null||tn(Mi),F(Ba.Initializing),C({type:Bi.DragStart,initialCoordinates:Lt,active:se}),P({type:"onDragStart",event:Mi}),X(gt.current),yt(Ht)})},onMove(Lt){C({type:Bi.DragMove,coordinates:Lt})},onEnd:je(Bi.DragEnd),onCancel:je(Bi.DragCancel)});gt.current=pe;function je(Lt){return async function(){const{active:ye,collisions:tn,over:Mi,scrollAdjustedTranslate:Ni}=Pt.current;let Ln=null;if(ye&&Ni){const{cancelDrop:Zi}=xt.current;Ln={activatorEvent:Ht,active:ye,collisions:tn,delta:Ni,over:Mi},Lt===Bi.DragEnd&&typeof Zi=="function"&&await Promise.resolve(Zi(Ln))&&(Lt=Bi.DragCancel)}Et.current=null,Vd.unstable_batchedUpdates(()=>{C({type:Lt}),F(Ba.Uninitialized),Di(null),X(null),yt(null),gt.current=null;const Zi=Lt===Bi.DragEnd?"onDragEnd":"onDragCancel";if(Ln){const Ji=xt.current[Zi];Ji==null||Ji(Ln),P({type:Zi,event:Ln})}})}}},[D]),Kt=R.useCallback((Gt,Ae)=>(jt,xn)=>{const oe=jt.nativeEvent,Ht=D.get(xn);if(Et.current!==null||!Ht||oe.dndKit||oe.defaultPrevented)return;const pe={active:Ht};Gt(jt,Ae.options,pe)===!0&&(oe.dndKit={capturedBy:Ae.sensor},Et.current=xn,Ft(jt,Ae))},[D,Ft]),fe=Rat(f,Kt);Lat(f),gl(()=>{It&&q===Ba.Initializing&&F(Ba.Initialized)},[It,q]),R.useEffect(()=>{const{onDragMove:Gt}=xt.current,{active:Ae,activatorEvent:jt,collisions:xn,over:oe}=Pt.current;if(!Ae||!jt)return;const Ht={active:Ae,activatorEvent:jt,collisions:xn,delta:{x:re.x,y:re.y},over:oe};Vd.unstable_batchedUpdates(()=>{Gt==null||Gt(Ht),P({type:"onDragMove",event:Ht})})},[re.x,re.y]),R.useEffect(()=>{const{active:Gt,activatorEvent:Ae,collisions:jt,droppableContainers:xn,scrollAdjustedTranslate:oe}=Pt.current;if(!Gt||Et.current==null||!Ae||!oe)return;const{onDragOver:Ht}=xt.current,pe=xn.get(ls),je=pe&&pe.rect.current?{id:pe.id,rect:pe.rect.current,data:pe.data,disabled:pe.disabled}:null,Lt={active:Gt,activatorEvent:Ae,collisions:jt,delta:{x:oe.x,y:oe.y},over:je};Vd.unstable_batchedUpdates(()=>{Di(je),Ht==null||Ht(Lt),P({type:"onDragOver",event:Lt})})},[ls]),gl(()=>{Pt.current={activatorEvent:nt,active:H,activeNode:wt,collisionRect:fn,collisions:Ye,droppableRects:ct,draggableNodes:D,draggingNode:Oe,draggingNodeRect:Ge,droppableContainers:V,over:Qn,scrollableAncestors:Ze,scrollAdjustedTranslate:re},$.current={initial:Ge,translated:fn}},[H,wt,Ye,fn,D,Oe,Ge,ct,V,Qn,Ze,re]),xat({...Tt,delta:M,draggingRect:fn,pointerCoordinates:Qi,scrollableAncestors:Ze,scrollableAncestorRects:Ve});const ke=R.useMemo(()=>({active:H,activeNode:wt,activeNodeRect:It,activatorEvent:nt,collisions:Ye,containerNodeRect:zt,dragOverlay:he,draggableNodes:D,droppableContainers:V,droppableRects:ct,over:Qn,measureDroppableContainers:vt,scrollableAncestors:Ze,scrollableAncestorRects:Ve,measuringConfiguration:lt,measuringScheduled:Nt,windowRect:En}),[H,wt,It,nt,Ye,zt,he,D,V,ct,Qn,vt,Ze,Ve,lt,Nt,En]),te=R.useMemo(()=>({activatorEvent:nt,activators:fe,active:H,activeNodeRect:It,ariaDescribedById:{draggable:z},dispatch:C,draggableNodes:D,over:Qn,measureDroppableContainers:vt}),[nt,fe,H,It,C,z,D,Qn,vt]);return xe.createElement(_U.Provider,{value:N},xe.createElement(DU.Provider,{value:te},xe.createElement(MU.Provider,{value:ke},xe.createElement(Xat.Provider,{value:Z},h)),xe.createElement(Wat,{disabled:(c==null?void 0:c.restoreFocus)===!1})),xe.createElement($ot,{...c,hiddenTextDescribedById:z}));function ie(){const Gt=(_t==null?void 0:_t.autoScrollEnabled)===!1,Ae=typeof u=="object"?u.enabled===!1:u===!1,jt=G&&!Gt&&!Ae;return typeof u=="object"?{...u,enabled:jt}:{enabled:jt}}});function Zat(){return R.useContext(MU)}function NU(e,t,n){const i=e.slice();return i.splice(n<0?i.length+n:n,0,i.splice(t,1)[0]),i}function Jat(e,t){return e.reduce((n,i,s)=>{const r=t.get(i);return r&&(n[s]=r),n},Array(e.length))}function tlt(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function elt(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const PU=e=>{let{rects:t,activeIndex:n,overIndex:i,index:s}=e;const r=NU(t,i,n),a=t[s],c=r[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},Dg={scaleX:1,scaleY:1},nlt=e=>{var t;let{activeIndex:n,activeNodeRect:i,index:s,rects:r,overIndex:a}=e;const c=(t=r[n])!=null?t:i;if(!c)return null;if(s===n){const h=r[a];return h?{x:0,y:n<a?h.top+h.height-(c.top+c.height):h.top-c.top,...Dg}:null}const u=ilt(r,s,n);return s>n&&s<=a?{x:0,y:-c.height-u,...Dg}:s<n&&s>=a?{x:0,y:c.height+u,...Dg}:{x:0,y:0,...Dg}};function ilt(e,t,n){const i=e[t],s=e[t-1],r=e[t+1];return i?n<t?s?i.top-(s.top+s.height):r?r.top-(i.top+i.height):0:r?r.top-(i.top+i.height):s?i.top-(s.top+s.height):0:0}const OU="Sortable",slt=xe.createContext({activeIndex:-1,containerId:OU,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:PU,disabled:{draggable:!1,droppable:!1}});function rlt(e){let{children:t,id:n,items:i,strategy:s=PU,disabled:r=!1}=e;const{active:a,dragOverlay:c,droppableRects:u,over:h,measureDroppableContainers:f}=Zat(),m=SS(OU,n),y=c.rect!==null,v=R.useMemo(()=>i.map(G=>typeof G=="object"&&"id"in G?G.id:G),[i]),T=a!=null,E=a?v.indexOf(a.id):-1,x=h?v.indexOf(h.id):-1,C=R.useRef(v),P=!tlt(v,C.current),N=x!==-1&&E===-1||P,q=elt(r);gl(()=>{P&&T&&f(v)},[P,v,T,f]),R.useEffect(()=>{C.current=v},[v]);const F=R.useMemo(()=>({activeIndex:E,containerId:m,disabled:q,disableTransforms:N,items:v,overIndex:x,useDragOverlay:y,sortedRects:Jat(v,u),strategy:s}),[E,m,q.draggable,q.droppable,N,v,x,u,y,s]);return xe.createElement(slt.Provider,{value:F},t)}Be.Down,Be.Right,Be.Up,Be.Left;kp.register(Uu,X4,Y4);const jP=e=>e.trim().toLowerCase(),olt=()=>{const e=D_(),t=J2(),n=Rc(),[i,s]=R.useState(null),[r,a]=R.useState([]),[c,u]=R.useState([]),[h,f]=R.useState([]),[m,y]=R.useState([]),[v,T]=R.useState(""),[E,x]=R.useState("analytics"),[C,P]=R.useState(!1),[N,q]=R.useState(null),[F,G]=R.useState("weekly"),[k,D]=R.useState([]),[M,V]=R.useState({}),[B,$]=R.useState(0),[H,Et]=R.useState(0),[_t,X]=R.useState(!1),[nt,yt]=R.useState(null),[xt,z]=R.useState(null),[it,lt]=R.useState(new Date),[ct,vt]=R.useState([]),[Nt,wt]=R.useState(!1),[Bt,Tt]=R.useState(!1),[Ct,It]=R.useState([]),[zt,Pt]=R.useState([]),[Mt,he]=R.useState(window.innerWidth>=768),[Oe,Ge]=R.useState(window.innerWidth<768);R.useEffect(()=>{const Z=()=>{Ge(window.innerWidth<768)};return window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[]),R.useEffect(()=>(Oe&&Mt?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[Oe,Mt]);const de=R.useRef(new Map),Hn=R.useRef(new Set),En=R.useRef(0);R.useEffect(()=>{const Z=oE(t,gt=>{gt?s(gt):n("/login")});return()=>Z()},[t,n]),R.useEffect(()=>{if(!i)return;console.log("User in Admin:",i);const Z=$d(Fn(e,"drivers"),te=>{const ie=te.docs.map(jt=>({id:jt.id,...jt.data()}));console.log(" Firestore snapshot received - Total drivers:",te.docs.length),console.log(" All drivers data:",ie.map(jt=>({id:jt.id,name:jt.name,email:jt.email,verified:jt.verified,createdAt:jt.createdAt})));const Gt=ie.filter(jt=>jt.verified===!0),Ae=ie.filter(jt=>jt.verified===!1);if(console.log(" Verified drivers:",Gt.length,Gt.map(jt=>({id:jt.id,name:jt.name,verified:jt.verified}))),console.log(" Pending drivers:",Ae.length,Ae.map(jt=>({id:jt.id,name:jt.name,verified:jt.verified}))),a(Gt),u(Ae),Ae.length>En.current){const jt=Ae.length-En.current;console.log(" New pending requests detected:",jt),Jt(`New pending registration request${jt>1?"s":""} (${jt})`)}En.current=Ae.length},te=>{console.error(" Error fetching drivers:",te),Jt.error("Error fetching drivers: "+te.message)}),gt=$o(Fn(e,"queues"),Hd("joinedAt","asc")),Ft=$d(gt,async te=>{const ie=te.docs.map(oe=>({id:oe.id,...oe.data()}));f(ie);const Gt=new Set(ie.map(oe=>oe.driverId)),Ae=Hn.current,jt=Array.from(Ae).filter(oe=>!Gt.has(oe)),xn=Array.from(Gt);for(const oe of jt){const Ht=de.current.get(oe);Ht&&clearTimeout(Ht);const pe=ce(e,"drivers",oe),je=await vp(pe);if(je.exists()&&je.data().status==="offline")continue;try{await mn(pe,{status:"in ride",leftAt:Ls()},{merge:!0})}catch(se){Jt.error("Failed to update driver status to Left the queue (In Ride): "+se.message)}const Lt=setTimeout(async()=>{try{await mn(pe,{status:"offline"},{merge:!0}),Jt.success(`Driver ${oe} status changed to Offline after 1 minute of leaving queue.`)}catch(se){Jt.error("Failed to update driver status to Offline: "+se.message)}de.current.delete(oe)},6e4);de.current.set(oe,Lt)}for(const oe of xn){const Ht=de.current.get(oe);Ht&&(clearTimeout(Ht),de.current.delete(oe));const pe=ce(e,"drivers",oe);try{await mn(pe,{status:"waiting"},{merge:!0})}catch(je){Jt.error("Failed to update driver status to In Queue: "+je.message)}}Hn.current=Gt},te=>{Jt.error("Error fetching queue: "+te.message)}),Kt=$o(Fn(e,"ride_logs"),sc("status","!=","completed")),fe=$d(Kt,te=>{const ie=te.docs.map(Gt=>({id:Gt.id,...Gt.data()}));It(ie)},te=>{console.error("Error fetching active rides:",te)}),ke=$d($o(Fn(e,"adminAccessLogs"),Hd("timestamp","desc")),te=>{y(te.docs.map(ie=>({id:ie.id,...ie.data()})))},te=>{Jt.error("Error fetching logs: "+te.message)});return()=>{Z(),Ft(),fe(),ke(),de.current.forEach(te=>clearTimeout(te)),de.current.clear()}},[e,i]);const Ze=Got(Wot(IS)),Ve=async Z=>{const{active:gt,over:Ft}=Z;if(!Ft||gt.id===Ft.id)return;const Kt=h.findIndex(ie=>ie.driverId===gt.id),fe=h.findIndex(ie=>ie.driverId===Ft.id);if(Kt===-1||fe===-1)return;const ke=NU(h,Kt,fe);f(ke);const te=z8(e);ke.forEach((ie,Gt)=>{const Ae=ce(e,"queues",ie.driverId);te.update(Ae,{order:Gt})});try{await te.commit(),Jt.success("Queue reordered successfully")}catch(ie){Jt.error("Failed to reorder queue: "+ie.message)}},Ii=async Z=>{try{await Yo(ce(e,"drivers",Z)),Jt.success("Driver deleted");const gt=r.find(Ft=>Ft.id===Z);await mn(ce(Fn(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Deleted driver: ${gt==null?void 0:gt.name} (${gt==null?void 0:gt.plate})`,timestamp:Ls()})}catch{Jt.error("Error deleting driver")}},Qi=async Z=>{try{await E5(t,Z),Jt.success("Password reset email sent"),await mn(ce(Fn(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Sent password reset email to: ${Z}`,timestamp:Ls()})}catch{Jt.error("Error sending reset email")}},zs=async Z=>{try{await mn(ce(e,"queues",Z.id),{driverId:Z.id,name:Z.name,plateNumber:Z.plate,joinedAt:Ls(),order:h.length}),Jt.success(`${Z.name} added to queue`),await mn(ce(Fn(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Added driver to queue: ${Z.name} (${Z.plate})`,timestamp:Ls()})}catch(gt){Jt.error("Failed to add to queue: "+gt.message)}},mr=async Z=>{try{await Yo(ce(e,"queues",Z)),Jt.success("Driver removed from queue");const gt=r.find(Ft=>Ft.id===Z);await mn(ce(Fn(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Removed driver from queue: ${gt==null?void 0:gt.name} (${gt==null?void 0:gt.plate})`,timestamp:Ls()})}catch(gt){Jt.error("Failed to remove from queue: "+gt.message)}},Je=r.filter(Z=>{var gt,Ft;return((gt=Z.name)==null?void 0:gt.toLowerCase().includes(v.toLowerCase()))||((Ft=Z.plate)==null?void 0:Ft.toLowerCase().includes(v.toLowerCase()))}),re=Z=>{const gt=r.find(Ft=>Ft.id===Z);return gt?gt.status==="waiting"?"In Queue":gt.status==="in ride"?"Left the queue (In Ride)":(gt.status==="offline","Offline"):"Offline"},fn=async()=>{try{const Z=t.currentUser;if(Z){const gt=ce(e,"queues",Z.uid);try{await Yo(gt)}catch{}const Ft=ce(e,"drivers",Z.uid);await mn(Ft,{status:"offline"},{merge:!0})}await py(t),Jt.success("Logged out"),n("/login")}catch{Jt.error("Logout failed")}},Ye=Z=>Z?new Date(Z*1e3).toLocaleString():"No date",ls=async()=>{try{const Z=$o(Fn(e,"ride_logs"),Hd("timestamp","desc")),Ft=(await Lf(Z)).docs.map(Ht=>({id:Ht.id,...Ht.data()}));console.log("Fetched ride_logs:",Ft);const Kt=new Date;let fe,ke=[];if(F==="custom"&&nt&&xt)ke=Ft.filter(Ht=>{var je,Lt;const pe=(je=Ht.startedAt)!=null&&je.toDate?Ht.startedAt.toDate():new Date(((Lt=Ht.startedAt)==null?void 0:Lt.seconds)*1e3);return pe>=nt&&pe<=xt});else{switch(F){case"daily":fe=new Date(Kt.getTime()-24*60*60*1e3);break;case"weekly":fe=new Date(Kt.getTime()-7*24*60*60*1e3);break;case"monthly":fe=new Date(Kt.getFullYear(),Kt.getMonth()-1,Kt.getDate());break;case"annually":fe=new Date(Kt.getFullYear()-1,Kt.getMonth(),Kt.getDate());break;default:fe=new Date(Kt.getTime()-7*24*60*60*1e3)}ke=Ft.filter(Ht=>{var je,Lt;return((je=Ht.startedAt)!=null&&je.toDate?Ht.startedAt.toDate():new Date(((Lt=Ht.startedAt)==null?void 0:Lt.seconds)*1e3))>=fe})}const te={};let ie=0,Gt=0;r.forEach(Ht=>{const pe=ke.filter(se=>se.driverId===Ht.id),je=pe.reduce((se,ye)=>{const Mi=(ye.dropoffName||"").trim(),Ni={};Object.entries(Yf).forEach(([Zi,Ji])=>{Ni[jP(Zi)]=Ji});const Ln=Ni[jP(Mi)]||0;return se+Ln},0),Lt=pe.length;ie+=je,Gt+=Lt,te[Ht.id]=[{label:"Rides",earnings:Lt,rides:Lt},{label:"Earnings",earnings:je,rides:Lt}]});const Ae=ke.filter(Ht=>Ht.status==="completed").length,xn=[...r.map((Ht,pe)=>{var ye,tn;const je=te[Ht.id];if(!je)return null;const Lt=((ye=je[1])==null?void 0:ye.earnings)||0,se=((tn=je[0])==null?void 0:tn.rides)||0;return{label:Ht.name,earnings:Lt,rides:se}}).filter(Boolean)].sort((Ht,pe)=>pe.earnings-Ht.earnings);D(xn);const oe=xn.map((Ht,pe)=>`hsl(${xn.length>1?120-pe/(xn.length-1)*120:120}, 70%, 50%)`);Pt(oe),V(te),$(ie),Et(Gt)}catch(Z){Jt.error("Failed to fetch analytics: "+Z.message)}},Qn=async()=>{Tt(!0);try{const Z=$o(Fn(e,"ride_logs"),Hd("startedAt","desc")),Ft=(await Lf(Z)).docs.map(Kt=>({id:Kt.id,...Kt.data()}));vt(Ft),wt(!0)}catch(Z){Jt.error("Failed to fetch destination history: "+Z.message)}finally{Tt(!1)}};R.useEffect(()=>{E==="analytics"&&i&&ls()},[E,F,i,it]);const Di=(Z,gt)=>{yt(Z),z(gt),G("custom"),X(!1),ls()},Es=()=>{G("weekly"),yt(null),z(null),X(!1),ls()};return S.jsxs("div",{className:"min-h-screen bg-gray-100",children:[S.jsx("div",{className:`fixed top-0 left-0 h-full bg-gray-100 text-gray-900 transition-all duration-300 overflow-hidden overscroll-none z-10 ${Mt?"w-full md:w-64":"w-0"}`,children:S.jsxs("div",{className:"p-4 h-full flex flex-col",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h2",{className:"text-xl font-bold",children:"Admin Panel"}),S.jsx("button",{onClick:()=>he(!1),className:"p-1 hover:bg-gray-200 rounded",children:""})]}),S.jsx("nav",{className:"space-y-2 flex-1 overflow-hidden",children:[{type:"analytics",label:"Analytics",icon:kY},{type:"drivers",label:"Drivers",icon:iK},{type:"queue",label:"Queue",icon:KY},{type:"status",label:"Status",icon:PY},{type:"logs",label:"Logs",icon:BY},{type:"history",label:"History",icon:$Y},{type:"pending",label:"Pending",icon:UY}].map(({type:Z,label:gt,icon:Ft})=>S.jsxs("button",{onClick:()=>x(Z),className:`w-full text-left px-3 py-2 rounded flex items-center gap-2 ${E===Z?"bg-blue-600 text-white":"hover:bg-gray-200"}`,children:[S.jsx(Ft,{size:18}),gt,Z==="pending"&&c.length>0&&S.jsx("span",{className:"ml-auto bg-red-600 text-xs rounded-full px-1.5",children:c.length})]},Z))}),S.jsx("div",{className:"mt-auto",children:S.jsxs("button",{onClick:fn,className:"w-full px-3 py-2 rounded bg-red-600 hover:bg-red-700 text-white flex items-center gap-2",children:[S.jsx(JY,{size:18}),"Logout"]})})]})}),S.jsxs("div",{className:`p-4 text-gray-900 ${Mt?"md:ml-64":""} ${Oe&&Mt?"overflow-hidden":""}`,children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("div",{className:"flex items-center gap-2",children:S.jsx("button",{onClick:()=>he(!Mt),className:"p-2 bg-gray-200 rounded hover:bg-gray-300",children:""})}),S.jsx("span",{className:"text-lg text-gray-600",children:new Date().toLocaleDateString("en-US",{month:"long"})+": "+new Date().getDate()+", "+new Date().getFullYear()})]}),E==="drivers"&&S.jsxs(S.Fragment,{children:[S.jsx("input",{type:"text",placeholder:"Search by name or plate",value:v,onChange:Z=>T(Z.target.value),className:"p-2 w-full text-black rounded mb-4"}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-gray-50 text-left",children:[S.jsx("th",{className:"p-2",children:"Name"}),S.jsx("th",{children:"Plate"}),S.jsx("th",{children:"Status"}),S.jsx("th",{children:"Email"}),S.jsx("th",{className:"text-right pr-4",children:"Actions"})]})}),S.jsx("tbody",{children:Je.map(Z=>S.jsxs("tr",{className:"border-t border-gray-300",children:[S.jsx("td",{className:"p-2",children:Z.name}),S.jsx("td",{children:Z.plate}),S.jsx("td",{children:re(Z.id)}),S.jsx("td",{children:Z.email}),S.jsxs("td",{className:"space-x-2 text-right pr-4",children:[S.jsx("button",{onClick:()=>{q(Z),P(!0)},className:"text-blue-400",children:"Edit"}),S.jsx("button",{onClick:()=>Ii(Z.id),className:"text-red-400",children:"Delete"}),S.jsx("button",{onClick:()=>Qi(Z.email),className:"text-purple-400",children:"Reset"}),h.some(gt=>gt.driverId===Z.id)?S.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to remove ${Z.name} from the queue?`)&&mr(Z.id)},className:"text-red-400",children:"Remove from Queue"}):S.jsx("button",{onClick:()=>zs(Z),className:"text-green-400",children:"Add to Queue"})]})]},Z.id))})]})})]}),E==="queue"&&S.jsxs("div",{className:"bg-white p-4 rounded mt-4 border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Driver Queue"}),S.jsx(Qat,{sensors:Ze,collisionDetection:Zot,onDragEnd:Ve,children:S.jsx(rlt,{items:h.map(Z=>Z.driverId),strategy:nlt,children:S.jsx("ul",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:h.map(Z=>{const gt=r.find(Kt=>Kt.id===Z.driverId),Ft=re(Z.driverId);return S.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded cursor-move border border-gray-200",children:[S.jsxs("span",{children:[(gt==null?void 0:gt.name)??Z.name," (",(gt==null?void 0:gt.plate)??Z.plate,")"]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:`text-sm font-medium ${Ft==="In Queue"?"text-green-600":Ft==="Left the queue (In Ride)"?"text-yellow-600":"text-red-600"}`,children:Ft}),S.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to remove ${Z.name} from the queue?`)&&mr(Z.driverId)},className:"text-red-600",children:"Remove"})]})]},Z.driverId)})})})})]}),E==="status"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-900",children:"Driver Status"}),S.jsxs("div",{className:"mb-6",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-green-600",children:"In Queue"}),S.jsx("ul",{className:"space-y-2",children:r.filter(Z=>Z.status==="waiting").sort((Z,gt)=>{var fe,ke,te,ie;const Ft=((ke=(fe=h.find(Gt=>Gt.driverId===Z.id))==null?void 0:fe.joinedAt)==null?void 0:ke.seconds)||0,Kt=((ie=(te=h.find(Gt=>Gt.driverId===gt.id))==null?void 0:te.joinedAt)==null?void 0:ie.seconds)||0;return Ft-Kt}).map(Z=>S.jsx("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200",children:S.jsxs("span",{children:[Z.name," (",Z.plate,") -"," ",S.jsx("span",{className:"font-semibold text-green-600",children:"In Queue"})]})},Z.id))})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-yellow-600",children:"In Ride"}),S.jsx("ul",{className:"space-y-2",children:r.filter(Z=>Z.status==="in ride").sort((Z,gt)=>{var fe,ke;const Ft=((fe=Z.leftAt)==null?void 0:fe.seconds)||0,Kt=((ke=gt.leftAt)==null?void 0:ke.seconds)||0;return Ft-Kt}).map(Z=>{var Kt;const gt=Z.selectedDestination||"Unknown",Ft=Ye((Kt=Z.leftAt)==null?void 0:Kt.seconds);return S.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200",children:[S.jsxs("span",{children:[Z.name," (",Z.plate,") -"," ",S.jsxs("span",{className:"font-semibold text-yellow-600",children:["In route to ",gt]})]}),S.jsx("span",{className:"text-sm text-gray-500",children:Ft})]},Z.id)})})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-red-600",children:"Offline"}),S.jsx("ul",{className:"space-y-2",children:r.filter(Z=>Z.status==="offline").sort((Z,gt)=>Z.name.localeCompare(gt.name)).map(Z=>S.jsx("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200",children:S.jsxs("span",{children:[Z.name," (",Z.plate,") -"," ",S.jsx("span",{className:"font-semibold text-red-600",children:"Offline"})]})},Z.id))})]})]}),E==="logs"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Admin Activity Logs"}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-gray-50 text-left",children:[S.jsx("th",{className:"p-2",children:"Actions"}),S.jsx("th",{className:"p-2",children:"Date and Time"})]})}),S.jsx("tbody",{children:m.map(Z=>{var gt;return S.jsxs("tr",{className:"border-t border-gray-300",children:[S.jsxs("td",{className:"p-2",children:[S.jsx("strong",{children:Z.email}),": ",Z.action]}),S.jsx("td",{className:"p-2",children:(gt=Z.timestamp)!=null&&gt.seconds?Ye(Z.timestamp.seconds):"No time"})]},Z.id)})})]})})]}),E==="history"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Driver History"}),S.jsx("button",{onClick:Qn,disabled:Bt,className:"mb-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:Bt?"Loading...":"View Destination History"}),S.jsx("div",{className:"overflow-y-auto max-h-[400px] space-y-2",children:r.map(Z=>{var gt;return S.jsx("div",{className:"border-b border-gray-300 py-1",children:S.jsxs("p",{className:"text-sm text-gray-900",children:[S.jsx("strong",{children:Z.name}),"  ",Z.plate,"  Registered on:"," ",Ye((gt=Z.createdAt)==null?void 0:gt.seconds)]})},Z.id)})}),Nt&&S.jsxs("div",{className:"mt-4",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-gray-900",children:"Destination History (Chronological)"}),ct.length===0?S.jsx("p",{className:"text-gray-500",children:"No rides found."}):S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden border border-gray-300",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-gray-50 text-left",children:[S.jsx("th",{className:"p-2",children:"Driver Name"}),S.jsx("th",{children:"Plate Number"}),S.jsx("th",{children:"Destination"}),S.jsx("th",{children:"Date and Time"})]})}),S.jsx("tbody",{children:ct.map(Z=>{var Kt,fe;const gt=r.find(ke=>ke.id===Z.driverId),Ft=(Kt=Z.startedAt)!=null&&Kt.toDate?Z.startedAt.toDate():new Date(((fe=Z.startedAt)==null?void 0:fe.seconds)*1e3);return S.jsxs("tr",{className:"border-t border-gray-300",children:[S.jsx("td",{className:"p-2 text-gray-900",children:(gt==null?void 0:gt.name)||"Unknown Driver"}),S.jsx("td",{className:"text-gray-900",children:(gt==null?void 0:gt.plate)||"N/A"}),S.jsx("td",{className:"text-gray-900",children:Z.dropoffName}),S.jsx("td",{className:"text-gray-900",children:Ft.toLocaleString()})]},Z.id)})})]})})]})]}),E==="pending"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"Pending Registration Requests"}),c.length===0?S.jsx("p",{className:"text-gray-500",children:"No pending requests."}):S.jsxs("table",{className:"w-full text-sm bg-white rounded overflow-hidden border border-gray-300",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-gray-50 text-left",children:[S.jsx("th",{className:"p-2",children:"Name"}),S.jsx("th",{children:"Plate"}),S.jsx("th",{children:"Email"}),S.jsx("th",{children:"Phone"}),S.jsx("th",{children:"Status"}),S.jsx("th",{className:"text-right pr-4",children:"Actions"})]})}),S.jsx("tbody",{children:c.map(Z=>S.jsxs("tr",{className:"border-t border-gray-300",children:[S.jsx("td",{className:"p-2 text-gray-900",children:Z.name}),S.jsx("td",{className:"text-gray-900",children:Z.plate}),S.jsx("td",{className:"text-gray-900",children:Z.email}),S.jsx("td",{className:"text-gray-900",children:Z.phone||"N/A"}),S.jsx("td",{className:"text-gray-900",children:"Pending"}),S.jsxs("td",{className:"space-x-2 text-right pr-4",children:[S.jsx("button",{onClick:async()=>{try{await mn(ce(e,"drivers",Z.id),{verified:!0},{merge:!0}),Jt.success(`Verified ${Z.name}`),await mn(ce(Fn(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Approved driver registration: ${Z.name} (${Z.plate})`,timestamp:Ls()})}catch(gt){Jt.error("Failed to verify: "+gt.message)}},className:"text-green-600",children:"Approve"}),S.jsx("button",{onClick:async()=>{try{await Yo(ce(e,"drivers",Z.id)),Jt.success(`Rejected and deleted ${Z.name}`),await mn(ce(Fn(e,"adminAccessLogs")),{email:i==null?void 0:i.email,action:`Rejected driver registration: ${Z.name} (${Z.plate})`,timestamp:Ls()})}catch(gt){Jt.error("Failed to delete: "+gt.message)}},className:"text-red-600",children:"Reject"})]})]},Z.id))})]})]}),E==="analytics"&&S.jsxs("div",{className:"mt-4 bg-white p-4 rounded border border-gray-300 shadow-sm",children:[S.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-900",children:"Analytics Dashboard"}),S.jsxs("div",{className:"flex gap-2 mb-6",children:[["daily","weekly","monthly","annually"].map(Z=>S.jsx("button",{onClick:()=>G(Z),className:`px-4 py-2 rounded ${F===Z?"bg-blue-600":"bg-gray-200"}`,children:Z.charAt(0).toUpperCase()+Z.slice(1)},Z)),S.jsx("button",{onClick:()=>X(!0),className:`px-4 py-2 rounded ${F==="custom"?"bg-blue-600":"bg-gray-200"}`,children:"Custom"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[S.jsxs("div",{className:"bg-white p-4 rounded border border-gray-300",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-gray-900",children:"Overall Statistics"}),k.length>0&&S.jsx(Drt,{data:{labels:k.map(Z=>Z.label),datasets:[{data:k.map(Z=>Z.earnings),backgroundColor:zt,borderColor:zt,borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:Z=>`${Z.label}: ${Z.parsed}`}}}}}),S.jsxs("div",{className:"mt-4 text-sm font-bold",children:[S.jsxs("p",{children:[S.jsx("span",{className:"text-gray-900",children:"Total Rides:"})," ",H]}),S.jsxs("p",{children:[S.jsx("span",{className:"text-gray-900",children:"Total Earnings:"})," ",B]})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded border border-gray-300",children:[S.jsx("h3",{className:"text-md font-semibold mb-2 text-gray-900",children:"Driver Performance"}),S.jsxs("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:[[...r].sort((Z,gt)=>{var fe,ke,te,ie;const Ft=((ke=(fe=M[Z.id])==null?void 0:fe[1])==null?void 0:ke.earnings)||0;return(((ie=(te=M[gt.id])==null?void 0:te[1])==null?void 0:ie.earnings)||0)-Ft}).map((Z,gt,Ft)=>{var ke,te;const Kt=M[Z.id];if(!Kt||Kt.length===0)return null;const fe=Ft.length>1?120-gt/(Ft.length-1)*120:120;return S.jsxs("div",{className:"p-3 rounded font-medium mb-2",style:{backgroundColor:`hsl(${fe}, 70%, 50%)`},children:[S.jsxs("h4",{className:"font-medium mb-2 text-white",children:[Z.name," (",Z.plate,")"]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[S.jsx("div",{children:S.jsxs("span",{className:"text-white",children:["Rides: ",((ke=Kt[0])==null?void 0:ke.rides)||0]})}),S.jsx("div",{children:S.jsxs("span",{className:"text-white",children:["Earnings: ",((te=Kt[1])==null?void 0:te.earnings)||0]})})]})]},Z.id)}),S.jsxs("div",{className:"bg-gray-50 p-3 rounded font-bold border-t border-gray-300",children:[S.jsx("h4",{className:"mb-2 text-gray-900",children:"Total for All Drivers"}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[S.jsxs("div",{children:[S.jsx("span",{className:"text-gray-900",children:"Total Rides:"})," ",H]}),S.jsxs("div",{children:[S.jsx("span",{className:"text-gray-900",children:"Total Earnings:"})," ",B]})]})]})]})]})]})]}),C&&N&&S.jsx(Mot,{driver:N,onClose:()=>P(!1),onSaveSuccess:()=>P(!1),user:i}),_t&&S.jsx(fU,{isOpen:_t,onClose:()=>X(!1),onApply:Di,onClear:Es})]})]})},alt=()=>S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-gray-900 bg-gray-100",children:[S.jsx("h1",{className:"text-6xl font-bold mb-4",children:"404"}),S.jsx("p",{className:"text-lg mb-6",children:"Page not found"}),S.jsx("a",{href:"/home",className:"text-blue-400 underline",children:"Go back to Home"})]}),Jb="agduwaadmin@gmail.com",llt=()=>{const{user:e,loading:t}=Pp(),n=Rc();R.useEffect(()=>{var i;if(!t){const s=((i=e==null?void 0:e.email)==null?void 0:i.toLowerCase())===(Jb==null?void 0:Jb.toLowerCase());(!e||!s)&&n("/home")}},[e,t,n])},clt="agduwaadmin@gmail.com",ult=({children:e})=>{var i;const{loading:t,user:n}=Pp();return llt(),t?S.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-900 text-white",children:[S.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-white border-t-transparent rounded-full"}),S.jsx("span",{className:"ml-3",children:"Checking access..."})]}):!n||((i=n.email)==null?void 0:i.toLowerCase())!==clt.toLowerCase()?S.jsx(Ng,{to:"/",replace:!0}):S.jsx(S.Fragment,{children:e})},tT="agduwaadmin@gmail.com".trim().toLowerCase(),hlt=()=>{var v;const[e,t]=R.useState(null),[n,i]=R.useState(null),[s,r]=R.useState(!0),[a,c]=R.useState(!1),[u,h]=R.useState("loading"),f=D_();if(R.useEffect(()=>{const T=oE(Vs,async E=>{var x;if(E){t(E);const C=((x=E.email)==null?void 0:x.trim().toLowerCase())||"";console.log("ADMIN_EMAIL:",tT),console.log("Logged in user email:",C);const P=C===tT;if(console.log("Is admin user:",P),P){try{await $g(Fn(f,"adminAccessLogs"),{email:E.email,uid:E.uid,accessedAt:Ls()})}catch(N){console.error("Error logging admin access:",N)}c(!0),i(!0),setTimeout(()=>{c(!1)},2e3),localStorage.setItem("driver",JSON.stringify({id:E.uid,email:E.email,verified:!0}))}else try{const N=await vp(ce(f,"drivers",E.uid));if(N.exists()){const q=N.data();q.verified?(c(!0),i(!0),setTimeout(()=>{c(!1)},2e3),localStorage.setItem("driver",JSON.stringify({id:E.uid,email:E.email,...q}))):(await Vs.signOut(),t(null),i(!1),yi.error("Your account is not verified by admin yet. Please wait for approval."),localStorage.removeItem("driver"))}else await Vs.signOut(),t(null),i(!1),yi.error("No profile found for this account."),localStorage.removeItem("driver")}catch(N){console.error("Error checking verification:",N),await Vs.signOut(),t(null),i(!1),yi.error("Error verifying account."),localStorage.removeItem("driver")}}else t(null),i(!1),localStorage.removeItem("driver");r(!1)});return()=>T()},[f]),s)return S.jsxs("div",{className:"h-screen bg-white relative",children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:`
      .loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .car {
        animation: speeder 0.4s linear infinite;
        width: 900px;
        height: 900px;
      }
      @media (max-width: 768px) {
        .car {
          width: 300px;
          height: 300px;
        }
      }
      @keyframes speeder {
        0% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        10% {
          transform: translate(-1px, -3px) rotate(-1deg);
        }
        20% {
          transform: translate(-2px, 0px) rotate(1deg);
        }
        30% {
          transform: translate(1px, 2px) rotate(0deg);
        }
        40% {
          transform: translate(1px, -1px) rotate(1deg);
        }
        50% {
          transform: translate(-1px, 3px) rotate(-1deg);
        }
        60% {
          transform: translate(-1px, 1px) rotate(0deg);
        }
        70% {
          transform: translate(3px, 1px) rotate(-1deg);
        }
        80% {
          transform: translate(-2px, -1px) rotate(1deg);
        }
        90% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        100% {
          transform: translate(1px, -2px) rotate(-1deg);
        }
      }
    `}}),S.jsx("div",{className:"loader",children:S.jsx("img",{src:"/img/vecteezy_sports-car-logo-icon-motor-vehicle-silhouette-emblems-auto_.jpg",alt:"car",className:"car"})})]});if(a)return S.jsxs("div",{className:"h-screen bg-white relative",children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:`
      .loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .car {
        animation: speeder 0.4s linear infinite;
        width: 900px;
        height: 900px;
      }
      @media (max-width: 768px) {
        .car {
          width: 300px;
          height: 300px;
        }
      }
      @keyframes speeder {
        0% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        10% {
          transform: translate(-1px, -3px) rotate(-1deg);
        }
        20% {
          transform: translate(-2px, 0px) rotate(1deg);
        }
        30% {
          transform: translate(1px, 2px) rotate(0deg);
        }
        40% {
          transform: translate(1px, -1px) rotate(1deg);
        }
        50% {
          transform: translate(-1px, 3px) rotate(-1deg);
        }
        60% {
          transform: translate(-1px, 1px) rotate(0deg);
        }
        70% {
          transform: translate(3px, 1px) rotate(-1deg);
        }
        80% {
          transform: translate(-2px, -1px) rotate(1deg);
        }
        90% {
          transform: translate(2px, 1px) rotate(0deg);
        }
        100% {
          transform: translate(1px, -2px) rotate(-1deg);
        }
      }
    `}}),S.jsx("div",{className:"loader",children:S.jsx("img",{src:"/img/vecteezy_sports-car-logo-icon-motor-vehicle-silhouette-emblems-auto_.jpg",alt:"car",className:"car"})})]});const m=!!e&&n===!0&&!a,y=((v=e==null?void 0:e.email)==null?void 0:v.trim().toLowerCase())===tT;return S.jsxs(itt,{children:[S.jsx(eS,{position:"top-center"}),S.jsxs(uB,{children:[S.jsx(Sr,{path:"/",element:m?y?S.jsx(Ng,{to:"/admin",replace:!0}):S.jsx(Ng,{to:"/home",replace:!0}):S.jsx(Ytt,{})}),S.jsx(Sr,{path:"/driver/:driverId",element:S.jsx(Cot,{})}),m&&S.jsxs(Sr,{element:S.jsx(Aot,{}),children:[S.jsx(Sr,{path:"/home",element:S.jsx(stt,{})}),S.jsx(Sr,{path:"/history",element:S.jsx(Jtt,{})}),S.jsx(Sr,{path:"/analytics",element:S.jsx(xot,{})}),S.jsx(Sr,{path:"/profile",element:S.jsx(uet,{})})]}),m&&S.jsx(Sr,{path:"/admin",element:S.jsx(ult,{children:S.jsx(olt,{})})}),!m&&S.jsx(Sr,{path:"*",element:S.jsx(Ng,{to:"/"})}),S.jsx(Sr,{path:"*",element:S.jsx(alt,{})})]})]})};gF.createRoot(document.getElementById("root")).render(S.jsx(xe.StrictMode,{children:S.jsx(PB,{children:S.jsxs(Ztt,{children:[S.jsx(hlt,{}),S.jsx(eS,{position:"top-center",toastOptions:{duration:4e3}})," "]})})}));
